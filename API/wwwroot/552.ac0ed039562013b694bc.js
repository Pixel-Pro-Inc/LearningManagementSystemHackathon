"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[552],{2552:(Bp,la,ae)=>{ae.r(la),ae.d(la,{CalendarModule:()=>Np});var ji=ae(8583),Pr=ae(6901),Q=ae(4762),T=ae(639),W=ae(1177),s=ae(1727),Ee=ae(8760),ca=ae(8386),qr=ae(7409),J=ae(310),kt=ae(1355),It=ae(3773),Ct=ae(1155),ha=ae(707),Ne=(ae(4957),"cellClick"),Ui="select",fe="actionBegin",Qe="actionComplete",pa="actionFailure",Fr="navigating",ue="renderCell",Lt="eventClick",Ht="eventRendered",Yi="popupOpen",Nr="popupClose",Pt="inlineClick",Ae="data-ready",lt="events-loaded",ge="content-ready",li="virtual-scroll",be="scroll-ui-update",Wr="ui-update",Xe="document-click",zr="cell-mouse-down",Z=864e5,oe=6e4;function qt(l,i){var e,t=(0,s.az)("div",{className:i}).cloneNode();return t.style.visibility="hidden",t.style.position="absolute",l.appendChild(t),e=t.getBoundingClientRect().height,(0,s.Od)(t),e}function fa(l){var i=getComputedStyle(l);return window.WebKitCSSMatrix?new WebKitCSSMatrix(i.webkitTransform).m41:0}function me(l,i){var e=new Date(l.getTime());return i=(i-e.getDay()-7)%7,new Date(e.setDate(e.getDate()+i))}function _i(l,i){var e=me(l,i),t=new Date(e.getFullYear(),e.getMonth(),e.getDate()+6);return new Date(t.getTime())}function Ft(l){return new Date(l.getFullYear(),l.getMonth(),1)}function St(l){return new Date(l.getFullYear(),l.getMonth()+1,0)}function jr(l){var i=new Date(l.getFullYear(),0,1).valueOf(),e=new Date(l.getFullYear(),l.getMonth(),l.getDate()).valueOf();return Math.ceil((e-i+Z)/Z/7)}function Gi(l,i){var e=l.getTimezoneOffset(),t=new Date(l.getTime()+i),r=t.getTimezoneOffset()-e;return l.setTime(t.getTime()+r*oe),l}function C(l){return new Date(l.getFullYear(),l.getMonth(),l.getDate())}function Je(l){var i=new Date(l.getFullYear(),l.getMonth(),l.getDate(),0,0,0).getTimezoneOffset(),t=l.getTimezoneOffset()-i;return l.getTime()-new Date(l.getFullYear(),l.getMonth(),l.getDate(),0,0,0).getTime()-60*t*1e3}function V(l,i){return l=new Date(""+l),new Date(l.setDate(l.getDate()+i))}function Be(l,i){var e=(l=new Date(""+l)).getDate();return l.setDate(1),l.setMonth(l.getMonth()+i),l.setDate(Math.min(e,function(l){return St(l).getDate()}(l))),l}function Se(l,i,e){var t=new Date(l.getTime());t.setHours(i.getHours()),t.setMinutes(i.getMinutes()),t.setSeconds(i.getSeconds());var r=new Date(l.getTime());return 0===e.getHours()?r=V(r,1):(r.setHours(e.getHours()),r.setMinutes(e.getMinutes()),r.setSeconds(e.getSeconds())),{startHour:t,endHour:r}}function Ur(l,i){var e=C(new Date(l)),t=C(new Date(i));return Math.round((t.getTime()-e.getTime())/Z)}function ma(l){return-1!==l.indexOf("Date")?new Date(parseInt(l.match(/\d+/g).toString(),10)):-1!==l.indexOf("T")?new Date(l):new Date(l.replace(/-/g,"/"))}var Yr=null;function Zi(){if(null!==Yr)return Yr;var i,l=(0,s.az)("div");l.style.cssText="width:100px;height: 100px;overflow: scroll;position: absolute;top: -9999px;",document.body.appendChild(l);var e=devicePixelRatio?"1.10"===devicePixelRatio.toFixed(2)||devicePixelRatio<=1?Math.ceil(devicePixelRatio%1):Math.floor(devicePixelRatio%1):0;return i=l.offsetWidth-l.clientWidth-e|0,document.body.removeChild(l),Yr=i}function ci(l,i,e,t,r){for(var n=0,a=l.length;n<a;n++)if(l[n][i]===e){if(!t)return n;var o=r.slice(-2)[0].field;if((t[o]instanceof Array?t[o]:[t[o]]).join(",").includes(l[n][r.slice(-1)[0].groupIDField]))return n}return-1}function _r(l){var i=getComputedStyle(l);return l.offsetHeight+(parseInt(i.marginTop,10)||0)+(parseInt(i.marginBottom,10)||0)}function Ie(l){for(var e=0,t=[].slice.call(l.children);e<t.length;e++)l.removeChild(t[e])}function Yo(l){var i=new Date(l.getFullYear(),0,1),e=new Date(l.getFullYear(),6,1);return l.getTimezoneOffset()<Math.max(i.getTimezoneOffset(),e.getTimezoneOffset())}function ee(l){var i=l.getFullYear(),e=l.getMonth(),t=l.getDate(),r=l.getHours(),n=l.getMinutes(),a=l.getSeconds(),o=l.getMilliseconds();return Date.UTC(i,e,t,r,n,a,o)}function Y(l,i){if("multiple"===i)l=l.split(" ").map(function(t){return t.charAt(0).toLocaleUpperCase()+t.substring(1)}).join(" ");else if("single"===i){if(l[0]>="0"&&l[0]<="9"){var e=l.match(/[a-zA-Z]/);l=(0,s.le)(e)?l:l.slice(0,e.index)+l[e.index].toLocaleUpperCase()+l.slice(e.index+1)}l=l[0].toLocaleUpperCase()+l.slice(1)}return l}var Ki="e-schedule",Gr="e-rtl",Nt="e-device",Zr="e-multi-drag",$="e-icons",ct="e-enable",j="e-disable",Me="e-table-container",U="e-all-day-cells",We="e-all-day-row",X="e-content-table",R="e-work-cells",Bt="e-work-hours",re="e-popup-open",ye="e-date-header-wrap",hi="e-date-header-container",ie="e-header-cells",_="e-other-month",Qi="e-current-day",Kr="e-current-date",Qr="e-current-panel",Xr="e-previous-panel",Ta="e-next-panel",ui="e-translate",ht="e-event-table",pt="e-resource-group-cells",$r="e-resource-text",Oe="e-resource-column-wrap",Xi="e-resource-column-table",Da="e-child-node",Le="e-parent-node",Wt="e-resource-expand",$e="e-resource-collapse",zt="e-resource-tree-icon",Ve="e-resource-cells",en="e-time-cells-wrap",Ca="e-time-cells",jt="e-time-slots",Sa="e-alternate-cells",tn="e-current-time",Ut="e-current-timeline",rn="e-hide-childs",nn="e-scroll-container",Aa="e-timeline-wrapper",G="e-appointment-wrapper",di="e-schedule-resource-toolbar-container",ba="e-schedule-toolbar",sn="e-schedule-resource-toolbar",Yt="e-selected-cell",on="e-week-number-wrapper",Ji="e-week-number",$i="e-appointment-wrap",vi="e-wrapper-container",He="e-appointment-container",P="e-appointment",_t="e-block-appointment",er="e-block-indicator",Gt="e-appointment-border",tr="e-appointment-details",ln="e-subject-wrap",Oa="e-resource-name",Pe="e-time",ir="e-table-wrap",rr="e-outer-table",F="e-content-wrap",fi="e-virtual-track",ze="e-agenda-cells",nr="e-active-appointment-agenda",Va="e-day-date-header",Ma="e-date-column",Et="e-navigate",Zt="e-date-header",Ra="e-day-border",cn="e-date-time",hn="e-no-event",pn="e-appointment-indicator",ar="e-indicator",xa="e-left-icon",ka="e-right-icon",je="e-event-action",sr="e-new-event",Kt="e-event-resize",or="e-left-handler",lr="e-right-handler",mi="e-recurrence-icon",yi="e-recurrence-edit-icon",gn="e-header-row",Ue="e-all-day-appointment-wrapper",le="e-all-day-appointment",La="e-appointment-hide",Ti="e-row-count-wrapper",wi="e-all-day-appointment-section",cr="e-appointment-expand",Ha="e-appointment-collapse",Te="e-more-indicator",mn="e-cell-popup",yn="e-event-popup",Tn="e-popup-header",Pa="e-header-icon-wrapper",wn="e-popup-footer",qa="e-date-time-details",hr="e-event-details",pr="e-event-create",Qt="e-event-edit",et="e-event-delete",ce="e-text-ellipsis",tt="e-more-popup-wrapper",At="e-more-event-popup",Dn="e-more-event-date-header",Fa="e-header-day",Xt="e-header-date",Cn="e-more-event-close",ur="e-more-event-content",Sn="e-more-appointment-wrapper",En="e-quick-dialog-occurrence-event",An="e-quick-dialog-series-event",Na="e-quick-dialog-following-events",Ba="e-following-events-dialog",bn="e-quick-dialog-delete",Di="e-quick-dialog-cancel",dt="e-quick-alertok",Ye="e-quick-alertcancel",On="e-quick-alertfollowing",Wa="e-quick-dialog-alert-btn",it="e-schedule-dialog",vt="e-schedule-form",Ci="e-all-day",ft="e-time-zone",Si="e-repeat",te="e-subject",gt="e-location",rt="e-start",mt="e-end",bt="e-description",Ei="e-time-zone-row",Ai="e-start-time-zone",bi="e-end-time-zone",za="e-save-icon",ja="e-event-cancel",dr="e-event-save",Ua="e-title-text",Ya="e-icon-disable",Ot="e-edit",vr="e-edit-icon",Oi="e-delete",_a="e-delete-icon",Vt="e-close",fr="e-close-icon",Ga="e-schedule-error",Vn="e-animate",he="e-hidden",Jt="e-disable-dates",yt="e-quick-popup-wrapper",Za="e-resource-menu",Ka="e-icon-menu",Qa="e-resource-level-title",Xa="e-resource-tree-popup-overlay",Vi="e-resource-tree-popup",Ja="e-resource",$a="e-resource-icon",es="e-resource-details",ts="e-date-time-icon",Mn="e-virtual-scroll",is="e-icon-disable",Rn="e-auto-height",rs="e-ignore-whitespace",Mi="e-read-only",we="e-inline-subject",gr="e-inline-appointment",ns="e-scroll-hidden",xi="e-all-day-scroll",mr="e-all-day-auto",xn=function(){function l(i){this.parent=i,this.l10n=this.parent.localeObj,this.renderHeader(),this.addEventListener()}return l.prototype.addEventListener=function(){this.parent.on(Xe,this.closeHeaderPopup,this)},l.prototype.removeEventListener=function(){this.parent.off(Xe,this.closeHeaderPopup)},l.prototype.closeHeaderPopup=function(i){var e=(0,s.oq)(i.event.target,".e-date-range,.e-header-popup,.e-day,.e-selected"),t=(0,s.oq)(i.event.target,".e-hor-nav,.e-toolbar-pop"),r=this.parent.element.querySelector("."+F);if(this.parent.isAdaptive)if((0,s.le)(t)||!t.classList.contains("e-toolbar-pop")&&!t.classList.contains("e-hor-nav")||t.classList.contains("e-hor-nav")&&this.element.querySelector(".e-toolbar-pop").classList.contains(re)){(0,s.IV)([r],ns);var n=this.element.querySelector(".e-toolbar-pop");if(!(0,s.le)(n)){var a=n.ej2_instances[0];a&&((0,s.le)(t)||!t.classList.contains("e-hor-nav")||!n.classList.contains(re))&&a.hide()}}else(0,s.cn)([r],ns);!(0,s.le)(e)||this.hideHeaderPopup()},l.prototype.hideHeaderPopup=function(){this.headerPopup&&this.headerPopup.hide()},l.prototype.renderHeader=function(){this.element=(0,s.az)("div",{className:"e-schedule-toolbar-container"});var i=(0,s.az)("div",{className:ba});this.element.appendChild(i),this.parent.element.insertBefore(this.element,this.parent.element.firstElementChild),this.renderToolbar()},l.prototype.renderToolbar=function(){var i=this,e=this.getItems();this.parent.trigger(fe,{requestType:"toolbarItemRendering",items:e},function(t){i.toolbarObj=new ca.o8({items:t.items,overflowMode:"Popup",clicked:i.toolbarClickHandler.bind(i),enableRtl:i.parent.enableRtl,locale:i.parent.locale}),i.toolbarObj.appendTo(i.parent.element.querySelector("."+ba));var r=i.toolbarObj.element.querySelector(".e-prev");r&&r.firstElementChild.setAttribute("title",i.l10n.getConstant("previous"));var n=i.toolbarObj.element.querySelector(".e-next");n&&n.firstElementChild.setAttribute("title",i.l10n.getConstant("next")),i.updateAddIcon(),i.updateActiveView(),i.parent.trigger(Qe,{requestType:"toolBarItemRendered",items:i.toolbarObj.items})})},l.prototype.updateItems=function(){var i=this;if(this.toolbarObj){var e=this.getItems();this.parent.trigger(fe,{requestType:"toolbarItemRendering",items:e},function(t){i.toolbarObj.items=t.items,i.toolbarObj.dataBind(),i.parent.trigger(Qe,{requestType:"toolBarItemRendered",items:i.toolbarObj.items})})}},l.prototype.getPopUpRelativeElement=function(){return this.parent.isAdaptive?this.toolbarObj.element:this.element.querySelector(".e-date-range")},l.prototype.setDayOfWeek=function(i){this.headerCalendar&&(this.headerCalendar.firstDayOfWeek=i,this.headerCalendar.dataBind())},l.prototype.setCalendarDate=function(i){this.headerCalendar&&(this.headerCalendar.value=i,this.headerCalendar.dataBind())},l.prototype.setCalendarMinMaxDate=function(){this.headerCalendar&&(this.headerCalendar.min=this.parent.minDate,this.headerCalendar.max=this.parent.maxDate,this.headerCalendar.dataBind())},l.prototype.getCalendarView=function(){return["Month","MonthAgenda","TimelineMonth"].indexOf(this.parent.currentView)>-1?"Year":["Year","TimelineYear"].indexOf(this.parent.currentView)>-1?"Decade":"Month"},l.prototype.setCalendarView=function(){if(this.headerCalendar){var i=this.getCalendarView();this.headerCalendar.depth=i,this.headerCalendar.start=i,this.headerCalendar.refresh()}},l.prototype.updateActiveView=function(){var i=[].slice.call(this.toolbarObj.element.querySelectorAll(".e-views"));(0,s.IV)(i,["e-active-view"]),i.length>0&&i[this.parent.viewIndex]&&(0,s.cn)([i[this.parent.viewIndex]],["e-active-view"])},l.prototype.updateDateRange=function(i){var e=this.toolbarObj.element.querySelector(".e-date-range");e&&(e.setAttribute("aria-label",i),e.querySelector(".e-tbar-btn-text").innerHTML=i,this.refresh())},l.prototype.refresh=function(){this.toolbarObj&&this.toolbarObj.refreshOverflow()},l.prototype.updateAddIcon=function(){var i=this.toolbarObj.element.querySelector(".e-add");i&&(this.parent.eventSettings.allowAdding?(0,s.IV)([i],he):(0,s.cn)([i],he))},l.prototype.getDateRangeText=function(){return Y(this.parent.globalize.formatDate(this.parent.selectedDate,{format:"MMMM y",calendar:this.parent.getCalendarMode()}),"single")},l.prototype.getItems=function(){var i=[];if(i.push({align:"Left",prefixIcon:"e-icon-prev",tooltipText:"Previous",overflow:"Show",cssClass:"e-prev",htmlAttributes:{"aria-label":"previous period",role:"navigation"}}),i.push({align:"Left",prefixIcon:"e-icon-next",tooltipText:"Next",overflow:"Show",cssClass:"e-next",htmlAttributes:{"aria-label":"next period",role:"navigation"}}),i.push({align:"Left",text:this.getDateRangeText(),suffixIcon:"e-icon-down-arrow",cssClass:"e-date-range",overflow:"Show",htmlAttributes:{"aria-atomic":"true","aria-live":"assertive","aria-label":"title",role:"navigation"}}),this.parent.isAdaptive||this.parent.enableAdaptiveUI?(i.push({align:"Right",showAlwaysInPopup:this.parent.isAdaptive||this.parent.enableAdaptiveUI,prefixIcon:"e-icon-add",text:this.l10n.getConstant("newEvent"),cssClass:"e-add",overflow:"Show"}),i.push({align:"Right",showAlwaysInPopup:this.parent.isAdaptive||this.parent.enableAdaptiveUI,prefixIcon:"e-icon-today",text:this.l10n.getConstant("today"),cssClass:"e-today",overflow:"Show"})):(i.push({align:"Right",showAlwaysInPopup:this.parent.isAdaptive||this.parent.enableAdaptiveUI,prefixIcon:"e-icon-day",text:this.l10n.getConstant("today"),cssClass:"e-today",overflow:"Show"}),this.parent.views.length>1&&i.push({align:"Right",type:"Separator",cssClass:"e-schedule-seperator"})),this.parent.views.length>1)for(var e=0,t=this.parent.views;e<t.length;e++)i.push(this.getItemObject(t[e]));return i},l.prototype.getItemObject=function(i){var e,t;"string"==typeof i?(e=i.toLowerCase(),t=null):(e=i.option.toLowerCase(),t=i.displayName);var r,a=this.parent.isAdaptive||this.parent.enableAdaptiveUI;switch(e){case"day":r={align:"Right",showAlwaysInPopup:a,prefixIcon:"e-icon-day",text:t||this.l10n.getConstant("day"),cssClass:"e-views e-day"};break;case"week":r={align:"Right",showAlwaysInPopup:a,prefixIcon:"e-icon-week",text:t||this.l10n.getConstant("week"),cssClass:"e-views e-week"};break;case"workweek":r={align:"Right",showAlwaysInPopup:a,prefixIcon:"e-icon-workweek",text:t||this.l10n.getConstant("workWeek"),cssClass:"e-views e-work-week"};break;case"month":r={align:"Right",showAlwaysInPopup:a,prefixIcon:"e-icon-month",text:t||this.l10n.getConstant("month"),cssClass:"e-views e-month"};break;case"year":r={align:"Right",showAlwaysInPopup:a,prefixIcon:"e-icon-year",text:t||this.l10n.getConstant("year"),cssClass:"e-views e-year"};break;case"agenda":r={align:"Right",showAlwaysInPopup:a,prefixIcon:"e-icon-agenda",text:t||this.l10n.getConstant("agenda"),cssClass:"e-views e-agenda"};break;case"monthagenda":r={align:"Right",showAlwaysInPopup:a,prefixIcon:"e-icon-month-agenda",text:t||this.l10n.getConstant("monthAgenda"),cssClass:"e-views e-month-agenda"};break;case"timelineday":r={align:"Right",showAlwaysInPopup:a,prefixIcon:"e-icon-timeline-day",text:t||this.l10n.getConstant("timelineDay"),cssClass:"e-views e-timeline-day"};break;case"timelineweek":r={align:"Right",showAlwaysInPopup:a,prefixIcon:"e-icon-timeline-week",text:t||this.l10n.getConstant("timelineWeek"),cssClass:"e-views e-timeline-week"};break;case"timelineworkweek":r={align:"Right",showAlwaysInPopup:a,prefixIcon:"e-icon-timeline-workweek",text:t||this.l10n.getConstant("timelineWorkWeek"),cssClass:"e-views e-timeline-work-week"};break;case"timelinemonth":r={align:"Right",showAlwaysInPopup:a,prefixIcon:"e-icon-timeline-month",text:t||this.l10n.getConstant("timelineMonth"),cssClass:"e-views e-timeline-month"};break;case"timelineyear":r={align:"Right",showAlwaysInPopup:a,prefixIcon:"e-icon-timeline-year-"+("Vertical"===i.orientation?"vertical":"horizontal"),text:t||this.l10n.getConstant("timelineYear"),cssClass:"e-views e-timeline-year"}}return r},l.prototype.renderHeaderPopup=function(){var i=(0,s.az)("div",{className:"e-header-popup"}),e=(0,s.az)("div",{className:"e-header-calendar"});i.appendChild(e),this.element.appendChild(i),this.headerPopup=new Ee.GI(i,{actionOnScroll:"hide",targetType:"relative",relateTo:this.getPopUpRelativeElement(),position:{X:"left",Y:"bottom"},enableRtl:this.parent.enableRtl});var t=this.getCalendarView(),r="Month"===this.parent.currentView&&!(0,s.le)(this.parent.activeViewOptions.displayDate)&&!this.hasSelectedDate();this.headerCalendar=new qr.f({value:r?this.parent.activeViewOptions.displayDate:this.parent.selectedDate,min:this.parent.minDate,max:this.parent.maxDate,firstDayOfWeek:this.parent.activeViewOptions.firstDayOfWeek,enableRtl:this.parent.enableRtl,locale:this.parent.locale,depth:t,start:t,calendarMode:this.parent.calendarMode,change:this.calendarChange.bind(this)}),this.setCalendarTimezone(),this.headerCalendar.appendTo(e),this.headerPopup.hide()},l.prototype.calendarChange=function(i){if(i.value.getTime()!==this.parent.selectedDate.getTime()){var e=C(new Date(i.value));this.parent.changeDate(e)}this.headerPopup.hide()},l.prototype.setCalendarTimezone=function(){this.headerCalendar&&(this.headerCalendar.timezone=this.parent.timezone||this.parent.tzModule.getLocalTimezoneName())},l.prototype.calculateViewIndex=function(i){var e=(0,s.oq)(i.originalEvent.target,".e-views");return[].slice.call(this.element.querySelectorAll(".e-views")).indexOf(e)},l.prototype.toolbarClickHandler=function(i){if(i.item){var t,r,n;switch(i.item.cssClass.replace("e-views ","")){case"e-date-range":this.headerPopup||this.renderHeaderPopup(),this.headerPopup.element.classList.contains(re)?this.headerPopup.hide():this.headerPopup.show();break;case"e-day":this.parent.changeView("Day",i.originalEvent,void 0,this.calculateViewIndex(i));break;case"e-week":this.parent.changeView("Week",i.originalEvent,void 0,this.calculateViewIndex(i));break;case"e-work-week":this.parent.changeView("WorkWeek",i.originalEvent,void 0,this.calculateViewIndex(i));break;case"e-month":this.parent.changeView("Month",i.originalEvent,void 0,this.calculateViewIndex(i));break;case"e-year":this.parent.changeView("Year",i.originalEvent,void 0,this.calculateViewIndex(i));break;case"e-agenda":this.parent.changeView("Agenda",i.originalEvent,void 0,this.calculateViewIndex(i));break;case"e-month-agenda":this.parent.changeView("MonthAgenda",i.originalEvent,void 0,this.calculateViewIndex(i));break;case"e-timeline-day":this.parent.changeView("TimelineDay",i.originalEvent,void 0,this.calculateViewIndex(i));break;case"e-timeline-week":this.parent.changeView("TimelineWeek",i.originalEvent,void 0,this.calculateViewIndex(i));break;case"e-timeline-work-week":this.parent.changeView("TimelineWorkWeek",i.originalEvent,void 0,this.calculateViewIndex(i));break;case"e-timeline-month":this.parent.changeView("TimelineMonth",i.originalEvent,void 0,this.calculateViewIndex(i));break;case"e-timeline-year":this.parent.changeView("TimelineYear",i.originalEvent,void 0,this.calculateViewIndex(i));break;case"e-today":n=C(this.parent.getCurrentTime()),("Agenda"===this.parent.currentView||"MonthAgenda"===this.parent.currentView||!this.parent.isSelectedDate(n)||"Month"===this.parent.currentView&&this.parent.activeViewOptions.displayDate&&!this.hasSelectedDate()&&C(this.parent.activeViewOptions.displayDate)!==n||"Month"===this.parent.currentView&&this.parent.activeViewOptions.numberOfWeeks>0&&!this.hasSelectedDate()&&C(Ft(this.parent.selectedDate))!==n)&&this.parent.changeDate(n,i.originalEvent);break;case"e-prev":this.parent.changeDate(this.parent.activeView.getNextPreviousDate("previous"),i.originalEvent);break;case"e-next":this.parent.changeDate(this.parent.activeView.getNextPreviousDate("next"),i.originalEvent);break;case"e-add":if(r=this.parent.activeCellsData.startTime.getTime()===this.parent.activeCellsData.endTime.getTime(),this.parent.activeCellsData&&!r)t=this.parent.activeCellsData;else{var c=this.parent.activeViewOptions.timeScale.interval*oe/this.parent.activeViewOptions.timeScale.slotCount,h=new Date(this.parent.selectedDate.getTime()),p=this.parent.getCurrentTime();h.setHours(p.getHours(),Math.round(h.getMinutes()/c)*c,0);var u=new Date(new Date(h.getTime()).setMilliseconds(h.getMilliseconds()+c));t={startTime:h,endTime:u,isAllDay:!1}}this.parent.eventWindow.openEditor((0,s.l7)(t,{cancel:!1,event:i.originalEvent}),"Add")}if(!(0,s.le)(this.toolbarObj)){var d=this.toolbarObj.element.querySelector(".e-toolbar-pop");d&&"Input"!==i.item.type&&d.ej2_instances[0].hide({name:"SlideUp",duration:100})}}},l.prototype.hasSelectedDate=function(){var i=C(this.parent.selectedDate).getTime();return i>=this.parent.activeView.getStartDate().getTime()&&i<=this.parent.activeView.getEndDate().getTime()},l.prototype.getHeaderElement=function(){return this.toolbarObj.element},l.prototype.updateHeaderItems=function(i){var e=this.toolbarObj.element.querySelector(".e-prev"),t=this.toolbarObj.element.querySelector(".e-next"),r=this.toolbarObj.element.querySelector(".e-date-range");e&&("add"===i?(0,s.cn)([e],he):(0,s.IV)([e],he)),t&&("add"===i?(0,s.cn)([t],he):(0,s.IV)([t],he)),r&&("add"===i?(0,s.cn)([r],ce):(0,s.IV)([r],ce))},l.prototype.previousNextIconHandler=function(){var i="Agenda"===this.parent.currentView?[this.parent.getCurrentViewDates()[0]]:this.parent.getCurrentViewDates(),e=this.toolbarObj.element.querySelector(".e-prev"),t=this.toolbarObj.element.querySelector(".e-next"),r=new Date(i[0].getTime()),n=new Date(i[i.length-1].getTime());if("WorkWeek"===this.parent.currentView||"TimelineWorkWeek"===this.parent.currentView)n=V(r=me(C(this.parent.selectedDate),this.parent.firstDayOfWeek),7*this.parent.activeViewOptions.interval);else if("Month"===this.parent.currentView){var a=!(0,s.le)(this.parent.activeViewOptions.displayDate)||this.parent.activeViewOptions.numberOfWeeks>0;r=a?this.parent.activeView.getStartDate():Ft(this.parent.selectedDate),n=a?this.parent.activeView.getEndDate():St(Be(r,this.parent.activeViewOptions.interval-1))}(0,s.le)(e)||this.toolbarObj.enableItems(e,r>C(this.parent.minDate)),(0,s.le)(t)||this.toolbarObj.enableItems(t,n<C(this.parent.maxDate)),this.setCalendarMinMaxDate()},l.prototype.getModuleName=function(){return"headerbar"},l.prototype.destroy=function(){this.headerPopup&&!this.headerPopup.isDestroyed&&(this.headerPopup.destroy(),this.headerPopup=null),this.headerCalendar&&!this.headerCalendar.isDestroyed&&(this.headerCalendar.destroy(),this.headerCalendar=null),this.toolbarObj&&!this.toolbarObj.isDestroyed&&(this.toolbarObj.destroy(),this.removeEventListener(),(0,s.Od)(this.element),this.toolbarObj=null),this.element=null,this.parent=null,this.l10n=null},l}(),ql=function(){function l(i){this.parent=i,this.addEventListener()}return l.prototype.getModuleName=function(){return"scroll"},l.prototype.setWidth=function(){this.parent.element.style.width=(0,s.Ac)(this.parent.width)},l.prototype.setHeight=function(){this.parent.element.style.height=(0,s.Ac)(this.parent.height)},l.prototype.addEventListener=function(){this.parent.on(ge,this.setDimensions,this),this.parent.on(Wr,this.onPropertyChanged,this)},l.prototype.removeEventListener=function(){this.parent.off(ge,this.setDimensions),this.parent.off(Wr,this.onPropertyChanged)},l.prototype.setDimensions=function(){this.setWidth(),this.setHeight();var i={cssProperties:this.parent.getCssProperties(),module:this.getModuleName()};this.parent.notify(be,i)},l.prototype.onPropertyChanged=function(){this.setDimensions()},l.prototype.destroy=function(){this.removeEventListener()},l}(),Fl=function(){function l(i){this.parent=i,this.element=this.parent.element.querySelector("."+Me),this.touchObj=new s.Xh(this.element,{scroll:this.scrollHandler.bind(this),swipe:this.swipeHandler.bind(this),tapHold:this.tapHoldHandler.bind(this),swipeSettings:{swipeThresholdDistance:1}}),s.bi.add(this.element,"transitionend",this.onTransitionEnd,this),this.touchLeftDirection=this.parent.enableRtl?"Right":"Left",this.touchRightDirection=this.parent.enableRtl?"Left":"Right"}return l.prototype.scrollHandler=function(i){if(!("Agenda"===this.parent.currentView||this.parent.uiStateValues.action||!this.parent.allowSwiping||i.originalEvent&&i.originalEvent.target&&(i.originalEvent.target.classList.contains(P)||(0,s.oq)(i.originalEvent.target,"."+P))&&!this.parent.isAdaptive)){if(this.timeStampStart||(this.timeStampStart=Date.now()),this.element.classList.contains(ui)&&this.onTransitionEnd(),"Left"===i.scrollDirection||"Right"===i.scrollDirection){var e={requestType:"dateNavigate",cancel:!1,event:i.originalEvent};if(this.parent.trigger(fe,e),e.cancel)return;var t=this.element.querySelector("."+F);if(t&&t.scrollWidth>t.clientWidth)return;this.isScrollTriggered=!0,i.originalEvent.preventDefault(),i.originalEvent.stopPropagation()}if(i.scrollDirection===this.touchLeftDirection){this.nextPanel||(this.renderPanel(Ta,"next"),this.nextPanel={element:this.parent.activeView.getPanel(),selectedDate:new Date(this.parent.selectedDate.getTime())},this.setDimensions(this.nextPanel.element));var r=this.parent.enableRtl?i.distanceX:-i.distanceX;this.element.style.transform="translatex("+(this.getTranslateX(this.element)+r)+"px)"}else if(i.scrollDirection===this.touchRightDirection){var n=0;this.previousPanel||(this.renderPanel(Xr,"previous"),this.previousPanel={element:this.parent.activeView.getPanel(),selectedDate:new Date(this.parent.selectedDate.getTime())},this.setDimensions(this.previousPanel.element),n=this.previousPanel.element.offsetWidth),r=this.parent.enableRtl?n-i.distanceX:-n+i.distanceX,this.element.style.transform="translatex("+(this.getTranslateX(this.element)+r)+"px)"}}},l.prototype.swipeHandler=function(i){if(this.isScrollTriggered&&!this.parent.uiStateValues.action&&this.parent.allowSwiping){this.isScrollTriggered=!1;var e="Left"===i.swipeDirection?this.parent.activeView.renderDates[0]:this.parent.activeView.renderDates.slice(-1)[0];if("Left"===i.swipeDirection&&e<this.parent.maxDate||"Right"===i.swipeDirection&&e>=this.parent.minDate){var t=Date.now()-this.timeStampStart,r=i.distanceX*(s.AR.isDevice?6:1.66);r>t||i.distanceX>this.parent.element.offsetWidth/2?(this.swapPanels(i.swipeDirection),r>t&&i.distanceX>this.parent.element.offsetWidth/2&&(this.element.style.transitionDuration=r/t/10+"s"),this.confirmSwipe(i.swipeDirection)):this.cancelSwipe(),this.parent.trigger(Qe,{requestType:"dateNavigate",cancel:!1,event:i.originalEvent})}else this.cancelSwipe();this.timeStampStart=null}},l.prototype.tapHoldHandler=function(i){var e=(0,s.oq)(i.originalEvent.target,"."+P);(0,s.le)(e)||!this.parent.isAdaptive||this.parent.quickPopup.tapHoldEventPopup(i.originalEvent)},l.prototype.renderPanel=function(i,e){this.currentPanel?this.parent.setProperties({selectedDate:this.currentPanel.selectedDate},!0):(this.currentPanel={element:this.parent.activeView.getPanel(),selectedDate:new Date(this.parent.selectedDate.getTime())},this.setDimensions(this.currentPanel.element)),this.parent.setProperties({selectedDate:this.parent.activeView.getNextPreviousDate(e)},!0),this.parent.headerModule&&this.parent.headerModule.setCalendarDate(this.parent.selectedDate),this.parent.activeView.getRenderDates(),this.parent.activeView.renderLayout(i)},l.prototype.swapPanels=function(i){if(i===this.touchLeftDirection){var e=this.nextPanel;this.nextPanel=this.currentPanel,this.currentPanel=e}else e=this.previousPanel,this.previousPanel=this.currentPanel,this.currentPanel=e},l.prototype.confirmSwipe=function(i){var e=this;this.parent.trigger(Fr,{action:"date",cancel:!1,previousDate:i===this.touchLeftDirection?this.nextPanel.selectedDate:this.previousPanel.selectedDate,currentDate:this.currentPanel.selectedDate},function(n){if(n.cancel)e.swapPanels(i),e.cancelSwipe();else{e.parent.activeView.setPanel(e.currentPanel.element),e.parent.setProperties({selectedDate:e.currentPanel.selectedDate},!0);var a;a=e.parent.enableRtl?i===e.touchLeftDirection?e.previousPanel?e.previousPanel.element.offsetLeft:e.currentPanel.element.offsetWidth:0:i===e.touchLeftDirection?-e.currentPanel.element.offsetLeft:0,(0,s.cn)([e.element],ui),e.element.style.transform="translatex("+a+"px)",e.parent.headerModule&&e.parent.headerModule.updateDateRange(e.parent.activeView.getDateRangeText()),e.parent.renderTemplates(),e.parent.crudModule.refreshDataManager()}})},l.prototype.cancelSwipe=function(){this.parent.activeView.setPanel(this.currentPanel.element),this.parent.setProperties({selectedDate:this.currentPanel.selectedDate},!0),this.parent.activeView.getRenderDates(),this.parent.activeView.generateColumnLevels(),(0,s.cn)([this.element],ui),this.element.style.transform="translatex("+(this.parent.enableRtl?this.previousPanel?this.previousPanel.element.offsetWidth:0:-this.currentPanel.element.offsetLeft)+"px)"},l.prototype.onTransitionEnd=function(){(0,s.IV)([this.element],ui),this.element.style.transitionDuration="",this.element.style.transform="",this.previousPanel&&((0,s.Od)(this.previousPanel.element),this.previousPanel=null,(0,s.IV)([this.currentPanel.element],Xr),(0,s.cn)([this.currentPanel.element],Qr)),this.nextPanel&&((0,s.Od)(this.nextPanel.element),this.nextPanel=null,(0,s.IV)([this.currentPanel.element],Ta),(0,s.cn)([this.currentPanel.element],Qr)),this.currentPanel=null,this.parent.activeView.getPanel().style.width=""},l.prototype.getTranslateX=function(i){var e=window.getComputedStyle(i);return new WebKitCSSMatrix(e.webkitTransform).m41},l.prototype.setDimensions=function(i){i.style.width=this.parent.element.clientWidth+"px"},l.prototype.resetValues=function(){this.currentPanel=null,this.previousPanel=null,this.nextPanel=null,this.timeStampStart=null,this.element.style.transform="",Ie(this.element),(0,s.IV)([this.element],ui)},l.prototype.destroy=function(){this.touchObj&&(this.touchObj.destroy(),this.touchObj=null),s.bi.remove(this.element,"transitionend",this.onTransitionEnd),this.resetValues()},l}(),as=function(){function l(i){this.selectedCells=[],this.keyConfigs={downArrow:"downarrow",upArrow:"uparrow",rightArrow:"rightarrow",leftArrow:"leftarrow",shiftDownArrow:"shift+downarrow",shiftUpArrow:"shift+uparrow",shiftRightArrow:"shift+rightarrow",shiftLeftArrow:"shift+leftarrow",ctrlLeftArrow:"ctrl+leftarrow",ctrlRightArrow:"ctrl+rightarrow",altOne:"alt+1",altTwo:"alt+2",altThree:"alt+3",altFour:"alt+4",altFive:"alt+5",altSix:"alt+6",altSeven:"alt+7",altEight:"alt+8",altNine:"alt+9",enter:"enter",escape:"escape",delete:"delete",backspace:"backspace",home:"home",pageUp:"pageup",pageDown:"pagedown",tab:"tab",shiftTab:"shift+tab",ctrlShiftUpArrow:"ctrl+shift+uparrow",ctrlShiftDownArrow:"ctrl+shift+downarrow",ctrlShiftLeftArrow:"ctrl+shift+leftarrow",ctrlShiftRightArrow:"ctrl+shift+rightarrow"},this.parent=i,this.parent.element.tabIndex=-1===this.parent.element.tabIndex?0:this.parent.element.tabIndex,this.keyboardModule=new s.nv(this.parent.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"}),this.addEventListener()}return l.prototype.keyActionHandler=function(i){switch(i.action){case"downArrow":case"shiftDownArrow":this.processDown(i,i.shiftKey);break;case"upArrow":case"shiftUpArrow":this.processUp(i,i.shiftKey);break;case"leftArrow":case"shiftLeftArrow":this.processLeft(i,i.shiftKey);break;case"rightArrow":case"shiftRightArrow":this.processRight(i,i.shiftKey);break;case"ctrlLeftArrow":this.parent.changeDate(this.parent.activeView.getNextPreviousDate("previous"),i),this.parent.headerModule&&this.parent.headerModule.element.querySelector(".e-prev button").focus();break;case"ctrlRightArrow":this.parent.changeDate(this.parent.activeView.getNextPreviousDate("next"),i),this.parent.headerModule&&this.parent.headerModule.element.querySelector(".e-next button").focus();break;case"altOne":case"altTwo":case"altThree":case"altFour":case"altFive":case"altSix":case"altSeven":case"altEight":case"altNine":this.processViewNavigation(i);break;case"enter":this.processEnter(i);break;case"home":this.focusFirstCell();break;case"tab":case"shiftTab":this.processTab(i,i.shiftKey);break;case"delete":case"backspace":this.processDelete(i);break;case"ctrlShiftUpArrow":case"ctrlShiftDownArrow":case"ctrlShiftLeftArrow":case"ctrlShiftRightArrow":this.processCtrlShiftNavigationArrows(i);break;case"escape":this.processEscape(i);break;case"fTwelve":this.parent.allowInline&&this.parent.inlineModule&&(i.preventDefault(),this.processFTwelve(i))}},l.prototype.processFTwelve=function(i){var e=i.target;if(e.classList.contains(R)||e.classList.contains(U)){this.parent.activeCellsData=this.getSelectedElements(e);var t=(0,s.l7)(this.parent.activeCellsData,{cancel:!1,event:i});this.parent.notify(Pt,{element:t.element,groupIndex:t.groupIndex,type:"Cell"})}e.classList.contains(P)&&e.click()},l.prototype.addEventListener=function(){this.parent.on(zr,this.onCellMouseDown,this)},l.prototype.removeEventListener=function(){this.parent.off(zr,this.onCellMouseDown)},l.prototype.onCellMouseDown=function(i){if(!i.event.shiftKey&&(this.initialTarget=this.getClosestCell(i.event),!this.parent.activeViewOptions.readonly&&"MonthAgenda"!==this.parent.currentView&&this.initialTarget&&(i.event.target.classList.contains(R)&&3!==i.event.which&&(this.parent.removeSelectedClass(),s.bi.add(this.parent.getContentTable(),"mousemove",this.onMouseSelection,this),s.bi.add(this.parent.getContentTable(),"mouseup",this.onMoveUp,this)),i.event.target.classList.contains(U)&&3!==i.event.which))){this.parent.removeSelectedClass();var e=this.parent.getAllDayRow();s.bi.add(e,"mousemove",this.onMouseSelection,this),s.bi.add(e,"mouseup",this.onMoveUp,this)}},l.prototype.onMouseSelection=function(i){var e=[].slice.call(this.parent.element.querySelectorAll("."+P));(0,s.cn)(e,"e-allow-select");var t=this.parent.boundaryValidation(i.pageY,i.pageX);if(t.bottom||t.top||t.left||t.right){var r=this.parent.element.querySelector("."+F),a=r.offsetWidth<=r.scrollWidth&&r.scrollLeft>=0&&r.scrollLeft+r.offsetWidth<=r.scrollWidth;r.offsetHeight<=r.scrollHeight&&r.scrollTop>=0&&r.scrollTop+r.offsetHeight<=r.scrollHeight&&(t.top||t.bottom)&&(r.scrollTop+=t.top?-i.target.offsetHeight:i.target.offsetHeight),a&&(t.left||t.right)&&(r.scrollLeft+=t.left?-i.target.offsetWidth:i.target.offsetWidth)}var o=this.getClosestCell(i);o&&this.selectCells(!0,o)},l.prototype.getClosestCell=function(i){return(0,s.oq)(i.target,"."+R+",."+U)},l.prototype.onMoveUp=function(i){var e=this,t=[].slice.call(this.parent.element.querySelectorAll("."+P));if((0,s.IV)(t,"e-allow-select"),i.target.classList.contains(R)&&(s.bi.remove(this.parent.getContentTable(),"mousemove",this.onMouseSelection),s.bi.remove(this.parent.getContentTable(),"mouseup",this.onMoveUp)),i.target.classList.contains(U)){var r=this.parent.getAllDayRow();s.bi.remove(r,"mousemove",this.onMouseSelection),s.bi.remove(r,"mouseup",this.onMoveUp)}if(!this.isPreventAction(i)){var a=(0,s.oq)(i.target,".e-work-cells,.e-all-day-cells,.e-header-cells");if("TimelineYear"!==this.parent.currentView||!a.classList.contains(_)){this.parent.activeCellsData=this.getSelectedElements(a);var o={};this.parent.eventWindow&&this.parent.eventWindow.convertToEventData(this.parent.activeCellsData,o);var c=this.parent.getSelectedElements();this.parent.trigger(Ui,{data:o,element:this.parent.activeCellsData.element,event:i,requestType:"cellSelect",showQuickPopup:!1},function(p){if((p.showQuickPopup||e.parent.quickInfoOnSelectionEnd)&&c.length>1){var d=(0,s.l7)(e.parent.activeCellsData,{cancel:!1,event:i,name:"cellClick"});e.parent.notify(Ne,d)}})}}},l.prototype.processEnter=function(i){if(!(this.parent.activeViewOptions.readonly&&!i.target.classList.contains(P)||this.isPreventAction(i)||"TimelineYear"===this.parent.currentView&&i.target.classList.contains(_))){var e=i.target;if((0,s.oq)(e,"."+yt))return void(e.classList.contains(hr)||e.classList.contains(pr)||e.classList.contains(Qt)||e.classList.contains(et)||e.classList.contains(Vt)?(e.click(),i.preventDefault()):e.classList.contains(te)&&(this.parent.element.querySelector("."+pr).click(),i.preventDefault()));if(e.classList.contains(Ve)&&e.classList.contains(Le)){var t=e.querySelector("."+zt);return void(t&&t.click())}if(e.classList.contains(R)||e.classList.contains(U)){this.parent.activeCellsData=this.getSelectedElements(e);var r=(0,s.l7)(this.parent.activeCellsData,{cancel:!1,event:i});return void(this.parent.allowInline?this.parent.notify(Pt,{element:r.element,groupIndex:r.groupIndex,type:"Cell"}):"Year"===this.parent.currentView?e.click():this.parent.notify(Ne,r))}if(e.classList.contains(we)&&this.parent.inlineModule)return void this.parent.inlineModule.inlineCrudActions(e);if(e.classList.contains(P)||e.classList.contains(Cn)||e.classList.contains(wi)||e.classList.contains(Te))return void e.click();if(e.classList.contains(Xt))return this.parent.setProperties({selectedDate:this.parent.getDateFromElement(e)},!0),this.parent.changeView(this.parent.getNavigateView(),i),void this.processEscape(i)}},l.prototype.getSelectedElements=function(i){var e;if(this.selectedCells.length>1&&i.classList.contains(Yt)){var t=this.parent.getCellDetails(this.selectedCells[0]),r=this.parent.getCellDetails(this.selectedCells.slice(-1)[0]);t.endTime=r.endTime,t.element=i,e=t}else e=this.parent.getCellDetails(i);return e},l.prototype.getCells=function(i,e,t){var r=this.parent.getContentTable(),n="TimelineYear"===this.parent.currentView,o=[].slice.call(r.querySelectorAll(n&&!i?"."+R+":not(."+_+")":"td")),c=r.rows.length,h=r.rows[0].cells.length;if(e&&e.classList.contains(U)){var p=this.parent.getAllDayRow();o=[].slice.call(p.cells),c=1,h=p.cells.length}var u=o.indexOf(e),d=o.indexOf(t),v=[];if(i){for(var f=0;f<h;f++)for(var g=0;g<c;g++){var m=o[h*g+f];n&&m.classList.contains(_)||v.push(m)}u=v.indexOf(e),d=v.indexOf(t)}if(u>d){var y=u;u=d,d=y}return(i?v:o).slice(u,d+1)},l.prototype.focusFirstCell=function(){if("Agenda"===this.parent.currentView){var i=this.parent.getContentTable().querySelector("."+ze);return i.setAttribute("tabindex","0"),void i.focus()}if(this.parent.eventBase.removeSelectedAppointmentClass(),this.parent.activeView.isTimelineView()&&"TimelineYear"!==this.parent.currentView){var e=this.parent.element.querySelector("."+X+" tr:not(."+he+") ."+R+":not(."+pt+")");this.selectCells(!1,e)}else if(this.parent.currentView.indexOf("Year")>-1){var t="."+R+":not(."+_+"):not(."+pt+")";t+="TimelineYear"===this.parent.currentView&&"Vertical"===this.parent.activeViewOptions.orientation?'[data-date="'+this.parent.activeView.startDate().getTime()+'"]':"",this.selectCells(!1,this.parent.element.querySelector(t))}else this.selectCells(!1,this.parent.getWorkCellElements()[0])},l.prototype.isInverseTableSelect=function(){return this.parent.activeView.isInverseTableSelect},l.prototype.selectCells=function(i,e){var t=this;this.parent.removeSelectedClass();var r=e instanceof Array?e.slice(-1)[0]:e;if(i){var n,a=["Day","Week","WorkWeek","TimelineDay","TimelineWeek","TimelineWorkWeek","TimelineMonth","TimelineYear"],o={element:e,requestType:"mousemove",allowMultipleRow:!0};this.parent.inlineModule.removeInlineAppointmentElement(),this.parent.trigger(Ui,o,function(c){if(!c.allowMultipleRow||!t.parent.allowMultiRowSelection){var p="TimelineYear"===t.parent.currentView;p&&"Horizontal"===t.parent.activeViewOptions.orientation||"Month"===t.parent.currentView?r=p&&t.parent.activeViewOptions.group.resources.length>0?t.initialTarget:t.initialTarget.parentElement.children[r.cellIndex]:a.indexOf(t.parent.currentView)>-1&&(r=r.parentElement.children[t.initialTarget.cellIndex])}var d=t.getCells(t.isInverseTableSelect(),t.initialTarget,r);if(t.parent.activeViewOptions.group.resources.length>0){n=t.initialTarget.getAttribute("data-group-index");for(var v=[],f=0,g=d;f<g.length;f++)(m=g[f]).getAttribute("data-group-index")===n&&v.push(m);d=v}if(t.parent.allowMultiCellSelection||(d=[t.initialTarget]),t.selectedCells=d,d.length>2&&!r.classList.contains(U)){var y=t.getAllDayCells(d);if(t.parent.activeViewOptions.group.resources.length>0){for(var w=[],D=0,b=y;D<b.length;D++){var m;(m=b[D]).getAttribute("data-group-index")===n&&w.push(m)}y=w}d=d.concat(y)}r.getAttribute("data-group-index")!==n&&t.parent.activeViewOptions.group.resources.length>0&&(r=t.selectedCells[t.selectedCells.length-1]),t.parent.addSelectedClass(d,r)})}else this.initialTarget=r,this.selectedCells=[r],this.parent.addSelectedClass([r],r)},l.prototype.selectAppointment=function(i,e){var t=this.getAppointmentElements();if(!(t.length<0)){var r;if(this.parent.eventBase.removeSelectedAppointmentClass(),e.classList.contains(P)){var n=t.indexOf(e);r=t[i?n-1:n+1]}else r=i?t[t.length-1]:t[0];r&&(this.parent.eventBase.addSelectedAppointments([r]),r.focus(),(0,s.cn)([r],nr))}},l.prototype.selectAppointmentElementFromWorkCell=function(i,e){var t=this;if(this.parent.eventBase.removeSelectedAppointmentClass(),this.parent.removeSelectedClass(),e.classList.contains(R)||e.classList.contains(U)){var r=this.getUniqueAppointmentElements(),n=[],a=this.parent.getDateFromElement(e).getTime();if(this.parent.eventsProcessed.filter(function(p){return i?p[t.parent.eventFields.startTime].getTime()<=a:p[t.parent.eventFields.startTime].getTime()>=a}).filter(function(p){r.filter(function(u){JSON.stringify(p.Guid)===JSON.stringify(u.getAttribute("data-guid"))&&n.push(u)})}),n.length>0){var h=this.getAppointmentElementsByGuid((i?n[n.length-1]:n[0]).getAttribute("data-guid"));this.parent.eventBase.addSelectedAppointments(h),h[h.length-1].focus()}}},l.prototype.getAllDayCells=function(i){var e=this.parent.getAllDayRow();if(!e)return[];var t=i[0],r=i[i.length-1],n=this.parent.getCellDetails(t);return this.parent.getCellDetails(r).endTime.getTime()-n.startTime.getTime()>=Z?[].slice.call(e.cells).slice(t.cellIndex,r.cellIndex+1):[]},l.prototype.getAppointmentElements=function(){return[].slice.call(this.parent.element.querySelectorAll("."+P))},l.prototype.getAppointmentElementsByGuid=function(i){return[].slice.call(this.parent.element.querySelectorAll('div[data-guid="'+i+'"]'))},l.prototype.getUniqueAppointmentElements=function(){var i=this.getAppointmentElements(),e=[];return i.map(function(t){return t.getAttribute("data-guid")}).filter(function(t,r,n){n.indexOf(t)===r&&e.push(i[r])}),e},l.prototype.getWorkCellFromAppointmentElement=function(i){var e=this.parent.eventBase.getEventByGuid(i.getAttribute("data-guid"));return this.parent.eventBase.selectWorkCellByTime([e])},l.prototype.processViewNavigation=function(i){var e=parseInt(i.key,10)-1;e<this.parent.views.length&&(this.parent.changeView(this.parent.viewCollections[e].option,i,void 0,e),this.parent.headerModule&&this.parent.headerModule.element.querySelector(".e-active-view button").focus())},l.prototype.cancelUpDownAction=function(i){return!!(i&&"Vertical"===this.parent.activeViewOptions.orientation&&this.parent.activeViewOptions.group.resources.length>0||i&&this.initialTarget.classList.contains(_)||this.parent.activeView.isTimelineView()&&!i||"MonthAgenda"===this.parent.currentView)},l.prototype.processUp=function(i,e){var t="TimelineYear"===this.parent.currentView;if(!e||!this.cancelUpDownAction(t)){var r=i.target,n=this.parent.getSelectedElements(),a=this.parent.eventBase.getSelectedAppointments(),o=this.parent.element.querySelector("."+tt),c=this.getQuickPopupElement();if(n.length>0&&!i.target.classList.contains(R)&&(r=n[n.length-1]),a.length>0&&!o.classList.contains(re)&&!c.classList.contains(re)&&-1!==["Day","Week","WorkWeek","Month"].indexOf(this.parent.currentView)&&(r=this.getWorkCellFromAppointmentElement(a[a.length-1]),this.parent.eventBase.removeSelectedAppointmentClass()),r)if(r.classList.contains(R)&&!this.parent.element.querySelector("."+re)){var h=this.parent.getTableRows(),p=h.indexOf(r.parentElement),u=void 0;if(t&&e&&0===this.parent.activeViewOptions.group.resources.length&&(u=this.isInverseTableSelect()?this.getVerticalUpDownCell(h,r,p,!0):this.getHorizontalUpDownCell(h,r,p,!0)),(p>0||u)&&p<h.length){if(u=u||h[p-1].cells[r.cellIndex],"Year"===this.parent.currentView&&u.classList.contains(_)){if(!(this.parent.activeView.getStartDate().getTime()<+u.getAttribute("data-date")))return;u=this.getYearUpDownCell(h,p-1,r.cellIndex,!0)}this.selectCells(e,u)}}else("Agenda"===this.parent.currentView||"MonthAgenda"===this.parent.currentView)&&this.selectAppointment(!0,r)}},l.prototype.processDown=function(i,e){var t="TimelineYear"===this.parent.currentView;if(!e||!this.cancelUpDownAction(t)){var r=i.target,n=this.parent.getSelectedElements(),a=this.parent.eventBase.getSelectedAppointments(),o=this.parent.element.querySelector("."+tt),c=this.getQuickPopupElement();n.length>0&&!i.target.classList.contains(R)&&(r=n[n.length-1]),a.length>0&&!o.classList.contains(re)&&!c.classList.contains(re)&&-1!==["Day","Week","WorkWeek","Month"].indexOf(this.parent.currentView)&&(r=this.getWorkCellFromAppointmentElement(a[a.length-1]),this.parent.eventBase.removeSelectedAppointmentClass());var h=this.parent.getTableRows();if(r)if(r.classList.contains(R)&&!this.parent.element.querySelector("."+re)){var p=h.indexOf(r.parentElement),u=void 0;if(t&&e&&0===this.parent.activeViewOptions.group.resources.length&&(u=this.isInverseTableSelect()?this.getVerticalUpDownCell(h,r,p,!1):this.getHorizontalUpDownCell(h,r,p,!1)),p>=0&&(p<h.length-1||u)){if(u=u||h[p+1].cells[r.cellIndex],"Year"===this.parent.currentView&&u.classList.contains(_)){if(!(this.parent.activeView.getEndDate().getTime()>+u.getAttribute("data-date")))return;u=this.getYearUpDownCell(h,p+1,r.cellIndex,!1)}this.selectCells(e,u)}}else("Agenda"===this.parent.currentView||"MonthAgenda"===this.parent.currentView)&&this.selectAppointment(!1,r)}},l.prototype.getYearUpDownCell=function(i,e,t,r){for(;i[e]&&i[e].cells[t].classList.contains(_);)e+=r?-1:1;return i[e].cells[t]},l.prototype.getHorizontalUpDownCell=function(i,e,t,r){var n=i[t+(r?-1:1)],a=n?n.cells[e.cellIndex]:e;if(a.classList.contains(_)){var o=n.querySelector("."+R+":not(."+_+")"),c=new Date(+o.getAttribute("data-date")),h='[data-date="'+new Date(c.getFullYear(),c.getMonth()+1,0).getTime()+'"]';a=a.cellIndex<o.cellIndex?o:n.querySelector(h)}return a},l.prototype.getVerticalUpDownCell=function(i,e,t,r){var a=r&&t>0||!r&&t<i.length-1?i[t+(r?-1:1)].cells[e.cellIndex]:void 0;if(!a||a.classList.contains(_)){if(i[t].cells[e.cellIndex-(r?1:-1)]){var c=+e.getAttribute("data-date")-(r?Z:-Z);return this.parent.getContentTable().querySelector("."+R+'[data-date="'+c+'"]')}a=e}return a},l.prototype.processLeftRight=function(i){var e="Year"===this.parent.currentView?i.closest("tbody"):this.parent.getContentTable(),t=i.parentNode.sectionRowIndex;return{element:e,rowIndex:t,columnIndex:i.cellIndex,maxIndex:e.rows[t].cells.length}},l.prototype.getQuickPopupElement=function(){return(this.parent.isAdaptive?document.body:this.parent.element).querySelector("."+yt)},l.prototype.isCancelLeftRightAction=function(i,e,t){var r="MonthAgenda"===this.parent.currentView||t&&this.initialTarget.classList.contains(_);if("Agenda"===this.parent.currentView||e&&r||this.isPreventAction(i)&&e)return!0;var n=this.parent.element.querySelector("."+tt),a=this.getQuickPopupElement();return!(!n.classList.contains(re)&&!a.classList.contains(re))},l.prototype.processRight=function(i,e){var t="TimelineYear"===this.parent.currentView;if(!this.isCancelLeftRightAction(i,e,t)){var n,r=this.parent.getSelectedElements(),a=this.parent.eventBase.getSelectedAppointments(),o=i.target;if(r.length>0&&!o.classList.contains(R)&&!o.classList.contains(U)&&(o=r[r.length-1]),!(a.length>0)||(o=this.getWorkCellFromAppointmentElement(a[a.length-1]),this.parent.eventBase.removeSelectedAppointmentClass(),o))if(o.classList.contains(R)&&i.target.classList.contains(R)){var c=this.processLeftRight(o),h=new Date(+o.getAttribute("data-date")),p="Year"===this.parent.currentView&&h.getTime()===St(h).getTime();if(c.columnIndex>=0&&c.columnIndex<c.maxIndex-1&&!p)n=this.calculateNextPrevDate(o,c.element.rows[c.rowIndex].cells[o.cellIndex+1],"right"),t&&e&&n.classList.contains(_)&&(n=this.getTimelineYearTargetCell(c,o,!0)),(0,s.le)(n)||this.selectCells(e,n);else if(c.columnIndex===c.maxIndex-1||p)if(!this.isInverseTableSelect()&&c.rowIndex<c.element.rows.length-1&&!p){n=this.calculateNextPrevDate(o,c.element.rows[c.rowIndex+1].cells[0],"right");var u=t&&e&&n.classList.contains(_);n=u?this.getHorizontalLeftRightCell(c,o,!0):n,(0,s.le)(n)||this.selectCells(e,n)}else if(!e){if(p&&h.getTime()!==this.parent.activeView.getEndDate().getTime())return void this.selectCells(e,this.parent.element.querySelector(":not(."+_+')[data-date="'+(h.getTime()+Z)+'"]'));var d=this.isInverseTableSelect()?c.rowIndex:0;this.parent.changeDate(this.parent.activeView.getNextPreviousDate("next"),i);var v=this.parent.getContentTable(),f=p?v.rows[d].querySelector("."+R+":not(."+_+")"):v.rows[d].cells[0];this.selectCells(!1,f)}}else if(o.classList.contains(U)){var g=o.cellIndex,m=this.parent.getAllDayRow(),y=m.cells.length;if(g>=0&&g<y-1)this.selectCells(e,m.cells[g+1]);else if(g===y-1&&!e){this.parent.changeDate(this.parent.activeView.getNextPreviousDate("next"),i);var w=this.parent.getAllDayRow();this.selectCells(!1,w.cells[0])}}}},l.prototype.processLeft=function(i,e){var t="TimelineYear"===this.parent.currentView;if(!this.isCancelLeftRightAction(i,e,t)){var a,r=i.target,n=this.parent.getSelectedElements();n.length>0&&!r.classList.contains(R)&&!r.classList.contains(U)&&(r=n[n.length-1]);var o=this.parent.eventBase.getSelectedAppointments();if(!(o.length>0)||(r=this.getWorkCellFromAppointmentElement(o[o.length-1]),this.parent.eventBase.removeSelectedAppointmentClass(),r))if(i.target.classList.contains(R)&&r.classList.contains(R)){var c=this.processLeftRight(r),h=new Date(+r.getAttribute("data-date")),p="Year"===this.parent.currentView&&h.getTime()===Ft(h).getTime();if(c.columnIndex>0&&c.columnIndex<c.maxIndex&&!p)a=this.calculateNextPrevDate(r,c.element.rows[c.rowIndex].cells[r.cellIndex-1],"left"),t&&e&&a.classList.contains(_)&&(a=this.getTimelineYearTargetCell(c,r,!1)),(0,s.le)(a)||this.selectCells(e,a);else if(0===c.columnIndex||p)if(!this.isInverseTableSelect()&&c.rowIndex>0){a=this.calculateNextPrevDate(r,c.element.rows[c.rowIndex-1].cells[c.maxIndex-1],"left");var u=t&&e&&a.classList.contains(_);a=u?this.getHorizontalLeftRightCell(c,r,!1):a,(0,s.le)(a)||this.selectCells(e,a)}else if(!e){if(p&&h.getTime()!==this.parent.activeView.getStartDate().getTime())return void this.selectCells(e,this.parent.element.querySelector('[data-date="'+(h.getTime()-Z)+'"]'));this.parent.changeDate(this.parent.activeView.getNextPreviousDate("previous"),i);var d=this.parent.getContentTable(),v=this.isInverseTableSelect()?c.rowIndex:d.rows.length-1,f=d.rows[v].cells[c.maxIndex-1];if(p){var g=this.parent.element.querySelectorAll("."+X+" tbody");f=g.item(g.length-1).querySelector(":not(."+_+')[data-date="'+this.parent.activeView.getEndDate().getTime()+'"]')}this.selectCells(!1,f)}}else if(r.classList.contains(U)){var m=r.cellIndex,y=this.parent.getAllDayRow(),w=y.cells.length;if(m>0&&m<w)this.selectCells(e,y.cells[m-1]);else if(0===m&&!e){this.parent.changeDate(this.parent.activeView.getNextPreviousDate("previous"),i);var D=this.parent.getAllDayRow();this.selectCells(!1,D.cells[w-1])}}}},l.prototype.getTimelineYearTargetCell=function(i,e,t){return this.isInverseTableSelect()?this.getVerticalLeftRightCell(e,t):this.getHorizontalLeftRightCell(i,e,t)},l.prototype.getHorizontalLeftRightCell=function(i,e,t){var r=i.element.rows[e.parentNode.sectionRowIndex+(t?1:-1)];if(r){var n=t?"."+R+":not(."+_+")":'[data-date="'+(+e.getAttribute("data-date")-Z)+'"]';return r.querySelector(n)}return e},l.prototype.getVerticalLeftRightCell=function(i,e){var t=new Date(+i.getAttribute("data-date")),r=new Date(t.getFullYear(),t.getMonth()+(e?1:-1),1),n=this.parent.getContentTable(),a=n.querySelector('[data-date="'+r.getTime()+'"]');return a.parentNode.sectionRowIndex>i.parentNode.sectionRowIndex?a:n.querySelector('[data-date="'+new Date(r.getFullYear(),r.getMonth()+1,0).getTime()+'"]')},l.prototype.calculateNextPrevDate=function(i,e,t){var r=this.initialTarget.getAttribute("data-group-index");if(this.parent.activeViewOptions.group.resources.length>0&&"Month"===this.parent.currentView&&i&&e&&e.getAttribute("data-group-index")!==r){var n=this.parent.getDateFromElement(i),a="right"===t?new Date(n.setDate(n.getDate()+1)):new Date(n.setDate(n.getDate()-1));e=[].slice.call(this.parent.element.querySelectorAll('td[data-date="'+a.getTime().toString()+'"][data-group-index="'+r+'"]'))[0]}return e},l.prototype.getFocusableElements=function(i){return[].slice.call(i.querySelectorAll('a[href]:not([tabindex="-1"]),input:not([disabled]):not([tabindex="-1"]),textarea:not([disabled]):not([tabindex="-1"]),button:not([disabled]):not([tabindex="-1"]),select:not([disabled]):not([tabindex="-1"]),[tabindex]:not([tabindex="-1"]),[contentEditable=true]:not([tabindex="-1"])'))},l.prototype.processTabOnPopup=function(i,e){var t=this,r=this.getFocusableElements(e),n=(r=r.filter(function(o){var c=t.parent.element.querySelector("."+wn);return c&&c.offsetParent?!(o.classList.contains(Ot)||o.classList.contains(Oi)):!(o.classList.contains(Qt)||o.classList.contains(et))}))[0],a=r[r.length-1];!(0,s.le)(a)&&document.activeElement===a&&!i.shiftKey&&(i.preventDefault(),n.focus()),!(0,s.le)(n)&&document.activeElement===n&&i.shiftKey&&(i.preventDefault(),a.focus())},l.prototype.processTab=function(i,e){var t=i.target;if(t.classList.contains(we)&&this.parent.inlineModule&&(t=t.closest(".e-appointment"),this.parent.inlineModule.inlineCrudActions(i.target)),"TimelineYear"===this.parent.currentView&&t.classList.contains(_))t.classList.contains(Yt)&&this.parent.removeSelectedClass();else{var r=(0,s.oq)(t,"."+yt+",."+tt);if(r&&r.classList.contains(re))return r.classList.contains(tt)&&this.parent.eventBase.removeSelectedAppointmentClass(),void this.processTabOnPopup(i,r);if(t.classList.contains(Ki))this.parent.eventBase.removeSelectedAppointmentClass();else if(t.classList.contains(Ve)&&this.parent.activeView.isTimelineView()&&this.parent.activeViewOptions.group.resources.length>0){var n=parseInt(t.getAttribute("data-group-index"),10);if((o=[].slice.call(this.parent.element.querySelectorAll("."+P+'[data-group-index="'+(e?n-1:n)+'"]'))).length>0){this.parent.eventBase.removeSelectedAppointmentClass();var c=e?o.slice(-1)[0]:o[0];this.parent.eventBase.addSelectedAppointments([c]),c.focus(),i.preventDefault()}else if(n+1===this.parent.resourceBase.lastResourceLevel.length)this.parent.element.focus(),i.preventDefault();else if(this.parent.virtualScrollModule){var h=this.parent.element.querySelector("."+fi),p=Math.round(h.offsetHeight/this.parent.resourceBase.expandedResources.length);this.parent.element.querySelector(".e-content-wrap").scrollTop=(e?n-1:n+1)*p,this.parent.virtualScrollModule.virtualScrolling()}else this.setScrollPosition(n)}else if(t.classList.contains(P)){var o=[].slice.call(this.parent.element.querySelectorAll("."+P)),u="TimelineYear"===this.parent.currentView;if((this.parent.activeView.isTimelineView()&&!u||u&&"Vertical"===this.parent.activeViewOptions.orientation)&&this.parent.activeViewOptions.group.resources.length>0){n=parseInt(t.getAttribute("data-group-index"),10),o=[].slice.call(this.parent.element.querySelectorAll("."+P+'[data-group-index="'+n+'"]'));var f=this.parent.element.querySelector("."+Ve+'[data-group-index="'+(e?n:n+1)+'"]');if(f&&(e&&t.getAttribute("data-guid")===o[0].getAttribute("data-guid")||!e&&t.getAttribute("data-guid")===o.slice(-1)[0].getAttribute("data-guid")))return this.parent.eventBase.removeSelectedAppointmentClass(),this.parent.virtualScrollModule?f.focus({preventScroll:!0}):f.focus(),this.parent.activeView.isTimelineView()&&this.parent.activeViewOptions.group.resources.length>0&&(0,s.le)(this.parent.virtualScrollModule)&&this.setScrollPosition(n),void i.preventDefault()}var g=this.parent.eventBase.getSelectedAppointments();if(g.length>0&&(t=g[g.length-1]),this.parent.eventBase.removeSelectedAppointmentClass(),!e&&t.getAttribute("data-guid")===o[o.length-1].getAttribute("data-guid")||e&&t.getAttribute("data-guid")===o[0].getAttribute("data-guid"))return;("Agenda"===this.parent.currentView||"MonthAgenda"===this.parent.currentView)&&(this.selectAppointment(e,t),i.preventDefault())}else{var m=this.parent.getSelectedElements();if(m.length>0&&!t.classList.contains(P))return this.selectAppointmentElementFromWorkCell(e,t=m[m.length-1]),void i.preventDefault();t&&!t.classList.contains(Ve)&&this.parent.activeView.isTimelineView()&&this.parent.activeViewOptions.group.resources.length>0&&this.processTabOnResourceCells(t,e)}}},l.prototype.processDelete=function(i){var e=document.activeElement;if("MonthAgenda"===this.parent.currentView){var t=this.parent.eventBase.getSelectedEvents().element;e=t&&(0,s.le)(t.length)?t:t[0]}if(e&&e.classList.contains(P)){if((0,s.cn)([e],Gt),this.parent.activeEventData=this.parent.eventBase.getSelectedEvents(),this.parent.activeViewOptions.readonly||e.classList.contains(Mi)||!this.parent.eventSettings.allowDeleting)return;this.parent.quickPopup.deleteClick(i)}},l.prototype.processCtrlShiftNavigationArrows=function(i){if(this.parent.activeViewOptions.group.resources.length>0&&document.activeElement.classList.contains(P)){var e=parseInt(document.activeElement.getAttribute("data-group-index"),10);t=(t="ctrlShiftLeftArrow"===i.action||"ctrlShiftUpArrow"===i.action?e-1:e+1)<0?0:t>this.parent.resourceBase.lastResourceLevel.length?this.parent.resourceBase.lastResourceLevel.length:t;for(var r=[];0===r.length&&t>=0&&t<=this.parent.resourceBase.lastResourceLevel.length;)r=[].slice.call(this.parent.element.querySelectorAll("."+P+'[data-group-index="'+t+'"]')),t="ctrlShiftLeftArrow"===i.action||"ctrlShiftUpArrow"===i.action?t-1:t+1;var n=r[0];n&&(this.parent.eventBase.removeSelectedAppointmentClass(),this.parent.eventBase.addSelectedAppointments([n]),n.focus())}else if(this.parent.activeViewOptions.group.resources.length>0&&!document.activeElement.classList.contains(P)){var t,o=[].slice.call(this.parent.element.querySelectorAll("."+P+'[data-group-index="'+(t=this.parent.resourceBase.renderedResources[0].groupIndex)+'"]'));if(o.length>0){this.parent.eventBase.removeSelectedAppointmentClass();var c=o[0];this.parent.eventBase.addSelectedAppointments([c]),c.focus(),i.preventDefault()}}},l.prototype.processEscape=function(i){this.parent.quickPopup.onClosePopup(i),this.parent.quickPopup.morePopup.hide(),this.parent.headerModule&&this.parent.headerModule.hideHeaderPopup(),this.parent.inlineModule&&this.parent.inlineModule.removeInlineAppointmentElement()},l.prototype.isPreventAction=function(i){var e=(0,s.oq)(i.target,"."+pt);return!(!this.parent.activeView.isTimelineView()||(0,s.le)(e))},l.prototype.processTabOnResourceCells=function(i,e){var t=[].slice.call(this.parent.element.querySelectorAll('[tabIndex="0"]')),r=t.indexOf(i),n=e?t[r-1]:t[r+1];if(n&&n.classList.contains(Ve)){var a=parseInt(n.getAttribute("data-group-index"),10);if(this.parent.virtualScrollModule){var o=this.parent.element.querySelector("."+Oe);[].slice.call(this.parent.element.querySelectorAll("."+Ve)).forEach(function(h){h.getBoundingClientRect().top<o.getBoundingClientRect().top&&h.setAttribute("tabindex","-1")})}else this.setScrollPosition(a)}},l.prototype.setScrollPosition=function(i){var e=this.parent.element.querySelector("."+R+'[data-group-index="'+i+'"]');e&&(this.parent.element.querySelector("."+F).scrollTop=e.offsetTop)},l.prototype.getModuleName=function(){return"keyboard"},l.prototype.destroy=function(){this.removeEventListener(),this.keyboardModule.destroy()},l}(),ss=function(){function l(i,e){this.initDataManager(i,e)}return l.prototype.initDataManager=function(i,e){this.dataManager=i instanceof J.hm?i:new J.hm(i),this.query=e instanceof J.AE?e:new J.AE},l.prototype.generateQuery=function(i,e){var t=this.query.clone();return i&&t.addParams("StartDate",i.toISOString()),e&&t.addParams("EndDate",e.toISOString()),t},l.prototype.getData=function(i){return this.dataManager.executeQuery(i)},l.prototype.destroy=function(){this.dataManager=null,this.query=null},l}(),os=function(){function l(){}return l.prototype.firstDateOfMonth=function(i){return new Date(i.getFullYear(),i.getMonth())},l.prototype.lastDateOfMonth=function(i){return new Date(i.getFullYear(),i.getMonth()+1,0)},l.prototype.isMonthStart=function(i){return 1===i.getDate()},l.prototype.getLeapYearDaysCount=function(){return 366},l.prototype.getYearDaysCount=function(i,e){return(i.getFullYear()+e)%4==0?366:365},l.prototype.getDate=function(i){return i.getDate()},l.prototype.getMonth=function(i){return i.getMonth()+1},l.prototype.getFullYear=function(i){return i.getFullYear()},l.prototype.getYearLastDate=function(i,e){return new Date(i.getFullYear()+e,0,0)},l.prototype.getMonthDaysCount=function(i){return this.lastDateOfMonth(i).getDate()},l.prototype.getMonthStartDate=function(i){return new Date(i.getFullYear(),i.getMonth(),1,i.getHours(),i.getMinutes())},l.prototype.getMonthEndDate=function(i){return i.setDate(1),new Date(i.setMonth(i.getMonth()+1))},l.prototype.getExpectedDays=function(i,e){return e},l.prototype.setDate=function(i,e){i.setDate(e)},l.prototype.setValidDate=function(i,e,t,r,n){(0,s.le)(n)?i.setMonth(i.getMonth()+e,t):i.setMonth((n?r:i.getMonth())+e)},l.prototype.setMonth=function(i,e,t){i.setDate(1),i.setFullYear(i.getFullYear()),i.setMonth(e-1);var r=new Date(i.getFullYear(),i.getMonth()+1,0).getDate();i.setDate(Math.min(t,r))},l.prototype.addYears=function(i,e){i.setFullYear(i.getFullYear()+e)},l.prototype.isSameMonth=function(i,e){return i.getMonth()===e.getMonth()},l.prototype.checkMonth=function(i,e){return-1===e.indexOf(i.getMonth()+1)},l.prototype.compareMonth=function(i,e){return i.getMonth()>e.getMonth()},l.prototype.isSameYear=function(i,e){return i.getFullYear()===e.getFullYear()},l.prototype.isLastMonth=function(i){return 11===i.getMonth()},l.prototype.isLeapYear=function(i,e){return(i+e)%4==0},l}(),ls=function(){function l(){}return l.prototype.firstDateOfMonth=function(i){var e=this.getHijriDate(i);return s.hv.toGregorian(e.year,e.month,1)},l.prototype.lastDateOfMonth=function(i){var e=this.getHijriDate(i),t=this.getDaysInMonth(e.month,e.year),r=s.hv.toGregorian(e.year,e.month,t),n=new Date(r.getTime());n=new Date(n.setDate(n.getDate()+1));var a=this.getHijriDate(n);return e.month===a.month?n:(a=this.getHijriDate(r),e.month===a.month?r:new Date(r.setDate(r.getDate()-1)))},l.prototype.isMonthStart=function(i){return 1===this.getHijriDate(i).date},l.prototype.getLeapYearDaysCount=function(){return 355},l.prototype.getYearDaysCount=function(i,e){var t=this.getHijriDate(i);return this.isLeapYear(t.year,e)?355:354},l.prototype.getDate=function(i){return this.getHijriDate(i).date},l.prototype.getMonth=function(i){return this.getHijriDate(i).month},l.prototype.getFullYear=function(i){return this.getHijriDate(i).year},l.prototype.getYearLastDate=function(i,e){var t=this.getHijriDate(i);return s.hv.toGregorian(t.year+e,1,0)},l.prototype.getMonthDaysCount=function(i){var e=this.lastDateOfMonth(i);return this.getHijriDate(e).date},l.prototype.getMonthStartDate=function(i){var e=this.firstDateOfMonth(i);return new Date(e.getFullYear(),e.getMonth(),e.getDate(),i.getHours(),i.getMinutes())},l.prototype.getMonthEndDate=function(i){var e=this.lastDateOfMonth(i);return e.setDate(e.getDate()+1),new Date(e.setMonth(e.getMonth()))},l.prototype.getExpectedDays=function(i,e){for(var t=this.getHijriDate(i),r=[],n=0;n<e.length;n++){var a=s.hv.toGregorian(t.year,t.month,e[n]);r.push(a.getDate())}return r},l.prototype.setDate=function(i,e){var t=this.getHijriDate(i),r=s.hv.toGregorian(t.year,t.month,e);this.updateDateObj(i,r)},l.prototype.setValidDate=function(i,e,t,r,n){var a=(0,s.le)(n)?i:this.firstDateOfMonth(n),o=this.getHijriDate(a),c=s.hv.toGregorian(o.year,o.month+e,t);this.updateDateObj(i,c)},l.prototype.setMonth=function(i,e,t){var r=this.getHijriDate(i),n=s.hv.toGregorian(r.year,e,t);this.updateDateObj(i,n)},l.prototype.addYears=function(i,e,t){var r=this.getHijriDate(i),n=s.hv.toGregorian(r.year+e,t,1);this.updateDateObj(i,n)},l.prototype.isSameMonth=function(i,e){var t=this.getHijriDate(i),r=this.getHijriDate(e);return t.month===r.month},l.prototype.checkMonth=function(i,e){var t=this.getHijriDate(i);return-1===e.indexOf(t.month)},l.prototype.compareMonth=function(i,e){var t=this.getHijriDate(i),r=this.getHijriDate(e);return t.month>r.month},l.prototype.isSameYear=function(i,e){var t=this.getHijriDate(i),r=this.getHijriDate(e);return t.year===r.year},l.prototype.isLastMonth=function(i){return 12===this.getHijriDate(i).month},l.prototype.updateDateObj=function(i,e){i.setFullYear(e.getFullYear(),e.getMonth(),e.getDate())},l.prototype.isLeapYear=function(i,e){return(14+11*(i+e))%30<11},l.prototype.getDaysInMonth=function(i,e){var t=0;return t=29+(i+1)%2,11===i&&this.isLeapYear(e,0)&&t++,t},l.prototype.getHijriDate=function(i){return s.hv.getHijriDate(i)},l}(),cs=function(){function l(){this.timezoneData=[],this.timezoneData=this.getTimezoneData()}return l.prototype.offset=function(i,e){var t=i.getTimezoneOffset();try{var r=new Date(i.toLocaleString("en-US",{timeZone:e}));return isNaN(r.getTime())?0:(i.getTime()-r.getTime())/6e4+t}catch(n){return 0}},l.prototype.convert=function(i,e,t){"string"==typeof e&&(e=this.offset(i,e)),"string"==typeof t&&(t=this.offset(i,t));var r=i.getTimezoneOffset(),n=(i=new Date(i.getTime()+6e4*(e-t))).getTimezoneOffset();return new Date(i.getTime()+6e4*(n-r))},l.prototype.add=function(i,e){return this.convert(i,i.getTimezoneOffset(),e)},l.prototype.remove=function(i,e){return this.convert(i,e,i.getTimezoneOffset())},l.prototype.removeLocalOffset=function(i){return new Date(i.getTime()-6e4*i.getTimezoneOffset())},l.prototype.getLocalTimezoneName=function(){return window.Intl&&Intl.DateTimeFormat().resolvedOptions().timeZone||"UTC"},l.prototype.getTimezoneData=function(){return hs},l}(),hs=[{Value:"Pacific/Niue",Text:"(UTC-11:00) Niue"},{Value:"Pacific/Pago_Pago",Text:"(UTC-11:00) Pago Pago"},{Value:"Pacific/Honolulu",Text:"(UTC-10:00) Hawaii Time"},{Value:"Pacific/Rarotonga",Text:"(UTC-10:00) Rarotonga"},{Value:"Pacific/Tahiti",Text:"(UTC-10:00) Tahiti"},{Value:"Pacific/Marquesas",Text:"(UTC-09:30) Marquesas"},{Value:"America/Anchorage",Text:"(UTC-09:00) Alaska Time"},{Value:"Pacific/Gambier",Text:"(UTC-09:00) Gambier"},{Value:"America/Los_Angeles",Text:"(UTC-08:00) Pacific Time"},{Value:"America/Tijuana",Text:"(UTC-08:00) Pacific Time - Tijuana"},{Value:"America/Vancouver",Text:"(UTC-08:00) Pacific Time - Vancouver"},{Value:"America/Whitehorse",Text:"(UTC-08:00) Pacific Time - Whitehorse"},{Value:"Pacific/Pitcairn",Text:"(UTC-08:00) Pitcairn"},{Value:"America/Denver",Text:"(UTC-07:00) Mountain Time"},{Value:"America/Phoenix",Text:"(UTC-07:00) Mountain Time - Arizona"},{Value:"America/Mazatlan",Text:"(UTC-07:00) Mountain Time - Chihuahua, Mazatlan"},{Value:"America/Dawson_Creek",Text:"(UTC-07:00) Mountain Time - Dawson Creek"},{Value:"America/Edmonton",Text:"(UTC-07:00) Mountain Time - Edmonton"},{Value:"America/Hermosillo",Text:"(UTC-07:00) Mountain Time - Hermosillo"},{Value:"America/Yellowknife",Text:"(UTC-07:00) Mountain Time - Yellowknife"},{Value:"America/Belize",Text:"(UTC-06:00) Belize"},{Value:"America/Chicago",Text:"(UTC-06:00) Central Time"},{Value:"America/Mexico_City",Text:"(UTC-06:00) Central Time - Mexico City"},{Value:"America/Regina",Text:"(UTC-06:00) Central Time - Regina"},{Value:"America/Tegucigalpa",Text:"(UTC-06:00) Central Time - Tegucigalpa"},{Value:"America/Winnipeg",Text:"(UTC-06:00) Central Time - Winnipeg"},{Value:"America/Costa_Rica",Text:"(UTC-06:00) Costa Rica"},{Value:"America/El_Salvador",Text:"(UTC-06:00) El Salvador"},{Value:"Pacific/Galapagos",Text:"(UTC-06:00) Galapagos"},{Value:"America/Guatemala",Text:"(UTC-06:00) Guatemala"},{Value:"America/Managua",Text:"(UTC-06:00) Managua"},{Value:"America/Cancun",Text:"(UTC-05:00) America Cancun"},{Value:"America/Bogota",Text:"(UTC-05:00) Bogota"},{Value:"Pacific/Easter",Text:"(UTC-05:00) Easter Island"},{Value:"America/New_York",Text:"(UTC-05:00) Eastern Time"},{Value:"America/Iqaluit",Text:"(UTC-05:00) Eastern Time - Iqaluit"},{Value:"America/Toronto",Text:"(UTC-05:00) Eastern Time - Toronto"},{Value:"America/Guayaquil",Text:"(UTC-05:00) Guayaquil"},{Value:"America/Havana",Text:"(UTC-05:00) Havana"},{Value:"America/Jamaica",Text:"(UTC-05:00) Jamaica"},{Value:"America/Lima",Text:"(UTC-05:00) Lima"},{Value:"America/Nassau",Text:"(UTC-05:00) Nassau"},{Value:"America/Panama",Text:"(UTC-05:00) Panama"},{Value:"America/Port-au-Prince",Text:"(UTC-05:00) Port-au-Prince"},{Value:"America/Rio_Branco",Text:"(UTC-05:00) Rio Branco"},{Value:"America/Halifax",Text:"(UTC-04:00) Atlantic Time - Halifax"},{Value:"America/Barbados",Text:"(UTC-04:00) Barbados"},{Value:"Atlantic/Bermuda",Text:"(UTC-04:00) Bermuda"},{Value:"America/Boa_Vista",Text:"(UTC-04:00) Boa Vista"},{Value:"America/Caracas",Text:"(UTC-04:00) Caracas"},{Value:"America/Curacao",Text:"(UTC-04:00) Curacao"},{Value:"America/Grand_Turk",Text:"(UTC-04:00) Grand Turk"},{Value:"America/Guyana",Text:"(UTC-04:00) Guyana"},{Value:"America/La_Paz",Text:"(UTC-04:00) La Paz"},{Value:"America/Manaus",Text:"(UTC-04:00) Manaus"},{Value:"America/Martinique",Text:"(UTC-04:00) Martinique"},{Value:"America/Port_of_Spain",Text:"(UTC-04:00) Port of Spain"},{Value:"America/Porto_Velho",Text:"(UTC-04:00) Porto Velho"},{Value:"America/Puerto_Rico",Text:"(UTC-04:00) Puerto Rico"},{Value:"America/Santo_Domingo",Text:"(UTC-04:00) Santo Domingo"},{Value:"America/Thule",Text:"(UTC-04:00) Thule"},{Value:"America/St_Johns",Text:"(UTC-03:30) Newfoundland Time - St. Johns"},{Value:"America/Araguaina",Text:"(UTC-03:00) Araguaina"},{Value:"America/Asuncion",Text:"(UTC-03:00) Asuncion"},{Value:"America/Belem",Text:"(UTC-03:00) Belem"},{Value:"America/Argentina/Buenos_Aires",Text:"(UTC-03:00) Buenos Aires"},{Value:"America/Campo_Grande",Text:"(UTC-03:00) Campo Grande"},{Value:"America/Cayenne",Text:"(UTC-03:00) Cayenne"},{Value:"America/Cuiaba",Text:"(UTC-03:00) Cuiaba"},{Value:"America/Fortaleza",Text:"(UTC-03:00) Fortaleza"},{Value:"America/Godthab",Text:"(UTC-03:00) Godthab"},{Value:"America/Maceio",Text:"(UTC-03:00) Maceio"},{Value:"America/Miquelon",Text:"(UTC-03:00) Miquelon"},{Value:"America/Montevideo",Text:"(UTC-03:00) Montevideo"},{Value:"Antarctica/Palmer",Text:"(UTC-03:00) Palmer"},{Value:"America/Paramaribo",Text:"(UTC-03:00) Paramaribo"},{Value:"America/Punta_Arenas",Text:"(UTC-03:00) Punta Arenas"},{Value:"America/Recife",Text:"(UTC-03:00) Recife"},{Value:"Antarctica/Rothera",Text:"(UTC-03:00) Rothera"},{Value:"America/Bahia",Text:"(UTC-03:00) Salvador"},{Value:"America/Santiago",Text:"(UTC-03:00) Santiago"},{Value:"Atlantic/Stanley",Text:"(UTC-03:00) Stanley"},{Value:"America/Noronha",Text:"(UTC-02:00) Noronha"},{Value:"America/Sao_Paulo",Text:"(UTC-02:00) Sao Paulo"},{Value:"Atlantic/South_Georgia",Text:"(UTC-02:00) South Georgia"},{Value:"Atlantic/Azores",Text:"(UTC-01:00) Azores"},{Value:"Atlantic/Cape_Verde",Text:"(UTC-01:00) Cape Verde"},{Value:"America/Scoresbysund",Text:"(UTC-01:00) Scoresbysund"},{Value:"Africa/Abidjan",Text:"(UTC+00:00) Abidjan"},{Value:"Africa/Accra",Text:"(UTC+00:00) Accra"},{Value:"Africa/Bissau",Text:"(UTC+00:00) Bissau"},{Value:"Atlantic/Canary",Text:"(UTC+00:00) Canary Islands"},{Value:"Africa/Casablanca",Text:"(UTC+00:00) Casablanca"},{Value:"America/Danmarkshavn",Text:"(UTC+00:00) Danmarkshavn"},{Value:"Europe/Dublin",Text:"(UTC+00:00) Dublin"},{Value:"Africa/El_Aaiun",Text:"(UTC+00:00) El Aaiun"},{Value:"Atlantic/Faroe",Text:"(UTC+00:00) Faeroe"},{Value:"Etc/UTC",Text:"(UTC+00:00) UTC (no daylight saving)"},{Value:"Europe/Lisbon",Text:"(UTC+00:00) Lisbon"},{Value:"Europe/London",Text:"(UTC+00:00) London"},{Value:"Africa/Monrovia",Text:"(UTC+00:00) Monrovia"},{Value:"Atlantic/Reykjavik",Text:"(UTC+00:00) Reykjavik"},{Value:"UTC",Text:"UTC"},{Value:"Africa/Algiers",Text:"(UTC+01:00) Algiers"},{Value:"Europe/Amsterdam",Text:"(UTC+01:00) Amsterdam"},{Value:"Europe/Andorra",Text:"(UTC+01:00) Andorra"},{Value:"Europe/Berlin",Text:"(UTC+01:00) Berlin"},{Value:"Europe/Brussels",Text:"(UTC+01:00) Brussels"},{Value:"Europe/Budapest",Text:"(UTC+01:00) Budapest"},{Value:"Europe/Belgrade",Text:"(UTC+01:00) Central European Time - Belgrade"},{Value:"Europe/Prague",Text:"(UTC+01:00) Central European Time - Prague"},{Value:"Africa/Ceuta",Text:"(UTC+01:00) Ceuta"},{Value:"Europe/Copenhagen",Text:"(UTC+01:00) Copenhagen"},{Value:"Europe/Gibraltar",Text:"(UTC+01:00) Gibraltar"},{Value:"Africa/Lagos",Text:"(UTC+01:00) Lagos"},{Value:"Europe/Luxembourg",Text:"(UTC+01:00) Luxembourg"},{Value:"Europe/Madrid",Text:"(UTC+01:00) Madrid"},{Value:"Europe/Malta",Text:"(UTC+01:00) Malta"},{Value:"Europe/Monaco",Text:"(UTC+01:00) Monaco"},{Value:"Africa/Ndjamena",Text:"(UTC+01:00) Ndjamena"},{Value:"Europe/Oslo",Text:"(UTC+01:00) Oslo"},{Value:"Europe/Paris",Text:"(UTC+01:00) Paris"},{Value:"Europe/Rome",Text:"(UTC+01:00) Rome"},{Value:"Europe/Stockholm",Text:"(UTC+01:00) Stockholm"},{Value:"Europe/Tirane",Text:"(UTC+01:00) Tirane"},{Value:"Africa/Tunis",Text:"(UTC+01:00) Tunis"},{Value:"Europe/Vienna",Text:"(UTC+01:00) Vienna"},{Value:"Europe/Warsaw",Text:"(UTC+01:00) Warsaw"},{Value:"Europe/Zurich",Text:"(UTC+01:00) Zurich"},{Value:"Asia/Amman",Text:"(UTC+02:00) Amman"},{Value:"Europe/Athens",Text:"(UTC+02:00) Athens"},{Value:"Asia/Beirut",Text:"(UTC+02:00) Beirut"},{Value:"Europe/Bucharest",Text:"(UTC+02:00) Bucharest"},{Value:"Africa/Cairo",Text:"(UTC+02:00) Cairo"},{Value:"Europe/Chisinau",Text:"(UTC+02:00) Chisinau"},{Value:"Asia/Damascus",Text:"(UTC+02:00) Damascus"},{Value:"Asia/Gaza",Text:"(UTC+02:00) Gaza"},{Value:"Europe/Helsinki",Text:"(UTC+02:00) Helsinki"},{Value:"Asia/Jerusalem",Text:"(UTC+02:00) Jerusalem"},{Value:"Africa/Johannesburg",Text:"(UTC+02:00) Johannesburg"},{Value:"Africa/Khartoum",Text:"(UTC+02:00) Khartoum"},{Value:"Europe/Kiev",Text:"(UTC+02:00) Kiev"},{Value:"Africa/Maputo",Text:"(UTC+02:00) Maputo"},{Value:"Europe/Kaliningrad",Text:"(UTC+02:00) Moscow-01 - Kaliningrad"},{Value:"Asia/Nicosia",Text:"(UTC+02:00) Nicosia"},{Value:"Europe/Riga",Text:"(UTC+02:00) Riga"},{Value:"Europe/Sofia",Text:"(UTC+02:00) Sofia"},{Value:"Europe/Tallinn",Text:"(UTC+02:00) Tallinn"},{Value:"Africa/Tripoli",Text:"(UTC+02:00) Tripoli"},{Value:"Europe/Vilnius",Text:"(UTC+02:00) Vilnius"},{Value:"Africa/Windhoek",Text:"(UTC+02:00) Windhoek"},{Value:"Asia/Baghdad",Text:"(UTC+03:00) Baghdad"},{Value:"Europe/Istanbul",Text:"(UTC+03:00) Istanbul"},{Value:"Europe/Minsk",Text:"(UTC+03:00) Minsk"},{Value:"Europe/Moscow",Text:"(UTC+03:00) Moscow+00 - Moscow"},{Value:"Africa/Nairobi",Text:"(UTC+03:00) Nairobi"},{Value:"Asia/Qatar",Text:"(UTC+03:00) Qatar"},{Value:"Asia/Riyadh",Text:"(UTC+03:00) Riyadh"},{Value:"Antarctica/Syowa",Text:"(UTC+03:00) Syowa"},{Value:"Asia/Tehran",Text:"(UTC+03:30) Tehran"},{Value:"Asia/Baku",Text:"(UTC+04:00) Baku"},{Value:"Asia/Dubai",Text:"(UTC+04:00) Dubai"},{Value:"Indian/Mahe",Text:"(UTC+04:00) Mahe"},{Value:"Indian/Mauritius",Text:"(UTC+04:00) Mauritius"},{Value:"Europe/Samara",Text:"(UTC+04:00) Moscow+01 - Samara"},{Value:"Indian/Reunion",Text:"(UTC+04:00) Reunion"},{Value:"Asia/Tbilisi",Text:"(UTC+04:00) Tbilisi"},{Value:"Asia/Yerevan",Text:"(UTC+04:00) Yerevan"},{Value:"Asia/Kabul",Text:"(UTC+04:30) Kabul"},{Value:"Asia/Aqtau",Text:"(UTC+05:00) Aqtau"},{Value:"Asia/Aqtobe",Text:"(UTC+05:00) Aqtobe"},{Value:"Asia/Ashgabat",Text:"(UTC+05:00) Ashgabat"},{Value:"Asia/Dushanbe",Text:"(UTC+05:00) Dushanbe"},{Value:"Asia/Karachi",Text:"(UTC+05:00) Karachi"},{Value:"Indian/Kerguelen",Text:"(UTC+05:00) Kerguelen"},{Value:"Indian/Maldives",Text:"(UTC+05:00) Maldives"},{Value:"Antarctica/Mawson",Text:"(UTC+05:00) Mawson"},{Value:"Asia/Yekaterinburg",Text:"(UTC+05:00) Moscow+02 - Yekaterinburg"},{Value:"Asia/Tashkent",Text:"(UTC+05:00) Tashkent"},{Value:"Asia/Colombo",Text:"(UTC+05:30) Colombo"},{Value:"Asia/Kolkata",Text:"(UTC+05:30) India Standard Time"},{Value:"Asia/Katmandu",Text:"(UTC+05:45) Katmandu"},{Value:"Asia/Almaty",Text:"(UTC+06:00) Almaty"},{Value:"Asia/Bishkek",Text:"(UTC+06:00) Bishkek"},{Value:"Indian/Chagos",Text:"(UTC+06:00) Chagos"},{Value:"Asia/Dhaka",Text:"(UTC+06:00) Dhaka"},{Value:"Asia/Omsk",Text:"(UTC+06:00) Moscow+03 - Omsk"},{Value:"Asia/Thimphu",Text:"(UTC+06:00) Thimphu"},{Value:"Antarctica/Vostok",Text:"(UTC+06:00) Vostok"},{Value:"Indian/Cocos",Text:"(UTC+06:30) Cocos"},{Value:"Asia/Yangon",Text:"(UTC+06:30) Rangoon"},{Value:"Asia/Bangkok",Text:"(UTC+07:00) Bangkok"},{Value:"Indian/Christmas",Text:"(UTC+07:00) Christmas"},{Value:"Antarctica/Davis",Text:"(UTC+07:00) Davis"},{Value:"Asia/Saigon",Text:"(UTC+07:00) Hanoi"},{Value:"Asia/Hovd",Text:"(UTC+07:00) Hovd"},{Value:"Asia/Jakarta",Text:"(UTC+07:00) Jakarta"},{Value:"Asia/Krasnoyarsk",Text:"(UTC+07:00) Moscow+04 - Krasnoyarsk"},{Value:"Asia/Brunei",Text:"(UTC+08:00) Brunei"},{Value:"Asia/Shanghai",Text:"(UTC+08:00) China Time - Beijing"},{Value:"Asia/Choibalsan",Text:"(UTC+08:00) Choibalsan"},{Value:"Asia/Hong_Kong",Text:"(UTC+08:00) Hong Kong"},{Value:"Asia/Kuala_Lumpur",Text:"(UTC+08:00) Kuala Lumpur"},{Value:"Asia/Macau",Text:"(UTC+08:00) Macau"},{Value:"Asia/Makassar",Text:"(UTC+08:00) Makassar"},{Value:"Asia/Manila",Text:"(UTC+08:00) Manila"},{Value:"Asia/Irkutsk",Text:"(UTC+08:00) Moscow+05 - Irkutsk"},{Value:"Asia/Singapore",Text:"(UTC+08:00) Singapore"},{Value:"Asia/Taipei",Text:"(UTC+08:00) Taipei"},{Value:"Asia/Ulaanbaatar",Text:"(UTC+08:00) Ulaanbaatar"},{Value:"Australia/Perth",Text:"(UTC+08:00) Western Time - Perth"},{Value:"Asia/Pyongyang",Text:"(UTC+08:30) Pyongyang"},{Value:"Asia/Dili",Text:"(UTC+09:00) Dili"},{Value:"Asia/Jayapura",Text:"(UTC+09:00) Jayapura"},{Value:"Asia/Yakutsk",Text:"(UTC+09:00) Moscow+06 - Yakutsk"},{Value:"Pacific/Palau",Text:"(UTC+09:00) Palau"},{Value:"Asia/Seoul",Text:"(UTC+09:00) Seoul"},{Value:"Asia/Tokyo",Text:"(UTC+09:00) Tokyo"},{Value:"Australia/Darwin",Text:"(UTC+09:30) Central Time - Darwin"},{Value:"Antarctica/DumontDUrville",Text:'(UTC+10:00) Dumont D"Urville'},{Value:"Australia/Brisbane",Text:"(UTC+10:00) Eastern Time - Brisbane"},{Value:"Pacific/Guam",Text:"(UTC+10:00) Guam"},{Value:"Asia/Vladivostok",Text:"(UTC+10:00) Moscow+07 - Vladivostok"},{Value:"Pacific/Port_Moresby",Text:"(UTC+10:00) Port Moresby"},{Value:"Pacific / Chuuk",Text:"(UTC+10:00) Truk"},{Value:"Australia/Adelaide",Text:"(UTC+10:30) Central Time - Adelaide"},{Value:"Antarctica/Casey",Text:"(UTC+11:00) Casey"},{Value:"Australia/Hobart",Text:"(UTC+11:00) Eastern Time - Hobart"},{Value:"Australia/Sydney",Text:"(UTC+11:00) Eastern Time - Melbourne, Sydney"},{Value:"Pacific/Efate",Text:"(UTC+11:00) Efate"},{Value:"Pacific/Guadalcanal",Text:"(UTC+11:00) Guadalcanal"},{Value:"Pacific/Kosrae",Text:"(UTC+11:00) Kosrae"},{Value:"Asia/Magadan",Text:"(UTC+11:00) Moscow+08 - Magadan"},{Value:"Pacific / Norfolk",Text:"(UTC+11:00) Norfolk"},{Value:"Pacific/Noumea",Text:"(UTC+11:00) Noumea"},{Value:"Pacific/Pohnpei",Text:"(UTC+11:00) Ponape"},{Value:"Pacific/Funafuti",Text:"(UTC+12:00) Funafuti"},{Value:"Pacific/Kwajalein",Text:"(UTC+12:00) Kwajalein"},{Value:"Pacific/Majuro",Text:"(UTC+12:00) Majuro"},{Value:"Asia/Kamchatka",Text:"(UTC+12:00) Moscow+09 - Petropavlovsk - Kamchatskiy"},{Value:"Pacific / Nauru",Text:"(UTC+12:00) Nauru"},{Value:"Pacific/Tarawa",Text:"(UTC+12:00) Tarawa"},{Value:"Pacific/Wake",Text:"(UTC+12:00) Wake"},{Value:"Pacific/Wallis",Text:"(UTC+12:00) Wallis"},{Value:"Pacific/Auckland",Text:"(UTC+13:00) Auckland"},{Value:"Pacific/Enderbury",Text:"(UTC+13:00) Enderbury"},{Value:"Pacific/Fakaofo",Text:"(UTC+13:00) Fakaofo"},{Value:"Pacific/Fiji",Text:"(UTC+13:00) Fiji"},{Value:"Pacific/Tongatapu",Text:"(UTC+13:00) Tongatapu"},{Value:"Pacific/Apia",Text:"(UTC+14:00) Apia"},{Value:"Pacific/Kiritimati",Text:"(UTC+14:00) Kiritimati"}];function ps(l,i,e){var t="";if(l.monthDay.length)t+=l.monthDay[0];else if(l.day){var r=l.setPosition-1;t+=e.getConstant(ws[r>-1?r:ws.length-1])+" "+Y((0,s.NA)(Ds[l.day[0]],i),"single")}return t}function kn(l,i,e,t,r,n,a,o,c){void 0===r&&(r=oc),void 0===n&&(n=null),void 0===a&&(a="Gregorian"),void 0===o&&(o=null),void 0===c&&(c=null);var p,h=Fn(i);I=Nn(a);var u=[],d=new Date(l.getTime());wr=[];var v=(0,s.le)(e)?[]:e.split(","),f=new cs;if(v.forEach(function(m){var y=yr(m);o&&c&&(y=f.convert(new Date(y.getTime()),o,c)),wr.push(new Date(y.getTime()).setHours(0,0,0,0))}),h.recExceptionCount=(0,s.le)(h.count)?0:wr.length,Rt=n&&n>l&&!h.count?new Date(new Date(n.getTime()).setHours(0,0,0)):null,!h.until&&Rt&&((p=new Date(Rt.getTime())).setDate(Rt.getDate()+r*h.interval),h.until=p),h.until&&l>h.until)return u;if(Ts=r,function(l){for(;wt[0]!==l;)ac(wt)}(ne[t]),h.until){var g=C(h.until);h.until=new Date(g.getFullYear(),g.getMonth(),g.getDate(),23,59,59)}switch(h.freq){case"DAILY":!function(l,i,e,t){for(var r=new Date(l.getTime()),n=t.interval,a=_e(l,t),c=t.day;Re(r,i)&&!(Tr(r,t)&&(c.indexOf(ne[r.getDay()])>-1||0===c.length)&&(In(e,r.getTime()),a&&e.length+t.recExceptionCount>=a));)r.setDate(r.getDate()+n),r.getHours()!==l.getHours()&&r.setHours(l.getHours())}(d,h.until,u,h);break;case"WEEKLY":!function(l,i,e,t){var r=new Date(l.getTime());t.day.length||t.day.push(ne[l.getDay()]);var h,n=t.interval,a=t.day,o=_e(l,t),c=!0,p=[];if(a.length>1)for(((0,s.le)(t.wkst)||""===t.wkst)&&(t.wkst=wt[0]),h=ne.indexOf(t.wkst);Re(r,i);){var u=ne.indexOf(ne[r.getDay()])-h,d=V(r,-(u=-1===u?6:u)),v=V(d,6),f=new Date(r.getTime());for(v=C(v),f=C(f);v>=f&&(a.indexOf(ne[r.getDay()])>-1&&p.push([r.getTime()]),!(o&&e.length+t.recExceptionCount>=o));)r.setDate(r.getDate()+1),r.getHours()!==l.getHours()&&r.setHours(l.getHours()),f=C(f=new Date(r.getTime()));if(r.setDate(r.getDate()-1),o&&e.length+t.recExceptionCount>=o)break;r.setDate(r.getDate()+1+7*(n-1)),Ln(p,c,l,i,e,t),p=[]}else{for(r=se(l,t.day);Re(r,i)&&((c=Tr(r,t))&&a.indexOf(ne[r.getDay()])>-1&&In(e,r.getTime()),!(o&&e.length+t.recExceptionCount>=o));)r.setDate(r.getDate()+7*n);Ln(p,c,l,i,e,t),p=[]}}(d,h.until,u,h);break;case"MONTHLY":us(d,h.until,u,h);break;case"YEARLY":!function(l,i,e,t){switch(function(l){return l.yearDay.length?"YEARDAY":l.weekNo.length?"WEEKNO":"MONTH"}(t)){case"MONTH":us(l,i,e,t);break;case"WEEKNO":!function(l,i,e,t){for(var n,o,h,u,d,v,r=I.getYearLastDate(l,0),a=_e(l,t),p=t.weekNo,f=[],g=t.day;Re(r,i);){h=6-wt.indexOf(ne[r.getDay()])+1;for(var m=0;m<p.length;m++)for(d=1===(u=(u=p[m])>0?u:53+u+1)?h:h+7*(u-1),v=1===u?h-7:h+7*(u-2);v<d;)n=new Date(r.getTime()+Z*v),(0===g.length||g.indexOf(ne[n.getDay()])>-1)&&((0,s.le)(t.setPosition)?ki(o,l,i,e,t,n.getTime()):f.push([n.getTime()])),v++;if((0,s.le)(t.setPosition)||Tt(f,o,l,i,e,t),a&&e.length+t.recExceptionCount>=a)return;r=I.getYearLastDate(n,t.interval),f=[]}}(l,i,e,t);break;case"YEARDAY":!function(l,i,e,t){for(var n,o,h,r=I.getYearLastDate(l,0),a=_e(l,t),c=[],p=t.day;Re(r,i);){for(var u=0;u<t.yearDay.length;u++)h=t.yearDay[u],n=new Date(r.getTime()),h!==I.getLeapYearDaysCount()&&h!==-I.getLeapYearDaysCount()||I.isLeapYear(I.getFullYear(n),1)?(n.setDate(n.getDate()+(h<0?I.getYearDaysCount(n,1)+1+h:h)),(0===p.length||p.indexOf(ne[n.getDay()])>-1)&&(null==t.setPosition?ki(o,l,i,e,t,n.getTime()):c.push([n.getTime()]))):n.setDate(n.getDate()+1);if((0,s.le)(t.setPosition)||Tt(c,o,l,i,e,t),a&&e.length+t.recExceptionCount>=a)return;r=I.getYearLastDate(n,t.interval),c=[]}}(l,i,e,t)}}(d,h.until,u,h)}return u}function yr(l){return new Date(l.substr(0,4)+"-"+l.substr(4,2)+"-"+l.substr(6,5)+":"+l.substr(11,2)+":"+l.substr(13))}function In(l,i){var e=new Date(i).setHours(0,0,0,0);-1===wr.indexOf(e)&&(!Rt||e>=Rt.getTime())&&l.push(i)}function _e(l,i){var e=Ts;return i.count?e=i.count:i.until&&("DAILY"===i.freq||"WEEKLY"===i.freq?e=Math.floor((i.until.getTime()-l.getTime())/Z)+1:("MONTHLY"===i.freq||"YEARLY"===i.freq)&&(e=Math.floor((i.until.getMonth()+12*i.until.getFullYear()-(l.getMonth()+12*l.getFullYear()))/i.interval)+(i.day.length>1?Math.floor((i.until.getTime()-l.getTime())/Z)+1:1),"YEARLY"===i.freq&&(e=i.month.length>1?e*i.month.length:e))),e}function us(l,i,e,t){t.month.length||t.day.length||t.monthDay.length?t.month.length>0&&!t.day.length&&!t.monthDay.length&&t.monthDay.push(l.getDate()):(t.monthDay.push(l.getDate()),"YEARLY"===t.freq&&t.month.push(l.getMonth()+1));var r=function(l){return l.monthDay.length&&!l.day.length?"date":!l.monthDay.length&&l.day.length?"day":"both"}(t);switch(r){case"day":switch(t.freq){case"MONTHLY":gs(l,i,e,t);break;case"YEARLY":!function(l,i,e,t){var r=t.day,n=r.map(function(d){return zn.test(d)});if(r.length>1&&n.indexOf(!0)>-1)!function(l,i,e,t){var p,u,v,f,r=t.day,n=_e(l,t),a=new Date(l.getTime()),o=t.interval,c=[],h=[],d=0;a=I.getMonthStartDate(a);var m=[];for(t.month.length&&I.setMonth(a,t.month[0],1),a=se(a,t.day);Re(a,i);){v=new Date(a.getTime());for(var y=0;y<=t.month.length;y++)for(var w=0;w<=r.length-1;w++){for(a=se(a=I.getMonthStartDate(a),t.day),c=[];I.isSameYear(v,a)&&n&&e.length+t.recExceptionCount<=n;)for(;I.isSameYear(v,a);){if(v=new Date(a.getTime()),0===t.month.length||t.month.length>0&&t.month[y]===I.getMonth(v)){var D=r[w].match(Dr),b=parseInt(D[0],10);for(f=new Date(a.getTime());I.isSameYear(f,a)&&I.isSameMonth(f,a);)D[D.length-1]===ne[f.getDay()]&&c.push([f.getTime()]),f.setDate(f.getDate()+1);f.setDate(f.getDate()-1),p=D[0].indexOf("-")>-1?c.length- -1*b:b-1,p=isNaN(p)?0:p}d=Mt(a,t,d,undefined,1),a=se(a,t.day)}if(a=0===w&&f?new Date(f.getTime()):new Date(v.getTime()),c.length>0&&((0,s.le)(t.setPosition)?Tt(c,u,l,i,e,t,p):h=[Pn(c,p,m)]),n&&e.length+t.recExceptionCount>=n)return}(0,s.le)(t.setPosition)||(qn(h,u,l,i,e,t),m=[]),I.isLastMonth(a)?(I.setValidDate(a,1,1),a.setFullYear(a.getFullYear()+o-1)):a.setFullYear(a.getFullYear()+o),a=se(a,t.day),t.month.length&&I.setMonth(a,t.month[0],a.getDate())}}(l,i,e,t);else if(t.month.length&&1===r.length&&n.indexOf(!0)>-1)gs(l,i,e,t);else{var o,a=new Date(l.getTime()),c=_e(l,t),h=t.interval,p=[];for(t.month.length&&I.setMonth(a,t.month[0],a.getDate()),(0,s.le)(t.setPosition)&&0===t.month.length&&0===t.weekNo.length&&a.setFullYear(l.getFullYear(),0,1),a=se(a=I.getMonthStartDate(a),t.day);Re(a,i);){for(o=new Date(a.getTime());I.isSameYear(o,a)&&c&&e.length+t.recExceptionCount<=c;)for(o=new Date(a.getTime());I.isSameYear(o,a);){if(!(0===t.month.length||t.month.length>0&&!I.checkMonth(a,t.month))){I.setValidDate(a,1,1),a=se(a,t.day);break}if(r.length>1){if(I.compareMonth(o,a)){I.setValidDate(a,1,1),a=se(a,t.day);break}r.indexOf(ne[o.getDay()])>-1&&p.push([o.getTime()]),o.setDate(o.getDate()+1)}else{if(o.getFullYear()>a.getFullYear()){I.setValidDate(a,1,1),a=se(a,t.day);break}var u=ys(r[0]);ne[o.getDay()]===u&&new Date(o.getFullYear(),o.getMonth(),0)>new Date(l.getFullYear())&&p.push([o.getTime()]),o.setDate(o.getDate()+7)}}if(a.setFullYear(o.getFullYear(),o.getMonth(),o.getDate()),ms(p,l,i,e,t),I.isLastMonth(a)&&(I.setValidDate(a,1,1),a=se(a,t.day)),a.setFullYear(a.getFullYear()+h-1),c&&e.length+t.recExceptionCount>=c)return;a=se(a,t.day),p=[]}}}(l,i,e,t)}break;case"both":case"date":switch(t.freq){case"MONTHLY":vs(l,i,e,t);break;case"YEARLY":!function(l,i,e,t){if(t.month.length)vs(l,i,e,t);else{var n,r=ds(l,t);for(r.tempDate=r.mainDate=I.getMonthStartDate(r.tempDate);Re(r.tempDate,i);){for(n=new Date(r.tempDate.getTime());I.isSameYear(n,r.tempDate)&&r.expectedCount&&e.length+t.recExceptionCount<=r.expectedCount;){if(!(0===t.month.length||t.month.length>0&&!I.checkMonth(r.tempDate,t.month))){I.setValidDate(r.tempDate,1,1),r.tempDate=se(r.tempDate,t.day);break}fs(t,r,i,!1),r.beginDate=new Date(r.tempDate.getTime()),r.monthInit=Mt(r.tempDate,t,r.monthInit,r.beginDate)}if(r.tempDate.setFullYear(n.getFullYear(),n.getMonth(),n.getDate()),Ln(r.dateCollection,r.state,l,i,e,t),I.isLastMonth(r.tempDate)&&(I.setValidDate(r.tempDate,1,1),r.tempDate=se(r.tempDate,t.day)),r.expectedCount&&e.length+t.recExceptionCount>=r.expectedCount)return;r.tempDate.setFullYear(r.tempDate.getFullYear()+t.interval-1),r.tempDate=se(r.tempDate,t.day),r.monthInit=Mt(r.tempDate,t,r.monthInit,r.beginDate),r.dateCollection=[]}}}(l,i,e,t)}}}function ds(l,i){var e={monthCollection:[],index:0,tempDate:new Date(l.getTime()),mainDate:new Date(l.getTime()),expectedCount:_e(l,i),monthInit:0,dateCollection:[]};return i.month.length&&I.setMonth(e.tempDate,i.month[0],e.tempDate.getDate()),e}function vs(l,i,e,t){var r=ds(l,t);if(r.tempDate=r.mainDate=I.getMonthStartDate(r.tempDate),!(("MONTHLY"===t.freq&&12===t.interval||"YEARLY"===t.freq)&&I.getMonthDaysCount(l)<t.monthDay[0]))for(;Re(r.tempDate,i);){if(r.beginDate=new Date(r.tempDate.getTime()),fs(t,r,i,!0,l,e),(0,s.le)(t.setPosition)||Tt(r.dateCollection,r.state,l,i,e,t),r.expectedCount&&e.length+t.recExceptionCount>=r.expectedCount)return;r.monthInit=Mt(r.tempDate,t,r.monthInit,r.beginDate),r.dateCollection=[]}}function fs(l,i,e,t,r,n){for(var a=0;a<l.monthDay.length;a++){i.date=l.monthDay[a],i.tempDate=I.getMonthStartDate(i.tempDate);var o=I.getMonthDaysCount(i.tempDate);if(i.date=i.date>0?i.date:o+i.date+1,$l(i.tempDate,i.date,i.mainDate)&&i.date>0){if(I.setDate(i.tempDate,i.date),e&&i.tempDate>e)return;(0===l.day.length||l.day.indexOf(ne[i.tempDate.getDay()])>-1)&&(t&&(0,s.le)(l.setPosition)&&i.expectedCount&&n.length+l.recExceptionCount<i.expectedCount?ki(i.state,r,e,n,l,i.tempDate.getTime()):i.dateCollection.push([i.tempDate.getTime()]))}}}function Mt(l,i,e,t,r){void 0===t&&(t=null);var n=t?t.getMonth():0,a=I.getMonthStartDate(l);return r=(0,s.le)(r)?i.interval:r,l.setFullYear(a.getFullYear()),l.setMonth(a.getMonth()),l.setDate(a.getDate()),i.month.length?(e++,I.setMonth(l,i.month[e%=i.month.length],1),0===e&&I.addYears(l,r,i.month[0])):(t&&t.getFullYear()<l.getFullYear()&&(n=l.getMonth()-1),I.setValidDate(l,r,1,n,t)),e}function gs(l,i,e,t){if(t.day.length>1)!function(l,i,e,t){var r=t.day,n=new Date(l.getTime());n=I.getMonthStartDate(n);var h,p,v,a=[],o=[],c=[],u=_e(l,t),d=0;for(t.month.length&&I.setMonth(n,t.month[0],1),n=se(n,t.day);Re(n,i)&&u&&e.length+t.recExceptionCount<u;){var f=new Date(n.getTime());if(r.map(function(k){return zn.test(k)}).indexOf(!0)>-1){for(var m=0;m<=r.length-1;m++){var y=r[m].match(Dr),w=parseInt(y[0],10);for(n=new Date(n.getTime()),n=se(n=I.getMonthStartDate(n),r),f.setFullYear(n.getFullYear(),n.getMonth(),n.getDate());I.isSameYear(f,n)&&I.isSameMonth(f,n);)y[y.length-1]===ne[f.getDay()]&&a.push([f.getTime()]),f.setDate(f.getDate()+1);if(f.setDate(f.getDate()-1),h=y[0].indexOf("-")>-1?a.length- -1*w:w-1,h=isNaN(h)?0:h,a.length>0&&((0,s.le)(t.setPosition)?Tt(a,p,l,i,e,t,h):o=[Pn(a,h,c)]),u&&e.length+t.recExceptionCount>=u)return;a=[]}(0,s.le)(t.setPosition)||(qn(o,p,l,i,e,t),c=[]),d=Mt(n,t,d,v),n=se(n,t.day),a=[]}else{var D=[],b=ec(r);f.setFullYear(n.getFullYear(),n.getMonth(),n.getDate());var A=new Date(n.getTime());for(v=new Date(n.getTime());I.isSameMonth(A,n);)D.push(n.getTime()),r.indexOf(ne[n.getDay()])>-1&&(a.push(D),D=[]),n.setDate(n.getDate()+b[ne[n.getDay()]]);if(h=t.setPosition<1?a.length+t.setPosition:t.setPosition-1,(0,s.le)(t.setPosition)){h=0;for(var E=[],S=0;S<a.length;S++)for(var O=0;O<a[S].length;O++)E.push(a[S][O]);a=[E]}if(a.length>0&&Tt(a,p,l,i,e,t,h),u&&e.length+t.recExceptionCount>=u)return;d=Mt(n,t,d,v),n=se(n,t.day),a=[]}}}(l,i,e,t);else{var c,n=new Date(l.getTime()),a=_e(l,t),o=[],h=0;for(n=I.getMonthStartDate(n),t.month.length&&I.setMonth(n,t.month[0],1),n=se(n,t.day);Re(n,i)&&a&&e.length+t.recExceptionCount<a;){c=new Date(n.getTime());for(var p=new Date(n.getTime());I.isSameMonth(n,p);)o.push([p.getTime()]),p.setDate(p.getDate()+7);ms(o,l,i,e,t),h=Mt(n,t,h,c),n=se(n,t.day),o=[]}}}function Ln(l,i,e,t,r,n){var a=n.setPosition<1?l.length+n.setPosition:n.setPosition-1;(0,s.le)(n.setPosition)&&(a=0,l=Hn(l)),l.length>0&&Tt(l,i,e,t,r,n,a)}function Hn(l){for(var i=[],e=0;e<l.length;e++)for(var t=0;t<l[e].length;t++)i.push(new Date(l[e][t]).getTime());return i.length>0?[i]:[]}function ms(l,i,e,t,r){var a,o=[],h=function(l,i){var e,t={monthCollection:[],index:0};if(1===i.length){var r=i[0].match(Dr),n=void 0;r.length>1?e=(n=parseInt(r[0],10))<1?l.length+n:n-1:(e=0,l=Hn(l))}else e=0,l=Hn(l);return t.monthCollection=l,t.index=e,t}(l,r.day);l=h.monthCollection;var p=h.index;null!=r.setPosition?qn([Pn(l,p,o)],a,i,e,t,r):l.length>0&&Tt(l,a,i,e,t,r,p),o=[]}function Pn(l,i,e){for(var t=0;t<l[i].length;t++)e.push(l[i][t]);return e}function ki(l,i,e,t,r,n){var a=_e(i,r),o=new Date(n);l=Tr(o,r),o>=i&&Re(o,e)&&l&&a&&t.length+r.recExceptionCount<a&&In(t,n)}function Xl(l,i,e,t,r){var n=i||0,a=new Date(l,r.month[0]-1,1),c=new Date(l,r.month[0],0).getDate(),h=(a.getDay()-n+7)%7,u=Math.ceil((h+c)/7)-1;return Tr(new Date(e[t][u]),r)?u:u-1}function qn(l,i,e,t,r,n){if(l.length>0)for(var a=0;a<l.length;a++){l[a].sort();var c=n.day.map(function(d){return zn.test(d)}),h="YEARLY"===n.freq&&n.validRules.indexOf("BYMONTH")>-1&&!(c.indexOf(!0)>-1)?Xl(new Date(l[0][0]).getFullYear(),0,l,a,n):l[a].length+n.setPosition;ki(i,e,t,r,n,l[a][n.setPosition<1?h:n.setPosition-1])}}function Tt(l,i,e,t,r,n,a){if(l.length>0){l[a=(0,s.le)(a)?n.setPosition<1?l.length+n.setPosition:n.setPosition-1:a].sort();for(var o=0;o<l[a].length;o++)ki(i,e,t,r,n,l[a][o])}}function Re(l,i){return!i||l<=i}function ys(l){return l.replace(fc,"")}function se(l,i){var t,e=new Date(l.getTime());if(i.length>0){for(var r=[],n=0;n<=i.length-1;n++)t=ys(i[n]),r.push(t);if(-1===r.indexOf(ne[e.getDay()]))do{e.setDate(e.getDate()+1)}while(-1===r.indexOf(ne[e.getDay()]))}return e}function Fn(l){var i={freq:null,interval:1,count:null,until:null,day:[],wkst:null,month:[],weekNo:[],monthDay:[],yearDay:[],setPosition:null,validRules:[]},e=l.split(";"),t=[];if(e.forEach(function(a){switch((t=a.split("="))[0]){case"UNTIL":i.until=yr(t[1]);break;case"BYDAY":i.day=t[1].split(","),i.validRules.push(t[0]);break;case"BYMONTHDAY":i.monthDay=t[1].split(",").map(Number),i.validRules.push(t[0]);break;case"BYMONTH":i.month=t[1].split(",").map(Number),i.validRules.push(t[0]);break;case"BYYEARDAY":i.yearDay=t[1].split(",").map(Number),i.validRules.push(t[0]);break;case"BYWEEKNO":i.weekNo=t[1].split(",").map(Number),i.validRules.push(t[0]);break;case"INTERVAL":i.interval=parseInt(t[1],10);break;case"COUNT":i.count=parseInt(t[1],10);break;case"BYSETPOS":i.setPosition=parseInt(t[1],10)>4?-1:parseInt(t[1],10);break;case"FREQ":i.freq=t[1];break;case"WKST":i.wkst=t[1]}}),"MONTHLY"===i.freq&&0===i.monthDay.length){var n=i.validRules.indexOf("BYDAY");i.validRules.splice(n,1)}return i}function $l(l,i,e){return i<=I.getMonthDaysCount(l)&&l>=e}function ec(l){var i={};return l.forEach(function(e,t){if(t===l.length-1){for(var r=wt.indexOf(e),n=r;n%7!==wt.indexOf(l[0]);)n++;i[e]=n-r}else i[e]=wt.indexOf(l[t+1])-wt.indexOf(e)}),i}function ac(l){var i=l.shift();l.push(i)}function Tr(l,i){var e=!0,t=i.day,r=i.month,n=I.getExpectedDays(l,i.monthDay),a=i.yearDay;return i.validRules.forEach(function(o){switch(o){case"BYDAY":(function(l,i){var e=[];return i.forEach(function(t){var r=t.match(Dr);e.push(2===r.length?r[1]:r[0])}),-1===e.indexOf(ne[l])})(l.getDay(),t)&&(e=!1);break;case"BYMONTH":I.checkMonth(l,r)&&(e=!1);break;case"BYMONTHDAY":(function(l,i){var t,e=i.slice(0),r=I.getMonthDaysCount(l);for(t=e.shift();t;){if(t<0&&(t=t+r+1),t===l.getDate())return!1;t=e.shift()}return!0})(l,n)&&(e=!1);break;case"BYYEARDAY":(function(l,i){var t,e=i.slice(0),r=function(l){Bn[I.getFullYear(l)]||(Bn[I.getFullYear(l)]=I.getYearLastDate(l,0));var i=Bn[I.getFullYear(l)],e=l.getTime()-i.getTime();return Math.ceil(e/Z)}(l);for(t=e.shift();t;){if(t<0&&(t=t+I.getYearDaysCount(l,0)+1),t===r)return!1;t=e.shift()}return!0})(l,a)&&(e=!1)}}),e}function Nn(l){return"Islamic"===l?new ls:new os}var wr,Ts,Rt,I,Bn={},wt=["SU","MO","TU","WE","TH","FR","SA"],ne=["SU","MO","TU","WE","TH","FR","SA"],oc=43,ws=["first","second","third","fourth","last"],Wn="summaryOn",Ds={SU:"sun",MO:"mon",TU:"tue",WE:"wed",TH:"thu",FR:"fri",SA:"sat"},zn=/\d/,fc=/[^A-Z]+/,Dr=/[a-z]+|[^a-z]+/gi;function nt(l){return[l.getUTCFullYear(),Ii(l.getUTCMonth()+1),Ii(l.getUTCDate()),"T",Ii(l.getUTCHours()),Ii(l.getUTCMinutes()),Ii(l.getUTCSeconds()),"Z"].join("")}function Ii(l){return("0"+l).slice(-2)}var l,jn=function(){function l(i){this.slots=[],this.isDoubleTapped=!1,this.parent=i}return l.prototype.processData=function(i,e,t){var r=this,n=this.parent.activeView.startDate(),a=this.parent.activeView.endDate(),o=this.parent.eventFields,c=[],h=1,p=!1,u=this.parent.resourceBase?this.parent.resourceBase.resourceCollection:[];i.length>0&&(0,s.le)(i[0][o.id])&&(p=!0);for(var d=function(S){p&&(S[o.id]=h++),S=v.updateEventDateTime(S),e?v.processTimezoneChange(S,t):!v.parent.isPrinting&&!v.parent.uiStateValues.isPreventTimezone&&(S=v.processTimezone(S));for(var O=0;O<u.length;O++)(null===S[u[O].field]||0===S[u[O].field])&&(S[u[O].field]=void 0);if(!(0,s.le)(S[o.recurrenceRule])&&""===S[o.recurrenceRule]&&(S[o.recurrenceRule]=null),(0,s.le)(S[o.recurrenceRule])||!(0,s.le)(S[o.recurrenceID])||v.parent.crudModule&&v.parent.crudModule.crudObj.isCrudAction)if(v.parent.crudModule&&v.parent.crudModule.crudObj.isCrudAction)if(!(0,s.le)(S[o.recurrenceRule])&&(0,s.le)(S[o.recurrenceID]))for(var M=function(q){var B=v.parent.eventsProcessed.filter(function(K){return K[o.startTime].getTime()-q[o.startTime].getTime()==0&&K[o.id]===q[o.id]});q.Guid=B.length>0?B[0].Guid:v.generateGuid(),c.push(q)},L=0,N=v.generateOccurrence(S,null,t,!0);L<N.length;L++)M(N[L]);else{var z=v.parent.eventsProcessed.filter(function(q){return q[r.parent.eventFields.id]===S[r.parent.eventFields.id]});S.Guid=z.length>0?z[0].Guid:v.generateGuid(),c.push(S)}else S.Guid=v.generateGuid(),c.push(S);else c=c.concat(v.generateOccurrence(S,null,t,!0))},v=this,f=0,g=i;f<g.length;f++)d(g[f]);this.parent.eventsProcessed=[];var y=c.filter(function(S){return!S[r.parent.eventFields.isBlock]});this.parent.eventsProcessed=this.filterEvents(n,a,y);for(var w=c.filter(function(S){return S[r.parent.eventFields.isBlock]}),D=0,b=w;D<b.length;D++){var A=b[D];A[o.isAllDay]&&(C(new Date(A[o.startTime].getTime()))<C(new Date(A[o.endTime].getTime()))||(A[o.startTime]=C(A[o.startTime]),A[o.endTime]=V(C(A[o.endTime]),1)))}return this.parent.blockProcessed=w,y},l.prototype.updateEventDateTime=function(i){return"string"==typeof i[this.parent.eventFields.startTime]&&(i[this.parent.eventFields.startTime]=ma(i[this.parent.eventFields.startTime])),"string"==typeof i[this.parent.eventFields.endTime]&&(i[this.parent.eventFields.endTime]=ma(i[this.parent.eventFields.endTime])),i},l.prototype.getProcessedEvents=function(i){void 0===i&&(i=this.parent.eventsData);for(var e=[],t=0,r=i;t<r.length;t++){var n=r[t];!(0,s.le)(n[this.parent.eventFields.recurrenceRule])&&(0,s.le)(n[this.parent.eventFields.recurrenceID])?e=e.concat(this.generateOccurrence(n)):e.push(n)}return e},l.prototype.timezonePropertyChange=function(i){var e=this.parent.eventsData.concat(this.parent.blockData),t=this.processData(e,!0,i);this.parent.notify(Ae,{processedData:t})},l.prototype.timezoneConvert=function(i){var e=this.parent.eventFields;if(i[e.startTimezone]=i[e.startTimezone]||i[e.endTimezone],i[e.endTimezone]=i[e.endTimezone]||i[e.startTimezone],this.parent.timezone){var r=i[e.endTimezone];i[e.startTime]=this.parent.tzModule.convert(i[e.startTime],this.parent.timezone,i[e.startTimezone]),i[e.endTime]=this.parent.tzModule.convert(i[e.endTime],this.parent.timezone,r)}},l.prototype.processTimezoneChange=function(i,e){var t=this.parent.eventFields;i[t.isAllDay]||(e&&this.parent.timezone?(i[t.startTime]=this.parent.tzModule.convert(i[t.startTime],e,this.parent.timezone),i[t.endTime]=this.parent.tzModule.convert(i[t.endTime],e,this.parent.timezone)):!e&&this.parent.timezone?(i[t.startTime]=this.parent.tzModule.add(i[t.startTime],this.parent.timezone),i[t.endTime]=this.parent.tzModule.add(i[t.endTime],this.parent.timezone)):e&&!this.parent.timezone&&(i[t.startTime]=this.parent.tzModule.remove(i[t.startTime],e),i[t.endTime]=this.parent.tzModule.remove(i[t.endTime],e)))},l.prototype.processTimezone=function(i,e){void 0===e&&(e=!1);var t=this.parent.eventFields;if(i[t.startTimezone]||i[t.endTimezone]){var r=i[t.startTimezone]||i[t.endTimezone],n=i[t.endTimezone]||i[t.startTimezone];e?this.parent.timezone?(i[t.startTime]=this.parent.tzModule.convert(i[t.startTime],r,this.parent.timezone),i[t.endTime]=this.parent.tzModule.convert(i[t.endTime],n,this.parent.timezone),i[t.startTime]=this.parent.tzModule.remove(i[t.startTime],this.parent.timezone),i[t.endTime]=this.parent.tzModule.remove(i[t.endTime],this.parent.timezone)):(i[t.startTime]=this.parent.tzModule.remove(i[t.startTime],r),i[t.endTime]=this.parent.tzModule.remove(i[t.endTime],n)):(i[t.startTime]=this.parent.tzModule.add(i[t.startTime],r),i[t.endTime]=this.parent.tzModule.add(i[t.endTime],n),this.parent.timezone&&(i[t.startTime]=this.parent.tzModule.convert(i[t.startTime],r,this.parent.timezone),i[t.endTime]=this.parent.tzModule.convert(i[t.endTime],n,this.parent.timezone)))}else this.parent.timezone&&(e?(i[t.startTime]=this.parent.tzModule.remove(i[t.startTime],this.parent.timezone),i[t.endTime]=this.parent.tzModule.remove(i[t.endTime],this.parent.timezone)):(i[t.startTime]=this.parent.tzModule.add(i[t.startTime],this.parent.timezone),i[t.endTime]=this.parent.tzModule.add(i[t.endTime],this.parent.timezone)));return i},l.prototype.filterBlockEvents=function(i){var n,e=this.parent.eventFields,t=i[e.startTime],r=i[e.endTime];if(this.parent.activeViewOptions.group.resources.length>0){var a=this.getGroupIndexFromEvent(i);n=this.parent.resourceBase.lastResourceLevel[a]}for(var o=(0,s.l7)([],this.parent.blockProcessed,null,!0),c=0,h=o;c<h.length;c++){var p=h[c];p[e.isAllDay]&&p[e.endTime].getTime()>C(new Date(p[e.endTime].getTime())).getTime()&&(p[e.startTime]=C(p[e.startTime]),p[e.endTime]=V(C(p[e.endTime]),1))}return this.filterEvents(t,r,o,n)},l.prototype.filterEvents=function(i,e,t,r){void 0===t&&(t=this.parent.eventsProcessed);var n=this.parent.eventFields,a=new J.$G(n.startTime,"greaterthanorequal",i).and(new J.$G(n.endTime,"greaterthanorequal",i)).and(new J.$G(n.startTime,"lessthan",e)).or(new J.$G(n.startTime,"lessthanorequal",i).and(new J.$G(n.endTime,"greaterthan",i))),o=new J.hm({json:t}).executeLocal((new J.AE).where(a));return r&&(o=this.filterEventsByResource(r,o)),this.sortByTime(o)},l.prototype.filterEventsByRange=function(i,e,t){var n,r=this;return n=e&&t?this.filterEvents(e,t,i):e&&!t?i.filter(function(a){return a[r.parent.eventFields.startTime]>=e}):!e&&t?i.filter(function(a){return a[r.parent.eventFields.endTime]<=t}):i,this.sortByTime(n)},l.prototype.filterEventsByResource=function(i,e){void 0===e&&(e=this.parent.eventsProcessed);for(var t={},r=this.parent.resourceBase.resourceCollection,n=0;n<r.length;n++)t[r[n].field]=i.groupOrder[n];var a=Object.keys(t);return e.filter(function(c){return a.every(function(h){return c[h]instanceof Array?c[h].indexOf(t[h])>-1:c[h]===t[h]})})},l.prototype.sortByTime=function(i){if(this.parent.eventSettings.sortComparer)i=this.parent.eventSettings.sortComparer.call(this.parent,i);else{var e=this.parent.eventFields;i.sort(function(t,r){var a=r[e.startTime];return t[e.startTime].getTime()-a.getTime()})}return i},l.prototype.sortByDateTime=function(i){if(this.parent.eventSettings.sortComparer)i=this.parent.eventSettings.sortComparer.call(this.parent,i);else{var e=this.parent.eventFields;i.sort(function(t,r){var n=t[e.startTime],a=r[e.startTime],c=r[e.endTime],h=t[e.endTime].getTime()-n.getTime(),p=c.getTime()-a.getTime();return n.getTime()-a.getTime()||p-h})}return i},l.prototype.getSmallestMissingNumber=function(i){for(var e=Math.max.apply(Math,i),t=0;t<e;t++)if(-1===i.indexOf(t))return t;return e+1},l.prototype.splitEventByDay=function(i){var e=this.parent.eventFields,t=[],r=i[e.startTime],n=i[e.endTime];if(C(new Date(r.getTime()))<C(new Date(n.getTime())))for(var o=new Date(r.getTime()),c=V(C(new Date(r.getTime())),1),h=0===n.getHours()&&0===n.getMinutes()?n:V(n,1),p=1,u=Ur(r.getTime(),h.getTime());c<=n&&o.getTime()!==c.getTime();){var d=(0,s.l7)({},i);d[e.startTime]=o,d[e.endTime]=c,d.data={index:p,count:u},d.Guid=this.generateGuid(),d.isSpanned=!0,t.push(d),o=c,C(new Date(o.getTime())).getTime()===C(new Date(n.getTime())).getTime()&&c.getTime()!==n.getTime()?(c=new Date(o.getTime()),c=new Date(c.setHours(n.getHours(),n.getMinutes(),n.getSeconds()))):c=V(C(new Date(o.getTime())),1),p++}else t.push(i);return t},l.prototype.splitEvent=function(i,e){var t=this.parent.eventFields,r=C(i[t.startTime]).getTime(),n=C(i[t.endTime]).getTime();Je(i[t.endTime])<=0&&(n=r>(a=V(C(i[t.endTime]),-1).getTime())?r:a);var o=r,c=n,h=[];if(r!==n){r<e[0].getTime()&&(r=e[0].getTime()),n>e[e.length-1].getTime()&&(n=e[e.length-1].getTime());for(var p=r,u=0;u<this.slots.length;u++){var d=this.slots[u];if("WorkWeek"===this.parent.currentView||"TimelineWorkWeek"===this.parent.currentView||this.parent.activeViewOptions.group.byDate||this.parent.activeViewOptions.showWeekend){for(var v=[],f=0,g=d;f<g.length;f++)v.push(new Date(g[f]));var y=this.getRenderedDates(v);if(!(0,s.le)(y)&&y.length>0){d=[];for(var w=0,D=y;w<D.length;w++)d.push(D[w].getTime())}}if("number"==typeof d){var a=d;(d=[]).push(a)}var A=d[0];if((p=p<=A&&n>=A?A:p)>n||A>n)break;if(!this.parent.activeViewOptions.group.byDate&&this.parent.activeViewOptions.showWeekend&&"WorkWeek"!==this.parent.currentView&&"TimelineWorkWeek"!==this.parent.currentView){var E=d.indexOf(p);if(-1!==E){var S=d.indexOf(n),O=-1!==S;if(h.push(this.cloneEventObject(i,d[E],d[S=O?S:d.length-1],S-E+1,d[E]!==o,d[S]!==c)),O)break}}else if(this.dateInRange(p,d[0],d[d.length-1])){for(var N=[],H=0;H<d.length;H++)this.dateInRange(d[H],o,c)&&N.push(d[H]);if(N.length>0)if(this.parent.activeViewOptions.group.byDate)for(var z=0,q=N;z<q.length;z++){var B=q[z];h.push(this.cloneEventObject(i,B,B,1,B!==o,B!==c))}else h.push(this.cloneEventObject(i,N[0],N[N.length-1],N.length,N[0]!==o,N[N.length-1]!==c))}}}else h.push(this.cloneEventObject(i,r,n,1,!1,!1));return h},l.prototype.cloneEventObject=function(i,e,t,r,n,a){var o=this.parent.eventFields,c=(0,s.l7)({},i,null,!0),h={count:r,isLeft:n,isRight:a};return h[o.startTime]=i[o.startTime],h[o.endTime]=i[o.endTime],c.data=h,c[o.startTime]=new Date(e),c[o.endTime]=new Date(t),c},l.prototype.dateInRange=function(i,e,t){return e<=i&&i<=t},l.prototype.getSelectedEventElements=function(i){if(this.removeSelectedAppointmentClass(),this.parent.selectedElements.length<=0)this.parent.selectedElements.push(i);else if(this.parent.selectedElements.filter(function(h){return h.getAttribute("data-guid")===i.getAttribute("data-guid")}).length<=0)for(var t='div[data-guid="'+i.getAttribute("data-guid")+'"]',n=0,a=[].slice.call(this.parent.element.querySelectorAll(t));n<a.length;n++)this.parent.selectedElements.push(a[n]);else{var c=this.parent.selectedElements.filter(function(h){return h.getAttribute("data-guid")!==i.getAttribute("data-guid")});this.parent.selectedElements=c}return i&&this.parent.selectedElements.length>0&&this.addSelectedAppointments(this.parent.selectedElements),this.parent.selectedElements},l.prototype.getSelectedEvents=function(){var i=this,e=[],t=[];return[].slice.call(this.parent.element.querySelectorAll("."+Gt)).filter(function(n){0===e.filter(function(o){return o.Guid===n.getAttribute("data-guid")}).length&&e.push(i.getEventByGuid(n.getAttribute("data-guid"))),t.push(n)}),{event:e.length>1?e:e[0],element:t.length>1?t:t[0]}},l.prototype.removeSelectedAppointmentClass=function(){for(var i=this.getSelectedAppointments(),e=0,t=i;e<t.length;e++)t[e].setAttribute("aria-pressed","false");(0,s.IV)(i,Gt),("Agenda"===this.parent.currentView||"MonthAgenda"===this.parent.currentView)&&(0,s.IV)(i,nr)},l.prototype.addSelectedAppointments=function(i){for(var e=0,t=i;e<t.length;e++)t[e].setAttribute("aria-pressed","true");"MonthAgenda"!==this.parent.currentView&&this.parent.removeSelectedClass(),(0,s.cn)(i,Gt),i.length>0&&i[i.length-1].focus()},l.prototype.getSelectedAppointments=function(){return[].slice.call(this.parent.element.querySelectorAll("."+Gt+",."+P+":focus"))},l.prototype.focusElement=function(i){if(!this.parent.eventWindow.dialogObject||!this.parent.eventWindow.dialogObject.visible){var e=document.activeElement,t=this.parent.getSelectedElements();if(t.length>0&&(e&&(this.parent.element.contains(e)||-1!==t.indexOf(e))||i)){if(this.parent.keyboardInteractionModule){var r=!(0,s.le)(this.parent.activeCellsData)&&this.parent.activeCellsData.element||t[t.length-1];this.parent.keyboardInteractionModule.selectCells(r instanceof Array,r)}return}var n=this.getSelectedAppointments();if(n.length>0)return void n[n.length-1].focus()}},l.prototype.selectWorkCellByTime=function(i){var e;if("Agenda"===this.parent.currentView||"MonthAgenda"===this.parent.currentView)return e;if(i.length>0){var t=i[i.length-1],r=t[this.parent.eventFields.startTime],n=new Date(+r).setMinutes(0,0,0),a=this.isAllDayAppointment(t);("Month"===this.parent.currentView||a)&&(n=new Date(+r).setHours(0,0,0,0));var o=void 0;o=a&&-1!==["Day","Week","WorkWeek"].indexOf(this.parent.currentView)?this.parent.getAllDayRow():this.parent.getContentTable();var c='[data-date="'+new Date(n).getTime()+'"]';if(this.parent.activeViewOptions.group.resources.length>0&&(c+='[data-group-index="'+this.getGroupIndexFromEvent(t)+'"]'),e=o.querySelector(c))return this.parent.activeCellsData=this.parent.getCellDetails(e),this.parent.keyboardInteractionModule&&this.parent.keyboardInteractionModule.selectCells(!1,e),e}return e},l.prototype.getGroupIndexFromEvent=function(i){for(var e,t,r,n,a=this.parent.resourceBase.resourceCollection.length-1;a>=0;a--)if(!(0,s.le)(i[this.parent.resourceBase.resourceCollection[a].field])){e=a,r=(t=this.parent.resourceBase.resourceCollection[a]).name,n=t.field;break}(0,s.le)(r)&&(0,s.le)(e)&&(r=this.parent.resourceCollection.slice(-1)[0].name,e=this.parent.resourceCollection.length-1,n=this.parent.resourceCollection.slice(-1)[0].field,t=this.parent.resourceCollection.filter(function(p,u){return p.name===r?(e=u,p):null})[0]);var c=i[n]instanceof Array?i[n][0]:i[n];return e>0?this.parent.resourceBase.getIndexFromResourceId(c,r,t,i,this.parent.resourceCollection[e-1].field):this.parent.resourceBase.getIndexFromResourceId(c,r,t)},l.prototype.isAllDayAppointment=function(i){var e=this.parent.eventFields,t=i[e.isAllDay],r=(ee(i[e.endTime])-ee(i[e.startTime]))/Z>=1;return!!(t||"TimeSlot"!==this.parent.eventSettings.spannedEventPlacement&&r)},l.prototype.addEventListener=function(){this.parent.on(Xe,this.appointmentBorderRemove,this)},l.prototype.removeEventListener=function(){this.parent.off(Xe,this.appointmentBorderRemove)},l.prototype.appointmentBorderRemove=function(i){var e=i.event.target;(0,s.oq)(e,"."+P)?"MonthAgenda"!==this.parent.currentView&&this.parent.removeSelectedClass():(0,s.oq)(e,"."+re)||(this.removeSelectedAppointmentClass(),this.parent.selectedElements=[])},l.prototype.wireAppointmentEvents=function(i,e,t){void 0===t&&(t=!1);var r=!(0,s.le)(e)&&e[this.parent.eventFields.isReadonly];s.bi.add(i,"click",this.eventClick,this),!this.parent.isAdaptive&&!this.parent.activeViewOptions.readonly&&!r&&(s.bi.add(i,"touchstart",this.eventTouchClick,this),s.bi.add(i,"dblclick",this.eventDoubleClick,this)),!this.parent.activeViewOptions.readonly&&!r&&!t&&(this.parent.resizeModule&&this.parent.resizeModule.wireResizeEvent(i),this.parent.dragAndDropModule&&this.parent.dragAndDropModule.wireDragEvent(i))},l.prototype.eventTouchClick=function(i){var e=this;setTimeout(function(){return e.isDoubleTapped=!1},250),i.preventDefault(),this.isDoubleTapped?this.eventDoubleClick(i):this.isDoubleTapped||(this.isDoubleTapped=!0,this.eventClick(i))},l.prototype.renderResizeHandler=function(i,e,t){if(this.parent.resizeModule&&this.parent.allowResizing&&!this.parent.activeViewOptions.readonly&&!t)for(var r=0,n=Object.keys(e);r<n.length;r++){var a=n[r],o=(0,s.az)("div",{className:Kt});switch(a){case"isLeft":e.isLeft||(o.appendChild((0,s.az)("div",{className:"e-left-right-resize"})),(0,s.cn)([o],this.parent.enableRtl?lr:or),(0,s.Ce)([o],i));break;case"isRight":e.isRight||(o.appendChild((0,s.az)("div",{className:"e-left-right-resize"})),(0,s.cn)([o],this.parent.enableRtl?or:lr),(0,s.R3)([o],i));break;case"isTop":e.isTop||(o.appendChild((0,s.az)("div",{className:"e-top-bottom-resize"})),(0,s.cn)([o],"e-top-handler"),(0,s.Ce)([o],i));break;case"isBottom":e.isBottom||(o.appendChild((0,s.az)("div",{className:"e-top-bottom-resize"})),(0,s.cn)([o],"e-bottom-handler"),(0,s.R3)([o],i))}}},l.prototype.eventClick=function(i){var e=this,t=i.target;if(!(t.classList.contains("e-drag-clone")||t.classList.contains("e-resize-clone")||t.classList.contains(we)))if((i.ctrlKey||i.metaKey)&&1===i.which&&this.parent.keyboardInteractionModule){this.parent.quickPopup.quickPopup.hide(),this.parent.selectedElements=[].slice.call(this.parent.element.querySelectorAll("."+Gt));var r=(0,s.oq)(i.target,"."+P);this.getSelectedEventElements(r),this.activeEventData(i,!1),this.parent.trigger(Ui,{data:this.parent.activeEventData.event,element:this.parent.activeEventData.element,event:i,requestType:"eventSelect"});var a=(0,s.l7)(this.parent.activeEventData,{cancel:!1,originalEvent:i});this.parent.trigger(Lt,a)}else this.removeSelectedAppointmentClass(),this.activeEventData(i,!0),this.parent.trigger(Ui,{data:this.parent.activeEventData.event,element:this.parent.activeEventData.element,event:i,requestType:"eventSelect"}),a=(0,s.l7)(this.parent.activeEventData,{cancel:!1,originalEvent:i}),this.parent.trigger(Lt,a,function(h){h.cancel?(e.removeSelectedAppointmentClass(),e.parent.selectedElements=[],e.parent.quickPopup&&e.parent.quickPopup.quickPopupHide()):(("Agenda"===e.parent.currentView||"MonthAgenda"===e.parent.currentView)&&(0,s.cn)([e.parent.activeEventData.element],nr),e.parent.allowInline?e.parent.notify(Pt,{data:h.event,element:h.element,type:"Event"}):e.parent.notify(Lt,h))})},l.prototype.eventDoubleClick=function(i){this.parent.quickPopup&&this.parent.quickPopup.quickPopupHide(!0),"touchstart"===i.type&&this.activeEventData(i,!0),this.removeSelectedAppointmentClass(),this.parent.selectedElements=[],!this.parent.activeEventData.element.classList.contains(gr)&&!this.parent.activeEventData.element.querySelector("."+we)&&(!(0,s.le)(this.parent.activeEventData.event)&&(0,s.le)(this.parent.activeEventData.event[this.parent.eventFields.recurrenceID])?this.parent.eventWindow.openEditor(this.parent.activeEventData.event,"Save"):(this.parent.currentAction="EditOccurrence",this.parent.quickPopup.openRecurrenceAlert()))},l.prototype.getEventByGuid=function(i){return this.parent.eventsProcessed.filter(function(e){return e.Guid===i})[0]},l.prototype.getEventById=function(i){var e=this;return this.parent.eventsData.filter(function(t){return t[e.parent.eventFields.id]===i})[0]},l.prototype.generateGuid=function(){return"xyxxxxyx-xxxy-yxxx-xyxx-xxyxxxxyyxxx".replace(/[xy]/g,function(i){var e=16*Math.random()|0;return("x"===i?e:3&e|8).toString(16)})},l.prototype.getEventIDType=function(){return 0!==this.parent.eventsData.length?typeof this.parent.eventsData[0][this.parent.eventFields.id]:0!==this.parent.blockData.length?typeof this.parent.blockData[0][this.parent.eventFields.id]:"string"},l.prototype.getEventMaxID=function(i){var e=this;if(this.parent.eventsData.length<1&&this.parent.blockData.length<1)return 1;var t,r=this.getEventIDType();if("string"===r&&(t=this.generateGuid()),"number"===r){var o=this.parent.eventsData.concat(this.parent.blockData).map(function(c){return c[e.parent.eventFields.id]}).reduce(function(c,h){return Math.max(c,h)});t=(o=(0,s.le)(i)?o:o+i)+1}return t},l.prototype.activeEventData=function(i,e){var t=this,r=(0,s.oq)(i.target,"."+P),n=r.getAttribute("data-guid");e&&(this.addSelectedAppointments([].slice.call(this.parent.element.querySelectorAll('div[data-guid="'+n+'"]'))),r.focus());var a=this.getEventByGuid(n);a&&a.isSpanned&&(a=this.parent.eventsData.filter(function(o){return o[t.parent.eventFields.id]===a[t.parent.eventFields.id]})[0]),this.parent.activeEventData={event:a,element:r}},l.prototype.generateOccurrence=function(i,e,t,r){var n=i[this.parent.eventFields.startTime],a=i[this.parent.eventFields.endTime],o=i[this.parent.eventFields.recurrenceRule],c=a.getTimezoneOffset()-n.getTimezoneOffset(),h=a.getTime()-n.getTime()-6e4*c;e=new Date((e||this.parent.activeView.startDate()).getTime()-h);var u,p=i[this.parent.eventFields.recurrenceException];"Agenda"!==this.parent.currentView&&r&&(u=function(l,i){return Math.ceil((i.getTime()-l.getTime())/Z)}(e,this.parent.activeView.endDate())+1);var d=this.parent.timezone||this.parent.tzModule.getLocalTimezoneName(),g=kn(n,o,p,this.parent.activeViewOptions.firstDayOfWeek,u,e,this.parent.calendarMode,t,d);"Agenda"===this.parent.currentView&&-1===o.indexOf("COUNT")&&-1===o.indexOf("UNTIL")&&((0,s.le)(i.generatedDates)?i.generatedDates={start:new Date(g[0]),end:new Date(g[g.length-1])}:(g[0]<i.generatedDates.start.getTime()&&(i.generatedDates.start=new Date(g[0])),g[g.length-1]>i.generatedDates.end.getTime()&&(i.generatedDates.end=new Date(g[g.length-1]))));for(var m=[],y=0,w=g;y<w.length;y++){var D=w[y],b=(0,s.l7)({},i,null,!0);D=this.getDSTAdjustedTime(D,b),b[this.parent.eventFields.startTime]=new Date(D),b[this.parent.eventFields.endTime]=new Date(new Date(D).setMilliseconds(h)),b[this.parent.eventFields.recurrenceID]=b[this.parent.eventFields.id],delete b[this.parent.eventFields.recurrenceException],delete b[this.parent.eventFields.followingID],b.Guid=this.generateGuid(),m.push(b)}return m},l.prototype.getDSTAdjustedTime=function(i,e){var t=i;if(this.parent.timezone&&(e[this.parent.eventFields.startTimezone]||e[this.parent.eventFields.endTimezone])){var r=this.getDSTDiff(e[this.parent.eventFields.startTime],new Date(i),e[this.parent.eventFields.startTimezone]),n=this.getDSTDiff(e[this.parent.eventFields.startTime],new Date(i),this.parent.timezone);t=new Date(i).getTime()-6e4*(r-n)}return t},l.prototype.getDSTDiff=function(i,e,t){return this.parent.tzModule.offset(new Date(i),t)-this.parent.tzModule.offset(new Date(e),t)},l.prototype.getParentEvent=function(i,e){var t;void 0===e&&(e=!1);do{(i=this.getFollowingEvent(i))&&(t=(0,s.l7)({},i,null,!0))}while(i&&e);if(e&&t){var r=this.getEventCollections(t),n=r.follow.slice(-1)[0];r.occurrence.length>0&&!t[this.parent.eventFields.recurrenceException]&&(n=r.occurrence.slice(-1)[0]),n&&(t[this.parent.eventFields.recurrenceRule]=n[this.parent.eventFields.recurrenceRule])}return t},l.prototype.getEventCollections=function(i,e){var t=[],r=[],n=i;do{(n=this.getFollowingEvent(n,!0))&&t.push(n),r=r.concat(this.getOccurrenceEvent(n||i))}while(n);var a={};if(e){var o=this.parent.eventFields;a={follow:t.filter(function(c){return c[o.startTime]>=e[o.startTime]}),occurrence:r.filter(function(c){return c[o.startTime]>=e[o.startTime]})}}else a={follow:t,occurrence:r};return a},l.prototype.getFollowingEvent=function(i,e){var r,t=this.parent.eventFields;return r=e?i[t.id]:i[t.recurrenceID]||i[t.followingID],this.parent.eventsData.filter(function(a){return a[e?t.followingID:t.id]===r}).shift()},l.prototype.isFollowingEvent=function(i,e){var t=i[this.parent.eventFields.startTime],r=e[this.parent.eventFields.startTime];return t.getHours()===r.getHours()&&t.getMinutes()===r.getMinutes()&&t.getSeconds()===r.getSeconds()},l.prototype.getOccurrenceEvent=function(i,e,t){void 0===e&&(e=!1),void 0===t&&(t=!1);var r=e?"Guid":t?this.parent.eventFields.followingID:this.parent.eventFields.recurrenceID,n=e?"Guid":this.parent.eventFields.id;return(e?this.parent.eventsProcessed:this.parent.eventsData).filter(function(o){return o[r]===i[n]})},l.prototype.getOccurrencesByID=function(i){for(var e=this.parent.eventFields,t=[],n=0,a=this.parent.eventsData.filter(function(c){return c[e.id]===i});n<a.length;n++){var o=a[n];(0,s.le)(o[e.recurrenceRule])||(t=t.concat(this.generateOccurrence(o)))}return t},l.prototype.getOccurrencesByRange=function(i,e){for(var t=this.parent.eventFields,r=[],n=0,a=this.parent.eventsData;n<a.length;n++){var o=a[n];(0,s.le)(o[t.recurrenceRule])||(r=r.concat(this.generateOccurrence(o)))}return r.filter(function(h){return h[t.startTime]>=i&&h[t.endTime]<=e&&!(0,s.le)(h[t.recurrenceID])})},l.prototype.getDeletedOccurrences=function(i){var t,e=this.parent.eventFields,r=[];if((t="string"==typeof i||"number"==typeof i?this.parent.eventsData.filter(function(p){return p[e.id]===i})[0]:(0,s.l7)({},i,null,!0))[e.recurrenceException])for(var n=t[e.recurrenceException].split(","),a=function(p,u){if(0===o.parent.eventsData.filter(function(w){return w[e.recurrenceID]===t[e.id]&&w[e.recurrenceException]===n[p]}).length){var v=yr(n[p]),f=(0,s.l7)({},i,null,!0);f[e.recurrenceID]=t[e.id],delete f[e.followingID],f[e.recurrenceException]=n[p];var g=new Date(v.getTime()),m=t[e.endTime].getTime()-t[e.startTime].getTime(),y=new Date(g.getTime());y.setMilliseconds(m),f[e.startTime]=new Date(g.getTime()),f[e.endTime]=new Date(y.getTime()),r.push(f)}},o=this,c=0,h=n.length;c<h;c++)a(c);return r},l.prototype.applyResourceColor=function(i,e,t,r,n){if(this.parent.resourceBase){var o=this.parent.resourceBase.getResourceColor(e,r);o&&(i.style[t]=(0,s.le)(n)?o:(h=n,c=(c=o).replace("#",""),"rgba("+parseInt(c.substring(0,c.length/3),16)+", "+parseInt(c.substring(c.length/3,2*c.length/3),16)+", "+parseInt(c.substring(2*c.length/3,3*c.length/3),16)+", "+h+")"))}var c,h},l.prototype.createBlockAppointmentElement=function(i,e,t){var a,r=i[this.parent.eventFields.subject]||this.parent.eventSettings.fields.subject.default,n=(0,s.az)("div",{className:_t,attrs:{"data-id":"Appointment_"+i[this.parent.eventFields.id],"aria-disabled":"true","aria-pressed":"false"}});if((0,s.le)(this.parent.activeViewOptions.eventTemplate))a=[(0,s.az)("div",{className:te,innerHTML:r})];else{var h=this.parent.element.id+"_"+this.parent.activeViewOptions.eventTemplateName+"eventTemplate",p="eventTemplate"+(t&&-1===this.parent.currentView.indexOf("Year")?"_"+e:"");a=this.parent.getAppointmentTemplate()(i,this.parent,p,h,!1)}return(0,s.R3)(a,n),this.setWrapperAttributes(n,e),n},l.prototype.setWrapperAttributes=function(i,e){(0,s.le)(this.cssClass)||(0,s.cn)([i],this.cssClass),this.parent.activeViewOptions.group.resources.length>0&&i.setAttribute("data-group-index",e.toString())},l.prototype.getReadonlyAttribute=function(i){return(i[this.parent.eventFields.isReadonly]||this.parent.readonly).toString()},l.prototype.isBlockRange=function(i){for(var t=!1,r=this.parent.eventFields,n=0,a=i instanceof Array?i:[i];n<a.length;n++){var o=a[n],c=[];(0,s.le)(o[r.recurrenceRule])||!(0,s.le)(o[r.recurrenceID])&&o[r.id]!==o[r.recurrenceID]?c.push(o):c=this.generateOccurrence(o);for(var h=0,p=c;h<p.length;h++)if(this.filterBlockEvents(p[h]).length>0){t=!0;break}}return this.parent.uiStateValues.isBlock=t,t},l.prototype.getFilterEventsList=function(i,e){return new J.hm(i).executeLocal((new J.AE).where(e))},l.prototype.getSeriesEvents=function(i,e){var t=this.parent.eventFields;e=(0,s.le)(e)?i[t.startTime]:e;var r,n,h,a=[],o=i[t.id],c=i[t.followingID],p="EditSeries"===this.parent.currentAction?"greaterthan":"greaterthanorequal";do{h=new J.$G(t.followingID,"equal",o).and(new J.$G(t.startTime,p,e)),r=(n=this.getFilterEventsList(this.parent.eventsData,h)).slice(-1)[0],(0,s.le)(r)||r[t.id]===c?c=null:(a.push(r),o=r[t.id],c=r[t.followingID])}while(1===n.length&&!(0,s.le)(r[t.followingID]));return a},l.prototype.getEditedOccurrences=function(i,e){for(var n,t=this.parent.eventFields,r=[],a=0,o=i;a<o.length;a++){var c=o[a],h=new J.$G(t.recurrenceID,"equal",c[t.id]).or(new J.$G(t.recurrenceID,"equal",c[t.followingID]).and(new J.$G(t.recurrenceID,"notequal",void 0)).and(new J.$G(t.recurrenceID,"notequal",null)));("EditFollowingEvents"===this.parent.currentAction||"DeleteFollowingEvents"===this.parent.currentAction)&&(h=h.and(new J.$G(t.startTime,"greaterthanorequal",e))),n=this.getFilterEventsList(this.parent.eventsData,h),r=r.concat(n)}return r},l.prototype.getRenderedDates=function(i){var r,e=0,t=i.length;if(i[0]<this.parent.minDate&&i[i.length-1]>this.parent.maxDate){for(var n=0;n<i.length;n++)C(i[n]).getTime()===C(new Date(this.parent.minDate)).getTime()&&(e=n),C(i[n]).getTime()===C(new Date(this.parent.maxDate)).getTime()&&(t=n);r=i.filter(function(a){return a>=i[e]&&a<=i[t]})}return r},l.prototype.isValidEvent=function(i,e,t,r){var n=t.getTime()>r.startHour.getTime()&&e.getTime()<r.endHour.getTime(),a=r.startHour.getTime()<=e.getTime()&&i[this.parent.eventFields.startTime].getTime()>=r.startHour.getTime()&&i[this.parent.eventFields.endTime].getTime()<r.endHour.getTime()&&e.getTime()===t.getTime();return n||a},l.prototype.allDayExpandScroll=function(i){var e=0;[].slice.call(this.parent.element.querySelectorAll("."+gn)).forEach(function(r){[].slice.call(r.children).forEach(function(a){a.style.top=e+"px"}),e+=r.offsetHeight}),e=i.offsetHeight-e,this.parent.element.querySelector("."+U).style.height=e/12+"em",this.parent.uiStateValues.expand?(0,s.cn)([i],xi):(0,s.IV)([i],xi)},l.prototype.updateEventMinimumDuration=function(i,e,t){if(e.getTime()<t.getTime()&&(ee(t)-ee(e))/oe<this.parent.eventSettings.minimumEventDuration){var n=new Date(e);if(n.setMinutes(n.getMinutes()+this.parent.eventSettings.minimumEventDuration),(t=n).getTime()>i.endHour.getTime()){var a=new Date(i.endHour.getTime());a.setMinutes(a.getMinutes()-this.parent.eventSettings.minimumEventDuration),e=a,t=i.endHour}}return{startDate:e,endDate:t}},l.prototype.createEventWrapper=function(i,e){void 0===i&&(i=""),void 0===e&&(e=0);for(var t=(0,s.az)("tr"),r=this.parent.activeView.colLevels.slice(-1)[0],n=0,a=r.length;n<a;n++){var o=r[n],c=(0,s.az)("td",{className:"allDay"===i?Ue:"timeIndicator"===i?Aa:"e-day-wrapper",attrs:{"data-date":o.date.getTime().toString()}});if((0,s.le)(o.groupIndex)||c.setAttribute("data-group-index",o.groupIndex.toString()),""===i){var h=(0,s.az)("div",{id:G+"-"+e.toString(),className:G});c.appendChild(h)}t.appendChild(c),e+=1}return t},l.prototype.unWireEvents=function(){for(var e=0,t=[].slice.call(this.parent.element.querySelectorAll("."+P));e<t.length;e++)s.bi.clearEvents(t[e])},l.prototype.destroy=function(){this.unWireEvents(),this.parent=null},l}(),gc=(l=function(i,e){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])})(i,e)},function(i,e){function t(){this.constructor=i}l(i,e),i.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}),Un=function(l){function i(e){var t=l.call(this,e)||this;return t.dateRender=[],t.renderedEvents=[],t.renderedAllDayEvents=[],t.overlapEvents=[],t.moreEvents=[],t.overlapList=[],t.allDayEvents=[],t.slotCount=t.parent.activeViewOptions.timeScale.slotCount,t.interval=t.parent.activeViewOptions.timeScale.interval,t.allDayLevel=0,t.startHour=t.parent.activeView.getStartHour(),t.endHour=t.parent.activeView.getEndHour(),t.element=t.parent.activeView.getPanel(),t.fields=t.parent.eventFields,t.animation=new s.fw({progress:t.animationUiUpdate.bind(t)}),t.addEventListener(),t}return gc(i,l),i.prototype.renderAppointments=function(){if(!(0,s.le)(this.parent)){this.parent.dragAndDropModule&&this.parent.dragAndDropModule.setDragArea(),this.isResourceEventTemplate=this.parent.isSpecificResourceEvents();for(var e=[].slice.call(this.parent.element.querySelectorAll("."+_t+",."+P+",."+Ti)),t=!(!this.parent.crudModule||!this.parent.crudModule.crudObj.isCrudAction),r=0,n=e;r<n.length;r++){var a=n[r];if(!t||a.classList.contains(le)||a.classList.contains(Ti))(0,s.Od)(a);else for(var o=parseInt(a.getAttribute("data-group-index"),10),c=0,h=this.parent.crudModule.crudObj.sourceEvent.length;c<h;c++)(o===this.parent.crudModule.crudObj.sourceEvent[c].groupIndex||o===this.parent.crudModule.crudObj.targetEvent[c].groupIndex)&&(0,s.Od)(a)}if(this.element.querySelector("."+R)&&(this.parent.virtualScrollModule&&this.parent.virtualScrollModule.updateFocusedWorkCell(),this.allDayElement=[].slice.call(this.element.querySelectorAll("."+U)),this.setAllDayRowHeight(0),0!==this.parent.eventsProcessed.length||0!==this.parent.blockProcessed.length)){var p=this.element.querySelector("."+wi);s.bi.remove(p,"click",this.rowExpandCollapse),s.bi.add(p,"click",this.rowExpandCollapse,this),this.renderedEvents=[],this.renderedAllDayEvents=[],this.initializeValues(),this.processBlockEvents(),this.renderEvents("normalEvents"),this.allDayEvents.length>0&&(this.allDayEvents=this.allDayEvents.filter(function(u,d,v){return d===v.map(function(f){return f.Guid}).indexOf(u.Guid)}),(0,s.IV)(this.allDayElement,Vn),this.slots.push(this.parent.activeView.renderDates.map(function(u){return+u})),this.renderEvents("allDayEvents")),this.parent.notify(ge,{}),(0,s.cn)(this.allDayElement,Vn),t&&(this.parent.crudModule.crudObj.isCrudAction=!1),this.parent.renderTemplates()}}},i.prototype.initializeValues=function(){if(this.resources=this.parent.activeViewOptions.group.resources.length>0?this.parent.uiStateValues.isGroupAdaptive?[this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex]]:this.parent.resourceBase.lastResourceLevel:[],this.resources.length>0&&this.parent.activeViewOptions.allowVirtualScrolling&&this.parent.virtualScrollModule&&(this.resources=this.parent.resourceBase.renderedResources),this.cellHeight=parseFloat(this.parent.element.querySelector(".e-content-wrap tbody tr").getBoundingClientRect().height.toFixed(2)),this.dateRender[0]=this.parent.activeView.renderDates,this.parent.activeViewOptions.group.resources.length>0)for(var e=0,t=this.resources.length;e<t;e++)this.dateRender[e]=this.resources[e].renderDates},i.prototype.getHeight=function(e,t){var r=(ee(t)-ee(e))/oe*(this.cellHeight*this.slotCount)/this.interval;return r<=0?this.cellHeight:r},i.prototype.appendEvent=function(e,t,r,n){var a=this.element.querySelector("."+G+'[id="'+G+"-"+r+'"]');(0,s.V7)(t,this.parent.enableRtl?{right:n}:{left:n});var o=t.classList.contains(_t)?"blockEvent":"event",c={data:(0,s.l7)({},e,null,!0),element:t,cancel:!1,type:o};this.parent.trigger(Ht,c,function(h){h.cancel||a.appendChild(t)})},i.prototype.processBlockEvents=function(){for(var e=this.getResourceList(),t=this.getStartCount(),r=0,n=e;r<n.length;r++)for(var a=n[r],o=this.dateRender[a],c=0,h=o.length;c<h;c++){for(var p=new Date(o[c].getTime()),u=V(o[c],1),v=0,f=this.filterEvents(p,u,this.parent.blockProcessed,this.resources[a]);v<f.length;v++){var g=f[v];this.parent.resourceBase&&this.setValues(g,a),this.renderBlockEvents(g,c,a,t),this.cssClass=null,this.groupOrder=null}t+=1}},i.prototype.renderBlockEvents=function(e,t,r,n){var a=this.isSpannedEvent(e,t,r),o=a[this.fields.startTime],c=a[this.fields.endTime],p=Se(C(new Date(this.dateRender[r][t].getTime())),this.startHour,this.endHour);if(o<=c&&this.isValidEvent(e,o,c,p)){var u=void 0,d=void 0;if(a[this.fields.isAllDay]){var v=this.parent.element.querySelector("."+F+" table");d=(0,s.Ac)(v.offsetHeight),u=(0,s.Ac)(0)}else d=(0,s.Ac)(this.getHeight(o,c)),u=(0,s.Ac)(this.getTopValue(o,t,r));var f=this.createBlockAppointmentElement(e,r,this.isResourceEventTemplate);(0,s.V7)(f,{width:"100%",height:d,top:u});var g=this.getDayIndex(t,r);this.appendEvent(e,f,this.parent.activeViewOptions.group.byDate?this.resources.length*g+r:n,"0px")}},i.prototype.renderEvents=function(e){(0,s.IV)(this.allDayElement,Vn);for(var a,t="allDayEvents"===e?this.sortByDateTime(this.allDayEvents):void 0,r=this.getResourceList(),n=this.getStartCount(),o=function(d){a=!0,c.parent.crudModule&&c.parent.crudModule.crudObj.isCrudAction&&"allDayEvents"!==e&&!c.parent.uiStateValues.isGroupAdaptive&&0===c.parent.crudModule.crudObj.sourceEvent.filter(function(M){return M.groupIndex===d}).length&&0===c.parent.crudModule.crudObj.targetEvent.filter(function(M){return M.groupIndex===d}).length&&(a=!1),c.slots=[];var v=c.dateRender[d],f=c.getRenderedDates(v)||v;c.slots.push(v.map(function(M){return+M}));for(var g=0,m=v.length;g<m&&v[g]<=f[f.length-1];g++){c.renderedEvents=[];var y=new Date(v[g].getTime()),w=V(v[g],1),D=c.filterEvents(y,w,t,c.resources[d]);if(a)for(var b=0,A=D;b<A.length;b++){var E=A[b];if(c.parent.resourceBase&&c.setValues(E,d),"allDayEvents"===e)c.renderAllDayEvents(E,g,d,n);else if(c.isAllDayAppointment(E))c.allDayEvents.push((0,s.l7)({},E,null,!0));else{if(c.parent.eventSettings.enableMaxHeight&&c.getOverlapIndex(E,g,!1,d)>0)continue;c.renderNormalEvents(E,g,d,n)}c.cssClass=null,c.groupOrder=null}else for(var S=0,O=D;S<O.length;S++){var k=O[S];c.isAllDayAppointment(k)&&c.allDayEvents.push((0,s.l7)({},k,null,!0))}n+=1}},c=this,h=0,p=r;h<p.length;h++)o(p[h])},i.prototype.getStartCount=function(){return this.parent.virtualScrollModule&&this.parent.activeViewOptions.allowVirtualScrolling&&this.parent.timeScale.enable?parseInt(this.element.querySelector("."+G).getAttribute("id").split("-").slice(-1)[0],10):0},i.prototype.getDayIndex=function(e,t){return this.parent.activeViewOptions.group.byDate?this.parent.resourceBase.lastResourceLevel[0].renderDates.indexOf(this.dateRender[t][e]):e},i.prototype.setValues=function(e,t){this.parent.activeViewOptions.group.resources.length>0?(this.cssClass=this.resources[t].cssClass,this.groupOrder=this.resources[t].groupOrder):this.cssClass=this.parent.resourceBase.getCssClass(e)},i.prototype.getResourceList=function(){return Array.apply(null,{length:this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive?this.resources.length:1}).map(function(t,r){return r})},i.prototype.createAppointmentElement=function(e,t,r,n){var a=this.parent.eventFields,o=e[a.subject]||this.parent.eventSettings.fields.subject.default||this.parent.localeObj.getConstant("addTitle"),c=(0,s.az)("div",{className:P,attrs:{"data-id":"Appointment_"+e[a.id],"data-guid":e.Guid,role:"button",tabindex:"0","aria-disabled":this.parent.eventBase.getReadonlyAttribute(e),"aria-pressed":"false","aria-label":this.parent.getAnnouncementString(e)}});e[this.fields.isReadonly]&&(0,s.cn)([c],"e-read-only");var h=(0,s.az)("div",{className:tr});c.appendChild(h),this.parent.activeViewOptions.group.resources.length>0&&c.setAttribute("data-group-index",(this.parent.uiStateValues.isGroupAdaptive?this.parent.uiStateValues.groupIndex:n).toString());var u,d=r;if((0,s.le)(this.parent.activeViewOptions.eventTemplate)){var w=(0,s.az)("div",{className:te,innerHTML:o});if(t)if(e[a.isAllDay])u=[w];else{u=[];var D=(0,s.az)("div",{className:Pe+(this.parent.isAdaptive?" "+j:""),innerHTML:this.parent.getTimeString(e[a.startTime])}),b=(0,s.az)("div",{className:Pe+(this.parent.isAdaptive?" "+j:""),innerHTML:this.parent.getTimeString(e[a.endTime])});(0,s.cn)([w],"e-text-center"),d.isLeft||u.push(D),u.push(w),d.isRight||u.push(b)}else{var A=this.parent.getTimeString(e[a.startTime])+" - "+this.parent.getTimeString(e[a.endTime]);u=[w,(0,s.az)("div",{className:Pe+(this.parent.isAdaptive?" "+j:""),innerHTML:A}),(0,s.az)("div",{className:gt,innerHTML:e[a.location]||this.parent.eventSettings.fields.location.default||""})]}}else{var g=this.parent.element.id+"_"+this.parent.activeViewOptions.eventTemplateName+"eventTemplate",y="eventTemplate"+(this.isResourceEventTemplate?"_"+(this.parent.uiStateValues.isGroupAdaptive?this.parent.uiStateValues.groupIndex:n):"");u=this.parent.getAppointmentTemplate()(e,this.parent,y,g,!1)}if((0,s.R3)(u,h),!(this.parent.isAdaptive||(0,s.le)(e[a.recurrenceRule])&&(0,s.le)(e[a.recurrenceID]))){var k=(0,s.az)("div",{className:$+" "+(e[a.id]===e[a.recurrenceID]?mi:yi)});t?h.appendChild(k):c.appendChild(k)}return this.renderSpannedIcon(t?h:c,d),(0,s.le)(this.cssClass)||(0,s.cn)([c],this.cssClass),this.applyResourceColor(c,e,"backgroundColor",this.groupOrder),this.renderResizeHandler(c,d,e[this.fields.isReadonly]),c},i.prototype.createMoreIndicator=function(e,t,r){var n=r+t,a=e[n];if(a.childElementCount<=0){var o=(0,s.az)("div",{className:Ti,id:Ti+"-"+n.toString()}),c=(0,s.az)("div",{className:Te,attrs:{tabindex:"0","data-index":n.toString(),"data-count":"1"},innerHTML:"+1&nbsp;"+(this.parent.isAdaptive?"":this.parent.localeObj.getConstant("more"))});o.appendChild(c),a.appendChild(o),s.bi.add(c,"click",this.rowExpandCollapse,this)}else{var h=a.querySelector("."+Te),p=parseInt(h.getAttribute("data-count"),10)+1;h.setAttribute("data-count",p.toString()),h.innerHTML="+"+this.parent.globalize.formatNumber(p)+"&nbsp;"+(this.parent.isAdaptive?"":this.parent.localeObj.getConstant("more"))}},i.prototype.renderSpannedIcon=function(e,t){var r=(0,s.az)("div",{className:ar+" "+$});if(t.isLeft){var n=r.cloneNode();(0,s.cn)([n],xa),(0,s.Ce)([n],e)}if(t.isRight){var a=r.cloneNode();(0,s.cn)([a],ka),(0,s.R3)([a],e)}if(t.isTop){var o=r.cloneNode();(0,s.cn)([o],"e-up-icon"),(0,s.Ce)([o],e)}if(t.isBottom){var c=r.cloneNode();(0,s.cn)([c],"e-down-icon"),(0,s.R3)([c],e)}},i.prototype.isSpannedEvent=function(e,t,r){var n=C(this.dateRender[r][t]),a=this.getRenderedDates(this.dateRender[r])||[n];0===a.filter(function(d){return d.getDay()===t}).length&&(n=C(a[0]));var c=this.parent.eventFields,h=Se(n,this.startHour,this.endHour),p=(0,s.l7)({},e,null,!0);p.isSpanned={isBottom:!1,isTop:!1},e[c.startTime].getTime()<h.startHour.getTime()&&(p[c.startTime]=h.startHour,p.isSpanned.isTop=!0),e[c.endTime].getTime()>h.endHour.getTime()&&(p[c.endTime]=h.endHour,p.isSpanned.isBottom=!0);var u=this.updateEventMinimumDuration(h,p[c.startTime],p[c.endTime]);return p[c.startTime]=u.startDate,p[c.endTime]=u.endDate,p},i.prototype.renderAllDayEvents=function(e,t,r,n,a){var o=this,c=this.getRenderedDates(this.dateRender[r])||this.dateRender[r];this.parent.activeViewOptions.group.byDate&&(this.slots[0]=[this.dateRender[r][t].getTime()],c=[this.dateRender[r][t]]);var h=this.splitEvent(e,c)[0],p=this.element.querySelector("."+U+":first-child"),u=p.offsetTop,d=new Date(h[this.parent.eventFields.startTime].getTime()),v=new Date(h[this.parent.eventFields.endTime].getTime()),f=0,g=1,m=c[0].getTime()<=d.getTime()&&V(c.slice(-1)[0],1).getTime()>=d.getTime();if(d<=v&&m){var y=[];if(this.renderedAllDayEvents[r]&&(y=this.renderedAllDayEvents[r].filter(function(N){return N.Guid===e.Guid}),this.parent.activeViewOptions.group.byDate&&(y=y.filter(function(N){return N[o.parent.eventFields.startTime]>=c[t]&&N[o.parent.eventFields.endTime]<=V(new Date(+c[t]),1)}))),0===y.length){var w=h.data.count,D=this.getOverlapIndex(h,t,!0,r);h.Index=D,this.allDayLevel=this.allDayLevel<D?D:this.allDayLevel,w>=0&&(f=100*w-(h.data.isRight?0:"Day"===this.parent.currentView?4:7)),(0,s.le)(this.renderedAllDayEvents[r])&&(this.renderedAllDayEvents[r]=[]);var A=this.getDayIndex(t,r);this.renderedAllDayEvents[r].push((0,s.l7)({},h,null,!0));var k,E=[].slice.call(this.element.querySelector("."+We).children),S=this.parent.activeViewOptions.group.byDate?this.resources.length*A+r:n,O=this.element.querySelector("."+Ue+":nth-child("+(S+1)+")");k=a?this.parent.inlineModule.createInlineAppointmentElement(e):this.createAppointmentElement(e,!0,h.data,r),(0,s.cn)([k],le);var M=(0,s.l7)({},h.data,null,!0);e.data=M,this.parent.trigger(Ht,{data:e,element:k,cancel:!1},function(N){if(!N.cancel){O.appendChild(k);var H=k.offsetHeight;if((0,s.V7)(k,{width:f+"%",top:(0,s.Ac)(g+=(0===D?u:u+D*H)+1)}),D>1){o.moreEvents.push(k);for(var z=0,q=w;z<q;z++)o.createMoreIndicator(E,z,S)}p.setAttribute("data-count",o.allDayLevel.toString()),o.setAllDayRowHeight(4+(!o.parent.uiStateValues.expand&&o.allDayLevel>2?3*H:(o.allDayLevel+1)*H)),o.addOrRemoveClass(),o.wireAppointmentEvents(k,e)}})}}},i.prototype.renderNormalEvents=function(e,t,r,n,a){var o=this.isSpannedEvent(e,t,r),c=o[this.fields.startTime],h=o[this.fields.endTime],p="0%",d=0,f=Se(C(new Date(this.dateRender[r][t].getTime())),this.startHour,this.endHour),g=this.isValidEvent(e,c,h,f);if(!(c.getTime()<this.parent.minDate.getTime()||h.getTime()>this.parent.maxDate.getTime())&&c<=h&&g){var m=this.getHeight(c,h);c.getTime()>f.startHour.getTime()&&(d=this.getTopValue(c,t,r));var y=this.getOverlapIndex(o,t,!1,r);o.Index=y,this.overlapList.push(o),this.overlapList.length>1?((0,s.le)(this.overlapEvents[y])&&(this.overlapEvents[y]=[]),this.overlapEvents[y].push(o)):(this.overlapEvents=[],this.overlapEvents.push([o])),p=this.getEventWidth();var w=this.getDayIndex(t,r),b=this.adjustOverlapElements({index:y,left:"0%",width:p,day:w,dayIndex:n,record:o,resource:r});p=b.appWidth,(0,s.le)(this.renderedEvents[r])&&(this.renderedEvents[r]=[]),this.renderedEvents[r].push((0,s.l7)({},o,null,!0));var A=void 0;A=a?this.parent.inlineModule.createInlineAppointmentElement(e):this.createAppointmentElement(e,!1,o.isSpanned,r),(0,s.V7)(A,{width:this.parent.eventSettings.enableMaxHeight?"100%":b.appWidth,height:m+"px",top:d+"px"});var E=15*A.querySelectorAll("."+ar).length,S=m-40-E,O=A.querySelector("."+te);!this.parent.isAdaptive&&O&&(O.style.maxHeight=(0,s.Ac)(S));var k=this.parent.activeViewOptions.group.byDate?this.resources.length*w+r:n,M={};M[this.fields.startTime]=e[this.fields.startTime],M[this.fields.endTime]=e[this.fields.endTime],o.data=M,this.appendEvent(o,A,k,b.appLeft),this.wireAppointmentEvents(A,e),m<this.cellHeight&&[].slice.call(A.querySelectorAll("."+Kt)).forEach(function(N){N.style.height=Math.ceil(m/N.offsetHeight)+"px"})}},i.prototype.getEventWidth=function(){var t=(("Day"===this.parent.currentView?97:94)-this.overlapEvents.length)/this.overlapEvents.length;return(t<0?0:t)+"%"},i.prototype.getEventLeft=function(e,t){var r=(parseFloat(e)+1)*t;return(r>99?99:r)+"%"},i.prototype.getTopValue=function(e,t,r){var a=Se(C(this.dateRender[r][t]),this.startHour,this.endHour).startHour,o=60*(e.getHours()-a.getHours())+(e.getMinutes()-a.getMinutes());return this.parent.activeViewOptions.timeScale.enable?o*this.cellHeight*this.slotCount/this.interval:0},i.prototype.getOverlapIndex=function(e,t,r,n){var a=this,o=this.parent.eventFields,c=[],h=-1;if(this.overlapEvents=[],r){if(!(0,s.le)(this.renderedAllDayEvents[n])){var p=C(new Date(this.dateRender[n][t].getTime()));c=this.renderedAllDayEvents[n].filter(function(S){return C(S[o.startTime]).getTime()<=p.getTime()&&C(S[o.endTime]).getTime()>=p.getTime()}),this.parent.activeViewOptions.group.resources.length>0&&(c=this.filterEventsByResource(this.resources[n],c))}}else{var u=(0,s.le)(this.renderedEvents[n])?[]:this.renderedEvents[n],d=[],v=e[o.startTime],f=e[o.endTime];this.overlapList=u.filter(function(S){return S[o.endTime]>v&&S[o.startTime]<=f||S[o.startTime]>=f&&S[o.endTime]<=v||S[o.endTime].getTime()===S[o.startTime].getTime()&&S[o.startTime].getTime()===v.getTime()&&S[o.endTime]<f}),this.parent.activeViewOptions.group.resources.length>0&&(this.overlapList=this.filterEventsByResource(this.resources[n],this.overlapList)),this.overlapList.forEach(function(S){var O=u.filter(function(M){return M[o.endTime]>S[o.startTime]&&M[o.startTime]<=S[o.endTime]});a.parent.activeViewOptions.group.resources.length>0&&(O=a.filterEventsByResource(a.resources[n],O));var k=O.filter(function(M){return-1===a.overlapList.indexOf(M)});k.length>0&&(d=d.concat(k))});for(var g=0;g<d.length-1;g++)for(var m=g+1;m<d.length;m++)d[g][o.id]===d[m][o.id]&&(d.splice(m,1),m--);this.overlapList=this.overlapList.concat(d);for(var y=0,w=c=this.overlapList;y<w.length;y++){var D=w[y],A=D.Index;(0,s.le)(this.overlapEvents[A])?this.overlapEvents[A]=[D]:this.overlapEvents[A].push(D)}}if(r||(c=c.filter(function(S){return S[o.startTime]===e[o.startTime]&&S[o.endTime]>e[o.endTime]||S[o.endTime]>e[o.startTime]&&S[o.startTime]<e[o.endTime]||S[o.endTime]===e[o.startTime]&&S[o.startTime]===e[o.endTime]||S[o.startTime].getTime()===e[o.startTime].getTime()&&S[o.endTime].getTime()===e[o.endTime].getTime()||S[o.startTime].getTime()===e[o.startTime].getTime()&&S[o.endTime].getTime()<e[o.endTime].getTime()||S[o.endTime].getTime()>e[o.endTime].getTime()})),c.length>0){var E=c.map(function(S){return S.Index});h=E.length>0?this.getSmallestMissingNumber(E):0}return-1===h?0:h},i.prototype.adjustOverlapElements=function(e){for(var t={appWidth:e.width,appLeft:e.left},r=0,n=this.overlapEvents.length;r<n;r++)if(!(0,s.le)(this.overlapEvents[r]))for(var a=0,o=this.overlapEvents[r].length;a<o;a++){var h=this.element.querySelector("#e-appointment-wrapper-"+(this.parent.activeViewOptions.group.byDate?this.resources.length*e.day+e.resource:e.dayIndex));if(h&&h.childElementCount>0){var p=this.overlapEvents[r][a].Guid;if(h.querySelectorAll('div[data-guid="'+p+'"]').length>0&&p!==e.record.Guid){var u=h.querySelector('div[data-guid="'+p+'"]');parseFloat(e.width)<=parseFloat(u.style.width)&&(this.parent.enableRtl?u.style.right=this.getEventLeft(e.width,r):u.style.left=this.getEventLeft(e.width,r),u.style.width=parseFloat(e.width)+"%"),t.appWidth=u.style.width}else{var d=e.width;(0,s.le)(this.overlapEvents[r-1])&&(d=this.getEventWidth()),t.appWidth=d,t.appLeft=this.getEventLeft(d,e.index)}}}return t},i.prototype.setAllDayRowHeight=function(e){var t=this.parent.element.querySelector("."+ye);("auto"===this.parent.height||!this.parent.enableAllDayScroll)&&(0,s.cn)([t],mr);var r=this.parent.element.querySelector("."+We);if(r.style.height="",this.parent.uiStateValues.expand&&"auto"!==this.parent.height&&this.parent.enableAllDayScroll)r.style.height=e/12+"em",this.parent.eventBase.allDayExpandScroll(t);else{t.scrollTop=0;for(var n=0,a=this.allDayElement;n<a.length;n++)a[n].style.height=e/12+"em";(0,s.IV)([t],xi)}this.animation.animate(this.allDayElement[0])},i.prototype.addOrRemoveClass=function(){var e=this;this.moreEvents.filter(function(n){!e.parent.uiStateValues.expand&&e.allDayLevel>2?((0,s.cn)([n],La),n.setAttribute("tabindex","-1")):((0,s.IV)([n],La),n.setAttribute("tabindex","0"))});var t=this.element.querySelector("."+wi);this.parent.uiStateValues.expand?((0,s.IV)([t],cr),(0,s.cn)([t],Ha)):((0,s.IV)([t],Ha),(0,s.cn)([t],cr)),this.allDayLevel>2?(0,s.IV)([t],j):(0,s.cn)([t],j),[].slice.call(this.element.querySelectorAll("."+Ti)).forEach(function(n){!e.parent.uiStateValues.expand&&e.allDayLevel>2?(0,s.IV)([n],j):(0,s.cn)([n],j)})},i.prototype.getEventHeight=function(){var e=(0,s.az)("div",{className:P,styles:"visibility:hidden"});this.element.querySelector("."+Ue+":first-child").appendChild(e);var r=e.offsetHeight;return(0,s.Od)(e),r},i.prototype.rowExpandCollapse=function(){var t,e=this.element.querySelector("."+wi);this.parent.uiStateValues.expand=e.classList.contains(cr),this.parent.uiStateValues.expand?(e.setAttribute("title",this.parent.localeObj.getConstant("collapseAllDaySection")),e.setAttribute("aria-label","Collapse section"),t=(this.allDayLevel+1)*this.getEventHeight()+4):(e.setAttribute("title",this.parent.localeObj.getConstant("expandAllDaySection")),e.setAttribute("aria-label","Expand section"),t=3*this.getEventHeight()+4),this.setAllDayRowHeight(t),this.addOrRemoveClass(),this.animation.animate(e)},i.prototype.animationUiUpdate=function(){this.parent.notify(ge,{})},i.prototype.destroy=function(){!this.parent||this.parent&&this.parent.isDestroyed||(this.removeEventListener(),this.allDayElement=null,this.renderedAllDayEvents=null,this.renderedEvents=null,this.slotCount=null,this.interval=null,this.startHour=null,this.endHour=null,this.element=null,this.fields=null,this.animation=null,l.prototype.destroy.call(this))},i}(jn),mc=function(){var l=function(i,e){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])})(i,e)};return function(i,e){function t(){this.constructor=i}l(i,e),i.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}}(),$t=function(l){function i(e){var t=l.call(this,e)||this;return t.renderedEvents=[],t.monthHeaderHeight=0,t.moreIndicatorHeight=19,t.renderType="day",t.element=t.parent.activeView.getPanel(),t.fields=t.parent.eventFields,t.maxHeight=t.parent.eventSettings.enableMaxHeight&&!t.parent.eventSettings.enableIndicator&&!t.parent.rowAutoHeight,t.withIndicator=t.parent.eventSettings.enableMaxHeight&&t.parent.eventSettings.enableIndicator&&!t.parent.rowAutoHeight,t.maxOrIndicator=t.maxHeight||t.withIndicator,t.moreIndicatorHeight=t.parent.rowAutoHeight&&t.parent.eventSettings.ignoreWhitespace?0:t.moreIndicatorHeight,t.addEventListener(),t}return mc(i,l),i.prototype.removeEventWrapper=function(e){if(e.length>0)for(var t=0,r=e="Month"===this.parent.currentView?e:[e[0]];t<r.length;t++){var n=r[t];n.parentElement&&n.parentElement.parentNode&&(0,s.Od)(n.parentElement)}},i.prototype.renderAppointments=function(){this.parent.dragAndDropModule&&this.parent.dragAndDropModule.setDragArea(),this.isResourceEventTemplate=this.parent.isSpecificResourceEvents();var e=this.parent.element.querySelector("."+F);this.parent.rowAutoHeight&&(this.parent.uiStateValues.top=e.scrollTop,this.parent.uiStateValues.left=e.scrollLeft);var t=[].slice.call(this.element.querySelectorAll("."+G));if(this.parent.crudModule&&this.parent.crudModule.crudObj.isCrudAction)for(var r=0,n=this.parent.crudModule.crudObj.sourceEvent.length;r<n;r++){var a=[].slice.call(this.element.querySelectorAll('.e-appointment-wrapper [data-group-index="'+this.parent.crudModule.crudObj.sourceEvent[r].groupIndex+'"]'));if(this.removeEventWrapper(a),this.parent.crudModule.crudObj.targetEvent[r]&&this.parent.crudModule.crudObj.sourceEvent[r].groupIndex!==this.parent.crudModule.crudObj.targetEvent[r].groupIndex){var o=[].slice.call(this.element.querySelectorAll('.e-appointment-wrapper [data-group-index="'+this.parent.crudModule.crudObj.targetEvent[r].groupIndex+'"]'));this.removeEventWrapper(o)}}else for(var c=0,h=t;c<h.length;c++)(0,s.Od)(h[c]);if(this.removeHeightProperty(X),this.element.querySelector("."+R)){if("Month"===this.parent.currentView){var u=(0,s.az)("div",{className:G}),d=this.parent.element.querySelector("."+R);d.appendChild(u),this.monthHeaderHeight=u.offsetTop-d.offsetTop,d.removeChild(u)}this.eventHeight=qt(this.element,P);var v=e.scrollTop;if(this.parent.rowAutoHeight&&this.parent.virtualScrollModule&&!this.parent.virtualScrollModule.isHorizontalScroll&&!(0,s.le)(this.parent.currentAction)&&(e.scrollTop=e.scrollTop-1),this.parent.activeViewOptions.group.resources.length>0?(this.renderResourceEvents(),this.parent.virtualScrollModule&&this.parent.virtualScrollModule.updateFocusedWorkCell()):this.renderEventsHandler(this.parent.activeView.renderDates,this.parent.activeViewOptions.workDays),this.parent.rowAutoHeight){this.updateBlockElements();var f={cssProperties:this.parent.getCssProperties(),module:this.parent.getModuleName(),isPreventScrollUpdate:!0,scrollPosition:{left:this.parent.uiStateValues.left,top:this.parent.uiStateValues.top}};if(this.parent.virtualScrollModule&&!this.parent.virtualScrollModule.isHorizontalScroll&&(this.parent.currentAction?(e.scrollTop=v,this.parent.currentAction=null):this.parent.virtualScrollModule.updateVirtualScrollHeight()),this.parent.enablePersistence||this.parent.notify(ge,{}),this.parent.notify(be,f),"Month"===this.parent.currentView&&this.parent.showWeekNumber){var g=[].slice.call(this.parent.element.querySelectorAll(".e-content-wrap table tr td:first-child"));[].slice.call(this.parent.element.querySelectorAll("."+Ji)).forEach(function(y,w){(0,s.V7)(y,{height:g[w].offsetHeight+"px"})}),this.parent.element.querySelector("."+on).scrollTop=this.parent.element.querySelector("."+F).scrollTop}}this.parent.renderTemplates()}},i.prototype.renderEventsHandler=function(e,t,r){this.renderedEvents=[];var n,a,o=0;if(r?(o=r.groupIndex,this.cssClass=r.cssClass,this.groupOrder=r.groupOrder,n=this.parent.eventBase.filterEventsByResource(r,this.parent.eventsProcessed),a=this.parent.eventBase.filterEventsByResource(r,this.parent.blockProcessed),this.workCells=[].slice.call(this.element.querySelectorAll("."+R+'[data-group-index="'+o+'"]'))):(n=this.parent.eventsProcessed,a=this.parent.blockProcessed,this.workCells=[].slice.call(this.element.querySelectorAll("."+R))),this.sortByDateTime(n),this.sortByDateTime(a),"Month"===this.parent.currentView&&this.parent.rowAutoHeight&&0===this.parent.activeViewOptions.group.resources.length){var c=[].slice.call(this.parent.element.querySelectorAll(".e-content-wrap table tr td:first-child")),h=this.parent.element.querySelector("."+X).clientHeight/c.length;c.forEach(function(O){(0,s.V7)(O,{height:h+"px"})})}var p=this.workCells[this.parent.activeView.isTimelineView()?0:this.workCells.length-1].getBoundingClientRect();this.cellWidth=p.width,this.cellHeight=p.height,this.dateRender=e;var u=this.getRenderedDates(e);this.getSlotDates(t||this.parent.activeViewOptions.workDays),this.processBlockEvents(a,o,r);for(var d=[],v=0,f=n;v<f.length;v++){var g=f[v];this.parent.resourceBase&&!r&&(this.cssClass=this.parent.resourceBase.getCssClass(g)),d=d.concat(this.splitEvent(g,u||this.dateRender))}for(var m=0;m<this.slots.length;m++){this.renderedEvents=[];for(var y=this.slots[m],w=V(new Date(y[y.length-1]),1),b=0,A=this.filterEvents(new Date(y[0]),w,d);b<A.length;b++){var E=A[b];if(this.maxHeight){var S="Month"===this.parent.currentView?E[this.fields.startTime]:this.getStartTime(E,E.data);if(this.getIndex(S)>0)continue}this.updateIndicatorIcon(E),this.renderEvents(E,o,n)}}this.cssClass=null,this.groupOrder=null},i.prototype.processBlockEvents=function(e,t,r){for(var n=0,a=e;n<a.length;n++){var o=a[n];this.parent.resourceBase&&!r&&(this.cssClass=this.parent.resourceBase.getCssClass(o));var c=[];if("day"!==this.renderType||o[this.fields.isAllDay])c.push(o);else{var u,h=(0,s.l7)({},o,null,!0),p=this.isSameDate(h[this.fields.startTime],h[this.fields.endTime]);h.isBlockIcon=p,!p&&Je(h[this.fields.startTime])>0&&((u=(0,s.l7)({},o,null,!0))[this.fields.endTime]=V(C(new Date(o[this.fields.startTime]+"")),1),u.isBlockIcon=!0,h[this.fields.startTime]=u[this.fields.endTime],c.push(u)),!(p=this.isSameDate(h[this.fields.startTime],h[this.fields.endTime]))&&Je(h[this.fields.endTime])>0&&((u=(0,s.l7)({},o,null,!0))[this.fields.startTime]=C(new Date(o[this.fields.endTime]+"")),u.isBlockIcon=!0,c.push(u),h[this.fields.endTime]=u[this.fields.startTime]),c.push(h)}for(var d=0,v=c;d<v.length;d++)for(var f=v[d],m=0,y=this.splitEvent(f,this.dateRender);m<y.length;m++)this.renderBlockEvents(y[m],t,!!f.isBlockIcon)}},i.prototype.isSameDate=function(e,t){return new Date(+e).setHours(0,0,0,0)===new Date(+t).setHours(0,0,0,0)},i.prototype.renderBlockEvents=function(e,t,r){var n=e.data,a=this.getStartTime(e,n),o=this.getEndTime(e,n),c=this.parent.getIndexOfDate(this.dateRender,C(new Date(a.getTime())));if(!(c<0||a>o)){var h=this.getCellTd(c),p=this.getPosition(a,o,e[this.fields.isAllDay],c);if(r)this.renderBlockIndicator(h,p,t);else{var d=this.getEventWidth(a,o,e[this.fields.isAllDay],n.count);d=d<=0?this.cellWidth:d;var v=this.parent.enableRtl?0:p,f=this.parent.enableRtl?p:0,g=this.cellHeight-this.monthHeaderHeight,m=this.getRowTop(t),y=this.createBlockAppointmentElement(e,t,this.isResourceEventTemplate);(0,s.V7)(y,{width:d+"px",height:g+"px",left:v+"px",right:f+"px",top:m+"px"}),this.renderEventElement(e,y,h)}}},i.prototype.renderBlockIndicator=function(e,t,r){var n=(0,s.az)("div",{className:"e-icons "+er});(0,s.le)(e.querySelector("."+er))&&e.appendChild(n)},i.prototype.getStartTime=function(e,t){return e[this.fields.startTime]},i.prototype.getEndTime=function(e,t){return e[this.fields.endTime]},i.prototype.getCellTd=function(e){return this.workCells[e]},i.prototype.getEventWidth=function(e,t,r,n){return n*this.cellWidth-1},i.prototype.getPosition=function(e,t,r,n){return 0},i.prototype.getRowTop=function(e){return 0},i.prototype.updateIndicatorIcon=function(e){if(-1!==this.parent.currentView.indexOf("Timeline")&&"TimelineMonth"!==this.parent.currentView&&!e[this.fields.isAllDay]){var t=e.data,r=this.parent.activeView.getStartHour(),n=this.parent.activeView.getEndHour(),a=Se(e[this.fields.startTime],r,n),o=Se(e[this.fields.endTime],r,n),c=t[this.fields.startTime],h=t[this.fields.endTime];if(t.isLeft=t.isLeft||c.getTime()<a.startHour.getTime(),t.isRight=t.isRight||h.getTime()>o.endHour.getTime(),C(c).getTime()!==C(h).getTime()){var p=a.startHour,u=o.endHour,d=new Date(C(c));if(d.setHours(u.getHours(),u.getMinutes(),u.getSeconds()),t.isLeft=t.isLeft||c.getTime()>=(p.getDate()===a.endHour.getDate()?d.getTime():V(d,1).getTime()),h.getTime()!==C(h).getTime()){var v=new Date(C(h));t.isRight=t.isRight||h.getTime()<=v.setHours(p.getHours(),p.getMinutes(),p.getSeconds())}}}},i.prototype.renderResourceEvents=function(){var e=this.parent.uiStateValues.isGroupAdaptive?[this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex]]:this.parent.resourceBase.renderedResources;if(this.parent.crudModule&&this.parent.crudModule.crudObj.isCrudAction){for(var t=0,r=this.parent.crudModule.crudObj.sourceEvent.length;t<r;t++){var n=this.parent.crudModule.crudObj.sourceEvent[t];if(this.renderEventsHandler(n.renderDates,n.workDays,n),this.parent.crudModule.crudObj.sourceEvent[t].groupIndex!==this.parent.crudModule.crudObj.targetEvent[t].groupIndex){var a=this.parent.crudModule.crudObj.targetEvent[t];this.renderEventsHandler(a.renderDates,a.workDays,a)}}this.parent.crudModule.crudObj.isCrudAction=!1}else for(var o=0,c=e;o<c.length;o++){var h=c[o];this.renderEventsHandler(h.renderDates,h.workDays,h)}},i.prototype.getSlotDates=function(e){this.slots=[];for(var t=this.dateRender.map(function(n){return+n}),r=this.parent.activeViewOptions.showWeekend?7:e.length;t.length>0;)this.slots.push(t.splice(0,r))},i.prototype.createAppointmentElement=function(e,t,r){void 0===r&&(r=!1);var n=e[this.fields.subject]||this.parent.eventSettings.fields.subject.default||this.parent.localeObj.getConstant("addTitle"),a=(0,s.l7)({},e,e.data,!0),o={"data-id":"Appointment_"+e[this.fields.id],role:"button",tabindex:"0","aria-disabled":this.parent.eventBase.getReadonlyAttribute(e),"aria-pressed":"false","aria-label":this.parent.getAnnouncementString(a,n)};r||(o["data-guid"]=e.Guid),this.parent.activeViewOptions.group.resources.length>0&&(o["data-group-index"]=t.toString());var c=(0,s.az)("div",{className:P,attrs:o});(0,s.le)(this.cssClass)||(0,s.cn)([c],this.cssClass),e[this.fields.isReadonly]&&(0,s.cn)([c],"e-read-only");var h=(0,s.az)("div",{className:tr});c.appendChild(h);var p,u=e.data,d=this.getEventData(e);if((0,s.le)(this.parent.activeViewOptions.eventTemplate)){var y=e[this.fields.location]||this.parent.eventSettings.fields.location.default||"",w=(0,s.az)("div",{className:te,innerHTML:n+(y?";&nbsp"+y:"")}),D=(0,s.az)("div",{className:Pe+(this.parent.isAdaptive?" "+j:""),innerHTML:this.parent.getTimeString(u[this.fields.startTime])}),b=(0,s.az)("div",{className:Pe+(this.parent.isAdaptive?" "+j:""),innerHTML:this.parent.getTimeString(u[this.fields.endTime])});if("Month"===this.parent.currentView)e[this.fields.isAllDay]?(p=[w],(0,s.cn)([w],"e-text-center")):u.count<=1&&!u.isLeft&&!u.isRight?p=[D,w]:(p=[],(0,s.cn)([w],"e-text-center"),u.isLeft||p.push(D),p.push(w),u.isRight||p.push(b));else{var A=void 0;if(e[this.fields.isAllDay])A=[w,(0,s.az)("div",{className:Pe,innerHTML:this.parent.localeObj.getConstant("allDay")})];else{var S=this.parent.getTimeString(u[this.fields.startTime])+" - "+this.parent.getTimeString(u[this.fields.endTime]);A=[w,(0,s.az)("div",{className:Pe+(this.parent.isAdaptive?" "+j:""),innerHTML:S}),(0,s.az)("div",{className:gt,innerHTML:y})]}var M=(0,s.az)("div",{className:"e-inner-wrap"});(0,s.R3)(A,M),p=[M]}}else{var g=this.parent.element.id+"_"+this.parent.activeViewOptions.eventTemplateName+"eventTemplate",m="eventTemplate"+(this.isResourceEventTemplate?"_"+t:"");p=this.parent.getAppointmentTemplate()(d,this.parent,m,g,!1)}return(0,s.R3)(p,h),this.appendEventIcons(e,h),this.renderResizeHandler(c,e.data,e[this.fields.isReadonly]),c},i.prototype.appendEventIcons=function(e,t){var r=e.data;if((0,s.le)(e[this.fields.recurrenceRule])&&(0,s.le)(e[this.fields.recurrenceID])||t.appendChild((0,s.az)("div",{className:$+" "+(e[this.fields.id]===e[this.fields.recurrenceID]?mi:yi)+(this.parent.isAdaptive?" "+j:"")})),r.isLeft){var a=(0,s.az)("div",{className:ar+" "+$+" "+xa});(0,s.Ce)([a],t)}if(r.isRight){var o=(0,s.az)("div",{className:ar+" "+$+" "+ka});(0,s.R3)([o],t)}},i.prototype.renderEvents=function(e,t,r){var n=e[this.fields.startTime],a=e[this.fields.endTime],o=this.parent.getIndexOfDate(this.dateRender,C(n));if(!(o<0||n.getTime()<this.parent.minDate.getTime()||a.getTime()>this.parent.maxDate.getTime())){var c=this.getIndex(n);e.Index=c;var h=e.data.count;if(n.getTime()<=a.getTime()){var p=h*this.cellWidth-5,u=this.workCells[o],d=c*(this.eventHeight+0),v=this.monthHeaderHeight+(c+1)*(this.eventHeight+0)+this.moreIndicatorHeight;if(this.parent.rowAutoHeight||(this.maxOrIndicator?c<1:this.cellHeight>v)){this.renderedEvents.push((0,s.l7)({},e,null,!0));var g;g=this.inlineValue?this.parent.inlineModule.createInlineAppointmentElement():this.createAppointmentElement(e,t),this.applyResourceColor(g,e,"backgroundColor",this.groupOrder),this.wireAppointmentEvents(g,e),(0,s.V7)(g,{width:p+"px",top:d+"px"}),this.renderEventElement(e,g,u),this.parent.rowAutoHeight&&this.updateCellHeight(u.parentElement.firstElementChild,v)}else for(var y=0;y<h;y++)if(this.workCells[o+y]){var w=this.workCells[o+y].querySelector("."+Te);if(w){var D=parseInt(w.getAttribute("data-count"),10)+1;w.setAttribute("data-count",D.toString()),w.innerHTML=this.getMoreIndicatorText(D)}else{var b=new Date(this.dateRender[o+y].getTime()),A=V(this.dateRender[o+y],1),E=this.workCells[o+y].getAttribute("data-group-index"),S=this.getMoreIndicatorElement(1,b,A);(0,s.le)(E)||S.setAttribute("data-group-index",E),S.style.top=this.cellHeight-this.monthHeaderHeight-this.moreIndicatorHeight+"px",S.style.width=this.cellWidth-2+"px",this.renderElement(this.workCells[o+y],S),s.bi.add(S,"click",this.moreIndicatorClick,this)}}}}},i.prototype.updateCellHeight=function(e,t){t>e.offsetHeight&&(0,s.V7)(e,{height:t+"px"})},i.prototype.updateBlockElements=function(){for(var t=0,r=[].slice.call(this.element.querySelectorAll("."+_t));t<r.length;t++){var n=r[t],a=(0,s.oq)(n,"tr");this.monthHeaderHeight=n.offsetParent.offsetTop-a.offsetTop,n.style.height=a.offsetHeight-1-this.monthHeaderHeight+"px";var o=a.firstElementChild,c=Math.round(n.offsetWidth/o.offsetWidth);n.style.width=o.offsetWidth*c+"px"}},i.prototype.getFilteredEvents=function(e,t,r,n){var a;if((0,s.le)(r))a=this.filterEvents(e,t);else{var o=this.parent.resourceBase.lastResourceLevel[parseInt(r,10)];a=this.filterEvents(e,t,(0,s.le)(n)?void 0:n,o)}return a},i.prototype.getOverlapEvents=function(e,t){for(var r=[],n=C(e).getTime(),a=0,o=t;a<o.length;a++){var c=o[a];C(c[this.fields.startTime]).getTime()<=n&&C(c[this.fields.endTime]).getTime()>=n&&r.push(c)}return r},i.prototype.getIndex=function(e){var t=-1,r=this.renderedEvents;if(r.length>0){var a=this.getOverlapEvents(e,r).map(function(o){return o.Index});t=a.length>0?this.getSmallestMissingNumber(a):0}return-1===t?0:t},i.prototype.moreIndicatorClick=function(e){var t=this,r=(0,s.oq)(e.target,"."+Te),n=new Date(parseInt(r.getAttribute("data-start-date"),10)),a=new Date(parseInt(r.getAttribute("data-end-date"),10)),o=r.getAttribute("data-group-index"),c={cancel:!1,event:e,element:r,isPopupOpen:!0,startTime:n,endTime:a,viewName:this.parent.getNavigateView()};o&&(c.groupIndex=parseInt(o,10)),this.parent.trigger("moreEventsClick",c,function(h){if(!h.cancel)if(h.isPopupOpen){var p=t.getFilteredEvents(n,a,o);t.parent.quickPopup.moreEventClick({date:n,event:p,element:e.target},a,o)}else t.parent.setProperties({selectedDate:n},!0),t.parent.changeView(h.viewName,e)})},i.prototype.renderEventElement=function(e,t,r){var n=this,a=t.classList.contains(_t)?"blockEvent":"event",o=t.classList.contains(P),c=this.getEventData(e);this.parent.trigger(Ht,{data:c,element:t,cancel:!1,type:a},function(p){p.cancel?n.renderedEvents.pop():n.renderElement(r,t,o)})},i.prototype.getEventData=function(e){var t=(0,s.l7)({},e,null,!0);return t[this.fields.startTime]=e.data[this.fields.startTime],t[this.fields.endTime]=e.data[this.fields.endTime],t},i.prototype.renderElement=function(e,t,r){void 0===r&&(r=!1),this.maxOrIndicator&&r&&this.setMaxEventHeight(t,e);var n=e.querySelector("."+G);if(n)n.appendChild(t);else{var a=(0,s.az)("div",{className:G});a.appendChild(t),e.appendChild(a)}},i.prototype.getMoreIndicatorElement=function(e,t,r){return(0,s.az)("div",{className:Te,innerHTML:this.getMoreIndicatorText(e),attrs:{tabindex:"0","data-count":e.toString(),"data-start-date":t.getTime().toString(),"data-end-date":r.getTime().toString()}})},i.prototype.getMoreIndicatorText=function(e){return"+"+this.parent.globalize.formatNumber(e)+"&nbsp;"+(this.parent.isAdaptive?"":this.parent.localeObj.getConstant("more"))},i.prototype.removeHeightProperty=function(e){for(var r=0,n=[].slice.call(this.element.querySelectorAll("."+e+" tbody tr"));r<n.length;r++)n[r].firstElementChild.style.height=""},i.prototype.setMaxEventHeight=function(e,t){var r=_r(t.querySelector("."+Zt));(0,s.V7)(e,{height:t.offsetHeight-r-(this.maxHeight?0:this.moreIndicatorHeight)+"px","align-items":"center"})},i.prototype.destroy=function(){this.element=null,this.fields=null,this.maxHeight=null,this.withIndicator=null,this.maxOrIndicator=null,this.moreIndicatorHeight=null,this.removeEventListener(),l.prototype.destroy.call(this)},i}(jn),yc=function(){var l=function(i,e){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])})(i,e)};return function(i,e){function t(){this.constructor=i}l(i,e),i.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}}(),ti=function(l){function i(e,t){var r=l.call(this,e)||this;r.startHour=r.parent.activeView.getStartHour(),r.endHour=r.parent.activeView.getEndHour(),r.slotCount=r.parent.activeViewOptions.timeScale.slotCount,r.interval=r.parent.activeViewOptions.timeScale.interval,r.day=0,r.rowIndex=0,r.cellTops=[],r.renderType=t,r.eventContainers=[].slice.call(r.element.querySelectorAll("."+He));var n=[].slice.call(r.element.querySelectorAll("."+X+" tbody tr"));return r.dayLength=0===n.length?0:n[0].children.length,r.content=r.parent.element.querySelector("."+X),r}return yc(i,l),i.prototype.getSlotDates=function(){this.slots=[],this.slots.push(this.parent.activeView.renderDates.map(function(e){return+e})),this.parent.activeViewOptions.headerRows.length>0&&"Hour"!==this.parent.activeViewOptions.headerRows.slice(-1)[0].option?(this.renderType="day",this.cellWidth=this.content.offsetWidth/this.dateRender.length,this.slotsPerDay=1):this.slotsPerDay=this.dayLength/this.dateRender.length},i.prototype.getOverlapEvents=function(e,t){var r=[];if("day"===this.renderType)for(var n=0,a=t;n<a.length;n++)C((o=a[n])[this.fields.startTime]).getTime()<=C(new Date(e.getTime())).getTime()&&C(o[this.fields.endTime]).getTime()>=C(new Date(e.getTime())).getTime()&&r.push(o);else for(var c=0,h=t;c<h.length;c++){var o,p=(o=h[c]).data;p.trimStartTime.getTime()<=e.getTime()&&p.trimEndTime.getTime()>e.getTime()&&r.push(o)}return r},i.prototype.getSortComparerIndex=function(e,t){var r=-1,n=this.renderedEvents;if(n.length>0){var o=this.getOverlapSortComparerEvents(e,t,n).map(function(c){return c.Index});r=o.length>0?this.getSmallestMissingNumber(o):0}return-1===r?0:r},i.prototype.getOverlapSortComparerEvents=function(e,t,r){for(var n=[],a=0,o=r;a<o.length;a++){var c=o[a];if("day"===this.renderType)C(c[this.fields.startTime]).getTime()<=C(new Date(e.getTime())).getTime()&&C(c[this.fields.endTime]).getTime()>=C(new Date(e.getTime())).getTime()&&n.push(c);else{var h=c.data;(h.trimStartTime.getTime()<=e.getTime()&&e.getTime()<h.trimEndTime.getTime()||e.getTime()<=h.trimStartTime.getTime()&&h.trimStartTime.getTime()<t.getTime())&&n.push(c)}}return n},i.prototype.renderResourceEvents=function(){this.removeHeightProperty(Xi);var e=this.parent.uiStateValues.isGroupAdaptive?[this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex]]:this.parent.resourceBase.renderedResources;if(this.parent.crudModule&&this.parent.crudModule.crudObj.isCrudAction){for(var t=0,r=this.parent.crudModule.crudObj.sourceEvent.length;t<r;t++){var n=this.parent.crudModule.crudObj.sourceEvent[t];if(this.rowIndex=n.groupIndex,this.renderEventsHandler(this.parent.activeView.renderDates,this.parent.activeViewOptions.workDays,n),this.parent.crudModule.crudObj.targetEvent[t]&&this.parent.crudModule.crudObj.sourceEvent[t].groupIndex!==this.parent.crudModule.crudObj.targetEvent[t].groupIndex){var a=this.parent.crudModule.crudObj.targetEvent[t];this.rowIndex=a.groupIndex,this.renderEventsHandler(this.parent.activeView.renderDates,this.parent.activeViewOptions.workDays,a)}}this.parent.crudModule.crudObj.isCrudAction=!1}else for(t=0;t<e.length;t++)this.rowIndex=t,this.renderEventsHandler(this.parent.activeView.renderDates,this.parent.activeViewOptions.workDays,e[t])},i.prototype.renderEvents=function(e,t,r){var n=e[this.fields.startTime],a=e[this.fields.endTime];if(!(n.getTime()<this.parent.minDate.getTime()||a.getTime()>this.parent.maxDate.getTime())){var o=e.data;n=this.getStartTime(e,o),a=this.getEndTime(e,o);var c=Se(e[this.fields.startTime],this.startHour,this.endHour),h=this.updateEventMinimumDuration(c,n,a);if(n=h.startDate,a=h.endDate,this.day=this.parent.getIndexOfDate(this.dateRender,C(new Date(n.getTime()))),!(this.day<0)){var p=this.getCellTd(),u=(0,s.le)(this.parent.eventSettings.sortComparer)?this.getIndex(n):this.getSortComparerIndex(n,a);e.Index=u;var d=this.eventHeight,v=o.count,f=(0,s.l7)({},e,null,!0);f[this.fields.startTime]=o[this.fields.startTime],f[this.fields.endTime]=o[this.fields.endTime];var y,m=Se(C(new Date(this.dateRender[this.day].getTime())),this.startHour,this.endHour);if(y=!(!this.isDayProcess()&&!f[this.fields.isAllDay])||this.isValidEvent(f,n,a,m),n<=a&&y){var w=this.getEventWidth(n,a,e[this.fields.isAllDay],v);w="day"===this.renderType?w-2:w;var D,b,A=this.getPosition(n,a,e[this.fields.isAllDay],this.day);w=w<=0?this.cellWidth:w,this.renderedEvents.push((0,s.l7)({},e,null,!0)),(0,s.le)(this.cellTops[t])&&(this.cellTops[t]=this.getRowTop(t));var E=this.cellTops[t],S=E+(this.maxHeight?0:2)+u*(d+2);D=this.parent.enableRtl?0:A,b=this.parent.enableRtl?A:0;var O=(u+1)*(d+2)+this.moreIndicatorHeight;if(this.parent.rowAutoHeight||(this.maxOrIndicator?u<1:this.cellHeight>O)){var M=void 0;if(M=(0,s.le)(this.inlineValue)?this.createAppointmentElement(e,t):this.parent.inlineModule.createInlineAppointmentElement(),this.applyResourceColor(M,e,"backgroundColor",this.groupOrder),(0,s.V7)(M,{width:w+"px",left:D+"px",right:b+"px",top:S+"px"}),this.wireAppointmentEvents(M,e),this.renderEventElement(e,M,p),this.parent.rowAutoHeight){var L=this.getFirstChild(t);this.updateCellHeight(L,O)}"TimelineMonth"!==this.parent.activeViewOptions.option&&this.parent.activeViewOptions.timeScale.enable&&w<this.cellWidth&&[].slice.call(M.querySelectorAll("."+Kt)).forEach(function(oi){oi.style.width=Math.ceil(w/oi.getBoundingClientRect().width)+"px"})}else for(var H=0;H<v;H++){var z=p.querySelector("."+Te),q=this.parent.enableRtl?b:D;q=Math.floor(q/this.cellWidth)*this.cellWidth;var B=this.interval/this.slotCount,K="TimelineMonth"===this.parent.activeViewOptions.option||"day"===this.renderType||0!==H?new Date(this.dateRender[this.day+H].getTime()):new Date(n),Fe=V(this.dateRender[this.day+H],1);if("TimelineMonth"===this.parent.activeViewOptions.option||"day"===this.renderType){var ot=this.getPosition(K,Fe,e[this.fields.isAllDay],this.day+H);this.renderTimelineMoreIndicator(n,K,Fe,d,B,t,r,E,D,b,p,z,q,ot)}else for(var Dt=(ee(a)-ee(n))/oe*this.slotCount/this.interval,ve=0;ve<Dt&&(K=0===ve?new Date(K.getTime()):new Date(K.getTime()+6e4*B),!((Fe=new Date(K.getTime()+6e4*B)).getTime()>a.getTime()));ve++){var zi=this.getPosition(K,Fe,!1,this.day+H);if(q>zi)break;this.renderTimelineMoreIndicator(n,K,Fe,d,B,t,r,E,D,b,p,z,q=zi,zi)}}}this.parent.renderTemplates()}}},i.prototype.renderTimelineMoreIndicator=function(e,t,r,n,a,o,c,h,p,u,d,v,f,g){if(p=this.parent.enableRtl?u=g:g,f=this.parent.enableRtl?u:p,f=Math.floor(f/this.cellWidth)*this.cellWidth,d&&(0,s.le)(v)||!this.isAlreadyAvail(f,d)){var m="TimelineMonth"===this.parent.activeViewOptions.option||"day"===this.renderType?new Date(+e):t,y=new Date(m.setMinutes(Math.floor(m.getMinutes()/a)*a)),w=new Date(y.getTime()+6e4*a),D=void 0;this.parent.activeViewOptions.group.resources.length>0&&!(0,s.le)(o)&&(D=o.toString());var b=this.getFilterEvents(t,r,y,w,D,c),A=this.cellHeight-this.moreIndicatorHeight;n=this.withIndicator?A-2:n;var E=Math.floor(A/(n+2)),S=b.length-E<=0?1:b.length-E,O=void 0;O="day"===this.renderType?this.getMoreIndicatorElement(S,t,r):this.getMoreIndicatorElement(S,y,w),(0,s.le)(D)||O.setAttribute("data-group-index",D),O.style.top=h+A+"px",O.style.width=this.cellWidth+"px",O.style.left=Math.floor(p/this.cellWidth)*this.cellWidth+"px",O.style.right=Math.floor(u/this.cellWidth)*this.cellWidth+"px",this.renderElement(d,O),s.bi.add(O,"click",this.moreIndicatorClick,this)}},i.prototype.updateCellHeight=function(e,t){if(t>(""===e.style.height?this.cellHeight:parseInt(e.style.height,10))){if((0,s.V7)(e,{height:t+"px"}),this.parent.activeViewOptions.group.resources.length>0){var n=this.parent.element.querySelector("."+Xi+' tbody td[data-group-index="'+e.getAttribute("data-group-index")+'"]');n&&(0,s.V7)(n,{height:t+"px"})}var a=this.parent.element.querySelector(".e-month-header-wrapper table tr:nth-child("+(e.parentElement.rowIndex+1)+") td");a&&(0,s.V7)(a,{height:t+"px"})}},i.prototype.getFirstChild=function(e){var r="";return this.parent.activeViewOptions.group.resources.length>0&&(r='[data-group-index="'+e.toString()+'"]'),this.parent.element.querySelector(".e-content-table tbody td"+r)},i.prototype.updateBlockElements=function(){for(var t=0,r=[].slice.call(this.element.querySelectorAll("."+_t));t<r.length;t++){var n=r[t],a=parseInt(n.getAttribute("data-group-index"),10),o=this.getFirstChild(a);n.style.height=o.offsetHeight+"px";var c=Math.round(n.offsetWidth/o.offsetWidth);n.style.width=o.offsetWidth*c+"px"}for(var p=0,u=[].slice.call(this.element.querySelectorAll("."+er));p<u.length;p++)n=u[p],a=parseInt(n.getAttribute("data-group-index"),10),n.style.top=this.getRowTop(a)+this.getFirstChild(a).offsetHeight-18+"px"},i.prototype.getStartTime=function(e,t){var r=e[this.fields.startTime],n=Se(r,this.startHour,this.endHour);return r=this.isDayProcess()?e[this.fields.startTime]:n.startHour.getTime()>=t[this.fields.startTime]?n.startHour:n.endHour.getTime()<=t[this.fields.startTime]?this.getNextDay(n.startHour,t):t[this.fields.startTime],t.trimStartTime=e[this.fields.isAllDay]?n.startHour:t[this.fields.startTime],r},i.prototype.getNextDay=function(e,t){for(var r,n=1;n<=this.dateRender.length;n++)if(r=V(e,n),-1!==this.parent.getIndexOfDate(this.dateRender,C(new Date(e.getTime()))))return t.count=t.count-1,r;return r},i.prototype.getEndTime=function(e,t){var r=e[this.fields.endTime],n=Se(r,this.startHour,this.endHour);return this.isDayProcess()?r=t[this.fields.endTime]:(r=t[this.fields.endTime],(n.endHour.getTime()<=t[this.fields.endTime]||e[this.fields.isAllDay])&&(r=n.endHour),n.startHour.getTime()>=t[this.fields.endTime].getTime()&&!e[this.fields.isAllDay]&&(r=this.getPreviousDay(n.startHour,n.endHour,t))),t.trimEndTime=e[this.fields.isAllDay]?n.endHour:t[this.fields.endTime],r},i.prototype.getPreviousDay=function(e,t,r){for(var n=1;n<=this.dateRender.length;n++){var a=V(t,-n);if(-1!==this.parent.getIndexOfDate(this.dateRender,C(new Date(e.getTime())))){(a=C(new Date(a.getTime()))).setHours(t.getHours(),t.getMinutes(),t.getSeconds());var o=r.count,c=r[this.fields.endTime];return r.count=0!==c.getHours()||0!==c.getMinutes()?o-1:o,a}}return r[this.fields.endTime]},i.prototype.getEventWidth=function(e,t,r,n){return"day"===this.renderType||r?n*this.slotsPerDay*this.cellWidth:this.isSameDay(e,t)?this.getSameDayEventsWidth(e,t):this.getSpannedEventsWidth(e,t,n)},i.prototype.getSameDayEventsWidth=function(e,t){return(ee(t)-ee(e))/oe*(this.cellWidth*this.slotCount)/this.interval},i.prototype.getSpannedEventsWidth=function(e,t,r){var a,n=r*this.slotsPerDay*this.cellWidth,o=Se(C(new Date(e.getTime())),this.startHour,this.endHour),c=this.getSameDayEventsWidth(o.startHour,e);if(-1===this.parent.getIndexOfDate(this.dateRender,C(new Date(t.getTime()))))a=0;else{var h=Se(C(new Date(t.getTime())),this.startHour,this.endHour);a=this.getSameDayEventsWidth(t,h.endHour),a=this.slotsPerDay*this.cellWidth===a?0:a}var p=c+a;return n>p?n-p:n-c},i.prototype.isSameDay=function(e,t){return this.parent.getIndexOfDate(this.dateRender,C(new Date(e.getTime())))===this.parent.getIndexOfDate(this.dateRender,C(new Date(t.getTime())))},i.prototype.getAppointmentLeft=function(e,t,r){var n=this.isSameDay(t,e.startHour)?(ee(t)-ee(e.startHour))/(oe*this.interval)*this.slotCount:0;return 0===r?n:Math.round((ee(e.endHour)-ee(e.startHour))/oe/this.interval*this.slotCount)*r+n},i.prototype.getPosition=function(e,t,r,n){if("day"===this.renderType||r)return n*this.slotsPerDay*this.cellWidth;var o=Se(C(new Date(this.dateRender[n].getTime())),this.startHour,this.endHour);return(o.endHour.getTime()<=t.getTime()&&o.startHour.getTime()>=e.getTime()?this.getAppointmentLeft(o,o.startHour,n):o.endHour.getTime()<=t.getTime()?this.getAppointmentLeft(o,e,n):o.startHour.getTime()>=e.getTime()?this.getAppointmentLeft(o,o.startHour,n):this.getAppointmentLeft(o,e,n))*this.cellWidth},i.prototype.getFilterEvents=function(e,t,r,n,a,o){return"day"===this.renderType?this.getFilteredEvents(e,t,a,o):this.getFilteredEvents(r,n,a,o)},i.prototype.isAlreadyAvail=function(e,t){for(var r=[].slice.call(t.querySelectorAll("."+Te)),n=0;n<r.length;n++){var a=void 0;if(r&&(a=this.parent.enableRtl?r[n].style.right:r[n].style.left),parseInt(a,10)===Math.floor(e))return!0}return!1},i.prototype.getRowTop=function(e){return this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive?this.parent.element.querySelector("."+F+' tbody td[data-group-index="'+e.toString()+'"]').offsetTop:0},i.prototype.getCellTd=function(){return this.eventContainers[this.parent.uiStateValues.isGroupAdaptive?0:this.rowIndex]},i.prototype.renderBlockIndicator=function(e,t,r){if(!(this.parent.headerRows.length>0&&("Hour"!==this.parent.headerRows[this.parent.headerRows.length-1].option||"Date"!==this.parent.headerRows[this.parent.headerRows.length-1].option)||(t=Math.floor(t/this.cellWidth)*this.cellWidth+this.cellWidth-22,this.isAlreadyAvail(t,e)))){var n=(0,s.az)("div",{className:"e-icons "+er});this.parent.activeViewOptions.group.resources.length>0&&n.setAttribute("data-group-index",r.toString()),this.parent.enableRtl?n.style.right=t+"px":n.style.left=t+"px",n.style.top=this.getRowTop(r)+this.cellHeight-18+"px",this.renderElement(e,n)}},i.prototype.setMaxEventHeight=function(e,t){(0,s.V7)(e,{height:this.cellHeight-(this.maxHeight?0:2)-(this.maxHeight?0:this.moreIndicatorHeight)+"px"})},i.prototype.isDayProcess=function(){return"TimelineMonth"===this.parent.currentView||!this.parent.activeViewOptions.timeScale.enable||this.parent.activeViewOptions.headerRows.length>0&&"Hour"!==this.parent.activeViewOptions.headerRows.slice(-1)[0].option},i.prototype.destroy=function(){this.renderType=null,this.eventContainers=null,this.dayLength=null,this.content=null,l.prototype.destroy.call(this),this.parent=null},i}($t),wc=function(){function l(i){this.parent=i,this.parent.on(Pt,this.inlineEdit,this)}return l.prototype.inlineEdit=function(i){if(this.parent.quickPopup&&this.parent.quickPopup.quickPopupHide(),"Cell"===i.type){var e=this.parent.element.querySelector("."+tt);e&&e.classList.contains(re)&&this.parent.quickPopup.morePopup.hide(),this.removeInlineAppointmentElement(),this.cellEdit(i)}else this.parent.element.querySelector("."+we)!==i.element.querySelector("."+we)&&this.removeInlineAppointmentElement(),this.eventEdit(i)},l.prototype.cellEdit=function(i){var e=this.generateEventData(),t=i.element.cellIndex,r=this.getEventDaysCount(e);r>1&&(r=Math.round(r),t-=--r);var n=C(new Date(""+e[this.parent.eventFields.startTime])).getTime(),a=C(new Date(""+e[this.parent.eventFields.endTime])).getTime(),o=i.groupIndex||0;if("Day"===this.parent.currentView||"Week"===this.parent.currentView||"WorkWeek"===this.parent.currentView){var c=e[this.parent.eventFields.startTime].getDay();this.createVerticalViewInline(e,c,o,t)}else"Month"===this.parent.currentView?this.createMonthViewInline(e,o,n,a):this.createTimelineViewInline(e,n,a,o);var h=this.parent.element.querySelector("."+we);h&&h.focus()},l.prototype.eventEdit=function(i){var t,e=i.element.querySelector("."+we);if(e)t=e.value;else{var r=i.element.querySelector("."+te),n=i.element.querySelector("."+Pe);if(e=(0,s.az)("input",{className:we,attrs:{value:t=r.innerText}}),(0,s.cn)([r],j),(0,s.oq)(i.element,"."+tt))i.element.insertBefore(e,r);else if(["Agenda","MonthAgenda"].indexOf(this.parent.currentView)>-1){var a=i.element.querySelector("."+ln);a.insertBefore(e,a.firstChild)}else{var o=["TimelineDay","TimelineWeek","TimelineWorkWeek","TimelineMonth"].indexOf(this.parent.currentView)>-1?".e-inner-wrap":".e-appointment-details";i.element.querySelector(o).insertBefore(e,n)}e.focus()}e.setSelectionRange(t.length,t.length)},l.prototype.createVerticalViewInline=function(i,e,t,r){var n,a=this.getEventDaysCount(i),o=new Un(this.parent);o.initializeValues();var c=o.dateRender[t].map(function(u){return u.getDay()}).indexOf(e);if(a>=1){o.allDayElement=[].slice.call(this.parent.element.querySelectorAll("."+U)),(n=o.slots).push.apply(n,this.parent.activeView.renderDates.map(function(u){return+u}));var h=[].slice.call(this.parent.element.querySelectorAll("."+le)),p=0;h.length>0&&(p=Math.floor(this.parent.element.querySelector("."+We).getBoundingClientRect().height/h[0].offsetHeight)-1),o.allDayLevel=p,o.renderAllDayEvents(i,c,t,r,this.parent.allowInline)}else o.renderNormalEvents(i,c,t,r,this.parent.allowInline)},l.prototype.createMonthViewInline=function(i,e,t,r){var n=this.getEventDaysCount(i),a=this.parent.eventBase.cloneEventObject(i,t,r,n,!1,!1),o=new $t(this.parent);o.dateRender=this.parent.activeView.renderDates,o.inlineValue=this.parent.allowInline;var c=this.parent.activeView.renderDates,h=this.parent.activeViewOptions.workDays,p="."+R;if(this.parent.activeViewOptions.group.resources.length>0){p+='[data-group-index="'+e+'"]';var u=this.parent.resourceBase.lastResourceLevel[e];c=u.renderDates,h=u.workDays}o.workCells=[].slice.call(this.parent.element.querySelectorAll(p)),o.cellWidth=o.workCells[0].offsetWidth,o.cellHeight=o.workCells[0].offsetHeight,o.eventHeight=qt(this.parent.monthModule.element,P),o.getSlotDates(h);for(var d=o.getRenderedDates(c),f=0,g=o.splitEvent(a,d||c);f<g.length;f++)o.renderEvents(g[f],e);this.parent.element.querySelector("."+we).focus()},l.prototype.createTimelineViewInline=function(i,e,t,r){var n=this.getEventDaysCount(i),a=this.parent.eventBase.cloneEventObject(i,e,t,n,!1,!1),o=new ti(this.parent,this.parent.activeViewOptions.timeScale.enable?"hour":"day");o.dateRender=this.parent.activeView.renderDates,o.eventContainers=[].slice.call(this.parent.element.querySelectorAll("."+He));var c=this.parent.element.querySelector("."+R);o.inlineValue=this.parent.allowInline,o.cellWidth=c.offsetWidth,o.cellHeight=c.offsetHeight;var h=0===this.parent.element.querySelectorAll("."+X+" tbody tr").length?0:this.parent.element.querySelectorAll("."+X+" tbody tr")[0].children.length;o.slotsPerDay=h/o.dateRender.length,o.eventHeight=qt(o.element,P),o.renderEvents(a,r)},l.prototype.getEventDaysCount=function(i){var e=i[this.parent.eventFields.startTime];return Math.abs(i[this.parent.eventFields.endTime].getTime()-e.getTime())/Z},l.prototype.generateEventData=function(i){var e=this.parent.element.querySelector("."+we),t=e?e.value:i?i.innerHTML:"",r={};return r[this.parent.eventFields.id]=this.parent.eventBase.getEventMaxID(),r[this.parent.eventFields.subject]=t,r[this.parent.eventFields.startTime]=this.parent.activeCellsData.startTime,r[this.parent.eventFields.endTime]=this.parent.activeCellsData.endTime,r[this.parent.eventFields.isAllDay]=this.parent.activeCellsData.isAllDay,this.parent.eventWindow.setDefaultValueToObject(r),this.parent.resourceBase&&this.parent.resourceBase.setResourceValues(r,this.parent.activeCellsData.groupIndex),r},l.prototype.documentClick=function(){var i=this.parent.element.querySelector("."+we);i&&""!==i.value?this.inlineCrudActions(i):this.removeInlineAppointmentElement()},l.prototype.inlineCrudActions=function(i){if((0,s.oq)(i,"."+gr)){var e=this.generateEventData(i);this.parent.addEvent(e)}else{var t=(0,s.oq)(i,"."+P),r=this.parent.getEventDetails(t);r[this.parent.eventFields.subject]=i.value;var n=void 0;r[this.parent.eventFields.id]===r[this.parent.eventFields.recurrenceID]&&(n="EditOccurrence",r[this.parent.eventFields.id]=this.parent.eventBase.getEventMaxID()),this.parent.saveEvent(r,n)}this.removeInlineAppointmentElement()},l.prototype.createInlineAppointmentElement=function(i){var e=(0,s.az)("div",{className:P+" "+gr}),t=(0,s.az)("div",{className:tr});e.appendChild(t);var r=(0,s.az)("input",{className:we});return t.appendChild(r),i&&this.parent.eventBase.applyResourceColor(e,i,"backgroundColor"),e},l.prototype.removeInlineAppointmentElement=function(){var i=[].slice.call(this.parent.element.querySelectorAll("."+gr));i.length>0&&i.forEach(function(r){return(0,s.Od)(r)});var e=this.parent.element.querySelector("."+we);if(e){var t=(0,s.oq)(e,"."+P);(0,s.IV)([t.querySelector("."+te)],j),(0,s.Od)(e)}},l.prototype.destroy=function(){this.parent.off(Pt,this.inlineEdit)},l}(),Es=function(){function l(){}return l.prototype.renderFormValidator=function(i,e,t,r){var n=this;this.element=t,this.formObj=new It.Tl(i,{locale:r,customPlacement:function(a,o){n.errorPlacement(a,o)},rules:e,validationComplete:function(a){n.validationComplete(a)},focusout:function(a){n.focusOut(a)}})},l.prototype.focusOut=function(i){var e=i.relatedTarget;this.ignoreError=!(!e||!(e.classList.contains("e-dlg-closeicon-btn")||e.classList.contains("e-close")||e.classList.contains(U)||e.classList.contains(ie)||e.classList.contains(hr)||e.classList.contains(R)||e.classList.contains(ja)))},l.prototype.validationComplete=function(i){var e=this.element.querySelector("#"+i.inputName+"_Error");e&&(e.style.display="failure"===i.status?"":"none")},l.prototype.errorPlacement=function(i,e){var t=e.getAttribute("for"),r=this.element.querySelector("#"+t+"_Error");!r&&!this.ignoreError&&this.createTooltip(i,e,t,""),(0,s.le)(r)||(r.querySelector(".e-error").innerHTML=e.innerHTML)},l.prototype.createTooltip=function(i,e,t,r){var n,a,o=i.getBoundingClientRect();this.element.classList.contains(yt)?(n=this.element,a=this.element.getBoundingClientRect()):a=(n=this.element.querySelector(".e-schedule-dialog .e-dlg-content")).getBoundingClientRect();var c=(0,s.az)("div",{className:"e-tooltip-wrap e-popup "+Ga,id:t+"_Error",styles:"display:"+r+";top:"+(o.bottom-a.top+n.scrollTop+9)+"px;left:"+(o.left-a.left+n.scrollLeft+o.width/2)+"px;"}),h=(0,s.az)("div",{className:"e-tip-content"});h.appendChild(e);var p=(0,s.az)("div",{className:"e-arrow-tip e-tip-top"});p.appendChild((0,s.az)("div",{className:"e-arrow-tip-outer e-tip-top"})),p.appendChild((0,s.az)("div",{className:"e-arrow-tip-inner e-tip-top"})),c.appendChild(h),c.appendChild(p),n.appendChild(c),c.style.left=parseInt(c.style.left,10)-c.offsetWidth/2+"px"},l.prototype.destroyToolTip=function(){if(this.element)for(var e=0,t=[].slice.call(this.element.querySelectorAll("."+Ga));e<t.length;e++)(0,s.Od)(t[e]);this.formObj&&this.formObj.element&&this.formObj.reset()},l.prototype.destroy=function(){this.formObj&&this.formObj.element&&!this.formObj.isDestroyed&&this.formObj.destroy(),this.formObj=null,this.element=null},l}(),As=function(){function l(i){this.isMultipleEventSelect=!1,this.isCrudAction=!1,this.parent=i,this.l10n=this.parent.localeObj,this.fieldValidator=new Es,this.render(),this.addEventListener()}return l.prototype.render=function(){this.renderQuickPopup(),this.renderMorePopup(),this.renderQuickDialog()},l.prototype.renderQuickPopup=function(){var i=(0,s.az)("div",{className:yt+" e-popup-close"});this.parent.isAdaptive?(document.body.appendChild(i),(0,s.cn)([i],Nt)):this.parent.element.appendChild(i),this.quickPopup=new Ee.GI(i,{targetType:this.parent.isAdaptive?"container":"relative",enableRtl:this.parent.enableRtl,open:this.quickPopupOpen.bind(this),close:this.quickPopupClose.bind(this),hideAnimation:this.parent.isAdaptive?{name:"ZoomOut"}:{name:"FadeOut",duration:150},showAnimation:this.parent.isAdaptive?{name:"ZoomIn"}:{name:"FadeIn",duration:150},collision:this.parent.isAdaptive?{X:"fit",Y:"fit"}:this.parent.enableRtl?{X:"flip",Y:"fit"}:{X:"none",Y:"fit"},position:this.parent.isAdaptive||this.parent.enableRtl?{X:"left",Y:"top"}:{X:"right",Y:"top"},viewPortElement:this.parent.isAdaptive?document.body:this.parent.element,zIndex:this.parent.isAdaptive?1004:3})},l.prototype.renderMorePopup=function(){var i='<div class="'+At+'"><div class="e-more-event-header"><div class="'+Cn+'" title="'+this.l10n.getConstant("close")+'" tabindex="0"></div><div class="'+Dn+'"><div class="'+Fa+'"></div><div class="'+Xt+" "+Et+'" tabindex="0"></div></div></div></div>',e=(0,s.az)("div",{className:tt+" e-popup-close",innerHTML:i});this.parent.isAdaptive?(document.body.appendChild(e),(0,s.cn)([e],Nt)):this.parent.element.appendChild(e),this.morePopup=new Ee.GI(e,{targetType:this.parent.isAdaptive?"container":"relative",enableRtl:this.parent.enableRtl,hideAnimation:{name:"ZoomOut",duration:300},showAnimation:{name:"ZoomIn",duration:300},open:this.morePopupOpen.bind(this),close:this.morePopupClose.bind(this),collision:this.parent.isAdaptive?{X:"fit",Y:"fit"}:this.parent.enableRtl?{X:"flip",Y:"fit"}:{X:"flip",Y:"flip"},viewPortElement:this.parent.isAdaptive?document.body:this.parent.element,zIndex:this.parent.isAdaptive?1002:2});var t=this.morePopup.element.querySelector("."+Cn);this.renderButton("e-round",$+" "+fr,!1,t,this.closeClick),s.bi.add(this.morePopup.element.querySelector("."+Xt),"click",this.navigationClick,this)},l.prototype.renderQuickDialog=function(){var i=[{buttonModel:{cssClass:"e-quick-alertok e-flat",isPrimary:!0},click:this.dialogButtonClick.bind(this)},{buttonModel:{cssClass:"e-quick-alertcancel e-flat",isPrimary:!1},click:this.dialogButtonClick.bind(this)},{buttonModel:{cssClass:"e-quick-dialog-cancel e-disable e-flat",isPrimary:!1},click:this.dialogButtonClick.bind(this)}];if(this.parent.eventSettings.editFollowingEvents){var e={buttonModel:{cssClass:"e-quick-alertfollowing e-flat",isPrimary:!1},click:this.dialogButtonClick.bind(this)};i.splice(1,0,e)}this.quickDialog=new Ee.Vq({animationSettings:{effect:"Zoom"},buttons:i,cssClass:"e-quick-dialog",closeOnEscape:!0,enableRtl:this.parent.enableRtl,beforeClose:this.beforeQuickDialogClose.bind(this),isModal:!0,position:{X:"center",Y:"center"},showCloseIcon:!0,target:document.body,visible:!1,width:"auto"});var t=(0,s.az)("div",{id:this.parent.element.id+"QuickDialog"});this.parent.element.appendChild(t),this.quickDialog.appendTo(t);var r=this.quickDialog.element.querySelector("."+dt);r&&(r.setAttribute("aria-label",this.l10n.getConstant("occurrence")),r.setAttribute("aria-label",r.innerHTML));var n=this.quickDialog.element.querySelector("."+Ye);n&&(n.setAttribute("aria-label",this.l10n.getConstant("series")),n.setAttribute("aria-label",n.innerHTML)),this.quickDialog.element.querySelector(".e-dlg-closeicon-btn")&&this.quickDialog.element.querySelector(".e-dlg-closeicon-btn").setAttribute("title",this.l10n.getConstant("close"))},l.prototype.renderButton=function(i,e,t,r,n){new kt.zx({cssClass:i,disabled:t,enableRtl:this.parent.enableRtl,iconCss:e}).appendTo(r),s.bi.add(r,"click",n,this),(0,s.IV)([r],$)},l.prototype.quickDialogClass=function(i){var e=[En,An,bn,Di,Wa,j],t=this.quickDialog.element.querySelector("."+dt),r=this.quickDialog.element.querySelector("."+Ye),n=this.quickDialog.element.querySelector("."+On);switch((0,s.IV)([t,r],e),(0,s.cn)([this.quickDialog.element.querySelector("."+Di)],j),this.parent.eventSettings.editFollowingEvents&&((0,s.cn)([n],j),(0,s.IV)([this.quickDialog.element],Ba)),i){case"Recurrence":(0,s.cn)([t],En),(0,s.cn)([r],An),this.parent.eventSettings.editFollowingEvents&&((0,s.IV)([n],j),(0,s.cn)([this.quickDialog.element],Ba),(0,s.cn)([n],Na));break;case"Delete":(0,s.cn)([t],bn),(0,s.cn)([r],Di);break;case"Alert":(0,s.cn)([t],[dt,Wa]),(0,s.cn)([r],[Ye,j])}},l.prototype.applyFormValidation=function(){var i=this.quickPopup.element.querySelector("."+vt),e={};e[this.parent.eventSettings.fields.subject.name]=this.parent.eventSettings.fields.subject.validation,this.fieldValidator.renderFormValidator(i,e,this.quickPopup.element,this.parent.locale)},l.prototype.openRecurrenceAlert=function(){var i=this.quickDialog.element.querySelector("."+dt);i&&(i.innerHTML=this.l10n.getConstant("Delete"===this.parent.currentAction?"deleteEvent":"editEvent"),i.setAttribute("aria-label",i.innerHTML));var e=this.quickDialog.element.querySelector("."+On);e&&(e.innerHTML=this.l10n.getConstant("editFollowingEvent"),e.setAttribute("aria-label",e.innerHTML));var t=this.quickDialog.element.querySelector("."+Ye);t&&(t.innerHTML=this.l10n.getConstant("Delete"===this.parent.currentAction?"deleteSeries":"editSeries"),t.setAttribute("aria-label",t.innerHTML)),this.quickDialog.content=this.l10n.getConstant("editContent"),this.quickDialog.header=this.l10n.getConstant("Delete"===this.parent.currentAction?"deleteTitle":"editTitle"),this.quickDialogClass("Recurrence");var r=this.parent.activeEventData.event;if(this.parent.eventSettings.editFollowingEvents&&"EditOccurrence"===this.parent.currentAction&&!(0,s.le)(r[this.parent.eventFields.recurrenceID])&&r[this.parent.eventFields.recurrenceID]!==r[this.parent.eventFields.id]){var n=this.quickDialog.element.querySelector("."+On);(0,s.cn)([n],j)}this.showQuickDialog("RecurrenceAlert")},l.prototype.openRecurrenceValidationAlert=function(i){this.quickDialogClass("Alert");var e=this.quickDialog.element.querySelector("."+dt);e.innerHTML=this.l10n.getConstant("ok"),e.setAttribute("aria-label",e.innerHTML);var r,t=this.quickDialog.element.querySelector("."+Ye);switch(t.innerHTML=this.l10n.getConstant("cancel"),t.setAttribute("aria-label",t.innerHTML),this.quickDialog.header=this.l10n.getConstant("alert"),i){case"wrongPattern":(0,s.cn)([t],j),this.quickDialog.content=this.l10n.getConstant("wrongPattern");break;case"createError":(0,s.cn)([t],j),this.quickDialog.content=this.l10n.getConstant("createError");break;case"sameDayAlert":(0,s.cn)([t],j),this.quickDialog.content=this.l10n.getConstant("sameDayAlert");break;case"seriesChangeAlert":r=this.quickDialog.element.querySelector("."+Di),(0,s.IV)([t,r],j),this.quickDialog.content=this.l10n.getConstant("seriesChangeAlert"),e.innerHTML=this.l10n.getConstant("yes"),t.innerHTML=this.l10n.getConstant("no"),r.innerHTML=this.l10n.getConstant("cancel");break;case"occurrenceAlert":(0,s.cn)([t],j),this.quickDialog.content=this.l10n.getConstant("occurenceAlert")}(!this.parent.enableRecurrenceValidation&&"wrongPattern"===i||this.parent.enableRecurrenceValidation)&&this.showQuickDialog("RecurrenceValidationAlert")},l.prototype.openDeleteAlert=function(){if(!this.parent.activeViewOptions.readonly){var i=this.quickDialog.element.querySelector("."+dt);i&&(i.innerHTML=this.l10n.getConstant("delete"),i.setAttribute("aria-label",i.innerHTML));var e=this.quickDialog.element.querySelector("."+Ye);e&&(e.innerHTML=this.l10n.getConstant("cancel"),e.setAttribute("aria-label",e.innerHTML)),this.quickDialog.content=this.l10n.getConstant(this.parent.activeEventData.event.length>1?"deleteMultipleContent":"deleteContent"),this.quickDialog.header=this.l10n.getConstant(this.parent.activeEventData.event.length>1?"deleteMultipleEvent":"deleteEvent"),this.quickDialogClass("Delete"),this.showQuickDialog("DeleteAlert")}},l.prototype.openValidationError=function(i,e){this.quickDialog.header=this.l10n.getConstant("alert"),this.quickDialog.content=this.l10n.getConstant(i);var t=this.quickDialog.element.querySelector("."+dt);t&&(t.innerHTML=this.l10n.getConstant("ok"),t.setAttribute("aria-label",t.innerHTML));var r=this.quickDialog.element.querySelector("."+Ye);r&&(r.innerHTML=this.l10n.getConstant("cancel"),t.setAttribute("aria-label",r.innerHTML)),this.quickDialogClass("Alert"),this.showQuickDialog("ValidationAlert",e)},l.prototype.showQuickDialog=function(i,e){var t=this;this.quickDialog.dataBind();var r={type:i,cancel:!1,element:this.quickDialog.element,data:(0,s.l7)({},e||this.parent.activeEventData.event,null,!0)};this.parent.trigger(Yi,r,function(n){n.cancel||t.quickDialog.show()})},l.prototype.createMoreEventList=function(i,e,t){var r=this,n=this.parent.eventFields,a=(0,s.az)("div",{className:ur}),o=(0,s.az)("div",{className:Sn});if(0===i.length)o=(0,s.az)("div",{className:ur,innerHTML:this.l10n.getConstant("emptyContainer")});else for(var c=function(v){var f=v[n.subject]||h.parent.eventSettings.fields.subject.default||h.parent.localeObj.getConstant("addTitle"),g=(0,s.az)("div",{className:P,attrs:{"data-id":""+v[n.id],"data-guid":v.Guid,role:"button",tabindex:"0","aria-disabled":h.parent.eventBase.getReadonlyAttribute(v),"aria-pressed":"false","aria-label":h.parent.getAnnouncementString(v)}}),m=void 0;if((0,s.le)(h.parent.activeViewOptions.eventTemplate))g.appendChild((0,s.az)("div",{className:te,innerHTML:f}));else{var y=h.parent.element.id+"_"+h.parent.activeViewOptions.eventTemplateName+"eventTemplate";m=h.parent.getAppointmentTemplate()(v,h.parent,"eventTemplate",y,!1),(0,s.R3)(m,g)}(0,s.le)(t)||g.setAttribute("data-group-index",t),(0,s.le)(v[n.recurrenceRule])||g.appendChild((0,s.az)("div",{className:$+" "+(v[n.id]===v[n.recurrenceID]?mi:yi)}));var D={data:(0,s.l7)({},v,null,!0),element:g,cancel:!1};h.parent.trigger(Ht,D,function(b){b.cancel||(o.appendChild(g),r.parent.eventBase.wireAppointmentEvents(g,v,r.parent.isAdaptive||"Year"===r.parent.currentView),r.parent.eventBase.applyResourceColor(g,v,"backgroundColor",e))})},h=this,p=0,u=i;p<u.length;p++)c(u[p]);return a.appendChild(o),a},l.prototype.tapHoldEventPopup=function(i){var e=(0,s.oq)(i.target,"."+P);this.isMultipleEventSelect=!1,this.parent.selectedElements=[],this.isMultipleEventSelect=!0,this.parent.eventBase.getSelectedEventElements(e),this.parent.activeEventData=this.parent.eventBase.getSelectedEvents();var t=e.getAttribute("data-guid"),r=this.parent.eventBase.getEventByGuid(t);if(!(0,s.le)(r)){var n=r[this.parent.eventFields.subject]||this.l10n.getConstant("noTitle"),a='<div class="e-multiple-event-popup"><div class="'+Tn+'"><button class="'+Vt+'" title="'+this.l10n.getConstant("close")+'"></button><div class="'+te+'">'+n+'</div><button class="e-edit" title="'+this.l10n.getConstant("edit")+'"></button><button class="'+Oi+'" title="'+this.l10n.getConstant("delete")+'"></button></div></div>';this.quickPopup.element.innerHTML=a;var o=this.quickPopup.element.querySelector("."+Vt);this.renderButton("e-flat e-round e-small",$+" "+fr,!1,o,this.closeClick);var c=this.parent.activeViewOptions.readonly||r[this.parent.eventFields.isReadonly],h=!this.parent.eventSettings.allowEditing||c,p=!this.parent.eventSettings.allowDeleting||c,u=this.quickPopup.element.querySelector("."+Ot);u&&this.renderButton("e-flat e-round e-small",$+" "+vr,h,u,this.editClick);var d=this.quickPopup.element.querySelector("."+Oi);d&&this.renderButton("e-flat e-round e-small",$+" "+_a,p,d,this.deleteClick),this.beforeQuickPopupOpen(e)}},l.prototype.isCellBlocked=function(i){var e={};if(e[this.parent.eventFields.startTime]=this.parent.activeCellsData.startTime,e[this.parent.eventFields.endTime]=this.parent.activeCellsData.endTime,e[this.parent.eventFields.isAllDay]=this.parent.activeCellsData.isAllDay,this.parent.activeViewOptions.group.resources.length>0){var r=parseInt((i.element instanceof Array?i.element[0]:i.element).getAttribute("data-group-index"),10);this.parent.resourceBase.setResourceValues(e,isNaN(r)?null:r)}return this.parent.eventBase.isBlockRange(e)},l.prototype.cellClick=function(i){var e=new Date(i.startTime.getTime());if(this.parent.showQuickInfo&&this.parent.eventSettings.allowAdding&&"MonthAgenda"!==this.parent.currentView&&!this.isCellBlocked(i)&&this.parent.isMinMaxDate(new Date(e.setHours(0,0,0,0)))){var t=(0,s.le)(i.event)?i.element:i.event.target;if(this.parent.isAdaptive){this.quickPopupHide();var r=this.parent.element.querySelector("."+sr);(0,s.le)(r)&&(r=(0,s.az)("div",{className:sr,innerHTML:'<div class="e-title">+ '+this.l10n.getConstant("newEvent")+"</div>"}));var n=(0,s.oq)(t,"."+R+",."+U);n&&n.appendChild(r)}else{var a=(0,s.oq)(t,"."+R+",."+U+",."+ie);if(!(0,s.le)(a)&&!t.classList.contains(Te)){if(this.quickPopup.relateTo===a&&this.quickPopup.element.classList.contains(re)){var c=this.quickPopup.element.querySelector("."+te);return void(c&&c.focus())}this.quickPopup.element&&this.destroyPopupButtons("quickPopup");var h={};h[this.parent.eventFields.startTime]=this.parent.activeCellsData.startTime,h[this.parent.eventFields.endTime]=this.parent.activeCellsData.endTime,h[this.parent.eventFields.isAllDay]=this.parent.activeCellsData.isAllDay;var p=(0,s.az)("div",{className:mn});p.appendChild(this.getPopupHeader("Cell",h)),p.appendChild(this.getPopupContent("Cell",i,h)),p.appendChild(this.getPopupFooter("Cell",h));var u=p.querySelector("."+te);u&&It.II.createInput({element:u,properties:{placeholder:this.l10n.getConstant("addTitle")}}),(0,s.le)(this.parent.eventSettings.fields.subject.default)||(u.value=this.parent.eventSettings.fields.subject.default);var d=p.querySelector("."+Vt);d&&this.renderButton("e-flat e-round e-small",$+" "+fr,!1,d,this.popupClose);var v=p.querySelector("."+hr);v&&this.renderButton("e-flat","",!1,v,this.detailsClick);var f=p.querySelector("."+pr);f&&this.renderButton("e-flat e-primary","",this.parent.activeViewOptions.readonly,f,this.saveClick),this.morePopup&&this.morePopup.hide(),this.quickPopup.content=p,this.quickPopup.relateTo=a,this.quickPopup.dataBind(),this.beforeQuickPopupOpen(a)}}}else this.quickPopupHide()},l.prototype.isSameEventClick=function(i){if(this.quickPopup.relateTo===(0,s.oq)(i.element,"."+P)&&this.quickPopup.element.classList.contains(re)){var t=this.quickPopup.element.querySelector("."+Ot);if(t&&t.focus(),!this.parent.isAdaptive){var r=this.quickPopup.element.querySelector("."+Qt);r&&r.focus()}return!0}return!1},l.prototype.isQuickTemplate=function(i){return"Both"===this.parent.quickInfoTemplates.templateType||this.parent.quickInfoTemplates.templateType===i},l.prototype.eventClick=function(i){if(this.parent.eventTooltip&&this.parent.eventTooltip.close(),this.parent.showQuickInfo)if(this.parent.isAdaptive&&this.isMultipleEventSelect)this.updateTapHoldEventPopup((0,s.oq)(i.element,"."+P));else{var e=this.isSameEventClick(i);if(this.parent.selectedElements=[],e)return;this.quickPopup.element&&this.destroyPopupButtons("quickPopup");var t=i.event,r=(0,s.az)("div",{className:yn});r.appendChild(this.getPopupHeader("Event",t)),r.appendChild(this.getPopupContent("Event",i,t)),r.appendChild(this.getPopupFooter("Event",t));var n=this.parent.activeViewOptions.readonly||t[this.parent.eventFields.isReadonly],a=!this.parent.eventSettings.allowEditing||n,o=!this.parent.eventSettings.allowDeleting||n,c=r.querySelector("."+Ot),h="e-flat e-round e-small";c&&this.renderButton(h,$+" "+vr,a,c,this.editClick);var p=r.querySelector("."+Oi);p&&this.renderButton(h,$+" "+_a,o,p,this.deleteClick);var u=r.querySelector("."+Vt);u&&this.renderButton(h,$+" "+fr,!1,u,this.popupClose);var d=r.querySelector("."+Qt);d&&this.renderButton("e-flat e-primary","",a,d,this.editClick);var v=r.querySelector("."+et);v&&this.renderButton("e-flat","",o,v,this.deleteClick),this.morePopup&&!(0,s.oq)(i.element,"."+Sn)&&this.morePopup.hide(),this.quickPopup.content=r,this.quickPopup.relateTo=this.parent.isAdaptive?document.body:(0,s.oq)(i.element,"."+P),this.quickPopup.dataBind(),this.beforeQuickPopupOpen(i.element)}},l.prototype.getPopupHeader=function(i,e){var t=(0,s.az)("div",{className:Tn});if(this.isQuickTemplate(i)&&this.parent.quickInfoTemplates.header){var r=(0,s.l7)({},e,{elementType:i.toLowerCase()},!0),n=this.parent.element.id,a=[].slice.call(this.parent.getQuickInfoTemplatesHeader()(r,this.parent,"header",n+"_headerTemplate",!1));(0,s.R3)([].slice.call(a),t)}else{var o=void 0,c=void 0;switch(i){case"Cell":o='<div class="'+Pa+'"><button class="'+Vt+'" title="'+this.l10n.getConstant("close")+'"></button></div>';break;case"Event":c=this.getFormattedString(e),o='<div class="'+Pa+'"><button class="e-edit '+$+'" title="'+this.l10n.getConstant("edit")+'"></button><button class="'+Oi+" "+$+'" title="'+this.l10n.getConstant("delete")+'"></button><button class="'+Vt+'" title="'+this.l10n.getConstant("close")+'"></button></div><div class="'+ln+'"><div class="'+te+" "+ce+'" title="'+(c.eventSubject?c.eventSubject.replaceAll('"',"'"):c.eventSubject)+'">'+c.eventSubject+"</div></div >"}var h=(0,s.az)("div",{innerHTML:o});(0,s.R3)([].slice.call(h.childNodes),t)}return t},l.prototype.getPopupContent=function(i,e,t){var r=(0,s.az)("div",{className:"e-popup-content"});if(this.isQuickTemplate(i)&&this.parent.quickInfoTemplates.content){var n=(0,s.l7)({},t,{elementType:i.toLowerCase()},!0),a=this.parent.element.id,o=[].slice.call(this.parent.getQuickInfoTemplatesContent()(n,this.parent,"content",a+"_contentTemplate",!1));(0,s.R3)([].slice.call(o),r)}else{var c=void 0,h=void 0,p=void 0,u=this.getResourceText(e,i.toLowerCase());switch(i){case"Cell":h=this.getFormattedString(t),c='<table class="e-popup-table"><tbody><tr><td><form class="'+vt+'" onsubmit="return false;"><input class="'+te+' e-field" type="text" name="'+this.parent.eventFields.subject+'" /></form></td></tr><tr><td><div class="'+cn+'"><div class="'+ts+" "+$+'"></div><div class="'+qa+" "+ce+'">'+h.details+"</div></div>"+(this.parent.activeViewOptions.group.resources.length>0?'<div class="'+Ja+'"><div class="'+$a+" "+$+' "></div><div class="'+es+" "+ce+'">'+u+"</div></div>":"")+"</td></tr></tbody></table>";break;case"Event":p=this.getFormattedString(t),c='<div class="'+cn+'"><div class="'+ts+" "+$+'"></div><div class="e-date-time-wrapper '+ce+'"><div class="'+qa+" "+ce+'">'+p.details+"</div>",t[this.parent.eventFields.recurrenceRule]&&(c+='<div class="e-recurrence-summary '+ce+'">'+this.getRecurrenceSummary(t)+"</div>"),c+="</div></div>",t[this.parent.eventFields.location]&&(c+='<div class="'+gt+'"><div class="e-location-icon '+$+'"></div><div class="e-location-details '+ce+'">'+t[this.parent.eventFields.location]+"</div></div>"),(t[this.parent.eventFields.startTimezone]||t[this.parent.eventFields.endTimezone])&&(c+='<div class="'+ft+'"><div class="e-time-zone-icon '+$+'"></div><div class="e-time-zone-details '+ce+'">'+this.getTimezone(t)+"</div></div>"),t[this.parent.eventFields.description]&&(c+='<div class="'+bt+'"><div class="e-description-icon '+$+'"></div><div class="e-description-details '+ce+'">'+t[this.parent.eventFields.description]+"</div></div>"),this.parent.resourceCollection.length>0&&(c+='<div class="'+Ja+'"><div class="'+$a+" "+$+'"></div><div class="'+es+" "+ce+'">'+u+"</div></div>")}var d=(0,s.az)("div",{innerHTML:c});(0,s.R3)([].slice.call(d.childNodes),r)}return r},l.prototype.getPopupFooter=function(i,e){var t=(0,s.az)("div",{className:wn});if(this.isQuickTemplate(i)&&this.parent.quickInfoTemplates.footer){var r=(0,s.l7)({},e,{elementType:i.toLowerCase()},!0),n=this.parent.element.id,a=[].slice.call(this.parent.getQuickInfoTemplatesFooter()(r,this.parent,"footer",n+"_footerTemplate",!1));(0,s.R3)([].slice.call(a),t)}else{var o=void 0;switch(i){case"Cell":o='<button class="'+hr+" "+ce+'" title="'+this.l10n.getConstant("moreDetails")+'">'+this.l10n.getConstant("moreDetails")+'</button><button class="'+pr+" "+ce+'" title="'+this.l10n.getConstant("save")+'">'+this.l10n.getConstant("save")+"</button>";break;case"Event":o=this.parent.isAdaptive?"":'<button class="'+Qt+" "+ce+'" title="'+this.l10n.getConstant("edit")+'">'+this.l10n.getConstant("edit")+'</button><button class="'+et+" "+ce+'" title="'+this.l10n.getConstant("delete")+'">'+this.l10n.getConstant("delete")+"</button>"}var c=(0,s.az)("div",{innerHTML:o});(0,s.R3)([].slice.call(c.childNodes),t)}return t},l.prototype.getResourceText=function(i,e){if(0===this.parent.resourceCollection.length)return null;var t="";if(0===this.parent.activeViewOptions.group.resources.length){var r=this.parent.resourceBase.resourceCollection.slice(-1)[0],n=r.dataSource;if("event"===e)for(var a=i.event,o=function(w){var D=a[r.field];if(D instanceof Array){if(D.indexOf(w[r.idField])>-1){var b=D[D.indexOf(w[r.idField])],A=n.filter(function(E){return E[r.idField]===b})[0];t+=""===t?A[r.textField]:", "+A[r.textField]}}else w[r.idField]===D&&(t=w[r.textField].toString())},c=0,h=n;c<h.length;c++)o(h[c]);else t=n[0][r.textField].toString()}else if("event"===e){a=i.event,n=void 0;for(var u,d=this.parent.resourceBase.resourceCollection.length-1;d>=0;d--)if(!(0,s.le)(n=a[this.parent.resourceBase.resourceCollection[d].field])){u=this.parent.resourceBase.resourceCollection[d];break}Array.isArray(n)||(n=[n]);var v=[],f=u.dataSource;n.forEach(function(b){var A,E=ci(f,u.idField,b);E>-1&&(A=f[E][u.textField]),A&&v.push(A)}),t=v.join(", ")}else{var g=i,m=(0,s.le)(g.groupIndex)?0:g.groupIndex,y=this.parent.resourceBase.lastResourceLevel[m];t=y.resourceData[y.resource.textField]}return t},l.prototype.getFormattedString=function(i){var e=this.parent.eventFields,t=i[e.subject]||this.l10n.getConstant("noTitle"),r=i[e.startTime],n=i[e.endTime],a=this.getDateFormat(r,"long"),o=i[e.isAllDay]&&0===n.getHours()&&0===n.getMinutes()?this.getDateFormat(V(new Date(n.getTime()),-1),"long"):this.getDateFormat(n,"long"),c=this.parent.getTimeString(r),h=this.parent.getTimeString(n),p="",u=n.getDate()!==r.getDate()&&(n.getTime()-r.getTime())/36e5<24?1:0;return i[e.isAllDay]?(p=a+" ("+this.l10n.getConstant("allDay")+")",(ee(n)-ee(r))/Z>1&&(p+="&nbsp;-&nbsp;"+o+" ("+this.l10n.getConstant("allDay")+")")):p=(ee(n)-ee(r))/Z>=1||u>0?a+" ("+c+")&nbsp;-&nbsp;"+o+" ("+h+")":a+" ("+c+"&nbsp;-&nbsp;"+h+")",{eventSubject:t,details:p}},l.prototype.moreEventClick=function(i,e,t){var r=this;this.quickPopupHide(!0);var n=this.morePopup.element.querySelector("."+ur);n&&(0,s.Od)(n);var a=i.date.getTime().toString(),o=(0,s.oq)(i.element,"."+Te+",."+R),c=this.parent.globalize.formatDate(i.date,{format:"E",calendar:this.parent.getCalendarMode()});this.morePopup.element.querySelector("."+Fa).innerHTML=Y(c,"single");var p,h=this.morePopup.element.querySelector("."+Xt);h.innerHTML=this.getDateFormat(i.date,"d"),h.setAttribute("data-date",a),h.setAttribute("data-end-date",e.getTime().toString()),(0,s.le)(t)||(h.setAttribute("data-group-index",t),p=this.parent.resourceBase.lastResourceLevel[parseInt(t,10)].groupOrder);var u=this.createMoreEventList(i.event,p,t);if(this.morePopup.element.querySelector("."+At).appendChild(u),(0,s.IV)(this.morePopup.element.querySelector("."+Dn).childNodes,Kr),C(i.date).getTime()===C(this.parent.getCurrentTime()).getTime()&&(0,s.cn)(this.morePopup.element.querySelector("."+Dn).childNodes,Kr),!this.parent.isAdaptive)if(-1!==this.parent.currentView.indexOf("Timeline")){var d=o.getAttribute("data-group-index"),v=new Date(parseInt(o.getAttribute("data-start-date"),10));v.setHours(v.getHours(),v.getMinutes(),0);var f=v.getTime().toString();if((0,s.le)(d))this.morePopup.relateTo=this.parent.element.querySelector("."+F+' tbody tr td[data-date="'+f+'"]');else if(this.morePopup.relateTo=this.parent.element.querySelector("."+F+' tbody tr td[data-group-index="'+d+'"][data-date="'+f+'"]'),(0,s.le)(this.morePopup.relateTo))for(var g=[].slice.call(this.parent.element.querySelectorAll("."+F+' tbody tr td[data-group-index="'+d+'"]')),m=0;m<g.length;m++)g[m].getAttribute("data-date")<f&&(this.morePopup.relateTo=g[m])}else this.morePopup.relateTo=(0,s.oq)(o,"."+R);this.parent.renderTemplates(),this.parent.trigger(Yi,{type:"EventContainer",cancel:!1,element:this.morePopup.element,data:i},function(D){D.cancel||r.morePopup.show()})},l.prototype.saveClick=function(i){this.applyFormValidation(),this.dialogEvent=i,this.isCrudAction=!0,this.quickPopupHide()},l.prototype.detailsClick=function(i){var e=this.quickPopup.element.querySelector("."+te);e&&""!==e.value&&(0,s.l7)(this.parent.activeCellsData,{subject:e.value}),this.dialogEvent=i,this.isCrudAction=!1,this.fieldValidator.destroyToolTip(),this.quickPopupHide(),this.parent.eventWindow.openEditor(this.parent.activeCellsData,"Add")},l.prototype.editClick=function(i){this.dialogEvent=i,this.quickPopupHide(!0);var e=this.parent.activeEventData.event;this.parent.currentAction="EditSeries",(0,s.le)(e[this.parent.eventFields.recurrenceRule])?this.parent.eventWindow.openEditor(e,this.parent.currentAction):(this.parent.currentAction="EditOccurrence",this.openRecurrenceAlert())},l.prototype.deleteClick=function(i){this.dialogEvent=i,this.quickPopupHide(!0),this.parent.currentAction="Delete",this.parent.activeEventData.event[this.parent.eventFields.recurrenceRule]?this.openRecurrenceAlert():this.openDeleteAlert()},l.prototype.updateMoreEventContent=function(){if(!this.morePopup.element.classList.contains("e-popup-close")){var i=this.morePopup.element.querySelector("."+ur);i&&(0,s.Od)(i);var a,o,e=this.morePopup.element.querySelector("."+Xt),t=new Date(parseInt(e.getAttribute("data-date"),10)),r=new Date(parseInt(e.getAttribute("data-end-date"),10)),n=e.getAttribute("data-group-index");(0,s.le)(n)||(o=(a=this.parent.resourceBase.lastResourceLevel[parseInt(n,10)]).groupOrder);var c=this.parent.eventBase.filterEvents(t,r,this.parent.eventsProcessed,a),h=this.createMoreEventList(c,o,n);this.morePopup.element.querySelector("."+At).appendChild(h)}},l.prototype.closeClick=function(i){this.dialogEvent=i,"Year"===this.parent.currentView&&this.parent.activeCellsData&&this.parent.activeCellsData.element&&this.parent.selectCell(this.parent.activeCellsData.element),this.quickPopupHide(),this.morePopup.hide()},l.prototype.dialogButtonClick=function(i){this.dialogEvent=i,this.quickDialog.hide();var e=i.target,t=this.quickDialog.element.querySelector("."+Ye),r=this.parent.activeEventData.event;if(e.classList.contains(En))switch(this.parent.currentAction="Delete"===this.parent.currentAction?"DeleteOccurrence":"EditOccurrence",this.parent.currentAction){case"EditOccurrence":this.parent.eventWindow.openEditor(r,this.parent.currentAction);break;case"DeleteOccurrence":this.parent.crudModule.deleteEvent(r,this.parent.currentAction)}else if(e.classList.contains(Na))switch(this.parent.currentAction="Delete"===this.parent.currentAction?"DeleteFollowingEvents":"EditFollowingEvents",this.parent.currentAction){case"EditFollowingEvents":this.parent.eventWindow.openEditor(r,this.parent.currentAction);break;case"DeleteFollowingEvents":this.parent.crudModule.deleteEvent(r,this.parent.currentAction)}else if(e.classList.contains(An))switch(this.parent.currentAction="Delete"===this.parent.currentAction?"DeleteSeries":"EditSeries",this.parent.currentAction){case"EditSeries":this.parent.eventWindow.openEditor(this.parent.eventBase.getParentEvent(r,!0),this.parent.currentAction);break;case"DeleteSeries":this.parent.crudModule.deleteEvent(r,this.parent.currentAction)}else e.classList.contains(bn)?this.parent.crudModule.deleteEvent(r,this.parent.currentAction):!t.classList.contains(j)&&(e.classList.contains(dt)||e.classList.contains(Ye)&&!t.classList.contains(Di))&&(this.parent.uiStateValues.isIgnoreOccurrence=e.classList.contains(Ye),this.parent.eventWindow.eventSave(i,this.l10n.getConstant("ok")))},l.prototype.updateTapHoldEventPopup=function(i){var e=this.parent.eventBase.getSelectedEventElements(i);if(this.parent.activeEventData=this.parent.eventBase.getSelectedEvents(),e.length>0){var t=this.parent.eventBase.getEventByGuid(e[0].getAttribute("data-guid")),r=1===e.length?t[this.parent.eventFields.subject]||this.l10n.getConstant("noTitle"):"("+e.length+")&nbsp;"+this.l10n.getConstant("selectedItems");this.quickPopup.element.querySelector("."+te).innerHTML=r,e.length>1?(0,s.cn)([this.quickPopup.element.querySelector("."+vr)],he):(0,s.IV)([this.quickPopup.element.querySelector("."+vr)],he)}else this.parent.selectedElements=[],this.quickPopupHide()},l.prototype.getTimezone=function(i){var e="";return e+=i[this.parent.eventFields.startTimezone]||"",(e+=""===e?"":" - ")+(i[this.parent.eventFields.endTimezone]||"")},l.prototype.getRecurrenceSummary=function(i){var e=this.parent.eventWindow.getRecurrenceEditorInstance();if(e){var t=e.getRuleSummary(i[this.parent.eventFields.recurrenceRule]);return t.charAt(0).toUpperCase()+t.slice(1)}return""},l.prototype.getDateFormat=function(i,e){return Y(this.parent.globalize.formatDate(i,{skeleton:e,calendar:this.parent.getCalendarMode()}),"single")},l.prototype.getDataFromTarget=function(i){if(i.classList.contains(P))return this.parent.activeEventData.event;var e={startTime:this.parent.activeCellsData.startTime,endTime:this.parent.activeCellsData.endTime,isAllDay:this.parent.activeCellsData.isAllDay,groupIndex:this.parent.activeCellsData.groupIndex};return this.parent.eventWindow.convertToEventData(this.parent.activeCellsData,e),e},l.prototype.beforeQuickDialogClose=function(i){var e=this,t={event:i.event||this.dialogEvent,type:(0,s.le)(this.parent.activeEventData.event)?"ValidationAlert":(0,s.le)(this.parent.activeEventData.event[this.parent.eventFields.recurrenceRule])?"DeleteAlert":"RecurrenceAlert",cancel:!1,data:this.parent.activeEventData.event,element:this.quickDialog.element};this.parent.trigger(Nr,t,function(r){r.cancel||e.parent.eventBase.focusElement(!0)})},l.prototype.beforeQuickPopupOpen=function(i){var e=this;this.parent.renderTemplates();var t=this.quickPopup.element.querySelector("."+yn),r=this.parent.isAdaptive?t?"ViewEventInfo":"EditEventInfo":"QuickInfo",n={type:r,cancel:!1,data:(0,s.l7)({},this.getDataFromTarget(i),null,!0),target:i,element:this.quickPopup.element};this.parent.trigger(Yi,n,function(a){if(a.cancel)e.quickPopupHide(),e.destroyPopupButtons("quickPopup"),a.element.classList.contains(re)&&e.quickPopupClose(),Ie(e.quickPopup.element),e.isMultipleEventSelect=!1;else{var o=e.quickPopup.element.style.display;if(e.quickPopup.element.style.display="block",e.parent.isAdaptive)e.quickPopup.element.removeAttribute("style"),e.quickPopup.element.style.display="block",e.quickPopup.element.style.height=(0,s.Ac)("EditEventInfo"===r?65:window.innerHeight);else{var c=e.parent.virtualScrollModule&&e.parent.virtualScrollModule.isHorizontalScroll&&!(0,s.le)((0,s.oq)(i,"."+X)),h=e.parent.element.querySelector("."+F+" table");e.quickPopup.offsetX=c&&!e.parent.enableRtl?fa(h)+10:10,e.quickPopup.collision={X:e.parent.enableRtl?"flip":"none",Y:"fit"},e.quickPopup.position={X:e.parent.enableRtl?"left":"right",Y:e.parent.enableRtl?"bottom":"top"},e.quickPopup.dataBind(),e.quickPopup.refreshPosition(null,!0);var p=(0,Ee.vF)(e.quickPopup.element,e.parent.element);if(p.indexOf(e.parent.enableRtl?"left":"right")>-1&&(e.quickPopup.offsetX=-i.offsetWidth-10-e.quickPopup.element.offsetWidth,c&&!e.parent.enableRtl&&(e.quickPopup.offsetX=fa(h)+e.quickPopup.offsetX),e.quickPopup.dataBind(),e.quickPopup.refreshPosition(null,!0),(0,Ee.vF)(e.quickPopup.element,e.parent.element).indexOf("left")>-1&&(e.quickPopup.position={X:"center",Y:"center"},e.quickPopup.collision={X:"fit",Y:"fit"},e.quickPopup.offsetX=-e.quickPopup.element.offsetWidth/2,e.quickPopup.dataBind())),e.parent.virtualScrollModule&&!e.parent.virtualScrollModule.isHorizontalScroll&&(p.indexOf("top")>-1||p.indexOf("bottom")>-1)){var d=function(l){var i=getComputedStyle(l);return window.WebKitCSSMatrix?new WebKitCSSMatrix(i.webkitTransform).m42:0}(h);e.quickPopup.offsetY=d,e.quickPopup.dataBind()}}t&&e.applyEventColor(),e.quickPopup.element.style.display=o,e.quickPopup.dataBind(),e.quickPopup.show()}})},l.prototype.applyEventColor=function(){var e=this.parent.activeEventData.element.style["Agenda"===this.parent.currentView||"MonthAgenda"===this.parent.currentView?this.parent.enableRtl?"border-right-color":"border-left-color":"background-color"];if(""!==e){var t=this.quickPopup.element.querySelector("."+Tn),r=this.quickPopup.element.querySelector("."+wn);r&&r.offsetParent&&(t=this.quickPopup.element.querySelector("."+te))&&(t.style.borderLeftColor=e,e="rgba("+e.match(/\d+/g).join()+",0.3)"),t&&(t.style.backgroundColor=e)}},l.prototype.quickPopupOpen=function(){if(this.parent.isAdaptive)this.quickPopup.element.style.top="0px";else if(this.quickPopup.element.querySelector("."+mn)){var i=this.quickPopup.element.querySelector("."+te);i&&i.focus()}else{var e=this.quickPopup.element.querySelector("."+Qt);e&&e.focus();var t=this.quickPopup.element.querySelector("."+Ot);t&&t.focus()}},l.prototype.quickPopupClose=function(){this.parent.eventBase.focusElement(),this.quickPopup.relateTo=R,this.fieldValidator.destroyToolTip(),this.quickPopup.element.querySelectorAll(".e-formvalidator").length&&this.fieldValidator.destroy(),this.destroyPopupButtons("quickPopup"),Ie(this.quickPopup.element)},l.prototype.morePopupOpen=function(){if(this.parent.isAdaptive)return this.morePopup.element.style.top="0px",this.morePopup.element.style.left="0px",void(this.morePopup.element.style.height=(0,s.Ac)(window.innerHeight));this.morePopup.element.querySelector("."+Xt).focus(),this.morePopup.refreshPosition()},l.prototype.morePopupClose=function(){var i=this.parent.element.querySelector("."+Sn);i&&(0,s.Od)(i)},l.prototype.popupClose=function(i){this.dialogEvent=i,this.isCrudAction=!1,this.quickPopupHide(!0)},l.prototype.quickPopupHide=function(i){var e=this;if(this.quickPopup.element.classList.contains(re)){var r,t=this.quickPopup.element.querySelector("."+mn);if(t){var n=this.quickPopup.element.querySelector(".e-formvalidator");if(this.isCrudAction&&n&&!n.ej2_instances[0].validate())return;var a=this.parent.eventFields,o=this.parent.eventWindow.getObjectFromFormData(yt);this.parent.eventWindow.setDefaultValueToObject(o),o[a.id]=this.parent.eventBase.getEventMaxID(),o[a.startTime]=this.parent.activeCellsData.startTime,o[a.endTime]=this.parent.activeCellsData.endTime,o[a.isAllDay]=this.parent.activeCellsData.isAllDay,this.parent.resourceBase&&this.parent.resourceBase.setResourceValues(o),r=o}else r=this.parent.activeEventData.event;var c=this.quickPopup.element.querySelector("."+yn);this.parent.trigger(Nr,{event:this.dialogEvent,type:this.parent.isAdaptive?c?"ViewEventInfo":"EditEventInfo":"QuickInfo",cancel:!1,data:r,element:this.quickPopup.element,target:t?this.parent.activeCellsData.element:this.parent.activeEventData.element},function(p){if(!p.cancel&&e.quickPopup.element.classList.contains("e-popup-open")){if(t&&e.isCrudAction&&(e.parent.currentAction="Add",e.parent.crudModule.addEvent(p.data)),i){var u=e.quickPopup.hideAnimation;e.quickPopup.hideAnimation=null,e.quickPopup.hide(),e.quickPopup.hideAnimation=u}else e.quickPopup.hide();e.isMultipleEventSelect=!1,e.isCrudAction=!1}})}},l.prototype.navigationClick=function(i){var e=(0,s.oq)(i.target,"."+Et);if(!(0,s.le)(e)){var t=this.parent.getDateFromElement(i.currentTarget);(0,s.le)(t)||(this.closeClick(i),this.parent.setProperties({selectedDate:t},!0),this.parent.changeView(this.parent.getNavigateView(),i))}},l.prototype.documentClick=function(i){var e=i.event.target,t="."+yt+",."+ie+",."+U+",."+R+",."+P+",.e-popup",r=this.parent.element.querySelector("."+yt);(r&&r.childElementCount>0&&!(0,s.oq)(e,t)||!(0,s.oq)(e,t))&&(this.quickPopupHide(),this.parent.removeNewEventElement());var n=this.parent.element.querySelector("."+we);n&&n!==e&&this.parent.allowInline&&this.parent.inlineModule.documentClick(),(0,s.oq)(e,"."+P+",."+ie)&&this.parent.removeNewEventElement(),!(0,s.oq)(e,"."+tt)&&e.classList&&!e.classList.contains(Te)&&!(0,s.oq)(e,"."+re)&&!(0,s.oq)(e,"."+R)&&this.morePopup.hide()},l.prototype.onClosePopup=function(i){(0,s.le)(i)||(this.dialogEvent=i),this.quickPopupHide(),this.parent.eventBase.focusElement()},l.prototype.addEventListener=function(){this.parent.on(Ne,this.cellClick,this),this.parent.on(Lt,this.eventClick,this),this.parent.on(Xe,this.documentClick,this),this.parent.on(Ae,this.updateMoreEventContent,this)},l.prototype.removeEventListener=function(){this.parent.off(Ne,this.cellClick),this.parent.off(Lt,this.eventClick),this.parent.off(Xe,this.documentClick),this.parent.off(Ae,this.updateMoreEventContent)},l.prototype.destroyPopupButtons=function(i){for(var r=0,n=[].slice.call(("quickPopup"===i?this.quickPopup:this.morePopup).element.querySelectorAll(".e-control.e-btn"));r<n.length;r++){var o=n[r].ej2_instances[0];o&&o.destroy()}},l.prototype.refreshQuickDialog=function(){this.destroyQuickDialog(),this.renderQuickDialog()},l.prototype.refreshQuickPopup=function(){this.destroyQuickPopup(),this.renderQuickPopup()},l.prototype.refreshMorePopup=function(){this.destroyMorePopup(),this.renderMorePopup()},l.prototype.destroyQuickDialog=function(){this.quickDialog.element&&(this.quickDialog.destroy(),(0,s.Od)(this.quickDialog.element),this.quickDialog=null)},l.prototype.destroyQuickPopup=function(){this.quickPopup.element&&(this.destroyPopupButtons("quickPopup"),this.quickPopup.destroy(),(0,s.Od)(this.quickPopup.element),this.quickPopup=null)},l.prototype.destroyMorePopup=function(){this.morePopup.element&&(this.destroyPopupButtons("morePopup"),this.morePopup.destroy(),(0,s.Od)(this.morePopup.element),this.morePopup=null)},l.prototype.destroy=function(){this.quickPopup.element.querySelectorAll(".e-formvalidator").length&&this.fieldValidator.destroy(),this.removeEventListener(),this.destroyQuickPopup(),this.destroyMorePopup(),this.destroyQuickDialog(),this.dialogEvent=null,this.parent=null,this.l10n=null,this.isCrudAction=null,this.fieldValidator=null,this.isMultipleEventSelect=null},l}(),Yn=function(){function l(i){this.parent=i,this.tooltipObj=new Ee.u({animation:{close:{effect:"FadeOut"}},content:"No title",position:"BottomRight",offsetY:10,mouseTrail:!this.parent.isAdaptive,showTipPointer:!1,cssClass:this.parent.cssClass+" e-schedule-event-tooltip",target:this.getTargets(),beforeRender:this.onBeforeRender.bind(this),beforeClose:this.onBeforeClose.bind(this),enableRtl:this.parent.enableRtl}),this.tooltipObj.appendTo(this.parent.element)}return l.prototype.getTargets=function(){var i=[];return this.parent.activeViewOptions.group.headerTooltipTemplate&&i.push("."+Ve),this.parent.eventSettings.enableTooltip&&i.push("."+P),i.join(",")},l.prototype.onBeforeRender=function(i){if((0,s.le)(i.target.getAttribute("data-tooltip-id"))){if(i.target.classList.contains(Ve)&&this.parent.activeViewOptions.group.resources.length>0){var e=void 0;if(this.parent.activeView.isTimelineView()){var t=parseInt(i.target.getAttribute("data-group-index"),10);e=this.parent.resourceBase.lastResourceLevel[t]}else{var r=i.target.parentNode.sectionRowIndex,n=i.target.cellIndex;e=this.parent.activeView.getColumnLevels()[r][n]}var a={resource:e.resource,resourceData:e.resourceData},o=(0,s.az)("div"),c=this.parent.element.id+"_headerTooltipTemplate",h=[].slice.call(this.parent.getHeaderTooltipTemplate()(a,this.parent,"headerTooltipTemplate",c,!1));return(0,s.R3)(h,o),this.setContent(o),void this.parent.renderTemplates()}var p=this.parent.eventBase.getEventByGuid(i.target.getAttribute("data-guid"));if(!(0,s.le)(p)){if((0,s.le)(this.parent.eventSettings.tooltipTemplate)){var u=this.parent.globalize,d=this.parent.eventFields,v=new Date(""+p[d.startTime]),f=new Date(""+p[d.endTime]);f=0===f.getHours()&&0===f.getMinutes()?new Date(f.setMilliseconds(-1e3)):f;var g=C(new Date(""+v)),m=C(new Date(""+f)),y=p[d.subject]||this.parent.eventSettings.fields.subject.default||this.parent.localeObj.getConstant("addTitle"),w=(0,s.le)(p[d.location])?"":p[d.location],D="",b="",A="";D=u.formatDate(v,{type:"date",skeleton:"MMMd",calendar:this.parent.getCalendarMode()}),b=u.formatDate(v,{type:"date",skeleton:"medium",calendar:this.parent.getCalendarMode()}),A=u.formatDate(f,{type:"date",skeleton:"medium",calendar:this.parent.getCalendarMode()}),D=Y(D,"single"),b=Y(b,"single"),A=Y(A,"single");var E="short",S=u.formatDate(v,{type:"time",skeleton:E,calendar:this.parent.getCalendarMode()}),O=u.formatDate(f,{type:"time",skeleton:E,calendar:this.parent.getCalendarMode()}),k=void 0;k=g.getTime()===m.getTime()?Y(k=u.formatDate(v,{type:"date",skeleton:"long",calendar:this.parent.getCalendarMode()}),"single"):g.getFullYear()===m.getFullYear()?D+" - "+A:b+" - "+A;var M=p[d.isAllDay]?this.parent.localeObj.getConstant("allDay"):S+" - "+O;this.setContent('<div><div class="e-subject">'+y+'</div><div class="e-location">'+w+'</div><div class="e-details">'+k+'</div><div class="e-all-day">'+M+"</div></div>")}else o=(0,s.az)("div"),c=this.parent.element.id+"_tooltipTemplate",h=[].slice.call(this.parent.getEventTooltipTemplate()(p,this.parent,"tooltipTemplate",c,!1)),(0,s.R3)(h,o),this.setContent(o);this.parent.renderTemplates()}}},l.prototype.onBeforeClose=function(){this.parent.resetTemplates(["tooltipTemplate","headerTooltipTemplate"])},l.prototype.setContent=function(i){this.tooltipObj.setProperties({content:i},!0)},l.prototype.close=function(){this.tooltipObj.close()},l.prototype.destroy=function(){this.tooltipObj.destroy(),(0,s.cn)([this.parent.element],"e-control"),this.tooltipObj=null,this.parent=null},l}(),Cc=function(){var l=function(i,e){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])})(i,e)};return function(i,e){function t(){this.constructor=i}l(i,e),i.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}}(),xe=function(l,i,e,t){var a,r=arguments.length,n=r<3?i:null===t?t=Object.getOwnPropertyDescriptor(i,e):t;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(l,i,e,t);else for(var o=l.length-1;o>=0;o--)(a=l[o])&&(n=(r<3?a(n):r>3?a(i,e,n):a(i,e))||n);return r>3&&n&&Object.defineProperty(i,e,n),n},Ge="e-input-wrapper",_n="e-input-wrapper-side",Gn="e-repeat-element",Cr="e-repeat-interval",bs="e-interval",Ze="e-days",Sr="e-non-week",Er="e-year-expander",Os="e-year-expander-element",Zn="e-month-expander",Vs="e-month-expander-element",Ms="e-month-expander-checkbox-wrapper",Li="e-form-left",Ar="e-form-right",Rs="e-month-day",xs="e-month-expander-wrapper",ks="e-month-pos",Is="e-month-week",Kn="e-end-on",Ls="e-end-on-element",Qn="e-end-on-date",Hs="e-until-date",Xn="e-end-on-count",br="e-recurrence-count",Ke="e-hide-recurrence-element",xt="e-primary",qs="e-active",Fs="e-recurrence-table",Ns="e-repeat-content",Hi="none",Pi="daily",qi="weekly",Fi="monthly",Ni="yearly",ii="never",ri="until",ni="count",Or="text",Vr="value",_s="MONTHLY",ke=";",Zc={none:"",daily:"days",weekly:"weeks",monthly:"months",yearly:"years"},Mr={sun:"SU",mon:"MO",tue:"TU",wed:"WE",thu:"TH",fri:"FR",sat:"SA"},to=[Ze,Sr,Kn,bs,Er,Zn],Kc=[Sr],Qc=[Ze,Er],Xc=[Ze],Jc=[Ze,Sr,Er,Zn],io=[Qn,Xn],$c=[Qn],eh=[Xn],th=function(l){function i(e,t){var r=l.call(this,e,t)||this;return r.defaultLocale={none:"None",daily:"Daily",weekly:"Weekly",monthly:"Monthly",month:"Month",yearly:"Yearly",never:"Never",until:"Until",count:"Count",first:"First",second:"Second",third:"Third",fourth:"Fourth",last:"Last",repeat:"Repeat",repeatEvery:"Repeat every",on:"Repeat On",end:"End",onDay:"Day",days:"Day(s)",weeks:"Week(s)",months:"Month(s)",years:"Year(s)",every:"every",summaryTimes:"time(s)",summaryOn:"on",summaryUntil:"until",summaryRepeat:"Repeats",summaryDay:"day(s)",summaryWeek:"week(s)",summaryMonth:"month(s)",summaryYear:"year(s)",monthWeek:"Month Week",monthPosition:"Month Position",monthExpander:"Month Expander",yearExpander:"Year Expander",repeatInterval:"Repeat Interval"},r.renderStatus=!1,r.dayButtons=[],r.monthButtons=[],r}return Cc(i,l),i.prototype.startState=function(e,t,r){this.showFormElement(),this.updateForm(e),this.freshOnEndForm(),this.updateEndOnForm(t),this.selectMonthDay(r),this.updateUntilDate(r),this.onMonthDay.setProperties({checked:!0})},i.prototype.preRender=function(){this.localeObj=new s.E7(this.getModuleName(),this.defaultLocale,this.locale),this.calendarUtil=Nn(this.calendarMode)},i.prototype.applyCustomClass=function(e){e&&(0,s.cn)([this.element],e.split(" "))},i.prototype.initialize=function(){(0,s.cn)([this.element],"e-"+this.getModuleName()),this.renderComponent(),(0,s.le)(this.value)||""===this.value?((0,s.le)(this.repeatType.value)||(this.startState(this.repeatType.value.toString().toUpperCase(),ii,this.startDate),this.updateForm(this.repeatType.value.toString())),this.selectedType>0&&this.setProperties({value:this.getRecurrenceRule()},!1)):this.setRecurrenceRule(this.value),this.applyCustomClass(this.cssClass)},i.prototype.triggerChangeEvent=function(){var e=this;if(this.renderStatus){var t=this.getRecurrenceRule();this.trigger("change",{value:t},function(r){return e.setProperties({value:r.value},!1)})}},i.prototype.resetDayButton=function(){[].slice.call(this.element.querySelectorAll(".e-days button")).forEach(function(t){return(0,s.IV)([t],[qs,xt])})},i.prototype.daySelection=function(e){this.resetDayButton();var t=[0,1,2,3,4,5,6];this.rotateArray(t,this.firstDayOfWeek);var r=this.element.querySelector('.e-days button[data-index="'+t.indexOf(e)+'"]');r&&(0,s.cn)([r],[qs,xt])},i.prototype.rtlClass=function(e){e?(0,s.cn)([this.element],"e-rtl"):(0,s.IV)([this.element],"e-rtl")},i.prototype.updateUntilDate=function(e){var t=new Date(e.getTime());t.setDate(t.getDate()+60),this.untilDateObj.setProperties({value:t})},i.prototype.selectMonthDay=function(e){this.monthDate.setProperties({value:this.calendarUtil.getDate(e)}),this.monthWeekDays.setProperties({value:Mr[["sun","mon","tue","wed","thu","fri","sat"][e.getDay()]]}),this.monthValue.setProperties({value:""+this.calendarUtil.getMonth(e)}),this.monthWeekPos.setProperties({value:this.getDayPosition(e)}),this.daySelection(e.getDay())},i.prototype.updateForm=function(e){var t=this;this.repeatType.setProperties({value:e});var r=this.element.querySelector("."+Kn);switch(e===Pi?(0,s.s1)(r,[Li],[Ar]):(0,s.s1)(r,[Ar],[Li]),e){case Hi:to.forEach(function(n){return(0,s.cn)([t.element.querySelector("."+n)],Ke)});break;case qi:Kc.forEach(function(n){return(0,s.cn)([t.element.querySelector("."+n)],Ke)});break;case Fi:Qc.forEach(function(n){return(0,s.cn)([t.element.querySelector("."+n)],Ke)});break;case Ni:Xc.forEach(function(n){return(0,s.cn)([t.element.querySelector("."+n)],Ke)});break;case Pi:Jc.forEach(function(n){return(0,s.cn)([t.element.querySelector("."+n)],Ke)})}},i.prototype.updateEndOnForm=function(e){var t=this;switch(this.endType.setProperties({value:e}),e){case ii:io.forEach(function(r){return(0,s.cn)([t.element.querySelector("."+r)],Ke)});break;case ri:eh.forEach(function(r){return(0,s.cn)([t.element.querySelector("."+r)],Ke)});break;case ni:$c.forEach(function(r){return(0,s.cn)([t.element.querySelector("."+r)],Ke)})}},i.prototype.freshOnEndForm=function(){var e=this;io.forEach(function(t){var r=e.element.querySelector("."+t);r&&(0,s.IV)([r],Ke)})},i.prototype.showFormElement=function(){var e=this;to.forEach(function(t){var r=e.element.querySelector("."+t);r&&(0,s.IV)([r],Ke)})},i.prototype.renderDropdowns=function(){var e=this,t=this;this.repeatType=new Ct.NB({dataSource:this.getRepeatData(),floatLabelType:"Always",enableRtl:this.enableRtl,index:this.selectedType,fields:{text:Or,value:Vr},placeholder:this.localeObj.getConstant("repeat"),htmlAttributes:{title:this.localeObj.getConstant("repeat"),role:"option"},change:function(n){t.setProperties({selectedType:e.frequencies.indexOf(n.value)},!1),t.element.querySelector("."+Ns).innerHTML=t.localeObj.getConstant(Zc[n.value]),t.showFormElement(),t.updateForm(n.value),t.resetFormValues(),t.triggerChangeEvent()}}),this.repeatType.appendTo(this.element.querySelector("."+Gn)),this.endType=new Ct.NB({dataSource:this.getEndData(),popupWidth:this.getPopupWidth(),enableRtl:this.enableRtl,index:1,fields:{text:Or,value:Vr},htmlAttributes:{role:"option"},change:function(n){t.freshOnEndForm(),t.updateEndOnForm(n.value),t.resetFormValues(),t.triggerChangeEvent()}}),this.endType.appendTo(this.element.querySelector("."+Ls));var r=function(n){return new Ct.NB({dataSource:n,popupWidth:e.getPopupWidth(),enableRtl:e.enableRtl,fields:{text:Or,value:Vr},htmlAttributes:{role:"option"},index:1,change:function(a){t.onWeekDay.setProperties({checked:!0}),t.resetFormValues(),t.triggerChangeEvent()}})};this.monthWeekPos=r(this.getMonthPosData()),this.monthWeekPos.appendTo(this.element.querySelector("."+ks)),this.monthWeekDays=r(this.getDayData("wide")),this.monthWeekDays.appendTo(this.element.querySelector("."+Is)),this.monthValue=new Ct.NB({dataSource:this.getMonthData(),fields:{text:Or,value:Vr},htmlAttributes:{role:"option"},enableRtl:this.enableRtl,index:7,change:function(n){t.resetFormValues(),t.triggerChangeEvent()}}),this.monthValue.appendTo(this.element.querySelector("."+Os))},i.prototype.setDefaultValue=function(){for(var t=0,r=[].slice.call(this.element.querySelectorAll(".e-control .e-numerictextbox"));t<r.length;t++){var a=r[t].ej2_instances[0];a.element.classList.contains(Cr)?(a.value=1,a.dataBind()):a.element.classList.contains(br)&&(a.value=10,a.dataBind())}},i.prototype.resetFormValues=function(){for(var t=0,r=[].slice.call(this.element.querySelectorAll('.e-control [type="text"]'));t<r.length;t++){var n=r[t],a=void 0;if(n.classList.contains("e-datepicker"))(a=n.ej2_instances[0]).value?(a.value=a.value,a.dataBind()):this.updateUntilDate(this.startDate);else if(n.classList.contains("e-dropdownlist"))(a=n.ej2_instances[0]).index=a.index||0,a.dataBind();else if(n.classList.contains("e-numerictextbox")){var o;o=(a=n.ej2_instances[0]).element.classList.contains(Cr)?1:a.element.classList.contains(br)?10:this.startDate.getDate(),a.value=a.value||o,a.dataBind()}}},i.prototype.getPopupWidth=function(){return s.AR.isDevice?"100%":"auto"},i.prototype.renderDatePickers=function(){var e=this;this.untilDateObj=new qr.Mt({firstDayOfWeek:this.firstDayOfWeek,enableRtl:this.enableRtl,locale:this.locale,min:this.minDate,max:this.maxDate,format:(0,s.le)(this.dateFormat)?this.getFormat("dateFormats"):this.dateFormat,change:function(t){t.value&&e.triggerChangeEvent()}}),this.untilDateObj.appendTo(this.element.querySelector("."+Hs))},i.prototype.getFormat=function(e){return"en"===this.locale||"en-US"===this.locale?(0,s.NA)(e+".short",(0,s.bD)(this.getCalendarMode())):(0,s.NA)("main."+this.locale+".dates.calendars."+this.getCalendarMode()+"."+e+".short",s.qV)},i.prototype.dayButtonRender=function(){for(var e=this,t=[].slice.call(this.element.querySelectorAll(".e-days button")),r=this,n=0,a=t;n<a.length;n++){var o=a[n],c=new kt.zx({isToggle:!0,enableRtl:this.enableRtl},o);this.dayButtons.push(c),s.bi.add(o,"click",function(h){var p=[].slice.call(e.element.querySelectorAll(".e-days button."+xt)),u=h.target;u.classList.contains(xt)?p.length>1&&((0,s.IV)([u],xt),r.triggerChangeEvent()):((0,s.cn)([u],xt),r.triggerChangeEvent())})}},i.prototype.radioButtonRender=function(){var e=this;this.onMonthDay=new kt.EU({label:this.localeObj.getConstant("onDay"),enableRtl:this.enableRtl,name:"monthType",value:"day",change:function(){e.resetFormValues(),e.triggerChangeEvent()}}),this.onMonthDay.appendTo(this.element.querySelector("."+Vs)),this.monthButtons.push(this.onMonthDay),this.onWeekDay=new kt.EU({label:this.localeObj.getConstant("monthExpander"),cssClass:"e-month-type",name:"monthType",enableRtl:this.enableRtl,value:"daypos",change:function(){e.resetFormValues(),e.triggerChangeEvent()}}),this.onWeekDay.appendTo(this.element.querySelector("."+xs)),this.monthButtons.push(this.onWeekDay)},i.prototype.numericTextboxRender=function(){var e=this;this.recurrenceCount=new It.No({value:10,format:"#",enableRtl:this.enableRtl,min:1,max:999,change:function(){e.triggerChangeEvent()}}),this.recurrenceCount.appendTo(this.element.querySelector("."+br)),this.monthDate=new It.No({value:1,format:"#",enableRtl:this.enableRtl,min:1,max:31,change:function(){e.onMonthDay.setProperties({checked:!0}),e.triggerChangeEvent()}}),this.monthDate.appendTo(this.element.querySelector("."+Rs)),this.repeatInterval=new It.No({value:1,format:"#",min:1,max:999,enableRtl:this.enableRtl,floatLabelType:"Always",placeholder:this.localeObj.getConstant("repeatEvery"),change:function(){e.triggerChangeEvent()}}),this.repeatInterval.appendTo(this.element.querySelector("."+Cr))},i.prototype.renderComponent=function(){this.setTemplate(),this.renderDropdowns(),this.renderDatePickers(),this.dayButtonRender(),this.radioButtonRender(),this.numericTextboxRender()},i.prototype.rotateArray=function(e,t){for(var r,n=0;n<t;n++)r=e.shift(),e.push(r)},i.prototype.getEndData=function(){var t=this,r=[];return[ii,ri,ni].forEach(function(n){r.push({text:t.localeObj.getConstant(n),value:n})}),r},i.prototype.getDayPosition=function(e){var t=new Date(e.getTime()),r=new Date(e.getTime()),n=e.getDay(),a=[];for(t=this.calendarUtil.getMonthStartDate(t),r=this.calendarUtil.getMonthEndDate(r);t<r;)t.getDay()===n&&a.push(t.getTime()),t.setDate(t.getDate()+1);return a.indexOf(e.getTime())===a.length-1?-1:a.indexOf(e.getTime())+1},i.prototype.getRepeatData=function(){var e=[],t=this;return this.frequencies.forEach(function(r){e.push({text:t.localeObj.getConstant(r===Hi?ii:r),value:r})}),e},i.prototype.getMonthPosData=function(){var t={first:1,second:2,third:3,fourth:4,last:-1},r=this,n=[];return["first","second","third","fourth","last"].forEach(function(a){n.push({text:r.localeObj.getConstant(a),value:t[a]})}),n},i.prototype.getDayData=function(e){var n,t=["sun","mon","tue","wed","thu","fri","sat"],r=[];if(this.rotateArray(t,this.firstDayOfWeek),"en"===this.locale||"en-US"===this.locale)n=(0,s.NA)((a="days.stand-alone.")+e,(0,s.bD)(this.getCalendarMode()));else{var a="main."+this.locale+".dates.calendars."+this.getCalendarMode()+".days.stand-alone."+e;n=(0,s.NA)(a,s.qV)}for(var o=0,c=t;o<c.length;o++){var h=c[o],p=(0,s.NA)(h,n);r.push({text:"narrow"===e?p:Y(p,"single"),value:Mr[h]})}return r},i.prototype.getMonthData=function(){var t,e=[];if("en"===this.locale||"en-US"===this.locale)t=(0,s.NA)(r="months.stand-alone.wide",(0,s.bD)(this.getCalendarMode()));else{var r="main."+this.locale+".dates.calendars."+this.getCalendarMode()+".months.stand-alone.wide";t=(0,s.NA)(r,s.qV)}for(var n=0,a=Object.keys(t);n<a.length;n++){var o=a[n];e.push({text:Y((0,s.NA)(o,t),"single"),value:o})}return e},i.prototype.setTemplate=function(){var e=this.getDayData("narrow"),t=this.getDayData("wide");this.element.innerHTML='<div class="e-editor"><div class="'+Ge+" "+Li+'"><input type="text" tabindex="0" class="'+Gn+'"label="'+Gn.substr(2)+'" /></div><div class="'+Ge+" "+bs+" "+Ar+'"><table  class="'+Fs+' e-repeat-content-wrapper"><tr><td><input type="text" tabindex="0" class="'+Cr+'"title="'+this.localeObj.getConstant("repeatEvery")+'" /></td><td><span class="'+Ns+'"></span></td></tr></table></div><div class="'+_n+" "+Ze+" "+Li+'"><div class=e-week-expander-label>'+this.localeObj.getConstant("on")+'</div><button type="button" class="e-round" data-index="0" title="'+t[0].text+'">'+e[0].text+'</button><button type="button" class="e-round" data-index="1" title="'+t[1].text+'">'+e[1].text+'</button><button type="button" class="e-round" data-index="2" title="'+t[2].text+'">'+e[2].text+'</button><button type="button" class="e-round" data-index="3" title="'+t[3].text+'">'+e[3].text+'</button><button type="button" class="e-round" data-index="4" title="'+t[4].text+'">'+e[4].text+'</button><button type="button" class="e-round" data-index="5" title="'+t[5].text+'">'+e[5].text+'</button><button type="button" class="e-round" data-index="6" title="'+t[6].text+'">'+e[6].text+'</button></div><div class="'+_n+" "+Sr+" "+Li+'"><div class=e-month-expander-label>'+this.localeObj.getConstant("on")+'</div><div class="'+Er+'"><input class="'+Os+'" type="text" tabindex="0" title="'+this.localeObj.getConstant("yearExpander")+'"/></div><div class="'+Zn+'"><table class="'+Fs+' e-month-expand-wrapper"><tr><td><div class="'+Ge+" "+Ms+'"><input class="'+Vs+'"title="'+this.localeObj.getConstant("monthExpander")+'" type="radio"></div></td><td colspan="2"><div class="'+Ge+' e-monthday-element"><input type="text" tabindex="0" class="'+Rs+'"title="'+this.localeObj.getConstant("on")+'" /></div></td></tr><tr><td><div class="'+Ge+" "+Ms+'" style="min-width: 30px;margin-bottom:18px;"><input class="'+xs+'"title="'+this.localeObj.getConstant("monthExpander")+'" type="radio"></div></td><td><div class="'+Ge+' e-week-position" ><input type="text" tabindex="0" class="'+ks+'"title="'+this.localeObj.getConstant("monthPosition")+'" /></div></td><td><div class="'+Ge+' e-day-position"><input type="text" tabindex="0" class="'+Is+'"title="'+this.localeObj.getConstant("monthWeek")+'" /></div></td></tr></table></div></div><div class="'+_n+" "+Kn+" "+Ar+'"><div class=e-end-on-label>'+this.localeObj.getConstant("end")+'</div><div class="'+Ge+' e-end-on-left"><input type="text" tabindex="0" class="'+Ls+'"title="'+this.localeObj.getConstant("end")+'" /></div><div class="'+Ge+" "+Qn+'" ><input type="text" tabindex="0" class="'+Hs+'"title="'+this.localeObj.getConstant(ri)+'" /></div><div class="'+Ge+" "+Xn+'"><input type="text" tabindex="0" class="'+br+'"title="'+this.localeObj.getConstant(ni)+'" /></div></div></div></div>'},i.prototype.getSelectedDaysData=function(){var e="BYDAY=",t=[].slice.call(this.element.querySelectorAll(".e-days button."+xt)),r=["SU","MO","TU","WE","TH","FR","SA"];this.rotateArray(r,this.firstDayOfWeek);for(var n=0;n<t.length;n++)e+=r[parseInt(t[n].getAttribute("data-index"),10)]+(n===t.length-1?"":",");return e+ke},i.prototype.getSelectedMonthData=function(){return this.onWeekDay.checked?"BYDAY="+this.monthWeekDays.value+";BYSETPOS="+this.monthWeekPos.value+ke:"BYMONTHDAY="+this.monthDate.value+ke},i.prototype.getIntervalData=function(){return"INTERVAL="+this.repeatInterval.value+ke},i.prototype.getEndOnCount=function(){return"COUNT="+this.recurrenceCount.value+ke},i.prototype.getYearMonthRuleData=function(){return"BYMONTH="+this.monthValue.value+ke},i.prototype.updateWeekButton=function(e){var t=["SU","MO","TU","WE","TH","FR","SA"];this.rotateArray(t,this.firstDayOfWeek);for(var r=0,n=this.dayButtons;r<n.length;r++){var a=n[r],o=parseInt(a.element.getAttribute("data-index"),10);-1!==e.indexOf(t[o])?a.setProperties({isPrimary:!0}):a.setProperties({isPrimary:!1})}},i.prototype.updateMonthUI=function(){if(this.ruleObject.monthDay.length)this.monthDate.setProperties({value:this.ruleObject.monthDay[0]}),this.onMonthDay.setProperties({checked:!0});else{this.onWeekDay.setProperties({checked:!0}),this.monthWeekPos.setProperties({value:this.ruleObject.setPosition});for(var e=0,t=Object.keys(Mr);e<t.length;e++)if(Mr[t[e]]===this.ruleObject.day[0]){this.monthWeekDays.setProperties({value:this.ruleObject.day[0]});break}}},i.prototype.updateUI=function(e,t){switch(this.repeatInterval.setProperties({value:this.ruleObject.interval}),t){case ri:this.untilDateObj.setProperties({value:this.ruleObject.until});break;case ni:this.recurrenceCount.setProperties({value:this.ruleObject.count})}switch(e){case qi:this.updateWeekButton(this.ruleObject.day);break;case Ni:this.monthValue.setProperties({index:this.ruleObject.month[0]-1}),this.updateMonthUI();break;case Fi:this.updateMonthUI()}},i.prototype.getUntilData=function(){return this.untilDateObj.value?"UNTIL="+nt(this.untilDateObj.value)+ke:""},i.prototype.destroyComponents=function(){this.recurrenceCount.isDestroyed||(this.recurrenceCount.destroy(),this.recurrenceCount=null),this.monthDate.isDestroyed||(this.monthDate.destroy(),this.monthDate=null),this.repeatInterval.isDestroyed||(this.repeatInterval.destroy(),this.repeatInterval=null),this.untilDateObj.isDestroyed||(this.untilDateObj.destroy(),this.untilDateObj=null),this.repeatType.isDestroyed||(this.repeatType.destroy(),this.repeatType=null),this.endType.isDestroyed||(this.endType.destroy(),this.endType=null),this.monthWeekPos.isDestroyed||(this.monthWeekPos.destroy(),this.monthWeekPos=null),this.monthWeekDays.isDestroyed||(this.monthWeekDays.destroy(),this.monthWeekDays=null),this.monthValue.isDestroyed||(this.monthValue.destroy(),this.monthValue=null),this.onMonthDay.isDestroyed||(this.onMonthDay.destroy(),this.onMonthDay=null),this.onWeekDay.isDestroyed||(this.onWeekDay.destroy(),this.onWeekDay=null),this.dayButtons.forEach(function(e){e.isDestroyed||e.destroy()}),this.dayButtons=[],this.monthButtons.forEach(function(e){e.isDestroyed||e.destroy()}),this.monthButtons=[]},i.prototype.resetFields=function(){this.startState(Hi,ii,this.startDate),this.setDefaultValue()},i.prototype.updateRuleUntilDate=function(e){if(this.untilDateObj.value&&e){var t=this.untilDateObj.value,r=new Date(t.getFullYear(),t.getMonth(),t.getDate(),e.getHours(),e.getMinutes(),e.getMilliseconds());this.untilDateObj.setProperties({value:r})}},i.prototype.getCalendarMode=function(){return this.calendarMode.toLowerCase()},i.prototype.getRuleSummary=function(e){return void 0===e&&(e=this.getRecurrenceRule()),function(l,i,e,t){void 0===t&&(t="Gregorian");var a,o,r=Fn(l),n=i.getConstant("every")+" ",c=t.toLowerCase();if("en"===e||"en-US"===e){var p="days.stand-alone.abbreviated";o=(0,s.NA)("months.stand-alone.abbreviated",(0,s.bD)(c)),a=(0,s.NA)(p,(0,s.bD)(c))}else p="main."+e+".dates.calendars."+c+".days.stand-alone.abbreviated",o=(0,s.NA)("main."+e+".dates.calendars."+c+".months.stand-alone.abbreviated",s.qV),a=(0,s.NA)(p,s.qV);switch(r.interval>1&&(n+=r.interval+" "),r.freq){case"DAILY":n+=i.getConstant("summaryDay");break;case"WEEKLY":n+=i.getConstant("summaryWeek")+" "+i.getConstant(Wn)+" ",r.day.forEach(function(d,v){n+=Y((0,s.NA)(Ds[d],a),"single"),n+=r.day.length-1===v?"":", "});break;case"MONTHLY":n+=i.getConstant("summaryMonth")+" "+i.getConstant(Wn)+" ",n+=ps(r,a,i);break;case"YEARLY":n+=i.getConstant("summaryYear")+" "+i.getConstant(Wn)+" ",n+=Y((0,s.NA)(r.month[0].toString(),o),"single")+" ",n+=ps(r,a,i)}if(r.count)n+=", "+r.count+" "+i.getConstant("summaryTimes");else if(r.until){var u=r.until;n+=", "+i.getConstant("summaryUntil")+" "+u.getDate()+" "+Y((0,s.NA)((u.getMonth()+1).toString(),o),"single")+" "+u.getFullYear()}return n}(e,this.localeObj,this.locale,this.calendarMode)},i.prototype.getRecurrenceDates=function(e,t,r,n,a){return a=(0,s.le)(a)?this.startDate:a,kn(e,t,r,this.firstDayOfWeek,n,a,this.calendarMode)},i.prototype.getRecurrenceRule=function(){var e="FREQ=";switch(this.repeatType.value){case Pi:e+="DAILY;";break;case qi:e+="WEEKLY;"+this.getSelectedDaysData();break;case Fi:e+=_s+ke+this.getSelectedMonthData();break;case Ni:e+="YEARLY;"+this.getSelectedMonthData()+this.getYearMonthRuleData();break;case Hi:return""}switch(e+=this.getIntervalData(),this.endType.value){case ri:e+=this.getUntilData();break;case ni:e+=this.getEndOnCount()}return e},i.prototype.setRecurrenceRule=function(e,t){if(void 0===t&&(t=this.startDate),e){this.renderStatus=!1,this.ruleObject=Fn(e);var r=this.ruleObject.count?ni:this.ruleObject.until?ri:ii;switch(this.ruleObject.freq){case"DAILY":this.startState(Pi,r,t),this.updateUI(Pi,r);break;case"WEEKLY":this.startState(qi,r,t),this.updateUI(qi,r);break;case _s:this.startState(Fi,r,t),this.updateUI(Fi,r);break;case"YEARLY":this.startState(Ni,r,t),this.updateUI(Ni,r)}this.renderStatus=!0,this.triggerChangeEvent()}else this.repeatType.setProperties({value:Hi})},i.prototype.detachInputs=function(){for(var t=0,r=[].slice.call(this.element.querySelectorAll("input"));t<r.length;t++)(0,s.og)(r[t])},i.prototype.destroy=function(){if(!this.isDestroyed){this.destroyComponents(),l.prototype.destroy.call(this);var e=["e-"+this.getModuleName()];for(this.cssClass&&(e=e.concat(this.cssClass.split(" "))),(0,s.IV)([this.element],e),this.detachInputs();this.element.firstElementChild;)this.element.removeChild(this.element.firstElementChild)}},i.prototype.getModuleName=function(){return"recurrenceeditor"},i.prototype.getPersistData=function(){return this.addOnPersist([])},i.prototype.render=function(){this.initialize(),this.rtlClass(this.enableRtl),this.renderStatus=!0,this.renderComplete()},i.prototype.onPropertyChanged=function(e,t){for(var r=0,n=Object.keys(e);r<n.length;r++)switch(n[r]){case"startDate":this.selectMonthDay(e.startDate),this.updateUntilDate(e.startDate),this.endType.setProperties({index:0});break;case"enableRtl":this.rtlClass(e.enableRtl);break;case"cssClass":t.cssClass&&(0,s.IV)([this.element],t.cssClass.split(" ")),e.cssClass&&(0,s.cn)([this.element],e.cssClass.split(" "));break;case"selectedType":this.repeatType.setProperties({index:this.selectedType});break;case"minDate":this.untilDateObj.setProperties({minDate:this.minDate});break;case"maxDate":this.untilDateObj.setProperties({maxDate:this.maxDate});break;case"value":this.getRecurrenceRule()!==this.value&&this.setRecurrenceRule(this.value);break;case"calendarMode":this.calendarMode=e.calendarMode,this.calendarUtil=Nn(e.calendarMode);break;case"locale":case"frequencies":case"firstDayOfWeek":this.refresh();break;case"dateFormat":this.untilDateObj.setProperties({format:e.dateFormat})}},xe([(0,s.Z9)(["none","daily","weekly","monthly","yearly"])],i.prototype,"frequencies",void 0),xe([(0,s.Z9)(0)],i.prototype,"firstDayOfWeek",void 0),xe([(0,s.Z9)(new Date)],i.prototype,"startDate",void 0),xe([(0,s.Z9)()],i.prototype,"dateFormat",void 0),xe([(0,s.Z9)("Gregorian")],i.prototype,"calendarMode",void 0),xe([(0,s.Z9)()],i.prototype,"cssClass",void 0),xe([(0,s.Z9)()],i.prototype,"value",void 0),xe([(0,s.Z9)(new Date(1900,0,1))],i.prototype,"minDate",void 0),xe([(0,s.Z9)(new Date(2099,11,31))],i.prototype,"maxDate",void 0),xe([(0,s.Z9)(0)],i.prototype,"selectedType",void 0),xe([(0,s.ju)()],i.prototype,"change",void 0),xe([s.Zl],i)}(s.wA),st="e-field",Bi="e-recurrence-container",ai="e-hide",ro=function(){function l(i){this.parent=i,this.l10n=this.parent.localeObj,this.fields=this.parent.eventFields,this.eventWindowTime={startTime:new Date,endTime:new Date},this.renderEventWindow()}return l.prototype.renderEventWindow=function(){this.element=(0,s.az)("div",{id:this.parent.element.id+"_dialog_wrapper"}),this.parent.element.appendChild(this.element);var i={animationSettings:{effect:"Zoom"},content:this.getEventWindowContent(),cssClass:it,enableRtl:this.parent.enableRtl,height:this.parent.isAdaptive?"100%":"auto",minHeight:"300px",isModal:!0,showCloseIcon:!this.parent.isAdaptive,target:document.body,visible:!1,width:"500px",beforeOpen:this.onBeforeOpen.bind(this),beforeClose:this.onBeforeClose.bind(this)};this.parent.isAdaptive?(i.cssClass=it+" "+Nt,i.header='<div class="e-title-header"><div class="e-back-icon e-icons"></div><div class="e-title-text">'+this.l10n.getConstant("newEvent")+'</div><div class="e-save-icon e-icons"></div></div>'):(i.buttons=[{buttonModel:{content:this.l10n.getConstant("deleteButton"),cssClass:et,disabled:!this.parent.eventSettings.allowDeleting||this.parent.readonly},click:this.eventDelete.bind(this)},{buttonModel:{content:this.l10n.getConstant("saveButton"),cssClass:"e-primary "+dr,isPrimary:!0,disabled:!this.parent.eventSettings.allowAdding||this.parent.readonly},click:this.eventSave.bind(this)},{buttonModel:{cssClass:ja,content:this.l10n.getConstant("cancelButton")},click:this.dialogClose.bind(this)}],i.header='<div class="e-title-text">'+this.l10n.getConstant("newEvent")+"</div>"),this.dialogObject=new Ee.Vq(i,this.element),this.dialogObject.element.querySelector(".e-dlg-closeicon-btn")&&this.dialogObject.element.querySelector(".e-dlg-closeicon-btn").setAttribute("title",this.l10n.getConstant("close")),(0,s.cn)([this.element.parentElement],it+"-container"),this.parent.isAdaptive&&(s.bi.add(this.element.querySelector(".e-back-icon"),"click",this.dialogClose,this),s.bi.add(this.element.querySelector("."+za),"click",this.eventSave,this)),s.bi.add(this.dialogObject.element,"keydown",this.preventEventSave,this),this.applyFormValidation()},l.prototype.refresh=function(){this.destroy(!0),this.renderEventWindow()},l.prototype.refreshRecurrenceEditor=function(){if(this.recurrenceEditor){var i=this.recurrenceEditor.element;this.recurrenceEditor.destroy(),this.createRecurrenceEditor(i)}},l.prototype.setRecurrenceEditor=function(i){this.parent.editorTemplate&&(this.recurrenceEditor=i)},l.prototype.openEditor=function(i,e,t,r){if(this.parent.currentAction=e,this.parent.removeNewEventElement(),this.parent.quickPopup&&this.parent.quickPopup.quickPopupHide(!0),this.parent.inlineModule.removeInlineAppointmentElement(),"Add"===e){var n={};this.cellClickAction=!t,this.parent.activeCellsData=i;var a=i;this.cellClickAction?this.convertToEventData(a,n):(this.parent.activeCellsData={startTime:a.startTime||a[this.fields.startTime],endTime:a.endTime||a[this.fields.endTime],isAllDay:a.isAllDay||a[this.fields.isAllDay],element:a.element,groupIndex:a.groupIndex},n=a),i=n}switch((0,s.le)(this.parent.editorTemplate)||this.renderFormElements(this.element.querySelector(".e-schedule-form"),i),!this.parent.isAdaptive&&(0,s.le)(this.parent.editorTemplate)&&(0,s.IV)([this.dialogObject.element.querySelector(".e-recurrenceeditor")],j),this.recurrenceEditor&&(this.recurrenceEditor.firstDayOfWeek=this.parent.activeViewOptions.firstDayOfWeek),e){case"Add":this.onCellDetailsUpdate(i,r);break;case"Save":case"EditOccurrence":case"EditSeries":case"EditFollowingEvents":"EditOccurrence"===e&&!this.parent.isAdaptive&&(0,s.le)(this.parent.editorTemplate)&&(0,s.cn)([this.dialogObject.element.querySelector(".e-recurrenceeditor")],j),this.cellClickAction=!1,this.onEventDetailsUpdate(i)}},l.prototype.setDialogContent=function(){this.dialogObject.content=this.getEventWindowContent(),this.dialogObject.dataBind(),this.applyFormValidation()},l.prototype.preventEventSave=function(i){this.parent&&!this.parent.allowKeyboardInteraction&&"Enter"===i.code&&(this.isEnterKey=!0)},l.prototype.onBeforeOpen=function(i){var e=this,t={type:"Editor",data:this.eventData,cancel:!1,element:this.element,target:this.cellClickAction?this.parent.activeCellsData.element:this.parent.activeEventData.element};this.cellClickAction&&(t.duration=this.getSlotDuration());var r=this.getInstance(dr);r&&(r.disabled=!(this.cellClickAction?this.parent.eventSettings.allowAdding:this.parent.eventSettings.allowEditing),r.dataBind());var n=this.getInstance(et);n&&(n.disabled=!this.parent.eventSettings.allowDeleting,n.dataBind());var a=new J.BH;return this.parent.trigger(Yi,t,function(o){if(i.cancel=o.cancel,e.duration=e.cellClickAction?o.duration:null,e.refreshDateTimePicker(e.duration),e.cellClickAction&&o.duration!==e.getSlotDuration()&&(0,s.le)(e.parent.editorTemplate)){var c=e.getInstance(rt),h=e.getInstance(mt);h.value=new Date(c.value.getTime()+oe*o.duration),h.dataBind()}e.parent.editorTemplate&&e.element.querySelector(".e-recurrenceeditor")&&!e.recurrenceEditor&&(e.recurrenceEditor=e.getInstance("e-recurrenceeditor")),a.resolve(i)}),a},l.prototype.onBeforeClose=function(i){var e=this;i.isInteracted&&(this.isCrudAction=!1);var t={type:"Editor",event:i.event||this.dialogEvent,data:this.eventCrudData,cancel:!1,element:this.element,target:this.cellClickAction?this.parent.activeCellsData.element:this.parent.activeEventData.element},r=new J.BH;return this.parent.trigger(Nr,t,function(n){i.cancel=n.cancel,n.cancel||(e.isCrudAction&&(i.cancel=e.processCrudActions(n.data),e.isCrudAction=i.cancel),e.isCrudAction||(e.resetForm(),e.parent.eventBase.focusElement(!0),e.eventCrudData=null)),r.resolve(i)}),r},l.prototype.getEventWindowContent=function(){var i=(0,s.az)("div",{className:"e-form-container"}),e=(0,s.az)("form",{id:this.parent.element.id+"EditForm",className:vt,attrs:{onsubmit:"return false;"}});return this.renderFormElements(e),i.appendChild(e),i},l.prototype.renderFormElements=function(i,e){if((0,s.le)(this.parent.editorTemplate))i.appendChild(this.getDefaultEventWindowContent());else{if(e){this.recurrenceEditor&&(this.recurrenceEditor.destroy(),this.recurrenceEditor=null),this.destroyComponents();for(var r=0,n=[].slice.call(i.children);r<n.length;r++)(0,s.Od)(n[r])}var o=this.parent.element.id+"_editorTemplate",c=[].slice.call(this.parent.getEditorTemplate()(e||{},this.parent,"editorTemplate",o,!1));(0,s.R3)(c,i),this.parent.renderTemplates(),this.applyFormValidation()}},l.prototype.getDefaultEventWindowContent=function(){var i=this.createDivElement("e-dialog-parent"),e=this.createDivElement("e-title-location-row");i.appendChild(e),e.appendChild(this.renderTextBox(te)),e.querySelector("."+te).setAttribute("title",this.parent.editorTitles.subject),e.appendChild(this.renderTextBox(gt)),e.querySelector("."+gt).setAttribute("title",this.parent.editorTitles.location);var t=this.createDivElement("e-start-end-row");i.appendChild(t),t.appendChild(this.renderDateTimePicker(rt,this.onTimeChange.bind(this))),t.querySelector("."+rt).setAttribute("title",this.parent.editorTitles.startTime),t.appendChild(this.renderDateTimePicker(mt)),t.querySelector("."+mt).setAttribute("title",this.parent.editorTitles.endTime);var r=this.createDivElement("e-all-day-time-zone-row");i.appendChild(r),r.appendChild(this.renderCheckBox(Ci)),r.appendChild(this.renderCheckBox(ft));var n=this.createDivElement(Ei);i.appendChild(n),n.appendChild(this.renderDropDown(Ai)),n.appendChild(this.renderDropDown(bi));var a=this.createDivElement("e-repeat-parent-row");i.appendChild(a);var o=this.renderCheckBox(Si),c=(0,s.az)("span",{className:Bi}),h=(0,s.az)("button",{className:"e-recurrence-edit-button",attrs:{type:"button",title:this.l10n.getConstant("editRecurrence")}});if(this.buttonObj=new kt.zx({iconCss:"e-recurrence-edit e-icons",cssClass:"e-medium "+this.parent.cssClass}),c.appendChild(h),this.buttonObj.appendTo(h),o.appendChild(c),a.appendChild(o),this.parent.isAdaptive?s.bi.add(h,"click",this.loadRecurrenceEditor,this):this.createRecurrenceEditor(i),this.parent.resourceCollection.length>0){for(var p=this.createDivElement("e-resources-row"),u=0,d=this.parent.resourceBase.resourceCollection;u<d.length;u++)p.appendChild(this.renderResourceDetails(d[u]));i.appendChild(p)}var f=this.createDivElement(bt+"-row");f.appendChild(this.renderTextBox(bt)),f.querySelector("."+bt).setAttribute("title",this.parent.editorTitles.description),i.appendChild(f);var g=(0,s.az)("button",{attrs:{type:"hidden",title:"submit",style:"display:none"}});return i.appendChild(g),i},l.prototype.createRecurrenceEditor=function(i){var e=this.createDivElement();i.appendChild(e),this.recurrenceEditor=this.renderRecurrenceEditor(),this.recurrenceEditor.appendTo(e),this.updateMinMaxDateToEditor()},l.prototype.createDivElement=function(i){return(0,s.az)("div",{className:i})},l.prototype.createInputElement=function(i,e,t){return(0,s.az)(t||"input",{className:i,attrs:{type:"text",name:e,value:"",id:e,title:""===this.l10n.getConstant(e.charAt(0).toLowerCase()+e.slice(1))?e:this.l10n.getConstant(e.charAt(0).toLowerCase()+e.slice(1))}})},l.prototype.getSlotDuration=function(){return this.parent.activeViewOptions.timeScale.interval/this.parent.activeViewOptions.timeScale.slotCount},l.prototype.renderDateTimePicker=function(i,e){var t=this.createDivElement(i+"-container"),r=this.getFieldName(i),n=this.createInputElement(i+" "+st,r);return t.appendChild(n),new qr.xZ({change:e,firstDayOfWeek:this.parent.activeViewOptions.firstDayOfWeek,calendarMode:this.parent.calendarMode,min:this.parent.minDate,max:new Date(new Date(+this.parent.maxDate).setHours(23,59,59)),cssClass:this.parent.cssClass,enableRtl:this.parent.enableRtl,locale:this.parent.locale,floatLabelType:"Always",timeFormat:this.parent.activeViewOptions.timeFormat,format:((0,s.le)(this.parent.dateFormat)?this.getFormat("dateFormats"):this.parent.dateFormat)+" "+this.parent.activeViewOptions.timeFormat,placeholder:this.getFieldLabel(i),step:this.getSlotDuration(),width:"100%"}).appendTo(n),t},l.prototype.refreshDateTimePicker=function(i){for(var r=0,n=[].slice.call(this.element.querySelectorAll(".e-start,.e-end"));r<n.length;r++){var o=n[r].ej2_instances[0];o.firstDayOfWeek=this.parent.activeViewOptions.firstDayOfWeek,o.timeFormat=this.parent.activeViewOptions.timeFormat,o.step=i||this.getSlotDuration(),o.dataBind()}},l.prototype.onTimeChange=function(){var i=this.getInstance(rt);if(i.element.parentElement.classList.contains("e-input-focus")){var e=this.getInstance(mt),t=0;this.cellClickAction?(t=oe*this.duration,this.eventWindowTime.startTime=i.value):t=this.eventData[this.fields.endTime].getTime()-this.eventData[this.fields.startTime].getTime();var r=(0,s.le)(i.value)?null:new Date(i.value.getTime()+t);this.cellClickAction&&(this.eventWindowTime.endTime=r),e.value=r,e.dataBind()}this.recurrenceEditor&&this.recurrenceEditor.updateRuleUntilDate(this.eventWindowTime.startTime)},l.prototype.renderResourceDetails=function(i){var e=i.field,t="e-"+e,r=i.title,n=this.createDivElement(t+"-container e-resources"),a=this.createInputElement(t+" "+st,e);n.appendChild(a);var o='<div class="e-resource-template"><div class="e-resource-color" style="background-color:${'+i.colorField+'}"></div><div class="e-resource-text">${'+i.textField+"}</div></div>";return i.allowMultiple?new Ct.NU({enableRtl:this.parent.enableRtl,cssClass:this.parent.cssClass||"",dataSource:i.dataSource,change:this.onMultiselectResourceChange.bind(this),itemTemplate:o,fields:{text:i.textField,value:i.idField},htmlAttributes:{title:r,name:e},floatLabelType:"Always",placeholder:r,popupHeight:"230px",popupWidth:"447px",mode:"Box"}).appendTo(a):new Ct.NB({cssClass:this.parent.cssClass||"",change:this.onDropdownResourceChange.bind(this),dataSource:i.dataSource,enableRtl:this.parent.enableRtl,fields:{text:i.textField,value:i.idField},htmlAttributes:{title:r,name:e},floatLabelType:"Always",placeholder:r,popupHeight:"230px",popupWidth:"447px",itemTemplate:o}).appendTo(a),n},l.prototype.renderDropDown=function(i){var e=this,t=this.getFieldName(i),r=this.createDivElement(i+"-container"),n=this.createInputElement(i+" "+st,t);return r.appendChild(n),new Ct.NB({allowFiltering:!0,change:this.onTimezoneChange.bind(this),cssClass:this.parent.cssClass||"",dataSource:this.parent.timezoneDataSource,enableRtl:this.parent.enableRtl,fields:{text:"Text",value:"Value"},filterBarPlaceholder:this.parent.localeObj.getConstant("searchTimezone"),noRecordsTemplate:this.parent.localeObj.getConstant("noRecords"),filtering:function(o){var c=new J.AE;c=""!==o.text?c.where("Text","contains",o.text,!0):c,o.updateData(e.parent.timezoneDataSource,c)},htmlAttributes:{title:this.getFieldLabel(i),name:t,role:"option"},floatLabelType:"Always",placeholder:this.getFieldLabel(i),popupHeight:"230px"}).appendTo(n),r},l.prototype.onMultiselectResourceChange=function(i){if(i.value&&this.parent.activeViewOptions.group.byGroupID&&!(this.parent.resourceCollection.length<=1))for(var e=this.parent.resourceBase.resourceCollection,t=i.element.getAttribute("name")||this.getColumnName(i.element),r=0;r<e.length;r++)if(e[r].field===t&&r<e.length-1){for(var n=this.createInstance(r),a=[],o=function(p){var u=e[r+1],d=u.dataSource.filter(function(g){return g[u.groupIDField]===i.value[p]})[0],v=(0,s.le)(d)?null:d[e[r+1].groupIDField],f=c.filterDatasource(r,v);a=a.concat(f)},c=this,h=0;h<i.value.length;h++)o(h);n.dataSource=a,n.dataBind()}},l.prototype.createInstance=function(i){var t=this.element.querySelector(".e-"+this.parent.resourceBase.resourceCollection[i+1].field).ej2_instances[0];return t.clear(),t},l.prototype.onDropdownResourceChange=function(i){if(i.value&&!(this.parent.resourceCollection.length<=1)&&this.parent.activeViewOptions.group.byGroupID)for(var e=i.element.getAttribute("name")||this.getColumnName(i.element),t=this.parent.resourceBase.resourceCollection,r=0;r<t.length;r++)if(r<t.length-1&&t[r].field===e){var n=this.createInstance(r);n.dataSource=this.filterDatasource(r,i.itemData[t[r].idField]),n.dataBind();var o=n.dataSource.length>0?n.dataSource[0][t[r+1].idField]:null;n.value=t[r+1].allowMultiple?[o]:o,n.dataBind()}},l.prototype.filterDatasource=function(i,e){var t=this.parent.resourceBase.resourceCollection[i+1];return t.dataSource.filter(function(r){return r[t.groupIDField]===e})},l.prototype.onTimezoneChange=function(i){if((i.element.getAttribute("name")||this.getColumnName(i.element))===this.parent.eventFields.startTimezone){var t=this.getInstance(Ai),r=this.getInstance(bi);r.value=t.value,r.dataBind()}},l.prototype.renderCheckBox=function(i){var e=this.createDivElement(i+"-container"),t=this.getFieldName(i),r=this.createInputElement(i+" "+st,t);e.appendChild(r);var n=new kt.Jg({change:this.onChange.bind(this),cssClass:i+" "+this.parent.cssClass,enableRtl:this.parent.enableRtl,label:this.getFieldLabel(i)});return n.appendTo(r),r.setAttribute("name",t),"Repeat"===t&&(this.repeatStatus=n),e},l.prototype.renderTextBox=function(i){var e=this.createDivElement(i+"-container"),t=this.getFieldName(i),n=this.createInputElement(i+" "+st,t,i===bt?"textarea":"input");return e.appendChild(n),It.II.createInput({element:n,floatLabelType:"Always",properties:{enableRtl:this.parent.enableRtl,placeholder:this.getFieldLabel(i)}}),e},l.prototype.getFieldName=function(i){var e="";switch(i){case te:e=this.fields.subject;break;case gt:e=this.fields.location;break;case rt:e=this.fields.startTime;break;case mt:e=this.fields.endTime;break;case bt:e=this.fields.description;break;case Ci:e=this.fields.isAllDay;break;case Ai:e=this.fields.startTimezone;break;case bi:e=this.fields.endTimezone;break;case ft:e="Timezone";break;case Si:e="Repeat"}return e},l.prototype.getFieldLabel=function(i){var e="";switch(i){case te:e=this.parent.editorTitles.subject;break;case gt:e=this.parent.editorTitles.location;break;case bt:e=this.parent.editorTitles.description;break;case rt:e=this.parent.editorTitles.startTime;break;case mt:e=this.parent.editorTitles.endTime;break;case Ai:e=this.parent.editorTitles.startTimezone;break;case bi:e=this.parent.editorTitles.endTimezone;break;case Si:e=this.parent.editorTitles.recurrenceRule;break;case Ci:e=this.parent.editorTitles.isAllDay;break;case ft:e=this.l10n.getConstant("timezone")}return e},l.prototype.onChange=function(i){var t=(0,s.oq)(i.event.target,".e-all-day,.e-time-zone,.e-repeat");t.classList.contains(Ci)?this.onAllDayChange(i.checked):t.classList.contains(ft)?this.timezoneChangeStyle(i.checked):t.classList.contains(Si)&&this.onRepeatChange(i.checked)},l.prototype.renderRepeatDialog=function(){var i=(0,s.az)("div");this.repeatDialogObject=new Ee.Vq({header:this.l10n.getConstant("recurrence"),visible:!1,content:'<div class="e-rec-editor"></div>',closeOnEscape:!0,width:"90%",buttons:[{click:this.repeatSaveDialog.bind(this),buttonModel:{content:this.l10n.getConstant("save"),cssClass:"e-save",isPrimary:!0}},{click:this.repeatCancelDialog.bind(this),buttonModel:{cssClass:"e-cancel",content:this.l10n.getConstant("cancel")}}],target:this.element,animationSettings:{effect:"Zoom"},enableRtl:this.parent.enableRtl,isModal:!0,cssClass:"e-recurrence-dialog",open:this.repeatOpenDialog.bind(this)}),this.element.appendChild(i),this.repeatDialogObject.appendTo(i),this.createRecurrenceEditor(this.repeatDialogObject.element.querySelector(".e-rec-editor"))},l.prototype.loadRecurrenceEditor=function(){this.repeatDialogObject.show(),this.recurrenceEditor&&this.repeatRule&&this.recurrenceEditor.setRecurrenceRule(this.repeatRule)},l.prototype.onRepeatChange=function(i){if(i)this.repeatDialogObject||this.renderRepeatDialog(),this.recurrenceEditor.setProperties({startDate:this.repeatStartDate,selectedType:0}),this.loadRecurrenceEditor();else{this.repeatDialogObject&&this.repeatDialogObject.hide(),this.repeatRule="",this.recurrenceEditor&&(this.recurrenceEditor.setRecurrenceRule(this.repeatRule),this.updateRepeatLabel(this.repeatRule));var e=this.element.querySelector("."+Bi);(0,s.cn)([e],ai)}},l.prototype.repeatSaveDialog=function(){this.repeatRule=this.recurrenceEditor.getRecurrenceRule();var i=this.element.querySelector("."+Bi);this.recurrenceEditor.getRecurrenceRule()?(0,s.IV)([i],ai):((0,s.cn)([i],ai),this.repeatStatus.setProperties({checked:!1})),this.updateRepeatLabel(this.repeatRule),this.closeRepeatDialog()},l.prototype.closeRepeatDialog=function(){this.repeatDialogObject.hide()},l.prototype.repeatCancelDialog=function(){this.closeRepeatDialog(),this.recurrenceEditor&&this.recurrenceEditor.setRecurrenceRule(this.repeatTempRule),this.repeatTempRule||this.repeatStatus.setProperties({checked:!1})},l.prototype.repeatOpenDialog=function(){this.repeatTempRule=this.recurrenceEditor.getRecurrenceRule()},l.prototype.onCellDetailsUpdate=function(i,e){if(this.parent.eventSettings.allowAdding){this.element.querySelector("."+vt).removeAttribute("data-id"),this.element.querySelector("."+Ua).innerHTML=this.l10n.getConstant("newEvent"),i.Timezone=!1,this.repeatStartDate=i[this.fields.startTime],this.repeatRule="",(0,s.le)(this.parent.eventSettings.fields.subject.default)||(i[this.fields.subject]=this.parent.eventSettings.fields.subject.default),(0,s.le)(this.parent.eventSettings.fields.location.default)||(i[this.fields.location]=this.parent.eventSettings.fields.location.default),(0,s.le)(this.parent.eventSettings.fields.description.default)||(i[this.fields.description]=this.parent.eventSettings.fields.description.default),this.showDetails(i),i[this.fields.recurrenceRule]&&this.recurrenceEditor&&(this.recurrenceEditor.setRecurrenceRule(i[this.fields.recurrenceRule],i[this.fields.startTime]),this.repeatRule=i[this.fields.recurrenceRule]);var t=this.element.querySelector("."+et);if(t&&(0,s.cn)([t],j),this.recurrenceEditor&&this.recurrenceEditor.setProperties({startDate:i[this.fields.startTime],selectedType:(0,s.le)(e)?(0,s.le)(i[this.fields.recurrenceRule])?0:this.recurrenceEditor.selectedType:e}),this.parent.isAdaptive&&(0,s.le)(this.parent.editorTemplate)){var r=this.element.querySelector("."+Bi);(0,s.cn)([r],ai),this.updateRepeatLabel(this.repeatRule)}else{var n=this.element.querySelector("."+dr);this.disableButton(n,!1)}this.dialogObject.show()}},l.prototype.convertToEventData=function(i,e){i.subject&&(e[this.fields.subject]=i.subject),e[this.fields.startTime]=i.startTime,e[this.fields.endTime]=i.endTime,e[this.fields.isAllDay]=i.isAllDay,i.RecurrenceRule&&(e[this.fields.recurrenceRule]=i.RecurrenceRule),(this.parent.resourceCollection.length>0||this.parent.activeViewOptions.group.resources.length>0)&&this.parent.resourceBase.setResourceValues(e)},l.prototype.applyFormValidation=function(){var i=function(h){return h&&Object.keys(h).length>0?h:void 0},e=this.element.querySelector("."+vt),t={},r=i(this.parent.eventSettings.fields.subject.validation);(0,s.le)(r)||(t[this.parent.eventSettings.fields.subject.name]=r);var n=i(this.parent.eventSettings.fields.location.validation);(0,s.le)(n)||(t[this.parent.eventSettings.fields.location.name]=n);var a=i(this.parent.eventSettings.fields.startTime.validation);(0,s.le)(a)||(t[this.parent.eventSettings.fields.startTime.name]=a);var o=i(this.parent.eventSettings.fields.endTime.validation);(0,s.le)(o)||(t[this.parent.eventSettings.fields.endTime.name]=o);var c=i(this.parent.eventSettings.fields.description.validation);(0,s.le)(c)||(t[this.parent.eventSettings.fields.description.name]=c),this.fieldValidator=new Es,this.fieldValidator.renderFormValidator(e,t,this.element,this.parent.locale)},l.prototype.showDetails=function(i){var e=(0,s.l7)({},i,null,!0);(!this.cellClickAction||this.cellClickAction&&!(0,s.le)(this.parent.editorTemplate))&&0===e[this.fields.endTime].getHours()&&0===e[this.fields.endTime].getMinutes()&&this.trimAllDay(e),this.eventData=e;for(var t=this.getFormElements(it),r=Object.keys(e),n=0,a=t;n<a.length;n++){var o=a[n],c=o.name||this.getColumnName(o);!(0,s.le)(c)&&""!==c&&(-1!==r.indexOf(c)?this.setValueToElement(o,e[c]):this.setDefaultValueToElement(o))}if((0,s.le)(this.parent.editorTemplate)){this.onAllDayChange(e[this.fields.isAllDay]);var h=this.getInstance(ft+"."+st);(0,s.le)(e[this.fields.startTimezone])&&(0,s.le)(e[this.fields.endTimezone])||(h.checked=!0,h.dataBind()),this.timezoneChangeStyle(h.checked),delete e.Timezone}},l.prototype.getColumnName=function(i){var e=i.getAttribute("data-name")||"";if(""===e){var t=!1,r="";i.classList.contains("e-dropdownlist")?(r="e-ddl",t=!0):i.classList.contains("e-multiselect")?(r="e-multiselect",t=!0):i.classList.contains("e-datetimepicker")?r="e-datetimepicker":i.classList.contains("e-datepicker")?r="e-datepicker":i.classList.contains("e-checkbox")&&(r="e-checkbox");var a=(0,s.oq)(i,t?"."+r+":not(.e-control)":"."+r)||i.querySelector("."+r);if(a){var o=a.querySelector("[name]");o&&(e=o.name)}}return e},l.prototype.onAllDayChange=function(i){var n,e=this.getInstance(rt),t=this.getInstance(mt),r=this.element.querySelector(".e-time-zone-container");i?(n=(0,s.le)(this.parent.dateFormat)?this.getFormat("dateFormats"):this.parent.dateFormat,(0,s.cn)(this.element.querySelectorAll(".e-time-icon"),Ya),(0,s.cn)([r],j),this.element.querySelector("."+Ei)&&(0,s.IV)([this.element.querySelector("."+Ei)],ct),e.format=t.format=n):(n=(0,s.le)(this.parent.dateFormat)?this.getFormat("dateFormats")+" "+this.parent.activeViewOptions.timeFormat:this.parent.dateFormat+" "+this.parent.activeViewOptions.timeFormat,(0,s.IV)(this.element.querySelectorAll(".e-time-icon"),Ya),(0,s.IV)([r],j),this.element.querySelector(".e-checkbox-wrapper .e-time-zone").checked&&(0,s.cn)([this.element.querySelector("."+Ei)],ct),e.format=t.format=n),this.cellClickAction&&this.updateDateTime(i,e,t),e.dataBind(),t.dataBind(),(0,s.le)(this.recurrenceEditor)||this.recurrenceEditor.updateRuleUntilDate(e.value)},l.prototype.updateDateTime=function(i,e,t){var r,n;if(i)if(r=C(new Date(this.eventWindowTime.startTime.getTime())),this.parent.activeCellsData.isAllDay){var a=V(new Date(this.eventWindowTime.endTime.getTime()),-1).getTime();n=+this.eventWindowTime.startTime>a?this.eventWindowTime.endTime:new Date(a)}else n=C(new Date(this.eventWindowTime.endTime.getTime()));else{var o=this.parent.activeCellsData.startTime;if((r=new Date(this.eventWindowTime.startTime.getTime())).setHours(o.getHours(),o.getMinutes(),o.getSeconds()),this.parent.activeCellsData.isAllDay){var c=this.parent.getStartEndTime(this.parent.workHours.start);r.setHours(c.getHours(),c.getMinutes(),c.getSeconds()),(n=new Date(r.getTime())).setMilliseconds(oe*this.getSlotDuration())}else(n=new Date(r.getTime())).setMilliseconds(this.parent.activeCellsData.endTime.getTime()-this.parent.activeCellsData.startTime.getTime())}this.eventWindowTime={startTime:new Date(r.getTime()),endTime:new Date(n.getTime())},e.value=r,t.value=n,e.dataBind(),t.dataBind()},l.prototype.getFormat=function(i){return"en"===this.parent.locale||"en-US"===this.parent.locale?(0,s.NA)(i+".short",(0,s.bD)(this.parent.getCalendarMode())):(0,s.NA)("main."+this.parent.locale+".dates.calendars."+this.parent.getCalendarMode()+"."+i+".short",s.qV)},l.prototype.onEventDetailsUpdate=function(i){if(this.parent.eventSettings.allowEditing){if(this.parent.isAdaptive||(0,s.IV)([this.element.querySelector("."+et)],j),this.element.querySelector("."+Ua).innerHTML=this.l10n.getConstant("editEvent"),this.element.querySelector("."+vt).setAttribute("data-id",i[this.fields.id].toString()),(0,s.le)(this.parent.editorTemplate)){i=(0,s.l7)({},i,null,!0);var e=this.getInstance(ft+"."+st),t=void 0;i[this.fields.startTimezone]||i[this.fields.endTimezone]?(t=!0,this.parent.eventBase.timezoneConvert(i)):t=!1,i.Timezone=t,e.checked=t,e.dataBind()}if(this.showDetails(i),i[this.fields.recurrenceRule]&&this.recurrenceEditor?this.recurrenceEditor.setRecurrenceRule(i[this.fields.recurrenceRule],i[this.fields.startTime]):!this.parent.isAdaptive&&this.recurrenceEditor&&(this.recurrenceEditor.setProperties({startDate:i[this.fields.startTime]}),this.recurrenceEditor.setRecurrenceRule("")),this.repeatStartDate=i[this.fields.startTime],this.repeatRule="",i[this.fields.recurrenceRule]&&(this.recurrenceEditor&&this.recurrenceEditor.setRecurrenceRule(i[this.fields.recurrenceRule],i[this.fields.startTime]),this.repeatRule=i[this.fields.recurrenceRule]),this.parent.isAdaptive&&(0,s.le)(this.parent.editorTemplate)){var r=this.element.querySelector("."+Bi);i[this.fields.recurrenceRule]?((0,s.IV)([r],ai),this.repeatStatus.setProperties({checked:!0})):((0,s.cn)([r],ai),this.repeatStatus.setProperties({checked:!1})),this.updateRepeatLabel(this.repeatRule)}var n=this.parent.readonly||i[this.fields.isReadonly];if(this.parent.isAdaptive){var c=this.element.querySelector("."+za);c&&(n?(0,s.cn)([c],is):(0,s.IV)([c],is))}else{var a=this.element.querySelector("."+dr),o=this.element.querySelector("."+et);this.disableButton(a,n),this.disableButton(o,n)}this.dialogObject.show()}},l.prototype.disableButton=function(i,e){i&&(i.ej2_instances[0].disabled=e)},l.prototype.renderRecurrenceEditor=function(){return new th({calendarMode:this.parent.calendarMode,cssClass:this.parent.cssClass,dateFormat:this.parent.dateFormat,enableRtl:this.parent.enableRtl,firstDayOfWeek:this.parent.activeViewOptions.firstDayOfWeek,locale:this.parent.locale})},l.prototype.updateMinMaxDateToEditor=function(){var i=this.element.querySelector(".e-start"),e=this.element.querySelector(".e-end");if(i&&e){var t=i.ej2_instances[0],r=e.ej2_instances[0];t.min=this.parent.minDate,t.max=this.parent.maxDate,r.min=this.parent.minDate,r.max=this.parent.maxDate,t.dataBind(),r.dataBind()}if(this.recurrenceEditor){var n=this.recurrenceEditor.element.querySelector(".e-until-date");if(n){var a=n.ej2_instances[0];a.min=this.parent.minDate,a.max=this.parent.maxDate,a.dataBind()}}},l.prototype.updateRepeatLabel=function(i){this.parent.isAdaptive&&!this.repeatDialogObject&&this.renderRepeatDialog();var e=i?this.l10n.getConstant("repeats")+" "+this.recurrenceEditor.getRuleSummary(i):this.l10n.getConstant("repeat");this.repeatStatus.setProperties({label:e})},l.prototype.dialogClose=function(i){this.isEnterKey?this.isEnterKey=!1:(this.dialogEvent=i,this.isCrudAction=!1,this.parent.activeEventData={event:void 0,element:void 0},this.parent.currentAction=null,this.dialogObject.hide())},l.prototype.resetForm=function(){this.fieldValidator.destroyToolTip(),this.resetFormFields(),!this.parent.isAdaptive&&this.recurrenceEditor&&!this.recurrenceEditor.isDestroyed&&this.recurrenceEditor.resetFields()},l.prototype.timezoneChangeStyle=function(i){var e=this.element.querySelector("."+Ei),t=this.parent.tzModule.getLocalTimezoneName();if(i){(0,s.cn)([e],ct);var r=this.getInstance(Ai),n=this.getInstance(bi),a=r.dataSource;r.value&&this.parent.timezone||a.some(function(c){return c.Value===t})||(a.push({Value:t,Text:t}),r.dataSource=a,n.dataSource=a,r.dataBind(),n.dataBind()),r.value=r.value||this.parent.timezone||t,n.value=n.value||this.parent.timezone||t,r.dataBind(),n.dataBind()}else(0,s.IV)([e],ct)},l.prototype.resetFormFields=function(){for(var e=0,t=this.getFormElements(it);e<t.length;e++){var r=t[e],n=r.name||this.getColumnName(r);!(0,s.le)(n)&&""!==n&&this.setDefaultValueToElement(r)}},l.prototype.eventSave=function(i,e){if(this.isEnterKey)this.isEnterKey=!1;else{var t=this.element.querySelector("."+vt);if(!t||!t.classList.contains("e-formvalidator")||t.ej2_instances[0].validate()){var r=this.getEventDataFromEditor();this.processEventValidation(r.tempData,e)||(this.eventCrudData=r.eventData,this.dialogEvent=i,this.isCrudAction=!0,this.dialogObject.hide())}}},l.prototype.getEventDataFromEditor=function(){var i=(0,s.l7)({},this.getObjectFromFormData(it));i.Timezone||(i[this.fields.startTimezone]=null,i[this.fields.endTimezone]=null),delete i.Timezone,delete i.Repeat,this.setDefaultValueToObject(i),i[this.fields.recurrenceRule]=this.recurrenceEditor?this.recurrenceEditor.getRecurrenceRule()||null:void 0;var e=(0,s.l7)({},i,null,!0);return i[this.fields.isAllDay]&&(i[this.fields.startTime]=(0,s.le)(i[this.fields.startTime])?null:C(new Date(i[this.fields.startTime].getTime())),i[this.fields.endTime]=(0,s.le)(i[this.fields.endTime])?null:V(C(new Date(i[this.fields.endTime].getTime())),1)),{eventData:i,tempData:e}},l.prototype.processEventValidation=function(i,e){var t;if((0,s.le)(this.parent.editorTemplate)){if(!i[this.fields.startTime]||!i[this.fields.endTime])return this.parent.quickPopup.openValidationError("invalidDateError"),!0;if(i[this.fields.startTime]>i[this.fields.endTime])return this.parent.quickPopup.openValidationError("startEndError"),!0}if(this.recurrenceEditor&&this.recurrenceEditor.value&&""!==this.recurrenceEditor.value){var r=!0;if("seriesChangeAlert"===(t=this.recurrenceValidation(i[this.fields.startTime],i[this.fields.endTime],e))&&this.parent.uiStateValues.isIgnoreOccurrence&&(r=!1),!(0,s.le)(t)&&r&&(!this.parent.enableRecurrenceValidation&&"wrongPattern"===t||this.parent.enableRecurrenceValidation))return this.parent.quickPopup.openRecurrenceValidationAlert(t),!0}return!1},l.prototype.processCrudActions=function(i){var e=this;this.parent.uiStateValues.isBlock=!1;var t=this.getResourceData(i),r=(this.parent.activeViewOptions.group.resources.length>0||this.parent.resourceCollection.length>0)&&!this.parent.activeViewOptions.group.allowGroupEdit&&!(0,s.le)(t),n=this.getEventIdFromForm();if((0,s.le)(n))this.parent.currentAction="Add",r?this.resourceSaveEvent(i,this.parent.currentAction):(i[this.fields.id]=this.parent.eventBase.getEventMaxID(),this.parent.addEvent(i));else{var a="string"===this.parent.eventBase.getEventIDType()?n:parseInt(n,10),o=this.parent.eventsData.filter(function(h){return h[e.fields.id]===a})[0];if((0,s.le)(o)&&(o=this.parent.blockData.filter(function(h){return h[e.fields.id]===a})[0]),(i=(0,s.l7)({},o,i))[this.fields.isReadonly])return!1;var c=void 0;if(!(0,s.le)(o[this.fields.recurrenceRule])){if(c=this.parent.currentAction,i.Guid=this.parent.activeEventData.event.Guid,"EditOccurrence"===this.parent.currentAction&&(i[this.fields.recurrenceID]?(a=i[this.fields.recurrenceID],c=null):(i[this.fields.id]=this.parent.eventBase.getEventMaxID(),i.Guid=this.parent.activeEventData.event.Guid),this.parent.enableRecurrenceValidation&&this.editOccurrenceValidation(a,i)))return!0;"EditSeries"===this.parent.currentAction||i[this.fields.id]!==o[this.fields.id]?i[this.fields.recurrenceID]=o[this.fields.id]:"EditFollowingEvents"===this.parent.currentAction&&(i[this.fields.id]=this.parent.eventBase.getEventMaxID(),i[this.fields.followingID]=o[this.fields.id])}r?this.resourceSaveEvent(i,"Save",c):this.parent.saveEvent(i,c)}return this.parent.uiStateValues.isBlock},l.prototype.getResourceData=function(i){var e=null;return!(0,s.le)(this.parent.resourceBase)&&!(0,s.le)(this.parent.resourceBase.resourceCollection)&&this.parent.resourceBase.resourceCollection.length>0&&(e=i[this.parent.resourceBase.resourceCollection.slice(-1)[0].field]),e},l.prototype.getObjectFromFormData=function(i){for(var t={},r=0,n=this.getFormElements(i);r<n.length;r++){var a=n[r],o=a.name||this.getColumnName(a);!(0,s.le)(o)&&""!==o&&(t[o]=this.getValueFromElement(a))}return t},l.prototype.setDefaultValueToObject=function(i){(0,s.le)(i[this.fields.subject])||(i[this.fields.subject]=i[this.fields.subject]||this.parent.eventSettings.fields.subject.default||this.l10n.getConstant("addTitle")),(0,s.le)(i[this.fields.location])||(i[this.fields.location]=i[this.fields.location]||this.parent.eventSettings.fields.location.default),(0,s.le)(i[this.fields.description])||(i[this.fields.description]=i[this.fields.description]||this.parent.eventSettings.fields.description.default)},l.prototype.recurrenceValidation=function(i,e,t){var r,n=this.recurrenceEditor,a=this.getInstance("e-repeat-interval.e-numerictextbox").value;if(t!==this.l10n.getConstant("ok")){var o=this.parent.activeEventData.event,c=[];if(("EditSeries"===this.parent.currentAction||"EditFollowingEvents"===this.parent.currentAction)&&!(0,s.le)(o)){var h=o[this.parent.eventFields.startTime],p=this.parent.eventBase.getSeriesEvents(this.eventData,h);if(p.length>0)c=this.parent.eventBase.getEditedOccurrences(p,h);else{var u=this.parent.eventBase.getEventById(o[this.parent.eventFields.id]);c=this.parent.eventBase.getEditedOccurrences([u],h)}"EditSeries"===this.parent.currentAction&&!(0,s.le)(this.eventData[this.parent.eventFields.recurrenceException])&&c.push(this.eventData)}if(c.length>0&&(r="seriesChangeAlert"),"until"===this.getInstance("e-end-on-left .e-ddl .e-dropdownlist").value&&this.getInstance("e-end-on-date .e-datepicker").value<i&&(r="wrongPattern"),(0,s.le)(r)){var d=n.value.split(";")[1].split("=")[1].split(","),v={SU:0,MO:1,TU:2,WE:3,TH:4,FR:5,SA:6},f=[],g=[],m=void 0;switch(n.value.split(";")[0].split("=")[1]){case"DAILY":(e.getTime()-i.getTime())/36e5>24*a&&(r="createError");break;case"WEEKLY":d=n.value.split(";")[1].split("=")[1].split(",");for(var y=0;y<d.length*(a+1);y++)f[y]=d.length>y?v[d[y]]:f[y-d.length]+7*a;for(m=f.sort(function(w,D){return w-D}),y=1;y<m.length;y++)g.push(m[y]-m[y-1]);((e.getTime()-i.getTime())/36e5>=24*Math.min.apply(Math,g)||(0,s.le)(a))&&(r="createError");break;case"MONTHLY":e.getTime()>=new Date(+i).setMonth(i.getMonth()+a)&&(r="createError");break;case"YEARLY":e.getTime()>=new Date(+i).setFullYear(i.getFullYear()+a)&&(r="createError")}}}else e.getTime()>=new Date(+i).setMonth(i.getMonth()+a)&&(r="createError"),(0,s.le)(r)&&this.parent.quickPopup.quickDialog.hide();return(0,s.le)(a)&&(r="createError"),r},l.prototype.getRecurrenceIndex=function(i,e){for(var t,r=0;r<i.length;r++)if(e[this.fields.startTime].valueOf()===i[r][this.fields.startTime].valueOf()){t=r;break}return t},l.prototype.trimAllDay=function(i){if(i[this.fields.isAllDay]){var e=V(new Date(+i[this.fields.endTime]),-1).getTime();i[this.fields.endTime]=+i[this.fields.startTime]>e?i[this.fields.endTime]:new Date(e)}},l.prototype.editOccurrenceValidation=function(i,e,t){var r=this;void 0===t&&(t=this.eventData);var n=this.parent.getOccurrencesByID(i);this.parent.eventsData.filter(function(u){return u[r.fields.recurrenceID]===i}).map(function(u){return n.push((0,s.l7)({},u))}),e=(0,s.l7)({},e),this.trimAllDay(e);for(var o=0,c=n;o<c.length;o++)this.trimAllDay(c[o]);this.parent.eventBase.sortByTime(n);var p=this.getRecurrenceIndex(n,t);if((0,s.le)(p))return!1;if(0===p){if(!(0,s.le)(n[p+1])){if(!(C(new Date(+n[p+1][this.fields.startTime])).getTime()>C(new Date(+e[this.fields.endTime])).getTime())&&C(new Date(+n[n.length-1][this.fields.endTime])).getTime()>=C(new Date(+e[this.fields.startTime])).getTime())return this.parent.quickPopup.openRecurrenceValidationAlert("sameDayAlert"),!0;if(C(new Date(+n[n.length-1][this.fields.endTime])).getTime()<C(new Date(+e[this.fields.startTime])).getTime())return this.parent.quickPopup.openRecurrenceValidationAlert("occurrenceAlert"),!0}return!1}if(p===n.length-1){if(!(C(new Date(+n[p-1][this.fields.endTime])).getTime()<C(new Date(+e[this.fields.startTime])).getTime())&&C(new Date(+n[n.length-1-p][this.fields.startTime])).getTime()<=C(new Date(+e[this.fields.endTime])).getTime())return this.parent.quickPopup.openRecurrenceValidationAlert("sameDayAlert"),!0;if(C(new Date(+n[n.length-1-p][this.fields.endTime])).getTime()>C(new Date(+e[this.fields.startTime])).getTime())return this.parent.quickPopup.openRecurrenceValidationAlert("occurrenceAlert"),!0}else{if(!(C(new Date(+n[p-1][this.fields.endTime])).getTime()<C(new Date(+e[this.fields.startTime])).getTime()||C(new Date(+n[0][this.fields.startTime])).getTime()>C(new Date(+e[this.fields.startTime])).getTime())||!(C(new Date(+n[p+1][this.fields.startTime])).getTime()>C(new Date(+e[this.fields.endTime])).getTime()||C(new Date(+n[n.length-1][this.fields.endTime])).getTime()<C(new Date(+e[this.fields.startTime])).getTime()))return this.parent.quickPopup.openRecurrenceValidationAlert("sameDayAlert"),!0;if(C(new Date(+n[p+1][this.fields.endTime])).getTime()<C(new Date(+e[this.fields.startTime])).getTime()||C(new Date(+n[p-1][this.fields.startTime])).getTime()>C(new Date(+e[this.fields.endTime])).getTime())return this.parent.quickPopup.openRecurrenceValidationAlert("occurrenceAlert"),!0}return!1},l.prototype.resourceSaveEvent=function(i,e,t){var r=this,n=this.parent.resourceBase.resourceCollection.slice(-1)[0],a=i[n.field];a=a instanceof Array?a:[a];for(var o=this.parent.resourceBase.lastResourceLevel,c=[],h=function(m){var y=(0,s.l7)({},i,null,!0);y[p.fields.id]=p.parent.eventBase.getEventMaxID();var w=[],D=function(){if("Save"===e&&m===a.length-1)if(w.length>0){w[0][r.fields.id]=i[r.fields.id];for(var q=1;q<w.length;q++)w[q][r.fields.id]=r.parent.eventBase.getEventMaxID(m),c.push(w[q]),r.parent.saveEvent(w[0],t)}else y[r.fields.id]=i[r.fields.id],r.parent.saveEvent(y,t);else if(w.length>0)for(var B=0;B<w.length;B++)w[B][r.fields.id]=r.parent.eventBase.getEventMaxID(B),c.push(w[B]);else y[r.fields.id]=r.parent.eventBase.getEventMaxID(m),c.push(y)};if(p.parent.activeViewOptions.group.byGroupID&&!(0,s.le)(o)){var b=n.dataSource,A=p.parent.resourceCollection,E=void 0;if((E=A.length>1?ci(b,n.idField,a[m],y,A):ci(b,n.idField,a[m]))<0)return{value:void 0};for(var S=b[E][n.groupIDField],k=o.filter(function(q){return q.resourceData[n.idField]===a[m]}).filter(function(q){return q.resourceData[n.groupIDField]===S})[0].groupOrder,M=0;M<p.parent.resourceBase.resourceCollection.length;M++)y[L=p.parent.resourceBase.resourceCollection[M].field]=k[M]instanceof Array?k[M][0]:k[M];D()}else{for(E=0;E<p.parent.resourceBase.resourceCollection.length-1;E++){var L;if(y[L=p.parent.resourceBase.resourceCollection[E].field]instanceof Array&&y[L].length>1)for(var N=0;N<y[L].length;N++){var H=(0,s.l7)({},y,null,!0);H[L]=i[L][N],H[n.field]=a[m],w.push(H)}else if(0===w.length)y[L]=i[L]instanceof Array?i[L][0]:i[L],y[n.field]=a[m];else for(var z=0;z<w.length;z++)w[z][L]=i[L]instanceof Array?i[L][0]:i[L]}y[n.field]=a[m],D()}},p=this,u=0;u<a.length;u++){var d=h(u);if("object"==typeof d)return d.value}if(c.length>0){for(var v=0,f=c;v<f.length;v++){var g=f[v];g[this.fields.recurrenceException]=null,g[this.fields.recurrenceID]=null}this.parent.addEvent(c)}},l.prototype.getEventIdFromForm=function(){return this.element.querySelector("."+vt).getAttribute("data-id")},l.prototype.getFormElements=function(i){return[].slice.call(i===it?this.element.querySelectorAll("."+st):this.parent.element.querySelectorAll("."+i+" ."+st))},l.prototype.getValueFromElement=function(i){return i.classList.contains("e-datepicker")||i.classList.contains("e-datetimepicker")||i.classList.contains("e-dropdownlist")||i.classList.contains("e-multiselect")?i.ej2_instances[0].value:i.classList.contains("e-checkbox")?i.ej2_instances[0].checked:"checkbox"===i.type?i.checked:s.pJ.sanitize(i.value)},l.prototype.setValueToElement=function(i,e){if(i.classList.contains("e-datepicker"))(t=i.ej2_instances[0]).value=e,t.dataBind();else if(i.classList.contains("e-datetimepicker"))(t=i.ej2_instances[0]).element.classList.contains(rt)?this.eventWindowTime.startTime=new Date(""+e):this.eventWindowTime.endTime=new Date(""+e),t.value=e,t.dataBind();else if(i.classList.contains("e-dropdownlist"))(t=i.ej2_instances[0]).value=e,t.dataBind();else if(i.classList.contains("e-multiselect"))(t=i.ej2_instances[0]).value=[],t.value=e instanceof Array?e:[e],t.dataBind();else if(i.classList.contains("e-checkbox")){var t;(t=i.ej2_instances[0]).checked=e,t.dataBind()}else"checkbox"!==i.type?i.value=e||"":i.checked=e},l.prototype.setDefaultValueToElement=function(i){if(i.classList.contains("e-datepicker"))(e=i.ej2_instances[0]).value=this.parent.getCurrentTime(),e.dataBind();else if(i.classList.contains("e-datetimepicker")){var e=i.ej2_instances[0],t=this.parent.getCurrentTime();this.eventWindowTime={startTime:t,endTime:t},e.value=t,e.dataBind()}else i.classList.contains("e-dropdownlist")?((e=i.ej2_instances[0]).value=null,e.dataBind()):i.classList.contains("e-multiselect")?((e=i.ej2_instances[0]).value=[],e.dataBind()):i.classList.contains("e-checkbox")?((e=i.ej2_instances[0]).checked=!1,e.dataBind()):"checkbox"===i.type?i.checked=!1:i.value=""},l.prototype.getInstance=function(i){var e=this.element.querySelector("."+i);return e?e.ej2_instances[0]:null},l.prototype.eventDelete=function(i){if(this.isEnterKey)this.isEnterKey=!1;else{switch(this.parent.currentAction){case"EditOccurrence":this.parent.currentAction=(0,s.le)(this.parent.activeEventData.event[this.parent.eventFields.recurrenceRule])?"Delete":"DeleteOccurrence";break;case"EditSeries":this.parent.currentAction="DeleteSeries";break;case"Save":this.parent.currentAction="Delete";break;case"EditFollowingEvents":(0,s.le)(this.parent.activeEventData.event[this.parent.eventFields.recurrenceRule])||(this.parent.currentAction="DeleteFollowingEvents")}this.dialogEvent=i,this.isCrudAction=!1,this.dialogObject.hide(),this.parent.quickPopup.openDeleteAlert()}},l.prototype.getRecurrenceEditorInstance=function(){return this.parent.isAdaptive&&!this.repeatDialogObject&&this.renderRepeatDialog(),this.recurrenceEditor},l.prototype.destroyComponents=function(){for(var e=0,t=this.getFormElements(it);e<t.length;e++){var r=t[e],n=void 0;(r.classList.contains("e-datetimepicker")||r.classList.contains("e-datepicker")||r.classList.contains("e-checkbox")||r.classList.contains("e-dropdownlist")||r.classList.contains("e-multiselect"))&&(n=r.ej2_instances),n&&n[0]&&n[0].destroy()}this.buttonObj&&this.buttonObj.destroy()},l.prototype.detachComponents=function(){for(var e=0,t=this.getFormElements(it);e<t.length;e++)(0,s.og)(t[e])},l.prototype.destroy=function(i){if(this.parent&&!this.parent.isDestroyed&&this.parent.resetTemplates(["editorTemplate"]),this.destroyComponents(),this.recurrenceEditor&&(this.recurrenceEditor.destroy(),(0,s.og)(this.recurrenceEditor.element),this.recurrenceEditor=null),this.fieldValidator&&(this.fieldValidator.destroy(),this.fieldValidator=null),this.repeatDialogObject&&(this.repeatDialogObject.destroy(),this.repeatDialogObject=null),this.detachComponents(),this.dialogObject){if(this.dialogObject.element){var e=this.dialogObject.element.querySelector("form");Ie(e),(0,s.og)(e),s.bi.remove(this.dialogObject.element,"keydown",this.preventEventSave)}this.dialogObject.destroy(),this.dialogObject=null}this.element&&((0,s.Od)(this.element),this.element=null),i||(this.l10n=null,this.parent=null,this.fields=null,this.buttonObj=null,this.repeatStatus=null,this.eventWindowTime=null,this.dialogEvent=null)},l}(),ah=function(){function l(i){this.translateY=0,this.itemSize=60,this.bufferCount=3,this.renderedLength=0,this.averageRowHeight=0,this.startIndex=0,this.parent=i,this.addEventListener()}return l.prototype.addEventListener=function(){!this.parent||this.parent&&this.parent.isDestroyed||this.parent.on(li,this.virtualScrolling,this)},l.prototype.removeEventListener=function(){!this.parent||this.parent&&this.parent.isDestroyed||this.parent.off(li,this.virtualScrolling)},l.prototype.getRenderedCount=function(){return this.setItemSize(),this.renderedLength=Math.ceil((this.isHorizontalScroll?this.parent.element.clientWidth:this.parent.element.clientHeight)/this.itemSize)+this.bufferCount,this.renderedLength},l.prototype.renderVirtualTrack=function(i){var e=(0,s.az)("div",{className:fi});this.isHorizontalScroll?e.style.width=this.parent.activeView.colLevels[this.parent.activeView.colLevels.length-1].length*this.itemSize+"px":e.style.height=this.parent.resourceBase.expandedResources.length*this.itemSize+"px",i.appendChild(e)},l.prototype.updateVirtualScrollHeight=function(){var i=this.parent.element.querySelector("."+fi);if(this.parent.resourceBase.renderedResources[this.parent.resourceBase.renderedResources.length-1].groupIndex!==this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length-1].groupIndex){var r=this.parent.element.querySelector("."+X);this.renderedLength=r.querySelector("tbody").children.length,i.style.height=r.offsetHeight+(this.parent.resourceBase.expandedResources.length-this.renderedLength)*r.offsetHeight/this.renderedLength+"px"}else i.style.height="";this.averageRowHeight=i.offsetHeight/this.parent.resourceBase.expandedResources.length},l.prototype.updateVirtualTrackHeight=function(i){var e=this.parent.resourceBase.renderedResources.length;if(e!==this.getRenderedCount()){i.style.height=this.parent.element.querySelector(".e-content-wrap").clientHeight+"px";var t=this.parent.element.querySelector("."+Oe),r=this.parent.element.querySelector("."+F),n=this.parent.element.querySelector("."+ht);this.translateY=0,this.setTranslate(t,r,n)}else{var c=e+(this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length-1].groupIndex-this.parent.resourceBase.renderedResources[e-1].groupIndex);i.style.height=(c=c>this.parent.resourceBase.expandedResources.length?this.parent.resourceBase.expandedResources.length:c)*this.itemSize+"px"}},l.prototype.setItemSize=function(){this.itemSize=this.isHorizontalScroll?function(l,i){var e,t=(0,s.az)("div",{className:"e-work-cells"}).cloneNode();return t.style.visibility="hidden",t.style.position="absolute",l.appendChild(t),e=t.getBoundingClientRect().width,(0,s.Od)(t),e}(this.parent.activeView.element)||this.itemSize:qt(this.parent.activeView.element,R)||this.itemSize},l.prototype.renderEvents=function(){this.setTabIndex(),this.parent.crudModule&&this.parent.crudModule.refreshProcessedData(!0),"Month"!==this.parent.currentView&&this.parent.notify(ge,{}),this.parent.hideSpinner()},l.prototype.virtualScrolling=function(){var i=this;this.parent.quickPopup&&(this.parent.quickPopup.quickPopupHide(),this.parent.quickPopup.morePopup.hide());var e=this.parent.element.querySelector("."+F);if(this.isHorizontalScroll)this.horizontalScrolling(e);else{var t=this.parent.element.querySelector("."+Oe),r=this.parent.element.querySelector("."+ht),n=this.parent.element.querySelector("."+Ut),a=this.parent.element.querySelector("."+X);(0,s.cn)([e],"e-transition"),this.renderedLength=t.querySelector("tbody").children.length;var o=parseInt(t.querySelector("tbody td").getAttribute("data-group-index"),10),c=this.parent.rowAutoHeight?a.offsetHeight-e.offsetHeight:this.bufferCount*this.itemSize,h=[];if(e.scrollTop-this.translateY<0?h=this.upScroll(e,o):e.scrollTop-this.translateY>c&&(h=this.downScroll(e,o)),!(0,s.le)(h)&&h.length>0){this.parent.showSpinner();var p=this.parent.getSelectedElements();this.focusedEle=p[p.length-1]||this.focusedEle,this.updateContent(t,e,r,h),this.setTranslate(t,e,r,n),this.parent.dragAndDropModule&&"drag"===this.parent.dragAndDropModule.actionObj.action&&this.parent.dragAndDropModule.navigationWrapper(),window.clearTimeout(this.timeValue),this.timeValue=window.setTimeout(function(){i.renderEvents()},250)}}},l.prototype.horizontalScrolling=function(i){var e=this,t=[],r=this.bufferCount*this.itemSize;if(Math.abs(i.scrollLeft)-Math.abs(this.translateY)<0?t=this.leftScroll(i):Math.abs(i.scrollLeft)-Math.abs(this.translateY)>r&&(t=this.rightScroll(i)),!(0,s.le)(t)&&t.length>0){if(this.parent.resourceBase.expandedResources.length!==t.length||this.parent.resourceBase.expandedResources[0]!==t[0]||this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length-1]!==t[t.length-1]){this.parent.showSpinner();var n=this.parent.activeView.colLevels.slice(0);this.updateHorizontalContent(i,t),(0,s.V7)(i.querySelector("table"),{transform:"translateX("+this.translateY+"px)"}),this.parent.activeView.colLevels=n,this.parent.dragAndDropModule&&"drag"===this.parent.dragAndDropModule.actionObj.action&&this.parent.dragAndDropModule.navigationWrapper()}window.clearTimeout(this.timeValue),this.timeValue=window.setTimeout(function(){e.renderEvents()},250)}},l.prototype.upScroll=function(i,e){var t=0;t=~~(i.scrollTop/this.itemSize)+Math.ceil(i.clientHeight/this.itemSize)-this.renderedLength,this.parent.rowAutoHeight&&(t=t>e?e-this.bufferCount:t);var r=this.getBufferCollection(t=t>0?t:0,t+this.renderedLength);if(this.parent.resourceBase.renderedResources=r,0===e)this.translateY=i.scrollTop;else{var n=this.parent.rowAutoHeight?this.averageRowHeight:this.itemSize;this.translateY=i.scrollTop-this.bufferCount*(n=n>0?n:this.itemSize)>0?i.scrollTop-this.bufferCount*n:0}return r},l.prototype.downScroll=function(i,e){if(this.parent.resourceBase.renderedResources[this.parent.resourceBase.renderedResources.length-1].groupIndex===this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length-1].groupIndex)return null;var n=0;n=~~(i.scrollTop/this.itemSize),this.parent.rowAutoHeight&&(n=(n=~~((i.scrollTop-this.translateY)/this.averageRowHeight)+e)>e+this.bufferCount?n:e+this.bufferCount);var a=n+this.renderedLength,o=this.getBufferCollection((a=a>this.parent.resourceBase.expandedResources.length?n+(this.parent.resourceBase.expandedResources.length-n):a)-this.renderedLength,a);return this.translateY=i.scrollTop,o},l.prototype.leftScroll=function(i){var e=0;return e=~~(Math.abs(i.scrollLeft)/this.itemSize)+Math.ceil(i.clientWidth/this.itemSize)-this.renderedLength,this.getCollection(e=e>0?e:0,e+this.renderedLength)},l.prototype.rightScroll=function(i){var e=this.parent.activeView.colLevels[this.parent.activeView.colLevels.length-1],r=~~(Math.abs(i.scrollLeft)/this.itemSize)+this.renderedLength;return this.getCollection((r=r>e.length-1?e.length-1:r)-this.renderedLength,r)},l.prototype.getCollection=function(i,e){this.translateY=i*this.itemSize;var t=this.getResCollection(i,e);return this.parent.enableRtl&&(this.translateY=-this.translateY),t},l.prototype.getResCollection=function(i,e){var t=this.parent.activeView.colLevels[this.parent.activeView.colLevels.length-1],r=[],n={startIndex:0,endIndex:0};if(this.parent.activeViewOptions.group.byDate){if(t[i].date.getTime()===this.parent.resourceBase.expandedResources[0].date.getTime()&&t[e].date.getTime()===this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length-1].date.getTime())return this.parent.resourceBase.expandedResources;r=this.getByDateCollection(t[i],t[e],n),this.setRenderedDates(r)}else{if(t[i].groupIndex===this.parent.resourceBase.expandedResources[0].groupIndex&&t[e].groupIndex===this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length-1].groupIndex)return this.parent.resourceBase.expandedResources;r=this.getByIdCollection(t[i],t[e],n)}return"Month"!==this.parent.currentView&&(this.startIndex=n.startIndex,r=t.slice(n.startIndex,n.endIndex)),this.translateY=n.startIndex*this.itemSize,r},l.prototype.getByDateCollection=function(i,e,t){var r=this.parent.activeView.colLevels[0].filter(function(n){return i.date.getTime()<=n.date.getTime()&&n.date.getTime()<=e.date.getTime()});return this.setStartEndIndex(this.parent.activeView.colLevels[0],r[0],r[r.length-1],t),r},l.prototype.getByIdCollection=function(i,e,t){var r=this.parent.resourceBase.lastResourceLevel.filter(function(n){return i.groupIndex<=n.groupIndex&&n.groupIndex<=e.groupIndex});return this.parent.resourceBase.renderedResources=r,this.setStartEndIndex(this.parent.resourceBase.lastResourceLevel,r[0],r[r.length-1],t),r},l.prototype.setStartEndIndex=function(i,e,t,r){var n=0;i.filter(function(a){e===a?r.startIndex=n:t===a&&(r.endIndex=n+a.colSpan),n+=a.colSpan}),e===t&&(r.endIndex=r.startIndex+t.colSpan)},l.prototype.updateContent=function(i,e,t,r){var n=i.querySelector("tbody").children.length;document.activeElement&&document.activeElement.classList.contains(Ve)&&(this.isResourceCell=!0,this.parent.element.focus());for(var a=0;a<n;a++)(0,s.Od)(i.querySelector("tbody tr")),(0,s.Od)(e.querySelector("tbody tr")),(0,s.Od)(t.querySelector("div"));this.parent.resourceBase.renderedResources=r;var o=this.parent.resourceBase.getContentRows(r,!0),c=this.parent.activeView.getContentRows(),h=this.parent.activeView.getEventRows(r.length);(0,s.R3)(o,i.querySelector("tbody")),(0,s.R3)(c,e.querySelector("tbody")),(0,s.R3)(h,t)},l.prototype.updateHorizontalContent=function(i,e){this.parent.resourceBase.expandedResources=e;var t=this.parent.getSelectedElements();this.focusedEle=t[t.length-1]||this.focusedEle;for(var r=i.querySelectorAll("tbody tr").length,n=0;n<r;n++)(0,s.Od)(i.querySelector("tbody tr"));if("Month"===this.parent.currentView){this.parent.activeViewOptions.group.byDate?this.parent.activeView.colLevels[0]=e:this.parent.activeView.colLevels[this.parent.activeView.colLevels.length-2]=e;var a=this.parent.activeView.getContentRows();(0,s.R3)(a,i.querySelector("tbody"))}else{var o=[].slice.call(i.querySelector("colgroup").children);for(n=0;n<o.length;n++)(0,s.Od)(o[n]);this.parent.activeView.colLevels[this.parent.activeView.colLevels.length-1]=e,a=this.parent.activeView.getContentRows();var c=i.querySelector("table"),h=i.querySelector("thead"),p=i.querySelector("colgroup");e.forEach(function(){p.appendChild((0,s.az)("col"))}),h.appendChild(this.parent.eventBase.createEventWrapper("",this.startIndex>0?this.startIndex:0)),this.parent.activeViewOptions.timeScale.enable&&h.appendChild(this.parent.eventBase.createEventWrapper("timeIndicator")),(0,s.Ce)([h],c),(0,s.R3)(a,i.querySelector("tbody"))}},l.prototype.getBufferCollection=function(i,e){return this.parent.resourceBase.expandedResources.slice(i,e)},l.prototype.setTranslate=function(i,e,t,r){(0,s.V7)(i.querySelector("table"),{transform:"translateY("+this.translateY+"px)"}),(0,s.V7)(e.querySelector("table"),{transform:"translateY("+this.translateY+"px)"}),(0,s.V7)(t,{transform:"translateY("+this.translateY+"px)"}),(0,s.le)(r)||(0,s.V7)(r,{transform:"translateY("+this.translateY+"px)"})},l.prototype.updateFocusedWorkCell=function(){if(this.focusedEle){var i=parseInt(this.focusedEle.getAttribute("data-date"),10),e=parseInt(this.focusedEle.getAttribute("data-group-index"),10),t=this.parent.element.querySelector("."+R+'[data-date="'+i+'"][data-group-index="'+e+'"]');t&&this.parent.addSelectedClass([t],t,!0),this.focusedEle=null}},l.prototype.setRenderedDates=function(i){if("Month"!==this.parent.currentView){var e=i.map(function(n){return n.date});this.parent.resourceBase.renderedResources.forEach(function(n){return n.renderDates=e})}else{var t=i.map(function(n){return n.date.getDay()}),r=this.parent.activeView.renderDates.filter(function(n){return t.indexOf(n.getDay())>=0});this.parent.resourceBase.renderedResources.forEach(function(n){return n.renderDates=r})}},l.prototype.setTabIndex=function(){var i=this.parent.element.querySelector("."+Oe),e=[].slice.call(this.parent.element.querySelectorAll("."+Ve));e&&i&&e.forEach(function(r){r.getBoundingClientRect().top>=i.getBoundingClientRect().top&&r.setAttribute("tabindex","0")});var t=this.parent.element.querySelector("."+Ve+'[tabindex="0"]');this.isResourceCell&&t&&(t.focus(),this.isResourceCell=!1)},l.prototype.destroy=function(){this.removeEventListener(),this.focusedEle=null},l}(),sh=function(){function l(i){this.parent=i}return l.prototype.render=function(i,e){void 0===e&&(e=!0),this.initializeLayout(i),this.parent.activeView&&e&&this.parent.crudModule.refreshDataManager()},l.prototype.initializeLayout=function(i){switch(this.parent.activeView&&(this.parent.resetTemplates(["cellTemplate","eventTemplate","tooltipTemplate","majorSlotTemplate","minorSlotTemplate","headerTooltipTemplate","dateHeaderTemplate","dayHeaderTemplate","mothHeaderTemplate","headerIndentTemplate","resourceHeaderTemplate","cellHeaderTemplate"]),this.parent.activeView.removeEventListener(),this.parent.activeView.destroy()),i){case"Day":this.parent.activeView=this.parent.dayModule;break;case"Week":this.parent.activeView=this.parent.weekModule;break;case"WorkWeek":this.parent.activeView=this.parent.workWeekModule;break;case"Month":this.parent.activeView=this.parent.monthModule;break;case"Year":this.parent.activeView=this.parent.yearModule;break;case"Agenda":this.parent.activeView=this.parent.agendaModule;break;case"MonthAgenda":this.parent.activeView=this.parent.monthAgendaModule;break;case"TimelineDay":this.parent.activeView=this.parent.timelineViewsModule,this.parent.activeView.viewClass="e-timeline-day-view";break;case"TimelineWorkWeek":this.parent.activeView=this.parent.timelineViewsModule,this.parent.activeView.viewClass="e-timeline-work-week-view";break;case"TimelineWeek":this.parent.activeView=this.parent.timelineViewsModule,this.parent.activeView.viewClass="e-timeline-week-view";break;case"TimelineMonth":this.parent.activeView=this.parent.timelineMonthModule;break;case"TimelineYear":this.parent.activeView=this.parent.timelineYearModule}if((0,s.le)(this.parent.activeView)){var t=this.parent.viewCollections[0].option;if(t)return this.parent.setProperties({currentView:t},!0),this.parent.headerModule&&(this.parent.headerModule.updateActiveView(),this.parent.headerModule.setCalendarView()),this.initializeLayout(t);throw Error("Inject required modules")}this.parent.activeView.viewIndex=this.parent.viewIndex,this.updateLabelText(i),this.parent.activeView.addEventListener(),this.parent.activeView.getRenderDates(),this.parent.uiStateValues.isGroupAdaptive=this.parent.activeViewOptions.group.resources.length>0&&(this.parent.enableAdaptiveUI&&!this.parent.isAdaptive||this.parent.isAdaptive&&this.parent.activeViewOptions.group.enableCompactView),this.parent.virtualScrollModule&&(this.parent.virtualScrollModule.destroy(),this.parent.virtualScrollModule=null),(-1===["Agenda","Year"].indexOf(this.parent.currentView)||"TimelineYear"===this.parent.currentView&&"Vertical"===this.parent.activeViewOptions.orientation)&&this.parent.activeViewOptions.allowVirtualScrolling&&this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive&&(this.parent.virtualScrollModule=new ah(this.parent),this.parent.activeView.isTimelineView()?this.parent.uiStateValues.top=0:(this.parent.virtualScrollModule.isHorizontalScroll=!0,this.parent.uiStateValues.left=0)),this.updateHeader(),this.parent.activeView.renderLayout(Qr),this.parent.renderTemplates(),this.parent.eventTooltip&&(this.parent.eventTooltip.destroy(),this.parent.eventTooltip=null),(this.parent.eventSettings.enableTooltip||this.parent.activeViewOptions.group.resources.length>0&&this.parent.activeViewOptions.group.headerTooltipTemplate)&&(this.parent.eventTooltip=new Yn(this.parent))},l.prototype.updateHeader=function(){this.parent.headerModule&&(this.parent.headerModule.setDayOfWeek(this.parent.activeViewOptions.firstDayOfWeek),this.parent.activeViewOptions.readonly?(0,s.cn)([this.parent.element],Mi):this.parent.element.classList.contains(Mi)&&(0,s.IV)([this.parent.element],Mi),this.parent.headerModule.updateDateRange(this.parent.activeView.getDateRangeText()),this.parent.headerModule.updateHeaderItems("remove"))},l.prototype.updateLabelText=function(i){var e=this.parent.activeView.getLabelText(i);this.parent.element.setAttribute("role","main"),this.parent.element.setAttribute("aria-label",e)},l}(),oh=function(){var l=function(i,e){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])})(i,e)};return function(i,e){function t(){this.constructor=i}l(i,e),i.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}}(),aa=function(l,i,e,t){var a,r=arguments.length,n=r<3?i:null===t?t=Object.getOwnPropertyDescriptor(i,e):t;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(l,i,e,t);else for(var o=l.length-1;o>=0;o--)(a=l[o])&&(n=(r<3?a(n):r>3?a(i,e,n):a(i,e))||n);return r>3&&n&&Object.defineProperty(i,e,n),n},lh=function(l){function i(){return null!==l&&l.apply(this,arguments)||this}return oh(i,l),aa([(0,s.Z9)(!0)],i.prototype,"highlight",void 0),aa([(0,s.Z9)("09:00")],i.prototype,"start",void 0),aa([(0,s.Z9)("18:00")],i.prototype,"end",void 0),i}(s.rt),ch=function(){var l=function(i,e){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])})(i,e)};return function(i,e){function t(){this.constructor=i}l(i,e),i.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}}(),Wi=function(l,i,e,t){var a,r=arguments.length,n=r<3?i:null===t?t=Object.getOwnPropertyDescriptor(i,e):t;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(l,i,e,t);else for(var o=l.length-1;o>=0;o--)(a=l[o])&&(n=(r<3?a(n):r>3?a(i,e,n):a(i,e))||n);return r>3&&n&&Object.defineProperty(i,e,n),n},hh=function(l){function i(){return null!==l&&l.apply(this,arguments)||this}return ch(i,l),Wi([(0,s.Z9)(!0)],i.prototype,"enable",void 0),Wi([(0,s.Z9)(60)],i.prototype,"interval",void 0),Wi([(0,s.Z9)(2)],i.prototype,"slotCount",void 0),Wi([(0,s.Z9)()],i.prototype,"minorSlotTemplate",void 0),Wi([(0,s.Z9)()],i.prototype,"majorSlotTemplate",void 0),i}(s.rt),ph=function(){var l=function(i,e){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])})(i,e)};return function(i,e){function t(){this.constructor=i}l(i,e),i.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}}(),Rr=function(l,i,e,t){var a,r=arguments.length,n=r<3?i:null===t?t=Object.getOwnPropertyDescriptor(i,e):t;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(l,i,e,t);else for(var o=l.length-1;o>=0;o--)(a=l[o])&&(n=(r<3?a(n):r>3?a(i,e,n):a(i,e))||n);return r>3&&n&&Object.defineProperty(i,e,n),n},uh=function(l){function i(){return null!==l&&l.apply(this,arguments)||this}return ph(i,l),Rr([(0,s.Z9)("Both")],i.prototype,"templateType",void 0),Rr([(0,s.Z9)()],i.prototype,"header",void 0),Rr([(0,s.Z9)()],i.prototype,"content",void 0),Rr([(0,s.Z9)()],i.prototype,"footer",void 0),i}(s.rt),dh=function(){var l=function(i,e){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])})(i,e)};return function(i,e){function t(){this.constructor=i}l(i,e),i.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}}(),no=function(l,i,e,t){var a,r=arguments.length,n=r<3?i:null===t?t=Object.getOwnPropertyDescriptor(i,e):t;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(l,i,e,t);else for(var o=l.length-1;o>=0;o--)(a=l[o])&&(n=(r<3?a(n):r>3?a(i,e,n):a(i,e))||n);return r>3&&n&&Object.defineProperty(i,e,n),n},vh=function(l){function i(){return null!==l&&l.apply(this,arguments)||this}return dh(i,l),no([(0,s.Z9)()],i.prototype,"option",void 0),no([(0,s.Z9)()],i.prototype,"template",void 0),i}(s.rt),fh=function(){function l(i){this.parent=i,this.crudObj={sourceEvent:null,targetEvent:null,isCrudAction:!1}}return l.prototype.getQuery=function(){var i=this.parent.activeView.startDate(),e=this.parent.activeView.endDate();return this.parent.dataModule.generateQuery(i,e)},l.prototype.getTable=function(){return this.parent.eventSettings.query?this.parent.eventSettings.query.clone().fromTable:null},l.prototype.refreshDataManager=function(){var i=this;if(this.parent.activeView){var e=this.parent.activeView.startDate(),t=this.parent.activeView.endDate();this.parent.dataModule.getData(this.parent.dataModule.generateQuery(e,t)).then(function(n){return i.dataManagerSuccess(n)}).catch(function(n){return i.dataManagerFailure(n)})}},l.prototype.dataManagerSuccess=function(i){var e=this;!this.parent||this.parent&&this.parent.isDestroyed||this.parent.trigger("dataBinding",i,function(t){var r=(0,s.l7)([],t.result,null,!0);e.parent.eventsData=r.filter(function(n){return!n[e.parent.eventFields.isBlock]}),e.parent.blockData=r.filter(function(n){return n[e.parent.eventFields.isBlock]}),e.refreshProcessedData(),e.parent.dragAndDropModule&&"drag"===e.parent.dragAndDropModule.actionObj.action&&e.parent.dragAndDropModule.navigationWrapper(),e.parent.trigger("dataBound",null,function(){e.parent.hideSpinner(),e.parent.isPrinting&&e.parent.notify("print",{})})})},l.prototype.dataManagerFailure=function(i){var e=this;!this.parent||this.parent&&this.parent.isDestroyed||this.parent.trigger(pa,{error:i},function(){return e.parent.hideSpinner()})},l.prototype.refreshProcessedData=function(i){if(void 0===i&&(i=!1),this.parent.dragAndDropModule&&(this.parent.dragAndDropModule.actionObj.action="",(0,s.IV)([this.parent.element],"e-event-action")),this.parent.activeViewOptions&&this.parent.activeViewOptions.eventTemplate){var e=["eventTemplate"];if(this.crudObj.isCrudAction&&-1===["Agenda","MonthAgenda","Year","TimelineYear"].indexOf(this.parent.currentView)){e=[];for(var t=0,r=this.crudObj.sourceEvent.length;t<r;t++)e.push("eventTemplate_"+this.crudObj.sourceEvent[t].groupIndex),this.crudObj.targetEvent[t]&&this.crudObj.sourceEvent[t].groupIndex!==this.crudObj.targetEvent[t].groupIndex&&e.push("eventTemplate_"+this.crudObj.targetEvent[t].groupIndex)}this.parent.resetTemplates(e)}if(i)this.parent.notify(Ae,{processedData:this.parent.eventsProcessed});else{var o=(this.parent.eventsData||[]).concat(this.parent.blockData||[]);this.parent.notify(Ae,{processedData:this.parent.eventBase?this.parent.eventBase.processData(o):[]})}},l.prototype.refreshData=function(i){var e=this,t={requestType:i.requestType,cancel:!1,data:i.data,addedRecords:i.editParams.addedRecords,changedRecords:i.editParams.changedRecords,deletedRecords:i.editParams.deletedRecords};if(this.parent.dragAndDropModule&&this.parent.dragAndDropModule.actionObj&&this.parent.dragAndDropModule.actionObj.element&&(this.parent.dragAndDropModule.actionObj.element.style.display="none"),this.parent.resizeModule&&this.parent.resizeModule.actionObj&&this.parent.resizeModule.actionObj.element&&(this.parent.resizeModule.actionObj.element.style.display="none"),this.parent.isSpecificResourceEvents()&&("eventCreated"===i.requestType||"eventRemoved"===i.requestType)){this.crudObj.isCrudAction=!0,this.crudObj.sourceEvent=[];for(var n=function(p){a.crudObj.isCrudAction=!("eventRemoved"===i.requestType&&!(0,s.le)(p.parent));var u=a.parent.eventBase.getGroupIndexFromEvent(p);u>-1&&0===a.parent.crudModule.crudObj.sourceEvent.filter(function(d){return d.groupIndex===u}).length&&a.crudObj.isCrudAction&&a.crudObj.sourceEvent.push(a.parent.resourceBase.lastResourceLevel[u])},a=this,o=0,c=i.data instanceof Array?0===i.data.length&&"eventRemoved"===i.requestType?i.editParams.deletedRecords:i.data:"string"!=typeof i.data&&"number"!=typeof i.data||"eventRemoved"!==i.requestType?[i.data]:i.editParams.deletedRecords;o<c.length;o++)n(c[o]);this.crudObj.targetEvent=this.crudObj.sourceEvent}this.parent.dataModule.dataManager.dataSource.offline?this.parent.trigger(Qe,t,function(p){p.cancel||e.refreshDataManager()}):i.promise.then(function(){!e.parent||e.parent&&e.parent.isDestroyed||e.parent.trigger(Qe,t,function(p){p.cancel||e.refreshDataManager()})}).catch(function(p){!e.parent||e.parent&&e.parent.isDestroyed||e.parent.trigger(pa,{error:p})})},l.prototype.addEvent=function(i){var e=this;if(this.parent.eventSettings.allowAdding&&!this.parent.activeViewOptions.readonly){if(!this.isBlockEvent(i)&&this.parent.eventBase.isBlockRange(i))return void this.parent.quickPopup.openValidationError("blockAlert",i);var t=i instanceof Array?i:[i];this.parent.trigger(fe,{requestType:"eventCreate",cancel:!1,data:t,addedRecords:t,changedRecords:[],deletedRecords:[]},function(n){if(!n.cancel){var a=e.parent.eventFields,o={addedRecords:[],changedRecords:[],deletedRecords:[]},c=void 0;if(n.addedRecords instanceof Array){for(var h=0,p=n.addedRecords;h<p.length;h++){var u=p[h];u=e.parent.eventBase.updateEventDateTime(u);var d=(0,s.l7)({},e.parent.eventBase.processTimezone(u,!0),null,!0);o.addedRecords.push(d)}c=e.parent.dataModule.dataManager.saveChanges(o,a.id,e.getTable(),e.getQuery())}else{var v=e.parent.eventBase.processTimezone(n.addedRecords,!0);o.addedRecords.push(v),c=e.parent.dataModule.dataManager.insert(v,e.getTable(),e.getQuery())}e.refreshData({requestType:"eventCreated",cancel:!1,data:n.addedRecords,promise:c,editParams:o})}})}},l.prototype.saveEvent=function(i,e){var t=this;if(this.parent.eventSettings.allowEditing&&!this.parent.activeViewOptions.readonly){if("EditFollowingEvents"!==this.parent.currentAction&&!this.isBlockEvent(i)&&this.parent.eventBase.isBlockRange(i))return void this.parent.quickPopup.openValidationError("blockAlert",i);if(this.parent.currentAction=e,e)switch(e){case"Save":this.processSave(i);break;case"EditOccurrence":this.processOccurrences(i,e);break;case"EditFollowingEvents":this.processFollowSeries(i,e);break;case"EditSeries":this.processEntireSeries(i,e)}else this.parent.trigger(fe,{requestType:"eventChange",cancel:!1,data:i,addedRecords:[],changedRecords:i instanceof Array?i:[i],deletedRecords:[]},function(a){if(!a.cancel){var o=void 0,c=t.parent.eventFields,h={addedRecords:[],changedRecords:[],deletedRecords:[]};if(a.changedRecords instanceof Array){for(var p=0,u=a.changedRecords;p<u.length;p++){var d=u[p];d=t.parent.eventBase.updateEventDateTime(d);var v=(0,s.l7)({},t.parent.eventBase.processTimezone(d,!0),null,!0);h.changedRecords.push(v)}o=t.parent.dataModule.dataManager.saveChanges(h,c.id,t.getTable(),t.getQuery())}else{var f=t.parent.eventBase.processTimezone(a.changedRecords,!0);h.changedRecords.push(f),o=t.parent.dataModule.dataManager.update(c.id,f,t.getTable(),t.getQuery())}t.refreshData({requestType:"eventChanged",cancel:!1,data:a.changedRecords,promise:o,editParams:h})}})}},l.prototype.deleteEvent=function(i,e){var t=this;if(this.parent.eventSettings.allowDeleting&&!this.parent.activeViewOptions.readonly){this.parent.currentAction=e;var r;if(r="string"==typeof i||"number"==typeof i?this.parent.eventsData.filter(function(a){return a[t.parent.eventFields.id]===i}):i instanceof Array?i:[i],e)switch(e){case"Delete":this.processDelete(r);break;case"DeleteOccurrence":this.processOccurrences(r,e);break;case"DeleteFollowingEvents":this.processFollowSeries(r,e);break;case"DeleteSeries":this.processEntireSeries(r,e)}else this.parent.trigger(fe,{requestType:"eventRemove",cancel:!1,data:i,addedRecords:[],changedRecords:[],deletedRecords:r},function(a){if(!a.cancel){var o=void 0,c=t.parent.eventFields,h={addedRecords:[],changedRecords:[],deletedRecords:[]};a.deletedRecords.length>1?(h.deletedRecords=h.deletedRecords.concat(a.deletedRecords),o=t.parent.dataModule.dataManager.saveChanges(h,c.id,t.getTable(),t.getQuery())):(h.deletedRecords.push(a.deletedRecords[0]),o=t.parent.dataModule.dataManager.remove(c.id,a.deletedRecords[0],t.getTable(),t.getQuery())),t.parent.eventBase.selectWorkCellByTime(a.deletedRecords),t.refreshData({requestType:"eventRemoved",cancel:!1,data:a.deletedRecords,promise:o,editParams:h})}})}},l.prototype.processOccurrences=function(i,e){var t=this,r=[],n=!1;if(i instanceof Array)for(var a=0,o=i;a<o.length;a++){var c=o[a];r.push({occurrence:c,parent:this.getParentEvent(c)})}else r={occurrence:i,parent:this.getParentEvent(i)};var p={requestType:"EditOccurrence"===e?"eventChange":"eventRemove",cancel:!1,addedRecords:[],changedRecords:i instanceof Array?i:[i],deletedRecords:[]};p.data=r,this.parent.trigger(fe,p,function(u){if(!u.cancel){for(var d=t.parent.eventFields,v={addedRecords:[],changedRecords:[],deletedRecords:[]},f=r instanceof Array?r:[r],g=function(b,A){var E=u.changedRecords[b],S=f[b].parent,O=S[d.recurrenceException],k=void 0,M=void 0;switch(e){case"EditOccurrence":k=t.parent.eventsProcessed.filter(function(L){return L.Guid===E.Guid})[0],(M=t.excludeDateCheck(k[d.startTime],O))!==S[d.recurrenceException]?(S[d.recurrenceException]=M,E[d.recurrenceException]=nt(k[d.startTime]),E[d.recurrenceID]=S[d.id],E[d.followingID]=null,v.changedRecords.push(t.parent.eventBase.processTimezone(S,!0)),v.addedRecords.push(t.parent.eventBase.processTimezone(E,!0))):v.changedRecords.push(t.parent.eventBase.processTimezone(E,!0));break;case"DeleteOccurrence":E[d.recurrenceException]||(S[d.recurrenceException]=t.excludeDateCheck(E[d.startTime],O),v.changedRecords.push(t.parent.eventBase.processTimezone(S,!0))),E[d.id]!==S[d.id]&&(v.deletedRecords.push(E),n=!0)}},m=0,y=u.changedRecords.length;m<y;m++)g(m);var w=t.parent.dataModule.dataManager.saveChanges(v,d.id,t.getTable(),t.getQuery());t.parent.eventBase.selectWorkCellByTime(u.changedRecords),t.refreshData({requestType:"EditOccurrence"===e?"eventChanged":"eventRemoved",cancel:!1,data:n?u.deletedRecords:u.changedRecords,promise:w,editParams:v})}})},l.prototype.processFollowSeries=function(i,e){var t=this,r=[];if(i instanceof Array)for(var n=0,a=i;n<a.length;n++){var o=a[n];r.push({occurrence:o,parent:this.getParentEvent(o)})}else r={occurrence:i,parent:this.getParentEvent(i)};var h={requestType:"EditFollowingEvents"===e?"eventChange":"eventRemove",cancel:!1,addedRecords:[],changedRecords:i instanceof Array?i:[i],deletedRecords:[]};h.data=r,this.parent.trigger(fe,h,function(p){if(!p.cancel){for(var u=t.parent.eventFields,d={addedRecords:[],changedRecords:[],deletedRecords:[]},v=r instanceof Array?r:[r],f=function(D,b){var A=p.changedRecords[D],E=v[D].parent,S=t.parent.eventBase.getEventCollections(E,A),O=void 0;switch(e){case"EditFollowingEvents":if(t.processRecurrenceRule(E,A),O=!t.parent.eventBase.isFollowingEvent(E,A),A[u.followingID]=O?null:E[u.id],A[u.recurrenceID]=null,d.addedRecords.push(t.parent.eventBase.processTimezone(A,!0)),d.changedRecords.push(t.parent.eventBase.processTimezone(E,!0)),!t.parent.uiStateValues.isIgnoreOccurrence){if(A[u.recurrenceException]=null,S.occurrence.length>0){var k=S.occurrence.slice(-1)[0][u.recurrenceRule];-1===k.indexOf("COUNT")&&(A[u.recurrenceRule]=k)}S.follow.length>0&&(A[u.recurrenceRule]=S.follow.slice(-1)[0][u.recurrenceRule],d.deletedRecords=d.deletedRecords.concat(S.follow)),O&&(S.occurrence=S.occurrence.filter(function(M){return M[u.recurrenceID]===A[u.id]})),d.deletedRecords=d.deletedRecords.concat(S.occurrence)}break;case"DeleteFollowingEvents":t.processRecurrenceRule(E,A[u.startTime]),d.changedRecords.push(t.parent.eventBase.processTimezone(E,!0)),d.deletedRecords=d.deletedRecords.concat(S.occurrence).concat(S.follow)}},g=0,m=p.changedRecords.length;g<m;g++)f(g);var y=t.parent.dataModule.dataManager.saveChanges(d,u.id,t.getTable(),t.getQuery());t.parent.eventBase.selectWorkCellByTime(p.changedRecords),t.refreshData({requestType:"EditFollowingEvents"===e?"eventChanged":"eventRemoved",cancel:!1,data:p.changedRecords,promise:y,editParams:d})}})},l.prototype.processEntireSeries=function(i,e){var t=this,r=[],n=!1;if(i instanceof Array)for(var a=0,o=i;a<o.length;a++)r.push(this.getParentEvent(o[a],!0));else r=this.getParentEvent(i,!0);var p={requestType:"EditSeries"===e?"eventChange":"eventRemove",cancel:!1,addedRecords:[],changedRecords:i instanceof Array?i:[i],deletedRecords:[]};p.data=r,this.parent.trigger(fe,p,function(u){if(!u.cancel){for(var d=t.parent.eventFields,v={addedRecords:[],changedRecords:[],deletedRecords:[]},f=r instanceof Array?r:[r],g=function(b,A){var E=u.changedRecords[b],S=f[b],O=t.parent.eventBase.getEventCollections(S),k=O.follow.concat(O.occurrence);switch(e){case"EditSeries":if(E[d.startTime]>S[d.startTime]&&E[d.recurrenceRule]&&t.processRecurrenceRule(S,E),E[d.id]=S[d.id],E[d.recurrenceID]=null,E[d.followingID]=null,t.parent.uiStateValues.isIgnoreOccurrence&&E[d.recurrenceException]){var M=t.parent.eventsData.filter(function(L){return L[d.id]===E[d.id]});M.length>0&&(E[d.recurrenceRule]=M[0][d.recurrenceRule])}else E[d.recurrenceException]=null,v.deletedRecords=v.deletedRecords.concat(k);v.changedRecords.push(t.parent.eventBase.processTimezone(E,!0)),t.parent.uiStateValues.isIgnoreOccurrence=!1;break;case"DeleteSeries":v.deletedRecords=v.deletedRecords.concat(k.concat(S)),n=!0}},m=0,y=u.changedRecords.length;m<y;m++)g(m);var w=t.parent.dataModule.dataManager.saveChanges(v,d.id,t.getTable(),t.getQuery());t.parent.eventBase.selectWorkCellByTime(u.changedRecords),t.refreshData({requestType:"EditSeries"===e?"eventChanged":"eventRemoved",cancel:!1,data:n?u.deletedRecords:u.changedRecords,promise:w,editParams:v})}})},l.prototype.processDelete=function(i){for(var e=this,t=[],r=0,n=i;r<n.length;r++){var a=n[r];t.push(a[this.parent.eventFields.recurrenceRule]?{occurrence:a,parent:this.getParentEvent(a)}:a)}var o={requestType:"eventRemove",cancel:!1,addedRecords:[],changedRecords:[],deletedRecords:i};o.data=t,this.parent.trigger(fe,o,function(c){if(!c.cancel){for(var h=e.parent.eventFields,p={addedRecords:[],changedRecords:[],deletedRecords:[]},u=function(m,y){var w=(0,s.le)(c.deletedRecords[m][e.parent.eventFields.recurrenceRule]);if(!w){var D=t[m].parent,b=p.changedRecords.filter(function(S){return S[h.id]===D[h.id]}),A=c.deletedRecords[m][h.startTime];if(b.length>0){var E=b[0];E[h.recurrenceException]=e.excludeDateCheck(A,E[h.recurrenceException])}else D[h.recurrenceException]=e.excludeDateCheck(A,D[h.recurrenceException]);0===b.length&&p.changedRecords.push(e.parent.eventBase.processTimezone(D,!0)),w=c.deletedRecords[m][h.id]!==D[h.id]}w&&p.deletedRecords.push(c.deletedRecords[m])},d=0,v=c.deletedRecords.length;d<v;d++)u(d);var f=e.parent.dataModule.dataManager.saveChanges(p,h.id,e.getTable(),e.getQuery());e.refreshData({requestType:"eventRemoved",cancel:!1,data:c.deletedRecords,promise:f,editParams:p})}})},l.prototype.processSave=function(i){for(var e=this,t=i instanceof Array?i:[i],r=[],n=0,a=t;n<a.length;n++){var o=a[n];r.push(o[this.parent.eventFields.recurrenceRule]?{occurrence:o,parent:this.getParentEvent(o)}:o)}var c={requestType:"eventChange",cancel:!1,addedRecords:[],changedRecords:t,deletedRecords:[]};c.data=r,this.parent.trigger(fe,c,function(h){if(!h.cancel){for(var p=e.parent.eventFields,u={addedRecords:[],changedRecords:[],deletedRecords:[]},d=0,v=h.changedRecords;d<v.length;d++){var f=v[d];if(!(0,s.le)(f[p.recurrenceRule])&&(0,s.le)(f[p.recurrenceException])){var g=nt(f[p.startTime]),m=e.getParentEvent(f);m[p.recurrenceException]=(0,s.le)(m[p.recurrenceException])?g:m[p.recurrenceException].concat(","+g),f[p.id]=e.parent.getEventMaxID(),f[p.recurrenceException]=g,u.addedRecords.push(e.parent.eventBase.processTimezone(f,!0)),u.changedRecords.push(e.parent.eventBase.processTimezone(m,!0))}else u.changedRecords.push(e.parent.eventBase.processTimezone(f,!0))}var y=e.parent.dataModule.dataManager.saveChanges(u,p.id,e.getTable(),e.getQuery());e.refreshData({requestType:"eventChanged",cancel:!1,data:h.changedRecords,promise:y,editParams:u})}})},l.prototype.getParentEvent=function(i,e){void 0===e&&(e=!1);var t=this.parent.eventBase.getParentEvent(i,e)||i;return(t[this.parent.eventFields.startTimezone]||t[this.parent.eventFields.endTimezone])&&this.parent.eventBase.timezoneConvert(t),t},l.prototype.excludeDateCheck=function(i,e){var t=nt(i);return(0,s.le)(e)?e=t:-1===e.indexOf(t)&&(e=(0,s.le)(e)?t:e+","+t),e},l.prototype.processRecurrenceRule=function(i,e){var n,t=this.parent.eventFields,r=i[t.recurrenceRule];if(e instanceof Date)n=new Date(+e);else{n=new Date(+e[t.startTime]);var a=e[t.recurrenceRule];if(a){var o=i[t.startTime],h=kn(o,a,"DeleteFollowingEvents"===this.parent.currentAction?e[t.recurrenceException]:null,this.parent.activeViewOptions.firstDayOfWeek),p=new Date(h.slice(-1)[0]);p.setHours(n.getHours(),n.getMinutes(),n.getSeconds()),n.setHours(o.getHours(),o.getMinutes(),o.getSeconds()),e[t.recurrenceRule]=this.getUpdatedRecurrenceRule(a,new Date(+p),!1)}}i[t.recurrenceRule]=this.getUpdatedRecurrenceRule(r,V(new Date(n.getTime()),-1),!0)},l.prototype.getUpdatedRecurrenceRule=function(i,e,t){for(var n="",a=0,o=i.split(";");a<o.length;a++){var c=o[a];if(""!==c){var h=c.split("=")[0],p=c.split("=")[1];("COUNT"===h||"UNTIL"===h)&&(p=nt(e),c=c.replace(c,"UNTIL="+p)),n+=c+";"}}return t&&-1===n.indexOf("UNTIL")&&(n+="UNTIL="+nt(e)),n},l.prototype.isBlockEvent=function(i){for(var t=!1,r=0,n=i instanceof Array?i:[i];r<n.length;r++)t=n[r][this.parent.eventFields.isBlock]||!1;return t},l.prototype.destroy=function(){this.crudObj=null,this.parent=null},l}(),gh=function(){function l(i){this.parent=i,s.bi.add(this.parent.element,"mouseover",this.onHover,this)}return l.prototype.cellMouseDown=function(i){this.isPreventAction(i)||this.parent.notify(zr,{event:i})},l.prototype.cellClick=function(i){var e=this;if(!this.isPreventAction(i)){var r=(0,s.oq)(i.target,".e-work-cells,.e-all-day-cells,.e-header-cells");if(!(0,s.le)(r)){if(!(0,s.le)((0,s.oq)(i.target,"."+sr)))return void this.parent.eventWindow.openEditor(this.parent.activeCellsData,"Add");var n=(0,s.oq)(i.target,"."+Et),a=this.parent.getNavigateView(),o=this.parent.currentView===a;if((0,s.le)(n)||o||(0,s.le)(this.parent.viewOptions[a.charAt(0).toLowerCase()+a.slice(1)])){if(this.parent.activeViewOptions.readonly&&"MonthAgenda"!==this.parent.currentView)return void(this.parent.quickPopup&&this.parent.quickPopup.quickPopupHide());if(this.parent.isAdaptive&&(i.target.classList.contains(Te)||(0,s.oq)(i.target,"."+Te)))return;var c=r.classList.contains(R)||r.classList.contains(U);if(c&&i.shiftKey&&1===i.which&&this.parent.keyboardInteractionModule)return void this.parent.keyboardInteractionModule.onMouseSelection(i);this.parent.activeCellsData=this.parent.getCellDetails(r);var h=(0,s.l7)(this.parent.activeCellsData,{cancel:!1,event:i,name:"cellClick"});this.parent.trigger(Ne,h,function(u){u.cancel?e.parent.quickPopup&&e.parent.quickPopup.quickPopupHide():(c&&e.parent.selectCell(r),e.parent.allowInline?e.parent.notify(Pt,{element:u.element,groupIndex:u.groupIndex,type:"Cell"}):e.parent.notify(Ne,u))})}else{var p=this.parent.getDateFromElement(r);!(0,s.le)(p)&&!this.parent.isAdaptive&&this.parent.isMinMaxDate(p)&&(this.parent.setProperties({selectedDate:p},!0),this.parent.changeView(this.parent.getNavigateView(),i))}}}},l.prototype.cellDblClick=function(i){var e=this,r=(0,s.oq)(i.target,".e-work-cells,.e-all-day-cells,.e-header-cells");if(!(this.parent.activeViewOptions.readonly||this.isPreventAction(i)||(0,s.le)(r))){var n=(0,s.l7)(this.parent.activeCellsData,{cancel:!1,event:i,name:"cellDoubleClick"});this.parent.trigger("cellDoubleClick",n,function(a){var o=new Date(a.startTime.getTime());!e.parent.isMinMaxDate(new Date(o.setHours(0,0,0,0)))||a.cancel||e.parent.eventWindow.openEditor(e.parent.activeCellsData,"Add")})}},l.prototype.onHover=function(i){var t=(0,s.oq)(i.target,".e-work-cells,.e-time-slots,.e-all-day-cells,.e-header-cells,.e-resource-cells,.e-appointment,.e-week-number,.e-month-header");t&&this.parent.trigger("hover",{element:t,event:i})},l.prototype.isPreventAction=function(i){if((0,s.oq)(i.target,"."+Et))return!1;if((0,s.oq)(i.target,"."+G)&&!(0,s.oq)(i.target,"."+Te))return!0;var e=(0,s.oq)(i.target,"."+P+",."+pt);return!((0,s.le)(e)&&(e=(0,s.oq)(i.target,"."+ie),!this.parent.activeView.isTimelineView()||(0,s.le)(e)))},l.prototype.destroy=function(){s.bi.remove(this.parent.element,"mouseover",this.onHover)},l}(),mh=function(){var l=function(i,e){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])})(i,e)};return function(i,e){function t(){this.constructor=i}l(i,e),i.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}}(),xr=function(l,i,e,t){var a,r=arguments.length,n=r<3?i:null===t?t=Object.getOwnPropertyDescriptor(i,e):t;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(l,i,e,t);else for(var o=l.length-1;o>=0;o--)(a=l[o])&&(n=(r<3?a(n):r>3?a(i,e,n):a(i,e))||n);return r>3&&n&&Object.defineProperty(i,e,n),n},qe=function(l){function i(){return null!==l&&l.apply(this,arguments)||this}return mh(i,l),xr([(0,s.Z9)()],i.prototype,"name",void 0),xr([(0,s.Z9)()],i.prototype,"default",void 0),xr([(0,s.Z9)()],i.prototype,"title",void 0),xr([(0,s.Z9)({})],i.prototype,"validation",void 0),i}(s.rt),yh=function(){var l=function(i,e){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])})(i,e)};return function(i,e){function t(){this.constructor=i}l(i,e),i.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}}(),De=function(l,i,e,t){var a,r=arguments.length,n=r<3?i:null===t?t=Object.getOwnPropertyDescriptor(i,e):t;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(l,i,e,t);else for(var o=l.length-1;o>=0;o--)(a=l[o])&&(n=(r<3?a(n):r>3?a(i,e,n):a(i,e))||n);return r>3&&n&&Object.defineProperty(i,e,n),n},Th=function(l){function i(){return null!==l&&l.apply(this,arguments)||this}return yh(i,l),De([(0,s.Z9)("Id")],i.prototype,"id",void 0),De([(0,s.Z9)("IsBlock")],i.prototype,"isBlock",void 0),De([(0,s.Zz)({name:"Subject"},qe)],i.prototype,"subject",void 0),De([(0,s.Zz)({name:"StartTime"},qe)],i.prototype,"startTime",void 0),De([(0,s.Zz)({name:"EndTime"},qe)],i.prototype,"endTime",void 0),De([(0,s.Zz)({name:"StartTimezone"},qe)],i.prototype,"startTimezone",void 0),De([(0,s.Zz)({name:"EndTimezone"},qe)],i.prototype,"endTimezone",void 0),De([(0,s.Zz)({name:"Location"},qe)],i.prototype,"location",void 0),De([(0,s.Zz)({name:"Description"},qe)],i.prototype,"description",void 0),De([(0,s.Zz)({name:"IsAllDay"},qe)],i.prototype,"isAllDay",void 0),De([(0,s.Zz)({name:"RecurrenceID"},qe)],i.prototype,"recurrenceID",void 0),De([(0,s.Zz)({name:"RecurrenceRule"},qe)],i.prototype,"recurrenceRule",void 0),De([(0,s.Zz)({name:"RecurrenceException"},qe)],i.prototype,"recurrenceException",void 0),De([(0,s.Z9)("IsReadonly")],i.prototype,"isReadonly",void 0),De([(0,s.Z9)("FollowingID")],i.prototype,"followingID",void 0),i}(s.rt),wh=function(){var l=function(i,e){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])})(i,e)};return function(i,e){function t(){this.constructor=i}l(i,e),i.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}}(),pe=function(l,i,e,t){var a,r=arguments.length,n=r<3?i:null===t?t=Object.getOwnPropertyDescriptor(i,e):t;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(l,i,e,t);else for(var o=l.length-1;o>=0;o--)(a=l[o])&&(n=(r<3?a(n):r>3?a(i,e,n):a(i,e))||n);return r>3&&n&&Object.defineProperty(i,e,n),n},Dh=function(l){function i(){return null!==l&&l.apply(this,arguments)||this}return wh(i,l),pe([(0,s.Z9)()],i.prototype,"template",void 0),pe([(0,s.Z9)([])],i.prototype,"dataSource",void 0),pe([(0,s.Z9)()],i.prototype,"query",void 0),pe([(0,s.Zz)({},Th)],i.prototype,"fields",void 0),pe([(0,s.Z9)(!1)],i.prototype,"enableTooltip",void 0),pe([(0,s.Z9)("AllDayRow")],i.prototype,"spannedEventPlacement",void 0),pe([(0,s.Z9)(1)],i.prototype,"minimumEventDuration",void 0),pe([(0,s.Z9)()],i.prototype,"tooltipTemplate",void 0),pe([(0,s.Z9)()],i.prototype,"resourceColorField",void 0),pe([(0,s.Z9)(!1)],i.prototype,"editFollowingEvents",void 0),pe([(0,s.Z9)(!0)],i.prototype,"allowAdding",void 0),pe([(0,s.Z9)(!0)],i.prototype,"allowEditing",void 0),pe([(0,s.Z9)(!0)],i.prototype,"allowDeleting",void 0),pe([(0,s.Z9)(!1)],i.prototype,"enableMaxHeight",void 0),pe([(0,s.Z9)(!1)],i.prototype,"enableIndicator",void 0),pe([(0,s.Z9)(!1)],i.prototype,"ignoreWhitespace",void 0),pe([(0,s.Z9)()],i.prototype,"sortComparer",void 0),i}(s.rt),Ch=function(){var l=function(i,e){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])})(i,e)};return function(i,e){function t(){this.constructor=i}l(i,e),i.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}}(),si=function(l,i,e,t){var a,r=arguments.length,n=r<3?i:null===t?t=Object.getOwnPropertyDescriptor(i,e):t;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(l,i,e,t);else for(var o=l.length-1;o>=0;o--)(a=l[o])&&(n=(r<3?a(n):r>3?a(i,e,n):a(i,e))||n);return r>3&&n&&Object.defineProperty(i,e,n),n},Sh=function(l){function i(){return null!==l&&l.apply(this,arguments)||this}return Ch(i,l),si([(0,s.Z9)(!1)],i.prototype,"byDate",void 0),si([(0,s.Z9)(!0)],i.prototype,"byGroupID",void 0),si([(0,s.Z9)(!1)],i.prototype,"allowGroupEdit",void 0),si([(0,s.Z9)([])],i.prototype,"resources",void 0),si([(0,s.Z9)(!0)],i.prototype,"enableCompactView",void 0),si([(0,s.Z9)()],i.prototype,"headerTooltipTemplate",void 0),i}(s.rt),Eh=function(){var l=function(i,e){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])})(i,e)};return function(i,e){function t(){this.constructor=i}l(i,e),i.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}}(),Ce=function(l,i,e,t){var a,r=arguments.length,n=r<3?i:null===t?t=Object.getOwnPropertyDescriptor(i,e):t;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(l,i,e,t);else for(var o=l.length-1;o>=0;o--)(a=l[o])&&(n=(r<3?a(n):r>3?a(i,e,n):a(i,e))||n);return r>3&&n&&Object.defineProperty(i,e,n),n},Ah=function(l){function i(){return null!==l&&l.apply(this,arguments)||this}return Eh(i,l),Ce([(0,s.Z9)()],i.prototype,"field",void 0),Ce([(0,s.Z9)()],i.prototype,"title",void 0),Ce([(0,s.Z9)()],i.prototype,"name",void 0),Ce([(0,s.Z9)(!1)],i.prototype,"allowMultiple",void 0),Ce([(0,s.Z9)([])],i.prototype,"dataSource",void 0),Ce([(0,s.Z9)()],i.prototype,"query",void 0),Ce([(0,s.Z9)("Id")],i.prototype,"idField",void 0),Ce([(0,s.Z9)("Text")],i.prototype,"textField",void 0),Ce([(0,s.Z9)("Expanded")],i.prototype,"expandedField",void 0),Ce([(0,s.Z9)("GroupID")],i.prototype,"groupIDField",void 0),Ce([(0,s.Z9)("Color")],i.prototype,"colorField",void 0),Ce([(0,s.Z9)("StartHour")],i.prototype,"startHourField",void 0),Ce([(0,s.Z9)("EndHour")],i.prototype,"endHourField",void 0),Ce([(0,s.Z9)("WorkDays")],i.prototype,"workDaysField",void 0),Ce([(0,s.Z9)("CssClass")],i.prototype,"cssClassField",void 0),i}(s.rt),bh=function(){function l(i){this.resourceCollection=[],this.leftPixel=25,this.parent=i}return l.prototype.renderResourceHeaderIndent=function(i){var e=(0,s.az)("td",{className:"e-resource-left-td"}),t=(0,s.az)("div",{className:$r});this.parent.activeViewOptions.headerIndentTemplate?this.parent.renderHeaderIndentTemplate({className:[e.className],type:"emptyCells"},e):e.appendChild(t),this.parent.trigger(ue,{elementType:"emptyCells",element:e}),i.appendChild(e)},l.prototype.hideResourceRows=function(i){if(!(this.resourceCollection.length<=1||this.parent.virtualScrollModule))for(var e=this.lastResourceLevel.length,t=0;t<e;t++){var r=this.lastResourceLevel[t].resourceData,n=this.lastResourceLevel[t].resource;if(r.ClassName===Le&&!r[n.expandedField]&&!(0,s.le)(r[n.expandedField])){var o=[].slice.call(i.children).slice(t+1,t+(parseInt(r.Count,10)+1));(0,s.cn)(o,he)}}},l.prototype.createResourceColumn=function(){var i=this.resourceCollection,e=(0,s.az)("div",{className:Oe}),t=this.parent.activeView.createTableLayout(Xi);!this.parent.uiStateValues.isGroupAdaptive&&this.parent.rowAutoHeight&&this.parent.activeView.isTimelineView()&&this.parent.activeViewOptions.group.resources.length>0&&(0,s.cn)([t],Rn);var r=t.querySelector("tbody"),n=this.generateTreeData(!0);if(this.countCalculation(i.slice(0,-2),i.slice(0,-1)),this.renderedResources=this.lastResourceLevel,this.parent.virtualScrollModule){var a=this.parent.virtualScrollModule.getRenderedCount();this.setExpandedResources(),n=this.expandedResources.slice(0,a),this.renderedResources=n}return(0,s.R3)(this.getContentRows(n),r),this.hideResourceRows(r),t.appendChild(r),e.appendChild(t),e},l.prototype.setRenderedResources=function(){var i=this.resourceCollection;this.generateTreeData(!0),this.countCalculation(i.slice(0,-2),i.slice(0,-1)),this.renderedResources=this.lastResourceLevel},l.prototype.setExpandedResources=function(){for(var i=[],e=0;e<this.lastResourceLevel.length;e++){var t=this.lastResourceLevel[e].resourceData,r=t.Count;i.push(this.lastResourceLevel[e]);var n=t[this.lastResourceLevel[e].resource.expandedField];!(0,s.le)(n)&&!n&&r>0&&(e+=r)}this.expandedResources=i},l.prototype.getContentRows=function(i,e){for(var r,n,t=[],a=this.resourceCollection,o=(0,s.az)("tr"),c=(0,s.az)("td",{attrs:{tabindex:e?"-1":"0"}}),h=0;h<i.length;h++){var p=c.cloneNode();if((n=ci(a,"name",i[h].resource.name))===a.length-1?((0,s.l7)(i[h].resourceData,{ClassName:Da}),this.renderedResources[h].className=[Da]):((0,s.l7)(i[h].resourceData,{ClassName:Le}),this.renderedResources[h].className=[Le]),r=n*this.leftPixel+"px",i[h].resourceData.ClassName===Le&&!(0,s.le)(i[h].resourceData.Count)&&i[h].resourceData.Count>0){var u;u=i[h].resourceData[a[n].expandedField]||(0,s.le)(i[h].resourceData[a[n].expandedField])?$e:Wt;var d=(0,s.az)("div");(0,s.cn)([d],[zt,u]),this.setMargin(d,r),p.appendChild(d),this.resourceCollection.length>1&&s.bi.add(d,"click",this.onTreeIconClick,this)}this.parent.activeView.setResourceHeaderContent(p,i[h],$r),p.setAttribute("data-group-index",i[h].groupIndex.toString()),p.setAttribute("aria-label",i[h].resourceData[i[h].resource.textField]+" resource"),this.parent.activeViewOptions.resourceHeaderTemplate||this.setMargin(p.querySelector("."+$r),r),(0,s.cn)([p],[Ve,i[h].resourceData.ClassName]),this.parent.trigger(ue,{elementType:"resourceHeader",element:p,groupIndex:i[h].groupIndex});var g=o.cloneNode();g.appendChild(p),t.push(g)}return t},l.prototype.setMargin=function(i,e){this.parent.enableRtl?i.style.marginRight=e:i.style.marginLeft=e},l.prototype.countCalculation=function(i,e){for(var t,r=0;r<i.length;r++){for(var n=i[i.length-(r+1)].dataSource,a=0;a<n.length;a++){var o=0;if(this.parent.activeViewOptions.group.byGroupID){var c=(new J.AE).where(e[e.length-1].groupIDField,"equal",n[a][i[i.length-(r+1)].idField]);t=new J.hm(e[e.length-1].dataSource).executeLocal(c)}else t=e[e.length-1].dataSource;for(var h=0;h<t.length;h++)o+=parseInt(t[h].Count,10);o+=parseInt(n[a].Count,10),(0,s.l7)(n[a],{Count:o})}e=e.slice(0,-1)}},l.prototype.onTreeIconClick=function(i){var e=this;this.parent.eventTooltip&&this.parent.eventTooltip.close();var r,t=i.target,n=(0,s.oq)(t,"."+Le).parentElement,a=parseInt(n.children[0].getAttribute("data-group-index"),10),o={cancel:!1,event:i,groupIndex:a,requestType:t.classList.contains($e)?"resourceCollapse":"resourceExpand"};this.parent.trigger(fe,o,function(c){if(!c.cancel){t.classList.contains($e)?((0,s.s1)(t,[Wt],[$e]),r=!0):((0,s.s1)(t,[$e],[Wt]),r=!1);for(var p=0,u=[].slice.call(e.parent.element.querySelectorAll("."+P));p<u.length;p++)(0,s.Od)(u[p]);e.parent.virtualScrollModule?e.updateVirtualContent(a,r,i,t):e.updateContent(a,r);var v={cssProperties:e.parent.getCssProperties(),module:"scroll"};e.parent.notify(be,v),o={cancel:!1,event:i,groupIndex:a,requestType:t.classList.contains($e)?"resourceExpanded":"resourceCollapsed"},e.parent.refreshEvents(!1),e.parent.trigger(Qe,o)}})},l.prototype.updateContent=function(i,e){for(var a,t=[],r=[],n=[],o=this.lastResourceLevel[i].resourceData,c=[].slice.call(this.parent.element.querySelectorAll("."+Oe+" tr")),h=[].slice.call(this.parent.element.querySelectorAll("."+F+" tbody tr")),p=[].slice.call(this.parent.element.querySelectorAll("."+F+" ."+He)),u=0;u<o.Count;u++)t.push(c[i+u+1]),r.push(h[i+u+1]),n.push(p[i+u+1]);for(var d=this.lastResourceLevel,v=0;v<t.length;v++){var f=!0;if(a=t[v].children[0].classList.contains(Le),d[i].resourceData[d[i].resource.expandedField]=!e,e)a&&(g=t[v].querySelector("."+zt))&&(0,s.s1)(g,[Wt],[$e]),t[v].classList.contains(he)||(0,s.cn)([t[v],r[v],n[v]],he);else{if(a){var g,m=t[v].rowIndex;!d[m].resourceData[d[m].resource.expandedField]&&!(0,s.le)(d[m].resourceData[d[m].resource.expandedField])&&(t.splice(v+1,parseInt(d[m].resourceData.Count,10)),r.splice(v+1,parseInt(d[m].resourceData.Count,10)),n.splice(v+1,parseInt(d[m].resourceData.Count,10)),f=!1),f&&(g=t[v].querySelector("."+zt))&&(0,s.s1)(g,[$e],[Wt])}t[v].classList.contains(he)&&(0,s.IV)([t[v],r[v],n[v]],he)}}},l.prototype.updateVirtualContent=function(i,e,t,r){this.lastResourceLevel[i].resourceData[this.lastResourceLevel[i].resource.expandedField]=!e,this.setExpandedResources();var n=this.parent.virtualScrollModule.getRenderedCount(),a=this.expandedResources.indexOf(this.renderedResources[0]);if(this.renderedResources=this.expandedResources.slice(a,a+n),this.renderedResources.length<n){var o=this.expandedResources.length-n;this.renderedResources=this.expandedResources.slice(o=o>0?o:0,this.expandedResources.length)}var c=this.parent.element.querySelector("."+fi);this.parent.virtualScrollModule.updateVirtualTrackHeight(c);var h=this.parent.element.querySelector("."+Oe+" table"),p=this.parent.element.querySelector("."+F+" table"),u=this.parent.element.querySelector("."+ht);this.parent.virtualScrollModule.updateContent(h,p,u,this.renderedResources);var d=this.parent.element.querySelector("."+Ut);(0,s.le)(d)||(d.style.height=this.parent.element.querySelector("."+X).offsetHeight+"px")},l.prototype.renderResourceHeader=function(){var i=(0,s.az)("div",{className:di});if(i.innerHTML='<div class="'+sn+'"><div class="'+Za+'"><div class="e-icons '+Ka+'"></div></div><div class="'+Qa+'"></div></div>',"MonthAgenda"===this.parent.currentView){var e=this.parent.activeView.getPanel().querySelector("."+F);e.insertBefore(i,e.querySelector("."+vi))}else this.parent.element.insertBefore(i,this.parent.element.querySelector("."+Me));this.renderResourceHeaderText(),s.bi.add(i.querySelector("."+Ka),"click",this.menuClick,this)},l.prototype.renderResourceTree=function(){this.popupOverlay=(0,s.az)("div",{className:Xa});var i=(0,s.az)("div",{className:Vi+" e-popup-close"});if("MonthAgenda"===this.parent.currentView){var e=this.parent.activeView.getPanel().querySelector("."+vi);e.insertBefore(i,e.children[0]),e.appendChild(this.popupOverlay)}else this.parent.element.querySelector("."+Me).appendChild(i),this.parent.element.querySelector("."+Me).appendChild(this.popupOverlay);var t=(0,s.az)("div",{className:"e-resource-tree"});i.appendChild(t),this.treeViewObj=new ca.LQ({cssClass:this.parent.cssClass,enableRtl:this.parent.enableRtl,fields:{dataSource:[].slice.call(this.generateTreeData()),id:"resourceId",text:"resourceName",child:"resourceChild"},nodeTemplate:this.parent.resourceHeaderTemplate,nodeClicked:this.resourceClick.bind(this),created:this.resourceTreeCreated.bind(this)}),this.treeViewObj.appendTo(t),this.treeViewObj.expandAll(),this.treePopup=new Ee.GI(i,{targetType:"relative",actionOnScroll:"none",content:this.treeViewObj.element,relateTo:this.parent.element.querySelector("."+Me),enableRtl:this.parent.enableRtl,hideAnimation:{name:"SlideLeftOut",duration:500},showAnimation:{name:"SlideLeftIn",duration:500},viewPortElement:this.parent.element.querySelector("."+("MonthAgenda"===this.parent.currentView?vi:Me))}),this.parent.on(Xe,this.documentClick,this)},l.prototype.resourceTreeCreated=function(){this.parent.portals&&(this.parent.portals=this.parent.portals.concat(this.treeViewObj.portals),this.parent.renderTemplates())},l.prototype.generateTreeData=function(i){for(var e=this,t=[],r=[],n=0,a=function(p,u){var d=function(v,f,g){var y,w,m=e.resourceCollection[f];i?(r.push(w={type:"resourceHeader",resource:v.resource,resourceData:v.resourceData,groupIndex:n,groupOrder:v.groupOrder}),n++):y={resourceId:g,resourceName:v.resourceData[m.textField],resource:v.resource,resourceData:v.resourceData},v.child.length>0&&!i&&(y.resourceChild=[]);for(var D=1,b=0,A=v.child;b<A.length;b++){var E=A[b];i?d(E,f+1,g+"-"+D):y.resourceChild.push(d(E,f+1,g+"-"+D)),D+=1}return i&&(0,s.l7)(w.resourceData,{Count:D-1}),y};i?d(o.resourceTreeLevel[p],0,(p+1).toString()):t.push(d(o.resourceTreeLevel[p],0,(p+1).toString()))},o=this,c=0,h=this.resourceTreeLevel.length;c<h;c++)a(c);return i?(this.lastResourceLevel=r,r):t},l.prototype.renderResourceHeaderText=function(){for(var i=this.lastResourceLevel[this.parent.uiStateValues.groupIndex],e=[],t=function(d,v){var f=r.resourceCollection[d],g=f.dataSource.filter(function(w){return w[f.idField]===i.groupOrder[d]}),m=(0,s.az)("div",{className:Oa,innerHTML:g[0][f.textField]});e.push(m);var y=(0,s.az)("div",{className:"e-icons e-icon-next"});e.push(y)},r=this,n=0,a=i.groupOrder.length;n<a;n++)t(n);e.pop();var c=("MonthAgenda"===this.parent.currentView?this.parent.activeView.getPanel():this.parent.element).querySelector("."+Qa);Ie(c);for(var h=0,p=e;h<p.length;h++)c.appendChild(p[h]);1===this.lastResourceLevel.length&&(0,s.cn)([this.parent.element.querySelector("."+Za)],j)},l.prototype.menuClick=function(i){if(this.parent.element.querySelector("."+Vi).classList.contains(re))this.treePopup.hide(),(0,s.IV)([this.popupOverlay],ct);else{var e=[].slice.call(this.treeViewObj.element.querySelectorAll(".e-list-item:not(.e-has-child)"));(0,s.IV)(e,"e-active"),(0,s.cn)([e[this.parent.uiStateValues.groupIndex]],"e-active"),this.treePopup.show(),(0,s.cn)([this.popupOverlay],ct)}},l.prototype.selectResourceByIndex=function(i){this.lastResourceLevel&&i>-1&&i<this.lastResourceLevel.length&&this.triggerEvents(i)},l.prototype.resourceClick=function(i){if(!i.node.classList.contains("e-has-child")){this.treePopup.hide(),(0,s.IV)([this.popupOverlay],ct);var t=[].slice.call(this.treeViewObj.element.querySelectorAll(".e-list-item:not(.e-has-child)")).indexOf(i.node);this.triggerEvents(t,i),i.event.preventDefault()}},l.prototype.triggerEvents=function(i,e){var t=this,r={cancel:!1,event:e?e.event:null,groupIndex:i,requestType:"resourceChange"};this.parent.trigger(fe,r,function(n){n.cancel||(t.parent.uiStateValues.groupIndex=n.groupIndex,t.parent.renderModule.render(t.parent.currentView),t.parent.trigger(Qe,r={cancel:!1,event:e?e.event:null,groupIndex:t.parent.uiStateValues.groupIndex,requestType:"resourceChanged"}))})},l.prototype.documentClick=function(i){if(!(0,s.oq)(i.event.target,"."+Vi)){var e=this.parent.element.querySelector("."+Vi);e&&e.classList.contains(re)&&(this.treePopup.hide(),(0,s.IV)([this.popupOverlay],ct))}},l.prototype.bindResourcesData=function(i){var e=this;this.parent.showSpinner();for(var t=[],r=0,n=this.parent.resources;r<n.length;r++){var a=n[r],o=new ss(a.dataSource,a.query);t.push(o.getData(o.generateQuery()))}Promise.all(t).then(function(c){return e.dataManagerSuccess(c,i)}).catch(function(c){return e.parent.crudModule.dataManagerFailure(c)})},l.prototype.dataManagerSuccess=function(i,e){if(!(!this.parent||this.parent&&this.parent.isDestroyed)){this.parent.resourceCollection=[];for(var t=0,r=i.length;t<r;t++){var a=this.getResourceModel(this.parent.resources[t],i[t].result);this.parent.resourceCollection.push(a)}this.refreshLayout(e)}},l.prototype.getResourceModel=function(i,e){return{field:i.field,title:i.title,name:i.name,allowMultiple:i.allowMultiple,dataSource:e||i.dataSource,idField:i.idField,textField:i.textField,groupIDField:i.groupIDField,colorField:i.colorField,startHourField:i.startHourField,endHourField:i.endHourField,workDaysField:i.workDaysField,expandedField:i.expandedField,cssClassField:i.cssClassField}},l.prototype.refreshLayout=function(i){((0,s.le)(this.parent.uiStateValues.groupIndex)||!this.parent.enablePersistence)&&(this.parent.uiStateValues.groupIndex=0),this.parent.renderElements(i)},l.prototype.setResourceCollection=function(){var i=[];if(this.resourceCollection=[],this.colorIndex=null,this.parent.activeViewOptions.group.resources.length>0)for(var e=0,t=this.parent.activeViewOptions.group.resources;e<t.length;e++){var n=ci(this.parent.resourceCollection,"name",r=t[e]);n>=0&&i.push(this.parent.resourceCollection[n])}else this.parent.resourceCollection.length>0&&(i=this.parent.resourceCollection);for(var a=0,o=0,c=i;o<c.length;o++){var r,h=this.getResourceModel(r=c[o]);r.name===this.parent.eventSettings.resourceColorField&&(this.colorIndex=a),a++,this.resourceCollection.push(h)}(0,s.le)(this.colorIndex)&&(this.colorIndex=this.resourceCollection.length-1)},l.prototype.generateResourceLevels=function(i,e){var t=this,n=[],a=[],o=function(c,h,p,u,d){var v=[],f=c[0];if(f){var g=void 0;if(u&&t.parent.activeViewOptions.group.byGroupID){var m=u[p.idField];g=f.dataSource.filter(function(H){return H[f.groupIDField]===m})}else g=f.dataSource;for(var y=0;y<g.length;y++){var w=[];d&&d.length>0&&(w=w.concat(d)),w.push(g[y][f.idField]);var D=o(c.slice(1),h+1,f,g[y],w);if(!(0===h&&0===D.length&&t.resourceCollection.length>1)){var b=[],A=t.parent.activeView.renderDates,E=void 0;if(!t.parent.activeViewOptions.group.byDate&&h+1===t.resourceCollection.length){var S=g[y][f.workDaysField],O=g[y][f.startHourField],k=g[y][f.endHourField];S&&S.length>0?(A=t.parent.activeView.getRenderDates(S),E=S,b=t.parent.activeView.getDateSlots(A,S)):(E=t.parent.activeViewOptions.workDays,b=i);var M=t.generateCustomHours(b,O,k,w);a=a.concat(M)}v.push({type:"resourceHeader",className:["e-resource-cells"],resourceLevelIndex:h,groupOrder:w,resource:f,resourceData:g[y],colSpan:t.parent.activeViewOptions.group.byDate?1:b.length,renderDates:A,workDays:E,cssClass:g[y][f.cssClassField],child:D})}}return n[h]||(n[h]=[]),v.length>0&&n[h].push(v),v}return[]};return this.resourceTreeLevel=o(this.resourceCollection,0),e?[]:this.generateHeaderLevels(n,a,i)},l.prototype.generateCustomHours=function(i,e,t,r){for(var n=(0,s.l7)([],i,null,!0),a=0,o=n;a<o.length;a++){var c=o[a];e&&(c.startHour=this.parent.getStartEndTime(e)),t&&(c.endHour=this.parent.getStartEndTime(t)),r&&(c.groupOrder=r)}return n},l.prototype.generateHeaderLevels=function(i,e,t){for(var r=[],n=i.length-1;n>=0;n--)for(var a=0,o=0,c=i[n];o<c.length;o++)for(var p=0,u=c[o];p<u.length;p++){var d=u[p];if(i[n+1]&&i[n+1].length>0){var v=i[n+1][a];if(!v)continue;for(var f=0,g=0,m=v;g<m.length;g++){var y=m[g];(!this.parent.activeViewOptions.group.byGroupID||this.parent.activeViewOptions.group.byGroupID&&y.resourceData[y.resource.groupIDField]===d.resourceData[d.resource.idField])&&(f+=y.colSpan)}d.colSpan=f}d.groupIndex=a,a++,r[d.resourceLevelIndex]=r[d.resourceLevelIndex]||[],r[d.resourceLevelIndex].push(d)}if(this.lastResourceLevel=r.slice(-1)[0]||[],!this.parent.activeViewOptions.group.byDate){for(var w=0,D=0,b=this.lastResourceLevel;D<b.length;D++){var A=b[D];for(n=0;n<A.colSpan;n++)e[w].groupIndex=A.groupIndex,w++}return r.push(e),r}for(var E=[],S=(0,s.l7)([],r,null,!0),O=0,k=0,M=S[0];k<M.length;k++)O+=M[k].colSpan;for(var N=[],H=0,z=t;H<z.length;H++){var q=z[H];q.colSpan=O,N.push(q);for(var B=(0,s.l7)([],S,null,!0),K=0,Fe=B.length;K<Fe;K++){if(K===B.length-1)for(var ot=0,Dt=B[K];ot<Dt.length;ot++){var ve=Dt[ot];ve.date=q.date,ve.workDays=q.workDays,ve.startHour=this.parent.getStartEndTime(ve.resourceData[ve.resource.startHourField])||q.startHour,ve.endHour=this.parent.getStartEndTime(ve.resourceData[ve.resource.endHourField])||q.endHour}E[K]||(E[K]=[]),E[K]=E[K].concat(B[K])}}return E.unshift(N),E},l.prototype.setResourceValues=function(i,e){var t=this,r=function(c,h,p){i[h]=t.resourceCollection[c].allowMultiple&&t.parent.activeViewOptions.group.allowGroupEdit?[p]:p};if(void 0===e&&(e=this.parent.uiStateValues.isGroupAdaptive?this.parent.uiStateValues.groupIndex:this.parent.activeCellsData.groupIndex),this.parent.activeViewOptions.group.resources.length>0&&!(0,s.le)(e))for(var n=this.lastResourceLevel[e].groupOrder,a=0;a<this.resourceCollection.length;a++)r(a,this.resourceCollection[a].field,n[a]);else if(this.parent.resourceCollection.length>0)for(a=0;a<this.resourceCollection.length;a++){var o=this.resourceCollection[a].dataSource[0];o&&r(a,this.resourceCollection[a].field,o[this.resourceCollection[a].idField])}},l.prototype.getResourceColor=function(i,e){var t=!(0,s.le)(e)&&this.colorIndex>e.length-1?e.length-1:this.colorIndex,r=this.resourceCollection[t];if(!((0,s.le)(e)&&this.parent.activeViewOptions.group.allowGroupEdit&&r.allowMultiple)){var n=(0,s.le)(e)?i[r.field]:e[t],a=this.filterData(r.dataSource,r.idField,n);if(a.length>0)return a[0][r.colorField]}},l.prototype.getCssClass=function(i){var e=this.resourceCollection.slice(-1)[0];if(!this.parent.activeViewOptions.group.allowGroupEdit||!e.allowMultiple){var t=this.filterData(e.dataSource,e.idField,i[e.field]);if(t.length>0)return t[0][e.cssClassField]}},l.prototype.getResourceRenderDates=function(){var t=[].concat.apply([],this.lastResourceLevel.map(function(r){return r.renderDates})).filter(function(n,a,o){return o.map(function(c){return c.getTime()}).indexOf(n.getTime())===a});return t.sort(function(r,n){return r.getTime()-n.getTime()}),t},l.prototype.filterData=function(i,e,t){return i.filter(function(r){return r[e]===t})},l.prototype.getResourceData=function(i,e,t){if(this.parent.activeViewOptions.group.allowGroupEdit){for(var r={},n=0,a=t;n<a.length;n++)for(var c=this.lastResourceLevel[a[n]].groupOrder,h=0,p=c.length;h<p;h++){var u=this.resourceCollection[h].field;(0,s.le)(r[u])&&(r[u]=[]),r[u].push(c[h])}i=(0,s.l7)(i,r)}else{h=0;for(var d=this.resourceCollection.length;h<d;h++)this.lastResourceLevel[e]&&(i[this.resourceCollection[h].field]=this.lastResourceLevel[e].groupOrder[h])}},l.prototype.addResource=function(i,e,t){for(var r=i instanceof Array?i:[i],n=function(p){if(p.name===e)return r.forEach(function(u,d){return new J.hm({json:p.dataSource}).insert(u,null,null,t+d)}),"break"},a=0,o=this.parent.resourceCollection;a<o.length&&"break"!==n(o[a]);a++);this.refreshLayout(!0)},l.prototype.removeResource=function(i,e){for(var t=i instanceof Array?i:[i],r=function(h){if(h.name===e)return t.forEach(function(p){return new J.hm({json:h.dataSource}).remove(h.idField,p)}),"break"},n=0,a=this.parent.resourceCollection;n<a.length&&"break"!==r(a[n]);n++);this.refreshLayout(!0)},l.prototype.getIndexFromResourceId=function(i,e,t,r,n){if(e=e||this.parent.resourceCollection.slice(-1)[0].name,(0,s.le)(t)&&(t=this.resourceCollection.filter(function(o){return o.name===e})[0],(0,s.le)(t)))return null;var a=t.dataSource.filter(function(o){return r&&o[t.idField]===i?o[t.groupIDField]===r[n]?o[t.idField]===i:null:o[t.idField]===i})[0];return this.lastResourceLevel.map(function(o){return o.resourceData}).indexOf(a)},l.prototype.resourceExpand=function(i,e,t){var n,r=this.parent.resourceCollection.filter(function(c){return c.name===e?c:null})[0],a=r.dataSource.filter(function(c){return c[r.idField]===i})[0];n=this.parent.activeViewOptions.group.byGroupID?this.lastResourceLevel.map(function(c){return c.resourceData}).indexOf(a):this.getIndexFromResourceId(i,e,r);var o=this.parent.element.querySelector("."+Oe+' [data-group-index="'+n+'"] .'+zt);o&&(o.classList.contains(Wt)&&!t||o.classList.contains($e)&&t)&&o.click()},l.prototype.resourceScroll=function(i,e){if(!(this.parent.isAdaptive||["Agenda","MonthAgenda"].indexOf(this.parent.currentView)>-1)){var t=e||this.parent.resourceCollection.slice(-1)[0].name,r=this.parent.resourceCollection.length-1,n=this.parent.resourceCollection.filter(function(f,g){return f.name===t?(r=g,f):null})[0],a=this.parent.element.querySelector("."+F),o=0;if(this.parent.activeView.isTimelineView()){if(this.parent.activeViewOptions.group.byGroupID){var c=n.dataSource.filter(function(f){return f[n.idField]===i})[0];o=this.lastResourceLevel.map(function(f){return f.resourceData}).indexOf(c)}else o=this.getIndexFromResourceId(i,t,n);if(this.parent.virtualScrollModule){var h=this.parent.element.querySelector("."+fi),p=Math.round(h.offsetHeight/this.expandedResources.length);this.parent.rowAutoHeight&&(a.scrollTop=0,this.parent.virtualScrollModule.virtualScrolling()),a.scrollTop=o*p-(this.parent.virtualScrollModule.bufferCount-1)*p,this.parent.virtualScrollModule.virtualScrolling(),this.parent.rowAutoHeight?(u=this.parent.element.querySelector("."+R+'[data-group-index="'+o+'"]'))&&!u.parentElement.classList.contains(he)&&(a.scrollTop=a.scrollTop<u.offsetTop?u.offsetTop:a.scrollTop+u.offsetTop):a.scrollTop=o*p}else{var u;(u=this.parent.element.querySelector("."+R+'[data-group-index="'+o+'"]'))&&!u.parentElement.classList.contains(he)&&(a.scrollTop=u.offsetTop)}}else{o=this.parent.activeViewOptions.group.byGroupID?t===this.parent.resourceCollection.slice(-1)[0].name?this.lastResourceLevel.map(function(f){return f.resourceData[n.idField]}).indexOf(i):n.dataSource.map(function(f){return f[n.idField]}).indexOf(i):this.getIndexFromResourceId(i,t,n);var d=this.parent.element.querySelector("."+gn+":nth-child("+(r+1)+")"),v=[].slice.call(d.children).map(function(f){return f.offsetLeft});a.scrollLeft=v[o]}}},l.prototype.destroy=function(){if(this.parent.off(Xe,this.documentClick),this.treeViewObj){if(this.treeViewObj.portals&&this.treeViewObj.portals.length>0){var i=this.treeViewObj.portals.map(function(t){return t.propName});this.parent.resetTemplates(i)}this.treeViewObj.destroy(),this.treeViewObj=null}this.treePopup&&(this.treePopup.destroy(),this.treePopup=null,(0,s.Od)(this.parent.element.querySelector("."+Vi)),(0,s.Od)(this.parent.element.querySelector("."+Xa)));var e=this.parent.element.querySelector("."+di);e&&(0,s.Od)(e)},l}(),Oh=function(){var l=function(i,e){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])})(i,e)};return function(i,e){function t(){this.constructor=i}l(i,e),i.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}}(),x=function(l,i,e,t){var a,r=arguments.length,n=r<3?i:null===t?t=Object.getOwnPropertyDescriptor(i,e):t;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(l,i,e,t);else for(var o=l.length-1;o>=0;o--)(a=l[o])&&(n=(r<3?a(n):r>3?a(i,e,n):a(i,e))||n);return r>3&&n&&Object.defineProperty(i,e,n),n},sa=function(l){function i(e,t){return l.call(this,e,t)||this}return Oh(i,l),i.prototype.render=function(){var e=[],t=[];if(e.push(Ki),this.enableRtl?e.push(Gr):t.push(Gr),this.isAdaptive?e.push(Nt):t.push(Nt),this.allowMultiDrag?e.push(Zr):t.push(Zr),this.cssClass)for(var n=0,a=this.cssClass.split(" ");n<a.length;n++)e.push(a[n]);(0,s.s1)(this.element,e,t),this.validateDate(),(0,Ee.rj)({target:this.element}),this.scrollModule=new ql(this),this.scrollModule.setWidth(),this.scrollModule.setHeight(),this.renderModule=new sh(this),this.eventBase=new jn(this),this.workCellAction=new gh(this),this.allowKeyboardInteraction&&(this.keyboardInteractionModule=new as(this)),this.inlineModule=new wc(this),this.initializeDataModule(),this.renderTableContainer(),this.activeViewOptions=this.getActiveViewOptions(),this.initializeResources(),this.wireEvents()},i.prototype.renderTableContainer=function(){this.element.querySelector("."+Me)||this.element.appendChild(this.createElement("div",{className:Me}))},i.prototype.renderTemplates=function(){this.isReact&&this.renderReactTemplates()},i.prototype.resetTemplates=function(e){(this.isAngular||this.isReact)&&this.clearTemplate(e)},i.prototype.initializeResources=function(e){void 0===e&&(e=!1),this.resources.length>0?(this.resourceBase=new bh(this),this.resourceBase.bindResourcesData(e)):(this.resourceBase=null,this.resourceCollection=[],this.renderElements(e))},i.prototype.renderElements=function(e){if(e)return this.initializeView(this.currentView),void this.eventWindow.refresh();this.destroyHeaderModule(),this.showHeaderBar&&(this.headerModule=new xn(this)),this.renderTableContainer(),(s.AR.isDevice||s.AR.isTouch)&&(this.scheduleTouchModule=new Fl(this)),this.initializeView(this.currentView),this.destroyPopups(),this.isPrinting||this.initializePopups()},i.prototype.validateDate=function(e){void 0===e&&(e=this.selectedDate);var t=e instanceof Date?new Date(e.getTime()):new Date(e),r=this.minDate instanceof Date?new Date(this.minDate.getTime()):new Date(this.minDate),n=this.maxDate instanceof Date?new Date(this.maxDate.getTime()):new Date(this.maxDate);if(!(r<=n))throw Error("minDate should be equal or less than maxDate");t<r&&(t=r),t>n&&(t=n),this.setProperties({selectedDate:new Date(""+t),minDate:new Date(""+r),maxDate:new Date(""+n)},!0),this.eventWindow&&this.eventWindow.updateMinMaxDateToEditor()},i.prototype.getViewIndex=function(e){for(var t=0;t<this.viewCollections.length;t++)if(this.viewCollections[t].option===e)return t;return-1},i.prototype.setViewOptions=function(e){void 0===e&&(e=!1),this.viewOptions={},this.viewCollections=[];var t,r,n=this.viewIndex,a=0;this.viewIndex=-1;for(var o=0,c=this.views;o<c.length;o++){var h=c[o],p="string"!=typeof h;"string"==typeof h?this.currentView===(t=h)&&(r=t,this.viewIndex=a):(t=h.option,h.isSelected&&(r=t,this.viewIndex=a));var u=(0,s.l7)({option:t},p?h:{}),d=t.charAt(0).toLowerCase()+t.slice(1);u.cellHeaderTemplateName=u.cellHeaderTemplate?u.option:"",u.dateHeaderTemplateName=u.dateHeaderTemplate?u.option:"",u.cellTemplateName=u.cellTemplate?u.option:"",u.dayHeaderTemplateName=u.dayHeaderTemplate?u.option:"",u.monthHeaderTemplateName=u.monthHeaderTemplate?u.option:"",u.resourceHeaderTemplateName=u.resourceHeaderTemplate?u.option:"",u.headerIndentTemplateName=u.headerIndentTemplate?u.option:"",u.eventTemplateName=u.eventTemplate?u.option:"",!(0,s.le)(u.firstDayOfWeek)&&0===u.firstDayOfWeek&&delete u.firstDayOfWeek,!(0,s.le)(u.interval)&&1===u.interval&&delete u.interval,this.viewCollections.push(u),(0,s.le)(this.viewOptions[d])?this.viewOptions[d]=[u]:this.viewOptions[d].push(u),a++}if(!e&&r&&this.setProperties({currentView:r},!0),-1===this.viewIndex){var v=this.getViewIndex(this.currentView);this.viewIndex="string"==typeof this.views[0]||(0,s.le)(n)||-1===n?-1===v?0:v:n}},i.prototype.getActiveViewOptions=function(){var e={enable:this.timeScale.enable,interval:this.timeScale.interval,slotCount:this.timeScale.slotCount,majorSlotTemplate:this.timeScale.majorSlotTemplate,minorSlotTemplate:this.timeScale.minorSlotTemplate},t=this.viewCollections[this.viewIndex].option.indexOf("Year")>-1,o=this.viewCollections[this.viewIndex],c=(0,s.l7)({dateFormat:this.dateFormat,endHour:this.endHour,isSelected:!1,option:null,readonly:this.readonly,startHour:this.startHour,allowVirtualScrolling:!1,cellHeaderTemplate:this.cellHeaderTemplate,dayHeaderTemplate:this.dayHeaderTemplate,monthHeaderTemplate:this.monthHeaderTemplate,cellTemplate:this.cellTemplate,eventTemplate:this.eventSettings.template,dateHeaderTemplate:this.dateHeaderTemplate,resourceHeaderTemplate:this.resourceHeaderTemplate,headerIndentTemplate:this.headerIndentTemplate,firstMonthOfYear:this.firstMonthOfYear,firstDayOfWeek:this.firstDayOfWeek,workDays:this.viewCollections[this.viewIndex].workDays?[]:this.workDays,monthsCount:this.monthsCount,showWeekend:this.showWeekend,showWeekNumber:this.showWeekNumber,displayName:null,interval:1,timeScale:e,timeFormat:this.internalTimeFormat,group:{byDate:!t&&this.group.byDate,byGroupID:this.group.byGroupID,allowGroupEdit:this.group.allowGroupEdit,resources:this.group.resources,headerTooltipTemplate:this.group.headerTooltipTemplate,enableCompactView:this.group.enableCompactView},headerRows:this.headerRows,orientation:"Horizontal",numberOfWeeks:0,displayDate:null},o,void 0,!0);return 0!==this.firstDayOfWeek&&o.firstDayOfWeek&&this.firstDayOfWeek!==o.firstDayOfWeek&&(c.firstDayOfWeek=this.firstDayOfWeek),c.displayDate&&(c.displayDate=c.displayDate instanceof Date?new Date(c.displayDate.getTime()):new Date(c.displayDate)),c},i.prototype.initializeDataModule=function(){this.eventFields={id:this.eventSettings.fields.id,isBlock:this.eventSettings.fields.isBlock,subject:this.eventSettings.fields.subject.name,startTime:this.eventSettings.fields.startTime.name,endTime:this.eventSettings.fields.endTime.name,startTimezone:this.eventSettings.fields.startTimezone.name,endTimezone:this.eventSettings.fields.endTimezone.name,location:this.eventSettings.fields.location.name,description:this.eventSettings.fields.description.name,isAllDay:this.eventSettings.fields.isAllDay.name,recurrenceID:this.eventSettings.fields.recurrenceID.name,recurrenceRule:this.eventSettings.fields.recurrenceRule.name,recurrenceException:this.eventSettings.fields.recurrenceException.name,isReadonly:this.eventSettings.fields.isReadonly,followingID:this.eventSettings.fields.followingID},this.setEditorTitles(),this.dataModule=new ss(this.eventSettings.dataSource,this.eventSettings.query),this.crudModule=new fh(this)},i.prototype.setEditorTitles=function(){this.editorTitles={subject:this.eventSettings.fields.subject.title||this.localeObj.getConstant("title"),startTime:this.eventSettings.fields.startTime.title||this.localeObj.getConstant("start"),endTime:this.eventSettings.fields.endTime.title||this.localeObj.getConstant("end"),isAllDay:this.eventSettings.fields.isAllDay.title||this.localeObj.getConstant("allDay"),startTimezone:this.eventSettings.fields.startTimezone.title||this.localeObj.getConstant("startTimezone"),endTimezone:this.eventSettings.fields.endTimezone.title||this.localeObj.getConstant("endTimezone"),location:this.eventSettings.fields.location.title||this.localeObj.getConstant("location"),description:this.eventSettings.fields.description.title||this.localeObj.getConstant("description"),recurrenceRule:this.eventSettings.fields.recurrenceRule.title||this.localeObj.getConstant("repeat")}},i.prototype.initializeView=function(e){this.showSpinner(),this.activeViewOptions=this.getActiveViewOptions(),this.resourceBase&&this.resourceBase.setResourceCollection(),this.initializeTemplates(),this.renderModule.render(e)},i.prototype.initializeTemplates=function(){this.cellHeaderTemplateFn=this.templateParser(this.activeViewOptions.cellHeaderTemplate),this.dayHeaderTemplateFn=this.templateParser(this.activeViewOptions.dayHeaderTemplate),this.monthHeaderTemplateFn=this.templateParser(this.activeViewOptions.monthHeaderTemplate),this.cellTemplateFn=this.templateParser(this.activeViewOptions.cellTemplate),this.dateHeaderTemplateFn=this.templateParser(this.activeViewOptions.dateHeaderTemplate),this.majorSlotTemplateFn=this.templateParser(this.activeViewOptions.timeScale.majorSlotTemplate),this.minorSlotTemplateFn=this.templateParser(this.activeViewOptions.timeScale.minorSlotTemplate),this.appointmentTemplateFn=this.templateParser(this.activeViewOptions.eventTemplate),this.resourceHeaderTemplateFn=this.templateParser(this.activeViewOptions.resourceHeaderTemplate),this.headerIndentTemplateFn=this.templateParser(this.activeViewOptions.headerIndentTemplate),this.headerTooltipTemplateFn=this.templateParser(this.activeViewOptions.group.headerTooltipTemplate),this.eventTooltipTemplateFn=this.templateParser(this.eventSettings.tooltipTemplate),this.editorTemplateFn=this.templateParser(this.editorTemplate),this.quickInfoTemplatesHeaderFn=this.templateParser(this.quickInfoTemplates.header),this.quickInfoTemplatesContentFn=this.templateParser(this.quickInfoTemplates.content),this.quickInfoTemplatesFooterFn=this.templateParser(this.quickInfoTemplates.footer)},i.prototype.initializePopups=function(){this.eventWindow=new ro(this),this.quickPopup=new As(this)},i.prototype.getDayNames=function(e){var r,t=[],n="";"en"===this.locale||"en-US"===this.locale?r=(0,s.NA)((n="days.stand-alone.")+e,(0,s.bD)(this.getCalendarMode())):(n="main."+this.locale+".dates.calendars."+this.getCalendarMode()+".days.format."+e,r=(0,s.NA)(n,s.qV));for(var a=0,o=Object.keys(r);a<o.length;a++)t.push((0,s.NA)(o[a],r));return t},i.prototype.setCldrTimeFormat=function(){this.internalTimeFormat=(0,s.le)(this.timeFormat)?"en"===this.locale||"en-US"===this.locale?(0,s.NA)("timeFormats.short",(0,s.bD)(this.getCalendarMode())):(0,s.NA)("main."+this.locale+".dates.calendars."+this.getCalendarMode()+".timeFormats.short",s.qV):this.timeFormat},i.prototype.getCalendarMode=function(){return this.calendarMode.toLowerCase()},i.prototype.getTimeString=function(e){return this.globalize.formatDate(e,{format:this.activeViewOptions.timeFormat,type:"time",calendar:this.getCalendarMode()}).toLocaleUpperCase()},i.prototype.getDateTime=function(e){return e instanceof Date?new Date(e.getTime()):new Date(e)},i.prototype.setCalendarMode=function(){this.calendarUtil="Islamic"===this.calendarMode?new ls:new os},i.prototype.changeView=function(e,t,r,n){var a=this;if((0,s.le)(n)&&(n=this.getViewIndex(e)),!(!r&&n===this.viewIndex&&this.currentView===e||n<0)){this.viewIndex=n;var o={requestType:"viewNavigate",cancel:!1,event:t};this.trigger(fe,o,function(c){c.cancel||a.trigger(Fr,{action:"view",cancel:!1,currentDate:a.selectedDate,previousView:a.currentView,currentView:e,viewIndex:a.viewIndex},function(p){p.cancel||(a.uiStateValues.isInitial=e.indexOf("Timeline")>-1||a.currentView.indexOf("Timeline")>-1||a.uiStateValues.isInitial,a.viewIndex=p.viewIndex,a.setProperties({currentView:e},!0),a.headerModule&&(a.headerModule.updateActiveView(),a.headerModule.setCalendarDate(a.selectedDate),a.headerModule.setCalendarView()),a.initializeView(a.currentView),a.animateLayout(),a.trigger(Qe,o={requestType:"viewNavigate",cancel:!1,event:t}))})})}},i.prototype.changeDate=function(e,t){var r=this,n={requestType:"dateNavigate",cancel:!1,event:t};this.trigger(fe,n,function(a){a.cancel||r.trigger(Fr,{action:"date",cancel:!1,previousDate:r.selectedDate,currentDate:e},function(c){c.cancel||(r.uiStateValues.isInitial=!!r.activeView.isTimelineView()||r.uiStateValues.isInitial,r.validateDate(c.currentDate),r.headerModule&&r.headerModule.setCalendarDate(c.currentDate),r.initializeView(r.currentView),r.animateLayout(),r.trigger(Qe,n={requestType:"dateNavigate",cancel:!1,event:t}))})})},i.prototype.isMinMaxDate=function(e){return void 0===e&&(e=this.selectedDate),e.getTime()>=this.minDate.getTime()&&e.getTime()<=this.maxDate.getTime()},i.prototype.isSelectedDate=function(e){return e.setHours(0,0,0,0)===new Date(""+this.selectedDate).setHours(0,0,0,0)},i.prototype.getCurrentTime=function(e){return void 0===e&&(e=new Date),this.timezone?this.tzModule.convert(e,this.tzModule.getLocalTimezoneName(),this.timezone):e},i.prototype.getNavigateView=function(){return this.activeView.isTimelineView()?"TimelineMonth"===this.currentView||"TimelineYear"===this.currentView?"TimelineDay":"Agenda":"Day"},i.prototype.animateLayout=function(){!this.activeView.element||new s.fw({duration:600,name:"FadeIn",timingFunction:"easeIn"}).animate(this.activeView.element)},i.prototype.requiredModules=function(){var e=[];this.setViewOptions(!0);for(var t=0,r=Object.keys(this.viewOptions);t<r.length;t++){var n=r[t];e.push({member:n="timelineDay"===n||"timelineWeek"===n||"timelineWorkWeek"===n?"timelineViews":n,args:[this]})}return this.allowDragAndDrop&&e.push({member:"dragAndDrop",args:[this]}),this.allowResizing&&e.push({member:"resize",args:[this]}),e.push({member:"excelExport",args:[this]}),e.push({member:"iCalendarExport",args:[this]}),e.push({member:"iCalendarImport",args:[this]}),e.push({member:"print",args:[this]}),e},i.prototype.preRender=function(){this.isAdaptive=s.AR.isDevice||window.navigator.userAgent.toLowerCase().indexOf("ipad")>-1,this.globalize=new s.eC(this.locale),this.tzModule=new cs,(this&&(0,s.le)(this.uiStateValues)||!this.enablePersistence)&&(this.uiStateValues={expand:!1,isInitial:!0,left:0,top:0,isGroupAdaptive:!1,isIgnoreOccurrence:!1,groupIndex:0,action:!1,isBlock:!1,isCustomMonth:!0,isPreventTimezone:!1}),this.activeCellsData={startTime:this.getCurrentTime(),endTime:this.getCurrentTime(),isAllDay:!1},this.activeEventData={event:void 0,element:void 0},this.getDefaultLocale(),this.localeObj=new s.E7(this.getModuleName(),this.defaultLocale,this.locale),this.setCldrTimeFormat(),this.setCalendarMode(),this.eventsData=[],this.eventsProcessed=[],this.blockData=[],this.blockProcessed=[],this.resourceCollection=[],this.currentAction=null,this.selectedElements=[],this.setViewOptions()},i.prototype.getDefaultLocale=function(){this.defaultLocale={day:"Day",week:"Week",workWeek:"Work Week",month:"Month",year:"Year",agenda:"Agenda",weekAgenda:"Week Agenda",workWeekAgenda:"Work Week Agenda",monthAgenda:"Month Agenda",today:"Today",noEvents:"No events",emptyContainer:"There are no events scheduled on this day.",allDay:"All day",start:"Start",end:"End",more:"more",close:"Close",cancel:"Cancel",noTitle:"(No Title)",delete:"Delete",deleteEvent:"Delete Event",deleteMultipleEvent:"Delete Multiple Events",selectedItems:"Items selected",deleteSeries:"Entire Series",edit:"Edit",editSeries:"Entire Series",editEvent:"Edit Event",createEvent:"Create",subject:"Subject",addTitle:"Add title",moreDetails:"More Details",save:"Save",editContent:"How would you like to change the appointment in the series?",deleteContent:"Are you sure you want to delete this event?",deleteMultipleContent:"Are you sure you want to delete the selected events?",newEvent:"New Event",title:"Title",location:"Location",description:"Description",timezone:"Timezone",startTimezone:"Start Timezone",endTimezone:"End Timezone",repeat:"Repeat",saveButton:"Save",cancelButton:"Cancel",deleteButton:"Delete",recurrence:"Recurrence",wrongPattern:"The recurrence pattern is not valid.",seriesChangeAlert:"Do you want to cancel the changes made to specific instances of this series and match it to the whole series again?",createError:"The duration of the event must be shorter than how frequently it occurs. Shorten the duration, or change the recurrence pattern in the recurrence event editor.",sameDayAlert:"Two occurrences of the same event cannot occur on the same day.",occurenceAlert:"Cannot reschedule an occurrence of the recurring appointment if it skips over a later occurrence of the same appointment.",editRecurrence:"Edit Recurrence",repeats:"Repeats",alert:"Alert",startEndError:"The selected end date occurs before the start date.",invalidDateError:"The entered date value is invalid.",blockAlert:"Events cannot be scheduled within the blocked time range.",ok:"Ok",yes:"Yes",no:"No",occurrence:"Occurrence",series:"Series",previous:"Previous",next:"Next",timelineDay:"Timeline Day",timelineWeek:"Timeline Week",timelineWorkWeek:"Timeline Work Week",timelineMonth:"Timeline Month",timelineYear:"Timeline Year",editFollowingEvent:"Following Events",deleteTitle:"Delete Event",editTitle:"Edit Event",beginFrom:"Begin From",endAt:"Ends At",expandAllDaySection:"Expand-all-day-section",collapseAllDaySection:"Collapse-all-day-section",searchTimezone:"Search Timezone",noRecords:"No records found"}},i.prototype.wireEvents=function(){s.bi.add(window,"resize",this.onScheduleResize,this),s.bi.add(window,"orientationchange",this.onScheduleResize,this),s.bi.add(document,s.AR.touchStartEvent,this.onDocumentClick,this)},i.prototype.removeSelectedClass=function(){for(var e=this.getSelectedElements(),t=0,r=e;t<r.length;t++){var n=r[t];n.setAttribute("aria-selected","false"),n.removeAttribute("tabindex")}(0,s.IV)(e,Yt)},i.prototype.addSelectedClass=function(e,t,r){for(var n=0,a=e;n<a.length;n++)a[n].setAttribute("aria-selected","true");(0,s.cn)(e,Yt),t&&(t.setAttribute("tabindex","0"),t.focus({preventScroll:r||!1}))},i.prototype.selectCell=function(e){this.removeSelectedClass(),this.addSelectedClass([e],e)},i.prototype.getAllDayRow=function(){return this.element.querySelector("."+We)},i.prototype.getContentTable=function(){return this.activeView.element.querySelector("."+X+" tbody")},i.prototype.getTableRows=function(){return[].slice.call(this.element.querySelectorAll("."+X+" tbody tr:not(."+he+")"))},i.prototype.getWorkCellElements=function(){return[].slice.call(this.element.querySelectorAll("."+R))},i.prototype.getIndexOfDate=function(e,t){return e.map(Number).indexOf(+t)},i.prototype.isAllDayCell=function(e){return!!(["Month","TimelineMonth","TimelineYear","MonthAgenda"].indexOf(this.currentView)>-1||e.classList.contains(U)||e.classList.contains(ie)||!this.activeViewOptions.timeScale.enable||this.activeView.isTimelineView()&&this.activeViewOptions.headerRows.length>0&&"Hour"!==this.activeViewOptions.headerRows.slice(-1)[0].option)},i.prototype.getDateFromElement=function(e){var t;if((0,s.le)(e)||(t=e.getAttribute("data-date")),!(0,s.le)(t)){var r=parseInt(t,10);return new Date(r)}},i.prototype.getTargetElement=function(e,t,r){var a,n=document.elementFromPoint(t,r);return n&&(a=n.closest(e)),a?[a]:null},i.prototype.getCellHeaderTemplate=function(){return this.cellHeaderTemplateFn},i.prototype.getDayHeaderTemplate=function(){return this.dayHeaderTemplateFn},i.prototype.getMonthHeaderTemplate=function(){return this.monthHeaderTemplateFn},i.prototype.getCellTemplate=function(){return this.cellTemplateFn},i.prototype.getDateHeaderTemplate=function(){return this.dateHeaderTemplateFn},i.prototype.getMajorSlotTemplate=function(){return this.majorSlotTemplateFn},i.prototype.getMinorSlotTemplate=function(){return this.minorSlotTemplateFn},i.prototype.getAppointmentTemplate=function(){return this.appointmentTemplateFn},i.prototype.getEventTooltipTemplate=function(){return this.eventTooltipTemplateFn},i.prototype.getHeaderTooltipTemplate=function(){return this.headerTooltipTemplateFn},i.prototype.getEditorTemplate=function(){return this.editorTemplateFn},i.prototype.getQuickInfoTemplatesHeader=function(){return this.quickInfoTemplatesHeaderFn},i.prototype.getQuickInfoTemplatesContent=function(){return this.quickInfoTemplatesContentFn},i.prototype.getQuickInfoTemplatesFooter=function(){return this.quickInfoTemplatesFooterFn},i.prototype.getResourceHeaderTemplate=function(){return this.resourceHeaderTemplateFn},i.prototype.getHeaderIndentTemplate=function(){return this.headerIndentTemplateFn},i.prototype.getCssProperties=function(){return{border:this.enableRtl?"borderLeftWidth":"borderRightWidth",padding:this.enableRtl?"paddingLeft":"paddingRight",rtlBorder:this.enableRtl?"borderRightWidth":"borderLeftWidth",rtlPadding:this.enableRtl?"paddingRight":"paddingLeft"}},i.prototype.removeNewEventElement=function(){var e=this.element.querySelector("."+sr);(0,s.le)(e)||(0,s.Od)(e)},i.prototype.getStartEndTime=function(e){if(!(0,s.le)(e)&&""!==e){var t=C(this.getCurrentTime()),r=e.split(":");return 2===r.length&&t.setHours(parseInt(r[0],10),parseInt(r[1],10),0),t}return null},i.prototype.onDocumentClick=function(e){this.notify(Xe,{event:e})},i.prototype.onScheduleResize=function(){(0,s.le)(this.activeView)||(this.isAdaptive||window.navigator.userAgent.toLowerCase().indexOf("mobi")>-1)&&document.activeElement&&document.activeElement.classList.contains(te)||(this.activeViewOptions.timeScale.enable&&this.activeView&&this.activeView.highlightCurrentTime(),this.quickPopup&&this.quickPopup.onClosePopup(),"Month"===this.currentView||"Agenda"!==this.currentView&&"MonthAgenda"!==this.currentView&&!this.activeViewOptions.timeScale.enable||this.activeView.isTimelineView()?(this.activeView.resetColWidth(),this.notify(be,{cssProperties:this.getCssProperties(),isPreventScrollUpdate:!0}),this.refreshEvents(!1)):this.notify(ge,{}))},i.prototype.templateParser=function(e){if(e)try{return document.querySelectorAll(e).length?(0,s.MY)(document.querySelector(e).innerHTML.trim()):(0,s.MY)(e)}catch(t){return(0,s.MY)(e)}},i.prototype.getAnnouncementString=function(e,t){var r;this.quickPopup&&this.activeViewOptions.group.resources.length>0&&(r=this.quickPopup.getResourceText({event:e},"event")+'"s event - ');var a=t||e[this.eventFields.subject]||this.eventSettings.fields.subject.default,o="full",c=this.globalize.formatDate(e[this.eventFields.startTime],{type:"dateTime",skeleton:o,calendar:this.getCalendarMode()}),h=this.globalize.formatDate(e[this.eventFields.endTime],{type:"dateTime",skeleton:o,calendar:this.getCalendarMode()}),p=a+" "+this.localeObj.getConstant("beginFrom")+" "+c+" "+this.localeObj.getConstant("endAt")+" "+h;return r&&(p=r+" "+p),p},i.prototype.boundaryValidation=function(e,t){var n={left:!1,right:!1,top:!1,bottom:!1},a=this.element.querySelector("."+F).getBoundingClientRect();return e<a.top+30+window.pageYOffset&&e>a.top+window.pageYOffset&&(n.top=!0),e>a.bottom-30+window.pageYOffset&&e<a.bottom+window.pageYOffset&&(n.bottom=!0),t<a.left+30+window.pageXOffset&&t>a.left+window.pageXOffset&&(n.left=!0),t>a.right-30+window.pageXOffset&&t<a.right+window.pageXOffset&&(n.right=!0),n},i.prototype.getWeekNumberContent=function(e){var t;if("FirstDay"===this.weekRule){var r=_i(e.slice(-1)[0],this.firstDayOfWeek);t=this.globalize.formatNumber(jr(r))}else if("FirstFourDayWeek"===this.weekRule){var o=function(l,i){return new Date(i.valueOf()-(i.valueOf()-l.valueOf())/2)}(n=me(e.slice(-1)[0],this.firstDayOfWeek),_i(e.slice(-1)[0],this.firstDayOfWeek));t=this.globalize.formatNumber(jr(o))}else if("FirstFullWeek"===this.weekRule){var n=me(e.slice(-1)[0],this.firstDayOfWeek);t=this.globalize.formatNumber(jr(n))}return t},i.prototype.renderHeaderIndentTemplate=function(e,t){if(this.activeViewOptions.headerIndentTemplate){var a=this.element.id+"_"+this.activeViewOptions.headerIndentTemplateName+"headerIndentTemplate",o=[].slice.call(this.getHeaderIndentTemplate()(e,this,"headerIndentTemplate",a,!1));(0,s.R3)(o,t)}},i.prototype.isSpecificResourceEvents=function(){return this.activeViewOptions.group.resources.length>0&&!this.activeViewOptions.group.allowGroupEdit&&!this.rowAutoHeight&&!this.virtualScrollModule&&this.activeViewOptions.group.byGroupID},i.prototype.unWireEvents=function(){s.bi.remove(window,"resize",this.onScheduleResize),s.bi.remove(window,"orientationchange",this.onScheduleResize),s.bi.remove(document,s.AR.touchStartEvent,this.onDocumentClick)},i.prototype.getModuleName=function(){return"schedule"},i.prototype.getPersistData=function(){return this.addOnPersist(["currentView","selectedDate","scrollTop","scrollLeft"])},i.prototype.onPropertyChanged=function(e,t){if(!this.isReact||!(0,s.le)(this.activeView)){for(var r={isRefresh:!1,isResource:!1,isDate:!1,isView:!1,isLayout:!1,isDataManager:!1},n=0,a=Object.keys(e);n<a.length;n++){var o=a[n];switch(o){case"views":this.setViewOptions(),this.headerModule&&this.headerModule.updateItems(),r.isView=!0;break;case"currentView":r.isView=!0;break;case"minDate":case"maxDate":case"selectedDate":r.isDate=!0;break;case"dateFormat":this.activeViewOptions=this.getActiveViewOptions(),this.headerModule&&this.headerModule.updateDateRange(this.activeView.getDateRangeText());break;case"showHeaderBar":this.destroyHeaderModule(),e.showHeaderBar&&(this.headerModule=new xn(this),this.headerModule.updateDateRange(this.activeView.getDateRangeText())),this.notify(be,{cssProperties:this.getCssProperties()}),this.activeView.isTimelineView()&&this.refreshEvents(!1);break;case"workDays":JSON.stringify(t.workDays)!==JSON.stringify(e.workDays)&&(r.isLayout=!0);break;case"showWeekend":case"startHour":case"endHour":case"workHours":case"readonly":case"headerRows":case"showWeekNumber":case"rowAutoHeight":r.isLayout=!0;break;case"locale":case"calendarMode":this.globalize=new s.eC(this.locale),this.localeObj=new s.E7(this.getModuleName(),this.defaultLocale,this.locale),this.setCldrTimeFormat(),this.setCalendarMode(),r.isRefresh=!0;break;case"firstDayOfWeek":this.activeViewOptions.firstDayOfWeek=e.firstDayOfWeek,this.eventWindow&&this.eventWindow.refreshRecurrenceEditor(),r.isLayout=!0;break;case"showTimeIndicator":this.activeViewOptions.timeScale.enable&&this.activeView&&this.activeView.highlightCurrentTime();break;case"cellHeaderTemplate":this.activeViewOptions.cellHeaderTemplate=e.cellHeaderTemplate,this.cellHeaderTemplateFn=this.templateParser(this.activeViewOptions.cellHeaderTemplate),r.isLayout=!0;break;case"cellTemplate":this.activeViewOptions.cellTemplate=e.cellTemplate,this.cellTemplateFn=this.templateParser(this.activeViewOptions.cellTemplate),r.isLayout=!0;break;case"dateHeaderTemplate":this.activeViewOptions.dateHeaderTemplate=e.dateHeaderTemplate,this.dateHeaderTemplateFn=this.templateParser(this.activeViewOptions.dateHeaderTemplate),r.isLayout=!0;break;case"dayHeaderTemplate":this.activeViewOptions.dayHeaderTemplate=e.dayHeaderTemplate,this.dayHeaderTemplateFn=this.templateParser(this.activeViewOptions.dayHeaderTemplate),r.isLayout=!0;break;case"monthHeaderTemplate":this.activeViewOptions.monthHeaderTemplate=e.monthHeaderTemplate,this.monthHeaderTemplateFn=this.templateParser(this.activeViewOptions.monthHeaderTemplate),r.isLayout=!0;break;case"resourceHeaderTemplate":this.activeViewOptions.resourceHeaderTemplate=e.resourceHeaderTemplate,this.resourceHeaderTemplateFn=this.templateParser(this.activeViewOptions.resourceHeaderTemplate),r.isLayout=!0;break;case"timezone":this.eventBase.timezonePropertyChange(t.timezone),this.headerModule.setCalendarTimezone();break;case"enableRtl":this.setRtlClass(),r.isRefresh=!0;break;default:this.extendedPropertyChange(o,e,t,r)}}this.propertyChangeAction(r)}},i.prototype.propertyChangeAction=function(e){e.isRefresh?this.refresh():e.isResource?this.initializeResources(!0):e.isView?this.changeView(this.currentView,null,!0):e.isDate?this.changeDate(this.selectedDate):e.isLayout?this.initializeView(this.currentView):e.isDataManager&&this.crudModule&&(this.dragAndDropModule&&(this.dragAndDropModule.actionObj.action="",(0,s.IV)([this.element],je)),this.crudModule.refreshDataManager())},i.prototype.allDayRowScrollUpdate=function(){var e=this.element.querySelector("."+ye),t=this.element.querySelector("."+We);if("auto"!==this.height&&this.enableAllDayScroll)e.classList.contains(mr)&&(0,s.IV)([e],mr),this.eventBase.allDayExpandScroll(e);else if((0,s.cn)([e],mr),e.classList.contains(xi)&&(0,s.IV)([e],xi),this.uiStateValues.expand){var r=[].slice.call(this.element.querySelectorAll("."+U));r[0].style.height=t.style.height?t.style.height:r[1].style.height}this.uiStateValues.expand||(t.style.height="")},i.prototype.extendedPropertyChange=function(e,t,r,n){switch(e){case"width":case"height":case"enableAllDayScroll":["Day","Week","WorkWeek"].indexOf(this.currentView)>-1&&this.allDayRowScrollUpdate(),this.notify(Wr,{module:"scroll",properties:{width:t.width,height:t.height}});break;case"cssClass":r.cssClass&&(0,s.IV)([this.element],r.cssClass.split(" ")),t.cssClass&&(0,s.cn)([this.element],t.cssClass.split(" "));break;case"hideEmptyAgendaDays":case"agendaDaysCount":this.activeViewOptions=this.getActiveViewOptions(),n.isView=!0;break;case"eventSettings":this.onEventSettingsPropertyChanged(t.eventSettings,r.eventSettings,n);break;case"allowKeyboardInteraction":this.keyboardInteractionModule&&(this.keyboardInteractionModule.destroy(),this.keyboardInteractionModule=null),t.allowKeyboardInteraction&&(this.keyboardInteractionModule=new as(this));break;case"timezoneDataSource":this.eventWindow&&this.eventWindow.refresh();break;case"editorTemplate":(0,s.le)(this.editorTemplate)||(this.editorTemplateFn=this.templateParser(this.editorTemplate)),this.eventWindow&&this.eventWindow.setDialogContent();break;case"quickInfoTemplates":this.quickInfoTemplates.header&&(this.quickInfoTemplatesHeaderFn=this.templateParser(this.quickInfoTemplates.header)),this.quickInfoTemplates.content&&(this.quickInfoTemplatesContentFn=this.templateParser(this.quickInfoTemplates.content)),this.quickInfoTemplates.footer&&(this.quickInfoTemplatesFooterFn=this.templateParser(this.quickInfoTemplates.footer));break;case"group":this.onGroupSettingsPropertyChanged(t.group,r.group,n);break;case"resources":n.isResource=!0;break;case"timeScale":this.activeViewOptions.timeScale.interval=t.timeScale.interval||this.activeViewOptions.timeScale.interval,this.activeViewOptions.timeScale.slotCount=t.timeScale.slotCount||this.activeViewOptions.timeScale.slotCount,this.eventWindow&&this.eventWindow.refreshDateTimePicker(),n.isLayout=!0;break;case"allowDragAndDrop":case"allowResizing":case"eventDragArea":this.refreshEvents(!1);break;case"weekRule":n.isLayout=!0;break;case"firstMonthOfYear":this.activeViewOptions.firstMonthOfYear=t.firstMonthOfYear,this.viewIndex=this.activeView.viewIndex,n.isLayout=!0;break;case"monthsCount":this.activeViewOptions.monthsCount=t.monthsCount,this.viewIndex=this.activeView.viewIndex,n.isLayout=!0;break;case"timeFormat":this.internalTimeFormat=t.timeFormat||this.activeViewOptions.timeFormat,this.eventWindow&&this.eventWindow.refreshDateTimePicker(),n.isLayout=!0;break;case"enableAdaptiveUI":this.showHeaderBar&&this.headerModule&&(this.destroyHeaderModule(),this.headerModule=new xn(this),this.headerModule.updateDateRange(this.activeView.getDateRangeText())),n.isLayout=!0;break;case"headerIndentTemplate":this.activeViewOptions.headerIndentTemplate=t.headerIndentTemplate,this.headerIndentTemplateFn=this.templateParser(this.activeViewOptions.headerIndentTemplate),n.isLayout=!0}},i.prototype.setRtlClass=function(){this.enableRtl?(0,s.cn)([this.element],"e-rtl"):(0,s.IV)([this.element],"e-rtl")},i.prototype.onGroupSettingsPropertyChanged=function(e,t,r){for(var n=0,a=Object.keys(e);n<a.length;n++){var o=a[n];"headerTooltipTemplate"===o?this.headerTooltipTemplateFn=this.templateParser(e[o]):(r.isLayout=!0,this.eventWindow&&this.eventWindow.refresh())}},i.prototype.onEventSettingsPropertyChanged=function(e,t,r){for(var n=0,a=Object.keys(e);n<a.length;n++)switch(a[n]){case"dataSource":case"query":case"fields":this.initializeDataModule(),r.isDataManager=!0;break;case"template":this.activeViewOptions.eventTemplate=e.template,this.appointmentTemplateFn=this.templateParser(this.activeViewOptions.eventTemplate),r.isDataManager=!0;break;case"enableTooltip":this.eventTooltip&&(this.eventTooltip.destroy(),this.eventTooltip=null),e.enableTooltip&&(this.eventTooltip=new Yn(this));break;case"tooltipTemplate":this.eventTooltipTemplateFn=this.templateParser(this.eventSettings.tooltipTemplate);break;case"resourceColorField":this.resourceBase&&this.resourceBase.setResourceCollection(),r.isDataManager=!0;break;case"editFollowingEvents":this.quickPopup&&this.quickPopup.refreshQuickDialog();break;case"allowAdding":case"allowEditing":case"allowDeleting":this.showHeaderBar&&this.headerModule&&this.headerModule.updateAddIcon(),this.eventWindow&&this.eventWindow.refresh();break;case"spannedEventPlacement":case"minimumEventDuration":case"enableMaxHeight":case"enableIndicator":this.refreshEvents(!1);break;case"ignoreWhitespace":r.isLayout=!0}},i.prototype.destroyHeaderModule=function(){this.headerModule&&(this.headerModule.destroy(),this.headerModule=null)},i.prototype.destroyPopups=function(){this.quickPopup&&(this.quickPopup.destroy(),this.quickPopup=null),this.eventWindow&&(this.eventWindow.destroy(),this.eventWindow=null)},i.prototype.showSpinner=function(){(0,Ee.yh)(this.element)},i.prototype.hideSpinner=function(){(0,Ee.v3)(this.element)},i.prototype.setWorkHours=function(e,t,r,n){var a;a=this.getWorkHourCells(e,t,r,n),(0,s.cn)(a,Bt)},i.prototype.resetWorkHours=function(e,t,r,n){if(void 0===e&&(e=this.activeView.renderDates),e&&t&&r){var a=this.getWorkHourCells(e,t,r,n);(0,s.IV)(a,Bt)}else{var o=[].slice.call(this.element.querySelectorAll("."+Bt));(0,s.IV)(o,Bt)}},i.prototype.getWorkHourCells=function(e,t,r,n){if(["Agenda","MonthAgenda","Month","TimelineMonth"].indexOf(this.currentView)>-1)return[];var a=this.getStartEndTime(t),o=this.getStartEndTime(r),c=this.getContentTable();if((0,s.le)(a)||(0,s.le)(o)||!c)return[];a.setMilliseconds(0),o.setMilliseconds(0);var h=this.activeView.getStartHour();a<h&&(a=h);var p=this.activeView.getEndHour();o>p&&(o=p);for(var d=this.activeViewOptions.timeScale.interval*oe/this.activeViewOptions.timeScale.slotCount,v=Math.round((a.getTime()-h.getTime())/d),f=Math.ceil((o.getTime()-h.getTime())/d),g=v,m=f,y=[],w=0,D=e;w<D.length;w++){var b=D[w];C(b=this.getDateTime(b));var A=this.activeView.renderDates;!(0,s.le)(n)&&this.resourceBase&&!this.activeView.isTimelineView()&&(A=this.resourceBase.lastResourceLevel[n].renderDates);var E=this.getIndexOfDate(A,b);if(E>=0){if(this.activeView.isTimelineView()){var S=Math.round((p.getTime()-h.getTime())/d);v=g+E*S,f=m+E*S}for(var O=v;O<f;O++)if(this.activeView.isTimelineView()){var k=(0,s.le)(n)?0:n;y.push(c.rows[k].cells[O])}else if((0,s.le)(n))y.push(c.rows[O].cells[E]);else{var L=[].slice.call(c.rows[O].querySelectorAll("."+R+'[data-group-index="'+n+'"]'));y.push(L[E])}}}return y},i.prototype.getCellDetails=function(e){var t=e instanceof Array?e:[e],r=(0,s.sb)(t[0]),n=(0,s.sb)(t.slice(-1)[0]),a=this.getDateFromElement(r),o=this.getDateFromElement(n);if(!(0,s.le)(a)&&!(0,s.le)(o)){var c=this.activeView.isTimelineView()&&!(0,s.le)(n.getAttribute("colSpan"))&&this.headerRows.length>0,h=c?parseInt(n.getAttribute("colSpan"),10):1,p={startTime:a,endTime:o=!this.activeViewOptions.timeScale.enable||c||n.classList.contains(U)||n.classList.contains(ie)?V(new Date(o.getTime()),h):this.activeView.getEndDateFromStartDate(o),isAllDay:this.isAllDayCell(r),element:e},u=r.getAttribute("data-group-index");return(0,s.le)(u)||(p.groupIndex=parseInt(u,10)),p}},i.prototype.getSelectedElements=function(){return[].slice.call(this.element.querySelectorAll("."+Yt))},i.prototype.getResourceCollections=function(){return this.resourceCollection},i.prototype.setResourceCollections=function(e){this.setProperties({resources:e},!1)},i.prototype.changeCurrentView=function(e,t){var r=this.getViewIndex(e),n=e.charAt(0).toLowerCase()+e.slice(1),a=this.viewOptions[n];a&&(r=this.viewCollections.indexOf(a[t||0])),-1!==r&&r!==this.viewIndex&&this.changeView(e,null,null,r)},i.prototype.getCurrentViewIndex=function(){return this.viewIndex},i.prototype.getResourcesByIndex=function(e){if(this.resourceBase&&this.resourceBase.lastResourceLevel){if(e<0||e>=this.resourceBase.lastResourceLevel.length)return;var t=this.resourceBase.lastResourceLevel[e],r={};return this.resourceBase.setResourceValues(r,e),{resource:t.resource,resourceData:t.resourceData,groupData:r}}},i.prototype.expandResource=function(e,t){this.activeView.isTimelineView()&&this.resourceBase&&this.resourceCollection.length>1&&this.resourceBase.resourceExpand(e,t,!1)},i.prototype.collapseResource=function(e,t){this.activeView.isTimelineView()&&this.resourceBase&&this.resourceCollection.length>1&&this.resourceBase.resourceExpand(e,t,!0)},i.prototype.scrollTo=function(e,t){this.activeView.scrollToDate&&(0,s.le)(e)&&t?this.activeView.scrollToDate(t):this.activeView.scrollToHour&&this.activeView.scrollToHour(e,t)},i.prototype.scrollToResource=function(e,t){this.resourceBase&&this.resourceBase.lastResourceLevel&&this.resourceBase.resourceScroll(e,t)},i.prototype.exportToICalendar=function(e,t){if(!this.iCalendarExportModule)throw Error("Inject ICalendarExport module");this.iCalendarExportModule.initializeCalendarExport(e,t)},i.prototype.importICalendar=function(e){if(!this.iCalendarImportModule)throw Error("Inject ICalendarImport module");this.iCalendarImportModule.initializeCalendarImport(e)},i.prototype.addEvent=function(e){this.crudModule.addEvent(e)},i.prototype.exportToExcel=function(e){if(!this.excelExportModule)throw Error("Inject ExcelExport module");this.excelExportModule.initializeExcelExport(e)},i.prototype.print=function(e){if(!this.printModule)throw Error("Inject Print module");this.printModule.print(e)},i.prototype.saveEvent=function(e,t){this.crudModule.saveEvent(e,t)},i.prototype.deleteEvent=function(e,t){this.crudModule.deleteEvent(e,t)},i.prototype.getEvents=function(e,t,r){var n=[];return n=r?this.eventBase.getProcessedEvents():this.eventsData,e&&(e=this.getDateTime(e)),t&&(t=this.getDateTime(t)),this.eventBase.filterEventsByRange(n,e,t)},i.prototype.getBlockEvents=function(e,t,r){var n=[];return n=r?this.eventBase.getProcessedEvents(this.blockData):this.blockData,e&&(e=this.getDateTime(e)),t&&(t=this.getDateTime(t)),this.eventBase.filterEventsByRange(n,e,t)},i.prototype.getOccurrencesByID=function(e){return this.eventBase.getOccurrencesByID(e)},i.prototype.getOccurrencesByRange=function(e,t){return e=this.getDateTime(e),t=this.getDateTime(t),this.eventBase.getOccurrencesByRange(e,t)},i.prototype.getCurrentViewDates=function(){return this.activeView?this.activeView.renderDates:[]},i.prototype.setRecurrenceEditor=function(e){this.eventWindow.setRecurrenceEditor(e)},i.prototype.getEventMaxID=function(){return this.eventBase.getEventMaxID()},i.prototype.getDeletedOccurrences=function(e){return this.eventBase.getDeletedOccurrences(e)},i.prototype.getCurrentViewEvents=function(){return this.eventsProcessed},i.prototype.refreshEvents=function(e){void 0===e&&(e=!0),e?(this.dragAndDropModule&&(this.dragAndDropModule.actionObj.action="",(0,s.IV)([this.element],je)),this.crudModule.refreshDataManager()):(this.uiStateValues&&(this.uiStateValues.isPreventTimezone=!0),this.crudModule&&this.crudModule.refreshProcessedData(),this.uiStateValues&&(this.uiStateValues.isPreventTimezone=!1))},i.prototype.refreshTemplates=function(e){switch(e?this.resetTemplates([e]):this.resetTemplates(),e){case"eventTemplate":this.appointmentTemplateFn=this.templateParser(this.activeViewOptions.eventTemplate),this.refreshEvents(!1);break;case"dateHeaderTemplate":this.dateHeaderTemplateFn=this.templateParser(this.activeViewOptions.dateHeaderTemplate),this.activeView.refreshHeader();break;case"resourceHeaderTemplate":this.resourceHeaderTemplateFn=this.templateParser(this.activeViewOptions.resourceHeaderTemplate),this.activeView.isTimelineView()?this.activeView.refreshResourceHeader():this.activeView.refreshHeader();break;case"quickInfoTemplates":this.quickPopup&&(this.quickPopup.destroy(),this.quickPopup=null),this.quickPopup=new As(this),this.quickInfoTemplatesHeaderFn=this.templateParser(this.quickInfoTemplates.header),this.quickInfoTemplatesContentFn=this.templateParser(this.quickInfoTemplates.content),this.quickInfoTemplatesFooterFn=this.templateParser(this.quickInfoTemplates.footer);break;case"editorTemplate":this.eventWindow&&(this.eventWindow.destroy(),this.eventWindow=null),this.eventWindow=new ro(this),this.editorTemplateFn=this.templateParser(this.editorTemplate);break;case"tooltipTemplate":case"headerTooltipTemplate":this.eventTooltip&&(this.eventTooltip.destroy(),this.eventTooltip=null),this.eventTooltip=new Yn(this),this.eventTooltipTemplateFn=this.templateParser(this.eventSettings.tooltipTemplate),this.headerTooltipTemplateFn=this.templateParser(this.activeViewOptions.group.headerTooltipTemplate);break;default:this.initializeView(this.currentView)}},i.prototype.refreshLayout=function(){this.onScheduleResize(),this.headerModule&&this.headerModule.refresh(),this.eventWindow&&this.eventWindow.refresh()},i.prototype.getEventDetails=function(e){var t=(e=(0,s.sb)(e)).getAttribute("data-guid");return t?this.eventBase.getEventByGuid(t):{}},i.prototype.isSlotAvailable=function(e,t,r){var a,o,n=this,c=this.activeEventData.event;if(e instanceof Date||"string"==typeof e?(a=e,o=t):(c=e,a=e[this.eventFields.startTime],o=e[this.eventFields.endTime],this.resourceBase&&(r=this.eventBase.getGroupIndexFromEvent(e))),(0,s.le)(a)||(0,s.le)(o))return!0;a=this.getDateTime(a),o=this.getDateTime(o);var h=this.eventBase.filterEvents(a,o);return!(0,s.le)(r)&&this.resourceBase&&this.resourceBase.lastResourceLevel.length>0&&(h=this.eventBase.filterEventsByResource(this.resourceBase.lastResourceLevel[r],h)),c&&(h=h.filter(c.Guid?function(p){return p.Guid!==c.Guid}:function(p){return p[n.eventFields.id]!==c[n.eventFields.id]})),!(h.length>0)},i.prototype.openEditor=function(e,t,r,n){"Add"!==t||r?(e[this.eventFields.startTime]=this.getDateTime(e[this.eventFields.startTime]),e[this.eventFields.endTime]=this.getDateTime(e[this.eventFields.endTime])):(e.startTime=this.getDateTime(e.startTime),e.endTime=this.getDateTime(e.endTime),(0,s.le)(e.element)||(e.element=(0,s.sb)(e.element))),this.currentAction=t,"Add"!==t&&(this.activeEventData.event=e),this.eventWindow.openEditor(e,t,r,n)},i.prototype.closeEditor=function(){this.eventWindow&&this.eventWindow.dialogClose()},i.prototype.openQuickInfoPopup=function(e){var t=this;if("Year"!==this.currentView&&!(0,s.le)(e))if((0,s.le)(e[this.eventFields.id])){if("Agenda"===this.currentView||"MonthAgenda"===this.currentView||(0,s.le)(this.activeView))return;var r={startTime:this.activeCellsData.startTime=this.getDateTime(e[this.eventFields.startTime]),endTime:this.activeCellsData.endTime=this.getDateTime(e[this.eventFields.endTime]),isAllDay:this.activeCellsData.isAllDay=!(0,s.le)(e[this.eventFields.isAllDay])&&e[this.eventFields.isAllDay]},n=this.activeView.getAdjustedDate(new Date(r.startTime));if(n){var a="."+R+'[data-date="'+n.getTime()+'"]';this.activeViewOptions.group.resources.length>0&&!this.uiStateValues.isGroupAdaptive&&this.resourceBase&&this.eventBase&&(r.groupIndex=this.eventBase.getGroupIndexFromEvent(e),a="."+R+'[data-date="'+n.getTime()+'"][data-group-index="'+r.groupIndex+'"]');var o=this.element.querySelector(a);o&&(o.focus(),r.element=o,this.notify(Ne,r))}}else{var c=this.getCurrentViewEvents().filter(function(d){return e[t.eventFields.id]===d[t.eventFields.id]});if(c.length<=0)return;var h=c[0];if(e[this.eventFields.recurrenceRule]){var p=c.filter(function(d){return d[t.eventFields.startTime].getTime()===e[t.eventFields.startTime].getTime()});p.length>0&&(h=p[0])}var u=this.element.querySelector('div[data-guid="'+h.Guid+'"]');u&&(this.eventBase.removeSelectedAppointmentClass(),this.eventBase.addSelectedAppointments([u]),this.activeEventData={event:h,element:u},("Agenda"===this.currentView||"MonthAgenda"===this.currentView)&&(0,s.cn)([this.activeEventData.element],nr),this.notify(Lt,this.activeEventData))}},i.prototype.closeQuickInfoPopup=function(){this.quickPopup&&this.quickPopup.quickPopupHide(!0)},i.prototype.selectResourceByIndex=function(e){this.resourceBase&&this.uiStateValues.isGroupAdaptive&&this.resourceBase.selectResourceByIndex(e)},i.prototype.getIndexFromResourceId=function(e,t){return this.resourceBase?this.resourceBase.getIndexFromResourceId(e,t):null},i.prototype.addResource=function(e,t,r){this.resourceBase.addResource(e,t,r)},i.prototype.removeResource=function(e,t){this.resourceBase.removeResource(e,t)},i.prototype.destroy=function(){this.eventTooltip&&(this.eventTooltip.destroy(),this.eventTooltip=null),this.destroyPopups(),this.hideSpinner(),this.unWireEvents(),this.destroyHeaderModule(),this.eventBase&&(this.eventBase.destroy(),this.eventBase=null),this.workCellAction&&(this.workCellAction.destroy(),this.workCellAction=null),this.inlineModule&&(this.inlineModule.destroy(),this.inlineModule=null),this.keyboardInteractionModule&&(this.keyboardInteractionModule.destroy(),this.keyboardInteractionModule=null),this.scrollModule&&(this.scrollModule.destroy(),this.scrollModule=null),this.printModule&&this.printModule.destroy(),this.activeView&&(this.resetTemplates(),this.activeView.removeEventListener(),this.activeView.destroy(),this.activeView=null),this.scheduleTouchModule&&(this.scheduleTouchModule.destroy(),this.scheduleTouchModule=null),this.crudModule&&(this.crudModule.destroy(),this.crudModule=null),this.dataModule&&(this.dataModule.destroy(),this.dataModule=null),l.prototype.destroy.call(this);for(var t=0,r=["dayModule","weekModule","workWeekModule","monthModule","monthAgendaModule","yearModule","agendaModule","timelineViewsModule","timelineMonthModule","timelineYearModule","resizeModule","dragAndDropModule","excelExportModule","printModule","iCalendarExportModule","iCalendarImportModule","tzModule","eventsData","eventsProcessed","blockData","blockProcessed","uiStateValues","viewCollections","viewOptions","defaultLocale","localeObj","selectedElements","resourceCollection","editorTitles","eventFields","activeViewOptions","activeEventData","activeCellsData","renderModule"];t<r.length;t++)this[r[t]]=null;Ie(this.element);var a=[Ki,Gr,Nt,Zr];this.cssClass&&(a=a.concat(this.cssClass.split(" "))),(0,s.IV)([this.element],a)},x([(0,s.Z9)("auto")],i.prototype,"width",void 0),x([(0,s.Z9)("auto")],i.prototype,"height",void 0),x([(0,s.Z9)(!0)],i.prototype,"showHeaderBar",void 0),x([(0,s.Z9)(!0)],i.prototype,"showTimeIndicator",void 0),x([(0,s.Z9)(!0)],i.prototype,"allowSwiping",void 0),x([(0,s.Z9)("Week")],i.prototype,"currentView",void 0),x([(0,s.Z9)(["Day","Week","WorkWeek","Month","Agenda"])],i.prototype,"views",void 0),x([(0,s.Z9)(new Date)],i.prototype,"selectedDate",void 0),x([(0,s.Z9)(new Date(1900,0,1))],i.prototype,"minDate",void 0),x([(0,s.Z9)(new Date(2099,11,31))],i.prototype,"maxDate",void 0),x([(0,s.Z9)()],i.prototype,"dateFormat",void 0),x([(0,s.Z9)("Gregorian")],i.prototype,"calendarMode",void 0),x([(0,s.Z9)(!0)],i.prototype,"showWeekend",void 0),x([(0,s.Z9)(0)],i.prototype,"firstDayOfWeek",void 0),x([(0,s.Z9)("FirstDay")],i.prototype,"weekRule",void 0),x([(0,s.Z9)([1,2,3,4,5])],i.prototype,"workDays",void 0),x([(0,s.Z9)(12)],i.prototype,"monthsCount",void 0),x([(0,s.Z9)("00:00")],i.prototype,"startHour",void 0),x([(0,s.Z9)("24:00")],i.prototype,"endHour",void 0),x([(0,s.Z9)(null)],i.prototype,"timeFormat",void 0),x([(0,s.Z9)(!1)],i.prototype,"enableAllDayScroll",void 0),x([(0,s.Z9)(!1)],i.prototype,"enableAdaptiveUI",void 0),x([(0,s.Z9)(!0)],i.prototype,"allowResizing",void 0),x([(0,s.Zz)({},lh)],i.prototype,"workHours",void 0),x([(0,s.Zz)({},hh)],i.prototype,"timeScale",void 0),x([(0,s.Z9)(!0)],i.prototype,"allowKeyboardInteraction",void 0),x([(0,s.Z9)(!0)],i.prototype,"allowDragAndDrop",void 0),x([(0,s.Z9)()],i.prototype,"dateHeaderTemplate",void 0),x([(0,s.Z9)()],i.prototype,"cellHeaderTemplate",void 0),x([(0,s.Z9)()],i.prototype,"dayHeaderTemplate",void 0),x([(0,s.Z9)()],i.prototype,"monthHeaderTemplate",void 0),x([(0,s.Z9)()],i.prototype,"cellTemplate",void 0),x([(0,s.Z9)(!1)],i.prototype,"readonly",void 0),x([(0,s.Z9)(!0)],i.prototype,"showQuickInfo",void 0),x([(0,s.Z9)(!1)],i.prototype,"allowInline",void 0),x([(0,s.Z9)(!0)],i.prototype,"allowMultiCellSelection",void 0),x([(0,s.Z9)(!0)],i.prototype,"allowMultiRowSelection",void 0),x([(0,s.Z9)(!1)],i.prototype,"quickInfoOnSelectionEnd",void 0),x([(0,s.Z9)(!1)],i.prototype,"showWeekNumber",void 0),x([(0,s.Z9)(!1)],i.prototype,"rowAutoHeight",void 0),x([(0,s.Z9)(!1)],i.prototype,"allowMultiDrag",void 0),x([(0,s.Z9)(0)],i.prototype,"firstMonthOfYear",void 0),x([(0,s.Z9)()],i.prototype,"editorTemplate",void 0),x([(0,s.Zz)({},uh)],i.prototype,"quickInfoTemplates",void 0),x([(0,s.Z9)(7)],i.prototype,"agendaDaysCount",void 0),x([(0,s.Z9)(!0)],i.prototype,"hideEmptyAgendaDays",void 0),x([(0,s.Z9)(!0)],i.prototype,"enableRecurrenceValidation",void 0),x([(0,s.Z9)()],i.prototype,"timezone",void 0),x([(0,s.Zz)({},Dh)],i.prototype,"eventSettings",void 0),x([(0,s.Z9)(hs)],i.prototype,"timezoneDataSource",void 0),x([(0,s.Z9)()],i.prototype,"resourceHeaderTemplate",void 0),x([(0,s.Z9)()],i.prototype,"headerIndentTemplate",void 0),x([(0,s.Zz)({},Sh)],i.prototype,"group",void 0),x([(0,s.FE)([],Ah)],i.prototype,"resources",void 0),x([(0,s.FE)([],vh)],i.prototype,"headerRows",void 0),x([(0,s.Z9)()],i.prototype,"cssClass",void 0),x([(0,s.Z9)()],i.prototype,"eventDragArea",void 0),x([(0,s.ju)()],i.prototype,"created",void 0),x([(0,s.ju)()],i.prototype,"destroyed",void 0),x([(0,s.ju)()],i.prototype,"cellClick",void 0),x([(0,s.ju)()],i.prototype,"cellDoubleClick",void 0),x([(0,s.ju)()],i.prototype,"moreEventsClick",void 0),x([(0,s.ju)()],i.prototype,"hover",void 0),x([(0,s.ju)()],i.prototype,"select",void 0),x([(0,s.ju)()],i.prototype,"actionBegin",void 0),x([(0,s.ju)()],i.prototype,"actionComplete",void 0),x([(0,s.ju)()],i.prototype,"actionFailure",void 0),x([(0,s.ju)()],i.prototype,"navigating",void 0),x([(0,s.ju)()],i.prototype,"renderCell",void 0),x([(0,s.ju)()],i.prototype,"eventClick",void 0),x([(0,s.ju)()],i.prototype,"eventRendered",void 0),x([(0,s.ju)()],i.prototype,"dataBinding",void 0),x([(0,s.ju)()],i.prototype,"popupOpen",void 0),x([(0,s.ju)()],i.prototype,"popupClose",void 0),x([(0,s.ju)()],i.prototype,"dragStart",void 0),x([(0,s.ju)()],i.prototype,"drag",void 0),x([(0,s.ju)()],i.prototype,"dragStop",void 0),x([(0,s.ju)()],i.prototype,"resizeStart",void 0),x([(0,s.ju)()],i.prototype,"resizing",void 0),x([(0,s.ju)()],i.prototype,"resizeStop",void 0),x([(0,s.ju)()],i.prototype,"dataBound",void 0),x([s.Zl],i)}(s.wA),Ir=function(){function l(i){this.parent=i}return l.prototype.isTimelineView=function(){return-1!==this.parent.currentView.indexOf("Timeline")},l.prototype.getContentRows=function(){return[]},l.prototype.refreshHeader=function(){},l.prototype.refreshResourceHeader=function(){(0,s.Od)(this.element.querySelector("tbody").lastElementChild.firstElementChild);var i=(0,s.az)("td");i.appendChild(this.parent.resourceBase.createResourceColumn()),(0,s.Ce)([i],this.element.querySelector("tbody").lastElementChild),this.parent.notify(ge,{})},l.prototype.getDayName=function(i){return this.parent.getDayNames("abbreviated")[i.getDay()]},l.prototype.getDate=function(i){return this.parent.globalize.formatDate(i,{format:"d",calendar:this.parent.getCalendarMode()})},l.prototype.getTime=function(i){return this.parent.isAdaptive?this.parent.globalize.formatDate(i,"HH:mm"===this.parent.activeViewOptions.timeFormat||"HH.mm"===this.parent.activeViewOptions.timeFormat?{format:"H",calendar:this.parent.getCalendarMode()}:{skeleton:"h",calendar:this.parent.getCalendarMode()}):this.parent.getTimeString(i)},l.prototype.getTimelineDate=function(i){return Y(this.parent.globalize.formatDate(i,{skeleton:"MMMd",calendar:this.parent.getCalendarMode()})+", "+this.parent.getDayNames("wide")[i.getDay()],"multiple")},l.prototype.createEventTable=function(i){var e=(0,s.az)("div",{className:ht});return(0,s.R3)(this.getEventRows(i),e),e},l.prototype.getEventRows=function(i){for(var t,e=[],r=0;r<i;r++)t=(0,s.az)("div",{className:He}),this.parent.resourceBase&&!this.parent.uiStateValues.isGroupAdaptive&&this.parent.resourceBase.renderedResources&&t.setAttribute("data-group-index",this.parent.resourceBase.renderedResources[r].groupIndex.toString()),e.push(t);return e},l.prototype.collapseRows=function(i){this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive&&(this.parent.resourceBase.hideResourceRows(i.querySelector("tbody")),this.parent.resourceBase.hideResourceRows(i.querySelector("."+ht)))},l.prototype.createTableLayout=function(i){var t=(0,s.az)("table",{className:"e-schedule-table "+(i||"")}),r=(0,s.az)("tbody");return t.appendChild(r),t},l.prototype.setAriaAttributes=function(i){i.setAttribute("role","grid"),i.setAttribute("aria-label",this.getLabelText(this.parent.currentView))},l.prototype.createColGroup=function(i,e){var t=e.length;e[0]&&e[0].colSpan&&(t=e.map(function(a){return a.colSpan}).reduce(function(a,o){return a+o}));for(var r=(0,s.az)("colgroup"),n=0;n<t;n++)r.appendChild((0,s.az)("col"));(0,s.Ce)([r],i)},l.prototype.getScrollXIndent=function(i){return i.offsetHeight-i.clientHeight>0?Zi():0},l.prototype.scrollTopPanel=function(i){this.getDatesHeaderElement().firstElementChild.scrollLeft=i.scrollLeft},l.prototype.scrollHeaderLabels=function(i){for(var e=this.element.querySelector(".e-date-header-wrap table"),t=e.offsetWidth/e.querySelectorAll("colgroup col").length,r=function(v,f){for(var g,m=0,y=0,w=f?-i.scrollLeft:i.scrollLeft,D=0,b=v;D<b.length;D++){var A=b[D];if((y+=parseInt(A.getAttribute("colSpan"),10))>Math.floor(w/t)){g=A;break}m+=A.offsetWidth}(0,s.le)(g)||(g.children[0].style[f?"right":"left"]=w-m+"px")},a=0,o=[".e-header-year-cell",".e-header-month-cell",".e-header-week-cell",".e-header-cells"];a<o.length;a++){var h=[].slice.call(this.element.querySelectorAll(o[a]));if(h.length>0){for(var p=0,u=h;p<u.length;p++)u[p].children[0].style[this.parent.enableRtl?"right":"left"]="";r(h,this.parent.enableRtl)}}},l.prototype.addAttributes=function(i,e){i.template&&(0,s.R3)(i.template,e),i.colSpan&&e.setAttribute("colspan",i.colSpan.toString()),i.className&&(0,s.cn)([e],i.className)},l.prototype.getHeaderBarHeight=function(){var i=2;if(this.parent.headerModule&&(i+=_r(this.parent.headerModule.getHeaderElement())),this.parent.uiStateValues.isGroupAdaptive){var e=this.parent.element.querySelector("."+sn);e&&(i+=e.offsetHeight)}return i},l.prototype.renderPanel=function(i){i===Xr?(0,s.Ce)([this.element],this.parent.element.querySelector("."+Me)):this.parent.element.querySelector("."+Me).appendChild(this.element)},l.prototype.setPanel=function(i){this.element=i},l.prototype.getPanel=function(){return this.element},l.prototype.getDatesHeaderElement=function(){return this.element.querySelector("."+hi)},l.prototype.getDateSlots=function(i,e){return[]},l.prototype.generateColumnLevels=function(){return[]},l.prototype.getColumnLevels=function(){return this.colLevels},l.prototype.highlightCurrentTime=function(){},l.prototype.startDate=function(){return this.renderDates[0]},l.prototype.endDate=function(){return V(this.renderDates[this.renderDates.length-1],1)},l.prototype.getStartHour=function(){var i=this.parent.getStartEndTime(this.parent.activeViewOptions.startHour);return(0,s.le)(i)&&(i=new Date(2e3,0,0,0)),i},l.prototype.getEndHour=function(){var i=this.parent.getStartEndTime(this.parent.activeViewOptions.endHour);return(0,s.le)(i)&&(i=new Date(2e3,0,0,0)),i},l.prototype.isCurrentDate=function(i){return i.setHours(0,0,0,0)===this.parent.getCurrentTime().setHours(0,0,0,0)},l.prototype.isCurrentMonth=function(i){return this.parent.activeViewOptions.displayDate||this.parent.activeViewOptions.numberOfWeeks>0?this.parent.activeView.getStartDate().getTime()<=this.parent.getCurrentTime().getTime()&&this.parent.activeView.getEndDate().getTime()>=this.parent.getCurrentTime().getTime():i.getFullYear()===this.parent.getCurrentTime().getFullYear()&&i.getMonth()===this.parent.getCurrentTime().getMonth()},l.prototype.isWorkDay=function(i,e){return void 0===e&&(e=this.parent.activeViewOptions.workDays),e.indexOf(i.getDay())>=0},l.prototype.isWorkHour=function(i,e,t,r){return!((0,s.le)(e)||(0,s.le)(t)||(e.setMilliseconds(0),t.setMilliseconds(0),Je(i)<Je(e)||Je(i)>=Je(t)||!this.isWorkDay(i,r)))},l.prototype.getRenderDates=function(i){var e=[];if("Week"===this.parent.currentView||"TimelineWeek"===this.parent.currentView)for(var r=me(C(this.parent.selectedDate),this.parent.activeViewOptions.firstDayOfWeek),n=0,a=7*this.parent.activeViewOptions.interval;n<a;n++)(this.parent.activeViewOptions.showWeekend||this.isWorkDay(r,i))&&e.push(r),r=V(r,1);else if("WorkWeek"===this.parent.currentView||"TimelineWorkWeek"===this.parent.currentView){r=me(C(this.parent.selectedDate),this.parent.activeViewOptions.firstDayOfWeek),n=0;for(var o=7*this.parent.activeViewOptions.interval;n<o;n++)this.isWorkDay(r,i)&&e.push(r),r=V(r,1)}else{var c="Agenda"===this.parent.currentView?this.parent.agendaDaysCount:this.parent.activeViewOptions.interval;r=C(this.parent.selectedDate);do{(this.parent.activeViewOptions.showWeekend||this.isWorkDay(r,i))&&e.push(r),r=V(r,1)}while(c!==e.length)}return i||(this.renderDates=e),this.parent.headerModule&&this.parent.headerModule.previousNextIconHandler(),e},l.prototype.getNextPreviousDate=function(i){if("Day"===this.parent.currentView||"TimelineDay"===this.parent.currentView){if(this.parent.activeViewOptions.showWeekend){var e=this.parent.activeViewOptions.interval;return V(this.parent.selectedDate,"next"===i?e:-e)}var t=void 0;if("next"===i)for(t=V(this.renderDates.slice(-1)[0],1);!this.isWorkDay(t);)t=V(t,1);else{t=V(this.renderDates[0],-1);var r=0;do{this.isWorkDay(t)&&(r+=1),this.parent.activeViewOptions.interval!==r&&(t=V(t,-1))}while(this.parent.activeViewOptions.interval!==r)}return t}return V(this.parent.selectedDate,("next"===i?7:-7)*this.parent.activeViewOptions.interval)},l.prototype.getLabelText=function(i){var e=i.charAt(0).toLowerCase()+i.substring(1);return this.parent.localeObj.getConstant(e)+" of "+Y(this.parent.globalize.formatDate(this.parent.selectedDate,{skeleton:"long",calendar:this.parent.getCalendarMode()}),"single")},l.prototype.getDateRangeText=function(){return this.parent.isAdaptive?Y(this.parent.globalize.formatDate(this.parent.selectedDate,{format:this.parent.activeViewOptions.dateFormat?this.parent.activeViewOptions.dateFormat:"MMMM y",calendar:this.parent.getCalendarMode()}),"single"):this.formatDateRange(this.renderDates[0],this.renderDates[this.renderDates.length-1])},l.prototype.formatDateRange=function(i,e){var o,t=this.parent.globalize,r=this.parent.getCalendarMode();if(i===e&&(e=null),!(0,s.le)(this.parent.activeViewOptions.dateFormat))return Y(e?t.formatDate(i,{format:this.parent.activeViewOptions.dateFormat,calendar:r})+" - "+t.formatDate(e,{format:this.parent.activeViewOptions.dateFormat,calendar:r}):t.formatDate(i,{format:this.parent.activeViewOptions.dateFormat,calendar:r}),"multiple");if(o="en"===this.parent.locale||"en-US"===this.parent.locale?(0,s.NA)("dateFormats.long",(0,s.bD)(r)):(0,s.NA)("main."+this.parent.locale+".dates.calendars."+r+".dateFormats.long",s.qV),!e)return Y(t.formatDate(i,{format:o,calendar:r}),"single");var c=o.trim().toLocaleLowerCase();return Y("d"===c.substr(0,1)?i.getFullYear()===e.getFullYear()?i.getMonth()===e.getMonth()?t.formatDate(i,{format:"dd",calendar:r})+" - "+t.formatDate(e,{format:"dd MMMM yyyy",calendar:r}):t.formatDate(i,{format:"dd MMM",calendar:r})+" - "+t.formatDate(e,{format:"dd MMM yyyy",calendar:r}):t.formatDate(i,{format:"dd MMM yyyy",calendar:r})+" - "+t.formatDate(e,{format:"dd MMM yyyy",calendar:r}):"m"===c.substr(0,1)?i.getFullYear()===e.getFullYear()?i.getMonth()===e.getMonth()?t.formatDate(i,{format:"MMMM dd",calendar:r})+" - "+t.formatDate(e,{format:"dd, yyyy",calendar:r}):t.formatDate(i,{format:"MMM dd",calendar:r})+" - "+t.formatDate(e,{format:"MMM dd, yyyy",calendar:r}):t.formatDate(i,{format:"MMM dd, yyyy",calendar:r})+" - "+t.formatDate(e,{format:"MMM dd, yyyy",calendar:r}):t.formatDate(i,{format:o,calendar:r})+" - "+t.formatDate(e,{format:o,calendar:r}),"multiple")},l.prototype.getMobileDateElement=function(i,e){return(0,s.az)("div",{className:e,innerHTML:'<div class="e-m-date">'+this.parent.globalize.formatDate(i,{format:"d",calendar:this.parent.getCalendarMode()})+'</div><div class="e-m-day">'+Y(this.parent.globalize.formatDate(i,{format:"E",calendar:this.parent.getCalendarMode()}),"single")+"</div>"})},l.prototype.setResourceHeaderContent=function(i,e,t){if(void 0===t&&(t=ce),this.parent.activeViewOptions.resourceHeaderTemplate){var r={resource:e.resource,resourceData:e.resourceData},o=this.parent.element.id+"_"+this.parent.activeViewOptions.resourceHeaderTemplateName+"resourceHeaderTemplate",c=[].slice.call(this.parent.getResourceHeaderTemplate()(r,this.parent,"resourceHeaderTemplate",o,!1));(0,s.R3)(c,i)}else i.appendChild((0,s.az)("div",{className:t,innerHTML:e.resourceData[e.resource.textField]}))},l.prototype.renderResourceMobileLayout=function(){this.parent.resourceBase.lastResourceLevel&&this.parent.resourceBase.lastResourceLevel.length<=0||(this.parent.resourceBase.renderResourceHeader(),this.parent.resourceBase.renderResourceTree())},l.prototype.addAutoHeightClass=function(i){!this.parent.uiStateValues.isGroupAdaptive&&this.parent.rowAutoHeight&&this.isTimelineView()&&this.parent.activeViewOptions.group.resources.length>0&&(0,s.cn)([i],Rn)},l.prototype.getColElements=function(){return[].slice.call(this.element.querySelectorAll("."+F+" col, ."+ye+" col"))},l.prototype.setColWidth=function(i){if(this.isTimelineView()){var e=this.getColElements(),r=this.element.querySelector("."+X+" tbody").getBoundingClientRect().width/(e.length/2);if(e.forEach(function(c){return(0,s.V7)(c,{width:(0,s.Ac)(r)})}),i.offsetHeight!==i.clientHeight){var n=this.parent.element.querySelector("."+Oe);(0,s.le)(n)||(0,s.V7)(n,{height:(0,s.Ac)(i.clientHeight)})}[].slice.call(this.element.querySelectorAll(".e-header-cells,.e-time-slots,.e-header-week-cell,.e-header-month-cell,.e-header-year-cell")).forEach(function(c){var h=(0,s.le)(c.getAttribute("colspan"))?"1":c.getAttribute("colspan"),p=parseInt(h,10);(0,s.V7)(c,{width:(0,s.Ac)(r*p)})})}},l.prototype.resetColWidth=function(){for(var e=0,t=this.getColElements();e<t.length;e++)t[e].style.width=""},l.prototype.getContentAreaElement=function(){return this.element.querySelector("."+F)},l.prototype.wireExpandCollapseIconEvents=function(){if(this.parent.resourceBase&&this.parent.resourceBase.resourceCollection.length>1)for(var e=0,t=[].slice.call(this.element.querySelectorAll("."+zt));e<t.length;e++){var r=t[e];s.bi.clearEvents(r),s.bi.add(r,"click",this.parent.resourceBase.onTreeIconClick,this.parent.resourceBase)}},l.prototype.scrollToDate=function(i){if(-1!==["Month","TimelineMonth"].indexOf(this.parent.currentView)&&!(0,s.le)(i)){var e=this.getContentAreaElement(),t=new Date(C(new Date(+i)).getTime()).getTime(),r=e.querySelector("."+R+'[data-date="'+t+'"]');"Month"===this.parent.currentView&&r&&(e.scrollWidth>e.clientWidth&&(e.scrollLeft=this.parent.enableRtl?-(this.parent.getContentTable().offsetWidth-r.offsetLeft-r.offsetWidth):r.offsetLeft),e.scrollTop=r.offsetTop),"TimelineMonth"===this.parent.currentView&&r&&(e.scrollLeft=this.parent.enableRtl?-(this.parent.getContentTable().offsetWidth-r.offsetLeft-r.offsetWidth):r.offsetLeft)}},l.prototype.setPersistence=function(){if(this.parent.enablePersistence){var i=this.element.querySelector(".e-content-wrap");(0,s.le)(i)||(this.parent.scrollLeft=i.scrollLeft,this.parent.scrollTop=i.scrollTop)}},l.prototype.retainScrollPosition=function(){if(this.parent.enablePersistence){var i=this.parent.element.querySelector(".e-content-wrap");!(0,s.le)(i)&&!(0,s.le)(this.parent.scrollLeft)&&!(0,s.le)(this.parent.scrollTop)&&(i.scrollTop=this.parent.scrollTop,i.scrollLeft=this.parent.scrollLeft)}},l.prototype.getViewStartDate=function(){var i=this.renderDates[0];return this.parent.activeViewOptions.group.resources.length>0&&this.parent.resourceBase.lastResourceLevel.length>0&&(i=this.parent.resourceBase.getResourceRenderDates()[0]),i},l.prototype.getViewEndDate=function(){var i=V(this.renderDates[this.renderDates.length-1],1);return this.parent.activeViewOptions.group.resources.length>0&&this.parent.resourceBase.lastResourceLevel.length>0&&(i=V(this.parent.resourceBase.getResourceRenderDates().slice(-1)[0],1)),i},l.prototype.getAdjustedDate=function(i){return!this.parent.activeViewOptions.timeScale.enable||"Month"===this.parent.currentView||"TimelineYear"===this.parent.currentView&&0===this.parent.activeViewOptions.group.resources.length?new Date(i.setHours(0,0,0,0)):"TimelineYear"===this.parent.currentView&&this.parent.activeViewOptions.group.resources.length>0?(i.setHours(0,0,0,0),new Date(i.setDate(1))):null},l.prototype.resetColLevels=function(){this.parent.resourceBase.expandedResources=[];for(var i=this.parent.virtualScrollModule.getRenderedCount(),e=this.parent.activeViewOptions.group.byDate?this.colLevels[0]:this.parent.resourceBase.renderedResources,t=0,r=0;r<e.length&&!(t>=i);r++)t+=e[r].colSpan,this.parent.resourceBase.expandedResources.push(e[r]);this.parent.activeViewOptions.group.byDate?(this.colLevels[0]=this.parent.resourceBase.expandedResources,this.parent.virtualScrollModule.setRenderedDates(this.parent.resourceBase.expandedResources)):(this.colLevels[this.colLevels.length-2]=this.parent.resourceBase.expandedResources,this.parent.resourceBase.renderedResources=this.parent.resourceBase.expandedResources),"Month"!==this.parent.currentView&&(this.colLevels[this.colLevels.length-1]=this.colLevels[this.colLevels.length-1].slice(0,t),this.parent.resourceBase.expandedResources=this.colLevels[this.colLevels.length-1])},l.prototype.destroy=function(){this.element&&this.element.parentNode&&(0,s.Od)(this.element),this.element=null,this.renderDates=null,this.colLevels=null},l}(),Ih=function(){var l=function(i,e){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])})(i,e)};return function(i,e){function t(){this.constructor=i}l(i,e),i.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}}(),Lr=function(l){function i(e){var t=l.call(this,e)||this;return t.viewClass="e-day-view",t.isInverseTableSelect=!0,t.baseCssClass="e-vertical-view",t.appointment=null,t}return Ih(i,l),i.prototype.getModuleName=function(){return"verticalView"},i.prototype.addEventListener=function(){this.parent.on(be,this.scrollUiUpdate,this),this.parent.on(Ae,this.renderEvents,this)},i.prototype.removeEventListener=function(){this.parent&&(this.parent.off(be,this.scrollUiUpdate),this.parent.off(Ae,this.renderEvents))},i.prototype.renderEvents=function(){this.appointment=this.parent.activeViewOptions.timeScale.enable?new Un(this.parent):new $t(this.parent),this.appointment.renderAppointments(),this.parent.notify(lt,{})},i.prototype.onContentScroll=function(e){this.parent.removeNewEventElement();var t=e.target;this.parent.notify(li,e),this.scrollLeftPanel(t),this.scrollTopPanel(t),this.parent.isAdaptive||(this.parent.uiStateValues.top=t.scrollTop),this.parent.uiStateValues.left=t.scrollLeft,(0,s.le)(this.parent.quickPopup)||this.parent.quickPopup.quickPopupHide(),this.setPersistence()},i.prototype.onAdaptiveMove=function(e){this.parent.uiStateValues.action&&e.preventDefault()},i.prototype.onAdaptiveScroll=function(e){this.parent&&!this.parent.isDestroyed&&(this.parent.removeNewEventElement(),this.parent.uiStateValues.top=e.target.scrollTop)},i.prototype.scrollLeftPanel=function(e){var t=this.getLeftPanelElement();(0,s.le)(t)||(t.scrollTop=e.scrollTop)},i.prototype.scrollUiUpdate=function(e){if(this.parent){var t=this.parent.element.querySelector("."+ye),r=this.getHeaderBarHeight(),n=this.getLeftPanelElement(),a=this.getScrollableElement(),o=this.getDatesHeaderElement(),c=this.parent.element.offsetHeight-r-o.offsetHeight;this.setColWidth(a),this.setContentHeight(a,n,c);var h=Zi();o.firstElementChild.style[e.cssProperties.rtlBorder]="",o.style[e.cssProperties.rtlPadding]="";var p=!this.parent.enableAllDayScroll||!(a.offsetWidth-a.clientWidth<=t.offsetWidth-t.clientWidth&&t.classList.contains("e-all-day-scroll"));a.offsetWidth-a.clientWidth>0&&p?(o.firstElementChild.style[e.cssProperties.border]=h>0?"1px":"0px",o.style[e.cssProperties.padding]=h>0?h-1+"px":"0px"):(o.firstElementChild.style[e.cssProperties.border]="",o.style[e.cssProperties.padding]=""),e.isPreventScrollUpdate||(this.parent.uiStateValues.isInitial?(this.scrollToWorkHour(),this.parent.uiStateValues.isInitial=!1):(n&&(n.scrollTop=this.parent.uiStateValues.top),a.scrollTop=this.parent.uiStateValues.top,a.scrollLeft=this.parent.uiStateValues.left)),this.parent.activeViewOptions.timeScale.enable&&this.highlightCurrentTime(),this.retainScrollPosition()}},i.prototype.setContentHeight=function(e,t,r){this.parent.isAdaptive&&!this.isTimelineView()||(0,s.le)(t)||(t.style.height="auto"===this.parent.height?"auto":(0,s.Ac)(r-this.getScrollXIndent(e))),e.style.height="auto"===this.parent.height?"auto":(0,s.Ac)(r)},i.prototype.scrollToWorkHour=function(){if(this.parent.workHours.highlight){var e=this.element.querySelector("."+Bt);e&&(this.getScrollableElement().scrollTop=e.offsetTop,this.parent.uiStateValues.top=e.offsetTop,this.parent.uiStateValues.left=0)}},i.prototype.scrollToHour=function(e,t){var r=this.parent.getStartEndTime(e);if(!(0,s.le)(t)){var n=this.element.querySelector("."+ie+'[data-date="'+new Date(C(t)).getTime()+'"]');if(n)if(this.parent.enableRtl){var a=this.element.querySelector("."+X);this.getScrollableElement().scrollLeft=-(a.offsetWidth-n.offsetLeft-n.offsetWidth)}else this.getScrollableElement().scrollLeft=n.offsetLeft}(0,s.le)(r)||(this.getScrollableElement().scrollTop=this.getTopFromDateTime(r))},i.prototype.scrollToDate=function(e){this.scrollToHour(null,e)},i.prototype.generateColumnLevels=function(){var e=this.getDateSlots(this.renderDates,this.parent.activeViewOptions.workDays),t=[];if(this.parent.activeViewOptions.group.resources.length>0){if(t=this.parent.resourceBase.generateResourceLevels(e),this.parent.uiStateValues.isGroupAdaptive&&this.parent.resourceBase.lastResourceLevel.length>0){var r=this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];t=[this.getDateSlots(r.renderDates,r.workDays,r.resourceData[r.resource.startHourField],r.resourceData[r.resource.endHourField])]}}else t.push(e);return this.colLevels=t,t},i.prototype.getDateSlots=function(e,t,r,n){void 0===r&&(r=this.parent.workHours.start),void 0===n&&(n=this.parent.workHours.end);for(var a=[],o=this.parent.getStartEndTime(r),c=this.parent.getStartEndTime(n),h=0,p=e;h<p.length;h++){var u=p[h],d=[ie];this.isCurrentDate(u)&&d.push(Qi),a.push({date:u,type:"dateHeader",className:d,colSpan:1,workDays:t,startHour:new Date(+o),endHour:new Date(+c)})}return a},i.prototype.isWorkHourRange=function(e){return this.getStartHour().getTime()<=e.getTime()&&this.getEndHour().getTime()>=e.getTime()},i.prototype.highlightCurrentTime=function(){var e=this;if(!(this.parent.activeViewOptions.headerRows.length>0&&"Hour"!==this.parent.activeViewOptions.headerRows.slice(-1)[0].option))if(this.parent.showTimeIndicator&&this.isWorkHourRange(this.parent.getCurrentTime()))if(this.getCurrentTimeIndicatorIndex().length>0){if([].slice.call(this.element.querySelectorAll("."+R)).length>0&&this.changeCurrentTimePosition(),(0,s.le)(this.currentTimeIndicatorTimer)){var n=this.parent.getCurrentTime(),a=oe-(1e3*n.getSeconds()+n.getMilliseconds());a<=59e3&&window.setTimeout(function(){(0,s.le)(e.currentTimeIndicatorTimer)||(e.clearCurrentTimeIndicatorTimer(),e.changeCurrentTimePosition(),e.updateCurrentTimeIndicatorTimer())},a),this.updateCurrentTimeIndicatorTimer()}}else this.clearCurrentTimeIndicatorTimer();else this.clearCurrentTimeIndicatorTimer()},i.prototype.getCurrentTimeIndicatorIndex=function(){var e=[];if(!(0,s.le)(this.parent.resourceBase)&&this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive){var t=0;if(this.parent.virtualScrollModule&&this.parent.activeViewOptions.allowVirtualScrolling&&this.parent.activeViewOptions.group.byDate)for(var r=0,n=this.parent.resourceBase.expandedResources;r<n.length;r++)C((a=n[r]).date).getTime()===C(this.parent.getCurrentTime()).getTime()&&e.push(t),t+=1;else for(var o=0,c=this.parent.resourceBase.renderedResources;o<c.length;o++){var a;(h=this.parent.getIndexOfDate((a=c[o]).renderDates,C(this.parent.getCurrentTime())))>=0&&e.push(this.parent.activeViewOptions.group.byDate?this.parent.resourceBase.lastResourceLevel.length*h+t:t+h),t+=this.parent.activeViewOptions.group.byDate?1:a.renderDates.length}}else{var h;(h=this.parent.getIndexOfDate(this.parent.uiStateValues.isGroupAdaptive&&this.parent.resourceBase.lastResourceLevel.length>0?this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex].renderDates:this.renderDates,C(this.parent.getCurrentTime())))>=0&&e.push(h)}return e},i.prototype.clearCurrentTimeIndicatorTimer=function(){(0,s.le)(this.currentTimeIndicatorTimer)||(window.clearInterval(this.currentTimeIndicatorTimer),this.currentTimeIndicatorTimer=null,this.removeCurrentTimeIndicatorElements())},i.prototype.updateCurrentTimeIndicatorTimer=function(){var e=this;this.currentTimeIndicatorTimer=window.setInterval(function(){e.changeCurrentTimePosition()},oe)},i.prototype.removeCurrentTimeIndicatorElements=function(){for(var r=0,n=[].slice.call(this.element.querySelectorAll(".e-previous-timeline,.e-current-timeline,.e-current-time"));r<n.length;r++)(0,s.Od)(n[r])},i.prototype.changeCurrentTimePosition=function(){if(!(!this.parent||this.parent&&this.parent.isDestroyed)){this.removeCurrentTimeIndicatorElements();var e=this.getCurrentTimeIndicatorIndex(),t=this.parent.getContentTable().rows[0],r=this.getTopFromDateTime(this.parent.getCurrentTime()),n=(0,s.Ac)(r),a=Math.floor(r/t.cells[0].offsetHeight),o=this.getLeftPanelElement(),c=[].slice.call(o.querySelectorAll("tr"));if(!(0,s.le)(a)&&!isNaN(a)&&a!==c.length){for(var h=[].slice.call(this.element.querySelectorAll("."+Aa)),p=0,u=e[0];p<u;p++)h[p].appendChild((0,s.az)("div",{className:"e-previous-timeline",styles:"top:"+n}));for(var d=0,v=e;d<v.length;d++)h[v[d]].appendChild((0,s.az)("div",{className:Ut,styles:"top:"+n}));var g=(0,s.az)("div",{innerHTML:this.parent.getTimeString(this.parent.getCurrentTime()),className:tn,styles:"top:"+n});a<=c.length&&((0,s.IV)(o.querySelectorAll("."+rn),rn),c[a]&&(0,s.cn)([c[a].lastElementChild],rn),(0,s.Ce)([g],o),g.style.top=(0,s.Ac)(g.offsetTop-g.offsetHeight/2))}}},i.prototype.getTopFromDateTime=function(e){var t=this.getStartHour();return(60*(e.getHours()-t.getHours())+(e.getMinutes()-t.getMinutes()))*this.getWorkCellHeight()*this.parent.activeViewOptions.timeScale.slotCount/this.parent.activeViewOptions.timeScale.interval},i.prototype.getWorkCellHeight=function(){return parseFloat(this.element.querySelector("."+R).getBoundingClientRect().height.toFixed(2))},i.prototype.getTdContent=function(e,t,r){var n,a=(0,s.az)("div"),o="",c=this.parent.element.id+"_";switch(t){case"dateHeader":if(this.parent.activeViewOptions.dateHeaderTemplate){o="dateHeaderTemplate";var h={date:e,type:t},p=this.parent.activeViewOptions.dateHeaderTemplateName;n=[].slice.call(this.parent.getDateHeaderTemplate()(h,this.parent,o,c+p+o,!1))}else a.innerHTML=this.parent.activeView.isTimelineView()?'<span class="e-header-date e-navigate">'+this.getTimelineDate(e)+"</span>":'<div class="e-header-day">'+Y(this.getDayName(e),"single")+'</div><div class="e-header-date e-navigate" role="link">'+this.getDate(e)+"</div>",n=[].slice.call(a.childNodes);break;case"majorSlot":this.parent.activeViewOptions.timeScale.majorSlotTemplate?(o="majorSlotTemplate",h={date:e,type:t},n=[].slice.call(this.parent.getMajorSlotTemplate()(h,this.parent,o,c+o,!1))):(a.innerHTML="<span>"+this.getTime(e)+"</span>",n=[].slice.call(a.childNodes));break;case"minorSlot":this.parent.activeViewOptions.timeScale.minorSlotTemplate?(o="minorSlotTemplate",h={date:e,type:t},n=[].slice.call(this.parent.getMinorSlotTemplate()(h,this.parent,o,c+o,!1))):n=[].slice.call(a.childNodes);break;case"alldayCells":this.parent.activeViewOptions.cellTemplate&&(p=this.parent.activeViewOptions.cellTemplateName,o="cellTemplate",h={date:e,type:t,groupIndex:r},n=[].slice.call(this.parent.getCellTemplate()(h,this.parent,o,c+p+o,!1)))}return n},i.prototype.refreshHeader=function(){(0,s.Od)(this.element.querySelector("tbody tr")),this.renderHeader(),this.parent.notify(ge,{})},i.prototype.renderLayout=function(e){this.setPanel((0,s.az)("div",{className:ir}));var t=[this.baseCssClass,this.viewClass];t.push(e),this.parent.activeViewOptions.group.byDate&&t.push("e-by-date"),this.parent.activeViewOptions.timeScale.enable||(0,s.cn)([this.element],["e-timescale-disable",this.viewClass]),this.parent.activeViewOptions.allowVirtualScrolling&&!this.parent.uiStateValues.isGroupAdaptive&&t.push(Mn),this.parent.rowAutoHeight&&this.parent.eventSettings.ignoreWhitespace&&t.push(rs),this.renderPanel(e),(0,s.cn)([this.element],t),this.element.appendChild(this.createTableLayout(rr)),this.element.querySelector("table").setAttribute("role","presentation"),this.colLevels=this.generateColumnLevels(),this.renderHeader(),this.renderContent(),this.parent.uiStateValues.isGroupAdaptive&&!this.parent.element.querySelector("."+di)&&this.renderResourceMobileLayout(),this.parent.notify(ge,{})},i.prototype.renderHeader=function(){var e=(0,s.az)("tr"),t=(0,s.az)("td");if(t.appendChild(this.renderDatesHeader()),this.parent.activeViewOptions.timeScale.enable){var r=(0,s.az)("td",{className:"e-left-indent"});r.appendChild(this.renderLeftIndent()),e.appendChild(r)}e.appendChild(t),(0,s.Ce)([e],this.element.querySelector("tbody"))},i.prototype.renderContent=function(){this.parent.activeViewOptions.group.resources.length>0&&(this.parent.resourceBase.renderedResources=(0,s.l7)([],this.parent.resourceBase.lastResourceLevel,null,!0));var e=(0,s.az)("tr"),t=(0,s.az)("td");if(this.parent.isAdaptive){t.setAttribute("colspan",this.parent.activeViewOptions.timeScale.enable?"2":"1");var r=(0,s.az)("div",{className:nn});this.parent.activeViewOptions.timeScale.enable&&r.appendChild(this.renderTimeCells()),r.appendChild(this.renderContentArea()),t.appendChild(r),s.bi.add(r,"scroll",this.onAdaptiveScroll,this),s.bi.add(r,s.AR.touchMoveEvent,this.onAdaptiveMove,this),e.appendChild(t)}else{var n=this.colLevels.slice(0);this.parent.virtualScrollModule&&this.resetColLevels();var a=this.renderContentArea();if(t.appendChild(a),this.parent.activeViewOptions.timeScale.enable){var o=(0,s.az)("td");o.appendChild(this.renderTimeCells()),e.appendChild(o)}e.appendChild(t),this.parent.virtualScrollModule&&(this.colLevels=n,this.parent.virtualScrollModule.renderVirtualTrack(a))}this.element.querySelector("tbody").appendChild(e)},i.prototype.renderLeftIndent=function(){for(var a,e=(0,s.az)("div",{className:"e-left-indent-wrap"}),t=this.createTableLayout(),r=(0,s.az)("tr"),n=this.colLevels.length,o=0;o<n;o++){var c=r.cloneNode(),h={className:[this.colLevels[o][0]&&this.colLevels[o][0].className[0]],type:"emptyCells"};if(this.parent.activeViewOptions.showWeekNumber&&-1!==h.className.indexOf(ie)){h.className.push(Ji);var p=this.parent.getWeekNumberContent(this.renderDates);h.template=[(0,s.az)("span",{innerHTML:""+p,attrs:{title:this.parent.localeObj.getConstant("week")+" "+p}})]}a=this.createTd(h),this.parent.renderHeaderIndentTemplate(h,a),c.appendChild(a),t.querySelector("tbody").appendChild(c)}var u=r.cloneNode(),d=(0,s.az)("div",{attrs:{tabindex:"0",role:"list",title:this.parent.localeObj.getConstant("expandAllDaySection"),"aria-disabled":"false","aria-label":"Expand section"},className:wi+" "+cr+" "+$+" "+j}),v={className:[U],type:"emptyCells"};return(a=this.createTd(v)).appendChild(d),this.parent.renderHeaderIndentTemplate(v,a),u.appendChild(a),t.querySelector("tbody").appendChild(u),e.appendChild(t),e},i.prototype.renderDatesHeader=function(){var e=(0,s.az)("div",{className:hi}),t=(0,s.az)("div",{className:ye});e.appendChild(t);for(var r=this.createTableLayout(),n=(0,s.az)("tr",{className:gn}),a=this.colLevels.length,o=this.colLevels[a-1],c=0;c<a;c++){for(var h=n.cloneNode(),p=this.colLevels[c],u=0;u<p.length;u++)h.appendChild(this.createTd(p[u]));r.querySelector("tbody").appendChild(h)}return this.createAllDayRow(r,o),this.createColGroup(r,o),t.appendChild(r),e},i.prototype.createAllDayRow=function(e,t){for(var r=(0,s.az)("tr",{className:We}),n=0;n<t.length;n++){var a=(0,s.l7)({},t[n]);a.className=[U],a.type="alldayCells";var o=this.createTd(a);o.setAttribute("data-date",a.date.getTime().toString()),(0,s.le)(a.groupIndex)?this.parent.uiStateValues.isGroupAdaptive&&o.setAttribute("data-group-index",""+this.parent.uiStateValues.groupIndex):o.setAttribute("data-group-index",""+a.groupIndex),this.wireCellEvents(o),r.appendChild(o)}e.querySelector("tbody").appendChild(r);var c=(0,s.az)("thead");c.appendChild(this.parent.eventBase.createEventWrapper("allDay")),(0,s.Ce)([c],e)},i.prototype.createTd=function(e){var t=(0,s.az)("td");if(this.addAttributes(e,t),e.date&&e.type){var r=this.getTdContent(e.date,e.type,e.groupIndex);r&&r.length&&(0,s.R3)(r,t)}return this.parent.isMinMaxDate(C(new Date(""+e.date)))||(0,s.cn)([t],Jt),"resourceHeader"===e.type&&this.setResourceHeaderContent(t,e),"dateHeader"===e.type&&e.className.indexOf(ie)>=0&&(t.setAttribute("data-date",e.date.getTime().toString()),(0,s.le)(e.groupIndex)||t.setAttribute("data-group-index",""+e.groupIndex),this.wireMouseEvents(t)),this.parent.trigger(ue,{elementType:e.type,element:t,date:e.date,groupIndex:e.groupIndex}),t},i.prototype.wireCellEvents=function(e){s.bi.add(e,"mousedown",this.parent.workCellAction.cellMouseDown,this.parent.workCellAction),this.wireMouseEvents(e)},i.prototype.wireMouseEvents=function(e){s.bi.add(e,"click",this.parent.workCellAction.cellClick,this.parent.workCellAction),this.parent.isAdaptive||s.bi.add(e,"dblclick",this.parent.workCellAction.cellDblClick,this.parent.workCellAction)},i.prototype.renderTimeCells=function(){var e=this,t=(0,s.az)("div",{className:en}),r=this.createTableLayout(),n=(0,s.az)("tr");return this.getTimeSlotRows(function(o){o.type=o.first?"majorSlot":"minorSlot",o.className=o.last?[Ca,jt]:[jt];var c=n.cloneNode();return c.appendChild(e.createTd({date:o.date,type:o.type,className:o.className})),r.querySelector("tbody").appendChild(c),o}),t.appendChild(r),t},i.prototype.renderContentArea=function(){var e=(0,s.az)("div",{className:F}),t=this.createTableLayout(X);return this.setAriaAttributes(t),this.addAutoHeightClass(t),this.renderContentTable(t),this.createColGroup(t,this.colLevels.slice(-1)[0]),e.appendChild(t),this.wireCellEvents(t.querySelector("tbody")),s.bi.add(e,"scroll",this.onContentScroll,this),s.bi.add(e,s.AR.touchMoveEvent,this.onAdaptiveMove,this),e},i.prototype.renderContentTable=function(e){var t=e.querySelector("tbody");(0,s.R3)(this.getContentRows(),t),this.renderContentTableHeader(e)},i.prototype.getContentRows=function(){var e=this,t=[],r=(0,s.az)("tr"),n=(0,s.az)("td",{attrs:{"aria-selected":"false"}});return this.getTimeSlotRows(function(o){for(var c=r.cloneNode(),h=0,p=e.colLevels[e.colLevels.length-1];h<p.length;h++){var d=e.createContentTd(p[h],o,n);c.appendChild(d)}return t.push(c),o}),t},i.prototype.createContentTd=function(e,t,r){var n=r.cloneNode();e.colSpan&&n.setAttribute("colspan",e.colSpan.toString());var a=this.getContentTdClass(t),o=C(e.date);this.parent.isMinMaxDate(o)||a.push(Jt),Gi(o,Je(t.date));var c="workCells";if(-1!==e.className.indexOf(Le)&&(a.push(pt),c="resourceGroupCells"),this.parent.workHours.highlight&&(this.parent.activeViewOptions.timeScale.enable&&this.isWorkHour(o,e.startHour,e.endHour,e.workDays)||!this.parent.activeViewOptions.timeScale.enable&&this.isWorkDay(o,e.workDays))&&a.push(Bt),(0,s.cn)([n],a),this.parent.activeViewOptions.cellTemplate){var h={date:o,type:c,groupIndex:e.groupIndex},d=this.parent.element.id+"_"+this.parent.activeViewOptions.cellTemplateName+"cellTemplate",v=[].slice.call(this.parent.getCellTemplate()(h,this.parent,"cellTemplate",d,!1));(0,s.R3)(v,n)}return n.setAttribute("data-date",o.getTime().toString()),(!(0,s.le)(e.groupIndex)||this.parent.uiStateValues.isGroupAdaptive)&&n.setAttribute("data-group-index",""+(this.parent.uiStateValues.isGroupAdaptive?this.parent.uiStateValues.groupIndex:e.groupIndex)),this.parent.trigger(ue,{elementType:c,element:n,date:o,groupIndex:e.groupIndex}),n},i.prototype.getContentTdClass=function(e){return e.last?[R]:[R,Sa]},i.prototype.renderContentTableHeader=function(e){var t=(0,s.az)("thead");t.appendChild(this.parent.eventBase.createEventWrapper()),this.parent.activeViewOptions.timeScale.enable&&t.appendChild(this.parent.eventBase.createEventWrapper("timeIndicator")),(0,s.Ce)([t],e)},i.prototype.getScrollableElement=function(){return this.parent.isAdaptive&&!this.isTimelineView()?this.element.querySelector("."+nn):this.getContentAreaElement()},i.prototype.getLeftPanelElement=function(){return this.element.querySelector("."+en)},i.prototype.getEndDateFromStartDate=function(e){var r=this.parent.activeViewOptions.timeScale.interval*oe/this.parent.activeViewOptions.timeScale.slotCount,n=new Date(e.getTime());return n.setMilliseconds(n.getMilliseconds()+r),n},i.prototype.getTimeSlotRows=function(e){var t=[],r=this.getStartHour(),n=this.getEndHour(),a=this.parent.activeViewOptions.timeScale.interval*oe,o=a/this.parent.activeViewOptions.timeScale.slotCount,c=Math.round(Z/o),h=r.getTime(),p=n.getTime();if(h!==p){var u=this.parent.activeViewOptions.timeScale.interval/this.parent.activeViewOptions.timeScale.slotCount;c=Math.abs(p-h)/o-(new Date(p).getTimezoneOffset()-new Date(h).getTimezoneOffset())/u}this.parent.activeViewOptions.timeScale.enable||(c=1);for(var d=this.parent.getStartEndTime(this.parent.workHours.start),v=this.parent.getStartEndTime(this.parent.workHours.end),f=0;f<c;f++){var g=new Date(h+o*f);if(Yo(g)||new Date(h).getTimezoneOffset()!==g.getTimezoneOffset()){var m=new Date(h).getTimezoneOffset()-g.getTimezoneOffset();g=new Date(g.getTime()-6e4*m)}var y=f%(a/o),w={date:new Date(""+g),startHour:d,endHour:v,first:0===y,middle:y<this.parent.activeViewOptions.timeScale.slotCount-1,last:y===this.parent.activeViewOptions.timeScale.slotCount-1,type:""};e&&e(w),t.push(w)}return t},i.prototype.getAdjustedDate=function(e){if(!this.parent.activeViewOptions.timeScale.enable)return new Date(e.setHours(0,0,0,0));for(var t=this.getTimeSlotRows(),r=new Date(new Date(t[0].date.getTime()).setHours(e.getHours(),e.getMinutes(),e.getMilliseconds())),n=0;n<t.length;n++)if(t[n].date.getTime()>r.getTime())return e.setHours(t[n-1].date.getHours(),t[n-1].date.getMinutes(),t[n-1].date.getMilliseconds()),new Date(e);return null},i.prototype.destroy=function(){if(!(!this.parent||this.parent&&this.parent.isDestroyed)&&(this.clearCurrentTimeIndicatorTimer(),this.element)){this.appointment&&(this.appointment.destroy(),this.appointment=null);var e=this.getContentAreaElement();e&&(s.bi.remove(e,"scroll",this.onContentScroll),s.bi.remove(e,s.AR.touchMoveEvent,this.onAdaptiveMove)),this.parent.resourceBase&&this.parent.resourceBase.destroy(),this.parent.scheduleTouchModule&&this.parent.scheduleTouchModule.resetValues(),l.prototype.destroy.call(this)}},i}(Ir),Lh=function(){var l=function(i,e){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])})(i,e)};return function(i,e){function t(){this.constructor=i}l(i,e),i.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}}(),lo=function(l){function i(e){var t=l.call(this,e)||this;return t.viewClass="e-day-view",t}return Lh(i,l),i.prototype.getModuleName=function(){return"day"},i}(Lr),Hh=function(){var l=function(i,e){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])})(i,e)};return function(i,e){function t(){this.constructor=i}l(i,e),i.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}}(),co=function(l){function i(e){var t=l.call(this,e)||this;return t.viewClass="e-week-view",t}return Hh(i,l),i.prototype.startDate=function(){return this.getViewStartDate()},i.prototype.endDate=function(){return this.getViewEndDate()},i.prototype.getModuleName=function(){return"week"},i}(Lr),Ph=function(){var l=function(i,e){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])})(i,e)};return function(i,e){function t(){this.constructor=i}l(i,e),i.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}}(),ho=function(l){function i(e){var t=l.call(this,e)||this;return t.viewClass="e-work-week-view",t}return Ph(i,l),i.prototype.startDate=function(){return this.getViewStartDate()},i.prototype.endDate=function(){return this.getViewEndDate()},i.prototype.getModuleName=function(){return"workWeek"},i}(Lr),qh=function(){var l=function(i,e){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])})(i,e)};return function(i,e){function t(){this.constructor=i}l(i,e),i.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}}(),Hr=function(l){function i(e){var t=l.call(this,e)||this;return t.dayNameFormat="wide",t.viewClass="e-month-view",t.isInverseTableSelect=!1,t.monthEvent=null,t.monthDates={},t}return qh(i,l),i.prototype.addEventListener=function(){this.parent.on(be,this.onScrollUIUpdate,this),this.parent.on(Ae,this.onDataReady,this),this.parent.on(Ne,this.onCellClick,this)},i.prototype.removeEventListener=function(){this.parent&&(this.parent.off(be,this.onScrollUIUpdate),this.parent.off(Ae,this.onDataReady),this.parent.off(Ne,this.onCellClick))},i.prototype.onDataReady=function(e){this.monthEvent=new $t(this.parent),this.monthEvent.renderAppointments(),this.parent.notify(lt,{})},i.prototype.onCellClick=function(e){},i.prototype.onContentScroll=function(e){this.parent.removeNewEventElement(),this.parent.notify(li,e),this.scrollTopPanel(e.target),this.scrollLeftPanel(e.target),this.parent.uiStateValues.top=e.target.scrollTop,this.parent.uiStateValues.left=e.target.scrollLeft,this.setPersistence()},i.prototype.scrollLeftPanel=function(e){var t=this.getLeftPanelElement();t&&(t.scrollTop=e.scrollTop)},i.prototype.getLeftPanelElement=function(){return this.element.querySelector("."+on)},i.prototype.onScrollUIUpdate=function(e){var t=this.getHeaderBarHeight(),r=this.getDatesHeaderElement(),n=this.getContentAreaElement(),a=this.parent.element.offsetHeight-t-r.offsetHeight,o=this.getLeftPanelElement();"auto"!==this.parent.height&&this.setContentHeight(n,o,a);var c=Zi();if(r.firstElementChild.style[e.cssProperties.rtlBorder]="",r.style[e.cssProperties.rtlPadding]="",n.offsetWidth-n.clientWidth>0?(r.firstElementChild.style[e.cssProperties.border]=c>0?"1px":"0px",r.style[e.cssProperties.padding]=c>0?c-1+"px":"0px"):(r.firstElementChild.style[e.cssProperties.border]="",r.style[e.cssProperties.padding]=""),this.setColWidth(n),e.scrollPosition||!e.isPreventScrollUpdate&&"TimelineMonth"===this.parent.currentView){var h="TimelineMonth"===this.parent.currentView?this.parent.uiStateValues.top:e.scrollPosition.top;o&&(o.scrollTop=h),n.scrollTop=h,this.parent.uiStateValues.isInitial?(this.scrollToSelectedDate(),this.parent.uiStateValues.isInitial=!1):n.scrollLeft="TimelineMonth"===this.parent.currentView?this.parent.uiStateValues.left:e.scrollPosition.left}else this.scrollToSelectedDate();this.retainScrollPosition()},i.prototype.scrollToSelectedDate=function(){var e=this.element.querySelector("."+ie+'[data-date="'+this.parent.selectedDate.getTime().toString()+'"]'),t=this.getContentAreaElement();t.scrollLeft=(0,s.le)(e)?0:this.parent.enableRtl?-(this.parent.getContentTable().offsetWidth-e.offsetLeft-e.offsetWidth):e.offsetLeft,0===t.scrollLeft&&this.parent.uiStateValues.isInitial&&(this.parent.uiStateValues.left=0)},i.prototype.setContentHeight=function(e,t,r){e.style.height="auto","Month"===this.parent.currentView&&(e.style.height=(0,s.Ac)(r)),t&&("MonthAgenda"===this.parent.currentView&&(r=this.element.querySelector("."+X).offsetHeight),t.style.height="auto",t.style.height=(0,s.Ac)(r-this.getScrollXIndent(e)))},i.prototype.generateColumnLevels=function(){var e=[],t=this.getDateSlots(this.renderDates,this.parent.activeViewOptions.workDays);if(this.parent.activeViewOptions.group.resources.length>0){if(e=this.parent.resourceBase.generateResourceLevels(t),"MonthAgenda"===this.parent.currentView&&(e=[t]),this.parent.uiStateValues.isGroupAdaptive&&this.parent.resourceBase.lastResourceLevel.length>0){var r=this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];e=[this.getDateSlots(r.renderDates,r.workDays)]}}else e.push(t);return this.colLevels=e,e},i.prototype.getDateSlots=function(e,t){for(var r=this.parent.activeViewOptions.showWeekend?7:t.length,n=[],a=this.isCurrentMonth(this.parent.selectedDate),o=0;o<r;o++){var c=[ie],h=e.slice(0,r).map(function(p){return p.getDay()});a&&h.indexOf(this.parent.getCurrentTime().getDay())===o&&c.push(Qi),n.push({date:e[o],type:"monthDay",className:c,colSpan:1,workDays:t})}return n},i.prototype.getDayNameFormat=function(){return this.parent.isAdaptive||this.parent.activeViewOptions.group.resources.length>0?"abbreviated":"wide"},i.prototype.renderLayout=function(e){this.dayNameFormat=this.getDayNameFormat(),this.setPanel((0,s.az)("div",{className:ir}));var t=[this.viewClass];t.push(e),this.parent.activeViewOptions.group.byDate&&t.push("e-by-date"),this.parent.activeViewOptions.allowVirtualScrolling&&!this.parent.uiStateValues.isGroupAdaptive&&t.push(Mn),this.parent.rowAutoHeight&&this.parent.eventSettings.ignoreWhitespace&&t.push(rs),(0,s.cn)([this.element],t),this.renderPanel(e),this.element.appendChild(this.createTableLayout(rr)),this.element.querySelector("table").setAttribute("role","presentation"),this.colLevels=this.generateColumnLevels(),this.renderHeader(),this.renderContent();var r="MonthAgenda"===this.parent.currentView?this.parent.activeView.getPanel():this.parent.element;this.parent.uiStateValues.isGroupAdaptive&&!r.querySelector("."+di)&&this.renderResourceMobileLayout(),this.parent.notify(ge,{}),this.parent.uiStateValues.isCustomMonth&&(this.parent.uiStateValues.isCustomMonth=!1)},i.prototype.refreshHeader=function(){(0,s.Od)(this.element.querySelector("tbody tr")),this.renderHeader(),this.parent.notify(ge,{})},i.prototype.wireCellEvents=function(e){s.bi.add(e,"mousedown",this.parent.workCellAction.cellMouseDown,this.parent.workCellAction),s.bi.add(e,"click",this.parent.workCellAction.cellClick,this.parent.workCellAction),this.parent.isAdaptive||s.bi.add(e,"dblclick",this.parent.workCellAction.cellDblClick,this.parent.workCellAction)},i.prototype.renderHeader=function(){var e=(0,s.az)("tr");this.renderLeftIndent(e);var t=(0,s.az)("td");t.appendChild(this.renderDatesHeader()),e.appendChild(t),(0,s.Ce)([e],this.element.querySelector("tbody"))},i.prototype.renderLeftIndent=function(e){this.parent.activeViewOptions.showWeekNumber&&e.appendChild((0,s.az)("td",{className:"e-left-indent"}))},i.prototype.renderContent=function(){this.parent.activeViewOptions.group.resources.length>0&&(this.parent.resourceBase.renderedResources=(0,s.l7)([],this.parent.resourceBase.lastResourceLevel,null,!0));var e=(0,s.az)("tr");this.parent.activeViewOptions.showWeekNumber&&e.appendChild(this.renderWeekNumberContent());var t=(0,s.az)("td"),r=this.colLevels.slice(0);this.parent.virtualScrollModule&&this.resetColLevels();var n=(0,s.az)("div",{className:F}),a=this.renderContentArea();if("Month"===this.parent.currentView)n.appendChild(a);else{var o=(0,s.az)("div",{className:Me});o.appendChild(a),n.appendChild(o)}s.bi.add(n,"scroll",this.onContentScroll,this),t.appendChild(n),e.appendChild(t),this.parent.virtualScrollModule&&(this.colLevels=r,this.parent.virtualScrollModule.renderVirtualTrack(n)),this.element.querySelector("tbody").appendChild(e),this.renderAppointmentContainer()},i.prototype.renderWeekNumberContent=function(){var e=this.renderDates.map(function(u){return new Date(+u)}),t=(0,s.az)("td"),r=(0,s.az)("div",{className:on});t.appendChild(r);var n=this.createTableLayout();r.appendChild(n);for(var a=this.parent.activeViewOptions.showWeekend?7:this.parent.activeViewOptions.workDays.length,o=0,c=this.renderDates.length/a;o<c;o++){var h=e.splice(0,a),p=this.parent.getWeekNumberContent(h);n.querySelector("tbody").appendChild(this.createWeekNumberElement(p))}return t},i.prototype.renderAppointmentContainer=function(){},i.prototype.renderDatesHeader=function(){var e=(0,s.az)("div",{className:hi}),t=(0,s.az)("div",{className:ye});e.appendChild(t);var r=this.createTableLayout();if("Month"===this.parent.currentView){var n=(0,s.az)("thead");n.appendChild((0,s.az)("tr")),(0,s.Ce)([n],r)}this.createColGroup(r,this.colLevels[this.colLevels.length-1]);for(var a=(0,s.az)("tr"),o=0;o<this.colLevels.length;o++){for(var c=this.colLevels[o],h=a.cloneNode(),p=0;p<c.length;p++)h.appendChild(this.createHeaderCell(c[p]));r.querySelector("tbody").appendChild(h)}return t.appendChild(r),e},i.prototype.createHeaderCell=function(e){var t=(0,s.az)("td");if(this.addAttributes(e,t),"monthDay"===e.type){var r=(0,s.az)("span",{innerHTML:Y(this.parent.getDayNames(this.dayNameFormat)[e.date.getDay()],"single")});t.appendChild(r)}if("resourceHeader"===e.type&&this.setResourceHeaderContent(t,e),"dateHeader"===e.type){if((0,s.cn)([t],Zt),t.setAttribute("data-date",e.date.getTime().toString()),this.parent.activeViewOptions.dateHeaderTemplate){var n={date:e.date,type:e.type},c=this.parent.element.id+"_"+this.parent.activeViewOptions.dateHeaderTemplateName+"dateHeaderTemplate",h=[].slice.call(this.parent.getDateHeaderTemplate()(n,this.parent,"dateHeaderTemplate",c,!1));h&&h.length&&(0,s.R3)(h,t)}else{r=(0,s.az)("span",{className:Et});var u=this.parent.globalize.formatDate(e.date,{skeleton:"full",calendar:this.parent.getCalendarMode()});r.setAttribute("title",Y(u,"multiple"));var d=!this.parent.calendarUtil.isMonthStart(e.date)||this.isCurrentDate(e.date)||this.parent.isAdaptive?this.parent.globalize.formatDate(e.date,{skeleton:"d",calendar:this.parent.getCalendarMode()}):this.parent.globalize.formatDate(e.date,{format:"MMM d",calendar:this.parent.getCalendarMode()});r.innerHTML=Y(d,"single"),t.appendChild(r)}this.wireCellEvents(t)}return this.parent.trigger(ue,{elementType:e.type,element:t,date:e.date,groupIndex:e.groupIndex}),t},i.prototype.getContentSlots=function(){if(!this.colLevels[this.colLevels.length-1]||!this.colLevels[this.colLevels.length-1][0])return[];var e=[],t=function(E,S,O,k){var M={date:new Date(+S),groupIndex:O.groupIndex,workDays:O.workDays,type:"monthCells",className:k||[R]};e[E]||(e[E]=[]),e[E].push(M)},r="MonthAgenda"!==this.parent.currentView&&this.parent.activeViewOptions.group.resources.length>0;if(!r||this.parent.uiStateValues.isGroupAdaptive||this.parent.activeViewOptions.group.byDate){c=this.renderDates.map(function(O){return new Date(+O)}),h=this.parent.activeViewOptions.showWeekend?7:this.parent.activeViewOptions.workDays.length;var g=this.colLevels.slice(0,1)[0],m=this.renderDates.map(Number).indexOf(+g[0].date);for(p=0;p<this.renderDates.length/h;p++){u=c.splice(0,h);for(var y=m;y<this.colLevels[0].length+m&&y<u.length;y++)if(f=u[y],r)for(var w=this.colLevels[this.colLevels.length-1],D=w.slice(0,w.length/h),b=0;b<D.length;b++){var A=void 0;0!==b&&(A=[R,"e-disable-date"]),t(p,f,D[b],A)}else t(p,f,this.colLevels[this.colLevels.length-1][0])}}else for(var n=0,a=this.colLevels[this.colLevels.length-2];n<a.length;n++)for(var o=a[n],c=o.renderDates.map(function(E){return new Date(+E)}),h=this.parent.activeViewOptions.showWeekend?7:o.workDays.length,p=0;p<o.renderDates.length/h;p++)for(var u,d=0,v=u=c.splice(0,h);d<v.length;d++){var f;t(p,f=v[d],o)}return e},i.prototype.updateClassList=function(e){!this.isCustomMonth()&&this.isOtherMonth(e.date)&&e.className.push(_),this.parent.isMinMaxDate(e.date)||e.className.push(Jt),"MonthAgenda"===this.parent.currentView&&this.parent.isSelectedDate(e.date)&&e.className.push(Yt)},i.prototype.isOtherMonth=function(e){return e.getTime()<this.monthDates.start.getTime()||e.getTime()>this.monthDates.end.getTime()},i.prototype.renderContentArea=function(){var e=this.createTableLayout(X);this.setAriaAttributes(e),this.addAutoHeightClass(e),"TimelineMonth"===this.parent.currentView&&this.createColGroup(e,this.colLevels[this.colLevels.length-1]);var t=new Date(this.parent.selectedDate.getTime());this.monthDates={start:this.parent.calendarUtil.firstDateOfMonth(t),end:this.parent.calendarUtil.lastDateOfMonth(Be(t,this.parent.activeViewOptions.interval-1))};var r=e.querySelector("tbody");return(0,s.R3)(this.getContentRows(),r),this.wireCellEvents(r),e},i.prototype.getContentRows=function(){for(var e=[],t=(0,s.az)("tr"),r=(0,s.az)("td",{attrs:{"aria-selected":"false"}}),n=this.getContentSlots(),a=0;a<n.length;a++){for(var o=t.cloneNode(),c=0;c<n[a].length;c++){var h=this.createContentTd(n[a][c],r);o.appendChild(h)}e.push(o)}return e},i.prototype.createContentTd=function(e,t){var r=t.cloneNode();e.colSpan&&r.setAttribute("colspan",e.colSpan.toString()),this.updateClassList(e);var n=e.type;if(-1!==e.className.indexOf(Le)&&(e.className.push(pt),n="resourceGroupCells"),this.parent.workHours.highlight&&this.isWorkDay(e.date,e.workDays)&&e.className.push("e-work-days"),this.isCurrentDate(e.date)&&e.className.push(Kr),(0,s.cn)([r],e.className),r.setAttribute("data-date",e.date.getTime().toString()),(!(0,s.le)(e.groupIndex)||this.parent.uiStateValues.isGroupAdaptive)&&r.setAttribute("data-group-index",""+(this.parent.uiStateValues.isGroupAdaptive?this.parent.uiStateValues.groupIndex:e.groupIndex)),this.renderDateHeaderElement(e,r),this.parent.activeViewOptions.cellTemplate){var o={date:e.date,type:n,groupIndex:e.groupIndex},p=this.parent.element.id+"_"+this.parent.activeViewOptions.cellTemplateName+"cellTemplate",u=[].slice.call(this.parent.getCellTemplate()(o,this.parent,"cellTemplate",p,!1));(0,s.R3)(u,r)}return this.parent.trigger(ue,{elementType:n,element:r,date:e.date,groupIndex:e.groupIndex}),r},i.prototype.renderDateHeaderElement=function(e,t){if("TimelineMonth"!==this.parent.currentView){var r=(0,s.az)("div",{className:Zt});if(this.parent.activeViewOptions.cellHeaderTemplate){var n={date:e.date,type:e.type,groupIndex:e.groupIndex},c=this.parent.element.id+"_"+this.parent.activeViewOptions.cellHeaderTemplateName+"cellHeaderTemplate",h=[].slice.call(this.parent.getCellHeaderTemplate()(n,this.parent,"cellHeaderTemplate",c,!1));(0,s.R3)(h,r)}else{var p=!this.parent.calendarUtil.isMonthStart(e.date)||this.isCurrentDate(e.date)||this.parent.isAdaptive?this.parent.globalize.formatDate(e.date,{skeleton:"d",calendar:this.parent.getCalendarMode()}):this.parent.globalize.formatDate(e.date,{format:"MMM d",calendar:this.parent.getCalendarMode()});r.innerHTML=Y(p,"single")}if(t.appendChild(r),"month"===this.getModuleName()){(0,s.cn)([r],Et);var d=this.parent.globalize.formatDate(e.date,{skeleton:"full",calendar:this.parent.getCalendarMode()});r.setAttribute("aria-label",d)}}},i.prototype.getMonthStart=function(e){var n=me("Month"!==this.parent.currentView||(0,s.le)(this.parent.activeViewOptions.displayDate)||!this.parent.uiStateValues.isCustomMonth&&!this.isCustomRange()?this.parent.uiStateValues.isCustomMonth||this.isCustomRange()||!this.isCustomMonth()?this.parent.calendarUtil.firstDateOfMonth(e):e:this.parent.activeViewOptions.displayDate,this.parent.activeViewOptions.firstDayOfWeek);return new Date(n.getFullYear(),n.getMonth(),n.getDate())},i.prototype.getMonthEnd=function(e){if(this.isCustomMonth())return V(this.getMonthStart(e),7*(this.parent.activeViewOptions.numberOfWeeks>0?this.parent.activeViewOptions.numberOfWeeks:6)-1);var n=Be(e,this.parent.activeViewOptions.interval-1);return V(me(this.parent.calendarUtil.lastDateOfMonth(n),this.parent.activeViewOptions.firstDayOfWeek),6)},i.prototype.isCustomRange=function(){var e=this.parent.getCurrentViewDates();if(e&&e.length>0){var t=C(this.parent.selectedDate).getTime(),r=me(e[e.length-1],this.parent.activeViewOptions.firstDayOfWeek);return!(t>=me(e[0],this.parent.activeViewOptions.firstDayOfWeek).getTime()&&t<=V(r,6).getTime())}return!1},i.prototype.getRenderDates=function(e){var t=[],r=C(this.parent.selectedDate),n=this.getMonthStart(r),a=this.getMonthEnd(r);do{(this.parent.activeViewOptions.showWeekend||this.isWorkDay(n,e))&&t.push(n),(n=V(n,1)).getHours()>0&&(n=C(n))}while(n.getTime()<=a.getTime());return e||(this.renderDates=t),this.parent.headerModule&&this.parent.headerModule.previousNextIconHandler(),t},i.prototype.getNextPreviousDate=function(e){if(this.isCustomMonth()){var t=this.parent.getCurrentViewDates();return V(me("next"===e?t[t.length-1]:t[0],this.parent.activeViewOptions.firstDayOfWeek),"next"===e?7:7*-(this.parent.activeViewOptions.numberOfWeeks>0?this.parent.activeViewOptions.numberOfWeeks:6))}return Be(this.parent.selectedDate,("next"===e?1:-1)*this.parent.activeViewOptions.interval)},i.prototype.getStartDate=function(){return this.getMonthStart(this.parent.selectedDate)},i.prototype.getEndDate=function(){return this.getMonthEnd(this.parent.selectedDate)},i.prototype.getEndDateFromStartDate=function(e){return V(new Date(e.getTime()),1)},i.prototype.getDateRangeText=function(){if(this.parent.isAdaptive||(0,s.le)(this.parent.activeViewOptions.dateFormat)){var e=this.parent.selectedDate,t=void 0,r=!1;if(this.isCustomMonth()){var n=this.parent.getCurrentViewDates();(r=n[0].getMonth()!==n[n.length-1].getMonth()||n[0].getFullYear()!==n[n.length-1].getFullYear())&&(e=n[0],t=n[n.length-1])}var a="Month"!==this.parent.currentView||!this.isCustomMonth();return this.parent.activeViewOptions.interval>1&&a||r?(t=t||Be(St(e),this.parent.activeViewOptions.interval-1),e.getFullYear()===t.getFullYear()?Y(this.parent.globalize.formatDate(e,{format:"MMMM",calendar:this.parent.getCalendarMode()})+" - "+this.parent.globalize.formatDate(t,{format:"MMMM ",calendar:this.parent.getCalendarMode()})+this.parent.globalize.formatDate(t,{skeleton:"y",calendar:this.parent.getCalendarMode()}),"single"):Y(this.parent.globalize.formatDate(e,{format:"MMMM",calendar:this.parent.getCalendarMode()})+" "+e.getFullYear()+" - "+this.parent.globalize.formatDate(t,{format:"MMMM ",calendar:this.parent.getCalendarMode()})+this.parent.globalize.formatDate(t,{skeleton:"y",calendar:this.parent.getCalendarMode()}),"single")):Y(this.parent.globalize.formatDate(e,{format:this.parent.activeViewOptions.dateFormat?this.parent.activeViewOptions.dateFormat:"MMMM y",calendar:this.parent.getCalendarMode()}),"single")}return this.formatDateRange(this.parent.selectedDate)},i.prototype.getLabelText=function(e){return this.parent.localeObj.getConstant(e)+" of "+Y(this.parent.globalize.formatDate(this.parent.selectedDate,{format:"MMMM y",calendar:this.parent.getCalendarMode()}),"single")},i.prototype.createWeekNumberElement=function(e){var t=(0,s.az)("tr"),r=(0,s.az)("td",{className:Ji,attrs:{title:e?this.parent.localeObj.getConstant("week")+" "+e:""},innerHTML:e||""});return t.appendChild(r),this.parent.trigger(ue,{elementType:"weekNumberCell",element:r}),t},i.prototype.unWireEvents=function(){var e=this.element.querySelector("."+F);e&&s.bi.remove(e,"scroll",this.onContentScroll)},i.prototype.isCustomMonth=function(){return"Month"===this.parent.currentView&&(!(0,s.le)(this.parent.activeViewOptions.displayDate)||this.parent.activeViewOptions.numberOfWeeks>0)},i.prototype.getModuleName=function(){return"month"},i.prototype.destroy=function(){!this.parent||this.parent&&this.parent.isDestroyed||this.element&&(this.monthEvent&&(this.monthEvent.destroy(),this.monthEvent=null),this.unWireEvents(),this.parent.resourceBase&&this.parent.resourceBase.destroy(),this.parent.scheduleTouchModule&&this.parent.scheduleTouchModule.resetValues(),l.prototype.destroy.call(this))},i}(Ir),Nh=function(){var l=function(i,e){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])})(i,e)};return function(i,e){function t(){this.constructor=i}l(i,e),i.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}}(),po=function(l){function i(e){return l.call(this,e)||this}return Nh(i,l),i.prototype.createAgendaContentElement=function(e,t,r,n,a){var c,o=this,h=this.parent.eventFields;if("noEvents"===e){var p=[{subject:this.parent.localeObj.getConstant("noEvents")}];0===(c=ha.Kh.createList(this.parent.createElement,p,{moduleName:"agenda",listClass:this.parent.activeView.viewClass,itemClass:this.parent.activeView.viewClass,template:'<div class="'+hn+'">'+this.parent.localeObj.getConstant("noEvents")+"</div>"})).querySelector(".e-agenda-item").children.length&&c.firstElementChild.appendChild((0,s.az)("div",{className:hn,innerHTML:this.parent.localeObj.getConstant("noEvents")}))}else c=ha.Kh.createList(this.parent.createElement,t,{moduleName:"agenda",listClass:this.parent.activeView.viewClass,itemClass:this.parent.activeView.viewClass}),[].slice.call(c.children).forEach(function(d,v){var g,f=(0,s.az)("div",{className:P,attrs:{"data-id":"Appointment_"+t[v][o.parent.eventFields.id],"data-guid":t[v].Guid,role:"button",tabindex:"0","aria-disabled":o.parent.eventBase.getReadonlyAttribute(t[v]),"aria-pressed":"false","aria-label":o.parent.getAnnouncementString(t[v])}});if((0,s.le)(a)||f.setAttribute("data-group-index",a.toString()),o.parent.eventBase.applyResourceColor(f,t[v],"borderColor",n),(0,s.le)(o.parent.activeViewOptions.eventTemplate))g=o.createAppointment(t[v]);else{(0,s.cn)([f],"e-template");var w=o.parent.element.id+"_"+o.parent.activeViewOptions.eventTemplateName+"eventTemplate";g=o.parent.getAppointmentTemplate()(t[v],o.parent,"eventTemplate",w,!1),(0,s.le)(t[v][h.recurrenceRule])||f.appendChild((0,s.az)("div",{className:$+" "+(t[v][h.id]===t[v][h.recurrenceID]?mi:yi)}))}(0,s.R3)([].slice.call(g),f),Ie(d),d.appendChild(f);var b={data:(0,s.l7)({},t[v],null,!0),element:d,cancel:!1};o.parent.trigger(Ht,b,function(A){A.cancel&&(0,s.Od)(d)})});return r.appendChild(c),("MonthAgenda"===this.parent.currentView&&this.parent.activeViewOptions.group.resources.length>0||"Agenda"===this.parent.currentView)&&(0,s.cn)([r],Ra),this.parent.renderTemplates(),r},i.prototype.createAppointment=function(e){var t=this.parent.eventFields,r=e[t.subject]||this.parent.eventSettings.fields.subject.default||this.parent.localeObj.getConstant("addTitle"),n=e[t.location]||this.parent.eventSettings.fields.location.default,a=(0,s.az)("div",{className:ln});!(0,s.le)(n)&&""!==n&&(r+=","),a.appendChild((0,s.az)("div",{className:te,innerHTML:r})),!(0,s.le)(n)&&""!==n&&a.appendChild((0,s.az)("div",{className:gt,innerHTML:n})),(0,s.le)(e[t.recurrenceRule])||a.appendChild((0,s.az)("div",{className:$+" "+(e[t.id]===e[t.recurrenceID]?mi:yi)}));var c=e[t.startTime],h=e[t.endTime],p=e[t.isAllDay],u=this.parent.localeObj.getConstant("allDay"),d=this.parent.getTimeString(c)+" - "+this.parent.getTimeString(h);(0,s.le)(e.data)||(u=((h.getTimezoneOffset()!==c.getTimezoneOffset()?h.getTime()-c.getTime()+36e5:h.getTime()-c.getTime())/Z>=1?u:d)+" ("+this.parent.localeObj.getConstant("day")+" "+e.data.index+"/"+e.data.count+")");var g=!(0,s.le)(e.data)||p?u:d;return[a,(0,s.az)("div",{className:cn,innerHTML:g})]},i.prototype.processAgendaEvents=function(e){var t=[];if((0,s.le)(e))return t;for(var r=0,n=e;r<n.length;r++){var a=n[r],o=this.parent.eventBase.splitEventByDay(a);t=t.concat(o.length>1?o:a)}return t},i.prototype.wireEventActions=function(){for(var t=0,r=[].slice.call(this.parent.element.querySelectorAll("."+P));t<r.length;t++)this.parent.eventBase.wireAppointmentEvents(n=r[t],this.parent.getEventDetails(n),!0);for(var o=0,c=[].slice.call(this.parent.element.querySelectorAll(".e-m-date"));o<c.length;o++){var n;s.bi.add(n=c[o],"click",this.parent.agendaModule.dayNavigationClick,this)}},i.prototype.calculateResourceTableElement=function(e,t,r){if((0,s.le)(this.parent.resourceBase.lastResourceLevel)){var n=this.getDateSlots(this.renderDates,this.parent.activeViewOptions.workDays);this.parent.resourceBase.generateResourceLevels(n)}for(var a=V(new Date(r.getTime()),t),o=this.parent.activeViewOptions.group.byDate||"MonthAgenda"===this.parent.currentView?t:1,c=this.parent.resourceBase.resourceCollection,h=this.parent.resourceBase.lastResourceLevel,p=r,u=0;u<o;u++){var d=[],v=[],f=0,g=void 0,m=void 0,y=V(p,u),w=this.parent.activeViewOptions.group.byDate||"MonthAgenda"===this.parent.currentView?V(y,1):a,D=this.parent.eventBase.filterEvents(y,w);if(D.length>0||!this.parent.hideEmptyAgendaDays||"MonthAgenda"===this.parent.currentView){for(var b=0;b<h.length;b++){t=this.parent.activeViewOptions.group.byDate&&"MonthAgenda"!==this.parent.currentView?1:t;var A=[],E=this.parent.eventBase.filterEvents(r=y,a,D,h[b]);if(E.length>0||!this.parent.hideEmptyAgendaDays||"MonthAgenda"===this.parent.currentView)for(var S=0;S<t;S++){var O=this.parent.eventBase.filterEvents(r,V(r,1),E,void 0);if((O.length>0||!this.parent.hideEmptyAgendaDays||"MonthAgenda"===this.parent.currentView)&&(A.push(O[0]),g={rowSpan:1,type:"eventColumn",resource:c[c.length-1],groupIndex:h[b].groupIndex,groupOrder:h[b].groupOrder,resourceData:h[b].resourceData,eventData:O,date:r},m={rowSpan:1,type:"dateColumn",resource:c[c.length-1],groupOrder:h[b].groupOrder,resourceData:h[b].resourceData,date:r},d[f]||(d[f]=[]),d[f].push(g),d[f].push(m),f++),(r=V(r,1)).getTime()>=a.getTime()||this.parent.activeViewOptions.group.byDate||"MonthAgenda"===this.parent.currentView){d[d.length-1][1].cssClass=Ra;var k={rowSpan:A.length,type:"resourceColumn",resource:c[c.length-1],groupOrder:h[b].groupOrder.slice(0,-1),resourceData:h[b].resourceData,groupIndex:d.length-A.length,className:[Oa],date:r};d[d.length-A.length].push(k),v.push((0,s.l7)({},k,null,!0));break}}}for(var M=c.slice(0,-1),L=[],N=0,H=0;H<M.length;H++){A=M[M.length-(H+1)].dataSource;for(var z=0;z<A.length;z++)for(var q=0,B=0;B<v.length;B++)v[B].groupOrder[M.length-(H+1)]===A[z][M[M.length-(H+1)].idField]&&(N+=v[B].rowSpan,L.push((0,s.l7)({},v[B],null,!0))),++q===v.length&&L.length>0&&(L[0].rowSpan=N,L[0].type="parentColumnLevel_"+(H+1),L[0].resource=M[M.length-(H+1)],L[0].resourceData=A[z],L[0].date=r,d[L[0].groupIndex].push(L[0]),L=[],N=0)}this.createResourceTableRow(d,e)}}0===this.parent.eventBase.filterEvents(p,a).length&&!this.parent.activeViewOptions.allowVirtualScrolling&&this.parent.hideEmptyAgendaDays&&this.renderEmptyContent(e,p)},i.prototype.createResourceTableRow=function(e,t){var n,o,h,r=(0,s.az)("tr"),a=(0,s.az)("td",{attrs:{"aria-selected":"false"}}),c=0;if(this.parent.activeViewOptions.group.byDate||"MonthAgenda"===this.parent.currentView){for(var p=[],u=this.parent.resourceBase.resourceCollection.slice(0,-1),d=0;d<e.length;d++)p=p.concat(e[d]);h=u.length>0?"parentColumnLevel_"+u.length:"resourceColumn";for(var v=p.filter(function(E){return E.type===h}),f=0;f<v.length;f++)c+=v[f].rowSpan}for(var g=0;g<e.length;g++){n=r.cloneNode();for(var m=e[g].length-1;m>=0;m--){var y=e[g][m],w=a.cloneNode();if("dateColumn"===y.type){if(this.parent.activeViewOptions.group.byDate||"MonthAgenda"===this.parent.currentView){o=e[g][m];continue}w.setAttribute("data-date",y.date.getTime().toString()),w.appendChild(this.createDateHeaderElement(y.date));var D=[ze,Ma];y.cssClass&&D.push(y.cssClass),(0,s.cn)([w],D),n.appendChild(w)}else"eventColumn"===y.type?((w=this.createAgendaContentElement(0===y.eventData.length?"noEvents":"data",y.eventData,w,y.groupOrder,y.groupIndex)).setAttribute("data-date",y.date.getTime().toString()),(this.parent.activeViewOptions.group.byDate||"MonthAgenda"===this.parent.currentView)&&(0,s.cn)([w],[ze,"e-day-padding"]),n.appendChild(w)):(w.setAttribute("rowspan",y.rowSpan.toString()),(0,s.cn)([w],"e-resource-column"),this.setResourceHeaderContent(w,y,y.className[0]),n.appendChild(w))}if(this.parent.activeViewOptions.group.byDate&&0===g&&"MonthAgenda"!==this.parent.currentView){(w=a.cloneNode()).setAttribute("data-date",o.date.getTime().toString()),w.setAttribute("rowspan",c.toString()),w.appendChild(this.createDateHeaderElement(o.date)),(0,s.cn)([w],[ze,Ma,"e-date-border"]);var A=Ur(this.parent.selectedDate.getTime(),o.date.getTime());if(n.setAttribute("data-row-index",A.toString()),this.parent.element.querySelector('.e-agenda-view tr[data-row-index="'+A+'"]'))break;n.insertBefore(w,n.childNodes[0])}t.appendChild(n)}},i.prototype.createDateHeaderElement=function(e){var t;if(this.parent.activeViewOptions.dateHeaderTemplate){t=(0,s.az)("div",{className:Va});var r={date:e,type:"dateHeader"},o=this.parent.element.id+"_"+this.parent.activeViewOptions.dateHeaderTemplateName+"dateHeaderTemplate",c=[].slice.call(this.parent.getDateHeaderTemplate()(r,this.parent,"dateHeaderTemplate",o,!1));(0,s.R3)(c,t)}else t=this.getMobileDateElement(e,Va);return t},i.prototype.renderEmptyContent=function(e,t){var r=this.createTableRowElement(t,"noEvents"),n=r.children[0],a=(0,s.az)("div",{className:"e-empty-event",innerHTML:this.parent.localeObj.getConstant("noEvents")});n.appendChild(a),e.appendChild(r)},i.prototype.createTableRowElement=function(e,t){var r=Ur(this.parent.selectedDate.getTime(),e.getTime()),n=(0,s.az)("tr",{attrs:{"data-row-index":r.toString()}}),a=(0,s.az)("td",{attrs:{class:"monthHeader"===t?"e-month-header":ze,"aria-selected":"false","data-column-index":r.toString(),"data-date":e.getTime().toString()}}),o=a.cloneNode(),c=a.cloneNode();return n.appendChild(o),"noEvents"!==t&&n.appendChild(c),n},i.prototype.destroy=function(){l.prototype.destroy.call(this)},i}(Ir),Bh=function(){var l=function(i,e){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])})(i,e)};return function(i,e){function t(){this.constructor=i}l(i,e),i.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}}(),uo=function(l){function i(e){var t=l.call(this,e)||this;return t.viewClass="e-agenda-view",t.isInverseTableSelect=!1,t.agendaDates={},t.virtualScrollTop=1,t}return Bh(i,l),i.prototype.getModuleName=function(){return"agenda"},i.prototype.renderLayout=function(){this.agendaDates={},this.element=(0,s.az)("div",{className:ir}),(0,s.cn)([this.element],this.viewClass),this.element.appendChild(this.createTableLayout(rr)),this.element.querySelector("table").setAttribute("role","presentation"),this.parent.element.querySelector("."+Me).appendChild(this.element);var e=(0,s.az)("tr");this.element.querySelector("tbody").appendChild(e);var t=(0,s.az)("td");e.appendChild(t);var r=(0,s.az)("div",{className:F});t.appendChild(r);var n=this.createTableLayout(X);this.setAriaAttributes(n),r.appendChild(n);var a=n.querySelector("tbody"),o=C(this.parent.selectedDate);this.renderEmptyContent(a,o),this.wireEvents(),this.parent.resourceBase&&this.parent.resourceBase.generateResourceLevels([{renderDates:this.parent.activeView.renderDates}]),this.parent.uiStateValues.isGroupAdaptive&&!this.parent.element.querySelector("."+di)&&this.renderResourceMobileLayout(),this.parent.notify(ge,{})},i.prototype.eventLoad=function(e){this.dataSource=(0,s.l7)([],this.parent.eventsData,null,!0);for(var t=0,r=this.parent.eventsData;t<r.length;t++)delete r[t].generatedDates;var a=this.parent.activeViewOptions.allowVirtualScrolling?e.processedData:this.parent.eventsProcessed;if(this.parent.uiStateValues.isGroupAdaptive){var o=this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];this.dataSource=this.parent.eventBase.filterEventsByResource(o,this.dataSource),a=this.parent.eventBase.filterEventsByResource(o,a)}this.parent.eventsProcessed=this.processAgendaEvents(a);var c=C(this.parent.selectedDate),h=this.element.querySelector("."+X+" tbody");Ie(h),this.renderInitialContent(h,c),this.wireEventActions(),(0,s.oq)(h,"."+F).scrollTop=1,this.parent.notify(lt,{}),this.parent.activeViewOptions.allowVirtualScrolling||this.retainScrollPosition()},i.prototype.refreshEvent=function(e){for(var t=[],r=this.parent.eventFields,n=0,a=this.dataSource;n<a.length;n++){var o=a[n];(0,s.le)(o[r.recurrenceID])&&!(0,s.le)(o[r.recurrenceRule])&&!(0,s.le)(o.generatedDates)&&e>=o.generatedDates.end&&(t=t.concat(this.parent.eventBase.generateOccurrence(o,e)))}this.parent.eventsProcessed=this.parent.eventsProcessed.concat(this.processAgendaEvents(t))},i.prototype.refreshHeader=function(){var e=this.element.querySelector("."+X+" tbody");this.parent.activeViewOptions.group.byDate?Ie(e):(0,s.Od)(e.firstElementChild);var t=C(this.parent.selectedDate),r=(0,s.az)("tbody"),n=new Date(t.getTime()),a=this.parent.activeViewOptions.allowVirtualScrolling&&this.parent.hideEmptyAgendaDays?this.getEndDateFromStartDate(n):V(n,this.parent.agendaDaysCount);this.renderContent(r,n,a),(0,s.R3)([].slice.call(r.childNodes),e)},i.prototype.renderInitialContent=function(e,t){var r=(0,s.az)("tbody"),n=new Date(t.getTime()),a=this.parent.activeViewOptions.allowVirtualScrolling&&this.parent.hideEmptyAgendaDays?this.getEndDateFromStartDate(n):V(n,this.parent.agendaDaysCount);if(this.renderContent(r,n,a),(0,s.R3)([].slice.call(r.childNodes),e),this.parent.activeViewOptions.allowVirtualScrolling&&this.parent.hideEmptyAgendaDays&&this.parent.eventsData.length>0)for(var o=this.getContentAreaElement(),c=o.querySelector(".e-content-table");o.offsetWidth<=o.clientWidth&&!(this.parent.isAdaptive&&c.offsetHeight>=o.clientHeight);){var h=(0,s.az)("tbody");if(n=V(a=n,-this.parent.agendaDaysCount),this.renderContent(h,n,a),(0,s.Ce)([].slice.call(h.childNodes),e),n<=this.parent.minDate)break}e.childNodes.length<=0&&this.renderEmptyContent(e,t)},i.prototype.renderContent=function(e,t,r){var c,n=this.parent.eventFields,a=new Date(t.getTime()),o=this.appointmentFiltering(a,r);if(o.length>0&&this.parent.activeViewOptions.allowVirtualScrolling&&this.parent.hideEmptyAgendaDays&&(t=o[0][n.startTime],t=new Date(new Date(t.getTime()).setHours(0,0,0,0)),this.updateHeaderText(o[0][n.startTime])),!this.parent.hideEmptyAgendaDays||this.parent.agendaDaysCount>0&&o.length>0){if(this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive){var h=t;this.parent.activeViewOptions.group.byDate||(this.parent.activeViewOptions.allowVirtualScrolling=!1,h=a,this.parent.headerModule&&(this.parent.headerModule.updateDateRange(this.parent.activeView.getDateRangeText()),this.parent.headerModule.updateHeaderItems("remove"))),this.calculateResourceTableElement(e,this.parent.agendaDaysCount,h)}else for(var p=0;p<this.parent.agendaDaysCount;p++){var u=this.appointmentFiltering(t),d=this.createTableRowElement(t,"data");if(this.element.querySelector('tr[data-row-index="'+parseInt(d.getAttribute("data-row-index"),10)+'"]'))t=V(t,1);else{var v=d.children[0],f=d.children[1];if(u.length>0||!this.parent.hideEmptyAgendaDays&&0===u.length){var g=this.parent.hideEmptyAgendaDays||0!==u.length?"data":"noEvents";v.appendChild(this.createDateHeaderElement(t)),d.appendChild(v);var m=this.createAgendaContentElement(g,u,f);d.appendChild(m),m.querySelectorAll("li").length>0&&e.appendChild(d)}else this.parent.activeViewOptions.allowVirtualScrolling&&p--;if(this.isCurrentDate(new Date(t.getTime()))&&(0,s.cn)(v.childNodes,"e-current-day"),(t=V(t,1)).getTime()>r.getTime())break}}c=new Date(t.getTime()-Z)}this.agendaDates={start:a,end:c}},i.prototype.agendaScrolling=function(e){this.parent.quickPopup&&this.parent.quickPopup.quickPopupHide(),this.parent.activeViewOptions.allowVirtualScrolling&&this.virtualScrolling(e),this.parent.activeViewOptions.allowVirtualScrolling||this.setPersistence()},i.prototype.virtualScrolling=function(e){var v,t=e.target,r=t.scrollTop,n=t.scrollHeight,o=r+t.clientHeight,c=this.virtualScrollTop<r?"next":"previous",h=t.querySelector("tbody"),p=(0,s.az)("tbody"),u=this.getElementFromScrollerPosition(e),d=this.parent.getDateFromElement(u);if(0===r){if(v=this.getPreviousNextDate(V(d,-1),c),this.appointmentFiltering(v.start,v.end).length>0||!this.parent.hideEmptyAgendaDays){this.renderContent(p,v.start,v.end),(0,s.Ce)([].slice.call(p.childNodes),h),this.wireEventActions();for(var g=0,m=h.children;g<m.length;g++)if(m[g].getAttribute("data-row-index")===u.getAttribute("data-column-index")){var y=m[g].offsetTop-this.element.querySelector(".e-agenda-item").offsetHeight;t.scrollTop=y;break}this.updateHeaderText(d)}}else o>=n-5?(v=this.getPreviousNextDate(V(d,1),c),(this.appointmentFiltering(v.start,v.end).length>0||!this.parent.hideEmptyAgendaDays)&&(this.renderContent(p,v.start,v.end),(0,s.R3)([].slice.call(p.childNodes),h),this.wireEventActions(),this.updateHeaderText(d))):this.updateHeaderText(d);this.virtualScrollTop=r;var w=this.parent.eventBase.getSelectedAppointments();w.length>0&&w[w.length-1].focus()},i.prototype.getElementFromScrollerPosition=function(e){var t,p,r=e.target,n=r.scrollTop,a=r.scrollHeight,c=n+r.clientHeight,h=[].slice.call(r.querySelectorAll(".e-agenda-item"));if(h.length>0)if(0===n)t=(0,s.oq)(p=h[0],"."+ze);else if(c===a)t=(0,s.oq)(p=h[h.length-1],"."+ze);else for(var d=0,v=h.length;d<v;d++)if((p=h[d]).getBoundingClientRect().top>=0){t=(0,s.oq)(p,"."+ze);break}return t},i.prototype.updateHeaderText=function(e){this.parent.showHeaderBar&&this.parent.headerModule.updateDateRange(this.getDateRangeText(e))},i.prototype.getPreviousNextDate=function(e,t){var r=new Date(e.getTime()),n=this.getStartDateFromEndDate(e),a=this.getEndDateFromStartDate(e),o=0;do{if((this.appointmentFiltering(r).length>0||!this.parent.hideEmptyAgendaDays)&&o++,(r=V(r,"next"===t?1:-1))<n||r>a)break}while(o!==this.parent.agendaDaysCount);var h=V(r,"next"===t?-1:1);return"next"===t?{start:e,end:V(h,1)}:{start:h,end:V(e,1)}},i.prototype.appointmentFiltering=function(e,t){var r,n;!(0,s.le)(e)&&(0,s.le)(t)?(r=C(new Date(e.getTime())),n=Gi(new Date(r.getTime()),Z)):(r=new Date(e.getTime()),n=new Date(t.getTime()));var a=this.parent.eventBase.filterEvents(r,n);return 0===a.length&&(this.refreshEvent(e),a=this.parent.eventBase.filterEvents(r,n)),a},i.prototype.getStartDateFromEndDate=function(e){var t,r=this.parent.eventFields;if(this.parent.eventsProcessed.length>0){var n=Math.min.apply(Math,this.parent.eventsProcessed.map(function(a){return a[r.startTime].getTime()}));t=this.parent.hideEmptyAgendaDays?new Date(n):this.parent.minDate}else t=this.parent.hideEmptyAgendaDays?Be(e,-1):this.parent.minDate;return C(t)},i.prototype.getEndDateFromStartDate=function(e){var t,r=this.parent.eventFields;if(this.parent.eventsProcessed.length>0){var n=Math.max.apply(Math,this.parent.eventsProcessed.map(function(a){return a[r.endTime].getTime()}));t=this.parent.hideEmptyAgendaDays?new Date(n):this.parent.maxDate}else t=this.parent.hideEmptyAgendaDays?Be(e,1):this.parent.maxDate;return C(V(t,1))},i.prototype.getNextPreviousDate=function(e){return V(this.parent.selectedDate,"next"===e?1:-1)},i.prototype.startDate=function(){return C(this.parent.selectedDate)},i.prototype.endDate=function(){return this.parent.activeViewOptions.allowVirtualScrolling?this.getEndDateFromStartDate(this.startDate()):V(this.startDate(),this.parent.agendaDaysCount)},i.prototype.getDateRangeText=function(e){var t=this.parent.activeViewOptions.dateFormat?this.parent.activeViewOptions.dateFormat:"MMMM y";if(this.parent.activeViewOptions.allowVirtualScrolling||this.parent.isAdaptive){var r=(0,s.le)(e)?this.parent.selectedDate:e;return Y(this.parent.globalize.formatDate(r,{format:t,calendar:this.parent.getCalendarMode()}),"multiple")}var n=this.parent.selectedDate,a=V(n,this.parent.agendaDaysCount-1);return this.formatDateRange(n,a)},i.prototype.dayNavigationClick=function(e){var t=(0,s.oq)(e.currentTarget,"."+ze),r=this.parent.getDateFromElement(t);!(0,s.le)(r)&&!this.parent.isAdaptive&&this.parent.isMinMaxDate(r)&&(this.parent.setProperties({selectedDate:r},!0),this.parent.changeView("Day",e))},i.prototype.wireEvents=function(){s.bi.add(this.element.querySelector("."+F),"scroll",this.agendaScrolling,this)},i.prototype.unWireEvents=function(){s.bi.remove(this.element.querySelector("."+F),"scroll",this.agendaScrolling);for(var t=0,r=[].slice.call(this.element.querySelectorAll(".e-m-date"));t<r.length;t++)s.bi.remove(r[t],"click",this.dayNavigationClick)},i.prototype.addEventListener=function(){this.parent.on(be,this.onAgendaScrollUiUpdate,this),this.parent.on(Ae,this.eventLoad,this)},i.prototype.removeEventListener=function(){this.parent&&(this.parent.off(be,this.onAgendaScrollUiUpdate),this.parent.off(Ae,this.eventLoad))},i.prototype.onAgendaScrollUiUpdate=function(){var e=this.getHeaderBarHeight();this.parent.headerModule&&this.parent.headerModule.updateHeaderItems(this.parent.activeViewOptions.allowVirtualScrolling?"add":"remove");var t=this.element.querySelector("."+F);"auto"!==this.parent.height&&(t.style.height=(0,s.Ac)(this.parent.element.offsetHeight-e))},i.prototype.scrollToDate=function(e){var t=new Date(+C(e));if(this.parent.activeViewOptions.allowVirtualScrolling)(!this.parent.hideEmptyAgendaDays||this.parent.getEvents(t,V(t,1),!0).length>0)&&this.parent.changeDate(t);else{var r=this.element.querySelector("."+ze+'[data-date="'+t.getTime()+'"]');r&&(this.getContentAreaElement().scrollTop=r.offsetTop)}},i.prototype.destroy=function(){!this.parent||this.parent&&this.parent.isDestroyed||this.element&&(this.unWireEvents(),this.parent.resourceBase&&this.parent.resourceBase.destroy(),this.parent.headerModule&&this.parent.activeViewOptions.allowVirtualScrolling&&this.parent.headerModule.updateHeaderItems("remove"),l.prototype.destroy.call(this))},i}(po),Wh=function(){var l=function(i,e){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])})(i,e)};return function(i,e){function t(){this.constructor=i}l(i,e),i.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}}(),vo=function(l){function i(e){var t=l.call(this,e)||this;return t.dayNameFormat="narrow",t.viewClass="e-month-agenda-view",t.monthAgendaDate=new Date(""+e.selectedDate),t}return Wh(i,l),i.prototype.getModuleName=function(){return"monthAgenda"},i.prototype.renderAppointmentContainer=function(){var e=this.getContentAreaElement(),t=(0,s.az)("div",{className:vi});e.appendChild(t);var r=(0,s.az)("div",{className:$i});t.appendChild(r),this.appendAppContainer(r),this.setEventWrapperHeight()},i.prototype.getDayNameFormat=function(){return this.parent.isAdaptive?"narrow":"abbreviated"},i.prototype.setEventWrapperHeight=function(){var e=(this.parent.headerModule?this.parent.headerModule.getHeaderElement().offsetHeight:0)+2,t=this.parent.element.querySelector("."+sn);t&&(e+=t.offsetHeight);var r=this.getContentAreaElement().firstElementChild,n=this.element.querySelector("."+ye),a=this.parent.element.offsetHeight-e-n.offsetHeight-r.offsetHeight,o=this.element.querySelector("."+vi),c=this.element.querySelector("."+$i);"auto"!==this.parent.height&&(o.style.height=c.style.height=(0,s.Ac)(a))},i.prototype.onDataReady=function(e){this.setEventWrapperHeight(),this.clearElements();var t=e.processedData;this.parent.uiStateValues.isGroupAdaptive&&(t=this.parent.eventBase.filterEventsByResource(this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex],t)),this.agendaBase=this.getAgendaBase(),this.parent.eventsProcessed=this.agendaBase.processAgendaEvents(t);for(var n=0,a=0,o=this.renderDates;a<o.length;a++){var c=o[a],h=this.appointmentFiltering(c),p=this.element.querySelectorAll("."+R)[n];h.length>0&&(p.querySelector("."+pn)||p.appendChild((0,s.az)("div",{className:pn})),c.getTime()===C(new Date(this.monthAgendaDate.getTime())).getTime()&&this.onEventRender(h,c)),n++}this.parent.notify(lt,{})},i.prototype.onCellClick=function(e){this.parent.quickPopup&&this.parent.quickPopup.quickPopupHide();var t=this.appointmentFiltering(e.startTime);this.onEventRender(t,e.startTime),this.parent.notify(lt,{}),this.monthAgendaDate=new Date(""+e.startTime)},i.prototype.onEventRender=function(e,t){this.agendaBase=this.getAgendaBase();var r=this.element.querySelector("."+$i);if(Ie(r),0===this.parent.activeViewOptions.group.resources.length||this.parent.uiStateValues.isGroupAdaptive)if(e.length>0){var n=(0,s.az)("div",{className:He});r.appendChild(this.agendaBase.createAgendaContentElement("data",e,n))}else this.appendAppContainer(r);else if(e.length>0){var a=this.createTableLayout(),o=a.querySelector("tbody");this.agendaBase.calculateResourceTableElement(o,1,t),a.appendChild(o),r.appendChild(a)}else this.appendAppContainer(r);this.agendaBase.wireEventActions()},i.prototype.appointmentFiltering=function(e){var t=C(new Date(e.getTime())),r=Gi(new Date(t.getTime()),Z);return this.parent.eventBase.filterEvents(t,r)},i.prototype.clearElements=function(){for(var t=0,r=[].slice.call(this.element.querySelectorAll("."+pn));t<r.length;t++)(0,s.Od)(r[t]);this.appendAppContainer(this.element.querySelector("."+$i))},i.prototype.appendAppContainer=function(e){var t=(0,s.az)("div",{className:He});(0,s.cn)([t],hn),t.innerHTML=this.parent.localeObj.getConstant("noEvents"),Ie(e),e.appendChild(t)},i.prototype.getNextPreviousDate=function(e){var t=this.parent.selectedDate,n=Be(this.parent.selectedDate,"next"===e?this.parent.activeViewOptions.interval:-this.parent.activeViewOptions.interval),a="next"===e?2:0,o=new Date(t.getFullYear(),t.getMonth()+a,0).getDate(),c=o>=this.monthAgendaDate.getDate()?this.monthAgendaDate.getDate():o;return this.monthAgendaDate=new Date(n.getFullYear(),n.getMonth(),c),this.monthAgendaDate},i.prototype.getAgendaBase=function(){return this.agendaBase||new po(this.parent)},i.prototype.destroy=function(){this.agendaBase&&(this.agendaBase.destroy(),this.agendaBase=null),l.prototype.destroy.call(this)},i}(Hr),fo=function(){function l(i,e){this.parent=i,this.renderDates=e}return l.prototype.groupByYear=function(i){for(var e={},t=0,r=i;t<r.length;t++){var n=r[t],a=n.getFullYear();e[a]=e[a]||[],e[a].push(n)}return e},l.prototype.groupByMonth=function(i){for(var e={},t=0,r=i;t<r.length;t++){var n=r[t],a=12*(n.getFullYear()-1970)+n.getMonth();e[a]=e[a]||[],e[a].push(n)}return e},l.prototype.groupByWeek=function(i){for(var e={},t=0,r=i;t<r.length;t++){var n=r[t],a=+new Date(1970,0,1),o=n.getTimezoneOffset()-new Date(1970,0,1).getTimezoneOffset(),c=Math.ceil(((+n-a-60*o*1e3)/Z+new Date(a).getDay()+1)/7);this.parent.firstDayOfWeek&&this.parent.firstDayOfWeek>new Date(+n).getDay()&&(c-=1),e[c]=e[c]||[],e[c].push(n)}return e},l.prototype.generateSlots=function(i,e,t,r,n){for(var a=this,o=function(y,w){return a.parent.globalize.formatDate(y,{format:w,calendar:a.parent.getCalendarMode()})},c=[],h=Object.keys(i),p=0;p<h.length;p++){var u=i[h[p]],d=void 0;if(t.template){var v={date:u[0],type:n},f=this.parent.element.id+"_headerRowTemplate";d=[].slice.call(this.parent.templateParser(t.template)(v,this.parent,"template",f,!1))}else{var g=void 0;switch(t.option){case"Year":g='<span class="e-header-year">'+o(u[0],"y")+"</span>";break;case"Month":g='<span class="e-header-month">'+Y(o(u[0],"MMMM"),"single")+"</span>";break;case"Week":g='<span class="e-header-week">'+this.parent.getWeekNumberContent(u)+"</span>"}var m=(0,s.az)("div",{innerHTML:g});d=[].slice.call(m.childNodes)}c.push({date:u[0],type:n,className:[r],colSpan:u.length*e,template:d})}return c},l.prototype.generateColumnLevels=function(i,e){var t=[],r=this.parent.activeViewOptions.headerRows,n=1;"Hour"===r[r.length-1].option&&e.length>0&&(n=e.length/i.length);for(var o,c,h,a=[],p=0,u=r;p<u.length;p++){var d=u[p];switch(d.option){case"Year":o=this.groupByYear(this.renderDates),a=this.generateSlots(o,n,d,"e-header-year-cell","yearHeader"),t.push(a);break;case"Month":c=this.groupByMonth(this.renderDates),a=this.generateSlots(c,n,d,"e-header-month-cell","monthHeader"),t.push(a);break;case"Week":h=this.groupByWeek(this.renderDates),a=this.generateSlots(h,n,d,"e-header-week-cell","weekHeader"),t.push(a);break;case"Date":a=(a=i).map(function(v){return v.colSpan=n,v}),t.push(a);break;case"Hour":e.length>0&&t.push(e)}}return t},l}(),zh=function(){var l=function(i,e){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])})(i,e)};return function(i,e){function t(){this.constructor=i}l(i,e),i.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}}(),go=function(l){function i(e){var t=l.call(this,e)||this;return t.timelineAppointment=null,t.baseCssClass="e-timeline-view",t}return zh(i,l),i.prototype.getModuleName=function(){return"timelineViews"},i.prototype.getLeftPanelElement=function(){return this.element.querySelector("."+Oe)},i.prototype.scrollTopPanel=function(e){l.prototype.scrollTopPanel.call(this,e),this.scrollHeaderLabels(e)},i.prototype.scrollToWorkHour=function(){var e=this.parent.getStartEndTime(this.parent.workHours.start),t=this.isWorkDay(this.parent.selectedDate)&&this.parent.workHours.highlight&&!(0,s.le)(e)?new Date(+this.parent.selectedDate).setHours(e.getHours(),e.getMinutes(),0,0):new Date(+this.parent.selectedDate).setHours(0,0,0,0),r='[data-date="'+new Date(t).getTime().toString()+'"]',n=this.element.querySelector(r);n&&(this.getContentAreaElement().scrollLeft=this.parent.enableRtl?-(this.parent.getContentTable().offsetWidth-n.offsetLeft-n.offsetWidth):n.offsetLeft)},i.prototype.scrollToHour=function(e,t){var r,n,o;if(t&&(n=this.parent.getIndexOfDate(this.renderDates,C(t)))>=0&&(r=t,!(0,s.le)(e))){var a=e.split(":");2===a.length&&(r=new Date(t.setHours(parseInt(a[0],10),parseInt(a[1],10),0)))}r=(0,s.le)(t)?this.parent.getStartEndTime(e):r,(0,s.le)(r)||(o=(0,s.le)(e)||!this.parent.activeViewOptions.timeScale.enable?n*this.getWorkCellWidth():(0,s.le)(t)?this.getLeftFromDateTime(null,r):this.getLeftFromDateTime([n],r),this.getScrollableElement().scrollLeft=this.parent.enableRtl?-o:o)},i.prototype.generateColumnLevels=function(){var e=[],t=this.getDateSlots(this.renderDates,this.parent.activeViewOptions.workDays);e.push(t),this.parent.activeViewOptions.group.resources.length>0&&this.parent.resourceBase.generateResourceLevels(t,!this.parent.uiStateValues.isGroupAdaptive);var r=[];return this.parent.activeViewOptions.timeScale.enable&&(r=this.generateTimeSlots(e[e.length-1]),e.push(r)),this.parent.activeViewOptions.headerRows.length>0&&(e=new fo(this.parent,this.renderDates).generateColumnLevels(t,r)),e},i.prototype.generateTimeSlots=function(e){for(var t=this,n=this.getTimeSlotRows(function(g){return g.type=g.first?"majorSlot":"minorSlot",g.className=g.first?[jt]:[jt,Ca],g.workDays=t.parent.activeViewOptions.workDays,g}),a=[],o=0,c=e;o<c.length;o++){var h=c[o];h.colSpan=n.length;for(var u=0,d=(0,s.l7)([],n,null,!0);u<d.length;u++){var v=d[u],f=C(new Date(""+h.date));v.date=Gi(f,Je(v.date)),a.push(v)}}return a},i.prototype.changeCurrentTimePosition=function(){if(!(!this.parent||this.parent&&this.parent.isDestroyed)){this.removeCurrentTimeIndicatorElements();var e=this.getCurrentTimeIndicatorIndex(),t=this.getLeftFromDateTime(e,this.parent.getCurrentTime()),r=this.element.querySelector("."+X).offsetHeight,n=this.element.querySelector("."+ye);if(this.element.querySelector("."+F).appendChild((0,s.az)("div",{className:Ut,styles:(this.parent.enableRtl?"right":"left")+":"+(0,s.Ac)(t)+"; height:"+(0,s.Ac)(r)})),this.parent.virtualScrollModule){var o=this.parent.element.querySelector("."+Ut),c=this.parent.element.querySelector("."+F+" table");(0,s.V7)(o,{transform:c.style.transform})}var h=(0,s.az)("div",{innerHTML:this.parent.getTimeString(this.parent.getCurrentTime()),className:tn});n.appendChild(h),h.style[this.parent.enableRtl?"right":"left"]=(0,s.Ac)(t-h.offsetWidth/2)}},i.prototype.getLeftFromDateTime=function(e,t){var r=this.getStartHour(),n=this.getEndHour(),a=0,o=60*(t.getHours()-r.getHours())+(t.getMinutes()-r.getMinutes());if(!(0,s.le)(e)){var c=0===n.getHours()?24:n.getHours();0!==e[0]&&(a=e[0]*(60*(c-r.getHours()))+(n.getMinutes()-r.getMinutes())),o=a+o}return o*this.getWorkCellWidth()*this.parent.activeViewOptions.timeScale.slotCount/this.parent.activeViewOptions.timeScale.interval},i.prototype.getWorkCellWidth=function(){return this.element.querySelector(".e-work-cells").getBoundingClientRect().width},i.prototype.renderHeader=function(){var e=(0,s.az)("tr");this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive&&this.parent.resourceBase.renderResourceHeaderIndent(e);var t=(0,s.az)("td");t.appendChild(this.renderDatesHeader()),e.appendChild(t),(0,s.Ce)([e],this.element.querySelector("tbody"))},i.prototype.createAllDayRow=function(e,t){},i.prototype.getCurrentTimeIndicatorIndex=function(){var e=[],t=this.parent.getIndexOfDate(this.renderDates,C(this.parent.getCurrentTime()));return t>=0&&e.push(t),e},i.prototype.renderContent=function(){var e=(0,s.az)("tr");if(this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive){var t=(0,s.az)("td");t.appendChild(this.parent.resourceBase.createResourceColumn()),e.appendChild(t)}var r=(0,s.az)("td"),n=this.renderContentArea();n.appendChild(this.createEventTable(this.getRowCount())),this.collapseRows(n),r.appendChild(n),e.appendChild(r),this.parent.virtualScrollModule&&this.parent.virtualScrollModule.renderVirtualTrack(n),this.element.querySelector("tbody").appendChild(e)},i.prototype.getRowCount=function(){return this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive?this.parent.resourceBase.renderedResources.length:1},i.prototype.getResourceTdData=function(e,t){var r=this.parent.resourceBase.renderedResources[e],a=r.resourceData[r.resource.endHourField]||this.parent.workHours.end;return t.startHour=this.parent.getStartEndTime(r.resourceData[r.resource.startHourField]||this.parent.workHours.start),t.endHour=this.parent.getStartEndTime(a),t.workDays=r.resourceData[r.resource.workDaysField]||this.parent.workDays,t.className=r.className,t.groupIndex=r.groupIndex,t.groupOrder=r.groupOrder,t},i.prototype.renderContentTable=function(e){var t=e.querySelector("tbody");(0,s.R3)(this.getContentRows(),t)},i.prototype.getContentRows=function(){for(var e=[],t=(0,s.az)("tr"),r=(0,s.az)("td",{attrs:{"aria-selected":"false"}}),n=this.getRowCount(),a=0;a<n;a++){for(var o=t.cloneNode(),c=0,h=this.colLevels[this.colLevels.length-1];c<h.length;c++){var p=h[c];this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive&&(p=this.getResourceTdData(a,p));var u=this.createContentTd(p,p,r);o.appendChild(u)}e.push(o)}return e},i.prototype.getContentTdClass=function(e){return e.first||!this.parent.activeViewOptions.timeScale.enable?[R]:[R,Sa]},i.prototype.renderEvents=function(){this.timelineAppointment=new ti(this.parent,this.parent.activeViewOptions.timeScale.enable?"hour":"day"),this.timelineAppointment.renderAppointments(),this.parent.notify(lt,{})},i.prototype.getAdjustedDate=function(e){if(!this.parent.activeViewOptions.timeScale.enable)return new Date(e.setHours(0,0,0,0));for(var t=this.colLevels[this.colLevels.length-1],r=0;r<t.length;r++)if(t[r].date.getTime()>e.getTime())return t[r-1].date;return null},i.prototype.destroy=function(){!this.parent||this.parent&&this.parent.isDestroyed||(this.timelineAppointment&&(this.timelineAppointment.destroy(),this.timelineAppointment=null),l.prototype.destroy.call(this))},i}(Lr),jh=function(){var l=function(i,e){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])})(i,e)};return function(i,e){function t(){this.constructor=i}l(i,e),i.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}}(),mo=function(l){function i(e){var t=l.call(this,e)||this;return t.viewClass="e-timeline-month-view",t.isInverseTableSelect=!0,t.appointment=null,t}return jh(i,l),i.prototype.getModuleName=function(){return"timelineMonth"},i.prototype.onDataReady=function(){this.appointment=new ti(this.parent,"day"),this.appointment.renderAppointments(),this.parent.notify(lt,{})},i.prototype.getLeftPanelElement=function(){return this.element.querySelector("."+Oe)},i.prototype.scrollTopPanel=function(e){l.prototype.scrollTopPanel.call(this,e),this.scrollHeaderLabels(e)},i.prototype.setContentHeight=function(e,t,r){t&&(t.style.height=(0,s.Ac)(r-this.getScrollXIndent(e))),e.style.height=(0,s.Ac)(r)},i.prototype.getDateSlots=function(e,t){for(var r=[],n=0,a=e;n<a.length;n++){var o=a[n],c=[ie];this.isCurrentDate(o)&&c.push(Qi),r.push({date:o,type:"dateHeader",className:c,colSpan:1,workDays:t})}return r},i.prototype.renderLeftIndent=function(e){this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive&&this.parent.resourceBase.renderResourceHeaderIndent(e)},i.prototype.renderContent=function(){var e=(0,s.az)("tr");if(this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive){var t=(0,s.az)("td");t.appendChild(this.parent.resourceBase.createResourceColumn()),e.appendChild(t)}var r=(0,s.az)("td");this.element.querySelector("tbody").appendChild(e);var n=(0,s.az)("div",{className:F});n.appendChild(this.renderContentArea()),n.appendChild(this.createEventTable(this.getRowCount())),this.collapseRows(n),s.bi.add(n,"scroll",this.onContentScroll,this),r.appendChild(n),this.parent.virtualScrollModule&&this.parent.virtualScrollModule.renderVirtualTrack(n),e.appendChild(r)},i.prototype.getRowCount=function(){return this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive?this.parent.resourceBase.renderedResources.length:1},i.prototype.getContentSlots=function(){for(var e=[],t=0;t<this.getRowCount();t++)for(var r=0,n=this.colLevels[this.colLevels.length-1];r<n.length;r++){var a=n[r];if(a.className=[R],this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive){var o=this.parent.resourceBase.renderedResources[t];a.workDays=o.resourceData[o.resource.workDaysField]||this.parent.workDays,a.className=a.className.concat(o.className),a.groupIndex=o.groupIndex,a.groupOrder=o.groupOrder}var c={date:new Date(+a.date),colSpan:a.colSpan,groupIndex:a.groupIndex,workDays:a.workDays,type:"monthCells",className:a.className};e[t]||(e[t]=[]),e[t].push(c)}return e},i.prototype.updateClassList=function(e){this.parent.isMinMaxDate(e.date)||e.className.push(Jt)},i.prototype.unWireEvents=function(){s.bi.remove(this.getContentAreaElement(),"scroll",this.onContentScroll)},i.prototype.getMonthStart=function(e){var t=this.parent.calendarUtil.firstDateOfMonth(C(e));return new Date(t.getFullYear(),t.getMonth(),t.getDate())},i.prototype.getMonthEnd=function(e){var t=this.parent.calendarUtil.firstDateOfMonth(C(e));return this.parent.calendarUtil.lastDateOfMonth(Be(new Date(+t),this.parent.activeViewOptions.interval-1))},i.prototype.generateColumnLevels=function(){var e=[],t=this.getDateSlots(this.renderDates,this.parent.activeViewOptions.workDays);return e.push(t),this.parent.activeViewOptions.group.resources.length>0&&this.parent.resourceBase.generateResourceLevels(t,!this.parent.uiStateValues.isGroupAdaptive),this.parent.activeViewOptions.headerRows.length>0&&(e=new fo(this.parent,this.renderDates).generateColumnLevels(t,[])),this.colLevels=e,e},i.prototype.getAdjustedDate=function(e){for(var t=this.colLevels[this.colLevels.length-1],r=0;r<t.length;r++)if(t[r].date.getTime()>e.getTime())return t[r-1].date;return null},i.prototype.destroy=function(){if(!(!this.parent||this.parent&&this.parent.isDestroyed)){if(this.element){var e=this.element.querySelector("."+F);e&&s.bi.remove(e,"scroll",this.onContentScroll)}this.appointment&&(this.appointment.destroy(),this.appointment=null),l.prototype.destroy.call(this)}},i}(Hr);const To=["dateHeaderTemplate"],wo=["dayHeaderTemplate"],Do=["cellHeaderTemplate"],Co=["cellTemplate"],Kh=["eventTemplate"],So=["monthHeaderTemplate"],Eo=["resourceHeaderTemplate"],Ao=["headerIndentTemplate"],bo=["timeScaleMinorSlotTemplate"],Oo=["timeScaleMajorSlotTemplate"],Vo=["groupHeaderTooltipTemplate"],Qh=["template"],Xh=["eventSettingsTooltipTemplate"],Jh=["eventSettingsTemplate"],$h=["editorTemplate"],ep=["quickInfoTemplatesHeader"],tp=["quickInfoTemplatesContent"],ip=["quickInfoTemplatesFooter"];let rp=["allowVirtualScrolling","cellHeaderTemplate","cellTemplate","dateFormat","dateHeaderTemplate","dayHeaderTemplate","displayDate","displayName","endHour","eventTemplate","firstDayOfWeek","firstMonthOfYear","group","headerIndentTemplate","headerRows","interval","isSelected","monthHeaderTemplate","monthsCount","numberOfWeeks","option","orientation","readonly","resourceHeaderTemplate","showWeekNumber","showWeekend","startHour","timeFormat","timeScale","workDays"],np=[],ap=(()=>{class l extends W.bn{constructor(e){super(),this.viewContainerRef=e,(0,W.sO)("currentInstance",this,this.viewContainerRef),this.registerEvents(np),this.directivePropList=rp}}return l.\u0275fac=function(e){return new(e||l)(T.Y36(T.s_b))},l.\u0275dir=T.lG2({type:l,selectors:[["e-view"]],contentQueries:function(e,t,r){if(1&e&&(T.Suo(r,To,5),T.Suo(r,wo,5),T.Suo(r,Do,5),T.Suo(r,Co,5),T.Suo(r,Kh,5),T.Suo(r,So,5),T.Suo(r,Eo,5),T.Suo(r,Ao,5),T.Suo(r,bo,5),T.Suo(r,Oo,5),T.Suo(r,Vo,5)),2&e){let n;T.iGM(n=T.CRH())&&(t.dateHeaderTemplate=n.first),T.iGM(n=T.CRH())&&(t.dayHeaderTemplate=n.first),T.iGM(n=T.CRH())&&(t.cellHeaderTemplate=n.first),T.iGM(n=T.CRH())&&(t.cellTemplate=n.first),T.iGM(n=T.CRH())&&(t.eventTemplate=n.first),T.iGM(n=T.CRH())&&(t.monthHeaderTemplate=n.first),T.iGM(n=T.CRH())&&(t.resourceHeaderTemplate=n.first),T.iGM(n=T.CRH())&&(t.headerIndentTemplate=n.first),T.iGM(n=T.CRH())&&(t.timeScale_minorSlotTemplate=n.first),T.iGM(n=T.CRH())&&(t.timeScale_majorSlotTemplate=n.first),T.iGM(n=T.CRH())&&(t.group_headerTooltipTemplate=n.first)}},inputs:{allowVirtualScrolling:"allowVirtualScrolling",cellHeaderTemplate:"cellHeaderTemplate",cellTemplate:"cellTemplate",dateFormat:"dateFormat",dateHeaderTemplate:"dateHeaderTemplate",dayHeaderTemplate:"dayHeaderTemplate",displayDate:"displayDate",displayName:"displayName",endHour:"endHour",eventTemplate:"eventTemplate",firstDayOfWeek:"firstDayOfWeek",firstMonthOfYear:"firstMonthOfYear",group:"group",headerIndentTemplate:"headerIndentTemplate",headerRows:"headerRows",interval:"interval",isSelected:"isSelected",monthHeaderTemplate:"monthHeaderTemplate",monthsCount:"monthsCount",numberOfWeeks:"numberOfWeeks",option:"option",orientation:"orientation",readonly:"readonly",resourceHeaderTemplate:"resourceHeaderTemplate",showWeekNumber:"showWeekNumber",showWeekend:"showWeekend",startHour:"startHour",timeFormat:"timeFormat",timeScale:"timeScale",workDays:"workDays"},features:[T.qOj]}),(0,Q.gn)([(0,W.YS)()],l.prototype,"dateHeaderTemplate",void 0),(0,Q.gn)([(0,W.YS)()],l.prototype,"dayHeaderTemplate",void 0),(0,Q.gn)([(0,W.YS)()],l.prototype,"cellHeaderTemplate",void 0),(0,Q.gn)([(0,W.YS)()],l.prototype,"cellTemplate",void 0),(0,Q.gn)([(0,W.YS)()],l.prototype,"eventTemplate",void 0),(0,Q.gn)([(0,W.YS)()],l.prototype,"monthHeaderTemplate",void 0),(0,Q.gn)([(0,W.YS)()],l.prototype,"resourceHeaderTemplate",void 0),(0,Q.gn)([(0,W.YS)()],l.prototype,"headerIndentTemplate",void 0),(0,Q.gn)([(0,W.YS)()],l.prototype,"timeScale_minorSlotTemplate",void 0),(0,Q.gn)([(0,W.YS)()],l.prototype,"timeScale_majorSlotTemplate",void 0),(0,Q.gn)([(0,W.YS)()],l.prototype,"group_headerTooltipTemplate",void 0),l})(),sp=(()=>{class l extends W.wR{constructor(){super("views")}}return l.\u0275fac=function(e){return new(e||l)},l.\u0275dir=T.lG2({type:l,selectors:[["e-views"]],contentQueries:function(e,t,r){if(1&e&&T.Suo(r,ap,4),2&e){let n;T.iGM(n=T.CRH())&&(t.children=n)}},features:[T.qOj]}),l})(),op=["allowMultiple","colorField","cssClassField","dataSource","endHourField","expandedField","field","groupIDField","idField","name","query","startHourField","textField","title","workDaysField"],lp=[],cp=(()=>{class l extends W.bn{constructor(e){super(),this.viewContainerRef=e,(0,W.sO)("currentInstance",this,this.viewContainerRef),this.registerEvents(lp),this.directivePropList=op}}return l.\u0275fac=function(e){return new(e||l)(T.Y36(T.s_b))},l.\u0275dir=T.lG2({type:l,selectors:[["e-resource"]],inputs:{allowMultiple:"allowMultiple",colorField:"colorField",cssClassField:"cssClassField",dataSource:"dataSource",endHourField:"endHourField",expandedField:"expandedField",field:"field",groupIDField:"groupIDField",idField:"idField",name:"name",query:"query",startHourField:"startHourField",textField:"textField",title:"title",workDaysField:"workDaysField"},features:[T.qOj]}),l})(),hp=(()=>{class l extends W.wR{constructor(){super("resources")}}return l.\u0275fac=function(e){return new(e||l)},l.\u0275dir=T.lG2({type:l,selectors:[["e-resources"]],contentQueries:function(e,t,r){if(1&e&&T.Suo(r,cp,4),2&e){let n;T.iGM(n=T.CRH())&&(t.children=n)}},features:[T.qOj]}),l})(),pp=["option","template"],up=[],dp=(()=>{class l extends W.bn{constructor(e){super(),this.viewContainerRef=e,(0,W.sO)("currentInstance",this,this.viewContainerRef),this.registerEvents(up),this.directivePropList=pp}}return l.\u0275fac=function(e){return new(e||l)(T.Y36(T.s_b))},l.\u0275dir=T.lG2({type:l,selectors:[["e-header-row"]],contentQueries:function(e,t,r){if(1&e&&T.Suo(r,Qh,5),2&e){let n;T.iGM(n=T.CRH())&&(t.template=n.first)}},inputs:{option:"option",template:"template"},features:[T.qOj]}),(0,Q.gn)([(0,W.YS)()],l.prototype,"template",void 0),l})(),vp=(()=>{class l extends W.wR{constructor(){super("headerrows")}}return l.\u0275fac=function(e){return new(e||l)},l.\u0275dir=T.lG2({type:l,selectors:[["e-header-rows"]],contentQueries:function(e,t,r){if(1&e&&T.Suo(r,dp,4),2&e){let n;T.iGM(n=T.CRH())&&(t.children=n)}},features:[T.qOj]}),l})();const fp=["actionBegin","actionComplete","actionFailure","cellClick","cellDoubleClick","created","dataBinding","dataBound","destroyed","drag","dragStart","dragStop","eventClick","eventRendered","hover","moreEventsClick","navigating","popupClose","popupOpen","renderCell","resizeStart","resizeStop","resizing","select","currentViewChange","selectedDateChange"],gp=["currentView","selectedDate"];let mp=(()=>{let l=class extends sa{constructor(e,t,r,n){super(),this.ngEle=e,this.srenderer=t,this.viewContainerRef=r,this.injector=n,this.tags=["views","resources","headerRows"],this.element=this.ngEle.nativeElement,this.injectedModules=this.injectedModules||[];try{let a=this.injector.get("ScheduleDay");-1===this.injectedModules.indexOf(a)&&this.injectedModules.push(a)}catch(a){}try{let a=this.injector.get("ScheduleWeek");-1===this.injectedModules.indexOf(a)&&this.injectedModules.push(a)}catch(a){}try{let a=this.injector.get("ScheduleWorkWeek");-1===this.injectedModules.indexOf(a)&&this.injectedModules.push(a)}catch(a){}try{let a=this.injector.get("ScheduleMonth");-1===this.injectedModules.indexOf(a)&&this.injectedModules.push(a)}catch(a){}try{let a=this.injector.get("ScheduleYear");-1===this.injectedModules.indexOf(a)&&this.injectedModules.push(a)}catch(a){}try{let a=this.injector.get("ScheduleAgenda");-1===this.injectedModules.indexOf(a)&&this.injectedModules.push(a)}catch(a){}try{let a=this.injector.get("ScheduleMonthAgenda");-1===this.injectedModules.indexOf(a)&&this.injectedModules.push(a)}catch(a){}try{let a=this.injector.get("ScheduleTimelineViews");-1===this.injectedModules.indexOf(a)&&this.injectedModules.push(a)}catch(a){}try{let a=this.injector.get("ScheduleTimelineMonth");-1===this.injectedModules.indexOf(a)&&this.injectedModules.push(a)}catch(a){}try{let a=this.injector.get("ScheduleTimelineYear");-1===this.injectedModules.indexOf(a)&&this.injectedModules.push(a)}catch(a){}try{let a=this.injector.get("ScheduleResize");-1===this.injectedModules.indexOf(a)&&this.injectedModules.push(a)}catch(a){}try{let a=this.injector.get("ScheduleDragAndDrop");-1===this.injectedModules.indexOf(a)&&this.injectedModules.push(a)}catch(a){}try{let a=this.injector.get("ScheduleExcelExport");-1===this.injectedModules.indexOf(a)&&this.injectedModules.push(a)}catch(a){}try{let a=this.injector.get("ScheduleICalendarExport");-1===this.injectedModules.indexOf(a)&&this.injectedModules.push(a)}catch(a){}try{let a=this.injector.get("ScheduleICalendarImport");-1===this.injectedModules.indexOf(a)&&this.injectedModules.push(a)}catch(a){}try{let a=this.injector.get("SchedulePrint");-1===this.injectedModules.indexOf(a)&&this.injectedModules.push(a)}catch(a){}this.registerEvents(fp),this.addTwoWay.call(this,gp),(0,W.sO)("currentInstance",this,this.viewContainerRef),this.context=new W.VZ}ngOnInit(){this.context.ngOnInit(this)}ngAfterViewInit(){this.context.ngAfterViewInit(this)}ngOnDestroy(){this.context.ngOnDestroy(this)}ngAfterContentChecked(){this.tagObjects[0].instance=this.childViews,this.childResources&&(this.tagObjects[1].instance=this.childResources),this.childHeaderRows&&(this.tagObjects[2].instance=this.childHeaderRows),this.context.ngAfterContentChecked(this)}};return l.\u0275fac=function(e){return new(e||l)(T.Y36(T.SBq),T.Y36(T.Qsj),T.Y36(T.s_b),T.Y36(T.zs3))},l.\u0275cmp=T.Xpm({type:l,selectors:[["ejs-schedule"]],contentQueries:function(e,t,r){if(1&e&&(T.Suo(r,To,5),T.Suo(r,wo,5),T.Suo(r,Co,5),T.Suo(r,Do,5),T.Suo(r,Xh,5),T.Suo(r,Jh,5),T.Suo(r,$h,5),T.Suo(r,So,5),T.Suo(r,bo,5),T.Suo(r,Oo,5),T.Suo(r,Eo,5),T.Suo(r,Ao,5),T.Suo(r,ep,5),T.Suo(r,tp,5),T.Suo(r,ip,5),T.Suo(r,Vo,5),T.Suo(r,sp,5),T.Suo(r,hp,5),T.Suo(r,vp,5)),2&e){let n;T.iGM(n=T.CRH())&&(t.dateHeaderTemplate=n.first),T.iGM(n=T.CRH())&&(t.dayHeaderTemplate=n.first),T.iGM(n=T.CRH())&&(t.cellTemplate=n.first),T.iGM(n=T.CRH())&&(t.cellHeaderTemplate=n.first),T.iGM(n=T.CRH())&&(t.eventSettings_tooltipTemplate=n.first),T.iGM(n=T.CRH())&&(t.eventSettings_template=n.first),T.iGM(n=T.CRH())&&(t.editorTemplate=n.first),T.iGM(n=T.CRH())&&(t.monthHeaderTemplate=n.first),T.iGM(n=T.CRH())&&(t.timeScale_minorSlotTemplate=n.first),T.iGM(n=T.CRH())&&(t.timeScale_majorSlotTemplate=n.first),T.iGM(n=T.CRH())&&(t.resourceHeaderTemplate=n.first),T.iGM(n=T.CRH())&&(t.headerIndentTemplate=n.first),T.iGM(n=T.CRH())&&(t.quickInfoTemplates_header=n.first),T.iGM(n=T.CRH())&&(t.quickInfoTemplates_content=n.first),T.iGM(n=T.CRH())&&(t.quickInfoTemplates_footer=n.first),T.iGM(n=T.CRH())&&(t.group_headerTooltipTemplate=n.first),T.iGM(n=T.CRH())&&(t.childViews=n.first),T.iGM(n=T.CRH())&&(t.childResources=n.first),T.iGM(n=T.CRH())&&(t.childHeaderRows=n.first)}},inputs:{agendaDaysCount:"agendaDaysCount",allowDragAndDrop:"allowDragAndDrop",allowInline:"allowInline",allowKeyboardInteraction:"allowKeyboardInteraction",allowMultiCellSelection:"allowMultiCellSelection",allowMultiDrag:"allowMultiDrag",allowMultiRowSelection:"allowMultiRowSelection",allowResizing:"allowResizing",allowSwiping:"allowSwiping",calendarMode:"calendarMode",cellHeaderTemplate:"cellHeaderTemplate",cellTemplate:"cellTemplate",cssClass:"cssClass",currentView:"currentView",dateFormat:"dateFormat",dateHeaderTemplate:"dateHeaderTemplate",dayHeaderTemplate:"dayHeaderTemplate",editorTemplate:"editorTemplate",enableAdaptiveUI:"enableAdaptiveUI",enableAllDayScroll:"enableAllDayScroll",enablePersistence:"enablePersistence",enableRecurrenceValidation:"enableRecurrenceValidation",enableRtl:"enableRtl",endHour:"endHour",eventDragArea:"eventDragArea",eventSettings:"eventSettings",firstDayOfWeek:"firstDayOfWeek",firstMonthOfYear:"firstMonthOfYear",group:"group",headerIndentTemplate:"headerIndentTemplate",headerRows:"headerRows",height:"height",hideEmptyAgendaDays:"hideEmptyAgendaDays",locale:"locale",maxDate:"maxDate",minDate:"minDate",monthHeaderTemplate:"monthHeaderTemplate",monthsCount:"monthsCount",quickInfoOnSelectionEnd:"quickInfoOnSelectionEnd",quickInfoTemplates:"quickInfoTemplates",readonly:"readonly",resourceHeaderTemplate:"resourceHeaderTemplate",resources:"resources",rowAutoHeight:"rowAutoHeight",selectedDate:"selectedDate",showHeaderBar:"showHeaderBar",showQuickInfo:"showQuickInfo",showTimeIndicator:"showTimeIndicator",showWeekNumber:"showWeekNumber",showWeekend:"showWeekend",startHour:"startHour",timeFormat:"timeFormat",timeScale:"timeScale",timezone:"timezone",timezoneDataSource:"timezoneDataSource",views:"views",weekRule:"weekRule",width:"width",workDays:"workDays",workHours:"workHours"},outputs:{actionBegin:"actionBegin",actionComplete:"actionComplete",actionFailure:"actionFailure",cellClick:"cellClick",cellDoubleClick:"cellDoubleClick",created:"created",dataBinding:"dataBinding",dataBound:"dataBound",destroyed:"destroyed",drag:"drag",dragStart:"dragStart",dragStop:"dragStop",eventClick:"eventClick",eventRendered:"eventRendered",hover:"hover",moreEventsClick:"moreEventsClick",navigating:"navigating",popupClose:"popupClose",popupOpen:"popupOpen",renderCell:"renderCell",resizeStart:"resizeStart",resizeStop:"resizeStop",resizing:"resizing",select:"select",currentViewChange:"currentViewChange",selectedDateChange:"selectedDateChange"},features:[T.qOj],decls:0,vars:0,template:function(e,t){},encapsulation:2,changeDetection:0}),(0,Q.gn)([(0,W.YS)()],l.prototype,"dateHeaderTemplate",void 0),(0,Q.gn)([(0,W.YS)()],l.prototype,"dayHeaderTemplate",void 0),(0,Q.gn)([(0,W.YS)()],l.prototype,"cellTemplate",void 0),(0,Q.gn)([(0,W.YS)()],l.prototype,"cellHeaderTemplate",void 0),(0,Q.gn)([(0,W.YS)()],l.prototype,"eventSettings_tooltipTemplate",void 0),(0,Q.gn)([(0,W.YS)()],l.prototype,"eventSettings_template",void 0),(0,Q.gn)([(0,W.YS)()],l.prototype,"editorTemplate",void 0),(0,Q.gn)([(0,W.YS)()],l.prototype,"monthHeaderTemplate",void 0),(0,Q.gn)([(0,W.YS)()],l.prototype,"timeScale_minorSlotTemplate",void 0),(0,Q.gn)([(0,W.YS)()],l.prototype,"timeScale_majorSlotTemplate",void 0),(0,Q.gn)([(0,W.YS)()],l.prototype,"resourceHeaderTemplate",void 0),(0,Q.gn)([(0,W.YS)()],l.prototype,"headerIndentTemplate",void 0),(0,Q.gn)([(0,W.YS)()],l.prototype,"quickInfoTemplates_header",void 0),(0,Q.gn)([(0,W.YS)()],l.prototype,"quickInfoTemplates_content",void 0),(0,Q.gn)([(0,W.YS)()],l.prototype,"quickInfoTemplates_footer",void 0),(0,Q.gn)([(0,W.YS)()],l.prototype,"group_headerTooltipTemplate",void 0),l=(0,Q.gn)([(0,W.jm)([W.VZ])],l),l})(),yp=(()=>{class l{}return l.\u0275fac=function(e){return new(e||l)},l.\u0275mod=T.oAB({type:l}),l.\u0275inj=T.cJS({imports:[[ji.ez]]}),l})();const Tp={provide:"ScheduleDay",useValue:lo},wp={provide:"ScheduleWeek",useValue:co},Dp={provide:"ScheduleWorkWeek",useValue:ho},Cp={provide:"ScheduleMonth",useValue:Hr},Sp={provide:"ScheduleAgenda",useValue:uo},Ep={provide:"ScheduleMonthAgenda",useValue:vo},Ap={provide:"ScheduleTimelineViews",useValue:go},bp={provide:"ScheduleTimelineMonth",useValue:mo};let Op=(()=>{class l{}return l.\u0275fac=function(e){return new(e||l)},l.\u0275mod=T.oAB({type:l}),l.\u0275inj=T.cJS({imports:[[ji.ez]]}),l})();var Vp=ae(6007),Mp=ae(8751),Rp=ae(7110);const xp=["scheduleObj"];function kp(l,i){1&l&&(T.TgZ(0,"li",7),T.TgZ(1,"a",21),T._uU(2,"Announcements"),T.qZA(),T.qZA())}function Ip(l,i){1&l&&(T.TgZ(0,"li",7),T.TgZ(1,"a",22),T._uU(2,"My Courses"),T.qZA(),T.qZA())}function Lp(l,i){1&l&&(T.TgZ(0,"li",7),T.TgZ(1,"a",23),T._uU(2,"Calendar"),T.qZA(),T.qZA())}function Hp(l,i){1&l&&(T.TgZ(0,"li",7),T.TgZ(1,"a",24),T._uU(2,"Announcements"),T.qZA(),T.qZA())}function Pp(l,i){1&l&&(T.TgZ(0,"li",7),T.TgZ(1,"a",25),T._uU(2,"My Courses"),T.qZA(),T.qZA())}function qp(l,i){1&l&&(T.TgZ(0,"li",7),T.TgZ(1,"a",23),T._uU(2,"Calendar"),T.qZA(),T.qZA())}const Fp=[{path:"",component:(()=>{class l{constructor(e,t,r){this.shared=e,this.dashboardService=t,this.accountService=r,this.data=[],this.eventSettings={dataSource:this.data}}toggleNav(){let e=document.getElementById("navbarCollapse");console.log(e),e.classList.toggle("collapse")}signOut(){this.accountService.logout()}isTeacher(){return this.shared.getUser().accountType==this.shared.AccountTypes.Teacher}getUser(){return this.shared.getUser()}ngOnInit(){this.getAppointments()}getAppointments(){this.dashboardService.getAppointments(this.shared.getUser()).subscribe(e=>{null!=e&&(this.data=JSON.parse(e.event),this.scheduleObj.addEvent(this.data))},e=>{this.shared.toastr.error(e.error)})}saveAppointments(){let e={ownerId:this.shared.getUser().organizationId,event:JSON.stringify(this.scheduleObj.getEvents())};this.dashboardService.create_Edit_Appointment(e).subscribe(t=>{},t=>{this.shared.toastr.error(t.error)})}onCreated(){this.scheduleObj.addEventListener("popupClose",()=>{setTimeout(()=>{this.saveAppointments()},1e3)})}}return l.\u0275fac=function(e){return new(e||l)(T.Y36(Vp.F),T.Y36(Mp.s),T.Y36(Rp.B))},l.\u0275cmp=T.Xpm({type:l,selectors:[["app-calendar"]],viewQuery:function(e,t){if(1&e&&T.Gf(xp,5),2&e){let r;T.iGM(r=T.CRH())&&(t.scheduleObj=r.first)}},features:[T._Bn([Tp,wp,Dp,Cp,Sp,Ep,Ap,bp])],decls:34,vars:8,consts:[[1,"navbar","navbar-expand-md","navbar-dark","fixed-top"],["href","#",1,"navbar-brand"],["type","button","data-toggle","collapse","data-target","#navbarCollapse","aria-controls","navbarCollapse","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler","collapsed",3,"click"],[1,"navbar-toggler-icon"],["id","navbarCollapse",1,"navbar-collapse","collapse"],[1,"navbar-nav","mr-auto"],["class","nav-item",4,"ngIf"],[1,"nav-item"],["routerLinkActive","active","href","/myoffice",1,"nav-link"],["routerLinkActive","active","href","/mydrive",1,"nav-link"],[1,"navbar-nav","ml-auto"],[1,"nav-item","dropdown"],["id","dropdown03","data-bs-toggle","dropdown","aria-expanded","false",1,"nav-link","dropdown-toggle"],["alt","Avatar",1,"avatar-img",3,"src"],["aria-labelledby","dropdown03",1,"dropdown-content"],["routerLinkActive","active","routerLink","/profile",1,"nav-link"],[1,"nav-link","out",3,"click"],["viewBox","0 0 256 256",1,"icon"],["d","M224.48633,136.48438l-41.98926,42a12.0001,12.0001,0,0,1-16.97266-16.96876L187.03467,140H104a12,12,0,0,1,0-24h83.03467L165.52441,94.48438a12.0001,12.0001,0,0,1,16.97266-16.96876l41.98926,42A12.00094,12.00094,0,0,1,224.48633,136.48438ZM104,204H52V52h52a12,12,0,0,0,0-24H48A20.02229,20.02229,0,0,0,28,48V208a20.02229,20.02229,0,0,0,20,20h56a12,12,0,0,0,0-24Z"],[2,"margin-top","56px",3,"eventSettings","created"],["scheduleObj",""],["href","/teacher-dashboard#Announcements","routerLinkActive","active",1,"nav-link"],["href","/teacher-dashboard#MyCourses","routerLinkActive","active",1,"nav-link"],["routerLink","/calendar","routerLinkActive","active",1,"nav-link"],["href","/student-dashboard#Announcements","routerLinkActive","active",1,"nav-link"],["href","/student-dashboard#MyCourses","routerLinkActive","active",1,"nav-link"]],template:function(e,t){1&e&&(T.TgZ(0,"nav",0),T.TgZ(1,"a",1),T._uU(2,"Learning Platform"),T.qZA(),T.TgZ(3,"button",2),T.NdJ("click",function(){return t.toggleNav()}),T._UZ(4,"span",3),T.qZA(),T.TgZ(5,"div",4),T.TgZ(6,"ul",5),T.YNc(7,kp,3,0,"li",6),T.YNc(8,Ip,3,0,"li",6),T.YNc(9,Lp,3,0,"li",6),T.YNc(10,Hp,3,0,"li",6),T.YNc(11,Pp,3,0,"li",6),T.YNc(12,qp,3,0,"li",6),T.TgZ(13,"li",7),T.TgZ(14,"a",8),T._uU(15,"My Office"),T.qZA(),T.qZA(),T.TgZ(16,"li",7),T.TgZ(17,"a",9),T._uU(18,"My Drive"),T.qZA(),T.qZA(),T.qZA(),T.TgZ(19,"ul",10),T.TgZ(20,"li",11),T.TgZ(21,"a",12),T._UZ(22,"img",13),T.qZA(),T.TgZ(23,"ul",14),T.TgZ(24,"li"),T.TgZ(25,"a",15),T._uU(26,"Profile"),T.qZA(),T.qZA(),T.TgZ(27,"li"),T.TgZ(28,"a",16),T.NdJ("click",function(){return t.signOut()}),T.O4$(),T.TgZ(29,"svg",17),T._UZ(30,"path",18),T.qZA(),T._uU(31," Sign out"),T.qZA(),T.qZA(),T.qZA(),T.qZA(),T.qZA(),T.qZA(),T.qZA(),T.kcU(),T.TgZ(32,"ejs-schedule",19,20),T.NdJ("created",function(){return t.onCreated()}),T.qZA()),2&e&&(T.xp6(7),T.Q6J("ngIf",t.isTeacher()),T.xp6(1),T.Q6J("ngIf",t.isTeacher()),T.xp6(1),T.Q6J("ngIf",t.isTeacher()),T.xp6(1),T.Q6J("ngIf",!t.isTeacher()),T.xp6(1),T.Q6J("ngIf",!t.isTeacher()),T.xp6(1),T.Q6J("ngIf",!t.isTeacher()),T.xp6(10),T.s9C("src",t.getUser().avatarUrl,T.LSH),T.xp6(10),T.Q6J("eventSettings",t.eventSettings))},directives:[ji.O5,Pr.Od,Pr.yS,mp],styles:[".avatar-img[_ngcontent-%COMP%]{border-radius:50%;width:30px}nav[_ngcontent-%COMP%]{background-color:var(--dark-color);padding-bottom:2px;min-height:56px}.dropdown-content[_ngcontent-%COMP%]{display:none;list-style-type:none;position:absolute;background-color:var(--dark-color);min-width:160px;padding:1rem;box-shadow:0 8px 16px #00000040;border:1px solid #000;border-radius:.25rem;right:0;z-index:1}.dropdown[_ngcontent-%COMP%]:hover   .dropdown-content[_ngcontent-%COMP%]{display:block}.icon[_ngcontent-%COMP%]{fill:#a00000;width:30px;height:30px}.nav-link.out[_ngcontent-%COMP%]{cursor:pointer}"]}),l})()}];let Np=(()=>{class l{}return l.\u0275fac=function(e){return new(e||l)},l.\u0275mod=T.oAB({type:l}),l.\u0275inj=T.cJS({imports:[[ji.ez,yp,Op,Pr.Bz.forChild(Fp)]]}),l})()}}]);