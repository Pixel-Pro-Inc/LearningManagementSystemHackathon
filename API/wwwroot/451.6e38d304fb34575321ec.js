"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[451],{451:(rC,Nh,Fe)=>{Fe.r(Nh),Fe.d(Nh,{PdfModule:()=>sC});var Rh=Fe(8583),$u=Fe(4762),ve=Fe(639),Os=Fe(1177),a=Fe(1727),jt=(function(e,t){return(Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])})(e,t)},(()=>(function(s){s[s.Self=1]="Self",s[s.Parent=2]="Parent"}(jt||(jt={})),jt))()),_s=(()=>(function(s){s[s.None=0]="None",s[s.ElementIsPort=2]="ElementIsPort",s[s.ElementIsGroup=4]="ElementIsGroup"}(_s||(_s={})),_s))(),Re=(()=>(function(s){s[s.Rotate=2]="Rotate",s[s.ConnectorSource=4]="ConnectorSource",s[s.ConnectorTarget=8]="ConnectorTarget",s[s.ResizeNorthEast=16]="ResizeNorthEast",s[s.ResizeEast=32]="ResizeEast",s[s.ResizeSouthEast=64]="ResizeSouthEast",s[s.ResizeSouth=128]="ResizeSouth",s[s.ResizeSouthWest=256]="ResizeSouthWest",s[s.ResizeWest=512]="ResizeWest",s[s.ResizeNorthWest=1024]="ResizeNorthWest",s[s.ResizeNorth=2048]="ResizeNorth",s[s.Default=4094]="Default"}(Re||(Re={})),Re))(),fe=function(){function s(e,t){this.width=e,this.height=t}return s.prototype.clone=function(){return new s(this.width,this.height)},s}(),de=function(){function s(e,t,i,n){this.x=Number.MAX_VALUE,this.y=Number.MAX_VALUE,this.width=0,this.height=0,void 0===e||void 0===t?(e=t=Number.MAX_VALUE,i=n=0):(void 0===i&&(i=0),void 0===n&&(n=0)),this.x=e,this.y=t,this.width=i,this.height=n}return Object.defineProperty(s.prototype,"left",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"right",{get:function(){return this.x+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"top",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"topLeft",{get:function(){return{x:this.left,y:this.top}},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"topRight",{get:function(){return{x:this.right,y:this.top}},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"bottomLeft",{get:function(){return{x:this.left,y:this.bottom}},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"bottomRight",{get:function(){return{x:this.right,y:this.bottom}},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"middleLeft",{get:function(){return{x:this.left,y:this.y+this.height/2}},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"middleRight",{get:function(){return{x:this.right,y:this.y+this.height/2}},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"topCenter",{get:function(){return{x:this.x+this.width/2,y:this.top}},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"bottomCenter",{get:function(){return{x:this.x+this.width/2,y:this.bottom}},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"center",{get:function(){return{x:this.x+this.width/2,y:this.y+this.height/2}},enumerable:!0,configurable:!0}),s.prototype.equals=function(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height},s.prototype.uniteRect=function(e){var t=Math.max(Number.NaN===this.right||this.x===Number.MAX_VALUE?e.right:this.right,e.right),i=Math.max(Number.NaN===this.bottom||this.y===Number.MAX_VALUE?e.bottom:this.bottom,e.bottom);return this.x=Math.min(this.left,e.left),this.y=Math.min(this.top,e.top),this.width=t-this.x,this.height=i-this.y,this},s.prototype.unitePoint=function(e){if(this.x===Number.MAX_VALUE)return this.x=e.x,void(this.y=e.y);var t=Math.min(this.left,e.x),i=Math.min(this.top,e.y),n=Math.max(this.right,e.x),o=Math.max(this.bottom,e.y);this.x=t,this.y=i,this.width=n-this.x,this.height=o-this.y},s.prototype.intersection=function(e){if(this.intersects(e)){var t=Math.max(this.left,e.left),i=Math.max(this.top,e.top);return new s(t,i,Math.min(this.right,e.right)-t,Math.min(this.bottom,e.bottom)-i)}return s.empty},s.prototype.Inflate=function(e){return this.x-=e,this.y-=e,this.width+=2*e,this.height+=2*e,this},s.prototype.intersects=function(e){return!(this.right<e.left||this.left>e.right||this.top>e.bottom||this.bottom<e.top)},s.prototype.containsRect=function(e){return this.left<=e.left&&this.right>=e.right&&this.top<=e.top&&this.bottom>=e.bottom},s.prototype.containsPoint=function(e,t){return void 0===t&&(t=0),this.left-t<=e.x&&this.right+t>=e.x&&this.top-t<=e.y&&this.bottom+t>=e.y},s.prototype.toPoints=function(){var e=[];return e.push(this.topLeft),e.push(this.topRight),e.push(this.bottomLeft),e.push(this.bottomRight),e},s.toBounds=function(e){for(var t=new s,i=0,n=e;i<n.length;i++)t.unitePoint(n[i]);return t},s.prototype.scale=function(e,t){this.width*=e,this.height*=t},s.prototype.offset=function(e,t){this.x+=e,this.y+=t},s.empty=new s(Number.MAX_VALUE,Number.MIN_VALUE,0,0),s}(),ee=(()=>(function(s){s[s.Identity=0]="Identity",s[s.Translation=1]="Translation",s[s.Scaling=2]="Scaling",s[s.Unknown=4]="Unknown"}(ee||(ee={})),ee))(),om=function(){return function(e,t,i,n,o,r,l){this.m11=e,this.m12=t,this.m21=i,this.m22=n,this.offsetX=o,this.offsetY=r,this.type=l}}();function he(){return new om(1,0,0,1,0,0,ee.Identity)}function R(s,e){var t=function(s,e,t){switch(s.type){case ee.Identity:break;case ee.Translation:e+=s.offsetX,t+=s.offsetY;break;case ee.Scaling:e*=s.m11,t*=s.m22;break;case ee.Translation|ee.Scaling:e*=s.m11,e+=s.offsetX,t*=s.m22,t+=s.offsetY;break;default:var n=e*s.m12+s.offsetY;e*=s.m11,e+=t*s.m21+s.offsetX,t*=s.m22,t+=n}return{x:e,y:t}}(s,e.x,e.y);return{x:Math.round(100*t.x)/100,y:Math.round(100*t.y)/100}}function pe(s,e,t,i){Hh(s,function(s,e,t){var i=he(),n=Math.sin(s),o=Math.cos(s),r=e*(1-o)+t*n,l=t*(1-o)-e*n;return i.type=ee.Unknown,zs(i,o,n,-n,o,r,l),i}(.017453292519943295*(e%=360),t||0,i||0))}function Hh(s,e){var t=s.type,i=e.type;if(i!==ee.Identity){if(t===ee.Identity)return qh(s,e),void(s.type=e.type);if(i===ee.Translation)return s.offsetX+=e.offsetX,s.offsetY+=e.offsetY,void(t!==ee.Unknown&&(s.type|=ee.Translation));if(t!==ee.Translation){var n=t<<4|i;switch(n){case 34:return s.m11*=e.m11,void(s.m22*=e.m22);case 35:return s.m11*=e.m11,s.m22*=e.m22,s.offsetX=e.offsetX,s.offsetY=e.offsetY,void(s.type=ee.Translation|ee.Scaling);case 36:break;default:switch(n){case 50:return s.m11*=e.m11,s.m22*=e.m22,s.offsetX*=e.m11,void(s.offsetY*=e.m22);case 51:return s.m11*=e.m11,s.m22*=e.m22,s.offsetX=e.m11*s.offsetX+e.offsetX,void(s.offsetY=e.m22*s.offsetY+e.offsetY);case 52:break;default:switch(n){case 66:case 67:case 68:break;default:return}}}var o=he();return zs(o,s.m11*e.m11+s.m12*e.m21,s.m11*e.m12+s.m12*e.m22,s.m21*e.m11+s.m22*e.m21,s.m21*e.m12+s.m22*e.m22,s.offsetX*e.m11+s.offsetY*e.m21+e.offsetX,s.offsetX*e.m12+s.offsetY*e.m22+e.offsetY),o.m21||o.m12?o.type=ee.Unknown:((o.m11&&1!==o.m11||o.m22&&1!==o.m22)&&(o.type=ee.Scaling),(o.offsetX||o.offsetY)&&(o.type|=ee.Translation),(o.type&(ee.Translation|ee.Scaling))===ee.Identity&&(o.type=ee.Identity),o.type=ee.Scaling|ee.Translation),qh(s,o),void(s.type=o.type)}var c=s.offsetX,u=s.offsetY;if(s.offsetX=c*e.m11+u*e.m21+e.offsetX,s.offsetY=c*e.m12+u*e.m22+e.offsetY,i===ee.Unknown)return void(s.type=ee.Unknown);s.type=ee.Translation|ee.Scaling}}function zs(s,e,t,i,n,o,r){s.m11=e,s.m12=t,s.m21=i,s.m22=n,s.offsetX=o,s.offsetY=r}function qh(s,e){s.m11=e.m11,s.m12=e.m12,s.m21=e.m21,s.m22=e.m22,s.offsetX=e.offsetX,s.offsetY=e.offsetY,s.type=e.type}function Zh(s){var e,t=[];if("msie"===a.AR.info.name||"edge"===a.AR.info.name)for(var i=0;i<s.childNodes.length;i++)1===(e=s.childNodes[i]).nodeType&&t.push(e);else t=s.children;return t}function mm(s,e,t,i,n){var r,l,o=new fe(0,0),d=function(s,e){var t={fill:s.style.fill,stroke:s.style.strokeColor,angle:s.rotateAngle+s.parentTransform,pivotX:s.pivot.x,pivotY:s.pivot.y,strokeWidth:s.style.strokeWidth,dashArray:s.style.strokeDashArray,opacity:s.style.opacity,visible:s.visible,id:s.id,width:e||s.actualSize.width,height:s.actualSize.height,x:s.offsetX-s.actualSize.width*s.pivot.x+.5,y:s.offsetY-s.actualSize.height*s.pivot.y+.5};return t.fontSize=s.style.fontSize,t.fontFamily=s.style.fontFamily,t.textOverflow=s.style.textOverflow,t.textDecoration=s.style.textDecoration,t.doWrap=s.doWrap,t.whiteSpace=Yh(s.style.whiteSpace,s.style.textWrapping),t.content=s.content,t.textWrapping=s.style.textWrapping,t.breakWord=Uh(s.style.textWrapping),t.textAlign=Wh(s.style.textAlign),t.color=s.style.color,t.italic=s.style.italic,t.bold=s.style.bold,t.dashArray="",t.strokeWidth=0,t.fill="",t}(s,i);return s.childNodes=r=function(s,e){var n,o,t=[],i=0,r=e||s.content;if("nowrap"!==s.whiteSpace&&"pre"!==s.whiteSpace)if("breakall"===s.breakWord)for(n="",n+=r[0],i=0;i<r.length;i++)if((o=Co(n,s))>=s.width&&n.length>0)t[t.length]={text:n,x:0,dy:0,width:o},n="";else{var l=Co(n+=r[i+1]||"",s);(Math.ceil(l)+2>=s.width&&n.length>0||n.indexOf("\n")>-1)&&(t[t.length]={text:n,x:0,dy:0,width:l},n=""),i===r.length-1&&n.length>0&&(t[t.length]={text:n,x:0,dy:0,width:l},n="")}else t=function(s,e){var h,p,f,c,t=[],i="",n=0,o=0,r="nowrap"!==s.whiteSpace,d=(e||s.content).split("\n");for(n=0;n<d.length;n++)for(h="NoWrap"!==s.textWrapping?d[n].split(" "):d,o=0;o<h.length;o++){var u=Co(p=(i+=((0!==o||1===h.length)&&r&&i.length>0?" ":"")+h[o])+(h[o+1]||""),s);Math.floor(u)>s.width-2&&i.length>0?(t[t.length]={text:i,x:0,dy:0,width:p===i?u:i===c?f:Co(i,s)},i=""):o===h.length-1&&(t[t.length]={text:i,x:0,dy:0,width:u},i=""),c=p,f=u}return t}(s,e);else t[t.length]={text:r,x:0,dy:0,width:Co(r,s)};return t}(d,n),s.wrapBounds=l=function(s,e){var n,o,t={x:0,width:0},i=0;for(i=0;i<e.length;i++)o=n=e[i].width,n="left"===s.textAlign?0:"center"===s.textAlign?n>s.width&&("Ellipsis"===s.textOverflow||"Clip"===s.textOverflow)?0:-n/2:"right"===s.textAlign?-n:e.length>1?0:-n/2,e[i].dy=1.2*s.fontSize,e[i].x=n,t?(t.x=Math.min(t.x,n),t.width=Math.max(t.width,o)):t={x:n,width:o};return t}(d,r),o.width=l.width,s.wrapBounds.width>=i&&"Wrap"!==d.textOverflow&&(o.width=i),o.height=r.length*s.style.fontSize*1.2,o}function ln(s,e){var i;return e&&(i=document.getElementById(e)),i?i.querySelector("#"+s):document.getElementById(s)}function So(s,e){var t=(0,a.az)(s);return function(s,e){for(var t=Object.keys(e),i=0;i<t.length;i++)s.setAttribute(t[i],e[t[i]])}(t,e),t}function at(){for(var t,s="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",e="",i=0;i<5;i++){if("crypto"in window&&"getRandomValues"in crypto){var n=new Uint16Array(1);t=(window.msCrypto||window.crypto).getRandomValues(n)[0]%(s.length-1)}else t=Math.floor(Math.random()*s.length);0===i&&t<10?i--:e+=s.substring(t,t+1)}return e}function et(s){new de;var t=s.offsetY-s.actualSize.height*s.pivot.y,i=s.offsetY+s.actualSize.height*(1-s.pivot.y),n=s.offsetX-s.actualSize.width*s.pivot.x,o=s.offsetX+s.actualSize.width*(1-s.pivot.x);return de.toBounds([{x:n,y:t},{x:o,y:t},{x:n,y:i},{x:o,y:i}])}function bm(s,e){var t=he();pe(t,e,0,0);var i=R(t,{x:0,y:0}),n=R(t,{x:s.width,y:0}),o=R(t,{x:0,y:s.height}),r=R(t,{x:s.width,y:s.height}),l=Math.min(i.x,n.x,o.x,r.x),d=Math.min(i.y,n.y,o.y,r.y),h=Math.max(i.x,n.x,o.x,r.x),p=Math.max(i.y,n.y,o.y,r.y);return new fe(h-l,p-d)}function Wh(s){var e="";switch(s){case"Center":e="center";break;case"Left":e="left";break;case"Right":e="right"}return e}function Uh(s){var e="";switch(s){case"Wrap":e="breakall";break;case"NoWrap":e="keepall";break;case"WrapWithOverflow":e="normal";break;case"LineThrough":e="line-through"}return e}function Co(s,e){var t="measureElement";window[t].style.visibility="visible";var n=Zh(window[t].children[2])[1];n.textContent=s,n.setAttribute("style","font-size:"+e.fontSize+"px; font-family:"+e.fontFamily+";font-weight:"+(e.bold?"bold":"normal"));var o=n.getBBox().width;return window[t].style.visibility="hidden",o}function Yh(s,e){if("NoWrap"===e&&"PreserveAll"===s)return"pre";var t="";switch(s){case"CollapseAll":t="nowrap";break;case"CollapseSpace":t="pre-line";break;case"PreserveAll":t="pre-wrap"}return t}function ut(s,e,t,i){if(0!==s){var n=he();return pe(n,s,e,t),R(n,i)}return i}var mt=function(){function s(){this.pivot={x:.5,y:.5},this.rotateValue={x:0,y:0,angle:0},this.isDirt=!0,this.offsetX=0,this.offsetY=0,this.cornerRadius=0,this.minHeight=void 0,this.minWidth=void 0,this.maxWidth=void 0,this.maxHeight=void 0,this.width=void 0,this.height=void 0,this.horizontalAlignment="Auto",this.verticalAlignment="Auto",this.visible=!0,this.rotateAngle=0,this.margin={left:0,right:0,top:0,bottom:0},this.relativeMode="Point",this.transform=jt.Self|jt.Parent,this.style={fill:"white",strokeColor:"black",opacity:1,strokeWidth:1},this.desiredSize=new fe,this.actualSize=new fe,this.parentTransform=0,this.preventContainer=!1,this.bounds=new de(0,0,0,0),this.staticSize=!1,this.isRectElement=!1,this.isCalculateDesiredSize=!0,this.elementActions=_s.None,this.position=void 0,this.unitMode=void 0,this.float=!1,this.floatingBounds=void 0}return s.prototype.setOffsetWithRespectToBounds=function(e,t,i){this.unitMode=i,this.position={x:e,y:t}},s.prototype.getAbsolutePosition=function(e){if(void 0!==this.position)return"Absolute"===this.unitMode?this.position:{x:this.position.x*e.width,y:this.position.y*e.height}},Object.defineProperty(s.prototype,"outerBounds",{get:function(){return this.floatingBounds||this.bounds},set:function(e){this.floatingBounds=e},enumerable:!0,configurable:!0}),s.prototype.measure=function(e){return this.desiredSize=new fe(void 0!==this.width?this.width:(e.width||0)-this.margin.left-this.margin.right,void 0!==this.height?this.height:(e.height||0)-this.margin.top-this.margin.bottom),this.isCalculateDesiredSize&&(this.desiredSize=this.validateDesiredSize(this.desiredSize,e)),this.desiredSize},s.prototype.arrange=function(e){return this.actualSize=e,this.updateBounds(),this.actualSize},s.prototype.updateBounds=function(){this.bounds=function(s){var t,e=new de,i=(t=et(s)).middleLeft,n=t.topCenter,o=t.bottomCenter,r=t.middleRight,l=t.topLeft,d=t.topRight,h=t.bottomLeft,p=t.bottomRight;if(s.corners={topLeft:l,topCenter:n,topRight:d,middleLeft:i,middleRight:r,bottomLeft:h,bottomCenter:o,bottomRight:p},0!==s.rotateAngle||0!==s.parentTransform){var f=he();pe(f,s.rotateAngle+s.parentTransform,s.offsetX,s.offsetY),s.corners.topLeft=l=R(f,l),s.corners.topCenter=n=R(f,n),s.corners.topRight=d=R(f,d),s.corners.middleLeft=i=R(f,i),s.corners.middleRight=r=R(f,r),s.corners.bottomLeft=h=R(f,h),s.corners.bottomCenter=o=R(f,o),s.corners.bottomRight=p=R(f,p)}return e=de.toBounds([l,d,h,p]),s.corners.left=e.left,s.corners.right=e.right,s.corners.top=e.top,s.corners.bottom=e.bottom,s.corners.center=e.center,s.corners.width=e.width,s.corners.height=e.height,e}(this)},s.prototype.validateDesiredSize=function(e,t){return this.isRectElement&&!this.width&&!this.minWidth&&!this.maxWidth&&(e.width=50),this.isRectElement&&!this.height&&!this.minHeight&&!this.maxHeight&&(e.height=50),(void 0===e||void 0!==this.width&&void 0!==this.height)&&((e=e||new fe).width=void 0===this.width?(t.width||0)-this.margin.left-this.margin.right:this.width,e.height=void 0===this.height?(t.height||0)-this.margin.top-this.margin.bottom:this.height),void 0!==this.minWidth&&(e.width=Math.max(e.width,this.minWidth)),void 0!==this.minHeight&&(e.height=Math.max(e.height,this.minHeight)),void 0!==this.maxWidth&&(e.width=Math.min(e.width,this.maxWidth)),void 0!==this.maxHeight&&(e.height=Math.min(e.height,this.maxHeight)),e},s}(),xm=function(){var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])})(e,t)};return function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),dn=function(s){function e(){var t=null!==s&&s.apply(this,arguments)||this;return t.desiredBounds=void 0,t.measureChildren=!0,t.prevRotateAngle=0,t}return xm(e,s),e.prototype.hasChildren=function(){return void 0!==this.children&&this.children.length>0},e.prototype.measure=function(t){this.desiredBounds=void 0;var n,o,i=void 0;if(this.hasChildren()){for(var r=0;r<this.children.length;r++)"Stretch"===(n=this.children[r]).horizontalAlignment&&!t.width&&(t.width=n.bounds.width),"Stretch"===n.verticalAlignment&&!t.height&&(t.height=n.bounds.height),(this.measureChildren||"Stretch"===n.horizontalAlignment||"Stretch"===n.verticalAlignment||n instanceof e&&void 0!==n.measureChildren)&&n.measure(t),o=this.GetChildrenBounds(n),"Stretch"!==n.horizontalAlignment&&"Stretch"!==n.verticalAlignment?void 0===this.desiredBounds?this.desiredBounds=o:this.desiredBounds.uniteRect(o):this.actualSize&&!this.actualSize.width&&!this.actualSize.height&&!n.preventContainer&&"Stretch"===n.horizontalAlignment&&"Stretch"===n.verticalAlignment&&(void 0===this.desiredBounds?this.desiredBounds=n.bounds:this.desiredBounds.uniteRect(n.bounds));if(void 0!==this.desiredBounds&&0!==this.rotateAngle){var h=ut(this.rotateAngle,void 0,void 0,{x:this.desiredBounds.x+this.desiredBounds.width*this.pivot.x,y:this.desiredBounds.y+this.desiredBounds.height*this.pivot.y});this.desiredBounds.x=h.x-this.desiredBounds.width*this.pivot.x,this.desiredBounds.y=h.y-this.desiredBounds.height*this.pivot.y}this.desiredBounds&&(i=new fe(this.desiredBounds.width,this.desiredBounds.height))}return i=this.validateDesiredSize(i,t),this.stretchChildren(i),this.desiredSize=i,i},e.prototype.arrange=function(t){var i,n=this.desiredBounds;if(n&&(this.offsetX=n.x+n.width*this.pivot.x,this.offsetY=n.y+n.height*this.pivot.y,this.hasChildren()))for(var l=0;l<this.children.length;l++){var d=!1;"Stretch"===(i=this.children[l]).horizontalAlignment&&(i.offsetX=this.offsetX,i.parentTransform=this.parentTransform+this.rotateAngle,d=!0),"Stretch"===i.verticalAlignment&&(i.offsetY=this.offsetY,i.parentTransform=this.parentTransform+this.rotateAngle,d=!0),(d||this.measureChildren||i instanceof e&&void 0!==i.measureChildren)&&i.arrange(i.desiredSize)}return this.actualSize=t,this.updateBounds(),this.prevRotateAngle=this.rotateAngle,t},e.prototype.stretchChildren=function(t){if(this.hasChildren())for(var i=0,n=this.children;i<n.length;i++){var o=n[i];("Stretch"===o.horizontalAlignment||void 0===o.desiredSize.width)&&(o.desiredSize.width=t.width-o.margin.left-o.margin.right),("Stretch"===o.verticalAlignment||void 0===o.desiredSize.height)&&(o.desiredSize.height=t.height-o.margin.top-o.margin.bottom),o instanceof e&&o.stretchChildren(o.desiredSize)}},e.prototype.findChildOffsetFromCenter=function(t,i){var o=function(s,e){return{x:s.x+e.desiredSize.width*e.pivot.x,y:s.y+e.desiredSize.height*e.pivot.y}}({x:i.x-t.desiredSize.width/2,y:i.y-t.desiredSize.height/2},t);o=ut(t.rotateAngle,i.x,i.y,o),o=ut(this.rotateAngle+this.parentTransform,this.offsetX,this.offsetY,o),t.offsetX=o.x,t.offsetY=o.y},e.prototype.GetChildrenBounds=function(t){var i;i=t.desiredSize.clone();var r=t.offsetX-i.width*t.pivot.x,l=t.offsetY-i.height*t.pivot.y,d=r+i.width,h=l+i.height,p={x:r,y:l},f={x:d,y:l},c={x:r,y:h},u={x:d,y:h};return p=ut(t.rotateAngle,t.offsetX,t.offsetY,p),f=ut(t.rotateAngle,t.offsetX,t.offsetY,f),c=ut(t.rotateAngle,t.offsetX,t.offsetY,c),u=ut(t.rotateAngle,t.offsetX,t.offsetY,u),0!==this.rotateAngle&&(p=ut(-this.rotateAngle,void 0,void 0,p),f=ut(-this.rotateAngle,void 0,void 0,f),c=ut(-this.rotateAngle,void 0,void 0,c),u=ut(-this.rotateAngle,void 0,void 0,u)),de.toBounds([p,f,c,u])},e}(mt),Vm=function(){var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])})(e,t)};return function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),Oe=function(s){function e(){var t=s.call(this)||this;return t.textContent="",t.canMeasure=!0,t.canConsiderBounds=!0,t.doWrap=!0,t.textNodes=[],t.style={color:"black",fill:"transparent",strokeColor:"black",strokeWidth:1,fontFamily:"Arial",fontSize:12,whiteSpace:"CollapseSpace",textWrapping:"WrapWithOverflow",textAlign:"Center",italic:!1,bold:!1,textDecoration:"None",strokeDashArray:"",opacity:1,textOverflow:"Wrap"},t.style.fill="transparent",t.style.strokeColor="transparent",t}return Vm(e,s),Object.defineProperty(e.prototype,"content",{get:function(){return this.textContent},set:function(t){this.textContent!==t&&(this.textContent=t,this.isDirt=!0,this.doWrap=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"childNodes",{get:function(){return this.textNodes},set:function(t){this.textNodes=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wrapBounds",{get:function(){return this.textWrapBounds},set:function(t){this.textWrapBounds=t},enumerable:!0,configurable:!0}),e.prototype.refreshTextElement=function(){this.isDirt=!0},e.prototype.measure=function(t){var i;return i=this.isDirt&&this.canMeasure?mm(this,0,0,this.width||t.width):this.desiredSize,this.desiredSize=void 0===this.width||void 0===this.height?new fe(i.width,i.height):new fe(this.width,this.height),this.desiredSize=this.validateDesiredSize(this.desiredSize,t),this.desiredSize},e.prototype.arrange=function(t){return(t.width!==this.actualSize.width||t.height!==this.actualSize.height||this.isDirt)&&(this.doWrap=!0),this.actualSize=t,this.updateBounds(),this.isDirt=!1,this.actualSize},e}(mt),Tm=function(){var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])})(e,t)};return function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),Xh=function(s){function e(){var t=null!==s&&s.apply(this,arguments)||this;return t.measureChildren=void 0,t}return Tm(e,s),e.prototype.measure=function(t){var i=void 0,n=void 0;if(this.hasChildren()){for(var o=0,r=this.children;o<r.length;o++){var l=r[o];if(l instanceof Oe){if(!l.canMeasure)break;t.width=t.width||this.maxWidth||this.minWidth,l.measure(t)}else l instanceof Oe||l.measure(t);var d=l.desiredSize.clone();0!==l.rotateAngle&&(d=bm(d,l.rotateAngle));var f=new de(l.margin.left,l.margin.top,d.width+l.margin.right,d.height+l.margin.bottom);l.float&&void 0!==l.getAbsolutePosition(d)||(!(l instanceof Oe)||l instanceof Oe&&l.canConsiderBounds)&&(void 0===n?n=f:n.uniteRect(f))}var u,m;if(n)u=Math.max(n.left,0),m=Math.max(n.top,0),i=new fe(n.width+u,n.height+m)}return i=s.prototype.validateDesiredSize.call(this,i,t),s.prototype.stretchChildren.call(this,i),this.desiredSize=i,i},e.prototype.arrange=function(t){if(this.outerBounds=new de,this.hasChildren()){var i,n;i=this.offsetY-t.height*this.pivot.y,n=this.offsetX-t.width*this.pivot.x;for(var o=0,r=this.children;o<r.length;o++){var l=r[o];if(0!=(l.transform&jt.Parent)){l.parentTransform=this.parentTransform+this.rotateAngle;var h,d=l.desiredSize.clone(),p={x:0,y:0},f=n,c=i;if("Point"===l.relativeMode){var u=l.getAbsolutePosition(t);void 0!==u&&(f+=u.x,c+=u.y)}if(p={x:(h="Object"===l.relativeMode?this.alignChildBasedOnParent(l,d,t,f,c):this.alignChildBasedOnaPoint(l,f,c)).x+d.width/2,y:h.y+d.height/2},l.rotateValue){var m={x:this.offsetX+(l.rotateValue.x||0),y:this.offsetY+(l.rotateValue.y||0)},g={x:this.offsetX,y:this.offsetY},v=0|l.rotateValue.angle,y=he();pe(y,v,g.x,g.y),p=R(y,m)}s.prototype.findChildOffsetFromCenter.call(this,l,p)}"Stretch"===l.horizontalAlignment||"Stretch"===l.verticalAlignment?l.arrange(t):l instanceof Oe&&l.canMeasure?(l.arrange(l.desiredSize),this.outerBounds.uniteRect(l.outerBounds)):l instanceof Oe||(l.arrange(l.desiredSize),this.outerBounds.uniteRect(l.outerBounds))}}return this.actualSize=t,this.updateBounds(),this.outerBounds.uniteRect(this.bounds),t},e.prototype.alignChildBasedOnParent=function(t,i,n,o,r){switch(t.horizontalAlignment){case"Auto":case"Left":o+=t.margin.left;break;case"Right":o+=n.width-i.width-t.margin.right;break;case"Stretch":case"Center":o+=n.width/2-i.width/2}switch(t.verticalAlignment){case"Auto":case"Top":r+=t.margin.top;break;case"Bottom":r+=n.height-i.height-t.margin.bottom;break;case"Stretch":case"Center":r+=n.height/2-i.height/2}return{x:o,y:r}},e.prototype.alignChildBasedOnaPoint=function(t,i,n){switch(i+=t.margin.left-t.margin.right,n+=t.margin.top-t.margin.bottom,t.horizontalAlignment){case"Auto":case"Left":break;case"Stretch":case"Center":i-=t.desiredSize.width*t.pivot.x;break;case"Right":i-=t.desiredSize.width}switch(t.verticalAlignment){case"Auto":case"Top":break;case"Stretch":case"Center":n-=t.desiredSize.height*t.pivot.y;break;case"Bottom":n-=t.desiredSize.height}return{x:i,y:n}},e}(dn),km=function(){var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])})(e,t)};return function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),Za=function(s){function e(){var t=s.call(this)||this;return t.imageSource="",t.imageScale="None",t.imageAlign="None",t.stretch="Stretch",t}return km(e,s),Object.defineProperty(e.prototype,"source",{get:function(){return this.imageSource},set:function(t){this.imageSource=t,this.isDirt=!0},enumerable:!0,configurable:!0}),e.prototype.measure=function(t){return this.isDirt&&("Stretch"!==this.stretch||void 0===this.width&&void 0===this.height)&&(this.contentSize=function(s,e){var t="measureElement";window[t].style.visibility="visible";var i=window[t].children[1];i.setAttribute("src",s);var n=i.getBoundingClientRect();return e=new fe(n.width,n.height),window[t].style.visibility="hidden",e}(this.source,this.contentSize),this.isDirt=!1),void 0!==this.width&&void 0!==this.height?(this.desiredSize=new fe(this.width,this.height),this.contentSize=this.desiredSize):this.desiredSize=this.contentSize,this.desiredSize=this.validateDesiredSize(this.desiredSize,t),this.desiredSize},e.prototype.arrange=function(t){return this.actualSize=new fe(this.desiredSize.width,this.desiredSize.height),this.updateBounds(),this.actualSize},e}(mt);function ze(s){var t,e=[],i=function(s){var e=/([a-z]+)|([+-]?(?:\d+\.?\d*|\.\d+))/gi,t=[],i=[],n={};e.lastIndex=0;var o=!1;for(n=e.exec(s);n;)"e"===n[1]?o=!0:n[1]?("zm"===n[1].toLowerCase()?(t.length&&i.push(t),i.push(["Z"]),t=[n[1].substring(1,2)]):(t.length&&i.push(t),t=[n[1]]),o=!1):(t.length||(t=[]),o||t.push(Number(n[2])),o=!1),n=e.exec(s);return t.length&&i.push(t),i}(s);if(i.length>0)for(var n=0;n<i.length;n++){var o=i[n],r="";switch((r=o[0]).toLowerCase()){case"m":for(t=1;t<o.length;t++)e.push({command:r,x:o[t],y:o[t+1]}),t+=1,"m"===r?r="l":"M"===r&&(r="L");break;case"l":case"t":for(t=1;t<o.length;t++)e.push({command:r,x:o[t],y:o[t+1]}),t+=1;break;case"h":for(t=1;t<o.length;t++)e.push({command:r,x:o[t]});break;case"v":for(t=1;t<o.length;t++)e.push({command:r,y:o[t]});break;case"z":e.push({command:r});break;case"c":for(t=1;t<o.length;t++)e.push({command:r,x1:o[t],y1:o[t+1],x2:o[t+2],y2:o[t+3],x:o[t+4],y:o[t+5]}),t+=5;break;case"s":for(t=1;t<o.length;t++)e.push({command:r,x2:o[t],y2:o[t+1],x:o[t+2],y:o[t+3]}),t+=3;break;case"q":for(t=1;t<o.length;t++)e.push({command:r,x1:o[t],y1:o[t+1],x:o[t+2],y:o[t+3]}),t+=3;break;case"a":for(t=1;t<o.length;t++)e.push({command:r,r1:o[t],r2:o[t+1],angle:o[t+2],largeArc:o[t+3],sweep:o[t+4],x:o[t+5],y:o[t+6]}),t+=6}}return e}function jh(s){var e,t,i,n,o,r,l,d,h,p,f=[];for(l=0,d=0,p=0,h=s.length;p<h;++p){var u=s[p];"y1"in u&&(n=u.y1),"y2"in u&&(r=u.y2),"x1"in u&&(i=u.x1),"x2"in u&&(o=u.x2),"x"in u&&(l=u.x),"y"in u&&(d=u.y);var g=f[f.length-1];switch(u.command){case"M":f.push({command:"M",x:l,y:d});break;case"L":f.push({command:"L",x0:e,y0:t,x:l,y:d});break;case"H":f.push({command:"L",x0:e,y0:t,x:l,y:t});break;case"V":f.push({command:"L",x0:e,y0:t,x:e,y:d});break;case"C":f.push({command:"C",x0:e,y0:t,x1:i,y1:n,x2:o,y2:r,x:l,y:d});break;case"S":if(g){var v=void 0;f.push({command:"C",x0:e,y0:t,x1:(y={x:2*e-(v="C"===g.command||"S"===g.command?{x:g.x2,y:g.y2}:{x:e,y:t}).x,y:2*t-v.y}).x,y1:y.y,x2:o,y2:r,x:l,y:d})}break;case"Q":f.push({command:"Q",x0:e,y0:t,x1:i,y1:n,x:l,y:d});break;case"T":var y;if(g)v=void 0,f.push({command:"Q",x0:e,y0:t,x1:(y={x:2*e-(v="Q"===g.command?{x:g.x1,y:g.y1}:{x:e,y:t}).x,y:2*t-v.y}).x,y1:y.y,x:l,y:d});break;case"A":var b=u;b.command="A",f.push(b);break;case"Z":case"z":f.push({command:"Z"}),l=e,d=t}e=l,t=d}return f}function Em(s,e,t,i,n,o){switch(e){case"M":case"L":case"T":s.x=t.x,s.y=t.y;break;case"H":s.x=t.x;break;case"V":s.y=t.y;break;case"C":s.x=t.x,s.y=t.y,s.x1=t.x1,s.y1=t.y1,s.x2=t.x2,s.y2=t.y2;break;case"S":s.x=t.x,s.y=t.y,s.x2=t.x2,s.y2=t.y2;break;case"Q":s.x=t.x,s.y=t.y,s.x1=t.x1,s.y1=t.y1;break;case"A":var r=t.r1,l=t.r2;i&&(t.r1=r*=n,t.r2=l*=o),s.x=t.x,s.y=t.y,s.r1=t.r1,s.r2=t.r2;break;case"z":case"Z":s={command:"Z"}}return s}function Rn(s,e,t,i){return s!==t?s=i!==t?s*e-(Number(t)*e-Number(t))+(i-Number(t)):Number(s)*e-(Number(t)*e-Number(t)):i!==t&&(s=i),Number(s.toFixed(2))}function gt(s){var e,t,i,n,o,r,l,d,h,p;for(l=0,d=0,p=0,h=s.length;p<h;++p){var c=s[p],u=c.command;if(/[MLHVCSQTA]/.test(u))"x"in c&&(c.x=l=c.x),"y"in c&&(c.y=d=c.y);else{"x1"in c&&(c.x1=i=l+c.x1),"x2"in c&&(c.x2=o=l+c.x2),"y1"in c&&(c.y1=n=d+c.y1),"y2"in c&&(c.y2=r=d+c.y2),"x"in c&&(c.x=l+=c.x),"y"in c&&(c.y=d+=c.y);var m=void 0;switch(u){case"m":case"M":m={command:"M",x:l,y:d};break;case"l":case"L":m={command:"L",x:l,y:d};break;case"h":case"H":m={command:"H",x:l};break;case"v":case"V":m={command:"V",y:d};break;case"c":case"C":m={command:"C",x:l,y:d,x1:i,y1:n,x2:o,y2:r};break;case"s":case"S":m={command:"S",x:l,y:d,x2:o,y2:r};break;case"q":case"Q":m={command:"Q",x:l,y:d,x1:i,y1:n};break;case"t":case"T":m={command:"T",x:l,y:d};break;case"a":case"A":(m={command:"A",x:l,y:d}).r1=c.r1,m.r2=c.r2,m.angle=c.angle,m.largeArc=c.largeArc,m.sweep=c.sweep;break;case"z":case"Z":m={command:"Z"},l=e,d=t,m=s[p]}m&&(s[p]=m)}("M"===u||"m"===u)&&(e=l,t=d)}return s}function Gt(s){var t,e="";for(t=0;t<s.length;t++)e+=0===t?Gh(s[t]):" "+Gh(s[t]);return e}function Gh(s){var e="";switch(s.command){case"Z":case"z":e=s.command;break;case"M":case"m":case"L":case"l":case"T":case"t":e=s.command+" "+s.x+" "+s.y;break;case"C":case"c":e=s.command+" "+s.x1+" "+s.y1+" "+s.x2+" "+s.y2+" "+s.x+" "+s.y;break;case"Q":case"q":e=s.command+" "+s.x1+" "+s.y1+" "+s.x+" "+s.y;break;case"A":case"a":e=s.command+" "+s.r1+" "+s.r2+" "+s.angle+" "+(s.largeArc?"1":"0")+" "+(s.sweep?"1":"0")+" "+s.x+" "+s.y;break;case"H":case"h":e=s.command+" "+s.x;break;case"V":case"v":e=s.command+" "+s.y;break;case"S":case"s":e=s.command+" "+s.x2+" "+s.y2+" "+s.x+" "+s.y}return e}var Pm=function(){var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])})(e,t)};return function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),He=function(s){function e(){var t=s.call(this)||this;return t.pathData="",t.transformPath=!0,t.absolutePath="",t.canMeasurePath=!1,t.absoluteBounds=new de,t}return Pm(e,s),Object.defineProperty(e.prototype,"data",{get:function(){return this.pathData},set:function(t){this.pathData!==t&&(this.pathData=t,this.isDirt=!0)},enumerable:!0,configurable:!0}),e.prototype.measure=function(t){return this.staticSize&&void 0!==this.width&&void 0!==this.height?this.absoluteBounds=new de(this.offsetX-this.width*this.pivot.x,this.offsetY-this.height*this.pivot.y,this.width,this.height):(this.isDirt&&(this.transformPath||void 0===this.width||void 0===this.height)&&(!this.absoluteBounds||0===this.absoluteBounds.height)||this.canMeasurePath)&&(this.absoluteBounds=function(s){var e="pathTable";if(window[e]||(window[e]={}),s){var t="measureElement";window[t].style.visibility="visible";var n=Zh(window[t].children[2])[0];n.setAttribute("d",s);var o=void 0;window[e][s]?o=window[e][s]:(window[e][s]=o=n.getBBox(),(0===o.x||0===o.y)&&(0===o.width||0===o.height)&&(window[e][s]=o=function(s){var o,e=0,t=0,i=0,n=0,r=s;r=r.replace(/[a-z].*/g," ").replace(/[\sA-Z]+/gi," ").trim().split(" ");for(var l=0;l<r.length;l++)r[l].length>1&&(e=t=(o=r[l].split(","))[0],i=n=o[1]);for(l=0;l<r.length;l++)(o=r[l].split(","))[1]||(o[0]=e,o[1]=i),e=Math.min(e,o[0]),t=Math.max(t,o[0]),i=Math.min(i,o[1]),n=Math.max(n,o[1]);return{x:e,y:i,width:t-e,height:n-i}}(s)));var r=new de(o.x,o.y,o.width,o.height);return window[t].style.visibility="hidden",r}return new de(0,0,0,0)}(this.data?this.data:"")),this.desiredSize=void 0===this.width?new fe(this.absoluteBounds.width,this.height||this.absoluteBounds.height):void 0===this.height?new fe(this.width||this.absoluteBounds.width,this.absoluteBounds.height):new fe(this.width,this.height),this.desiredSize=this.validateDesiredSize(this.desiredSize,t),this.canMeasurePath=!1,this.desiredSize},e.prototype.arrange=function(t){return(this.isDirt||this.actualSize.width!==t.width||this.actualSize.height!==t.height)&&(this.isDirt=!0,this.absolutePath=this.updatePath(this.data,this.absoluteBounds,t),this.staticSize||(this.points=null)),this.actualSize=this.desiredSize,this.updateBounds(),this.isDirt=!1,this.actualSize},e.prototype.updatePath=function(t,i,n){var r,o=!1,l=-i.x,d=-i.y,h=[];return(n.width!==i.width||n.height!==i.height)&&(l=n.width/Number(i.width?i.width:1),d=n.height/Number(i.height?i.height:1),o=!0),h=gt(h=ze(t)),r=(o||this.isDirt)&&this.transformPath?function(s,e,t,i,n,o,r,l){var d,h,p,f,c,u,m,g,v;for(c=0,u=0,g=0,m=s.length;g<m;++g){var b=s[g],C=b.command;"x"in b&&(c=b.x),"y"in b&&(u=b.y),"y1"in b&&(h=b.y1),"y2"in b&&(f=b.y2),"x1"in b&&(d=b.x1),"x2"in b&&(p=b.x2),i?(void 0!==c&&(c=Rn(c,e,n,0)),void 0!==u&&(u=Rn(u,t,o,0)),void 0!==d&&(d=Rn(d,e,n,0)),void 0!==h&&(h=Rn(h,t,o,0)),void 0!==p&&(p=Rn(p,e,n,0)),void 0!==f&&(f=Rn(f,t,o,0))):(void 0!==c&&(c=Number((c+e).toFixed(2))),void 0!==u&&(u=Number((u+t).toFixed(2))),void 0!==d&&(d=Number((d+e).toFixed(2))),void 0!==h&&(h=Number((h+t).toFixed(2))),void 0!==p&&(p=Number((p+e).toFixed(2))),void 0!==f&&(f=Number((f+t).toFixed(2)))),(v=Em(b,C,{x:c,y:u,x1:d,y1:h,x2:p,y2:f,r1:b.r1,r2:b.r2},i,e,t))&&(s[g]=v)}return Gt(s)}(h,l,d,o,i.x,i.y):Gt(h),o=!1,r},e}(mt),Dm=function(){var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])})(e,t)};return function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),Jh=function(s,e,t,i){var r,n=arguments.length,o=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(s,e,t,i);else for(var l=s.length-1;l>=0;l--)(r=s[l])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},se=function(s){function e(){return null!==s&&s.apply(this,arguments)||this}return Dm(e,s),e.equals=function(t,i){return t===i||!(!t||!i)&&(!t||!i||t.x===i.x&&t.y===i.y)},e.isEmptyPoint=function(t){return!(t.x&&t.y)},e.transform=function(t,i,n){var o={x:0,y:0};return o.x=Math.round(100*(t.x+n*Math.cos(i*Math.PI/180)))/100,o.y=Math.round(100*(t.y+n*Math.sin(i*Math.PI/180)))/100,o},e.findLength=function(t,i){return Math.sqrt(Math.pow(t.x-i.x,2)+Math.pow(t.y-i.y,2))},e.findAngle=function(t,i){var n=Math.atan2(i.y-t.y,i.x-t.x);return n=180*n/Math.PI,(n%=360)<0&&(n+=360),n},e.distancePoints=function(t,i){return Math.sqrt(Math.pow(i.x-t.x,2)+Math.pow(i.y-t.y,2))},e.getLengthFromListOfPoints=function(t){for(var i=0,n=0;n<t.length-1;n++)i+=this.distancePoints(t[n],t[n+1]);return i},e.adjustPoint=function(t,i,n,o){var l,r=n?{x:t.x,y:t.y}:{x:i.x,y:i.y};return t.x===i.x?t.y<i.y&&n||t.y>i.y&&!n?r.y+=o:r.y-=o:t.y===i.y?t.x<i.x&&n||t.x>i.x&&!n?r.x+=o:r.x-=o:n?(l=this.findAngle(t,i),r=this.transform(t,l,o)):(l=this.findAngle(i,t),r=this.transform(i,l,o)),r},e.direction=function(t,i){return Math.abs(i.x-t.x)>Math.abs(i.y-t.y)?t.x<i.x?"Right":"Left":t.y<i.y?"Bottom":"Top"},e.prototype.getClassName=function(){return"Point"},Jh([(0,a.Z9)(0)],e.prototype,"x",void 0),Jh([(0,a.Z9)(0)],e.prototype,"y",void 0),e}(a.rt),Qh=function(){function s(){}return s.getContext=function(e){return e.getContext("2d")},s.prototype.setStyle=function(e,t){var i=s.getContext(e);"none"===t.fill&&(t.fill="transparent"),"none"===t.stroke&&(t.stroke="transparent"),i.strokeStyle=t.stroke,i.lineWidth=t.strokeWidth,0===t.strokeWidth&&(i.strokeStyle="transparent"),i.globalAlpha=t.opacity;var n=[];t.dashArray&&(n=this.parseDashArray(t.dashArray)),i.setLineDash(n),i.fillStyle=t.fill},s.prototype.rotateContext=function(e,t,i,n){var o=s.getContext(e);o.translate(i,n),o.rotate(t*Math.PI/180),o.translate(-i,-n)},s.prototype.setFontStyle=function(e,t){var i=s.getContext(e),n="";t.italic&&(n+="italic "),t.bold&&(n+="bold "),n+=t.fontSize+"px ",i.font=n+=t.fontFamily},s.prototype.parseDashArray=function(e){for(var t=[],i=-1!==e.indexOf(" ")?" ":",",o=0,r=e.split(i);o<r.length;o++)t.push(Number(r[o]));return t},s.prototype.drawRectangle=function(e,t){if(!0===t.visible)if(t.cornerRadius)t.data=function(s,e,t){var h,p,f,o="",r=[{x:0+s,y:0},{x:0+t-s,y:0},{x:0+t,y:0+s},{x:0+t,y:0+e-s},{x:0+t-s,y:0+e},{x:0+s,y:0+e},{x:0,y:0+e-s},{x:0,y:0+s}],l=[{x:0+t,y:0},{x:0+t,y:0+e},{x:0,y:0+e},{x:0,y:0}],d=0;for(o="M"+r[0].x+" "+r[0].y,f=0;f<r.length;f+=2)o+="L"+(h=r[f+1]).x+" "+h.y,o+="Q"+l[d].x+" "+l[d].y+" "+(p=r[f+2]||r[0]).x+" "+p.y,d++;return o}(t.cornerRadius,t.height,t.width),this.drawPath(e,t);else{var i=s.getContext(e);i.save(),i.beginPath(),this.rotateContext(e,t.angle,t.x+t.width*t.pivotX,t.y+t.height*t.pivotY),this.setStyle(e,t),i.rect(t.x,t.y,t.width,t.height),i.fillRect(t.x,t.y,t.width,t.height),i.fill(),i.stroke(),i.closePath(),i.restore()}},s.prototype.drawPath=function(e,t){var i=[];i=jh(i=ze(t.data));var n=s.getContext(e);n.save(),n.beginPath(),this.rotateContext(e,t.angle,t.x+t.width*t.pivotX,t.y+t.height*t.pivotY),this.setStyle(e,t),n.translate(t.x,t.y),this.renderPath(e,t,i),n.fill(),n.translate(-t.x,-t.y),n.stroke(),n.restore()},s.prototype.renderPath=function(e,t,i){if(!0===t.visible){var u,n=s.getContext(e),o=void 0,r=void 0,l=void 0,d=void 0,h=void 0,p=void 0,f=void 0,c=void 0,m=void 0,g=i;for(f=0,c=0,m=0,u=g.length;m<u;++m){var y=g[m];switch("x1"in y&&(l=y.x1),"x2"in y&&(h=y.x2),"y1"in y&&(d=y.y1),"y2"in y&&(p=y.y2),"x"in y&&(f=y.x),"y"in y&&(c=y.y),y.command){case"M":n.moveTo(f,c),y.x=f,y.y=c;break;case"L":n.lineTo(f,c),y.x=f,y.y=c;break;case"C":n.bezierCurveTo(l,d,h,p,f,c),y.x=f,y.y=c,y.x1=l,y.y1=d,y.x2=h,y.y2=p;break;case"Q":n.quadraticCurveTo(l,d,f,c),y.x=f,y.y=c,y.x1=l,y.y1=d;break;case"A":var C={x:o,y:r},S=y.r1,x=y.r2,V=y.angle*(Math.PI/180),T=y.largeArc,k=y.sweep,A={x:f,y:c},M={x:Math.cos(V)*(C.x-A.x)/2+Math.sin(V)*(C.y-A.y)/2,y:-Math.sin(V)*(C.x-A.x)/2+Math.cos(V)*(C.y-A.y)/2},I=Math.pow(M.x,2)/Math.pow(S,2)+Math.pow(M.y,2)/Math.pow(x,2);I>1&&(S*=Math.sqrt(I),x*=Math.sqrt(I));var B=Math.pow(x,2)*Math.pow(M.x,2),N=(T===k?-1:1)*Math.sqrt((Math.pow(S,2)*Math.pow(x,2)-Math.pow(S,2)*Math.pow(M.y,2)-B)/(Math.pow(S,2)*Math.pow(M.y,2)+Math.pow(x,2)*Math.pow(M.x,2)));isNaN(N)&&(N=0);var D={x:N*S*M.y/x,y:N*-x*M.x/S},Z={x:(C.x+A.x)/2+Math.cos(V)*D.x-Math.sin(V)*D.y,y:(C.y+A.y)/2+Math.sin(V)*D.x+Math.cos(V)*D.y},O=this.a([1,0],[(M.x-D.x)/S,(M.y-D.y)/x]),H=[(M.x-D.x)/S,(M.y-D.y)/x],$=[(-M.x-D.x)/S,(-M.y-D.y)/x],me=this.a(H,$);if(this.r(H,$)<=-1&&(me=Math.PI),this.r(H,$)>=1&&(me=0),y.centp=Z,y.xAxisRotation=V,y.rx=S,y.ry=x,y.a1=O,y.ad=me,y.sweep=k,null!=n){var W=S>x?S:x,Te=S>x?1:S/x,ke=S>x?x/S:1;n.save(),n.translate(Z.x,Z.y),n.rotate(V),n.scale(Te,ke),n.arc(0,0,W,O,O+me,!k),n.scale(1/Te,1/ke),n.rotate(-V),n.translate(-Z.x,-Z.y),n.restore()}break;case"Z":case"z":n.closePath(),f=o,c=r}o=f,r=c}}},s.prototype.drawText=function(e,t){if(t.content&&!0===t.visible){var i=s.getContext(e);i.save(),this.setStyle(e,t),this.rotateContext(e,t.angle,t.x+t.width*t.pivotX,t.y+t.height*t.pivotY),this.setFontStyle(e,t);var l,r=0;l=t.childNodes;var d=t.wrapBounds;if(i.fillStyle=t.color,d){var h=this.labelAlign(t,d,l);for(r=0;r<l.length;r++){var p=l[r],f=h.x+p.x-d.x,c=h.y+p.dy*r+.8*t.fontSize;if(i.fillText(p.text,f,c),"Underline"===t.textDecoration||"Overline"===t.textDecoration||"LineThrough"===t.textDecoration){var u=f,m=void 0,v=f+i.measureText(p.text).width,y=void 0;switch(t.textDecoration){case"Underline":m=c+2,y=c+2;break;case"Overline":m=h.y+p.dy*r,y=h.y+p.dy*r;break;case"LineThrough":m=(c+h.y+p.dy*r)/2+2,y=(c+h.y+p.dy*r)/2+2}i.beginPath(),i.moveTo(u,m),i.lineTo(v,y),i.strokeStyle=t.color,i.lineWidth=.08*t.fontSize,i.globalAlpha=t.opacity,i.stroke()}}}i.restore()}},s.prototype.m=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2))},s.prototype.r=function(e,t){return(e[0]*t[0]+e[1]*t[1])/(this.m(e)*this.m(t))},s.prototype.a=function(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(this.r(e,t))},s.prototype.getMeetOffset=function(e,t,i){var n=Math.max(t,i),o=Math.min(t,i);switch(e){case"min":default:return 0;case"mid":return(n-o)/2;case"max":return n-o}},s.prototype.getSliceOffset=function(e,t,i,n){switch(e){case"min":default:return 0;case"mid":return(t-i)/2*n/t;case"max":return(t-i)*n/t}},s.prototype.image=function(e,t,i,n,o,r,l){e.beginPath();var d=t.width,h=t.height,p=o,f=r,c=0,u=0;if(e.globalAlpha=l.opacity,l&&"None"!==l.alignment){var m=l.alignment.toLowerCase().substr(1,3),g=l.alignment.toLowerCase().substr(5,3);if("Slice"===l.scale){var v=function(){c=p,u=h*p/d},y=function(){c=d*f/h,u=f};p>f?(v(),f>u&&y()):p===f?d>h?y():v():(y(),p>c&&v());var b=this.getSliceOffset(m,c,p,d),C=this.getSliceOffset(g,u,f,h),S=d-b,x=h-C,V=c-b*(c/d),T=u-C*(u/h),k=So("canvas",{width:o.toString(),height:r.toString()});k.getContext("2d").drawImage(t,b,C,S,x,0,0,V,T),e.drawImage(k,i,n,o,r)}else if("Meet"===l.scale){var M=h/d,I=f/p;u=I>M?p*M:f,i+=this.getMeetOffset(m,c=I>M?p:f/M,p),n+=this.getMeetOffset(g,u,f),e.drawImage(t,0,0,d,h,i,n,c,u)}else e.drawImage(t,i,n,o,r)}else if(t.complete)e.drawImage(t,i,n,o,r);else{var B=e.getTransform();t.onload=function(){e.setTransform(B.a,B.b,B.c,B.d,B.e,B.f),e.drawImage(t,i,n,o,r)}}e.closePath()},s.prototype.loadImage=function(e,t,i,n,o){this.rotateContext(i,t.angle,n,o);var r=new Image;r.src=t.source,this.image(e,r,t.x,t.y,t.width,t.height,t)},s.prototype.drawImage=function(e,t,i,n){var o=this;if(t.visible){var r=s.getContext(e);r.save();var l=t.x+t.width*t.pivotX,d=t.y+t.height*t.pivotY,h=new Image;h.src=t.source,r.canvas.id.split("_"),n?h.onload=function(){o.loadImage(r,t,e,l,d)}:this.loadImage(r,t,e,l,d),r.restore()}},s.prototype.labelAlign=function(e,t,i){var n=new fe(t.width,i.length*(1.2*e.fontSize)),o={x:0,y:0},l=e.y,p=.5*e.width,f=.5*e.height;return"left"===e.textAlign?p=0:"center"===e.textAlign?p=t.width>e.width&&("Ellipsis"===e.textOverflow||"Clip"===e.textOverflow)?0:.5*e.width:"right"===e.textAlign&&(p=1*e.width),o.x=e.x+p+(t?t.x:0),o.y=l+f-n.height/2,o},s}();function Kh(s,e,t){for(var i=0;i<e.length;i++)t.renderElement(e[i],s,void 0)}var Bm=function(){function s(e,t){this.renderer=null,this.isSvgMode=!0,this.diagramId=e,this.element=ln(this.diagramId),this.isSvgMode=t,this.renderer=new Qh}return s.prototype.renderElement=function(e,t,i,n,o,r,l,d){e instanceof dn?this.renderContainer(e,t,i,n,o,r,l,d):e instanceof Za?this.renderImageElement(e,t,n,o,l):e instanceof He?this.renderPathElement(e,t,n,o,l):e instanceof Oe?this.renderTextElement(e,t,n,o,l):this.renderRect(e,t,n,o)},s.prototype.renderImageElement=function(e,t,i,n,o){var l,d,h,p,r=this.getBaseAttributes(e,i);if(r.cornerRadius=0,this.renderer.drawRectangle(t,r),"Stretch"===e.stretch)l=e.actualSize.width,d=e.actualSize.height;else{var f=e.contentSize.width,c=e.contentSize.height,u=r.width/f,m=r.height/c,g=void 0;switch(e.stretch){case"Meet":l=f*(g=Math.min(u,m)),d=c*g,r.x+=Math.abs(r.width-l)/2,r.y+=Math.abs(r.height-d)/2;break;case"Slice":u=r.width/f,m=r.height/c,g=Math.max(u,m),h=r.width/(l=f*g)*f,p=r.height/(d=c*g)*c;break;case"None":l=f,d=c}}r.width=l,r.height=d,r.sourceWidth=h,r.sourceHeight=p,r.source=e.source,r.alignment=e.imageAlign,r.scale=e.imageScale,this.renderer.drawImage(t,r,n,o)},s.prototype.renderPathElement=function(e,t,i,n,o){var r=this.getBaseAttributes(e,i);r.data=e.absolutePath,r.data=e.absolutePath,this.isSvgMode||(r.x=r.x,r.y=r.y),this.renderer.drawPath(t,r)},s.prototype.renderTextElement=function(e,t,i,n,o){var r=this.getBaseAttributes(e,i);r.cornerRadius=0,r.whiteSpace=Yh(e.style.whiteSpace,e.style.textWrapping),r.content=e.content,r.breakWord=Uh(e.style.textWrapping),r.textAlign=Wh(e.style.textAlign),r.color=e.style.color,r.italic=e.style.italic,r.bold=e.style.bold,r.fontSize=e.style.fontSize,r.fontFamily=e.style.fontFamily,r.textOverflow=e.style.textOverflow,r.textDecoration=e.style.textDecoration,r.doWrap=e.doWrap,r.wrapBounds=e.wrapBounds,r.childNodes=e.childNodes,r.dashArray="",r.strokeWidth=0,r.fill=e.style.fill,this.renderer.drawRectangle(t,r),this.renderer.drawText(t,r)},s.prototype.renderContainer=function(e,t,i,n,o,r,l,d){if(this.renderRect(e,t,n={tx:0,ty:0,scale:1},o),e.hasChildren())for(var p=0,f=e.children;p<f.length;p++)this.renderElement(f[p],t,i,n,o,!0,l,d)},s.prototype.renderRect=function(e,t,i,n){var o=this.getBaseAttributes(e,i);o.cornerRadius=e.cornerRadius||0,this.renderer.drawRectangle(t,o)},s.prototype.getBaseAttributes=function(e,t){var i={width:e.actualSize.width,height:e.actualSize.height,x:e.offsetX-e.actualSize.width*e.pivot.x+.5,y:e.offsetY-e.actualSize.height*e.pivot.y+.5,fill:e.style.fill,stroke:e.style.strokeColor,angle:e.rotateAngle+e.parentTransform,pivotX:e.pivot.x,pivotY:e.pivot.y,strokeWidth:e.style.strokeWidth,dashArray:e.style.strokeDashArray||"",opacity:e.style.opacity,visible:e.visible,id:e.id,gradient:e.style.gradient};return t&&(i.x+=t.tx,i.y+=t.ty),i},s}(),Fm=function(){function s(){}return s.prototype.parseDashArray=function(e){return[]},s.prototype.drawRectangle=function(e,t,i,n,o,r,l){var d,h;d=t.id===e.id?t.id+"_container":t.id,(!h||o)&&(h=document.createElementNS("http://www.w3.org/2000/svg","rect"),e.appendChild(h));var p={id:d,x:t.x.toString(),y:t.y.toString(),width:t.width.toString(),height:t.height.toString(),visibility:t.visible?"visible":"hidden",transform:"rotate("+t.angle+","+(t.x+t.width*t.pivotX)+","+(t.y+t.height*t.pivotY)+")",rx:t.cornerRadius||0,ry:t.cornerRadius||0,opacity:t.opacity,"aria-label":l||""};t.class&&(p.class=t.class),l||(p["pointer-events"]="none"),ci(h,p),this.setSvgStyle(h,t,i)},s.prototype.updateSelectionRegion=function(e,t){var i,n;i=e.parentNode.getElementById(t.id),n={id:t.id,x:t.x.toString(),y:t.y.toString(),width:t.width.toString(),height:t.height.toString(),transform:"rotate("+t.angle+","+(t.x+t.width*t.pivotX)+","+(t.y+t.height*t.pivotY)+")",class:"e-diagram-selected-region"},i||(i=document.createElementNS("http://www.w3.org/2000/svg","rect"),e.appendChild(i)),this.setSvgStyle(i,t),ci(i,n)},s.prototype.createGElement=function(e,t){return Wa(e,t)},s.prototype.drawCircle=function(e,t,i,n){var o=document.createElementNS("http://www.w3.org/2000/svg","circle");this.setSvgStyle(o,t);var r=t.class||"";i||(r+=" e-disabled");var l={id:t.id,cx:t.centerX,cy:t.centerY,r:t.radius,visibility:t.visible?"visible":"hidden",class:r,"aria-label":n?n["aria-label"]:""};""===l["aria-label"]&&(l["pointer-events"]="none"),o.style.display=t.visible?"block":"none",ci(o,l),e.appendChild(o)},s.prototype.setSvgStyle=function(e,t,i){if(t.canApplyStyle||void 0===t.canApplyStyle){"none"===t.fill&&(t.fill="transparent"),"none"===t.stroke&&(t.stroke="transparent");var o,n=[];void 0!==t.dashArray&&(n=(new Qh).parseDashArray(t.dashArray)),o=t.fill,t.stroke&&e.setAttribute("stroke",t.stroke),null!=t.strokeWidth&&e.setAttribute("stroke-width",t.strokeWidth.toString()),n&&e.setAttribute("stroke-dasharray",n.toString()),o&&e.setAttribute("fill",o)}},s.prototype.svgLabelAlign=function(e,t,i){var n=new fe(t.width,i.length*(1.2*e.fontSize)),o={x:0,y:0},p=.5*e.width,f=.5*e.height;return"left"===e.textAlign?p=0:"center"===e.textAlign?p=t.width>e.width&&("Ellipsis"===e.textOverflow||"Clip"===e.textOverflow)?0:.5*e.width:"right"===e.textAlign&&(p=1*e.width),o.x=0+p+(t?t.x:0),o.y=1.2+f-n.height/2,o},s.prototype.drawLine=function(e,t){var i=document.createElementNS("http://www.w3.org/2000/svg","line");this.setSvgStyle(i,t);var n=t.x+t.width*t.pivotX,o=t.y+t.height*t.pivotY,r={id:t.id,x1:t.startPoint.x+t.x,y1:t.startPoint.y+t.y,x2:t.endPoint.x+t.x,y2:t.endPoint.y+t.y,stroke:t.stroke,"stroke-width":t.strokeWidth.toString(),opacity:t.opacity.toString(),transform:"rotate("+t.angle+" "+n+" "+o+")",visibility:t.visible?"visible":"hidden"};t.class&&(r.class=t.class),ci(i,r),e.appendChild(i)},s.prototype.drawPath=function(e,t,i,n,o,r){Math.floor(10*Math.random()+1).toString();var p,f,h=[];h=jh(h=ze(t.data)),o&&(p=o.getElementById(t.id+"_groupElement_shadow"))&&p.parentNode.removeChild(p),o&&(f=o.getElementById(t.id)),(!f||n)&&(f=document.createElementNS("http://www.w3.org/2000/svg","path"),e.appendChild(f)),this.renderPath(f,t,h);var c={id:t.id,transform:"rotate("+t.angle+","+(t.x+t.width*t.pivotX)+","+(t.y+t.height*t.pivotY)+")translate("+t.x+","+t.y+")",visibility:t.visible?"visible":"hidden",opacity:t.opacity,"aria-label":r||""};t.class&&(c.class=t.class),ci(f,c),this.setSvgStyle(f,t,i)},s.prototype.renderPath=function(e,t,i){var n,o,r,l,d,h,p,f,c=i,u="";for(d=0,h=0,f=0,p=c.length;f<p;++f){var g=c[f];switch("x1"in g&&(n=g.x1),"x2"in g&&(r=g.x2),"y1"in g&&(o=g.y1),"y2"in g&&(l=g.y2),"x"in g&&(d=g.x),"y"in g&&(h=g.y),g.command){case"M":u=u+"M"+d.toString()+","+h.toString()+" ";break;case"L":u=u+"L"+d.toString()+","+h.toString()+" ";break;case"C":u=u+"C"+n.toString()+","+o.toString()+","+r.toString()+","+l.toString()+",",u+=d.toString()+","+h.toString()+" ";break;case"Q":u=u+"Q"+n.toString()+","+o.toString()+","+d.toString()+","+h.toString()+" ";break;case"A":u=u+"A"+g.r1.toString()+","+g.r2.toString()+","+g.angle.toString()+",",u+=g.largeArc.toString()+","+g.sweep+","+d.toString()+","+h.toString()+" ";break;case"Z":case"z":u+="Z "}}e.setAttribute("d",u)},s}();function ci(s,e){for(var t=Object.keys(e),i=0;i<t.length;i++)s.setAttribute(t[i],e[t[i]])}function Wa(s,e){var t=document.createElementNS("http://www.w3.org/2000/svg",s);return ci(t,e),t}function $h(s,e){var t={x:0,y:0},i=s,o=(e.y2-e.y1)*(i.x2-i.x1)-(e.x2-e.x1)*(i.y2-i.y1);if(0===o)return{enabled:!1,intersectPt:t};var d=((e.x2-e.x1)*(i.y1-e.y1)-(e.y2-e.y1)*(i.x1-e.x1))/o,h=((i.x2-i.x1)*(i.y1-e.y1)-(i.y2-i.y1)*(i.x1-e.x1))/o;return d>=0&&d<=1&&h>=0&&h<=1?(t.x=i.x1+d*(i.x2-i.x1),t.y=i.y1+d*(i.y2-i.y1),{enabled:!0,intersectPt:t}):{enabled:!1,intersectPt:t}}function kt(s,e,t){return s.x>=e.x-t&&s.x<=e.x+t&&s.y>=e.y-t&&s.y<=e.y+t}var G=Fe(3773),j=Fe(8760),Le=Fe(4811),z=Fe(310),le=Fe(1355),Hs=Fe(7409),vt=Fe(1155),re=Fe(8386),pp=Fe(707);Fe(1983);var Pi=new a.eC;function Ps(s,e,t){if((0,a.le)(e)||""===e)return"";var i,n;switch(s){case"Color":var o=e;i=o.length>7?o.slice(0,-2):o;break;case"Date":i=Pi.formatDate(e,{format:n=t.format,type:s,skeleton:(0,a.xr)()?"d":"yMd"});break;case"DateRange":var r=e;i=Pi.formatDate(r[0],{format:n=t.format,type:s,skeleton:(0,a.xr)()?"d":"yMd"})+" - "+Pi.formatDate(r[1],{format:n,type:s,skeleton:(0,a.xr)()?"d":"yMd"});break;case"DateTime":i=(0,a.le)(n=t.format)||""===n?Pi.formatDate(e,{format:n,type:s,skeleton:(0,a.xr)()?"d":"yMd"})+" "+Pi.formatDate(e,{format:n,type:s,skeleton:(0,a.xr)()?"t":"hm"}):Pi.formatDate(e,{format:n,type:s,skeleton:(0,a.xr)()?"d":"yMd"});break;case"Time":i=Pi.formatDate(e,{format:n=t.format,type:s,skeleton:(0,a.xr)()?"t":"hm"});break;case"Numeric":n=(0,a.le)(t.format)?"n2":t.format;var l=(0,a.le)(e)?null:"number"==typeof e?e:Pi.parseNumber(e);i=Pi.formatNumber(l,{format:n});break;default:i=e.toString()}return i}function pu(s,e){if((0,a.le)(e)||""===e)return e;if("Date"!==s&&"Time"!==s&&"DateTime"!==s||"string"!=typeof e){if("DateRange"===s)if("object"==typeof e&&"string"==typeof e[0])e=[new Date(e[0]),new Date(e[1])];else if("string"==typeof e){var t=e.split("-");e=[new Date(t[0]),new Date(t[1])]}}else e=new Date(e);return e}var Au,ua="set-focus",Pw=function(){var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])})(e,t)};return function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),fu=function(s,e,t,i){var r,n=arguments.length,o=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(s,e,t,i);else for(var l=s.length-1;l>=0;l--)(r=s[l])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},Dw=function(s){function e(){return null!==s&&s.apply(this,arguments)||this}return Pw(e,s),fu([(0,a.Z9)("")],e.prototype,"title",void 0),fu([(0,a.Z9)(null)],e.prototype,"model",void 0),e}(a.rt),cu={AutoComplete:"auto-complete",Color:"color-picker",ComboBox:"combo-box",DateRange:"date-range-picker",MultiSelect:"multi-select",RTE:"rte",Slider:"slider",Time:"time-picker"},uu={Click:{editAreaClick:"Click to edit"},DblClick:{editAreaDoubleClick:"Double click to edit"},EditIconClick:{editAreaClick:"Click to edit"}},mu="e-inplaceeditor",dh="e-inplaceeditor-tip",hh="e-editable-value-wrapper",gu="e-editable-inline",ma="e-editable-component",ph="e-editable-error",mo="e-editable-elements",ga="e-editable-open",vu="e-btn-save",yu="e-btn-cancel",wu="e-rte-spin-wrap",bu="e-control-overlay",va="e-disable",on="e-hide",fh="e-rtl",ya="e-error",wa="e-loading",Uw=function(){var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])})(e,t)};return function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),ie=function(s,e,t,i){var r,n=arguments.length,o=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(s,e,t,i);else for(var l=s.length-1;l>=0;l--)(r=s[l])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},go=function(s){function e(t,i){var n=s.call(this,t,i)||this;return n.needsID=!0,n}return Uw(e,s),e.prototype.initializeValue=function(){this.initRender=!0,this.isTemplate=!1,this.isVue=!1,this.isExtModule=!1,this.submitBtn=void 0,this.cancelBtn=void 0,this.isClearTarget=!1,this.btnElements=void 0,this.dataManager=void 0,this.oldValue=void 0,this.divComponents=["RTE","Slider"],this.clearComponents=["AutoComplete","Mask","Text"],this.dateType=["Date","DateTime","Time"],this.inputDataEle=["Date","DateTime","DateRange","Time","Numeric"],this.dropDownEle=["AutoComplete","ComboBox","DropDownList","MultiSelect"],this.moduleList=["AutoComplete","Color","ComboBox","DateRange","MultiSelect","RTE","Slider","Time"]},e.prototype.preRender=function(){this.initializeValue(),this.onScrollResizeHandler=this.scrollResizeHandler.bind(this),(0,a.le)(this.model)&&this.setProperties({model:{}},!0),this.titleEle=this.createElement("div",{className:"e-editable-title"}),!(0,a.le)(this.popupSettings.model)&&this.popupSettings.model.afterOpen&&(this.afterOpenEvent=this.popupSettings.model.afterOpen)},e.prototype.render=function(){(0,a.le)(this.element.getAttribute("tabindex"))&&this.element.setAttribute("tabindex","0"),this.checkIsTemplate(),this.disable(this.disabled),this.updateAdaptor(),this.appendValueElement(),this.updateValue(),"Never"===this.textOption?this.renderValue(this.checkValue(Ps(this.type,this.value,this.model))):this.renderInitialValue(),this.wireEvents(),this.setRtl(this.enableRtl),this.enableEditor(this.enableEditMode,!0),this.setClass("add",this.cssClass),this.renderComplete()},e.prototype.setClass=function(t,i){if(!this.isEmpty(i))for(var n=i.split(" "),o=0;o<n.length;o++)""!==n[o].trim()&&("add"===t?(0,a.cn)([this.element],[n[o]]):(0,a.IV)([this.element],[n[o]]))},e.prototype.appendValueElement=function(){this.valueWrap=this.createElement("div",{id:this.element.id+"_wrap",className:hh}),(0,a.xr)()||(this.element.innerHTML=""),this.valueEle=this.createElement("span",{className:"e-editable-value"}),this.editIcon=this.createElement("span",{className:"e-editable-overlay-icon e-icons",attrs:{title:this.getLocale({editIcon:"Click to edit"},"editIcon")}}),this.valueWrap.appendChild(this.valueEle),this.valueWrap.appendChild(this.editIcon),this.element.appendChild(this.valueWrap)},e.prototype.renderInitialValue=function(){!(["AutoComplete","ComboBox","DropDownList","MultiSelect"].indexOf(this.type)>-1)||(0,a.le)(this.value)||this.isEmpty(this.value.toString())||(0,a.le)(this.model.fields)||(0,a.le)(this.model.dataSource)?this.renderValue(this.checkValue(Ps(this.type,this.value,this.model))):(this.renderValue(this.getLocale({loadingText:"Loading..."},"loadingText")),this.valueWrap.classList.add(wa),(0,j.rj)({target:this.valueWrap,width:10}),(0,j.yh)(this.valueWrap),this.getInitFieldMapValue())},e.prototype.getInitFieldMapValue=function(){var t=this,i=this.model,n=i.fields.text,o=i.fields.value,r=(0,a.le)(i.query)?new z.AE:i.query;i.dataSource instanceof z.hm?i.dataSource.executeQuery(this.getInitQuery(i,r)).then(function(l){t.updateInitValue(n,o,l.result)}):this.updateInitValue(n,o,new z.hm(i.dataSource).executeLocal(this.getInitQuery(i,r)))},e.prototype.getInitQuery=function(t,i){var n,o=t.fields.value,r=this.value;if("MultiSelect"!==this.type||"object"!=typeof this.value)n=new z.$G(o,"equal",this.value);else for(var l=0,d=0,h=r;d<h.length;d++){var p=h[d];n=0===l?n=new z.$G(o,"equal",p):n.or(o,"equal",p),l++}return i.where(n)},e.prototype.updateInitValue=function(t,i,n){if(!(n.length<=0)){if(1===n.length)this.valueEle.innerHTML=this.checkValue((0,a.NA)((0,a.le)(t)?i:t,n[0]));else{for(var o=[],r=0,l=n;r<l.length;r++){var d=l[r];o.push((0,a.NA)((0,a.le)(t)?i:t,d))}this.valueEle.innerHTML=this.checkValue(o.toString())}(0,j.v3)(this.valueWrap),this.valueWrap.classList.remove(wa)}},e.prototype.renderValue=function(t){this.enableHtmlSanitizer&&"RTE"!==this.type&&"MultiSelect"!==this.type?this.valueEle.innerText=t:this.valueEle.innerHTML=this.enableHtmlParse?t:function(s){for(var e=[],t=s.length-1;t>=0;t--)e.unshift(["&#",s[t].charCodeAt(0),";"].join(""));return e.join("")}(t),"Color"===this.type&&(0,a.V7)(this.valueEle,{color:t}),"Inline"===this.mode&&this.isEditorOpen()&&(0,a.IV)([this.valueWrap],[on])},e.prototype.isEditorOpen=function(){return!(this.isVue&&(this.enableEditMode||!(0,a.le)(this.valueWrap)&&!this.valueWrap.classList.contains(on)&&!this.valueWrap.classList.contains("e-tooltip")))},e.prototype.renderEditor=function(){if(this.prevValue=this.value,this.beginEditArgs={mode:this.mode,cancelFocus:!1,cancel:!1},this.trigger("beginEdit",this.beginEditArgs),!this.beginEditArgs.cancel){var t=void 0,i=(0,a.Ys)("."+hh,this.element);if("EditIconClick"!==this.editableOn&&i.parentElement.removeAttribute("title"),!this.valueWrap.classList.contains(ga)){if("Inline"===this.mode)(0,a.cn)([this.valueWrap],[on]),this.inlineWrapper=this.createElement("div",{className:gu}),this.element.appendChild(this.inlineWrapper),["AutoComplete","ComboBox","DropDownList","MultiSelect"].indexOf(this.type)>-1?this.checkRemoteData(this.model):this.renderAndOpen();else{!(0,a.le)(this.popupSettings.model)&&this.popupSettings.model.afterOpen&&(this.popupSettings.model.afterOpen=this.afterOpenHandler.bind(this));var n=this.createElement("div",{className:"e-editable-popup"});this.isEmpty(this.popupSettings.title)||(this.titleEle.innerHTML=this.popupSettings.title,n.appendChild(this.titleEle)),t={content:n,opensOn:"Custom",enableRtl:this.enableRtl,cssClass:dh,afterOpen:this.afterOpenHandler.bind(this)},n.appendChild(this.renderControl(document.body)),(0,a.l7)(t,this.popupSettings.model,t,!0),this.tipObj=new j.u(t),this.tipObj.appendTo(i),this.tipObj.open(i)}"Ignore"!==this.actionOnBlur&&this.wireDocEvent(),(0,a.cn)([this.valueWrap],[ga]),this.setProperties({enableEditMode:!0},!0),this.isReact&&this.renderReactTemplates()}}},e.prototype.renderAndOpen=function(){this.renderControl(this.inlineWrapper),this.afterOpenHandler(null)},e.prototype.checkRemoteData=function(t){var i=this;t.dataSource instanceof z.hm?(t.dataBound=function(){i.afterOpenHandler(null)},this.renderControl(this.inlineWrapper),((0,a.le)(t.value)&&(0,a.le)(this.value)||t.value===this.value&&!(0,a.le)(t.value)&&0===t.value.length)&&this.showDropDownPopup()):this.renderAndOpen()},e.prototype.showDropDownPopup=function(){"DropDownList"===this.type?(this.model.allowFiltering||this.componentObj.focusIn(),this.componentObj.showPopup()):this.isExtModule&&this.notify("MultiSelect"===this.type?ua:"show-popup",{})},e.prototype.setAttribute=function(t,i){var n=this.name&&0!==this.name.length?this.name:this.element.id;i.forEach(function(o){t.setAttribute(o,"id"===o?n+"_editor":n)})},e.prototype.renderControl=function(t){var i;this.containerEle=this.createElement("div",{className:"e-editable-wrapper"}),this.loader=this.createElement("div",{className:"e-editable-loading"}),this.formEle=this.createElement("form",{className:"e-editable-form"});var n=this.createElement("div",{className:"e-component-group"}),o=this.createElement("div",{className:ma});return t.appendChild(this.containerEle),this.loadSpinner(),this.containerEle.appendChild(this.formEle),this.formEle.appendChild(n),this.isTemplate?this.appendTemplate(o,this.template):(Array.prototype.indexOf.call(this.divComponents,this.type)>-1?(i=this.createElement("div"),this.setAttribute(i,["id"])):(i=this.createElement("input"),this.setAttribute(i,["id","name"])),this.componentRoot=i,o.appendChild(i),o.appendChild(this.loader)),n.appendChild(o),n.appendChild(this.createElement("div",{className:ph})),this.appendButtons(this.formEle),this.isTemplate||this.renderComponent(i),this.removeSpinner(),this.submitOnEnter&&this.wireEditorKeyDownEvent(this.containerEle),this.containerEle},e.prototype.appendButtons=function(t){this.showButtons&&t&&(this.btnElements=this.renderButtons(),t.appendChild(this.btnElements),this.wireBtnEvents())},e.prototype.renderButtons=function(){var t=this.createElement("div",{className:"e-editable-action-buttons"}),i=(0,a.le)(this.saveButton.content)||0===this.saveButton.content.length?"":" e-primary";return this.submitBtn=this.createButtons({constant:"save",type:"submit",container:t,title:{save:"Save"},model:this.saveButton,className:vu+i}),this.cancelBtn=this.createButtons({type:"button",constant:"cancel",title:{cancel:"Cancel"},container:t,model:this.cancelButton,className:yu}),t},e.prototype.createButtons=function(t){var i=void 0;if(Object.keys(t.model).length>0){var n=this.createElement("button",{className:t.className,attrs:{type:t.type,title:"save"==t.constant?(0,a.le)(this.saveButton.content)?this.getLocale(t.title,t.constant):this.saveButton.content:(0,a.le)(this.cancelButton.content)?this.getLocale(t.title,t.constant):this.cancelButton.content}});t.container.appendChild(n),i=new le.zx(t.model,n)}return i},e.prototype.renderComponent=function(t){var i;if(this.isExtModule=Array.prototype.indexOf.call(this.moduleList,this.type)>-1,i=(0,a.le)(this.model.cssClass)?mo:this.model.cssClass.indexOf(mo)<0?""===this.model.cssClass?mo:this.model.cssClass+" "+mo:this.model.cssClass,(0,a.l7)(this.model,this.model,{cssClass:i,enableRtl:this.enableRtl,locale:this.locale,change:this.changeHandler.bind(this)}),(0,a.le)(this.value)||this.updateModelValue(!1),this.isExtModule)this.notify("render",{module:cu[this.type],target:t,type:this.type});else{switch((0,a.le)(this.model.showClearButton)&&!(0,a.xr)()&&(this.model.showClearButton=!0),this.type){case"Date":this.componentObj=new Hs.Mt(this.model);break;case"DateTime":this.componentObj=new Hs.xZ(this.model);break;case"DropDownList":this.componentObj=new vt.NB(this.model);break;case"Mask":this.componentObj=new G.g3(this.model);break;case"Numeric":if(this.model.value){var n=new RegExp("[eE][-+]?([0-9]+)");this.model.value=n.test(this.model.value)?this.model.value:this.model.value.toString().replace(/[`~!@#$%^&*()_|\=?;:'",<>\{\}\[\]\\\/]/gi,"")}this.componentObj=new G.No(this.model);break;case"Text":this.componentObj=new G.zC(this.model)}this.componentObj.appendTo(t)}},e.prototype.updateAdaptor=function(){switch(this.adaptor){case"UrlAdaptor":this.dataAdaptor=new z.lM;break;case"WebApiAdaptor":this.dataAdaptor=new z.jO;break;case"ODataV4Adaptor":this.dataAdaptor=new z.um}},e.prototype.loadSpinner=function(t){(0,a.cn)([this.loader],["e-show"]),"validate"!==t||"RTE"!==this.type&&"Color"!==this.type&&"Slider"!==this.type?this.spinObj={target:this.loader,width:a.AR.isDevice?"16px":"14px"}:((0,a.cn)([this.loader],[wu]),(0,a.cn)([this.getEditElement()],[bu]),this.spinObj={target:this.loader}),this.formEle&&(0,a.cn)([this.formEle],[wa]),this.btnElements&&(0,a.cn)([this.btnElements],[on]),(0,a.V7)(this.loader,{width:"100%"}),(0,j.rj)(this.spinObj),(0,j.yh)(this.spinObj.target)},e.prototype.removeSpinner=function(t){this.loader.removeAttribute("style"),(0,j.v3)(this.spinObj.target),(0,a.og)(this.spinObj.target.firstChild),"submit"===t&&("RTE"===this.type||"Color"===this.type||"Slider"===this.type)&&((0,a.IV)([this.loader],[wu]),(0,a.IV)([this.getEditElement()],[bu])),this.formEle&&(0,a.IV)([this.formEle],[wa]),this.btnElements&&(0,a.IV)([this.btnElements],[on]),(0,a.IV)([this.loader],["e-show"])},e.prototype.getEditElement=function(){return(0,a.Ys)("."+mo,this.formEle)},e.prototype.getLocale=function(t,i){return new a.E7("inplace-editor",t,this.locale).getConstant(i)},e.prototype.checkValue=function(t){return this.isEmpty(t)?this.emptyText:t},e.prototype.extendModelValue=function(t){var i=this.model;(0,a.l7)(i,{value:t}),this.setProperties({model:i},!0)},e.prototype.updateValue=function(){this.oldValue=this.value,this.enableHtmlSanitizer&&"string"==typeof this.value&&(this.oldValue=this.sanitizeHelper(this.value)),(0,a.le)(this.value)||(this.setProperties({value:pu(this.type,this.oldValue)},!0),this.extendModelValue(pu(this.type,this.oldValue)))},e.prototype.updateModelValue=function(t){this.model.value="MultiSelect"!==this.type||this.isEmpty(this.value)?t?this.oldValue:this.value:t?this.oldValue.slice():this.value.slice()},e.prototype.setValue=function(){this.isExtModule?this.notify("update",{type:this.type}):this.componentObj&&("Numeric"===this.type&&null===this.componentObj.value&&this.componentObj.setProperties({value:null},!0),this.setProperties({value:this.componentObj.value},!0),this.extendModelValue(this.componentObj.value))},e.prototype.getDropDownsValue=function(t){var i;return Array.prototype.indexOf.call(this.dropDownEle,this.type)>-1&&"MultiSelect"!==this.type?i=t?(0,a.Ys)(".e-"+this.type.toLocaleLowerCase(),this.containerEle).value:this.value.toString():"MultiSelect"===this.type&&(this.notify("access-value",{type:this.type}),i=t?this.printValue:this.value.join()),i},e.prototype.getSendValue=function(){return this.isEmpty(this.value)?"":Array.prototype.indexOf.call(this.dropDownEle,this.type)>-1?this.getDropDownsValue(!1):Array.prototype.indexOf.call(this.dateType,this.type)>-1?this.value.toISOString():"DateRange"===this.type?this.value[0].toISOString()+" - "+this.value[1].toISOString():this.value.toString()},e.prototype.getRenderValue=function(){return"Mask"===this.type&&0!==this.componentObj.value.length?this.componentObj.getMaskedValue():Array.prototype.indexOf.call(this.inputDataEle,this.type)>-1?this.componentRoot.value:Array.prototype.indexOf.call(this.dropDownEle,this.type)>-1?this.getDropDownsValue(!0):Ps(this.type,this.value,this.model)},e.prototype.setRtl=function(t){t?(0,a.cn)([this.element],[fh]):(0,a.IV)([this.element],[fh])},e.prototype.setFocus=function(){this.isTemplate||(this.isExtModule?this.notify(ua,{}):this.componentObj.element.focus())},e.prototype.removeEditor=function(t){if((0,a.xr)()&&!this.isStringTemplate&&(0,a.oL)(this.element.id+"template","Template"),this.tipObj&&this.formEle&&(0,a.oq)(this.formEle,"."+dh).classList.add(on),this.unWireDocEvent(),this.destroyComponents(),this.formEle=void 0,(0,a.le)((0,a.Ys)("."+gu,this.element))?this.tipObj&&("MultiSelect"===this.type&&(a.bi.remove(this.containerEle,"mousedown",this.popMouseDown),a.bi.remove(this.containerEle,"click",this.popClickHandler)),this.tipObj.close(),this.tipObj.destroy(),this.tipObj=void 0):((0,a.og)(this.inlineWrapper),this.inlineWrapper=void 0),this.containerEle=void 0,(0,a.IV)([this.valueWrap],[ga,on]),t||this.setProperties({enableEditMode:!1},!0),"EditIconClick"!==this.editableOn){var n="DblClick"===this.editableOn?"editAreaDoubleClick":"editAreaClick";(0,a.le)(this.valueWrap.parentElement)||this.valueWrap.parentElement.setAttribute("title",this.getLocale(uu[this.editableOn],n))}this.isReact&&this.clearTemplate()},e.prototype.destroyComponents=function(){this.showButtons&&this.destroyButtons(),this.isExtModule?this.notify("destroy-modules",{}):(this.templateEle&&(document.body.appendChild(this.templateEle),this.templateEle.style.display="none",this.templateEle=void 0),(0,a.le)(this.componentObj)||(this.componentObj.destroy(),this.componentObj=void 0)),this.formValidate&&(this.formValidate=void 0),this.submitOnEnter&&this.containerEle&&this.unWireEditorKeyDownEvent(this.containerEle)},e.prototype.destroyButtons=function(){(0,a.le)(this.submitBtn)||(a.bi.remove(this.submitBtn.element,"mousedown",this.submitHandler),a.bi.remove(this.submitBtn.element,"click",this.submitPrevent),a.bi.remove(this.submitBtn.element,"keydown",this.btnKeyDownHandler),this.submitBtn.destroy(),this.submitBtn=void 0),(0,a.le)(this.cancelBtn)||(a.bi.remove(this.cancelBtn.element,"mousedown",this.cancelBtnClick),a.bi.remove(this.cancelBtn.element,"keydown",this.btnKeyDownHandler),this.cancelBtn.destroy(),this.cancelBtn=void 0),this.btnElements=void 0},e.prototype.getQuery=function(t){var i=new z.AE;return Object.keys(t).forEach(function(n){i.addParams(n,t[n])}),i},e.prototype.sendValue=function(){var t=this,i={data:{name:this.name,primaryKey:this.primaryKey,value:this.getSendValue()}};this.trigger("actionBegin",i,function(n){n.cancel?(t.removeSpinner("submit"),"Popup"===t.mode&&t.updateArrow()):(t.isEmpty(t.url)||t.isEmpty(t.primaryKey)||!t.initRender&&(t.initRender||t.prevValue===t.value)?t.triggerSuccess({data:{},value:n.data.value}):(t.dataManager=new z.hm({url:t.url,adaptor:t.dataAdaptor}),"UrlAdaptor"===t.adaptor?t.dataManager.executeQuery(t.getQuery(n.data),t.successHandler.bind(t),t.failureHandler.bind(t)):t.dataManager.insert(n.data).then(function(l){return t.successHandler(l)}).catch(function(l){return t.failureHandler(l)})),t.dataManager=void 0)})},e.prototype.isEmpty=function(t){return!(!(0,a.le)(t)&&0!==t.length)},e.prototype.checkIsTemplate=function(){this.isTemplate=!(0,a.le)(this.template)&&""!==this.template},e.prototype.templateCompile=function(t,i){var n;"string"==typeof i&&(i=i.trim());var o=(0,a.MY)(i);if(!(0,a.le)(o)){var r=!((0,a.xr)()&&!this.isStringTemplate&&0===i.indexOf("<div>Blazor"))||this.isStringTemplate;n=o({},this,"template",this.element.id+"template",r)}!(0,a.le)(o)&&n.length>0&&([].slice.call(n).forEach(function(l){t.appendChild(l)}),(0,a.xr)()&&!this.isStringTemplate&&0===i.indexOf("<div>Blazor")&&(0,a.tx)(this.element.id+"template","Template",this))},e.prototype.sanitizeHelper=function(t){if(this.enableHtmlSanitizer){var i=a.pJ.beforeSanitize();(0,a.l7)(i,i,{cancel:!1,helper:null}),this.trigger("beforeSanitizeHtml",i,function(o){i.cancel&&!(0,a.le)(i.helper)?t=i.helper(t):i.cancel||(t=a.pJ.serializeValue(i,t))})}return t},e.prototype.appendTemplate=function(t,i){i="string"==typeof i?this.sanitizeHelper(i):i,this.setProperties({template:i},!0),"string"==typeof i||(0,a.le)(i.innerHTML)?"."!==i[0]&&"#"!==i[0]||!document.querySelectorAll(i).length?this.templateCompile(t,i):(this.templateEle=document.querySelector(i),t.appendChild(this.templateEle),this.templateEle.style.display=""):(this.templateEle=i,t.appendChild(this.templateEle))},e.prototype.disable=function(t){t?(0,a.cn)([this.element],[va]):(0,a.IV)([this.element],[va])},e.prototype.enableEditor=function(t,i){i&&!t||(t?this.renderEditor():this.cancelHandler("cancel"))},e.prototype.checkValidation=function(t,i){var o,n=this;if(this.validationRules){var r=Object.keys(this.validationRules),l=Object.keys(this.validationRules[r[0]]).length;l="validateHidden"in this.validationRules[r[0]]?l-1:l;var d=0;this.formValidate=new G.Tl(this.formEle,{rules:this.validationRules,validationComplete:function(h){d+=1,o={errorMessage:h.message,data:{name:n.name,primaryKey:n.primaryKey,value:n.checkValue(n.getSendValue())}},n.trigger("validating",o,function(p){"failure"===h.status?(h.errorElement.innerText=p.errorMessage,n.toggleErrorClass(!0)):n.toggleErrorClass(!1),!(0,a.le)(t)&&t&&(l===d||"failure"===h.status)&&(t=!1,n.afterValidation(i),d=0)})},customPlacement:function(h,p){n.formEle&&(0,a.Ys)("."+ph,n.formEle).appendChild(p)}}),d=0,this.formValidate.validate()}else""!==this.template?(o={errorMessage:"",data:{name:this.name,primaryKey:this.primaryKey,value:this.checkValue(this.getSendValue())}},this.trigger("validating",o,function(h){h.errorMessage?((0,a.Ys)("."+ph,n.formEle).innerHTML=h.errorMessage,n.toggleErrorClass(!0)):n.toggleErrorClass(!1),n.afterValidation(i)})):this.afterValidation(i)},e.prototype.afterValidation=function(t){!this.formEle.classList.contains(ya)&&t&&(this.loadSpinner("validate"),"Popup"===this.mode&&this.updateArrow(),this.sendValue())},e.prototype.toggleErrorClass=function(t){if(!(0,a.le)(this.formEle)){var i=(0,a.Ys)(".e-input-group",this.formEle);r=ya,l=t?"add":"remove",[].slice.call([this.formEle,i]).forEach(function(d){d&&("add"===l?(0,a.cn)([d],[r]):(0,a.IV)([d],[r]))})}var r,l},e.prototype.updateArrow=function(){var t=this.tipObj.tipPointerPosition;this.tipObj.tipPointerPosition="Middle"===t?"Auto":"Middle",this.tipObj.tipPointerPosition=t,this.tipObj.dataBind()},e.prototype.triggerSuccess=function(t){var i=this,n=t.value;this.trigger("actionSuccess",t,function(o){i.oldValue=n,i.removeSpinner("submit"),o.cancel||i.renderValue(i.checkValue(o.value!==n?o.value:i.getRenderValue())),o.cancel&&"Inline"===i.mode&&(0,a.IV)([i.valueWrap],[on]),i.removeEditor()})},e.prototype.triggerEndEdit=function(t){var i=this;this.trigger("endEdit",{cancel:!1,mode:this.mode,action:t},function(o){o.cancel||(i.formEle&&i.formEle.classList.contains(ya)&&(i.updateModelValue(!0),i.setProperties({value:i.oldValue},!0)),i.removeEditor())})},e.prototype.wireEvents=function(){this.wireEditEvent(this.editableOn),a.bi.add(this.editIcon,"click",this.clickHandler,this),a.bi.add(this.element,"keydown",this.valueKeyDownHandler,this),document.addEventListener("scroll",this.onScrollResizeHandler),window.addEventListener("resize",this.onScrollResizeHandler),Array.prototype.indexOf.call(this.clearComponents,this.type)>-1&&a.bi.add(this.element,"mousedown",this.mouseDownHandler,this)},e.prototype.wireDocEvent=function(){a.bi.add(document,"mousedown",this.docClickHandler,this)},e.prototype.wireEditEvent=function(t){"EditIconClick"!==t&&(this.element.setAttribute("title",this.getLocale(uu[t],"Click"===t?"editAreaClick":"editAreaDoubleClick")),a.AR.isDevice&&a.AR.isIos&&"DblClick"===t?this.touchModule=new a.Xh(this.valueWrap,{tap:this.doubleTapHandler.bind(this)}):a.bi.add(this.valueWrap,t.toLowerCase(),this.clickHandler,this))},e.prototype.wireEditorKeyDownEvent=function(t){a.bi.add(t,"keydown",this.enterKeyDownHandler,this)},e.prototype.wireBtnEvents=function(){(0,a.le)(this.submitBtn)||(a.bi.add(this.submitBtn.element,"mousedown",this.submitHandler,this),a.bi.add(this.submitBtn.element,"click",this.submitPrevent,this),a.bi.add(this.submitBtn.element,"keydown",this.btnKeyDownHandler,this)),(0,a.le)(this.cancelBtn)||(a.bi.add(this.cancelBtn.element,"mousedown",this.cancelBtnClick,this),a.bi.add(this.cancelBtn.element,"keydown",this.btnKeyDownHandler,this))},e.prototype.cancelBtnClick=function(t){this.cancelHandler("cancel"),this.trigger("cancelClick",t)},e.prototype.unWireEvents=function(){this.unWireEditEvent(this.editableOn),a.bi.remove(this.editIcon,"click",this.clickHandler),document.removeEventListener("scroll",this.onScrollResizeHandler),window.removeEventListener("resize",this.onScrollResizeHandler),a.bi.remove(this.element,"keydown",this.valueKeyDownHandler),Array.prototype.indexOf.call(this.clearComponents,this.type)>-1&&a.bi.remove(this.element,"mousedown",this.mouseDownHandler)},e.prototype.unWireDocEvent=function(){a.bi.remove(document,"mousedown",this.docClickHandler)},e.prototype.unWireEditEvent=function(t){"EditIconClick"!==t&&(this.element.removeAttribute("title"),a.AR.isDevice&&a.AR.isIos&&"DblClick"===t?(this.touchModule.destroy(),this.touchModule=void 0):a.bi.remove(this.valueWrap,t.toLowerCase(),this.clickHandler))},e.prototype.unWireEditorKeyDownEvent=function(t){a.bi.remove(t,"keydown",this.enterKeyDownHandler)},e.prototype.submitPrevent=function(t){t.preventDefault()},e.prototype.btnKeyDownHandler=function(t){var i=t.target;(13===t.keyCode&&13===t.which||32===t.keyCode&&32===t.which)&&(i.classList.contains(vu)?this.save():i.classList.contains(yu)&&this.cancelHandler("cancel")),9===t.keyCode&&!1===t.shiftKey&&((0,a.le)(t.target.nextElementSibling)||"BUTTON"!==t.target.nextElementSibling.tagName)&&("Submit"===this.actionOnBlur?this.save():"Cancel"===this.actionOnBlur&&this.cancelHandler("cancel"))},e.prototype.afterOpenHandler=function(t){"Popup"===this.mode&&"MultiSelect"===this.type&&(a.bi.add(this.containerEle,"mousedown",this.popMouseDown,this),a.bi.add(this.containerEle,"click",this.popClickHandler,this)),"Popup"===this.mode&&!this.isEmpty(this.titleEle.innerHTML)&&t.element.classList.add("e-editable-tip-title"),"RTE"===this.type?(this.rteModule.refresh(),this.setAttribute((0,a.Ys)(".e-richtexteditor textarea",this.containerEle),["name"])):"Slider"===this.type&&(this.sliderModule.refresh(),this.setAttribute((0,a.Ys)(".e-slider-input",this.containerEle),["name"])),this.beginEditArgs.cancelFocus||("Inline"===this.mode&&["AutoComplete","ComboBox","DropDownList","MultiSelect"].indexOf(this.type)>-1&&this.model.dataSource instanceof z.hm?this.showDropDownPopup():this.setFocus()),this.afterOpenEvent&&(this.tipObj.setProperties({afterOpen:this.afterOpenEvent},!0),this.tipObj.trigger("afterOpen",t))},e.prototype.popMouseDown=function(t){var i=t.target.classList;i.contains("e-chips-close")&&!i.contains("e-close-hooker")&&this.updateArrow()},e.prototype.doubleTapHandler=function(t){t.tapCount>1&&this.clickHandler(t.originalEvent)},e.prototype.clickHandler=function(t){"EditIconClick"!==this.editableOn&&t.stopPropagation(),this.renderEditor()},e.prototype.submitHandler=function(t){t.preventDefault(),this.save(),this.trigger("submitClick",t)},e.prototype.cancelHandler=function(t){this.triggerEndEdit(t)},e.prototype.popClickHandler=function(t){var i=(0,a.Ys)("."+hh,this.element);t.target.classList.contains("e-chips-close")&&this.tipObj.refresh(i)},e.prototype.successHandler=function(t){this.initRender=!1;var i={data:t,value:this.getSendValue()};this.triggerSuccess(i)},e.prototype.failureHandler=function(t){var i=this,n={data:t,value:this.getSendValue()};this.trigger("actionFailure",n,function(o){i.removeSpinner("submit"),"Popup"===i.mode&&i.updateArrow()})},e.prototype.enterKeyDownHandler=function(t){!(0,a.oq)(t.target,"."+ma+" .e-richtexteditor")&&!t.currentTarget.getElementsByTagName("textarea")[0]&&(13===t.keyCode&&13===t.which&&(0,a.oq)(t.target,"."+ma)?(this.save(),this.trigger("submitClick",t)):27===t.keyCode&&27===t.which&&this.cancelHandler("cancel"))},e.prototype.valueKeyDownHandler=function(t){9===t.keyCode&&!0===t.shiftKey&&"BUTTON"!==t.target.tagName&&("Submit"===this.actionOnBlur?this.save():"Cancel"===this.actionOnBlur&&this.cancelHandler("cancel")),13===t.keyCode&&13===t.which&&t.target.classList.contains(mu)&&!this.valueWrap.classList.contains(ga)&&!this.element.classList.contains(va)&&(t.preventDefault(),this.renderEditor())},e.prototype.mouseDownHandler=function(t){t.target.classList.contains("e-clear-icon")&&(this.isClearTarget=!0)},e.prototype.scrollResizeHandler=function(){"Popup"===this.mode&&this.tipObj&&!a.AR.isDevice&&this.triggerEndEdit("cancel")},e.prototype.docClickHandler=function(t){var i=t.target;if(this.isClearTarget)this.isClearTarget=!1;else{var n=(0,a.oq)(i,"."+mu),o=(0,a.oq)(i,"."+dh),r=(0,a.oq)(i,"."+mo),l=(0,a.oq)(i,".e-rte-elements");!(0,a.le)(n)&&n.isEqualNode(this.element)||!(0,a.le)(o)&&this.tipObj&&o.id.indexOf(this.valueWrap.id)>-1||!(0,a.le)(r)||!(0,a.le)(l)||i.classList.contains("e-chips-close")||("Submit"===this.actionOnBlur?this.save():"Cancel"===this.actionOnBlur&&this.cancelHandler("cancel"))}},e.prototype.changeHandler=function(t){var i={previousValue:void 0===this.compPrevValue?this.value:this.compPrevValue,value:t.value};("AutoComplete"===this.type||"ComboBox"===this.type||"DropDownList"===this.type)&&(i.itemData=t.itemData,i.previousItemData=t.previousItemData),this.compPrevValue=i.value,this.trigger("change",i)},e.prototype.validate=function(){this.checkValidation(!0,!1)},e.prototype.save=function(){var t=this;this.formEle&&(this.element.focus(),this.editEle=(0,a.Ys)("."+ma,this.formEle),(0,a.Ys)("."+ya,this.editEle),this.isTemplate||this.setValue(),this.trigger("endEdit",{cancel:!1,mode:this.mode,action:"submit"},function(o){o.cancel||t.checkValidation(!0,!0)}))},e.prototype.destroy=function(){var t=this;for(this.removeEditor((0,a.xr)()),this.isExtModule&&this.notify("destroy",{}),this.unWireEvents(),[va,fh].forEach(function(n){(0,a.IV)([t.element],[n])});this.element.firstElementChild;)this.element.removeChild(this.element.firstElementChild);(0,a.xr)()&&this.isServerRendered||s.prototype.destroy.call(this),this.isReact&&this.clearTemplate()},e.prototype.getPersistData=function(){return this.addOnPersist(["value"])},e.prototype.requiredModules=function(){var t=[];return t.push({member:cu[this.type],args:[this]}),t},e.prototype.getModuleName=function(){return"inplaceeditor"},e.prototype.onPropertyChanged=function(t,i){if(this.isEditorOpen()){var n="enableEditMode"in t;n&&i.enableEditMode&&!t.enableEditMode||!n&&this.enableEditMode?this.triggerEndEdit("cancel"):this.removeEditor()}for(var o=0,r=Object.keys(t);o<r.length;o++)switch(r[o]){case"showButtons":t.showButtons?this.appendButtons(this.formEle):this.destroyButtons();break;case"value":this.updateValue(),"Never"===this.textOption?this.renderValue(this.checkValue(Ps(this.type,this.value,this.model))):this.renderInitialValue();break;case"emptyText":"Never"===this.textOption?this.renderValue(this.checkValue(Ps(this.type,this.value,this.model))):this.renderInitialValue();break;case"template":this.checkIsTemplate();break;case"disabled":this.disable(t.disabled);break;case"enableRtl":this.setRtl(t.enableRtl);break;case"cssClass":this.setClass("remove",i.cssClass),this.setClass("add",t.cssClass);break;case"mode":this.enableEditor(this.enableEditMode);break;case"enableEditMode":this.enableEditor(t.enableEditMode);break;case"editableOn":this.unWireEditEvent(i.editableOn),"EditIconClick"!==t.editableOn&&this.wireEditEvent(t.editableOn)}},ie([(0,a.Z9)("")],e.prototype,"name",void 0),ie([(0,a.Z9)(null)],e.prototype,"value",void 0),ie([(0,a.Z9)("")],e.prototype,"template",void 0),ie([(0,a.Z9)(!0)],e.prototype,"enableHtmlSanitizer",void 0),ie([(0,a.Z9)(!0)],e.prototype,"enableHtmlParse",void 0),ie([(0,a.Z9)("")],e.prototype,"cssClass",void 0),ie([(0,a.Z9)("")],e.prototype,"primaryKey",void 0),ie([(0,a.Z9)("Empty")],e.prototype,"emptyText",void 0),ie([(0,a.Z9)("")],e.prototype,"url",void 0),ie([(0,a.Z9)("Popup")],e.prototype,"mode",void 0),ie([(0,a.Z9)("UrlAdaptor")],e.prototype,"adaptor",void 0),ie([(0,a.Z9)("Text")],e.prototype,"type",void 0),ie([(0,a.Z9)("Click")],e.prototype,"editableOn",void 0),ie([(0,a.Z9)("Never")],e.prototype,"textOption",void 0),ie([(0,a.Z9)("Submit")],e.prototype,"actionOnBlur",void 0),ie([(0,a.Z9)(!1)],e.prototype,"enablePersistence",void 0),ie([(0,a.Z9)(!1)],e.prototype,"disabled",void 0),ie([(0,a.Z9)(!0)],e.prototype,"showButtons",void 0),ie([(0,a.Z9)(!1)],e.prototype,"enableEditMode",void 0),ie([(0,a.Z9)(!0)],e.prototype,"submitOnEnter",void 0),ie([(0,a.Zz)({},Dw)],e.prototype,"popupSettings",void 0),ie([(0,a.Z9)(null)],e.prototype,"model",void 0),ie([(0,a.Z9)({iconCss:"e-icons e-save-icon"})],e.prototype,"saveButton",void 0),ie([(0,a.Z9)({iconCss:"e-icons e-cancel-icon"})],e.prototype,"cancelButton",void 0),ie([(0,a.Z9)(null)],e.prototype,"validationRules",void 0),ie([(0,a.ju)()],e.prototype,"created",void 0),ie([(0,a.ju)()],e.prototype,"beforeSanitizeHtml",void 0),ie([(0,a.ju)()],e.prototype,"actionBegin",void 0),ie([(0,a.ju)()],e.prototype,"actionSuccess",void 0),ie([(0,a.ju)()],e.prototype,"actionFailure",void 0),ie([(0,a.ju)()],e.prototype,"validating",void 0),ie([(0,a.ju)()],e.prototype,"beginEdit",void 0),ie([(0,a.ju)()],e.prototype,"endEdit",void 0),ie([(0,a.ju)()],e.prototype,"change",void 0),ie([(0,a.ju)()],e.prototype,"submitClick",void 0),ie([(0,a.ju)()],e.prototype,"cancelClick",void 0),ie([(0,a.ju)()],e.prototype,"destroyed",void 0),ie([a.Zl],e)}(a.wA),Ds=function(){var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])})(e,t)};return function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),oe=function(s,e,t,i){var r,n=arguments.length,o=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(s,e,t,i);else for(var l=s.length-1;l>=0;l--)(r=s[l])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},ht="e-toast",vo="e-toast-container",Cu="e-toast-title",xu="e-toast-full-width",Vu="e-toast-content",ba="e-toast-message",Sa="e-toast-progress",uh="e-toast-close-icon",mh="e-rtl",Gw=function(s){function e(){return null!==s&&s.apply(this,arguments)||this}return Ds(e,s),oe([(0,a.Z9)("Left")],e.prototype,"X",void 0),oe([(0,a.Z9)("Top")],e.prototype,"Y",void 0),e}(a.rt),Jw=function(s){function e(){return null!==s&&s.apply(this,arguments)||this}return Ds(e,s),oe([(0,a.Z9)(null)],e.prototype,"model",void 0),oe([(0,a.Z9)(null)],e.prototype,"click",void 0),e}(a.rt),Tu=function(s){function e(){return null!==s&&s.apply(this,arguments)||this}return Ds(e,s),oe([(0,a.Z9)("FadeIn")],e.prototype,"effect",void 0),oe([(0,a.Z9)(600)],e.prototype,"duration",void 0),oe([(0,a.Z9)("ease")],e.prototype,"easing",void 0),e}(a.rt),Qw=function(s){function e(){return null!==s&&s.apply(this,arguments)||this}return Ds(e,s),oe([(0,a.Zz)({effect:"FadeIn",duration:600,easing:"ease"},Tu)],e.prototype,"show",void 0),oe([(0,a.Zz)({effect:"FadeOut",duration:600,easing:"ease"},Tu)],e.prototype,"hide",void 0),e}(a.rt),ku=function(s){function e(t,i){var n=s.call(this,t,i)||this;return n.toastCollection=[],n.needsID=!0,n}return Ds(e,s),e.prototype.getModuleName=function(){return"toast"},e.prototype.getPersistData=function(){return this.addOnPersist([])},e.prototype.destroy=function(){this.hide("All"),this.element.classList.remove(vo),(0,a.V7)(this.element,{position:"","z-index":""}),!(0,a.le)(this.refElement)&&!(0,a.le)(this.refElement.parentElement)&&(this.refElement.parentElement.insertBefore(this.element,this.refElement),(0,a.og)(this.refElement),this.refElement=void 0),this.isBlazorServer()||s.prototype.destroy.call(this)},e.prototype.preRender=function(){this.isDevice=a.AR.isDevice,"300px"===this.width&&(this.width=this.isDevice&&screen.width<768?"100%":"300px"),(0,a.le)(this.target)&&(this.target=document.body),this.enableRtl&&!this.isBlazorServer()&&this.element.classList.add(mh)},e.prototype.render=function(){this.progressObj=[],this.intervalId=[],this.contentTemplate=null,this.toastTemplate=null,this.renderComplete(),this.initRenderClass=this.element.className},e.prototype.show=function(t){var i;if((0,a.le)(t)||(this.templateChanges(t),i=JSON.parse(JSON.stringify(t)),(0,a.l7)(this,this,t)),(0,a.le)(this.toastContainer)){this.toastContainer=this.getContainer();var n="string"==typeof this.target?document.querySelector(this.target):"object"==typeof this.target?this.target:document.body;if((0,a.le)(n))return;"BODY"===n.tagName?this.toastContainer.style.position="fixed":(this.toastContainer.style.position="absolute",n.style.position="relative"),this.setPositioning(this.position),n.appendChild(this.toastContainer)}this.isBlazorServer()&&this.element.classList.contains("e-control")?this.isToastModel(t):(this.toastEle=this.createElement("div",{className:ht,id:(0,a.QI)("toast")}),this.setWidthHeight(),this.setCSSClass(this.cssClass),(0,a.le)(this.template)||""===this.template?this.personalizeToast():this.templateRendering(),this.setProgress(),this.setCloseButton(),this.setAria(),this.appendToTarget(t),this.isDevice&&screen.width<768&&new a.Xh(this.toastEle,{swipe:this.swipeHandler.bind(this)}),(0,a.le)(i)||((0,a.l7)(i,{element:[this.toastEle]},!0),this.toastCollection.push(i)),this.isReact&&this.renderReactTemplates())},e.prototype.showToast=function(t,i){this.toastEle=this.element.querySelector("#"+t),this.show(i)},e.prototype.isToastModel=function(t){this.toastContainer=this.element,this.setPositioning(this.position),(0,a.le)(this.element.lastElementChild)||this.setProgress(),this.setAria(),this.appendToTarget(t)},e.prototype.swipeHandler=function(t){var i=(0,a.oq)(t.originalEvent.target,"."+ht+":not(."+vo+")"),n=this.animation.hide.effect;(0,a.le)(i)||("Right"===t.swipeDirection?(this.animation.hide.effect="SlideRightOut",this.hideToast("swipe",i)):"Left"===t.swipeDirection&&(this.animation.hide.effect="SlideLeftOut",this.hideToast("swipe",i)),this.animation.hide.effect=n)},e.prototype.templateChanges=function(t){!(0,a.o8)(t.content)&&!(0,a.le)(this.contentTemplate)&&this.content!==t.content&&this.clearContentTemplate(),!(0,a.o8)(t.template)&&!(0,a.le)(this.toastTemplate)&&this.template!==t.template&&this.clearToastTemplate()},e.prototype.setCSSClass=function(t){if(t){var i=-1!==t.indexOf(",")?",":" ";(0,a.s1)(this.toastEle,t.split(i),[]),this.toastContainer&&(0,a.s1)(this.toastContainer,t.split(i),[])}},e.prototype.setWidthHeight=function(){"300px"===this.width?this.toastEle.style.width=(0,a.Ac)(this.width):"100%"===this.width?this.toastContainer.classList.add(xu):(this.toastEle.style.width=(0,a.Ac)(this.width),this.toastContainer.classList.remove(xu)),this.toastEle.style.height=(0,a.Ac)(this.height)},e.prototype.templateRendering=function(){this.fetchEle(this.toastEle,this.template,"template")},e.prototype.sanitizeHelper=function(t){if(this.enableHtmlSanitizer){var i=a.pJ.beforeSanitize();(0,a.l7)(i,i,{cancel:!1,helper:null}),this.trigger("beforeSanitizeHtml",i),i.cancel&&!(0,a.le)(i.helper)?t=i.helper(t):i.cancel||(t=a.pJ.serializeValue(i,t))}return t},e.prototype.hide=function(t){this.hideToast("",t)},e.prototype.hideToast=function(t,i){if(!(0,a.le)(this.toastContainer)&&0!==this.toastContainer.childElementCount){if("string"==typeof i&&"All"===i){for(var n=0;n<this.toastContainer.childElementCount;n++)this.destroyToast(this.toastContainer.children[n],t);return}(0,a.le)(i)&&(i=this.newestOnTop?this.toastContainer.lastElementChild:this.toastContainer.firstElementChild),this.destroyToast(i,t)}},e.prototype.fetchEle=function(t,i,n){var o,r,l,d;if(i="string"==typeof i?this.sanitizeHelper(i):i,d=t.classList.contains(Cu)?this.element.id+"title":t.classList.contains(Vu)?this.element.id+"content":this.element.id+"template",!(0,a.le)(r="content"===n?this.contentTemplate:this.toastTemplate))return t.appendChild(r.cloneNode(!0)),t;try{if(document.querySelectorAll(i).length>0){var h=null;"title"!==n&&(h=document.querySelector(i),t.appendChild(h),h.style.display="");var p=(0,a.le)(h)?r:h.cloneNode(!0);"content"===n?this.contentTemplate=p:this.toastTemplate=p}else o=(0,a.MY)(i)}catch(c){o=(0,a.MY)(i)}return(0,a.le)(o)||(l=this.isBlazorServer()?o({},this,n,d,!0):o({},this,n,null,!0)),(0,a.le)(l)||!(l.length>0)||(0,a.le)(l[0].tagName)&&1===l.length?0===t.childElementCount&&(t.innerHTML=i):[].slice.call(l).forEach(function(c){(0,a.le)(c.tagName)||(c.style.display=""),t.appendChild(c)}),t},e.prototype.clearProgress=function(t){(0,a.le)(this.intervalId[t])||(clearInterval(this.intervalId[t]),delete this.intervalId[t]),(0,a.le)(this.progressObj[t])||(clearInterval(this.progressObj[t].intervalId),delete this.progressObj[t])},e.prototype.removeToastContainer=function(t){t&&this.toastContainer.classList.contains("e-toast-util")&&(0,a.og)(this.toastContainer)},e.prototype.clearContainerPos=function(t){var i=this;this.isBlazorServer()?this.toastContainer=null:(this.customPosition?((0,a.V7)(this.toastContainer,{left:"",top:""}),this.removeToastContainer(t),this.toastContainer=null,this.customPosition=!1):([ht+"-top-left",ht+"-top-right",ht+"-bottom-left",ht+"-bottom-right",ht+"-bottom-center",ht+"-top-center",ht+"-full-width"].forEach(function(n){!(0,a.le)(i.toastContainer)&&i.toastContainer.classList.contains(n)&&i.toastContainer.classList.remove(n)}),this.removeToastContainer(t),this.toastContainer=null),(0,a.le)(this.contentTemplate)||this.clearContentTemplate(),(0,a.le)(this.toastTemplate)||this.clearToastTemplate())},e.prototype.clearContentTemplate=function(){this.contentTemplate.style.display="none",document.body.appendChild(this.contentTemplate),this.contentTemplate=null},e.prototype.clearToastTemplate=function(){this.toastTemplate.style.display="none",document.body.appendChild(this.toastTemplate),this.toastTemplate=null},e.prototype.isBlazorServer=function(){return(0,a.xr)()&&this.isServerRendered},e.prototype.destroyToast=function(t,i){for(var o,n=this,r=0;r<this.toastCollection.length;r++)this.toastCollection[r].element[0]===t&&(o=this.toastCollection[r],this.toastCollection.splice(r,1));var l={options:this,cancel:!1,type:i,element:t,toastContainer:this.toastContainer},d=this.animation.hide,h={duration:d.duration,name:d.effect,timingFunction:d.easing},p=parseInt(t.id.split("toast_")[1],10),f=this.isBlazorServer()?{options:o,toastContainer:this.toastContainer}:{options:o,toastContainer:this.toastContainer,toastObj:this};this.trigger("beforeClose",l,function(c){c.cancel||(!(0,a.le)(n.progressObj[p])&&!(0,a.le)(t.querySelector("."+Sa))&&(n.progressObj[p].progressEle.style.width="0%"),h.end=function(){n.clearProgress(p),(!n.isBlazorServer()||(0,a.le)(o))&&(0,a.og)(t),n.trigger("close",f),0===n.toastContainer.childElementCount&&n.clearContainerPos(!0),d=null,h=null},new a.fw(h).animate(t))})},e.prototype.personalizeToast=function(){this.setIcon(),this.setTitle(),this.setContent(),this.actionButtons()},e.prototype.setAria=function(){(0,a.Y4)(this.toastEle,{role:"alert"})},e.prototype.setPositioning=function(t){this.isBlazorServer()||(isNaN(parseFloat(t.X))&&isNaN(parseFloat(t.Y))?this.toastContainer.classList.add(ht+"-"+t.Y.toString().toLowerCase()+"-"+t.X.toString().toLowerCase()):(this.customPosition=!0,(0,a.V7)(this.toastContainer,{left:(0,a.Ac)(t.X),top:(0,a.Ac)(t.Y)})))},e.prototype.setCloseButton=function(){if(this.showCloseButton){this.l10n=new a.E7("toast",{close:"Close"},this.locale),this.l10n.setLocale(this.locale);var i=this.l10n.getConstant("close"),n=this.createElement("div",{className:uh+" e-icons ",attrs:{tabindex:"0","aria-label":i,role:"button"}});this.toastEle.classList.add("e-toast-header-close-icon"),this.toastEle.appendChild(n)}},e.prototype.setProgress=function(){if(this.timeOut>0){var t=parseInt(this.toastEle.id.split("toast_")[1],10);this.intervalId[t]=window.setTimeout(this.destroyToast.bind(this,this.toastEle),this.timeOut),this.progressObj[t]={hideEta:null,intervalId:null,maxHideTime:null,element:null,timeOutId:null,progressEle:null},this.progressObj[t].maxHideTime=parseFloat(this.timeOut+""),this.progressObj[t].hideEta=(new Date).getTime()+this.progressObj[t].maxHideTime,this.progressObj[t].element=this.toastEle,this.extendedTimeout>0&&(a.bi.add(this.toastEle,"mouseover",this.toastHoverAction.bind(this,t)),a.bi.add(this.toastEle,"mouseleave",this.delayedToastProgress.bind(this,t)),this.progressObj[t].timeOutId=this.intervalId[t]),this.showProgressBar&&(this.progressBarEle=this.createElement("div",{className:Sa}),this.toastEle.insertBefore(this.progressBarEle,this.toastEle.children[0]),this.progressObj[t].intervalId=setInterval(this.updateProgressBar.bind(this,this.progressObj[t]),10),this.progressObj[t].progressEle=this.progressBarEle)}},e.prototype.toastHoverAction=function(t){clearTimeout(this.progressObj[t].timeOutId),clearInterval(this.progressObj[t].intervalId),this.progressObj[t].hideEta=0,(0,a.le)(this.progressObj[t].element.querySelector("."+Sa))||(this.progressObj[t].progressEle.style.width="0%")},e.prototype.delayedToastProgress=function(t){var i=this.progressObj[t],n=i.element;i.timeOutId=window.setTimeout(this.destroyToast.bind(this,n),this.extendedTimeout),i.maxHideTime=parseFloat(this.extendedTimeout+""),i.hideEta=(new Date).getTime()+i.maxHideTime,(0,a.le)(n.querySelector("."+Sa))||(i.intervalId=setInterval(this.updateProgressBar.bind(this,i),10))},e.prototype.updateProgressBar=function(t){var i=(t.hideEta-(new Date).getTime())/t.maxHideTime*100;t.progressEle.style.width=(i="Ltr"===this.progressDirection?100-i:i)+"%"},e.prototype.setIcon=function(){if(!(0,a.le)(this.icon)&&0!==this.icon.length){var t=this.createElement("div",{className:"e-toast-icon e-icons "+this.icon});this.toastEle.classList.add("e-toast-header-icon"),this.toastEle.appendChild(t)}},e.prototype.setTitle=function(){if(!(0,a.le)(this.title)){var t=this.createElement("div",{className:Cu});t=this.fetchEle(t,this.title,"title");var i=this.createElement("div",{className:ba});i.appendChild(t),this.toastEle.appendChild(i)}},e.prototype.setContent=function(){var t=this.createElement("div",{className:Vu}),i=this.element;if((0,a.le)(this.content)||""===this.content){var n=""!==this.element.innerHTML.replace(/\s/g,"");if((i.children.length>0||n)&&(!i.firstElementChild||!i.firstElementChild.classList.contains(ht))){this.innerEle=document.createDocumentFragment();for(var o=this.createElement("div");0!==i.childNodes.length;)this.innerEle.appendChild(this.element.childNodes[0]);t.appendChild(this.innerEle),[].slice.call(t.children).forEach(function(r){o.appendChild(r.cloneNode(!0))}),this.content=o,this.appendMessageContainer(t)}}else"object"!=typeof this.content||(0,a.le)(this.content.tagName)?(t=this.fetchEle(t,this.content,"content"),this.appendMessageContainer(t)):(t.appendChild(this.content),this.content=this.content.cloneNode(!0),this.appendMessageContainer(t))},e.prototype.appendMessageContainer=function(t){if(this.toastEle.querySelectorAll("."+ba).length>0)this.toastEle.querySelector("."+ba).appendChild(t);else{var i=this.createElement("div",{className:ba});i.appendChild(t),this.toastEle.appendChild(i)}},e.prototype.actionButtons=function(){var t=this,i=this.createElement("div",{className:"e-toast-actions"});[].slice.call(this.buttons).forEach(function(n){if(!(0,a.le)(n.model)){var o=t.createElement("button");o.setAttribute("type","button"),((0,a.le)(n.model.cssClass)||0===n.model.cssClass.length)&&(n.model.cssClass="e-primary "+t.cssClass),o.classList.add("e-small"),new le.zx(n.model,o),!(0,a.le)(n.click)&&"function"==typeof n.click&&a.bi.add(o,"click",n.click),i.appendChild(o)}}),i.childElementCount>0&&this.appendMessageContainer(i)},e.prototype.appendToTarget=function(t){var i=this,n=this.isBlazorServer()?{options:t,element:this.toastEle,cancel:!1}:{options:t,toastObj:this,element:this.toastEle,cancel:!1};this.trigger("beforeOpen",n,function(o){if(o.cancel){if(i.isBlazorServer()){var r=parseInt(i.toastEle.id.split("toast_")[1],10);i.clearProgress(r),(0,a.og)(i.toastEle),0===i.toastContainer.childElementCount&&i.clearContainerPos()}}else i.isBlazorServer()||(i.toastEle.style.display="none"),i.newestOnTop&&0!==i.toastContainer.childElementCount?i.toastContainer.insertBefore(i.toastEle,i.toastContainer.children[0]):i.isBlazorServer()||i.toastContainer.appendChild(i.toastEle),(0,a.IV)([i.toastEle],"e-blazor-toast-hidden"),a.bi.add(i.toastEle,"click",i.clickHandler,i),a.bi.add(i.toastEle,"keydown",i.keyDownHandler,i),i.toastContainer.style.zIndex=(0,j.TE)(i.toastContainer)+"",i.displayToast(i.toastEle,t)})},e.prototype.clickHandler=function(t){var i=this;this.isBlazorServer()||t.stopPropagation();var n=t.target,o=(0,a.oq)(n,"."+ht),r=this.isBlazorServer()?{element:o,cancel:!1,clickToClose:!1,originalEvent:t}:{element:o,cancel:!1,clickToClose:!1,originalEvent:t,toastObj:this},l=n.classList.contains(uh);this.trigger("click",r,function(d){(l&&!d.cancel||d.clickToClose)&&i.destroyToast(o,"click")})},e.prototype.keyDownHandler=function(t){if(t.target.classList.contains(uh)&&(13===t.keyCode||32===t.keyCode)){var n=(0,a.oq)(t.target,"."+ht);this.destroyToast(n,"key")}},e.prototype.displayToast=function(t,i){var n=this,o=this.animation.show,r={duration:o.duration,name:o.effect,timingFunction:o.easing},l=this.isBlazorServer()?{options:i,element:this.toastEle}:{options:i,toastObj:this,element:this.toastEle};r.begin=function(){t.style.display=""},r.end=function(){n.trigger("open",l)},new a.fw(r).animate(t)},e.prototype.getContainer=function(){return this.element.classList.add(vo),this.element},e.prototype.onPropertyChanged=function(t,i){for(var n=this.element,o=0,r=Object.keys(t);o<r.length;o++)"enableRtl"===r[o]&&(t.enableRtl?n.classList.add(mh):n.classList.remove(mh))},oe([(0,a.Z9)("300px")],e.prototype,"width",void 0),oe([(0,a.Z9)("auto")],e.prototype,"height",void 0),oe([(0,a.Z9)(null)],e.prototype,"title",void 0),oe([(0,a.Z9)(null)],e.prototype,"content",void 0),oe([(0,a.Z9)(!0)],e.prototype,"enableHtmlSanitizer",void 0),oe([(0,a.Z9)(null)],e.prototype,"icon",void 0),oe([(0,a.Z9)(null)],e.prototype,"cssClass",void 0),oe([(0,a.Z9)(null)],e.prototype,"template",void 0),oe([(0,a.Z9)(!0)],e.prototype,"newestOnTop",void 0),oe([(0,a.Z9)(!1)],e.prototype,"showCloseButton",void 0),oe([(0,a.Z9)(!1)],e.prototype,"showProgressBar",void 0),oe([(0,a.Z9)(5e3)],e.prototype,"timeOut",void 0),oe([(0,a.Z9)("Rtl")],e.prototype,"progressDirection",void 0),oe([(0,a.Z9)(1e3)],e.prototype,"extendedTimeout",void 0),oe([(0,a.Zz)({},Qw)],e.prototype,"animation",void 0),oe([(0,a.Zz)({},Gw)],e.prototype,"position",void 0),oe([(0,a.FE)([{}],Jw)],e.prototype,"buttons",void 0),oe([(0,a.Z9)(null)],e.prototype,"target",void 0),oe([(0,a.ju)()],e.prototype,"created",void 0),oe([(0,a.ju)()],e.prototype,"beforeSanitizeHtml",void 0),oe([(0,a.ju)()],e.prototype,"destroyed",void 0),oe([(0,a.ju)()],e.prototype,"open",void 0),oe([(0,a.ju)()],e.prototype,"beforeOpen",void 0),oe([(0,a.ju)()],e.prototype,"beforeClose",void 0),oe([(0,a.ju)()],e.prototype,"close",void 0),oe([(0,a.ju)()],e.prototype,"click",void 0),oe([a.Zl],e)}(a.wA);!function(s){s.show=function(t,i,n){var o,r,l;if(document.querySelector("."+vo)?o=document.querySelector("."+vo):(o=(0,a.az)("div",{className:ht+" "+vo+" e-toast-util"}),document.body.appendChild(o)),"string"==typeof t){var d=void 0,h=void 0;if((0,a.le)(i))d="",h="";else switch(i){case"Warning":d="e-toast-warning",h="e-toast-warning-icon";break;case"Success":d="e-toast-success",h="e-toast-success-icon";break;case"Error":d="e-toast-danger",h="e-toast-error-icon";break;case"Information":d="e-toast-info",h="e-toast-info-icon"}l={content:t,cssClass:d,icon:h,timeOut:(0,a.le)(n)?5e3:n}}else l=t;return(r=new ku(l)).appendTo(o),r.show(),r}}(Au||(Au={}));var Ta=function(){var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])})(e,t)};return function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),E=function(s,e,t,i){var r,n=arguments.length,o=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(s,e,t,i);else for(var l=s.length-1;l>=0;l--)(r=s[l])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},xh=function(s){function e(){return null!==s&&s.apply(this,arguments)||this}return Ta(e,s),E([(0,a.Z9)(0)],e.prototype,"x",void 0),E([(0,a.Z9)(0)],e.prototype,"y",void 0),E([(0,a.Z9)(0)],e.prototype,"width",void 0),E([(0,a.Z9)(0)],e.prototype,"height",void 0),E([(0,a.Z9)(0)],e.prototype,"left",void 0),E([(0,a.Z9)(0)],e.prototype,"top",void 0),E([(0,a.Z9)(0)],e.prototype,"right",void 0),E([(0,a.Z9)(0)],e.prototype,"bottom",void 0),E([(0,a.Zz)({x:0,y:0},se)],e.prototype,"location",void 0),E([(0,a.Zz)(new fe(0,0),fe)],e.prototype,"size",void 0),e}(a.rt),Mu=function(s){function e(){return null!==s&&s.apply(this,arguments)||this}return Ta(e,s),E([(0,a.Z9)(!1)],e.prototype,"isBold",void 0),E([(0,a.Z9)(!1)],e.prototype,"isItalic",void 0),E([(0,a.Z9)(!1)],e.prototype,"isUnderline",void 0),E([(0,a.Z9)(!1)],e.prototype,"isStrikeout",void 0),e}(a.rt),ka=function(s){function e(t,i,n,o){return s.call(this,t,i,n,o)||this}return Ta(e,s),E([(0,a.Z9)("")],e.prototype,"id",void 0),E([(0,a.Z9)("Rectangle")],e.prototype,"shapeAnnotationType",void 0),E([(0,a.Z9)(null)],e.prototype,"formFieldAnnotationType",void 0),E([(0,a.Z9)("")],e.prototype,"measureType",void 0),E([(0,a.Z9)("")],e.prototype,"author",void 0),E([(0,a.Z9)("")],e.prototype,"modifiedDate",void 0),E([(0,a.Z9)("")],e.prototype,"subject",void 0),E([(0,a.Z9)("")],e.prototype,"notes",void 0),E([(0,a.Z9)(!1)],e.prototype,"isCommentLock",void 0),E([(0,a.Z9)("black")],e.prototype,"strokeColor",void 0),E([(0,a.Z9)("#ffffff00")],e.prototype,"fillColor",void 0),E([(0,a.Z9)("#ffffff00")],e.prototype,"stampFillColor",void 0),E([(0,a.Z9)("black")],e.prototype,"stampStrokeColor",void 0),E([(0,a.Z9)("")],e.prototype,"data",void 0),E([(0,a.Z9)(1)],e.prototype,"opacity",void 0),E([(0,a.Z9)(1)],e.prototype,"thickness",void 0),E([(0,a.Z9)("")],e.prototype,"borderStyle",void 0),E([(0,a.Z9)("")],e.prototype,"borderDashArray",void 0),E([(0,a.Z9)(0)],e.prototype,"rotateAngle",void 0),E([(0,a.Z9)(!1)],e.prototype,"isCloudShape",void 0),E([(0,a.Z9)(0)],e.prototype,"cloudIntensity",void 0),E([(0,a.Z9)(40)],e.prototype,"leaderHeight",void 0),E([(0,a.Z9)(null)],e.prototype,"lineHeadStart",void 0),E([(0,a.Z9)(null)],e.prototype,"lineHeadEnd",void 0),E([(0,a.Z9)([])],e.prototype,"vertexPoints",void 0),E([(0,a.Z9)(null)],e.prototype,"sourcePoint",void 0),E([(0,a.Z9)("None")],e.prototype,"sourceDecoraterShapes",void 0),E([(0,a.Z9)("None")],e.prototype,"taregetDecoraterShapes",void 0),E([(0,a.Z9)(null)],e.prototype,"targetPoint",void 0),E([(0,a.Z9)([])],e.prototype,"segments",void 0),E([(0,a.Zz)({x:0,y:0},xh)],e.prototype,"bounds",void 0),E([(0,a.Z9)(0)],e.prototype,"pageIndex",void 0),E([(0,a.Z9)(-1)],e.prototype,"zIndex",void 0),E([(0,a.Z9)(null)],e.prototype,"wrapper",void 0),E([(0,a.Z9)(!1)],e.prototype,"isDynamicStamp",void 0),E([(0,a.Z9)("")],e.prototype,"dynamicText",void 0),E([(0,a.Z9)("")],e.prototype,"annotName",void 0),E([(0,a.Z9)({})],e.prototype,"review",void 0),E([(0,a.Z9)([])],e.prototype,"comments",void 0),E([(0,a.Z9)("#000")],e.prototype,"fontColor",void 0),E([(0,a.Z9)(16)],e.prototype,"fontSize",void 0),E([(0,a.Z9)("Helvetica")],e.prototype,"fontFamily",void 0),E([(0,a.Z9)("None")],e.prototype,"fontStyle",void 0),E([(0,a.Z9)(!1)],e.prototype,"enableShapeLabel",void 0),E([(0,a.Z9)("label")],e.prototype,"labelContent",void 0),E([(0,a.Z9)("#ffffff00")],e.prototype,"labelFillColor",void 0),E([(0,a.Z9)(15)],e.prototype,"labelMaxLength",void 0),E([(0,a.Z9)(1)],e.prototype,"labelOpacity",void 0),E([(0,a.Z9)("")],e.prototype,"annotationSelectorSettings",void 0),E([(0,a.Z9)("#ffffff00")],e.prototype,"labelBorderColor",void 0),E([(0,a.Z9)("left")],e.prototype,"textAlign",void 0),E([(0,a.Z9)("")],e.prototype,"signatureName",void 0),E([(0,a.Z9)(0)],e.prototype,"minHeight",void 0),E([(0,a.Z9)(0)],e.prototype,"minWidth",void 0),E([(0,a.Z9)(0)],e.prototype,"maxHeight",void 0),E([(0,a.Z9)(0)],e.prototype,"maxWidth",void 0),E([(0,a.Z9)(!1)],e.prototype,"isLock",void 0),E([(0,a.Z9)("UI Drawn Annotation")],e.prototype,"annotationAddMode",void 0),E([(0,a.Z9)("")],e.prototype,"annotationSettings",void 0),E([(0,a.Z9)(16)],e.prototype,"previousFontSize",void 0),E([(0,a.Zz)({isBold:!1,isItalic:!1,isStrikeout:!1,isUnderline:!1},Mu)],e.prototype,"font",void 0),E([(0,a.Zz)({x:0,y:0},xh)],e.prototype,"labelBounds",void 0),E([(0,a.Z9)(null)],e.prototype,"customData",void 0),E([(0,a.Z9)(["None"])],e.prototype,"allowedInteractions",void 0),E([(0,a.Z9)(!0)],e.prototype,"isPrint",void 0),E([(0,a.Z9)(!1)],e.prototype,"isReadonly",void 0),E([(0,a.Z9)(0)],e.prototype,"pageRotation",void 0),E([(0,a.Z9)(!1)],e.prototype,"isAddAnnotationProgrammatically",void 0),e}(a.rt),Aa=function(s){function e(t,i,n,o){return s.call(this,t,i,n,o)||this}return Ta(e,s),E([(0,a.Z9)("")],e.prototype,"id",void 0),E([(0,a.Z9)("")],e.prototype,"signatureType",void 0),E([(0,a.Z9)("")],e.prototype,"name",void 0),E([(0,a.Z9)("")],e.prototype,"value",void 0),E([(0,a.Z9)(null)],e.prototype,"formFieldAnnotationType",void 0),E([(0,a.Z9)("#daeaf7ff")],e.prototype,"backgroundColor",void 0),E([(0,a.Z9)("black")],e.prototype,"color",void 0),E([(0,a.Z9)("#303030")],e.prototype,"borderColor",void 0),E([(0,a.Z9)("")],e.prototype,"tooltip",void 0),E([(0,a.Z9)(1)],e.prototype,"opacity",void 0),E([(0,a.Z9)(1)],e.prototype,"thickness",void 0),E([(0,a.Z9)(0)],e.prototype,"rotateAngle",void 0),E([(0,a.Zz)({x:0,y:0},xh)],e.prototype,"bounds",void 0),E([(0,a.Z9)(0)],e.prototype,"pageIndex",void 0),E([(0,a.Z9)(1)],e.prototype,"pageNumber",void 0),E([(0,a.Z9)(-1)],e.prototype,"zIndex",void 0),E([(0,a.Z9)(null)],e.prototype,"wrapper",void 0),E([(0,a.Z9)(16)],e.prototype,"fontSize",void 0),E([(0,a.Z9)("Helvetica")],e.prototype,"fontFamily",void 0),E([(0,a.Z9)("None")],e.prototype,"fontStyle",void 0),E([(0,a.Z9)("left")],e.prototype,"alignment",void 0),E([(0,a.Z9)(0)],e.prototype,"minHeight",void 0),E([(0,a.Z9)(0)],e.prototype,"minWidth",void 0),E([(0,a.Z9)(0)],e.prototype,"maxHeight",void 0),E([(0,a.Z9)(0)],e.prototype,"maxWidth",void 0),E([(0,a.Z9)(0)],e.prototype,"maxLength",void 0),E([(0,a.Z9)("visible")],e.prototype,"visibility",void 0),E([(0,a.Z9)(!0)],e.prototype,"isPrint",void 0),E([(0,a.Z9)(!1)],e.prototype,"isReadonly",void 0),E([(0,a.Z9)(!1)],e.prototype,"isChecked",void 0),E([(0,a.Z9)(!1)],e.prototype,"isSelected",void 0),E([(0,a.Z9)(!1)],e.prototype,"isRequired",void 0),E([(0,a.Z9)(!1)],e.prototype,"isMultiline",void 0),E([(0,a.Z9)("")],e.prototype,"options",void 0),E([(0,a.Z9)()],e.prototype,"signatureIndicatorSettings",void 0),E([(0,a.Zz)({isBold:!1,isItalic:!1,isStrikeout:!1,isUnderline:!1},Mu)],e.prototype,"font",void 0),E([(0,a.Z9)()],e.prototype,"selectedIndex",void 0),e}(a.rt),ib=function(){function s(){this.pageIdTemp=0,this.zIndexTemp=-1,this.childNodesTemp=[],this.objects=[],this.zIndexTemp=-1,this.pageIdTemp=0}return Object.defineProperty(s.prototype,"pageId",{get:function(){return this.pageIdTemp},set:function(e){this.pageIdTemp=e},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"zIndex",{get:function(){return this.zIndexTemp},set:function(e){this.zIndexTemp=e},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"objects",{get:function(){return this.childNodesTemp},set:function(e){this.childNodesTemp=e},enumerable:!0,configurable:!0}),s}(),nb=function(){var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])})(e,t)};return function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),Di=function(s,e,t,i){var r,n=arguments.length,o=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(s,e,t,i);else for(var l=s.length-1;l>=0;l--)(r=s[l])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},an=function(s){function e(){return null!==s&&s.apply(this,arguments)||this}return nb(e,s),e.prototype.init=function(t){var i=new dn;if(i.measureChildren=!1,i.children=[],this.formFields&&this.formFields.length>0)for(var n=0;n<this.formFields.length;n++)i.children.push(t.pdfViewer.nameTable[this.formFields[n].id].wrapper);else if(this.annotations)for(n=0;n<this.annotations.length;n++)(0,a.le)(this.annotations[n])||i.children.push(t.pdfViewer.nameTable[this.annotations[n].id].wrapper);return this.wrapper=i,i},Di([(0,a.Z9)(null)],e.prototype,"wrapper",void 0),Di([(0,a.FE)([],ka)],e.prototype,"annotations",void 0),Di([(0,a.FE)([],Aa)],e.prototype,"formFields",void 0),Di([(0,a.Z9)()],e.prototype,"width",void 0),Di([(0,a.Z9)()],e.prototype,"height",void 0),Di([(0,a.Z9)(0)],e.prototype,"rotateAngle",void 0),Di([(0,a.Z9)(0)],e.prototype,"offsetX",void 0),Di([(0,a.Z9)(0)],e.prototype,"offsetY",void 0),Di([(0,a.Zz)({x:.5,y:.5},se)],e.prototype,"pivot",void 0),e}(a.rt);function pt(s){return"Line"===s.shapeAnnotationType||"LineWidthArrowHead"===s.shapeAnnotationType||"Distance"===s.shapeAnnotationType||"Polygon"===s.shapeAnnotationType}function Tt(s,e){s&&e&&(s.formFieldAnnotationType?-1!==s.id.indexOf("diagram_helper")?(e.style.fill="transparent",e.style.strokeWidth=1,e.style.strokeDashArray=s.borderDashArray):(e.style.fill="transparent",e.style.strokeWidth=0):(e.style.fill=("#ffffff00"===s.fillColor?"transparent":s.fillColor)||"white",e.style.strokeColor=s.strokeColor?s.strokeColor:s.borderColor,e.style.color=s.strokeColor?s.strokeColor:s.borderColor,e.style.strokeWidth=s.thickness,("Image"===s.shapeAnnotationType||"SignatureText"===s.shapeAnnotationType||"SignatureImage"===s.shapeAnnotationType)&&(e.style.strokeWidth=0),e.style.strokeDashArray=s.borderDashArray,e.style.opacity=s.opacity))}function Ma(s){for(var e=0,t=0;t<s.length-1;t++)e+=se.findLength(s[t],s[t+1]);return e}function Ia(s,e){var t={width:s.actualSize.width,height:s.actualSize.height,x:s.offsetX-s.actualSize.width*s.pivot.x+.5,y:s.offsetY-s.actualSize.height*s.pivot.y+.5,angle:s.rotateAngle+s.parentTransform,fill:s.style.fill,stroke:s.style.strokeColor,pivotX:s.pivot.x,pivotY:s.pivot.y,strokeWidth:1,opacity:s.style.opacity,dashArray:s.style.strokeDashArray||"",visible:s.visible,id:s.id};return e&&(t.x+=e.tx,t.y+=e.ty),t}function _(s,e,t){var i={},n="properties";if(s){t=s.propName;var l=[],d=[];if((l=l.concat(Object.keys(s[n]||s))).push("version"),t){var h=function(s){return void 0!==s&&"string"==typeof s&&(s=(0,a.NA)(s,window)),s}(e);d=h?h(t):[],l=l.concat(d)}for(var p=function(s){switch(s){case"nodes":case"children":return["inEdges","outEdges","parentId","processId","nodeId","umlIndex","isPhase","isLane"];case"connectors":return["parentId"];case"annotation":case"annotations":return["nodeId"];case"shape":return["hasHeader"]}return[]}(t),f=0,c=l=l.concat(p);f<c.length;f++){var u=c[f];"historyManager"!==u&&("wrapper"!==u?s[u]&&s.hasOwnProperty("observers")||(i[u]=s[u]instanceof Array?sb(-1===p.indexOf(u)&&s[n]?s[n][u]:s[u],e,u):!(s[u]instanceof Array)&&s[u]instanceof HTMLElement?s[u].cloneNode(!0).innerHtml:!(s[u]instanceof Array)&&s[u]instanceof Object?_(-1===p.indexOf(u)&&s[n]?s[n][u]:s[u]):s[u]):s[u]&&(i[u]={actualSize:{width:s[u].actualSize.width,height:s[u].actualSize.height},offsetX:s[u].offsetX,offsetY:s[u].offsetY}))}}return i}function sb(s,e,t){var i;if(s){i=[];for(var n=0;n<s.length;n++)i.push(s[n]instanceof Array?s[n]:s[n]instanceof Object?_(s[n],e,t):s[n])}return i}function Ea(s,e){var t=s.vertexPoints.slice(0);return t&&t.length>0&&(s.sourcePoint=t[0],s.targetPoint=t[t.length-1]),t}function Iu(s,e,t){var i=new de,n=function(s,e){for(var i,t="",n=[],o=0;o<e.length;)n.push({x:e[o].x,y:e[o].y}),o++;n=Pu(s,n);for(var r=0;r<n.length;r++)i=n[r],0===r&&(t="M"+i.x+" "+i.y),r>0&&(t+=" L"+i.x+" "+i.y);return t}(s,e);return i=de.toBounds(e),t.width=i.width,t.height=i.height,t.offsetX=i.x+t.width/2,t.offsetY=i.y+t.height/2,t.data=n,s.wrapper&&(s.wrapper.offsetX=t.offsetX,s.wrapper.offsetY=t.offsetY,s.wrapper.width=i.width,s.wrapper.height=i.height),t}function Vh(s,e,t,i,n){e.offsetX=t.x,e.offsetY=t.y;var d,o=se.findAngle(t,i),r=function(s){return yb[s]}(n?s.sourceDecoraterShapes:s.taregetDecoraterShapes),l=0;d="LineWidthArrowHead"===s.shapeAnnotationType?new fe(12*(l=s.thickness),12*l):new fe(2*(l=s.thickness<=5?5:s.thickness),2*l),e.transform=jt.Self,Tt(s,e),e.style.fill="tranparent"!==s.fillColor?s.fillColor:"white",e.rotateAngle=o,e.data=r,e.canMeasurePath=!0,e.width=d.width,e.height=d.height,"Butt"===s.sourceDecoraterShapes&&(e.width=d.width-10,e.height=d.height+10)}function Eu(s,e,t,i){var n=new He;return Vh(s,n,e,t,i),n}function Pu(s,e){return e[0]=Du(s,e,!0),e[e.length-1]=Du(s,e,!1),e}function Du(s,e,t){var n,o,i={x:0,y:0},r=e.length,l=se.distancePoints(n=t?e[0]:e[r-1],o=t?e[1]:e[r-2]);l=0===l?1:l;var d=s.thickness;return i.x=Math.round(n.x+d*(o.x-n.x)/l),i.y=Math.round(n.y+d*(o.y-n.y)/l),se.adjustPoint(i,o,!0,.5)}function Bu(s,e,t){for(var i,n=0;n<s.wrapper.children.length;n++){var o=s.wrapper.children[n];o&&!(0,a.le)(o.content)&&(i=t.calculatePerimeter(s),o.content=i,o.childNodes[0].text=o.content,o.refreshTextElement())}return i}function Fu(s){if(s.wrapper&&s.wrapper.children)for(var e=0;e<s.wrapper.children.length;e++){var t=s.wrapper.children[e];t&&!(0,a.le)(t.content)&&(t.content=s.notes,t.childNodes[0].text=t.content,t.refreshTextElement())}}function Lu(s){var t,i,e="";for(e="M"+s[0].x+" "+s[0].y,i=1;i<s.length;i++)e+="L"+(t=s[i]).x+" "+t.y;return e+"Z"}function Nu(s,e){var t=new Oe;return Tt(s,t),t.style.fill="transparent",t.id=at(),t.horizontalAlignment="Center",t.rotateValue={y:10,angle:e},t.verticalAlignment="Top",t.relativeMode="Object",t.setOffsetWithRespectToBounds(.5,.5,"Absolute"),t.style.textWrapping="NoWrap",t}function Pa(s,e,t,i){var n=new He;n.offsetX=e.x,n.offsetY=e.y;var o=se.findAngle(e,t),r={x:(e.x+t.x)/2,y:(e.y+t.y)/2},l=he();pe(l,0-o,r.x,r.y);var d=R(l,e),h={x:d.x,y:d.y-s.leaderHeight};pe(l=he(),o,n.offsetX,n.offsetY),d=R(l,h);var p={x:e.x,y:e.y};n.offsetX=p.x,n.offsetY=p.y,n.transform=jt.Self;var f="M"+e.x+","+e.y+",L"+d.x+","+d.y+"Z",c=new fe(0,s.leaderHeight);return n.pivot.x=.5,i?(n.id="leader2_"+at(),n.pivot.y=0):(n.id="leader1_"+at(),n.pivot.y=1),Tt(s,n),n.rotateAngle=o,n.data=f,n.canMeasurePath=!0,n.width=c.width,n.height=c.height,n}function mb(s,e){var t=s.vertexPoints;if(!(0,a.le)(t))for(var i=0;i<t.length-1;i++){var n=t[i],o=t[i+1],r=de.toBounds([n,o]);if(r.Inflate(10),r.containsPoint(e)){var l=gb(e,n,o),p=$h({x1:n.x,x2:o.x,y1:n.y,y2:o.y},{x1:e.x,x2:l.x,y1:e.y,y2:l.y});if(p.enabled){var f=se.findLength(e,p.intersectPt);if(Math.abs(f)<10)return!0}else{var c=de.toBounds([e,e]);if(c.Inflate(3),c.containsPoint(n)||c.containsPoint(o))return!0}if(se.equals(e,l))return!0}}return!1}function gb(s,e,t){var i;i=se.findLength(e,s)>se.findLength(t,s)?t:e;var r=se.findAngle(e,t),l=se.findAngle(i,s),d=se.findLength(i,s),h=l+2*(r-l);return{x:i.x+d*Math.cos(h*Math.PI/180),y:i.y+d*Math.sin(h*Math.PI/180)}}var yb={OpenArrow:"M15.9,23 L5,16 L15.9,9 L17,10.7 L8.7,16 L17,21.3Z",Square:"M0,0 L10,0 L10,10 L0,10 z",Fletch:"M14.8,10c0,0-3.5,6,0.2,12c0,0-2.5-6-10.9-6C4.1,16,11.3,16,14.8,10z",OpenFetch:"M6,17c-0.6,0-1-0.4-1-1s0.4-1,1-1c10.9,0,11-5,11-5c0-0.6,0.4-1,1-1s1,0.4,1,1C19,10.3,18.9,17,6,17C6,17,6,17,6,17z M18,23c-0.5,0-1-0.4-1-1c0-0.2-0.3-5-11-5c-0.6,0-1-0.5-1-1s0.4-1,1-1c0,0,0,0,0,0c12.9,0,13,6.7,13,7    C19,22.6,18.6,23,18,23z",IndentedArrow:"M17,10c0,0-4.5,5.5,0,12L5,16L17,10z",OutdentedArrow:"M14.6,10c0,0,5.4,6,0,12L5,16L14.6,10z",DoubleArrow:"M19,10 L19,22 L13,16Z M12,10 L12,22 L6,16Z",Arrow:"M15,10 L15,22 L5,16Z",Diamond:"M12,23l-7-7l7-7l6.9,7L12,23z",Circle:"M0,50 A50,50,0 1 1 100,50 A50,50,0 1 1 0,50 Z",Butt:"M0,0 L0,90"},wb=function(){var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])})(e,t)};return function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),bb=function(s){function e(t){var i=s.call(this)||this;return i.templateFn=i.templateCompiler(t),i}return wb(e,s),e.prototype.templateCompiler=function(t){if(t)try{if(document.querySelectorAll(t).length)return(0,a.MY)(document.querySelector(t).innerHTML.trim())}catch(i){return(0,a.MY)(t)}},e.prototype.getNodeTemplate=function(){return this.templateFn},e}(mt),Sb=function(){function s(e){this.isDynamicStamps=!1,this.pdfViewer=e,this.renderer=new Bm("this.pdfViewer.element.id",!1),this.svgRenderer=new Fm}return s.prototype.renderLabels=function(e){var t=e.annotations;if(t)for(var i=0;i<t.length;i++)this.initObject(t[i])},s.prototype.createNewZindexTable=function(e){var t=new ib;return this.pdfViewer.zIndex++,t.pageId=this.pdfViewer.zIndex,this.pdfViewer.zIndexTable.push(t),t},s.prototype.getPageTable=function(e){var t;if(void 0!==this.pdfViewer.zIndexTable.length){for(var i=!0,n=0;n<this.pdfViewer.zIndexTable.length;n++)if(this.pdfViewer.zIndexTable[n].pageId===e){i=!1,t=this.pdfViewer.zIndexTable[n];break}i&&((t=this.createNewZindexTable(e)).pageId=e)}else t=this.createNewZindexTable(e);return t},s.prototype.setZIndex=function(e,t){if(void 0!==t.pageIndex){var i=this.getPageTable(t.pageIndex);if(-1===t.zIndex)i.zIndex++,t.zIndex=i.zIndex,i.objects.push(t);else{var o=i.objects.length;t.zIndex=o++,i.objects.push(t)}}},s.prototype.initObject=function(e){return this.setZIndex(this.pdfViewer.zIndex,e),function(){var s="measureElement";if(window[s])window[s].usageCount+=1;else{var i,e=So("div",{id:"measureElement",style:"visibility:hidden ; height: 0px ; width: 0px; overflow: hidden;"}),t=So("span",{style:"display:inline-block ; line-height: normal"});e.appendChild(t),i=So("img",{}),e.appendChild(i);var n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.setAttribute("xlink","http://www.w3.org/1999/xlink"),e.appendChild(n);var o=document.createElementNS("http://www.w3.org/2000/svg","path");n.appendChild(o),document.createTextNode("");var l=document.createElementNS("http://www.w3.org/2000/svg","text");l.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),n.appendChild(l),window[s]=e,window[s].usageCount=1,document.body.appendChild(e)}}(),pt(e)?(this.initLine(e),e.wrapper.measure(new fe(void 0,void 0)),e.wrapper.arrange(e.wrapper.desiredSize)):this.initNode(e),this.pdfViewer.nameTable[e.id]=e,e.formFieldAnnotationType&&this.nodePropertyChange(e,{bounds:{width:e.bounds.width,height:e.bounds.height}}),e},s.prototype.initNode=function(e){var i,t=this.initContainer(e);t.children||(t.children=[]),i||(i=this.init(e,t)),t.rotateAngle=e.rotateAngle,t.measure(new fe(e.wrapper.width,e.wrapper.height)),t.arrange(t.desiredSize),this.isDynamicStamps&&(this.pdfViewer.annotation.stampAnnotationModule.updateSessionStorage(e,null,"dynamicStamp"),this.isDynamicStamps=!1)},s.prototype.init=function(e,t){var i;i=new mt;var l=this.pdfViewer.annotationModule?this.pdfViewer.annotationModule.findAnnotationSettings(e):{},d=0,h=0,p=0,f=0;(l.minWidth||l.maxWidth||l.minHeight||l.maxHeight)&&(d=l.maxHeight?l.maxHeight:2e3,h=l.maxWidth?l.maxWidth:2e3,p=l.minHeight?l.minHeight:0,f=l.minWidth?l.minWidth:0);var c=!1;return(p||f||d||h)&&(c=!0),(i=e.formFieldAnnotationType?this.initFormFields(e,i,t):this.initAnnotationObject(e,void 0,i,t,!1,void 0,c,d,h,f,p)).id=e.id+"_content",i.relativeMode="Object","Stamp"!==e.shapeAnnotationType&&(void 0!==e.bounds.width&&(i.width=e.bounds.width,c&&(i.width<f||i.width>h)&&(i.width<f&&(i.width=f),i.width>h&&(i.width=h))),i.horizontalAlignment="Stretch",void 0!==e.bounds.height&&(i.height=e.bounds.height,c&&(i.height<p||i.width>d)&&(i.height<p&&(i.height=p),i.height>d&&(i.height=d))),Tt(e,i),this.pdfViewer.viewerBase.drawSignatureWithTool&&"SignatureText"===e.shapeAnnotationType&&(i.style.strokeWidth=0)),i.isRectElement=!0,i.verticalAlignment="Stretch",i},s.prototype.initFormFields=function(e,t,i){switch(e.formFieldAnnotationType){case"Textbox":case"PasswordField":case"Checkbox":case"RadioButton":case"DropdownList":case"ListBox":case"SignatureField":case"InitialField":(t=new bb).id=e.id+"_content",i.children.push(t)}return t},s.prototype.initAnnotationObject=function(e,t,i,n,o,r,l,d,h,p,f){switch(e.shapeAnnotationType){case"Ellipse":(t=new He).data="M80.5,12.5 C80.5,19.127417 62.59139,24.5 40.5,24.5 C18.40861,24.5 0.5,19.127417 0.5,12.5C0.5,5.872583 18.40861,0.5 40.5,0.5 C62.59139,0.5 80.5,5.872583 80.5,12.5 z",n.children.push(i=t),e.enableShapeLabel&&((c=this.textElement(e)).content=e.labelContent,c.style.color=e.fontColor,c.style.strokeColor=e.labelBorderColor,c.style.fill=e.labelFillColor,c.style.fontSize=e.fontSize,c.style.fontFamily=e.fontFamily,c.style.opacity=e.labelOpacity,n.children.push(c));break;case"Path":(t=new He).data=e.data,n.children.push(i=t);break;case"HandWrittenSignature":case"Ink":(t=new He).data=e.data,t.style.strokeColor=e.strokeColor,t.style.strokeWidth=e.thickness,t.style.opacity=e.opacity,n.children.push(i=t);break;case"Polygon":(t=new He).data=Lu(e.vertexPoints),n.children.push(i=t);break;case"Stamp":if(o=!0,this.isDynamicStamps=!0,e&&e.annotationAddMode&&("Existing Annotation"===e.annotationAddMode||"Imported Annotation"===e.annotationAddMode)&&(e.bounds.width=e.bounds.width-20,e.bounds.height=e.bounds.height-20),e.isDynamicStamp){n.horizontalAlignment="Left",(i=r=new mt).cornerRadius=10,i.style.fill=e.stampFillColor,i.style.strokeColor=e.stampStrokeColor,n.children.push(i);var u=this.textElement(e);(u=new Oe).style.fontFamily="Helvetica",u.style.fontSize=14,u.style.italic=!0,u.style.bold=!0,u.style.color=e.fillColor,u.rotateValue=void 0,u.content=e.dynamicText,u.relativeMode="Point",u.margin.left=10,u.margin.bottom=-7,u.setOffsetWithRespectToBounds(0,.57,null),u.relativeMode="Point",n.children.push(u),(m=new He).id=at()+"_stamp",m.data=e.data,m.width=e.bounds.width,l&&e.bounds.width>h&&(m.width=h,e.bounds.width=h),m.height=e.bounds.height/2,l&&e.bounds.height>d&&(m.height=d/2,e.bounds.height=d/2),m.rotateValue=void 0,m.margin.left=10,m.margin.bottom=-5,m.relativeMode="Point",m.setOffsetWithRespectToBounds(0,.1,null);var g=m;m.style.fill=e.fillColor,m.style.strokeColor=e.strokeColor,m.style.opacity=e.opacity,i.width=e.bounds.width+20,i.height=e.bounds.height+20,i.style.opacity=e.opacity,n.children.push(g)}else{var m;n.horizontalAlignment="Left",(i=r=new mt).cornerRadius=10,i.style.fill=e.stampFillColor,i.style.strokeColor=e.stampStrokeColor,n.children.push(i),(m=new He).id=at()+"_stamp",m.data=e.data,m.width=e.bounds.width,l&&e.bounds.width>h&&(m.width=h,e.bounds.width=h),m.height=e.bounds.height,l&&e.bounds.height>d&&(m.height=d,e.bounds.height=d),m.minWidth=m.width/2,m.minHeight=m.height/2,g=m,m.style.fill=e.fillColor,m.style.strokeColor=e.strokeColor,m.style.opacity=e.opacity,i.width=e.bounds.width+20,i.height=e.bounds.height+20,i.minWidth=m.width/2,i.minHeight=m.height/2,i.style.opacity=e.opacity,n.children.push(g),n.minHeight=i.minHeight+20,n.minWidth=i.minWidth+20}break;case"Image":case"SignatureImage":var v=new Za;v.source=e.data,(i=v).style.strokeWidth=0,n.children.push(i);break;case"Rectangle":var c;r=new mt,n.children.push(i=r),e.enableShapeLabel&&((c=this.textElement(e)).content=e.labelContent,c.style.color=e.fontColor,c.style.strokeColor=e.labelBorderColor,c.style.fill=e.labelFillColor,c.style.fontSize=e.fontSize,c.style.fontFamily=e.fontFamily,c.style.opacity=e.labelOpacity,n.children.push(c));break;case"Perimeter":(t=new He).data="M80.5,12.5 C80.5,19.127417 62.59139,24.5 40.5,24.5 C18.40861,24.5 0.5,19.127417 0.5,12.5C0.5,5.872583 18.40861,0.5 40.5,0.5 C62.59139,0.5 80.5,5.872583 80.5,12.5 z",i=t,Tt(e,t),n.children.push(i),(r=new mt).id="perimeter_"+at(),r.height=.2,r.width=.2,r.transform=jt.Self,r.horizontalAlignment="Stretch",this.setNodePosition(r,e),r.rotateAngle=e.rotateAngle,Tt(e,r),n.children.push(r);var y=this.textElement(e);(y=new Oe).content=y.content=Ma([{x:e.bounds.x,y:e.bounds.y},{x:e.bounds.x+e.bounds.width,y:e.bounds.y+e.bounds.height}]).toString(),y.rotateValue={y:-10,angle:e.rotateAngle},n.children.push(y);break;case"Radius":(t=new He).data="M80.5,12.5 C80.5,19.127417 62.59139,24.5 40.5,24.5 C18.40861,24.5 0.5,19.127417 0.5,12.5C0.5,5.872583 18.40861,0.5 40.5,0.5 C62.59139,0.5 80.5,5.872583 80.5,12.5 z",i=t,Tt(e,t),n.children.push(i),(r=new mt).id="radius_"+at(),r.height=.2,r.width=e.bounds.width/2,r.transform=jt.Self,this.setNodePosition(r,e),r.rotateAngle=e.rotateAngle,Tt(e,r),n.children.push(r);var b=this.textElement(e);e.enableShapeLabel&&(b.style.color=e.fontColor,b.style.strokeColor=e.labelBorderColor,b.style.fill=e.labelFillColor,b.style.fontSize=e.fontSize,b.style.fontFamily=e.fontFamily,b.style.opacity=e.labelOpacity),Ma([{x:e.bounds.x,y:e.bounds.y},{x:e.bounds.x+e.bounds.width,y:e.bounds.y+e.bounds.height}]),b.content=!this.pdfViewer.enableImportAnnotationMeasurement&&e.notes&&""!==e.notes?e.notes:this.pdfViewer.annotation.measureAnnotationModule.setConversion(e.bounds.width/2*this.pdfViewer.annotation.measureAnnotationModule.pixelToPointFactor,e),b.rotateValue={y:-10,x:e.bounds.width/4,angle:e.rotateAngle},n.children.push(b);break;case"StickyNotes":var S=new Za;S.source=e.data,S.width=e.bounds.width,S.height=e.bounds.height,S.style.strokeColor=e.strokeColor,S.style.strokeWidth=0,n.children.push(i=S);break;case"SignatureText":var x=new mt;x.style.strokeWidth=0,(i=x).style.strokeWidth=0,n.style.strokeWidth=0,n.children.push(i);var V=this.textElement(e);V.style.fontFamily=e.fontFamily,V.style.fontSize=e.fontSize,V.style.textAlign="Left",V.rotateValue=void 0,V.content=e.data,V.style.strokeWidth=0,n.children.push(V);break;case"FreeText":var T=new mt;n.children.push(i=T);var k=this.textElement(e);(k=new Oe).style.fontFamily=e.fontFamily,k.style.fontSize=e.fontSize,k.style.textAlign="Left","center"===e.textAlign.toLowerCase()?k.style.textAlign="Center":"right"===e.textAlign.toLowerCase()?k.style.textAlign="Right":"justify"===e.textAlign.toLowerCase()&&(k.style.textAlign="Justify"),k.style.color=e.fontColor,k.style.bold=e.font.isBold,k.style.italic=e.font.isItalic,!0===e.font.isUnderline?k.style.textDecoration="Underline":!0===e.font.isStrikeout&&(k.style.textDecoration="LineThrough"),k.rotateValue=void 0,k.content=e.dynamicText,k.style.opacity=e.opacity,k.margin.left=4,k.margin.top=e.fontSize/16*5,k.style.textWrapping=this.pdfViewer.freeTextSettings.enableAutoFit?"Wrap":"WrapWithOverflow",k.relativeMode="Point",k.setOffsetWithRespectToBounds(0,0,null),k.relativeMode="Point",n.children.push(k)}return i.id=e.id+"_content",i.relativeMode="Object",o||(void 0!==e.bounds.width&&(i.width=e.bounds.width,l&&(i.width<p||i.width>h)&&(i.width<p&&(i.width=p),i.width>h&&(i.width=h))),i.horizontalAlignment="Stretch",void 0!==e.bounds.height&&(i.height=e.bounds.height,l&&(i.height<f||i.width>d)&&(i.height<f&&(i.height=f),i.height>d&&(i.height=d))),Tt(e,i)),i.isRectElement=!0,i.verticalAlignment="Stretch",i},s.prototype.textElement=function(e){var t=new Oe;return Tt(e,t),t.horizontalAlignment="Center",t.verticalAlignment="SignatureText"===e.shapeAnnotationType?"Center":"Top",t.relativeMode="Object",t.setOffsetWithRespectToBounds(.5,.5,"Absolute"),t},s.prototype.setNodePosition=function(e,t){if("Perimeter"===t.shapeAnnotationType)e.offsetX=t.bounds.x+t.bounds.width/2,e.offsetY=t.bounds.y+t.bounds.height/2;else if("Radius"===t.shapeAnnotationType){var i={x:t.bounds.x+t.bounds.width/2+t.bounds.width/4,y:t.bounds.y+t.bounds.height/2},n={x:t.bounds.x+t.bounds.width/2,y:t.bounds.y+t.bounds.height/2},o=he();pe(o,t.rotateAngle,n.x,n.y);var r=R(o,i),l={x:r.x,y:r.y};e.offsetX=l.x,e.offsetY=l.y,e.width=t.bounds.width/2}},s.prototype.initContainer=function(e){e.id||(e.id=at());var t=new Xh;return t.id=e.id,t.offsetX=e.bounds.x+.5*e.bounds.width,t.offsetY=e.bounds.y+.5*e.bounds.height,t.style.fill="transparent",t.style.strokeColor="transparent",t.rotateAngle=e.rotateAngle,e.wrapper=t,t},s.prototype.initLine=function(e){e.id||(e.id=at());var t=new Xh,i=new He;i.id=e.id+"_path";var n=new He,o=new He;if(e.vertexPoints.length){e.sourcePoint=e.vertexPoints[0],e.targetPoint=e.vertexPoints[e.vertexPoints.length-1];for(var r=0;r<e.vertexPoints.length;r++)0!==r&&r!==e.vertexPoints.length-1&&e.segments.push(e.vertexPoints[r])}i=function(s,e){var t;return t=Ea(s),e.staticSize=!0,Tt(s,e=Iu(s,t,e)),e}(e,i);var l=[];l=Ea(e);var d=[],h=[];if("Distance"===e.shapeAnnotationType&&(d=function(s,e){var t=[],i=Pa(s,e[0],e[1]);return t.push(i),i=Pa(s,e[1],e[0],!0),t.push(i),t}(e,l),h=function(s,e,t,i){var n=[],o=se.findAngle(e[0],e[1]),r=Nu(s,o);return r.content=!i.enableImportAnnotationMeasurement&&s.notes&&""!==s.notes?s.notes:t.setConversion(Ma([e[0],e[1]])*t.pixelToPointFactor,s),r.rotateValue={y:-10,angle:o},!0===s.enableShapeLabel&&(r.style.strokeColor=s.labelBorderColor,r.style.fill=s.labelFillColor,r.style.fontSize=s.fontSize,r.style.color=s.fontColor,r.style.fontFamily=s.fontFamily),n.push(r),n}(e,l,this.pdfViewer.annotation.measureAnnotationModule,this.pdfViewer)),("Line"===e.shapeAnnotationType||"LineWidthArrowHead"===e.shapeAnnotationType)&&"Perimeter"===e.measureType&&(h=function(s,e,t,i){var n=[],o=se.findAngle(e[0],e[1]),r=Nu(s,o);return r.content=!i.enableImportAnnotationMeasurement&&s.notes&&""!==s.notes?s.notes:t.calculatePerimeter(s),!0===s.enableShapeLabel&&(r.style.strokeColor=s.labelBorderColor,r.style.fill=s.labelFillColor,r.style.fontSize=s.fontSize,r.style.color=s.fontColor,r.style.fontFamily=s.fontFamily),r.rotateValue={y:-10,angle:o},n.push(r),n}(e,l,this.pdfViewer.annotation.measureAnnotationModule,this.pdfViewer)),!0===e.enableShapeLabel&&"Distance"!==e.shapeAnnotationType&&"Perimeter"!==e.measureType){var p=se.findAngle(l[0],l[1]),f=this.textElement(e);f.id=at(),f.content=!this.pdfViewer.enableImportAnnotationMeasurement&&e.notes&&""!==e.notes?e.notes:e.labelContent,f.style.strokeColor=e.labelBorderColor,f.style.fill=e.labelFillColor,f.style.fontSize=e.fontSize,f.style.color=e.fontColor,f.style.fontFamily=e.fontFamily,f.style.opacity=e.labelOpacity,f.rotateValue={y:-10,angle:p},h.push(f)}l=Pu(e,l);var c=de.toBounds(l);t.width=c.width,t.height=c.height,t.offsetX=c.x+t.pivot.x*c.width,t.offsetY=c.y+t.pivot.y*c.height;var u=e.vertexPoints;if(("Line"===e.shapeAnnotationType||"LineWidthArrowHead"===e.shapeAnnotationType||"Distance"===e.shapeAnnotationType)&&(n=Eu(e,l[0],u[1],!0),o=Eu(e,l[l.length-1],u[u.length-2],!1)),n.id=e.id+"_srcDec",o.id=e.id+"_tarDec",i.style.fill="transparent",t.style.strokeColor="transparent",t.style.fill="transparent",t.style.strokeWidth=0,t.children=[],Tt(e,i),t.children.push(i),d.length>0)for(r=0;r<d.length;r++)t.children.push(d[r]);if(h.length>0)for(r=0;r<h.length;r++)t.children.push(h[r]);return t.children.push(n),t.children.push(o),"LineWidthArrowHead"===e.shapeAnnotationType&&(t.children[1].width=12*e.thickness,t.children[1].height=12*e.thickness,t.children[2].width=12*e.thickness,t.children[2].height=12*e.thickness),t.id=e.id,t.offsetX=i.offsetX,t.offsetY=i.offsetY,t.width=i.width,t.height=i.height,l=Ea(e),e.wrapper=t,t},s.prototype.add=function(e){var t=this.pdfViewer.allowServerDataBinding;return this.pdfViewer.enableServerDataBinding(!1),e.formFieldAnnotationType&&this.pdfViewer.formDesignerModule?(e=new Aa(this.pdfViewer,"formFields",e,!0),e=this.initObject(e),this.pdfViewer.formFields.push(e)):(e=new ka(this.pdfViewer,"annotations",e,!0),e=this.initObject(e),this.pdfViewer.annotations.push(e)),this.pdfViewer.enableServerDataBinding(t,!0),e},s.prototype.remove=function(e){var t=this.pdfViewer.allowServerDataBinding;this.pdfViewer.enableServerDataBinding(!1);for(var i=e.pageIndex,n=0;n<this.pdfViewer.annotations.length;n++){var o=this.pdfViewer.annotations[n];if(o.id&&(o.id===e.id||o.id.split("_")[0]===e.id)||o.wrapper&&o.wrapper.id===e.id){this.pdfViewer.annotations.splice(n,1);for(var r=this.getPageObjects(e.pageIndex),l=0;l<r.length;l++)r[l].id===e.id&&(r.splice(l,1),"Path"===e.shapeAnnotationType||"SignatureImage"===e.shapeAnnotationType||"SignatureText"===e.shapeAnnotationType?this.refreshCanvasDiagramLayer(void 0,i,e.id):this.pdfViewer.renderDrawing(void 0,i))}}for(n=0;n<this.pdfViewer.formFields.length;n++)if((d=this.pdfViewer.formFields[n]).id===e.id||d.wrapper.id===e.id)for(this.pdfViewer.formFields.splice(n,1),this.pdfViewer.formDesignerModule&&e.formFieldAnnotationType&&this.pdfViewer.formFieldCollection.splice(n,1),r=this.getPageObjects(e.pageIndex),l=0;l<r.length;l++){if(r[l].id===e.id){r.splice(l,1);break}r[l]&&r[l].id&&-1!==r[l].id.indexOf(e.id)&&r.splice(l,1)}if("Textbox"===e.formFieldAnnotationType||"Checkbox"===e.formFieldAnnotationType||"RadioButton"===e.formFieldAnnotationType||"PasswordField"===e.formFieldAnnotationType||"DropdownList"===e.formFieldAnnotationType||"ListBox"===e.formFieldAnnotationType||"SignatureField"===e.formFieldAnnotationType||"InitialField"===e.formFieldAnnotationType)for(n=0;n<this.pdfViewer.formFieldCollections.length;n++){var d;(d=this.pdfViewer.formFieldCollections[n]).id===e.id&&this.pdfViewer.formFieldCollections.splice(n,1)}if("Textbox"===e.formFieldAnnotationType||"Checkbox"===e.formFieldAnnotationType||"RadioButton"===e.formFieldAnnotationType||"PasswordField"===e.formFieldAnnotationType||"DropdownList"===e.formFieldAnnotationType||"ListBox"===e.formFieldAnnotationType||"SignatureField"===e.formFieldAnnotationType||"InitialField"===e.formFieldAnnotationType){var h=document.getElementById("form_field_"+e.id+"_content_html_element");h&&(h.remove(),this.pdfViewer.renderDrawing(void 0,i),this.pdfViewer.fireFormFieldRemoveEvent("formFieldRemove",{name:e.name,id:e.id,value:e.value,fontFamily:e.fontFamily,fontSize:e.fontSize,fontStyle:e.fontStyle,color:e.color,backgroundColor:e.backgroundColor,alignment:e.alignment,isReadonly:e.isReadonly,visibility:e.visibility,maxLength:e.maxLength,isRequired:e.isRequired,isPrint:e.isPrint,rotation:e.rotateAngle,tooltip:e.tooltip,options:e.options,isChecked:e.isChecked,isSelected:e.isSelected},e.pageIndex),this.pdfViewer.formDesignerModule.removeFieldsFromAnnotationCollections(e.id))}this.pdfViewer.enableServerDataBinding(t,!0)},s.prototype.getPageObjects=function(e){return this.getPageTable(e).objects},s.prototype.refreshCanvasDiagramLayer=function(e,t,i){if(e||(e=document.getElementById(this.pdfViewer.element.id+"_annotationCanvas_"+t)),e){var n=this.pdfViewer.viewerBase.getZoomFactor(),o=e.width/n,r=e.height/n,l=e.getContext("2d");l.lineCap="round",l.lineJoin="round",n<1&&(l.lineWidth=l.lineWidth/n);var h=n*this.pdfViewer.viewerBase.getWindowDevicePixelRatio();!a.AR.isDevice||a.AR.isDevice&&n<=.7?l.setTransform(h,0,0,h,0,0):l.setTransform(n,0,0,n,0,0),l.clearRect(0,0,o,r);for(var p=this.getPageObjects(t),f=0;f<p.length;f++){var c=void 0;e.id===this.pdfViewer.element.id+"_print_annotation_layer_"+t?p[f].isPrint&&((0,a.le)(c=this.pdfViewer.nameTable[p[f].id].wrapper)||Kh(e,[c],this.renderer)):Kh(e,[c=this.pdfViewer.nameTable[p[f].id].wrapper],this.renderer)}}},s.prototype.clearHighlighter=function(e){var t=this.getAdornerLayerSvg(this.pdfViewer.element.id+e+"_diagramAdornerLayer",e);if(t){var i=t.getElementById(t.id+"_highlighter");i&&i.parentNode.removeChild(i)}},s.prototype.getSelectorElement=function(e,t){var i=null,n=this.getAdornerLayerSvg(e,t);return n&&(i=n.getElementById(e+t+"_SelectorElement")),i},s.prototype.getAdornerLayerSvg=function(e,t){var i=null,n=ln(e+t+"_diagramAdornerLayer");return n&&(i=n.getElementsByClassName("e-adorner-layer"+t)[0]),i},s.prototype.clearSelectorLayer=function(e){var t=this.getAdornerLayerSvg(this.pdfViewer.element.id,e);if(t){var i=t.getElementById(this.pdfViewer.adornerSvgLayer.id+"_selected_region");i&&i.parentNode.removeChild(i),this.clearHighlighter(e);for(var n=this.getSelectorElement(this.pdfViewer.element.id,e).childNodes,o=void 0,r=n.length;r>0;r--)(o=n[r-1]).parentNode.removeChild(o)}},s.prototype.renderSelector=function(e,t,i,n){if(!i||n){var o=new fe,r=this.pdfViewer.selectedItems;if(this.clearSelectorLayer(e),r.wrapper){r.wrapper.measure(o);var l=this.pdfViewer.viewerBase.getZoomFactor();r.wrapper.arrange(r.wrapper.desiredSize),r.width=r.wrapper.actualSize.width,r.height=r.wrapper.actualSize.height,r.offsetX=r.wrapper.offsetX,r.offsetY=r.wrapper.offsetY,1===r.annotations.length&&(r.rotateAngle=r.annotations[0].rotateAngle,r.wrapper.rotateAngle=r.annotations[0].rotateAngle);var h=void 0;if(r.formFields.length)for(var p=0;p<r.formFields.length;p++){var f=r.formFields[p];(h=this.getSelectorElement(this.pdfViewer.element.id,e))&&f.pageIndex===e&&this.pdfViewer.designerMode&&this.renderResizeHandle(f.wrapper.children[0],h,r.thumbsConstraints,l,void 0,void 0,void 0,!1,!0,null,null,t),!this.pdfViewer.formDesignerModule||!f.formFieldAnnotationType||this.pdfViewer.viewerBase.isFormFieldSelect||this.pdfViewer.viewerBase.isFormFieldMouseDown||this.pdfViewer.viewerBase.isFormFieldMouseMove||(this.pdfViewer.viewerBase.isFormFieldSelect=!0,this.pdfViewer.fireFormFieldSelectEvent("formFieldSelect",{name:f.name,id:f.id,value:f.value,fontFamily:f.fontFamily,fontSize:f.fontSize,fontStyle:f.fontStyle,color:f.color,backgroundColor:f.backgroundColor,alignment:f.alignment,isReadonly:f.isReadonly,visibility:f.visibility,maxLength:f.maxLength,isRequired:f.isRequired,isPrint:f.isPrint,rotation:f.rotateAngle,tooltip:f.tooltip,options:f.options,isChecked:f.isChecked,isSelected:f.isSelected},f.pageIndex,this.pdfViewer.formDesignerModule.isProgrammaticSelection))}if(r.annotations.length)for(var u=0;u<r.annotations.length;u++)f=r.annotations[u],(h=this.getSelectorElement(this.pdfViewer.element.id,e))&&f.pageIndex===e&&("Distance"===f.shapeAnnotationType||"Line"===f.shapeAnnotationType||"LineWidthArrowHead"===f.shapeAnnotationType||"Polygon"===f.shapeAnnotationType?this.renderEndPointHandle(f,h,r.thumbsConstraints,{scale:l,tx:0,ty:0},void 0,void 0,!0,t):"StickyNotes"===f.shapeAnnotationType?this.renderResizeHandle(f.wrapper.children[0],h,r.thumbsConstraints,l,void 0,void 0,void 0,!1,!0,null,null,t):"Stamp"!==this.pdfViewer.tool&&this.renderResizeHandle(f.wrapper.children[0],h,r.thumbsConstraints,l,void 0,void 0,void 0,"Stamp"===f.shapeAnnotationType,!1,"Path"===f.shapeAnnotationType||"SignatureField"===f.formFieldAnnotationType||"InitialField"===f.formFieldAnnotationType,"FreeText"===f.shapeAnnotationType||"HandWrittenSignature"===f.shapeAnnotationType||"SignatureImage"===f.shapeAnnotationType||"Image"===f.shapeAnnotationType||"SignatureText"===f.shapeAnnotationType,t),!this.pdfViewer.viewerBase.isNewSignatureAdded&&("HandWrittenSignature"===f.shapeAnnotationType||"SignatureText"===f.shapeAnnotationType||"SignatureImage"===f.shapeAnnotationType)&&this.pdfViewer.annotationModule.selectSignature(f.signatureName,f.pageIndex,f),!this.pdfViewer.formDesignerModule||!f.formFieldAnnotationType||this.pdfViewer.viewerBase.isFormFieldSelect||this.pdfViewer.viewerBase.isFormFieldMouseDown||this.pdfViewer.viewerBase.isFormFieldMouseMove||(this.pdfViewer.viewerBase.isFormFieldSelect=!0,this.pdfViewer.fireFormFieldSelectEvent("formFieldSelect",{value:f.value,fontFamily:f.fontFamily,fontSize:f.fontSize,fontStyle:f.fontStyle,color:f.color,backgroundColor:f.backgroundColor,alignment:f.alignment,isReadonly:f.isReadonly,visibility:f.visibility,maxLength:f.maxLength,isRequired:f.isRequired,isPrint:f.isPrint,rotation:f.rotateAngle,tooltip:f.tooltip,options:f.options,isChecked:f.isChecked,isSelected:f.isSelected},f.pageIndex,this.pdfViewer.formDesignerModule.isProgrammaticSelection)),""!==f.annotName&&"SignatureText"!==f.annotName&&i&&f===i&&!f.formFieldAnnotationType&&!this.pdfViewer.viewerBase.isAddComment&&!this.pdfViewer.viewerBase.isAnnotationSelect&&!this.pdfViewer.viewerBase.isAnnotationMouseDown&&!this.pdfViewer.viewerBase.isAnnotationMouseMove&&!this.pdfViewer.viewerBase.isInkAdded&&!this.pdfViewer.viewerBase.isNewStamp&&(this.pdfViewer.viewerBase.isAnnotationSelect=!0,this.pdfViewer.annotationModule.annotationSelect(f.annotName,f.pageIndex,f)))}}},s.prototype.rotate=function(e,t,i,n){if(e)if(i=i||{x:e.wrapper.offsetX,y:e.wrapper.offsetY},e instanceof an){e.rotateAngle+=t,e.wrapper.rotateAngle+=t;var r=[];r=r.concat(e.annotations),this.rotateObjects(e,r,t,i,null,n)}else this.rotateObjects(e,[e],t,i)},s.prototype.rotateObjects=function(e,t,i,n,o,r){n=n||{};var l=he();pe(l,i,n.x,n.y);for(var d=0,h=t;d<h.length;d++){var p=h[d];if(p instanceof ka){if(!1!==o||e!==p){p.rotateAngle+=i,p.rotateAngle=(p.rotateAngle+360)%360;var f=R(l,{x:p.wrapper.offsetX,y:p.wrapper.offsetY});p.wrapper.offsetX=f.x,p.wrapper.offsetY=f.y,this.nodePropertyChange(p,{rotateAngle:p.rotateAngle})}this.renderSelector(p.pageIndex,r)}}},s.prototype.getParentSvg=function(e,t,i){return e&&e.id&&t&&"selector"===t?this.pdfViewer.adornerSvgLayer:i},s.prototype.renderBorder=function(e,t,i,n,o,r,l,d){var p=Ia(e,n);if(n=n||{scale:1,tx:0,ty:0},d){p.x*=n.scale,p.y*=n.scale,p.width*=n.scale,p.height*=n.scale;var f=this.pdfViewer.selectedItems.annotations.length>0?this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType:this.pdfViewer.selectedItems.formFields[0].formFieldAnnotationType;if(i&&"object"!=typeof i&&""!==i){var c=JSON.parse(i);p.stroke=""===c.selectionBorderColor?"black":c.selectionBorderColor,p.strokeWidth=1===i.selectionBorderThickness?1:c.selectionBorderThickness,(m=0===c.selectorLineDashArray.length?[6,3]:c.selectorLineDashArray).length>2&&(m=[m[0],m[1]]),p.dashArray=m.toString()}else this.getBorderSelector(f,p)}else{var m;if(p.x*=n.scale,p.y*=n.scale,p.width*=n.scale,p.height*=n.scale,p.fill="transparent",f=this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType,i&&"object"!=typeof i&&""!==i)c=JSON.parse(i),p.stroke=""===c.selectionBorderColor?"black":c.selectionBorderColor,p.strokeWidth=1===i.selectionBorderThickness?1:c.selectionBorderThickness,(m=0===c.selectorLineDashArray.length?[6,3]:c.selectorLineDashArray).length>2&&(m=[m[0],m[1]]),p.dashArray=m.toString();else if(!this.pdfViewer.designerMode)if("HandWrittenSignature"===f||"SignatureText"===f||"SignatureImage"===f||"Ink"===f){e.id.split("_");var v=this.pdfViewer.viewerBase.checkSignatureFormField(e.id);this.getSignBorder(f,p,v)}else this.getBorderSelector(f,p);p.class="e-pv-diagram-border",l&&(p.class+=" e-diagram-lane"),p.id="borderRect",p.id="borderRect",o||(p.class+=" e-disabled"),r&&(p.class+=" e-thick-border"),p.cornerRadius=0}var y=this.getParentSvg(e,"selector");this.svgRenderer.drawRectangle(t,p,this.pdfViewer.element.id,void 0,!0,y)},s.prototype.getSignBorder=function(e,t,i){if(i||"HandWrittenSignature"!==e&&"SignatureText"!==e&&"SignatureImage"!==e||!this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings)if("Ink"===e&&this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings)n=(0,a.le)(this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.selectionBorderColor)||""===this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.selectionBorderColor?"#0000ff":this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.selectionBorderColor,t.stroke=n,o=(0,a.le)(this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.selectionBorderThickness)?1:this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.selectionBorderThickness,t.strokeWidth=o,(r=(0,a.le)(this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.selectorLineDashArray)||0===this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.selectorLineDashArray.length?[4]:this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.selectorLineDashArray).length>2&&(r=[r[0],r[1]]),t.dashArray=r.toString();else{var l=this.pdfViewer.annotationSelectorSettings;t.stroke=n=""===l.selectionBorderColor?"black":l.selectionBorderColor,t.strokeWidth=1===l.selectionBorderThickness?1:l.selectionBorderThickness,(r=0===l.selectorLineDashArray.length?[6,3]:l.selectorLineDashArray).length>2&&(r=[r[0],r[1]]),t.dashArray=r.toString()}else{var n=(0,a.le)(this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.selectionBorderColor)||""===this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.selectionBorderColor?"#0000ff":this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.selectionBorderColor;t.stroke=n;var r,o=(0,a.le)(this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.selectionBorderThickness)?1:this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.selectionBorderThickness;t.strokeWidth=o,(r=(0,a.le)(this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.selectorLineDashArray)||0===this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.selectorLineDashArray.length?[4]:this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.selectorLineDashArray).length>2&&(r=[r[0],r[1]]),t.dashArray=r.toString()}},s.prototype.getBorderSelector=function(e,t){var i=this.pdfViewer.annotationSelectorSettings,n=(0,a.le)(i.selectionBorderColor)||""===i.selectionBorderColor?"black":i.selectionBorderColor;t.stroke=n,t.strokeWidth=(0,a.le)(i.selectionBorderThickness)||1===i.selectionBorderThickness?1:i.selectionBorderThickness;var o=(0,a.le)(i.selectorLineDashArray)||0===i.selectorLineDashArray.length?[6,3]:i.selectorLineDashArray;if(o.length>2&&(o=[o[0],o[1]]),t.dashArray=o.toString(),"Rectangle"===e&&this.pdfViewer.rectangleSettings.annotationSelectorSettings){var r=(0,a.le)(this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectionBorderColor)||""===this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectionBorderColor?"black":this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectionBorderColor;t.stroke=r;var l=(0,a.le)(this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectionBorderThickness)?1:this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectionBorderThickness;t.strokeWidth=l;var d=(0,a.le)(this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectorLineDashArray)||0===this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectorLineDashArray.length?[4]:this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectorLineDashArray;d.length>2&&(d=[d[0],d[1]]),t.dashArray=d.toString()}else if("Textbox"!==e&&"Checkbox"!==e&&"RadioButton"!==e&&"SignatureField"!==e&&"InitialField"!==e&&"DropdownList"!==e&&"ListBox"!==e&&"PasswordField"!==e||!this.pdfViewer.rectangleSettings.annotationSelectorSettings){if("Ellipse"===e&&this.pdfViewer.circleSettings.annotationSelectorSettings){var f=(0,a.le)(this.pdfViewer.circleSettings.annotationSelectorSettings.selectionBorderColor)||""===this.pdfViewer.circleSettings.annotationSelectorSettings.selectionBorderColor?"black":this.pdfViewer.circleSettings.annotationSelectorSettings.selectionBorderColor;t.stroke=f,l=(0,a.le)(this.pdfViewer.circleSettings.annotationSelectorSettings.selectionBorderThickness)?1:this.pdfViewer.circleSettings.annotationSelectorSettings.selectionBorderThickness,t.strokeWidth=l;var c=(0,a.le)(this.pdfViewer.circleSettings.annotationSelectorSettings.selectorLineDashArray)||0===this.pdfViewer.circleSettings.annotationSelectorSettings.selectorLineDashArray.length?[4]:this.pdfViewer.circleSettings.annotationSelectorSettings.selectorLineDashArray;c.length>2&&(c=[c[0],c[1]]),t.dashArray=c.toString()}else if("Radius"===e&&this.pdfViewer.radiusSettings.annotationSelectorSettings){var u=(0,a.le)(this.pdfViewer.radiusSettings.annotationSelectorSettings.selectionBorderColor)||""===this.pdfViewer.radiusSettings.annotationSelectorSettings.selectionBorderColor?"black":this.pdfViewer.radiusSettings.annotationSelectorSettings.selectionBorderColor;t.stroke=u,l=(0,a.le)(this.pdfViewer.radiusSettings.annotationSelectorSettings.selectionBorderThickness)?1:this.pdfViewer.radiusSettings.annotationSelectorSettings.selectionBorderThickness,t.strokeWidth=l;var m=(0,a.le)(this.pdfViewer.radiusSettings.annotationSelectorSettings.selectorLineDashArray)||0===this.pdfViewer.radiusSettings.annotationSelectorSettings.selectorLineDashArray.length?[4]:this.pdfViewer.radiusSettings.annotationSelectorSettings.selectorLineDashArray;m.length>2&&(m=[m[0],m[1]]),t.dashArray=m.toString()}else if("FreeText"===e&&this.pdfViewer.freeTextSettings.annotationSelectorSettings){var g=(0,a.le)(this.pdfViewer.freeTextSettings.annotationSelectorSettings.selectionBorderColor)||""===this.pdfViewer.freeTextSettings.annotationSelectorSettings.selectionBorderColor?"black":this.pdfViewer.freeTextSettings.annotationSelectorSettings.selectionBorderColor;t.stroke=g,l=(0,a.le)(this.pdfViewer.freeTextSettings.annotationSelectorSettings.selectionBorderThickness)?1:this.pdfViewer.freeTextSettings.annotationSelectorSettings.selectionBorderThickness,t.strokeWidth=l;var v=(0,a.le)(this.pdfViewer.freeTextSettings.annotationSelectorSettings.selectorLineDashArray)||0===this.pdfViewer.freeTextSettings.annotationSelectorSettings.selectorLineDashArray.length?[4]:this.pdfViewer.freeTextSettings.annotationSelectorSettings.selectorLineDashArray;v.length>2&&(v=[v[0],v[1]]),t.dashArray=v.toString()}else if("StickyNotes"===e&&this.pdfViewer.stickyNotesSettings.annotationSelectorSettings){var y=(0,a.le)(this.pdfViewer.stickyNotesSettings.annotationSelectorSettings.selectionBorderColor)||""===this.pdfViewer.stickyNotesSettings.annotationSelectorSettings.selectionBorderColor?"black":this.pdfViewer.stickyNotesSettings.annotationSelectorSettings.selectionBorderColor;t.stroke=y,l=(0,a.le)(this.pdfViewer.stickyNotesSettings.annotationSelectorSettings.selectionBorderThickness)?1:this.pdfViewer.stickyNotesSettings.annotationSelectorSettings.selectionBorderThickness,t.strokeWidth=l;var b=(0,a.le)(this.pdfViewer.stickyNotesSettings.annotationSelectorSettings.selectorLineDashArray)||0===this.pdfViewer.stickyNotesSettings.annotationSelectorSettings.selectorLineDashArray.length?[6,3]:this.pdfViewer.stickyNotesSettings.annotationSelectorSettings.selectorLineDashArray;b.length>2&&(b=[b[0],b[1]]),t.dashArray=b.toString()}else if("Stamp"===e&&this.pdfViewer.stampSettings.annotationSelectorSettings){var C=(0,a.le)(this.pdfViewer.stampSettings.annotationSelectorSettings.selectionBorderColor)||""===this.pdfViewer.stampSettings.annotationSelectorSettings.selectionBorderColor?"#0000ff":this.pdfViewer.stampSettings.annotationSelectorSettings.selectionBorderColor;t.stroke=C,l=(0,a.le)(this.pdfViewer.stampSettings.annotationSelectorSettings.selectionBorderThickness)?1:this.pdfViewer.stampSettings.annotationSelectorSettings.selectionBorderThickness,t.strokeWidth=l;var S=(0,a.le)(this.pdfViewer.stampSettings.annotationSelectorSettings.selectorLineDashArray)||0===this.pdfViewer.stampSettings.annotationSelectorSettings.selectorLineDashArray.length?[4]:this.pdfViewer.stampSettings.annotationSelectorSettings.selectorLineDashArray;S.length>2&&(S=[S[0],S[1]]),t.dashArray=S.toString()}}else{var h=(0,a.le)(this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectionBorderColor)||""===this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectionBorderColor?"black":this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectionBorderColor;t.stroke=h;l=(0,a.le)(this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectionBorderThickness)?1:this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectionBorderThickness;t.strokeWidth=l;var p=(0,a.le)(this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectorLineDashArray)||0===this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectorLineDashArray.length?[4]:this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectorLineDashArray;p.length>2&&(p=[p[0],p[1]]),t.dashArray=p.toString()}},s.prototype.renderCircularHandle=function(e,t,i,n,o,r,l,d,h,p,f,c,u,m){var g=t,v={x:i,y:n};if(d=d||{scale:1,tx:0,ty:0},0!==g.rotateAngle||0!==g.parentTransform){var y=he();pe(y,g.rotateAngle+g.parentTransform,g.offsetX,g.offsetY),v=R(y,v)}var C,b=Ia(g);this.getResizerColors(C=this.pdfViewer.selectedItems.annotations.length>0&&this.pdfViewer.selectedItems.annotations[0].measureType?this.pdfViewer.selectedItems.annotations[0].measureType:this.pdfViewer.selectedItems.formFields.length>0?this.pdfViewer.selectedItems.formFields[0].formFieldAnnotationType:this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType,b,m,d),this.getShapeSize(C,b,m,d),b.strokeWidth=1,void 0!==c&&(b.id="segmentEnd_"+c),b.centerX=(v.x+d.tx)*d.scale,b.centerY=(v.y+d.ty)*d.scale,b.angle=0,b.id=e,b.visible=r,b.class=u,b.opacity=1,h&&(b.class+=" e-connected"),p&&(b.visible=!1),b.x=v.x*d.scale-b.width/2,b.y=v.y*d.scale-b.height/2;var S=this.getParentSvg(t,"selector");"Square"===this.getShape(C,m)?this.svgRenderer.drawRectangle(o,b,e,void 0,!0,S):"Circle"===this.getShape(C,m)&&this.svgRenderer.drawCircle(o,b,1)},s.prototype.getShapeSize=function(e,t,i,n){if(i&&"object"!=typeof i&&""!==i){var o=JSON.parse(i);t.radius=((0,a.le)(o.resizerSize)||8===o.resizerSize?8:o.resizerSize)/2,t.width=((0,a.le)(o.resizerSize)||8===o.resizerSize?8:o.resizerSize)*n.scale,t.height=((0,a.le)(o.resizerSize)||8===o.resizerSize?8:o.resizerSize)*n.scale}else t.radius=((0,a.le)((o=this.pdfViewer.annotationSelectorSettings).resizerSize)||8===o.resizerSize?8:o.resizerSize)/2,t.width=((0,a.le)(o.resizerSize)||8===o.resizerSize?8:o.resizerSize)*n.scale,t.height=((0,a.le)(o.resizerSize)||8===o.resizerSize?8:o.resizerSize)*n.scale,"Line"===e&&this.pdfViewer.lineSettings.annotationSelectorSettings?(t.radius=((0,a.le)(this.pdfViewer.lineSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.lineSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.lineSettings.annotationSelectorSettings.resizerSize)/2,t.width=((0,a.le)(this.pdfViewer.lineSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.lineSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.lineSettings.annotationSelectorSettings.resizerSize)*n.scale,t.height=((0,a.le)(this.pdfViewer.lineSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.lineSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.lineSettings.annotationSelectorSettings.resizerSize)*n.scale):"LineWidthArrowHead"===e&&this.pdfViewer.arrowSettings.annotationSelectorSettings?(t.radius=((0,a.le)(this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerSize)/2,t.width=((0,a.le)(this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerSize)*n.scale,t.height=((0,a.le)(this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerSize)*n.scale):"Rectangle"===e&&this.pdfViewer.rectangleSettings.annotationSelectorSettings?(t.radius=((0,a.le)(this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerSize)/2,t.width=((0,a.le)(this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerSize)*n.scale,t.height=((0,a.le)(this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerSize)*n.scale):"Ellipse"===e&&this.pdfViewer.circleSettings.annotationSelectorSettings?(t.radius=((0,a.le)(this.pdfViewer.circleSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.circleSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.circleSettings.annotationSelectorSettings.resizerSize)/2,t.width=((0,a.le)(this.pdfViewer.circleSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.circleSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.circleSettings.annotationSelectorSettings.resizerSize)*n.scale,t.height=((0,a.le)(this.pdfViewer.circleSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.circleSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.circleSettings.annotationSelectorSettings.resizerSize)*n.scale):"Distance"===e&&this.pdfViewer.distanceSettings.annotationSelectorSettings?(t.radius=((0,a.le)(this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerSize)/2,t.width=((0,a.le)(this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerSize)*n.scale,t.height=((0,a.le)(this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerSize)*n.scale):"Polygon"===e&&this.pdfViewer.polygonSettings.annotationSelectorSettings?(t.radius=((0,a.le)(this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerSize)/2,t.width=((0,a.le)(this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerSize)*n.scale,t.height=((0,a.le)(this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerSize)*n.scale):"Radius"===e&&this.pdfViewer.radiusSettings.annotationSelectorSettings?(t.radius=((0,a.le)(this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerSize)/2,t.width=((0,a.le)(this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerSize)*n.scale,t.height=((0,a.le)(this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerSize)*n.scale):"Stamp"===e&&this.pdfViewer.stampSettings.annotationSelectorSettings?(t.radius=((0,a.le)(this.pdfViewer.stampSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.stampSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.stampSettings.annotationSelectorSettings.resizerSize)/2,t.width=((0,a.le)(this.pdfViewer.stampSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.stampSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.stampSettings.annotationSelectorSettings.resizerSize)*n.scale,t.height=((0,a.le)(this.pdfViewer.stampSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.stampSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.stampSettings.annotationSelectorSettings.resizerSize)*n.scale):"FreeText"===e&&this.pdfViewer.freeTextSettings.annotationSelectorSettings?(t.radius=((0,a.le)(this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerSize)/2,t.width=((0,a.le)(this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerSize)*n.scale,t.height=((0,a.le)(this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerSize)*n.scale):"HandWrittenSignature"!==e&&"SignatureText"!==e&&"SignatureImage"!==e||!this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings?"Perimeter"===e&&this.pdfViewer.perimeterSettings.annotationSelectorSettings?(t.radius=((0,a.le)(this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerSize)/2,t.width=((0,a.le)(this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerSize)*n.scale,t.height=((0,a.le)(this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerSize)*n.scale):"Area"===e&&this.pdfViewer.areaSettings.annotationSelectorSettings?(t.radius=((0,a.le)(this.pdfViewer.areaSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.areaSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.areaSettings.annotationSelectorSettings.resizerSize)/2,t.width=((0,a.le)(this.pdfViewer.areaSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.areaSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.areaSettings.annotationSelectorSettings.resizerSize)*n.scale,t.height=((0,a.le)(this.pdfViewer.areaSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.areaSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.areaSettings.annotationSelectorSettings.resizerSize)*n.scale):"Volume"===e&&this.pdfViewer.volumeSettings.annotationSelectorSettings?(t.radius=((0,a.le)(this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerSize)/2,t.width=((0,a.le)(this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerSize)*n.scale,t.height=((0,a.le)(this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerSize)*n.scale):"Ink"===e&&this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings&&(t.radius=((0,a.le)(this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerSize)/2,t.width=((0,a.le)(this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerSize)*n.scale,t.height=((0,a.le)(this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerSize)*n.scale):(t.radius=((0,a.le)(this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerSize)/2,t.width=((0,a.le)(this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerSize)*n.scale,t.height=((0,a.le)(this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerSize)*n.scale)},s.prototype.getShape=function(e,t){var i;if(t&&"object"!=typeof t&&""!==t){var n=JSON.parse(t);i=(0,a.le)(n.resizerShape)||"Square"===n.resizerShape?"Square":n.resizerShape}else i=(0,a.le)((n=this.pdfViewer.annotationSelectorSettings).resizerShape)||"Square"===n.resizerShape?"Square":n.resizerShape,"Line"===e&&this.pdfViewer.lineSettings.annotationSelectorSettings?i=(0,a.le)(this.pdfViewer.lineSettings.annotationSelectorSettings.resizerShape)||"Square"===this.pdfViewer.lineSettings.annotationSelectorSettings.resizerShape?"Square":this.pdfViewer.lineSettings.annotationSelectorSettings.resizerShape:"LineWidthArrowHead"===e&&this.pdfViewer.arrowSettings.annotationSelectorSettings?i=(0,a.le)(this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerShape)||"Square"===this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerShape?"Square":this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerShape:"Rectangle"===e&&this.pdfViewer.rectangleSettings.annotationSelectorSettings?i=(0,a.le)(this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerShape)||"Square"===this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerShape?"Square":this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerShape:"Ellipse"===e&&this.pdfViewer.circleSettings.annotationSelectorSettings?i=(0,a.le)(this.pdfViewer.circleSettings.annotationSelectorSettings.resizerShape)||"Square"===this.pdfViewer.circleSettings.annotationSelectorSettings.resizerShape?"Square":this.pdfViewer.circleSettings.annotationSelectorSettings.resizerShape:"Polygon"===e&&this.pdfViewer.polygonSettings.annotationSelectorSettings?i=(0,a.le)(this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerShape)||"Square"===this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerShape?"Square":this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerShape:"Distance"===e&&this.pdfViewer.distanceSettings.annotationSelectorSettings?i=(0,a.le)(this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerShape)||"Square"===this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerShape?"Square":this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerShape:"Radius"===e&&this.pdfViewer.radiusSettings.annotationSelectorSettings?i=(0,a.le)(this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerShape)||"Square"===this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerShape?"Square":this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerShape:"Stamp"===e&&this.pdfViewer.stampSettings.annotationSelectorSettings?i=(0,a.le)(this.pdfViewer.stampSettings.annotationSelectorSettings.resizerShape)||"Square"===this.pdfViewer.stampSettings.annotationSelectorSettings.resizerShape?"Square":this.pdfViewer.stampSettings.annotationSelectorSettings.resizerShape:"FreeText"===e&&this.pdfViewer.freeTextSettings.annotationSelectorSettings?i=(0,a.le)(this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerShape)||"Square"===this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerShape?"Square":this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerShape:("HandWrittenSignature"===e||"SignatureText"===e||"SignatureImage"===e)&&this.pdfViewer.handWrittenSignatureSettings&&this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings?i=(0,a.le)(this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerShape)||"Square"===this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerShape?"Square":this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerShape:"Perimeter"===e&&this.pdfViewer.perimeterSettings.annotationSelectorSettings?i=(0,a.le)(this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerShape)||"Square"===this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerShape?"Square":this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerShape:"Area"===e&&this.pdfViewer.areaSettings.annotationSelectorSettings?i=(0,a.le)(this.pdfViewer.areaSettings.annotationSelectorSettings.resizerShape)||"Square"===this.pdfViewer.areaSettings.annotationSelectorSettings.resizerShape?"Square":this.pdfViewer.areaSettings.annotationSelectorSettings.resizerShape:"Volume"===e&&this.pdfViewer.volumeSettings.annotationSelectorSettings?i=(0,a.le)(this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerShape)||"Square"===this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerShape?"Square":this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerShape:"Ink"===e&&this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings&&(i=(0,a.le)(this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerShape)||"Square"===this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerShape?"Square":this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerShape);return i},s.prototype.getResizerColors=function(e,t,i,n){if(i&&"object"!=typeof i&&""!==i){var o=JSON.parse(i);t.stroke=(0,a.le)(o.resizerBorderColor)||"black"===o.resizerBorderColor?"black":o.resizerBorderColor,t.fill=(0,a.le)(o.resizerFillColor)||"#FF4081"===o.resizerFillColor?"#FF4081":o.resizerFillColor}else t.stroke=(0,a.le)((o=this.pdfViewer.annotationSelectorSettings).resizerBorderColor)||"black"===o.resizerBorderColor?"black":o.resizerBorderColor,t.fill=(0,a.le)(o.resizerFillColor)||"#FF4081"===o.resizerFillColor?"#FF4081":o.resizerFillColor,"Line"===e&&this.pdfViewer.lineSettings.annotationSelectorSettings?(t.stroke=(0,a.le)(this.pdfViewer.lineSettings.annotationSelectorSettings.resizerBorderColor)||"black"===this.pdfViewer.lineSettings.annotationSelectorSettings.resizerBorderColor?"black":this.pdfViewer.lineSettings.annotationSelectorSettings.resizerBorderColor,t.fill=(0,a.le)(this.pdfViewer.lineSettings.annotationSelectorSettings.resizerFillColor)||"#FF4081"===this.pdfViewer.lineSettings.annotationSelectorSettings.resizerFillColor?"#FF4081":this.pdfViewer.lineSettings.annotationSelectorSettings.resizerFillColor):"LineWidthArrowHead"===e&&this.pdfViewer.arrowSettings.annotationSelectorSettings?(t.stroke=(0,a.le)(this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerBorderColor)||"black"===this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerBorderColor?"black":this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerBorderColor,t.fill=(0,a.le)(this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerFillColor)||"#FF4081"===this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerFillColor?"#FF4081":this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerFillColor):"Rectangle"===e&&this.pdfViewer.rectangleSettings.annotationSelectorSettings?(t.stroke=(0,a.le)(this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerBorderColor)||"black"===this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerBorderColor?"black":this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerBorderColor,t.fill=(0,a.le)(this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerFillColor)||"#FF4081"===this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerFillColor?"#FF4081":this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerFillColor):"Ellipse"===e&&this.pdfViewer.circleSettings.annotationSelectorSettings?(t.stroke=(0,a.le)(this.pdfViewer.circleSettings.annotationSelectorSettings.resizerBorderColor)||"black"===this.pdfViewer.circleSettings.annotationSelectorSettings.resizerBorderColor?"black":this.pdfViewer.circleSettings.annotationSelectorSettings.resizerBorderColor,t.fill=(0,a.le)(this.pdfViewer.circleSettings.annotationSelectorSettings.resizerFillColor)||"#FF4081"===this.pdfViewer.circleSettings.annotationSelectorSettings.resizerFillColor?"#FF4081":this.pdfViewer.circleSettings.annotationSelectorSettings.resizerFillColor):"Distance"===e&&this.pdfViewer.distanceSettings.annotationSelectorSettings?(t.stroke=(0,a.le)(this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerBorderColor)||"black"===this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerBorderColor?"black":this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerBorderColor,t.fill=(0,a.le)(this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerFillColor)||"#FF4081"===this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerFillColor?"#FF4081":this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerFillColor):"Polygon"===e&&this.pdfViewer.polygonSettings.annotationSelectorSettings?(t.stroke=(0,a.le)(this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerBorderColor)||"black"===this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerBorderColor?"black":this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerBorderColor,t.fill=(0,a.le)(this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerFillColor)||"#FF4081"===this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerFillColor?"#FF4081":this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerFillColor):"Radius"===e&&this.pdfViewer.radiusSettings.annotationSelectorSettings?(t.stroke=(0,a.le)(this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerBorderColor)||"black"===this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerBorderColor?"black":this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerBorderColor,t.fill=(0,a.le)(this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerFillColor)||"#FF4081"===this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerFillColor?"#FF4081":this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerFillColor):"Stamp"===e&&this.pdfViewer.stampSettings.annotationSelectorSettings?(t.stroke=(0,a.le)(this.pdfViewer.stampSettings.annotationSelectorSettings.resizerBorderColor)||"black"===this.pdfViewer.stampSettings.annotationSelectorSettings.resizerBorderColor?"black":this.pdfViewer.stampSettings.annotationSelectorSettings.resizerBorderColor,t.fill=(0,a.le)(this.pdfViewer.stampSettings.annotationSelectorSettings.resizerFillColor)||"#FF4081"===this.pdfViewer.stampSettings.annotationSelectorSettings.resizerFillColor?"#FF4081":this.pdfViewer.stampSettings.annotationSelectorSettings.resizerFillColor):"FreeText"===e&&this.pdfViewer.freeTextSettings.annotationSelectorSettings?(t.stroke=(0,a.le)(this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerBorderColor)||"black"===this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerBorderColor?"black":this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerBorderColor,t.fill=(0,a.le)(this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerFillColor)||"#FF4081"===this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerFillColor?"#FF4081":this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerFillColor):"HandWrittenSignature"!==e&&"SignatureText"!==e&&"SignatureImage"!==e||!this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings?"Perimeter"===e&&this.pdfViewer.perimeterSettings.annotationSelectorSettings?(t.stroke=(0,a.le)(this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerBorderColor)||"black"===this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerBorderColor?"black":this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerBorderColor,t.fill=(0,a.le)(this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerFillColor)||"#FF4081"===this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerFillColor?"#FF4081":this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerFillColor):"Area"===e&&this.pdfViewer.areaSettings.annotationSelectorSettings?(t.stroke=(0,a.le)(this.pdfViewer.areaSettings.annotationSelectorSettings.resizerBorderColor)||"black"===this.pdfViewer.areaSettings.annotationSelectorSettings.resizerBorderColor?"black":this.pdfViewer.areaSettings.annotationSelectorSettings.resizerBorderColor,t.fill=(0,a.le)(this.pdfViewer.areaSettings.annotationSelectorSettings.resizerFillColor)||"#FF4081"===this.pdfViewer.areaSettings.annotationSelectorSettings.resizerFillColor?"#FF4081":this.pdfViewer.areaSettings.annotationSelectorSettings.resizerFillColor):"Volume"===e&&this.pdfViewer.volumeSettings.annotationSelectorSettings?(t.stroke=(0,a.le)(this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerBorderColor)||"black"===this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerBorderColor?"black":this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerBorderColor,t.fill=(0,a.le)(this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerFillColor)||"#FF4081"===this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerFillColor?"#FF4081":this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerFillColor):"Ink"===e&&this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings&&(t.stroke=(0,a.le)(this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerBorderColor)||"black"===this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerBorderColor?"black":this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerBorderColor,t.fill=(0,a.le)(this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerFillColor)||"#FF4081"===this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerFillColor?"#FF4081":this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerFillColor):(t.stroke=(0,a.le)(this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerBorderColor)||"black"===this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerBorderColor?"black":this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerBorderColor,t.fill=(0,a.le)(this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerFillColor)||"#FF4081"===this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerFillColor?"#FF4081":this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerFillColor)},s.prototype.renderRotateThumb=function(e,t,i,n,o){new He;var l,p=e.offsetX-e.actualSize.width*e.pivot.x+e.pivot.x*e.actualSize.width,f=e.offsetY-e.actualSize.height*e.pivot.y;if(l={x:p=(p+i.tx)*i.scale,y:(f=(f+i.ty)*i.scale)-25},0!==e.rotateAngle||0!==e.parentTransform){var c=he();pe(c,e.rotateAngle+e.parentTransform,(i.tx+e.offsetX)*i.scale,(i.ty+e.offsetY)*i.scale),l=R(c,l)}var u=Ia(e);u.stroke="black",u.strokeWidth=1,u.opacity=1,u.fill="#FF4081",u.centerX=l.x,u.centerY=l.y,u.radius=4,u.angle=0,u.visible=!0,u.class="e-diagram-rotate-handle",u.id="rotateThumb",this.svgRenderer.drawCircle(t,u,Re.Rotate,{"aria-label":"Thumb to rotate the selected object"})},s.prototype.renderResizeHandle=function(e,t,i,n,o,r,l,d,h,p,f,c){var u=e.offsetX-e.actualSize.width*e.pivot.x,m=e.offsetY-e.actualSize.height*e.pivot.y,g=e.actualSize.height,v=e.actualSize.width,y={scale:n,tx:0,ty:0};d&&(this.renderPivotLine(e,t,y),this.renderRotateThumb(e,t,y)),f&&(d=!0),this.renderBorder(e,t,c,y,r,l,!0,h);var b=e.actualSize.width*n,C=e.actualSize.height*n,S=this.pdfViewer.selectedItems.annotations.length>0?this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType:this.pdfViewer.selectedItems.formFields[0].formFieldAnnotationType,x=!1;if(!this.pdfViewer.formDesignerModule){var V=this.pdfViewer.selectedItems.annotations[0],T=this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(V);(this.pdfViewer.annotationModule.checkIsLockSettings(V)||V.annotationSettings.isLock)&&this.getAllowedInteractions(T)&&(x=!0)}var A=this.getResizerLocation(S,c);(A<1||A>3)&&(A=3);var M=!1;this.pdfViewer.selectedItems.annotations[0]&&("Ellipse"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType||"Radius"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType||"Rectangle"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType||"Ink"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType)&&(M=!0),!this.pdfViewer.viewerBase.checkSignatureFormField(e.id)&&!l&&!h&&!p&&!x&&((d||M&&b>=40&&C>=40&&(1===A||3===A))&&(this.renderCircularHandle("resizeNorthWest",e,u,m,t,!0,i&Re.ResizeNorthWest,y,void 0,o,{"aria-label":"Thumb to resize the selected object on top left side direction"},void 0,"e-pv-diagram-resize-handle e-northwest",c),this.renderCircularHandle("resizeNorthEast",e,u+v,m,t,!0,i&Re.ResizeNorthEast,y,void 0,o,{"aria-label":"Thumb to resize the selected object on top right side direction"},void 0,"e-pv-diagram-resize-handle e-northeast",c),this.renderCircularHandle("resizeSouthWest",e,u,m+g,t,!0,i&Re.ResizeSouthWest,y,void 0,o,{"aria-label":"Thumb to resize the selected object on bottom left side direction"},void 0,"e-pv-diagram-resize-handle e-southwest",c),this.renderCircularHandle("resizeSouthEast",e,u+v,m+g,t,!0,i&Re.ResizeSouthEast,y,void 0,o,{"aria-label":"Thumb to resize the selected object on bottom right side direction"},void 0,"e-pv-diagram-resize-handle e-southeast",c)),(!d&&!M||M&&(2===A||3===A||!(b>=40&&C>=40)&&1===A))&&(this.renderCircularHandle("resizeNorth",e,u+v/2,m,t,!0,i&Re.ResizeNorth,y,void 0,o,{"aria-label":"Thumb to resize the selected object on top side direction"},void 0,"e-pv-diagram-resize-handle e-north",c),this.renderCircularHandle("resizeSouth",e,u+v/2,m+g,t,!0,i&Re.ResizeSouth,y,void 0,o,{"aria-label":"Thumb to resize the selected object on bottom side direction"},void 0,"e-pv-diagram-resize-handle e-south",c),this.renderCircularHandle("resizeWest",e,u,m+g/2,t,!0,i&Re.ResizeWest,y,void 0,o,{"aria-label":"Thumb to resize the selected object on left side direction"},void 0,"e-pv-diagram-resize-handle e-west",c),this.renderCircularHandle("resizeEast",e,u+v,m+g/2,t,!0,i&Re.ResizeEast,y,void 0,o,{"aria-label":"Thumb to resize the selected object on right side direction"},void 0,"e-pv-diagram-resize-handle e-east",c))),("Textbox"===S||"Checkbox"===S||"RadioButton"===S||"SignatureField"===S||"InitialField"===S||"DropdownList"===S||"ListBox"===S||"PasswordField"===S)&&(this.renderCircularHandle("resizeNorth",e,u+v/2,m,t,!0,i&Re.ResizeNorth,y,void 0,o,{"aria-label":"Thumb to resize the selected object on top side direction"},void 0,"e-pv-diagram-resize-handle e-north",c),this.renderCircularHandle("resizeSouth",e,u+v/2,m+g,t,!0,i&Re.ResizeSouth,y,void 0,o,{"aria-label":"Thumb to resize the selected object on bottom side direction"},void 0,"e-pv-diagram-resize-handle e-south",c),this.renderCircularHandle("resizeWest",e,u,m+g/2,t,!0,i&Re.ResizeWest,y,void 0,o,{"aria-label":"Thumb to resize the selected object on left side direction"},void 0,"e-pv-diagram-resize-handle e-west",c),this.renderCircularHandle("resizeEast",e,u+v,m+g/2,t,!0,i&Re.ResizeEast,y,void 0,o,{"aria-label":"Thumb to resize the selected object on right side direction"},void 0,"e-pv-diagram-resize-handle e-east",c))},s.prototype.getAllowedInteractions=function(e){if(e&&e.length>0)for(var t=0;t<e.length;t++)if("None"!==e[0]&&"Resize"===e[t])return!1;return!0},s.prototype.getResizerLocation=function(e,t){var i;if(t&&"object"!=typeof t&&""!==t){var n=JSON.parse(t);i=(0,a.le)(n.resizerLocation)||3===n.resizerLocation?3:n.resizerLocation}else i=(0,a.le)((n=this.pdfViewer.annotationSelectorSettings).resizerLocation)||3===n.resizerLocation?3:n.resizerLocation,"Line"===e&&this.pdfViewer.lineSettings.annotationSelectorSettings?i=(0,a.le)(this.pdfViewer.lineSettings.annotationSelectorSettings.resizerLocation)||3===this.pdfViewer.lineSettings.annotationSelectorSettings.resizerLocation?3:this.pdfViewer.lineSettings.annotationSelectorSettings.resizerLocation:"LineWidthArrowHead"===e&&this.pdfViewer.arrowSettings.annotationSelectorSettings?i=(0,a.le)(this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerLocation)||3===this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerLocation?3:this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerLocation:"Rectangle"===e&&this.pdfViewer.rectangleSettings.annotationSelectorSettings?i=(0,a.le)(this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerLocation)||3===this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerLocation?3:this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerLocation:"Ellipse"===e&&this.pdfViewer.circleSettings.annotationSelectorSettings?i=(0,a.le)(this.pdfViewer.circleSettings.annotationSelectorSettings.resizerLocation)||3===this.pdfViewer.circleSettings.annotationSelectorSettings.resizerLocation?3:this.pdfViewer.circleSettings.annotationSelectorSettings.resizerLocation:"Polygon"===e&&this.pdfViewer.polygonSettings.annotationSelectorSettings?i=(0,a.le)(this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerLocation)||3===this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerLocation?3:this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerLocation:"Distance"===e?i=(0,a.le)(this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerLocation)||3===this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerLocation?3:this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerLocation:"Radius"===e&&this.pdfViewer.radiusSettings.annotationSelectorSettings?i=(0,a.le)(this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerLocation)||3===this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerLocation?3:this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerLocation:"Stamp"===e&&this.pdfViewer.stampSettings.annotationSelectorSettings?i=(0,a.le)(this.pdfViewer.stampSettings.annotationSelectorSettings.resizerLocation)||3===this.pdfViewer.stampSettings.annotationSelectorSettings.resizerLocation?3:this.pdfViewer.stampSettings.annotationSelectorSettings.resizerLocation:"FreeText"===e&&this.pdfViewer.freeTextSettings.annotationSelectorSettings?i=(0,a.le)(this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerLocation)||3===this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerLocation?3:this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerLocation:"HandWrittenSignature"!==e&&"SignatureText"!==e&&"SignatureImage"!==e||!this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings?"Ink"===e&&this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings&&(i=(0,a.le)(this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerLocation)||3===this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerLocation?3:this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerLocation):i=(0,a.le)(this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerLocation)||3===this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerLocation?3:this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerLocation;return i},s.prototype.renderPivotLine=function(e,t,i,n,o){var r=e,d=!0;o&&(d=!1);var h=Ia(r,i);h.fill="None",h.stroke="black",h.strokeWidth=1,h.dashArray="2,3",h.visible=d;var p=i.scale;h.x*=p,h.y*=p,h.width*=p,h.height*=p,h.id="pivotLine",h.class="e-diagram-pivot-line";var c={x:r.actualSize.width*r.pivot.x*p,y:0};h.startPoint={x:r.actualSize.width*r.pivot.x*p,y:-20},h.endPoint=c,this.svgRenderer.drawLine(t,h)},s.prototype.renderEndPointHandle=function(e,t,i,n,o,r,l,d){n=n||{tx:0,ty:0,scale:1};var c,h=e.sourcePoint,p=e.targetPoint,f=e.wrapper;for(c=0;c<e.vertexPoints.length;c++)this.renderCircularHandle("segementThumb_"+(c+1),f,(u=e.vertexPoints[c]).x,u.y,t,!0,i&Re.ConnectorSource,n,o,null,null,c,null,d);var m=0;if("Distance"===e.shapeAnnotationType)for(c=0;c<e.wrapper.children.length;c++){var u=e.wrapper.children[c],g=void 0,v=se.findAngle(e.sourcePoint,e.targetPoint);if(u.id.indexOf("leader")>-1){var y=e.wrapper.children[0].bounds.center;0===m?(g={x:e.sourcePoint.x,y:e.sourcePoint.y-e.leaderHeight},y=h):(g={x:e.targetPoint.x,y:e.targetPoint.y-e.leaderHeight},y=p);var b=he();pe(b,v,y.x,y.y);var C=R(b,{x:g.x,y:g.y});this.renderCircularHandle("leaderThumb_"+(c+1),f,C.x,C.y,t,!0,i&Re.ConnectorSource,n,o,null,null,c,null,d),m++}}},s.prototype.initSelectorWrapper=function(){this.pdfViewer.selectedItems.init(this)},s.prototype.select=function(e,t,i,n){for(var o=this.pdfViewer.selectedItems,r=0;r<e.length;r++){var l=this.pdfViewer.nameTable[e[r]];if(l.formFieldAnnotationType&&this.pdfViewer.designerMode)o.formFields.push(l),this.initSelectorWrapper(),o.wrapper.children.push(l.wrapper),this.renderSelector(l.pageIndex,t,l,!0);else if(l&&!l.formFieldAnnotationType&&!(l instanceof an)&&l.wrapper.visible&&this.pdfViewer.annotationModule){var d=void 0;l.annotationSettings?(d=l.annotationSettings).isLock=JSON.parse(d.isLock):l.formFieldAnnotationType||(d=this.pdfViewer.annotationModule.findAnnotationSettings(l,!0),l.annotationSettings=d);var h=!l.formFieldAnnotationType&&d.isLock;d&&d.isLock&&this.pdfViewer.annotationModule.checkAllowedInteractions("Select",l)&&(h=!1),h||(o.annotations.push(l),this.initSelectorWrapper(),o.wrapper.rotateAngle=o.rotateAngle=0,o.wrapper.children.push(l.wrapper),n||this.renderSelector(l.pageIndex,t,l,!0))}}},s.prototype.dragSelectedObjects=function(e,t,i,n,o){return this.drag(this.pdfViewer.selectedItems,e,t,n,o),!0},s.prototype.drag=function(e,t,i,n,o){if(e instanceof an){if(e.annotations.length)for(var r=0,l=e.annotations;r<l.length;r++)this.drag(d=l[r],t,i,n,o),this.renderSelector(d.pageIndex,n,o);else if(e.formFields.length)for(var h=0,p=e.formFields;h<p.length;h++){var d;this.drag(d=p[h],t,i,n,o),this.renderSelector(d.pageIndex,n,o)}}else this.dragAnnotation(e,t,i)},s.prototype.dragAnnotation=function(e,t,i){var o=this.moveInsideViewer(e,t,i);if(e.wrapper.offsetX+=o.tx,e.wrapper.offsetY+=o.ty,pt(e)||"Polygon"===e.shapeAnnotationType){if(e.wrapper.children.length)for(var r=e.wrapper.children,l=0;l<r.length;l++)r[l].offsetX+=t,r[l].offsetY+=i;this.dragControlPoint(e,t,i,!0)}this.nodePropertyChange(e,{bounds:{x:e.wrapper.offsetX,y:e.wrapper.offsetY}}),e.wrapper.measureChildren=!1;var d=document.getElementById(this.pdfViewer.element.id+"_annotationCanvas_"+e.pageIndex);this.pdfViewer.renderDrawing(d,e.pageIndex)},s.prototype.dragControlPoint=function(e,t,i,n,o){for(var r=this.pdfViewer.nameTable[e.id],l=0;l<r.vertexPoints.length;l++)r.vertexPoints[l].x+=t,r.vertexPoints[l].y+=i;return n||this.updateEndPoint(r),!0},s.prototype.updateEndPoint=function(e){this.nodePropertyChange(e,{vertexPoints:e.vertexPoints}),this.renderSelector(e.pageIndex)},s.prototype.nodePropertyChange=function(e,t){var o;if(t.bounds&&(void 0!==t.bounds.width&&(e.bounds.width=e.wrapper.width=t.bounds.width),void 0!==t.bounds.height&&(e.bounds.height=e.wrapper.height=t.bounds.height),void 0!==t.bounds.x&&(e.bounds.x=t.bounds.x-.5*e.bounds.width,e.wrapper.offsetX=t.bounds.x),void 0!==t.bounds.y&&(e.bounds.y=t.bounds.y-.5*e.bounds.height,e.wrapper.offsetY=t.bounds.y),void 0!==t.leaderHeight&&(e.leaderHeight=t.leaderHeight,this.updateConnector(e,e.vertexPoints)),e.wrapper.children.length))for(var r=e.wrapper.children,l=0;l<r.length;l++)if(r[l].id){var d=r[l].id.split("_");if(d.length&&(d.indexOf("perimeter")>-1||d.indexOf("radius")>-1))this.setNodePosition(r[l],e);else if(d.length&&d.indexOf("srcDec")>-1)r[l].offsetX=e.vertexPoints[0].x,r[l].offsetY=e.vertexPoints[0].y;else if(d.length&&d.indexOf("tarDec")>-1)r[l].offsetX=e.vertexPoints[e.vertexPoints.length-1].x,r[l].offsetY=e.vertexPoints[e.vertexPoints.length-1].y;else if(d.length&&d.indexOf("stamp")>-1){var h=0;if(void 0!==e.wrapper.width&&void 0!==e.wrapper.height&&(h=20),e.isDynamicStamp){r[l].width=e.bounds.width-h,r[l].height=e.bounds.height/2-h;var p=r[1],f=this.pdfViewer.stampSettings?this.pdfViewer.stampSettings:this.pdfViewer.annotationSettings;p.style.fontSize=f&&(f.maxHeight||f.maxWidth)&&e.bounds.height>60?0!=h?e.bounds.width/h:e.wrapper.bounds.width/20:this.fontSizeCalculation(e,p,0!=h?e.bounds.width-20:e.wrapper.bounds.width-20),0!==h&&(p.margin.bottom=-r[l].height/2)}else r[l].width=e.bounds.width-h,r[l].height=e.bounds.height-h;r[l].offsetX=e.wrapper.offsetX,r[l].offsetY=e.wrapper.offsetX,r[l].isDirt=!0}}if(void 0!==t.sourceDecoraterShapes&&(e.sourceDecoraterShapes=t.sourceDecoraterShapes,this.updateConnector(e,e.vertexPoints)),void 0!==t.isReadonly&&"FreeText"===e.shapeAnnotationType&&(e.isReadonly=t.isReadonly),void 0!==t.taregetDecoraterShapes&&(e.taregetDecoraterShapes=t.taregetDecoraterShapes,this.updateConnector(e,e.vertexPoints)),void 0!==t.fillColor&&(e.fillColor=t.fillColor,e.wrapper.children[0].style.fill=t.fillColor,(e.enableShapeLabel||e.measureType)&&e.wrapper&&e.wrapper.children)){r=e.wrapper.children;for(var c=0;c<r.length;c++)r[c].textNodes&&(e.enableShapeLabel&&(e.labelFillColor=t.fillColor,r[c].style.fill=t.fillColor),e.measureType&&(r[c].style.fill=t.fillColor))}if(e.enableShapeLabel&&void 0!==t.labelFillColor&&e.enableShapeLabel&&e.wrapper&&e.wrapper.children){r=e.wrapper.children;for(var u=0;u<r.length;u++)r[u].textNodes&&(e.labelFillColor=t.labelFillColor,r[u].style.fill=t.labelFillColor)}if(void 0!==t.opacity&&("Stamp"===e.shapeAnnotationType||"FreeText"===e.shapeAnnotationType?(e.wrapper.children[1].style.opacity=t.opacity,e.wrapper.children[2]&&(e.wrapper.children[2].style.opacity=t.opacity)):("StickyNotes"===e.shapeAnnotationType&&(this.pdfViewer.nameTable[e.annotName].wrapper.children[0].style.opacity=t.opacity),e.opacity=t.opacity),e.wrapper.children[0].style.opacity=t.opacity,e.enableShapeLabel&&e.wrapper&&e.wrapper.children)){r=e.wrapper.children;for(var m=0;m<r.length;m++)r[m].textNodes&&(r[m].style.opacity=t.labelOpacity)}if(e.enableShapeLabel&&void 0!==t.labelOpacity&&e.enableShapeLabel&&e.wrapper&&e.wrapper.children){r=e.wrapper.children;for(var g=0;g<r.length;g++)r[g].textNodes&&(r[g].style.opacity=t.labelOpacity)}if(void 0!==t.rotateAngle&&(e.rotateAngle=t.rotateAngle,e.wrapper.rotateAngle=t.rotateAngle),void 0!==t.strokeColor&&(e.strokeColor=t.strokeColor,e.wrapper.children[0].style.strokeColor=t.strokeColor),void 0!==t.fontColor&&(e.fontColor=t.fontColor,"FreeText"===e.shapeAnnotationType&&e.wrapper&&e.wrapper.children&&e.wrapper.children.length&&((r=e.wrapper.children)[1].style.color=t.fontColor,r[1].horizontalAlignment="Justify"===e.textAlign?"Center":"Auto"),e.enableShapeLabel&&e.wrapper&&e.wrapper.children)){r=e.wrapper.children;for(var v=0;v<r.length;v++)r[v].textNodes&&(r[v].style.color=t.fontColor)}if(void 0!==t.fontFamily&&(e.fontFamily=t.fontFamily,"FreeText"===e.shapeAnnotationType&&e.wrapper&&e.wrapper.children&&e.wrapper.children.length&&((r=e.wrapper.children)[1].style.fontFamily=t.fontFamily),e.enableShapeLabel&&e.wrapper&&e.wrapper.children)){r=e.wrapper.children;for(var y=0;y<r.length;y++)r[y].textNodes&&(r[y].style.fontFamily=t.fontFamily)}if(void 0!==t.fontSize&&(e.fontSize=t.fontSize,("FreeText"===e.shapeAnnotationType||"SignatureText"===e.shapeAnnotationType)&&e.wrapper&&e.wrapper.children&&e.wrapper.children.length&&((r=e.wrapper.children)[1].style.fontSize=t.fontSize,"SignatureText"===e.shapeAnnotationType&&(e.wrapper.children[1].bounds.width=e.bounds.width,e.wrapper.children[1].desiredSize.width=e.bounds.width,e.wrapper.children[1].actualSize.width=e.bounds.width,r[1].horizontalAlignment="Center",r[1].verticalAlignment="Center",r[1].setOffsetWithRespectToBounds(0,0,"Absolute"))),e.enableShapeLabel&&e.wrapper&&e.wrapper.children)){r=e.wrapper.children;for(var b=0;b<r.length;b++)r[b].textNodes&&(r[b].style.fontSize=t.fontSize)}if(void 0!==t.font&&"FreeText"===e.shapeAnnotationType&&e.wrapper&&e.wrapper.children&&e.wrapper.children.length&&(r=e.wrapper.children,void 0!==t.font.isBold&&(r[1].style.bold=t.font.isBold,e.font.isBold=t.font.isBold),void 0!==t.font.isItalic&&(r[1].style.italic=t.font.isItalic,e.font.isItalic=t.font.isItalic),void 0!==t.font.isUnderline&&(t.font.isUnderline&&(e.font.isStrikeout=!1),!0===t.font.isUnderline?r[1].style.textDecoration="Underline":t.font.isStrikeout||(r[1].style.textDecoration="None"),e.font.isUnderline=t.font.isUnderline),void 0!==t.font.isStrikeout&&(t.font.isStrikeout&&(e.font.isUnderline=!1),!0===t.font.isStrikeout?r[1].style.textDecoration="LineThrough":t.font.isUnderline||(r[1].style.textDecoration="None"),e.font.isStrikeout=t.font.isStrikeout)),void 0!==t.textAlign&&(e.textAlign=t.textAlign,"FreeText"===e.shapeAnnotationType&&e.wrapper&&e.wrapper.children&&e.wrapper.children.length)&&((r=e.wrapper.children)[1].style.textAlign=t.textAlign,1===r[1].childNodes.length?"Justify"===e.textAlign?(r[1].horizontalAlignment="Left",r[1].setOffsetWithRespectToBounds(0,0,null)):"Right"===e.textAlign?(r[1].horizontalAlignment="Right",r[1].setOffsetWithRespectToBounds(.97,0,null)):"Left"===e.textAlign?(r[1].horizontalAlignment="Left",r[1].setOffsetWithRespectToBounds(0,0,null)):"Center"===e.textAlign&&(r[1].horizontalAlignment="Center",r[1].setOffsetWithRespectToBounds(.46,0,null)):r[1].horizontalAlignment=r[1].childNodes.length>1&&"Justify"===e.textAlign?"Center":"Auto"),void 0!==t.thickness&&(e.thickness=t.thickness,e.wrapper.children[0].style.strokeWidth=t.thickness,"LineWidthArrowHead"===e.shapeAnnotationType&&(e.wrapper.children[1].width=12*t.thickness,e.wrapper.children[1].height=12*t.thickness,e.wrapper.children[2].width=12*t.thickness,e.wrapper.children[2].height=12*t.thickness)),void 0!==t.borderDashArray&&(e.borderDashArray=t.borderDashArray,e.wrapper.children[0].style.strokeDashArray=t.borderDashArray),void 0!==t.borderStyle&&(e.borderStyle=t.borderStyle),void 0!==t.author&&(e.author=t.author),void 0!==t.modifiedDate&&(e.modifiedDate=t.modifiedDate),void 0!==t.subject&&(e.subject=t.subject),void 0!==t.vertexPoints&&(e.vertexPoints=t.vertexPoints,this.pdfViewer.nameTable[e.id].vertexPoints=t.vertexPoints,this.updateConnector(e,t.vertexPoints)),void 0!==t.leaderHeight&&"Polygon"!==e.shapeAnnotationType&&(e.leaderHeight=t.leaderHeight,this.updateConnector(e,e.vertexPoints)),void 0!==t.notes&&(e.notes=t.notes),void 0!==t.annotName&&(e.annotName=t.annotName),"Distance"===e.shapeAnnotationType){for(o=0;o<e.wrapper.children.length;o++){var C=e.wrapper.children[o],S=Ea(e);C.id.indexOf("leader1")>-1&&this.setLineDistance(e,S,C,!1),C.id.indexOf("leader2")>-1&&this.setLineDistance(e,S,C,!0)}this.updateConnector(e,e.vertexPoints)}if("Polygon"===e.shapeAnnotationType&&t.vertexPoints){e.data=Lu(e.vertexPoints);var x=e.wrapper.children[0];x.data=e.data,x.canMeasurePath=!0}if(pt(e))for(var V=0;V<e.wrapper.children.length;V++)e.wrapper.children[V].textNodes||Tt(e,e.wrapper.children[V]),!0===e.enableShapeLabel?(e.wrapper.children[V]instanceof Oe&&(e.wrapper.children[V].style.fill=e.labelFillColor),e.wrapper.children[V]instanceof He&&"Perimeter"===e.measureType&&(e.wrapper.children[V].style.fill="transparent")):(e.wrapper.children[V]instanceof He&&"Perimeter"===e.measureType||e.wrapper.children[V]instanceof Oe)&&(e.wrapper.children[V].style.fill="transparent");if(e&&("FreeText"===e.shapeAnnotationType||!0===e.enableShapeLabel)&&e.wrapper&&e.wrapper.children&&e.wrapper.children.length){r=e.wrapper.children;for(var k=0;k<r.length;k++)r[k].textNodes&&("FreeText"===e.shapeAnnotationType?(t.dynamicText?(r[k].content=t.dynamicText,e.dynamicText=t.dynamicText):r[k].content=e.dynamicText,r[k].width=e.bounds.width):(!0===e.enableShapeLabel&&e.measureType||!0===e.enableShapeLabel)&&(t.labelContent?(r[k].content=t.labelContent,e.labelContent=t.labelContent):r[k].content=e.labelContent,e.notes=r[k].content),r[k].isDirt=!0)}if(e&&"SignatureText"===e.shapeAnnotationType&&e.wrapper&&e.wrapper.children&&e.wrapper.children.length>1&&(e.wrapper.children[1].isDirt=!0),e.wrapper.measure(new fe(e.wrapper.bounds.width,e.wrapper.bounds.height)),e.wrapper.arrange(e.wrapper.desiredSize),e&&e.formFieldAnnotationType&&e.wrapper&&e.wrapper.children&&e.wrapper.children.length&&((r=e.wrapper.children[0]).actualSize.width=e.wrapper.desiredSize.width,r.actualSize.height=e.wrapper.desiredSize.height),e&&"FreeText"===e.shapeAnnotationType&&"Text Box"===e.subject){if(e.wrapper&&e.wrapper.children&&e.wrapper.children.length){(r=e.wrapper.children)[1].childNodes.length>1&&"Justify"===e.textAlign?r[1].horizontalAlignment="Center":1===r[1].childNodes.length&&("Justify"===e.textAlign?(r[1].horizontalAlignment="Left",r[1].setOffsetWithRespectToBounds(0,0,null)):"Right"===e.textAlign?(r[1].horizontalAlignment="Right",r[1].setOffsetWithRespectToBounds(.97,0,null)):"Left"===e.textAlign?(r[1].horizontalAlignment="Left",r[1].setOffsetWithRespectToBounds(0,0,null)):"Center"===e.textAlign&&(r[1].horizontalAlignment="Center",r[1].setOffsetWithRespectToBounds(.46,0,null)));for(var A=0;A<r.length;A++){if(r[A].textNodes&&r[A].textNodes.length>0){r[A].isDirt=!0;var M=r[A].textNodes.length*r[A].textNodes[0].dy,I=e.bounds.height-M;if(I>0&&I<r[A].textNodes[0].dy&&(M+=r[A].textNodes[0].dy),M>e.bounds.height){for(var B="",N=0;N<r[A].textNodes.length;N++)B+=r[A].textNodes[N].text;r[A].content=B}}r[A].width=e.bounds.width}}e.wrapper.measure(new fe(e.wrapper.bounds.width,e.wrapper.bounds.height)),e.wrapper.arrange(e.wrapper.desiredSize)}this.pdfViewer.renderDrawing(void 0,e.pageIndex),e&&"FreeText"===e.shapeAnnotationType&&e.wrapper&&e.wrapper.children&&e.wrapper.children.length&&(1===(r=e.wrapper.children)[1].childNodes.length&&"Justify"===e.textAlign?(r[1].horizontalAlignment="Left",r[1].setOffsetWithRespectToBounds(.5,0,null)):r[1].childNodes.length>1&&"Justify"===e.textAlign&&(r[1].horizontalAlignment="Center",r[1].setOffsetWithRespectToBounds(0,0,null)))},s.prototype.fontSizeCalculation=function(e,t,i){var o=document.getElementById(this.pdfViewer.element.id+"_annotationCanvas_"+e.pageIndex).getContext("2d"),r=0,l=0,d="";for(t.style.italic&&t.style.bold?d="bold italic ":t.style.bold?d="bold ":t.style.italic&&(d="italic ");i>r;)o.font=d+l+"px "+t.style.fontFamily,r=o.measureText(e.dynamicText).width,l+=.1;return l-.1},s.prototype.setLineDistance=function(e,t,i,n){var o;o=n?Pa(e,t[1],t[0],n):Pa(e,t[0],t[1],n),i.data=o.data,i.offsetX=o.offsetX,i.offsetY=o.offsetY,i.rotateAngle=o.rotateAngle,i.width=o.width,i.height=o.height,i.pivot=o.pivot,i.canMeasurePath=!0,i.isDirt=!0},s.prototype.scaleSelectedItems=function(e,t,i){return this.scale(this.pdfViewer.selectedItems,e,t,i)},s.prototype.scale=function(e,t,i,n){var o=!0;if(e instanceof an){if(e.annotations&&e.annotations.length)for(var r=0,l=e.annotations;r<l.length;r++)o=this.scaleAnnotation(l[r],t,i,n,e);else if(e.formFields&&e.formFields.length)for(var h=0,p=e.formFields;h<p.length;h++)o=this.scaleAnnotation(p[h],t,i,n,e)}else o=this.scaleAnnotation(e,t,i,n,void 0);return o},s.prototype.scaleObject=function(e,t,i,n,o,r){if(t=t<0?1:t,1!==(e=e<0?1:e)||1!==t){var l=void 0,d=void 0;pt(n)||(e=(l=(h=n).wrapper.actualSize.width*e)/h.wrapper.actualSize.width,t=(d=h.wrapper.actualSize.height*t)/h.wrapper.actualSize.height);var c=he();r||(r=n);var u=r.wrapper;if(pe(c,-u.rotateAngle,i.x,i.y),function(s,e,t,i,n){void 0===i&&(i=0),void 0===n&&(n=0),Hh(s,function(s,e,t,i){var n=he();return n.type=t||i?ee.Scaling|ee.Translation:ee.Scaling,zs(n,s,0,0,e,t-s*t,i-e*i),n}(e,t,i,n))}(c,e,t,i.x,i.y),pe(c,u.rotateAngle,i.x,i.y),!pt(n)){var h,m=R(c,{x:(h=n).wrapper.offsetX,y:h.wrapper.offsetY});l>0&&(h.wrapper.width=l,h.wrapper.offsetX=m.x),d>0&&(h.wrapper.height=d,h.wrapper.offsetY=m.y),this.nodePropertyChange(n,{bounds:{width:h.wrapper.width,height:h.wrapper.height,x:h.wrapper.offsetX,y:h.wrapper.offsetY}})}}},s.prototype.scaleAnnotation=function(e,t,i,n,o){var r=this.pdfViewer.nameTable[e.id],l=r.wrapper;o||(o=e);var d=o.wrapper,f=this.getShapePoint(d.offsetX-d.actualSize.width*d.pivot.x,d.offsetY-d.actualSize.height*d.pivot.y,d.actualSize.width,d.actualSize.height,d.rotateAngle,d.offsetX,d.offsetY,n);void 0!==l.actualSize.width&&void 0!==l.actualSize.height&&this.scaleObject(t,i,f,r,l,o);var c=this.checkBoundaryConstraints(void 0,void 0,e.pageIndex,e.wrapper.bounds);if(!c&&(this.scaleObject(1/t,1/i,f,r,l,o),"FreeText"===e.shapeAnnotationType&&("free_text"===e.id.slice(0,9)||"freetext"===e.id.slice(0,8)))){var u=this.moveInsideViewer(e);this.nodePropertyChange(e,{bounds:{width:e.wrapper.width,height:e.wrapper.height,x:e.wrapper.offsetX+u.tx,y:e.wrapper.offsetY+u.ty}})}return c},s.prototype.moveInsideViewer=function(e,t,i){if(t=t||0,i=i||0,"FreeText"===e.shapeAnnotationType&&("free_text"===e.id.slice(0,9)||"freetext"===e.id.slice(0,8))){var n=document.getElementById(this.pdfViewer.element.id+"_annotationCanvas_"+e.pageIndex);if(n){var o=e.wrapper.bounds,r=n.clientWidth/this.pdfViewer.viewerBase.getZoomFactor(),l=n.clientHeight/this.pdfViewer.viewerBase.getZoomFactor(),d=o.right,h=o.left,p=o.top,f=o.bottom;if(!(d+t<=r-3&&h+t>=1&&f+i<=l-3&&p+i>=1)){var c=0,u=0;d<=r-3||(c=r-d-3),h>=1||(c=c-h+1),f<=l-3||(u=l-f-3),p>=1||(u=u-p+1),0!==c&&(t=c),0!==u&&(i=u)}}}return{tx:t,ty:i}},s.prototype.checkBoundaryConstraints=function(e,t,i,n,o,r){var l=n?void 0:this.pdfViewer.selectedItems.wrapper.bounds,d=n,h=document.getElementById(this.pdfViewer.element.id+"_annotationCanvas_"+i),p=1;if(h){var f=h.clientWidth/this.pdfViewer.viewerBase.getZoomFactor(),c=h.clientHeight/this.pdfViewer.viewerBase.getZoomFactor(),u=(n?d.right:l.right)+(e||0),m=(n?d.left:l.left)+(e||0),g=(n?d.top:l.top)+(t||0),v=(n?d.bottom:l.bottom)+(t||0);if(o&&(p=50,this.pdfViewer.viewerBase.eventArgs&&this.pdfViewer.viewerBase.eventArgs.source&&this.RestrictStamp(this.pdfViewer.viewerBase.eventArgs.source)))return!1;if(u<=f-3&&m>=1&&v<=c-3&&g>=p||r)return!0}return!1},s.prototype.RestrictStamp=function(e){return!(!e||void 0===e.pageIndex||!this.pdfViewer.viewerBase.activeElements||e.pageIndex===this.pdfViewer.viewerBase.activeElements.activePageID)},s.prototype.getShapeBounds=function(e){var t=new de,i=et(e),n=i.middleLeft,o=i.topCenter,r=i.bottomCenter,l=i.middleRight,d=i.topLeft,h=i.topRight,p=i.bottomLeft,f=i.bottomRight;if(e.corners={topLeft:d,topCenter:o,topRight:h,middleLeft:n,middleRight:l,bottomLeft:p,bottomCenter:r,bottomRight:f},0!==e.rotateAngle||0!==e.parentTransform){var c=he();pe(c,e.rotateAngle+e.parentTransform,e.offsetX,e.offsetY),e.corners.topLeft=d=R(c,d),e.corners.topCenter=o=R(c,o),e.corners.topRight=h=R(c,h),e.corners.middleLeft=n=R(c,n),e.corners.middleRight=l=R(c,l),e.corners.bottomLeft=p=R(c,p),e.corners.bottomCenter=r=R(c,r),e.corners.bottomRight=f=R(c,f)}return t=de.toBounds([d,h,p,f]),e.corners.left=t.left,e.corners.right=t.right,e.corners.top=t.top,e.corners.bottom=t.bottom,e.corners.center=t.center,e.corners.width=t.width,e.corners.height=t.height,t},s.prototype.getShapePoint=function(e,t,i,n,o,r,l,d){var h={x:0,y:0},p=he();switch(pe(p,o,r,l),d.x){case 1:switch(d.y){case 1:h=R(p,{x:e+i,y:t+n});break;case 0:h=R(p,{x:e+i,y:t});break;case.5:h=R(p,{x:e+i,y:t+n/2})}break;case 0:switch(d.y){case.5:h=R(p,{x:e,y:t+n/2});break;case 1:h=R(p,{x:e,y:t+n});break;case 0:h=R(p,{x:e,y:t})}break;case.5:switch(d.y){case 0:h=R(p,{x:e+i/2,y:t});break;case.5:h=R(p,{x:e+i/2,y:t+n/2});break;case 1:h=R(p,{x:e+i/2,y:t+n})}}return{x:h.x,y:h.y}},s.prototype.dragConnectorEnds=function(e,t,i,n,o,r,l){var h,p,f;if(h=t instanceof an?t.annotations[0]:t,i={x:i.x/this.pdfViewer.viewerBase.getZoomFactor(),y:i.y/this.pdfViewer.viewerBase.getZoomFactor()},this.checkBoundaryConstraints(void 0,void 0,h.pageIndex,h.wrapper.bounds)){if("Distance"===h.shapeAnnotationType){var c=function(s,e){var t;if("Distance"===s.shapeAnnotationType)for(var i=0,n=void 0,o=0;o<s.wrapper.children.length;o++){var r=se.findAngle(s.sourcePoint,s.targetPoint);if(s.wrapper.children[o].id.indexOf("leader")>-1){var d=s.wrapper.children[0].bounds.center;0===i?(n={x:s.sourcePoint.x,y:s.sourcePoint.y-s.leaderHeight},d=s.sourcePoint):(n={x:s.targetPoint.x,y:s.targetPoint.y-s.leaderHeight},d=s.targetPoint);var h=he();if(pe(h,r,d.x,d.y),t=R(h,{x:n.x,y:n.y}),e==="Leader"+i)return{leader:"leader"+i,point:t};i++}}return{leader:"",point:t}}(h,e);if("Leader0"===e)this.pdfViewer.viewerBase.tool instanceof Ze?(h.vertexPoints[0].x=i.x,h.vertexPoints[0].y=i.y):(f=i.y-c.point.y,h.vertexPoints[0].x+=p=i.x-c.point.x,h.vertexPoints[0].y+=f);else if("Leader1"===e){var u=h.vertexPoints.length-1;this.pdfViewer.viewerBase.tool instanceof Ze?(h.vertexPoints[u].x=i.x,h.vertexPoints[u].y=i.y):(f=i.y-c.point.y,h.vertexPoints[u].x+=p=i.x-c.point.x,h.vertexPoints[u].y+=f)}else{var m=se.findAngle(h.sourcePoint,h.targetPoint),g=t.wrapper.children[0].bounds.center;pe(v=he(),-m,g.x,g.y);var y=R(v,{x:i.x,y:i.y});if("ConnectorSegmentPoint"===e.split("_")[0]){pe(v=he(),-m,g.x,g.y);var v,b=R(v,h.vertexPoints[0]),C=R(v,h.vertexPoints[h.vertexPoints.length-1]);f=y.y-b.y,0===h.leaderHeight&&null!=h.leaderHeight?h.leaderHeight=this.pdfViewer.distanceSettings.leaderLength:(h.leaderHeight+=f,b.y+=f,C.y+=f,pe(v=he(),m,g.x,g.y),h.vertexPoints[0]=R(v,b),h.vertexPoints[h.vertexPoints.length-1]=R(v,C))}}}else if("ConnectorSegmentPoint"===e.split("_")[0]){var S=Number(e.split("_")[1]);f=i.y-h.vertexPoints[S].y,h.vertexPoints[S].x+=p=i.x-h.vertexPoints[S].x,h.vertexPoints[S].y+=f,h.vertexPoints.length>2&&"Perimeter"!==t.measureType&&(0===parseFloat(e.split("_")[1])?(h.vertexPoints[h.vertexPoints.length-1].x+=p,h.vertexPoints[h.vertexPoints.length-1].y+=f):parseFloat(e.split("_")[1])===h.vertexPoints.length-1&&(h.vertexPoints[0].x+=p,h.vertexPoints[0].y+=f))}this.nodePropertyChange(h,{vertexPoints:h.vertexPoints}),this.renderSelector(h.pageIndex,l)}return this.pdfViewer.renderDrawing(),!0},s.prototype.dragSourceEnd=function(e,t,i,n){var o=this.pdfViewer.nameTable[e.id];return o.vertexPoints[n].x+=t,o.vertexPoints[n].y+=i,this.pdfViewer.renderDrawing(),!0},s.prototype.updateConnector=function(e,t){e.vertexPoints=t,Iu(e,t,e.wrapper.children[0]);var o=e.vertexPoints,r=e.wrapper.children[0];r.canMeasurePath=!0;for(var l=0;l<e.wrapper.children.length;l++)r=e.wrapper.children[l],"Polygon"!==e.shapeAnnotationType&&(r.id.indexOf("srcDec")>-1&&Vh(e,r,t[0],o[1],!0),r.id.indexOf("tarDec")>-1&&Vh(e,r,t[t.length-1],o[o.length-2],!1))},s.prototype.copy=function(){(this.pdfViewer.formDesignerModule&&!this.pdfViewer.formDesigner.isPropertyDialogOpen||this.pdfViewer.annotationModule)&&(this.pdfViewer.designerMode||this.pdfViewer.enableAnnotation)&&(0!==this.pdfViewer.selectedItems.formFields.length||0!==this.pdfViewer.selectedItems.annotations.length)&&(this.pdfViewer.clipboardData.pasteIndex=1,this.pdfViewer.clipboardData.clipObject=this.copyObjects());var e,t=document.getElementById(this.pdfViewer.element.id+"_search_box");return t&&(e="none"!==t.style.display),(this.pdfViewer.formDesigner&&this.pdfViewer.formDesigner.isPropertyDialogOpen||e)&&(this.pdfViewer.clipboardData.clipObject={}),this.pdfViewer.clipboardData.clipObject},s.prototype.copyObjects=function(){var e=[],t=[];if(this.pdfViewer.clipboardData.childTable={},this.pdfViewer.selectedItems.annotations.length>0){e=this.pdfViewer.selectedItems.annotations;for(var i=0;i<e.length;i++){var n=_(e[i]);t.push(n)}}if(this.pdfViewer.selectedItems.formFields.length>0)for(e=this.pdfViewer.selectedItems.formFields,i=0;i<e.length;i++)n=_(e[i]),t.push(n);if(0===this.pdfViewer.clipboardData.pasteIndex)for(var o=0,r=e;o<r.length;o++){var l=r[o];this.pdfViewer.nameTable[l.id]&&(l.formFieldAnnotationType?(this.pdfViewer.clearSelection(l.pageIndex),this.pdfViewer.formDesignerModule.deleteFormField(l.id)):l.annotName?this.pdfViewer.annotationModule.deleteAnnotationById(l.annotName):this.pdfViewer.annotationModule.deleteAnnotation())}return this.sortByZIndex(t,"zIndex"),t},s.prototype.getNewObject=function(e){var t,i=[];this.pdfViewer.clipboardData.pasteIndex=1;for(var n=0;n<e.length;n++)t=_(e[n]),i.push(t);return i},s.prototype.paste=function(e,t){var i=this.pdfViewer.viewerBase.getZoomFactor(),n=this.pdfViewer.allowServerDataBinding;if(this.pdfViewer.enableServerDataBinding(!1),e||this.pdfViewer.clipboardData.clipObject){var o=e?this.getNewObject(e):this.pdfViewer.clipboardData.clipObject;if(o){var r={};0!==this.pdfViewer.clipboardData.pasteIndex&&this.pdfViewer.clearSelection(t);for(var l=0,d=o;l<d.length;l++){(h=d[l]).id+=at();var p=this.splitFormFieldName(h);this.pdfViewer.formDesigner&&(this.pdfViewer.formDesigner.setFormFieldIndex(),h.name=p+this.pdfViewer.formDesigner.formFieldIndex),r[h.id]=h}for(var c=0;c<o.length;c++){var h,u=this.pdfViewer.viewerBase.getElement("_pageDiv_"+(h=o[c]).pageIndex),m=event;if(m&&!m.clientX&&!m.clientY&&(m={clientX:this.pdfViewer.viewerBase.mouseLeft,clientY:this.pdfViewer.viewerBase.mouseTop}),(0,a.xr)()&&(m=this.pdfViewer.viewerBase.mouseDownEvent),pt(h))this.calculateCopyPosition(h,u,m);else if(u){var g=u.getBoundingClientRect();h.bounds.x=(m.clientX-g.left)/i,h.bounds.y=(m.clientY-g.top)/i}var v=_(h);"Cut"!==this.pdfViewer.viewerBase.contextMenuModule.previousAction?(v.id+=at(),this.pdfViewer.annotationModule&&"HandWrittenSignature"!==v.shapeAnnotationType&&(v.annotName=v.id,this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateAnnotationCollection(v,o[0],!1)),("SignatureText"===v.shapeAnnotationType||"HandWrittenSignature"===v.shapeAnnotationType||"SignatureImage"===v.shapeAnnotationType)&&this.pdfViewer.viewerBase.signatureModule.storeSignatureData(v.pageIndex,v),v.formFieldAnnotationType||this.pdfViewer.annotation.addAction(v.pageIndex,null,v,"Addition","",v,v)):(this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateAnnotationCollection(v,o[0],!0),("SignatureText"===v.shapeAnnotationType||"HandWrittenSignature"===v.shapeAnnotationType||"SignatureImage"===v.shapeAnnotationType)&&this.pdfViewer.viewerBase.signatureModule.storeSignatureData(v.pageIndex,v));var y=this.add(v);if(this.pdfViewer.formDesigner&&y.formFieldAnnotationType&&this.pdfViewer.annotation.addAction(v.pageIndex,null,y,"Addition","",y,y),("FreeText"===v.shapeAnnotationType||v.enableShapeLabel)&&y&&this.nodePropertyChange(y,{}),y.formFieldAnnotationType&&y.pageIndex===t){this.pdfViewer.formFieldCollection.push(y);var b={id:y.id,name:y.name,value:y.value,type:y.formFieldAnnotationType,isReadOnly:y.isReadonly,fontFamily:y.fontFamily,fontSize:y.fontSize,fontStyle:y.fontStyle,color:y.color,backgroundColor:y.backgroundColor,alignment:y.alignment,visibility:y.visibility,maxLength:y.maxLength,isRequired:y.isRequired,isPrint:y.isPrint,isSelected:y.isSelected,isChecked:y.isChecked,tooltip:y.tooltip,bounds:y.bounds,thickness:y.thickness,borderColor:y.borderColor,signatureIndicatorSettings:y.signatureIndicatorSettings};y.options&&y.options.length>0&&(b.options=y.options),this.pdfViewer.formFieldCollections.push(b),this.pdfViewer.formDesigner.drawHTMLContent(y.formFieldAnnotationType,y.wrapper.children[0],y,y.pageIndex,this.pdfViewer)}this.pdfViewer.select([v.id],this.pdfViewer.annotationSelectorSettings),y.formFieldAnnotationType||this.pdfViewer.annotationModule.triggerAnnotationAddEvent(v)}}this.pdfViewer.renderDrawing(void 0,t),this.pdfViewer.clipboardData.pasteIndex++}this.pdfViewer.enableServerDataBinding(n,!0)},s.prototype.splitFormFieldName=function(e){var t=null;if(e)switch(e.formFieldAnnotationType){case"Textbox":t="Textbox";break;case"PasswordField":t="Password";break;case"Checkbox":t="Check Box";break;case"RadioButton":t="Radio Button";break;case"DropdownList":t="Dropdown";break;case"ListBox":t="List Box";break;case"SignatureField":t="Signature";break;case"InitialField":t="Initial"}return t},s.prototype.calculateCopyPosition=function(e,t,i){for(var o,r,l,d,n=this.pdfViewer.viewerBase.getZoomFactor(),h=0;h<e.vertexPoints.length;h++)if(t)if(0===h){var p=t.getBoundingClientRect();o=e.vertexPoints[h].x,r=e.vertexPoints[h].y,e.vertexPoints[h].x=(i.clientX-p.left)/n,e.vertexPoints[h].y=(i.clientY-p.top)/n,l=e.vertexPoints[h].x,d=e.vertexPoints[h].y}else e.vertexPoints[h].x+=l-o,e.vertexPoints[h].y+=d-r},s.prototype.cut=function(e){var t=this.pdfViewer.allowServerDataBinding;this.pdfViewer.enableServerDataBinding(!1),this.pdfViewer.annotationModule&&(this.pdfViewer.annotationModule.removedAnnotationCollection=[]),(this.pdfViewer.formDesignerModule&&!this.pdfViewer.formDesigner.isPropertyDialogOpen||this.pdfViewer.selectedItems.annotations.length>0)&&(this.pdfViewer.designerMode||this.pdfViewer.selectedItems.annotations.length>0)&&(0!==this.pdfViewer.selectedItems.formFields.length||0!==this.pdfViewer.selectedItems.annotations.length)&&(this.pdfViewer.clipboardData.pasteIndex=0,this.pdfViewer.clipboardData.clipObject=this.copyObjects(),this.pdfViewer.renderDrawing(void 0,e),this.pdfViewer.enableServerDataBinding(t,!0));var i,n=document.getElementById(this.pdfViewer.element.id+"_search_box");n&&(i="none"!==n.style.display),(this.pdfViewer.formDesigner&&this.pdfViewer.formDesigner.isPropertyDialogOpen||i)&&(this.pdfViewer.clipboardData.clipObject={})},s.prototype.sortByZIndex=function(e,t){var i=t||"zIndex";return e.sort(function(n,o){return n[i]-o[i]})},s}(),pi=function(){var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])})(e,t)};return function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),Bi=function(){function s(e,t,i){void 0===i&&(i=!1),this.commandHandler=null,this.inAction=!1,this.pdfViewerBase=null,this.currentElement=null,this.blocked=!1,this.isTooltipVisible=!1,this.childTable={},this.helper=void 0,this.undoElement={annotations:[]},this.undoParentElement={annotations:[]},this.commandHandler=e,this.pdfViewerBase=t}return s.prototype.startAction=function(e){this.currentElement=e,this.inAction=!0},s.prototype.mouseDown=function(e){this.currentElement=e.source,this.startPosition=this.currentPosition=this.prevPosition=e.position,this.isTooltipVisible=!0,this.startAction(e.source)},s.prototype.mouseMove=function(e){return this.currentPosition=e.position,this.prevPageId=this.pdfViewerBase.activeElements.activePageID,!this.blocked},s.prototype.mouseUp=function(e){this.currentPosition=e.position,this.isTooltipVisible=!1,this.endAction(),this.helper=null},s.prototype.endAction=function(){this.commandHandler&&(this.commandHandler.tool="",this.helper&&this.commandHandler.remove(this.helper)),this.commandHandler=null,this.currentElement=null,this.currentPosition=null,this.inAction=!1,this.blocked=!1},s.prototype.mouseWheel=function(e){this.currentPosition=e.position},s.prototype.mouseLeave=function(e){this.mouseUp(e)},s.prototype.updateSize=function(e,t,i,n,o,r,l){var d=this.commandHandler.viewerBase.getZoomFactor(),h=this.currentPosition.x/d-this.startPosition.x/d,p=this.currentPosition.y/d-this.startPosition.y/d,f=e instanceof Oe?r:e.rotateAngle,c=he();pe(c,-f,0,0);var g,u=0,m=0,v=e instanceof Oe?e.actualSize.width:e.wrapper.bounds.width,y=e instanceof Oe?e.actualSize.height:e.wrapper.bounds.height,b=e;e.formFieldAnnotationType||!e.annotName&&!e.shapeAnnotationType&&e&&(b=e.annotations[0]);var C=this.commandHandler.annotationModule?this.commandHandler.annotationModule.findAnnotationSettings(b):{},S=0,x=0,V=0,T=0;(C.minWidth||C.maxWidth||C.minHeight||C.maxHeight)&&(S=C.maxHeight?C.maxHeight:2e3,x=C.maxWidth?C.maxWidth:2e3,V=C.minHeight?C.minHeight:0,T=C.minWidth?C.minWidth:0);var k=!1;if((V||T||S||x)&&(k=!0),k&&l){var A=this.getPositions(n,h,p),M=v+A.x,I=y+A.y;I>V&&I<S&&M>T&&M<x||((I<V||I>S)&&(p=I<V?V-y:S-y),(M<T||M>x)&&(h=M<T?T-v:x-v))}switch(n){case"ResizeWest":h=(g=R(c,{x:h,y:p})).x,p=g.y,m=1,p=0,k&&o.width-h>x&&(h=x-o.width),u=(o.width-h)/v;break;case"ResizeEast":h=(g=R(c,{x:h,y:p})).x,p=g.y,p=0,k&&o.width+h>x&&(h=x-o.width),u=(o.width+h)/v,m=1;break;case"ResizeNorth":u=1,h=(g=R(c,{x:h,y:p})).x,p=g.y,k&&o.height-p>S&&(p=S-o.height),m=(o.height-p)/y;break;case"ResizeSouth":u=1,h=(g=R(c,{x:h,y:p})).x,p=g.y,k&&o.height+p>S&&(p=S-o.height),m=(o.height+p)/y;break;case"ResizeNorthEast":h=(g=R(c,{x:h,y:p})).x,p=g.y,k&&(o.width+h>x&&(h=x-o.width),o.height-p>S&&(p=S-o.height)),u=(o.width+h)/v,m=(o.height-p)/y;break;case"ResizeNorthWest":h=(g=R(c,{x:h,y:p})).x,p=g.y,k&&(o.width-h>x&&(h=x-o.width),o.height-p>S&&(p=S-o.height)),u=(o.width-h)/v,m=(o.height-p)/y;break;case"ResizeSouthEast":h=(g=R(c,{x:h,y:p})).x,p=g.y,k&&(o.width+h>x&&(h=x-o.width),o.height+p>S&&(p=S-o.height)),m=(o.height+p)/y,u=(o.width+h)/v;break;case"ResizeSouthWest":h=(g=R(c,{x:h,y:p})).x,p=g.y,k&&(o.width-h>x&&(h=x-o.width),o.height+p>S&&(p=S-o.height)),u=(o.width-h)/v,m=(o.height+p)/y}return{width:u,height:m}},s.prototype.getPivot=function(e){switch(e){case"ResizeWest":return{x:1,y:.5};case"ResizeEast":return{x:0,y:.5};case"ResizeNorth":return{x:.5,y:1};case"ResizeSouth":return{x:.5,y:0};case"ResizeNorthEast":return{x:0,y:1};case"ResizeNorthWest":return{x:1,y:1};case"ResizeSouthEast":return{x:0,y:0};case"ResizeSouthWest":return{x:1,y:0}}return{x:.5,y:.5}},s.prototype.getPositions=function(e,t,i){switch(e){case"ResizeEast":return{x:t,y:0};case"ResizeSouthEast":return{x:t,y:i};case"ResizeSouth":return{x:0,y:i};case"ResizeNorth":return{x:0,y:-i};case"ResizeNorthEast":return{x:t,y:-i};case"ResizeNorthWest":return{x:-t,y:-i};case"ResizeWest":return{x:-t,y:0};case"ResizeSouthWest":return{x:-t,y:i}}return{x:t,y:i}},s}(),Cb=function(s){function e(t,i){return s.call(this,t,i,!0)||this}return pi(e,s),e.prototype.mouseDown=function(t){this.inAction=!0,this.mouseEventHelper(t),s.prototype.mouseDown.call(this,t)},e.prototype.mouseEventHelper=function(t){this.commandHandler&&this.commandHandler.annotationModule&&(this.commandHandler.annotationModule.overlappedCollections=ft(t,this.pdfViewerBase,this.commandHandler,!0));var i=ft(t,this.pdfViewerBase,this.commandHandler),n=!1;if(i&&"StickyNotes"===i.shapeAnnotationType&&i.annotationSettings&&i.annotationSettings.isLock&&(n=!this.commandHandler.annotationModule.checkAllowedInteractions("Select",i)),!n){var o;if(o=t.source&&null!==t.annotationSelectorSettings?t.source.annotationSelectorSettings:"",this.commandHandler){var r=this.commandHandler.selectedItems;if(r){var l=r.annotations[0],d=r.formFields[0],h=this.commandHandler.selectedItems.annotations[0],p=t.source;if((r.annotations.length&&t.info&&!t.info.ctrlKey&&this.commandHandler.annotationModule&&!1===this.commandHandler.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus||t.info&&t.info.ctrlKey&&(p&&"FreeText"===p.shapeAnnotationType||h&&"FreeText"===h.shapeAnnotationType)||(0,a.le)(i)&&this.commandHandler.formDesignerModule&&!(p&&"FreeText"===p.shapeAnnotationType||h&&("FreeText"===h.shapeAnnotationType||"Image"===h.shapeAnnotationType||"StickyNotes"===h.shapeAnnotationType)))&&this.commandHandler.clearSelection(this.pdfViewerBase.activeElements.activePageID),i&&(!(0,a.le)(this.pdfViewerBase.isFreeTextSelected)&&!this.pdfViewerBase.isFreeTextSelected&&(this.commandHandler.select([i.id],o),this.commandHandler.viewerBase.isAnnotationMouseDown=!0),this.pdfViewerBase.isFreeTextSelected=!1,this.commandHandler.viewerBase.isFormFieldMouseDown=!0),0===r.annotations.length&&l&&"HandWrittenSignature"!==l.shapeAnnotationType&&"SignatureText"!==l.shapeAnnotationType&&"SignatureImage"!==l.shapeAnnotationType&&"Path"!==l.shapeAnnotationType&&!l.formFieldAnnotationType&&(this.commandHandler.enableToolbar&&a.AR.isDevice&&!this.commandHandler.enableDesktopMode&&this.commandHandler.toolbarModule.showToolbar(!0),this.commandHandler.fireAnnotationUnSelect(l.annotName,l.pageIndex,l)),0===r.formFields.length&&this.commandHandler.formDesignerModule&&d&&d.formFieldAnnotationType)this.commandHandler.fireFormFieldUnselectEvent("formFieldUnselect",f={name:d.name,id:d.id,value:d.value,fontFamily:d.fontFamily,fontSize:d.fontSize,fontStyle:d.fontStyle,color:d.color,backgroundColor:d.backgroundColor,alignment:d.alignment,isReadonly:d.isReadOnly,visibility:d.visibility,maxLength:d.maxLength,isRequired:d.isRequired,isPrint:d.isPrint,rotation:d.rotation,tooltip:d.tooltip,options:d.options,isChecked:d.isChecked,isSelected:d.isSelected},d.pageIndex);else if(this.pdfViewerBase.currentTarget&&this.pdfViewerBase.currentTarget.id&&this.commandHandler.formFields&&"mousedown"===event.type)for(var c=0;c<this.commandHandler.formFields.length;c++){var u=this.commandHandler.formFields[c];if(this.pdfViewerBase.currentTarget&&this.pdfViewerBase.currentTarget.id===u.id){var f={value:u.value,fontFamily:u.fontFamily,fontSize:u.fontSize,fontStyle:u.fontStyle,color:u.color,backgroundColor:u.backgroundColor,alignment:u.alignment,isReadonly:u.isReadonly,visibility:u.visibility,maxLength:u.maxLength,isRequired:u.isRequired,isPrint:u.isPrint,rotation:u.rotateAngle,tooltip:u.tooltip,options:u.options,isChecked:u.isChecked,isSelected:u.isSelected};i?this.pdfViewerBase.currentTarget.id!=event.target.id&&"e-pv-text-layer"!=event.target.className&&(this.commandHandler.fireFocusOutFormField(f,u.pageIndex),this.pdfViewerBase.currentTarget=null):(this.commandHandler.fireFocusOutFormField(f,u.pageIndex),this.pdfViewerBase.currentTarget=null)}}}}}},e.prototype.mouseMove=function(t){return s.prototype.mouseMove.call(this,t),!this.blocked},e.prototype.mouseUp=function(t){this.mouseEventHelper(t),this.inAction=!1,s.prototype.mouseUp.call(this,t)},e.prototype.mouseLeave=function(t){this.inAction&&this.mouseUp(t)},e}(Bi),yo=function(s){function e(t,i){var n=s.call(this,t,i)||this;return n.currentTarget=null,n.prevNode=null,n}return pi(e,s),e.prototype.mouseDown=function(t){s.prototype.mouseDown.call(this,t),this.offset={x:t.source.wrapper.offsetX,y:t.source.wrapper.offsetY},this.startPosition=t.position;var i=_(t.source);this.redoElement={bounds:{x:i.wrapper.offsetX,y:i.wrapper.offsetY,width:i.wrapper.actualSize.width,height:i.wrapper.actualSize.height}},pt(i)&&(this.redoElement.vertexPoints=i.vertexPoints,this.redoElement.leaderHeight=i.leaderHeight),this.inAction=!0},e.prototype.mouseUp=function(t){if(this.commandHandler&&t.source){this.checkisAnnotationMove(t);var i=t.source.annotationSelectorSettings;this.commandHandler.clearSelection(this.pdfViewerBase.activeElements.activePageID),this.commandHandler.select([t.source.id],i),this.pdfViewerBase.activeElements.activePageID==t.source.pageIndex&&this.commandHandler.dragSelectedObjects(this.calculateMouseActionXDiff(t),this.calculateMouseActionYDiff(t),this.pdfViewerBase.activeElements.activePageID,i,null),t.source&&("Textbox"===t.source.formFieldAnnotationType||"Checkbox"===t.source.formFieldAnnotationType||"RadioButton"===t.source.formFieldAnnotationType||"ListBox"===t.source.formFieldAnnotationType||"SignatureField"===t.source.formFieldAnnotationType||"InitialField"===t.source.formFieldAnnotationType||"DropdownList"===t.source.formFieldAnnotationType||"PasswordField"===t.source.formFieldAnnotationType)&&this.commandHandler.formDesignerModule.updateHTMLElement(t.source),this.commandHandler.renderSelector(this.pdfViewerBase.activeElements.activePageID,i),this.commandHandler.viewerBase.isAnnotationMouseMove=!1,this.commandHandler.viewerBase.isFormFieldMouseMove=!1;var n={bounds:{x:t.source.wrapper.offsetX,y:t.source.wrapper.offsetY,width:t.source.wrapper.actualSize.width,height:t.source.wrapper.actualSize.height},modifiedDate:t.source.modifiedDate};if(pt(t.source)&&(n.vertexPoints=t.source.vertexPoints,n.leaderHeight=t.source.leaderHeight),t.target&&t.target.formFieldAnnotationType){var o=t.target;this.commandHandler.fireFormFieldMoveEvent("formFieldMove",{value:o.value,fontFamily:o.fontFamily,fontSize:o.fontSize,fontStyle:o.fontStyle,color:o.color,backgroundColor:o.backgroundColor,borderColor:o.borderColor,thickness:o.thickness,alignment:o.alignment,isReadonly:o.isReadonly,visibility:o.visibility,maxLength:o.maxLength,isRequired:o.isRequired,isPrint:o.isPrint,rotation:o.rotateAngle,tooltip:o.tooltip,options:o.options,isChecked:o.isChecked,isSelected:o.isSelected},o.pageIndex,{X:this.offset.x,Y:this.offset.y,Width:t.source.wrapper.actualSize.width,Height:t.source.wrapper.actualSize.height},{X:t.source.wrapper.offsetX,Y:t.source.wrapper.offsetY,Width:t.source.wrapper.actualSize.width,Height:t.source.wrapper.actualSize.height})}this.commandHandler.annotation&&(this.commandHandler.annotation.addAction(this.pageIndex,null,t.source,"Drag","",this.redoElement,n),this.commandHandler.annotation.stampAnnotationModule.updateSessionStorage(t.source,null,"Drag"),this.commandHandler.annotation.stickyNotesAnnotationModule.updateStickyNotes(t.source,null))}var h=this.commandHandler&&this.commandHandler.selectedItems&&this.commandHandler.selectedItems.annotations&&this.commandHandler.selectedItems.annotations.length>0?this.commandHandler.selectedItems.annotations[0].shapeAnnotationType:null;(h&&"Image"!==h&&"SignatureImage"!==h||this.commandHandler&&this.commandHandler.selectedItems&&this.commandHandler.selectedItems.formFields&&this.commandHandler.selectedItems.formFields.length>0)&&s.prototype.mouseUp.call(this,t)},e.prototype.calculateMouseXDiff=function(){return this.currentPosition&&this.startPosition?this.currentPosition.x-this.startPosition.x:0},e.prototype.calculateMouseYDiff=function(){return this.currentPosition&&this.startPosition?this.currentPosition.y-this.startPosition.y:0},e.prototype.calculateMouseActionXDiff=function(t){var i=this.calculateMouseXDiff()/this.commandHandler.viewerBase.getZoomFactor();return this.offset?this.offset.x+i-t.source.wrapper.offsetX:0},e.prototype.calculateMouseActionYDiff=function(t){var i=this.calculateMouseYDiff()/this.commandHandler.viewerBase.getZoomFactor();return this.offset?this.offset.y+i-t.source.wrapper.offsetY:0},e.prototype.mouseMove=function(t,i,n){if(s.prototype.mouseMove.call(this,t),this.inAction){this.currentPosition=t.position,this.currentTarget=t.target;var o=t.source.annotationSelectorSettings,r=this.calculateMouseXDiff()/this.commandHandler.viewerBase.getZoomFactor(),l=this.calculateMouseYDiff()/this.commandHandler.viewerBase.getZoomFactor(),d=this.offset.x+r,h=this.offset.y+l,p=this.calculateMouseActionXDiff(t),f=this.calculateMouseActionYDiff(t),c=this.commandHandler.selectedItems.annotations[0],u=void 0;if(this.helper)p=d-this.helper.wrapper.offsetX,f=h-this.helper.wrapper.offsetY;else{(u=_(this.commandHandler.selectedItems.annotations.length>0?this.commandHandler.selectedItems.annotations[0]:this.commandHandler.selectedItems.formFields[0])).wrapper&&(p=d-u.wrapper.offsetX,f=h-u.wrapper.offsetY,u.bounds=this.commandHandler.selectedItems.annotations.length>0?this.commandHandler.selectedItems.annotations[0].wrapper.bounds:this.commandHandler.selectedItems.formFields[0].wrapper.bounds),u.wrapper=void 0,u.id="diagram_helper","Stamp"===u.shapeAnnotationType?(u.strokeColor="",u.borderDashArray="",u.fillColor="transparent",u.stampFillColor="transparent",u.data=""):"FreeText"===u.shapeAnnotationType?(u.strokeColor="blue",u.fillColor="transparent",u.thickness=1,u.opacity=1,u.dynamicText=""):"SignatureText"===u.shapeAnnotationType?(u.strokeColor="red",u.borderDashArray="5,5",u.fillColor="transparent",u.thickness=2,u.opacity=1,u.data=""):(u.strokeColor="red",u.borderDashArray="5,5",u.fillColor="transparent",u.thickness=2,u.opacity=1),!0===u.enableShapeLabel&&(u.labelContent="");var m=u.shapeAnnotationType;i||"Image"===m||"SignatureImage"===m?u=this.helper=t.source:this.helper=u=this.commandHandler.add(u),this.commandHandler.selectedItems.annotations.length>0?this.commandHandler.selectedItems.annotations=[u]:this.commandHandler.selectedItems.formFields=[u]}if(this.helper&&"Stamp"===this.helper.shapeAnnotationType&&(i=!0),this.commandHandler.checkBoundaryConstraints(p,f,this.pdfViewerBase.activeElements.activePageID,this.helper.wrapper.bounds,i,n)){if(m=this.helper.shapeAnnotationType,!this.helper||"Image"!==m&&"SignatureImage"!==m)this.commandHandler.dragSelectedObjects(p,f,this.pdfViewerBase.activeElements.activePageID,o,this.helper);else{this.checkisAnnotationMove(t);var g=t.source.annotationSelectorSettings;this.commandHandler.clearSelection(this.pdfViewerBase.activeElements.activePageID),this.commandHandler.select([t.source.id],g),this.commandHandler.dragSelectedObjects(p,f,this.pdfViewerBase.activeElements.activePageID,g,this.helper),this.commandHandler.renderSelector(this.pdfViewerBase.activeElements.activePageID,g)}this.prevNode=this.helper,this.prevPosition=this.currentPosition}else this.currentPosition=this.prevPosition;c&&c.annotName&&this.commandHandler.annotation.triggerAnnotationMove(c,!0)}return!0},e.prototype.mouseLeave=function(t){var i=t.source.annotationSelectorSettings,n=this.offset.x+this.calculateMouseXDiff(),o=this.offset.y+this.calculateMouseYDiff();this.commandHandler.dragSelectedObjects(n-t.source.wrapper.offsetX,o-t.source.wrapper.offsetY,this.prevPageId,i,null),this.commandHandler.renderSelector(this.prevPageId,i),s.prototype.mouseLeave.call(this,t)},e.prototype.endAction=function(){s.prototype.endAction.call(this),this.currentTarget=null,this.prevPosition=null},e.prototype.checkisAnnotationMove=function(t){this.commandHandler.selectedItems&&this.commandHandler.selectedItems.annotations&&this.commandHandler.selectedItems.annotations.length>0?this.commandHandler.selectedItems.annotations[0].annotName===t.source.annotName&&(this.commandHandler.viewerBase.isAnnotationMouseMove=!0):this.commandHandler.viewerBase.isAnnotationMouseMove=!1,this.commandHandler.selectedItems&&this.commandHandler.selectedItems.formFields&&this.commandHandler.selectedItems.formFields.length>0?this.commandHandler.selectedItems.formFields[0].name===t.source.name&&(this.commandHandler.viewerBase.isFormFieldMouseMove=!0):this.commandHandler.viewerBase.isFormFieldMouseMove=!1},e}(Bi),wo=function(s){function e(){return null!==s&&s.apply(this,arguments)||this}return pi(e,s),e.prototype.mouseDown=function(t){s.prototype.mouseUp.call(this,t)},e.prototype.mouseMove=function(t){var i;if(!this.inAction){var n=this.pdfViewerBase.activeElements.activePageID;this.commandHandler.clearSelection(this.pdfViewerBase.activeElements.activePageID);var o=this.commandHandler.annotation.stampAnnotationModule.moveStampElement(t.position.x,t.position.y,n);if("SignatureText"===o.shapeAnnotationType){var r=this.getTextWidth(o.data,o.fontSize,o.fontFamily),l=1;r>o.bounds.width&&(l=o.bounds.width/r),o.fontSize=this.getFontSize(Math.floor(o.fontSize*l)),o.bounds.height=o.fontSize<32?2*o.fontSize:o.bounds.height,o.thickness=0}i=this.commandHandler.add(o),t.source=this.commandHandler.annotations[this.commandHandler.annotations.length-1],t.sourceWrapper=t.source.wrapper,this.inAction=!0;var h=t.source;this.offset=!h||"HandWrittenSignature"!==h.shapeAnnotationType&&"SignatureText"!==h.shapeAnnotationType&&"SignatureImage"!==h.shapeAnnotationType?{x:t.source.wrapper.offsetX,y:t.source.wrapper.offsetY}:{x:t.source.wrapper.offsetX-t.source.wrapper.bounds.width/2,y:t.source.wrapper.offsetY-t.source.wrapper.bounds.height/2},this.startPosition=t.position,this.commandHandler.select([i.id])}var p=t.source.annotationSelectorSettings;return s.prototype.mouseMove.call(this,t,!0,!0),this.commandHandler.renderSelector(t.source.pageIndex,p),this.inAction},e.prototype.getTextWidth=function(t,i,n){var l,r=document.createElement("canvas").getContext("2d");return i&&(l=i+"px "+n),r.font=l||getComputedStyle(document.body).font,r.measureText(t).width},e.prototype.getFontSize=function(t){return t%2==0?t:--t},e}(yo),Ru=function(s){function e(t,i,n){var o=s.call(this,t,i)||this;return o.sourceObject=n,o}return pi(e,s),e.prototype.mouseDown=function(t){this.pdfViewerBase.disableTextSelectionMode(),s.prototype.mouseDown.call(this,t),this.inAction=!0,this.commandHandler.annotation.inkAnnotationModule.drawInkInCanvas({currentPosition:this.currentPosition,prevPosition:this.prevPosition},this.pdfViewerBase.activeElements.activePageID)},e.prototype.mouseMove=function(t){return s.prototype.mouseMove.call(this,t),this.inAction&&this.commandHandler.annotation.inkAnnotationModule.drawInkInCanvas({currentPosition:this.currentPosition,prevPosition:this.pdfViewerBase.prevPosition},this.pdfViewerBase.activeElements.activePageID),this.inAction},e.prototype.mouseUp=function(t){return this.commandHandler.annotation.inkAnnotationModule.storePathData(),!0},e.prototype.mouseLeave=function(t){},e.prototype.endAction=function(){s.prototype.endAction.call(this)},e}(Bi),Da=function(s){function e(t,i,n){var o=s.call(this,t,i,!0)||this;return o.endPoint=n,o}return pi(e,s),e.prototype.mouseDown=function(t){this.inAction=!0,this.undoElement=void 0,s.prototype.mouseDown.call(this,t),this.initialPosition=t.position,this.prevSource=this.commandHandler.selectedItems.annotations[0];var o=_(t.source);this.redoElement={bounds:{x:o.wrapper.offsetX,y:o.wrapper.offsetY,width:o.wrapper.actualSize.width,height:o.wrapper.actualSize.height}},pt(o)&&(this.redoElement.vertexPoints=o.vertexPoints,this.redoElement.leaderHeight=o.leaderHeight,("Distance"===o.measureType||"Perimeter"===o.measureType||"Area"===o.measureType||"Volume"===o.measureType)&&(this.redoElement.notes=o.notes)),this.currentPosition=t.position},e.prototype.mouseUp=function(t){if(this.commandHandler){var i=this.commandHandler.selectedItems.annotations[0];if(i){var n=this.commandHandler.annotationModule.findAnnotationSettings(i),o=0,r=0,l=0,d=0;if((n.minWidth||n.maxWidth||n.minHeight||n.maxHeight)&&(o=n.maxHeight?n.maxHeight:2e3,r=n.maxWidth?n.maxWidth:2e3,l=n.minHeight?n.minHeight:0,d=n.minWidth?n.minWidth:0),i.vertexPoints.length>3){var h=this.commandHandler.viewerBase.checkAnnotationWidth(i.vertexPoints),p=h.width,f=h.height;l||d||o||r?(f>l&&f<o||p>d&&p<r)&&this.commandHandler.nodePropertyChange(this.prevSource,{vertexPoints:i.vertexPoints,leaderHeight:i.leaderHeight}):this.commandHandler.nodePropertyChange(this.prevSource,{vertexPoints:i.vertexPoints,leaderHeight:i.leaderHeight})}else if(l||d||o||r)if("Line"===i.shapeAnnotationType||"Distance"===i.shapeAnnotationType||"LineWidthArrowHead"===i.shapeAnnotationType){var c,u,m=(c=i.vertexPoints[0].x>i.vertexPoints[1].x?i.vertexPoints[0].x-i.vertexPoints[1].x:i.vertexPoints[1].x-i.vertexPoints[0].x)>(u=i.vertexPoints[0].y>i.vertexPoints[1].y?i.vertexPoints[0].y-i.vertexPoints[1].y:i.vertexPoints[1].y-i.vertexPoints[0].y)?c:u;m<(o||r)&&m>(l||d)&&this.commandHandler.nodePropertyChange(this.prevSource,{vertexPoints:i.vertexPoints,leaderHeight:i.leaderHeight})}else this.commandHandler.nodePropertyChange(this.prevSource,{vertexPoints:i.vertexPoints,leaderHeight:i.leaderHeight});else this.commandHandler.nodePropertyChange(this.prevSource,{vertexPoints:i.vertexPoints,leaderHeight:i.leaderHeight});var g=t.source.annotationSelectorSettings;this.commandHandler.clearSelection(this.pdfViewerBase.activeElements.activePageID),this.commandHandler.select([this.prevSource.id],g),this.commandHandler.renderSelector(this.pdfViewerBase.activeElements.activePageID,g);var v={bounds:{x:t.source.wrapper.offsetX,y:t.source.wrapper.offsetY,width:t.source.wrapper.actualSize.width,height:t.source.wrapper.actualSize.height}};("Distance"===i.measureType||"Perimeter"===i.measureType||"Area"===i.measureType||"Volume"===i.measureType)&&(this.commandHandler.annotation.updateCalibrateValues(this.commandHandler.selectedItems.annotations[0]),v.notes=t.source.notes),pt(t.source)&&(v.vertexPoints=t.source.vertexPoints,v.leaderHeight=t.source.leaderHeight),this.commandHandler.annotation.addAction(this.pageIndex,null,this.prevSource,"Resize","",this.redoElement,v)}}s.prototype.mouseUp.call(this,t)},e.prototype.mouseMove=function(t){if(s.prototype.mouseMove.call(this,t),this.currentPosition=t.position,this.currentPosition&&this.prevPosition&&(this.inAction&&void 0!==this.endPoint&&0!=this.currentPosition.x-this.prevPosition.x||0!=this.currentPosition.y-this.prevPosition.y)){if(!this.helper){var d=_(this.commandHandler.selectedItems.annotations[0]);d.id="diagram_helper",d.strokeColor="red",d.borderDashArray="5,5",d.fillColor="transparent",d.thickness=2,d.opacity=1,!0===d.enableShapeLabel&&(d.labelContent=""),this.helper=d=this.commandHandler.add(d),this.commandHandler.selectedItems.annotations=[d]}var h=t.source.annotationSelectorSettings;this.blocked=!this.commandHandler.dragConnectorEnds(this.endPoint,this.helper,this.currentPosition,this.selectedSegment,t.target,null,h),this.commandHandler.renderSelector(this.pdfViewerBase.activeElements.activePageID,h)}return this.prevPosition=this.currentPosition,!this.blocked},e.prototype.mouseLeave=function(t){this.mouseUp(t)},e.prototype.endAction=function(){s.prototype.endAction.call(this),this.prevPosition=null,this.endPoint=null},e}(Bi),Bs=function(s){function e(t,i,n){var o=s.call(this,t,i,!0)||this;return o.initialBounds=new de,o.corner=n,o}return pi(e,s),e.prototype.mouseDown=function(t){s.prototype.mouseDown.call(this,t),this.initialBounds.x=t.source.wrapper.offsetX,this.initialBounds.y=t.source.wrapper.offsetY,this.initialBounds.height=t.source.wrapper.actualSize.height,this.initialBounds.width=t.source.wrapper.actualSize.width,this.initialPosition=t.position;var i=_(t.source);this.redoElement={bounds:{x:i.wrapper.offsetX,y:i.wrapper.offsetY,width:i.wrapper.actualSize.width,height:i.wrapper.actualSize.height}},pt(i)&&(this.redoElement.vertexPoints=i.vertexPoints,this.redoElement.leaderHeight=i.leaderHeight),"Radius"===i.measureType&&(this.redoElement.notes=i.notes),this.prevSource=this.commandHandler.selectedItems.annotations.length>0?this.commandHandler.selectedItems.annotations[0]:this.commandHandler.selectedItems.formFields[0]},e.prototype.mouseUp=function(t,i){var o=_(t.source);if(this.commandHandler&&this.prevSource){this.commandHandler.clearSelection(this.pdfViewerBase.activeElements.activePageID),this.commandHandler.viewerBase.isAnnotationSelect=!0,this.commandHandler.viewerBase.isFormFieldSelect=!0,this.commandHandler.select([this.prevSource.id],this.prevSource.annotationSelectorSettings);var r=this.updateSize(this.prevSource,this.currentPosition,this.initialPosition,this.corner,this.initialBounds,null,!0);if(this.blocked=this.scaleObjects(r.width,r.height,this.corner,this.currentPosition,this.initialPosition,this.prevSource,t.info.ctrlKey),this.commandHandler.selectedItems&&this.commandHandler.selectedItems.annotations&&this.commandHandler.selectedItems.annotations[0]&&"Stamp"===this.commandHandler.selectedItems.annotations[0].shapeAnnotationType&&(this.commandHandler.stampSettings.minHeight||this.commandHandler.stampSettings.minWidth)&&this.commandHandler.select([this.prevSource.id],this.prevSource.annotationSelectorSettings),this.commandHandler.selectedItems.formFields.length>0&&("Textbox"===this.commandHandler.selectedItems.formFields[0].formFieldAnnotationType||"Checkbox"===this.commandHandler.selectedItems.formFields[0].formFieldAnnotationType||"RadioButton"===this.commandHandler.selectedItems.formFields[0].formFieldAnnotationType||"InitialField"===this.commandHandler.selectedItems.formFields[0].formFieldAnnotationType||"SignatureField"===this.commandHandler.selectedItems.formFields[0].formFieldAnnotationType||"DropdownList"===this.commandHandler.selectedItems.formFields[0].formFieldAnnotationType||"ListBox"===this.commandHandler.selectedItems.formFields[0].formFieldAnnotationType||"PasswordField"===this.commandHandler.selectedItems.formFields[0].formFieldAnnotationType)&&("SignatureField"===this.commandHandler.selectedItems.formFields[0].formFieldAnnotationType&&(this.commandHandler.selectedItems.formFields[0].signatureIndicatorSettings=this.commandHandler.selectedItems.formFields[0].signatureIndicatorSettings?this.commandHandler.selectedItems.formFields[0].signatureIndicatorSettings:{opacity:1,backgroundColor:"rgba(255, 228, 133, 0.35)",width:19,height:10,fontSize:10,text:null,color:"black"}),this.commandHandler.formDesignerModule.updateHTMLElement(this.commandHandler.selectedItems.formFields[0])),this.commandHandler.renderSelector(this.prevPageId,this.prevSource.annotationSelectorSettings),this.commandHandler.annotation&&t.source.wrapper){var l={bounds:{x:t.source.wrapper.offsetX,y:t.source.wrapper.offsetY,width:t.source.wrapper.actualSize.width,height:t.source.wrapper.actualSize.height}};pt(t.source)&&(l.vertexPoints=t.source.vertexPoints,l.leaderHeight=t.source.leaderHeight),"Radius"===this.prevSource.measureType&&(l.notes=t.source.notes,this.commandHandler.annotation.updateCalibrateValues(this.prevSource)),"SignatureText"===this.prevSource.shapeAnnotationType&&(l.fontSize=this.prevSource.wrapper.children[1].style.fontSize*(l.bounds.width/o.width),null!=t.target&&(t.target.fontSize=l.fontSize,t.target.wrapper.children[1].style.fontSize=l.fontSize,t.target.wrapper.children[1].horizontalAlignment="Center",t.target.wrapper.children[1].verticalAlignment="Center",t.target.wrapper.children[1].setOffsetWithRespectToBounds(0,0,"Absolute"),this.commandHandler.selectedItems.annotations[0].wrapper.children[1].style.fontSize=l.fontSize,this.commandHandler.selectedItems.annotations[0].wrapper.children[1].horizontalAlignment="Center",this.commandHandler.selectedItems.annotations[0].wrapper.children[1].verticalAlignment="Center",this.commandHandler.selectedItems.annotations[0].wrapper.children[1].setOffsetWithRespectToBounds(0,0,"Absolute"),this.commandHandler.selectedItems.annotations[0].fontSize=l.fontSize)),"SignatureText"===this.prevSource.shapeAnnotationType&&this.commandHandler.selectedItems.annotations&&this.commandHandler.selectedItems.annotations.length>0&&this.commandHandler.nodePropertyChange(this.commandHandler.selectedItems.annotations[0],{fontSize:l.fontSize}),this.commandHandler.annotation.addAction(this.pageIndex,null,this.prevSource,"Resize","",this.redoElement,l)}if(t.target&&t.target.formFieldAnnotationType){var h=t.target;this.commandHandler.fireFormFieldResizeEvent("formFieldResize",{value:h.value,fontFamily:h.fontFamily,fontSize:h.fontSize,fontStyle:h.fontStyle,color:h.color,backgroundColor:h.backgroundColor,alignment:h.alignment,isReadonly:h.isReadonly,visibility:h.visibility,maxLength:h.maxLength,isRequired:h.isRequired,isPrint:h.isPrint,rotation:h.rotateAngle,tooltip:h.tooltip,options:h.options,isChecked:h.isChecked,isSelected:h.isSelected},h.pageIndex,{X:this.initialBounds.x,Y:this.initialBounds.y,Width:this.initialBounds.width,Height:this.initialBounds.height},{X:t.source.wrapper.offsetX,Y:t.source.wrapper.offsetY,Width:t.source.wrapper.actualSize.width,Height:t.source.wrapper.actualSize.height})}this.commandHandler.annotation&&this.commandHandler.annotation.stampAnnotationModule&&this.commandHandler.annotation.stampAnnotationModule.updateSessionStorage(t.source,this.prevSource.id,"Resize")}return s.prototype.mouseUp.call(this,t),!this.blocked},e.prototype.mouseMove=function(t){s.prototype.mouseMove.call(this,t);var i=t.source;this.currentPosition=t.position;var n=this.currentPosition.x-this.startPosition.x,o=this.currentPosition.y-this.startPosition.y;n/=this.commandHandler.viewerBase.getZoomFactor(),o/=this.commandHandler.viewerBase.getZoomFactor();var r=t.source,l=this.getPoints(n,o),d=r.width+l.x,h=r.height+l.y,p=i;i&&i.annotations&&(p=i.annotations[0]);var f=this.commandHandler.annotationModule?this.commandHandler.annotationModule.findAnnotationSettings(p):{},c=0,u=0,m=0,g=0;(f.minWidth||f.maxWidth||f.minHeight||f.maxHeight)&&(c=f.maxHeight?f.maxHeight:2e3,u=f.maxWidth?f.maxWidth:2e3,m=f.minHeight?f.minHeight:0,g=f.minWidth?f.minWidth:0),(m||g||c||u)&&(h>=m&&h<=c&&d>=g&&d<=u||((h<m||h>c)&&(o=h<m?m-r.height:c-r.height),(d<g||d>u)&&(n=d<g?g-r.width:u-r.width)));var v={x:n,y:o};if(this.currentElement.wrapper&&(v=ut(-this.currentElement.wrapper.rotateAngle,void 0,void 0,v)),v=this.getChanges(v),this.commandHandler.renderSelector(this.prevPageId,this.prevSource.annotationSelectorSettings),!this.helper){var y=_(this.commandHandler.selectedItems.annotations.length>0?this.commandHandler.selectedItems.annotations[0]:this.commandHandler.selectedItems.formFields[0]);y.id="diagram_helper","Stamp"===y.shapeAnnotationType?(y.strokeColor="",y.borderDashArray="",y.fillColor="transparent",y.stampFillColor="transparent",y.data=""):"FreeText"===y.shapeAnnotationType?(y.strokeColor="blue",y.fillColor="transparent",y.thickness=1,y.opacity=1,y.dynamicText=""):(y.bounds=this.commandHandler.selectedItems.annotations.length>0?this.commandHandler.selectedItems.annotations[0].wrapper.bounds:this.commandHandler.selectedItems.formFields[0].wrapper.bounds,y.strokeColor="red",y.borderDashArray="5,5",y.fillColor="transparent",y.thickness=2,y.opacity=1),!0===y.enableShapeLabel&&(y.labelContent=""),"SignatureText"===y.shapeAnnotationType&&(y.fillColor="transparent",y.thickness=1,y.opacity=1,y.data=""),this.helper=y=this.commandHandler.add(y),this.commandHandler.selectedItems.annotations.length>0?this.commandHandler.selectedItems.annotations=[y]:this.commandHandler.selectedItems.formFields=[y]}var b=this.updateSize(this.helper,this.startPosition,this.currentPosition,this.corner,this.initialBounds);return this.blocked=!this.scaleObjects(b.width,b.height,this.corner,this.startPosition,this.currentPosition,this.helper,t.info.ctrlKey),this.prevPosition=this.currentPosition,!this.blocked},e.prototype.mouseLeave=function(t){this.mouseUp(t)},e.prototype.getTooltipContent=function(t){return"W:"+Math.round(t.wrapper.bounds.width)+" H:"+Math.round(t.wrapper.bounds.height)},e.prototype.getChanges=function(t){switch(this.corner){case"ResizeEast":return{x:t.x,y:0};case"ResizeSouthEast":return t;case"ResizeSouth":return{x:0,y:t.y};case"ResizeNorth":return{x:0,y:-t.y};case"ResizeNorthEast":return{x:t.x,y:-t.y};case"ResizeNorthWest":return{x:-t.x,y:-t.y};case"ResizeWest":return{x:-t.x,y:0};case"ResizeSouthWest":return{x:-t.x,y:t.y}}return t},e.prototype.getPoints=function(t,i){switch(this.corner){case"ResizeEast":return{x:t,y:0};case"ResizeSouthEast":return{x:t,y:i};case"ResizeSouth":return{x:0,y:i};case"ResizeNorth":return{x:0,y:-i};case"ResizeNorthEast":return{x:t,y:-i};case"ResizeNorthWest":return{x:-t,y:-i};case"ResizeWest":return{x:-t,y:0};case"ResizeSouthWest":return{x:-t,y:i}}return{x:t,y:i}},e.prototype.scaleObjects=function(t,i,n,o,r,l,d){var h=this.commandHandler.annotationModule?this.commandHandler.annotationModule.findAnnotationSettings(l):{},p=0,f=0,m=this.currentPosition.x-this.startPosition.x,g=this.currentPosition.y-this.startPosition.y;m/=this.commandHandler.viewerBase.getZoomFactor(),g/=this.commandHandler.viewerBase.getZoomFactor();var v=l,y=this.getPoints(m,g),b=v.bounds.width+y.x,C=v.bounds.height+y.y;return(h.minWidth||h.maxWidth||h.minHeight||h.maxHeight)&&(p=h.maxHeight?h.maxHeight:2e3,f=h.maxWidth?h.maxWidth:2e3),l instanceof an&&1===l.annotations.length&&("Perimeter"===l.annotations[0].shapeAnnotationType||"Radius"===l.annotations[0].shapeAnnotationType||"Stamp"===l.shapeAnnotationType)?i=t=1===i&&1===t?o!==r?Math.max(i,t):0:Math.max(1===i?0:i,1===t?0:t):"Image"===l.shapeAnnotationType||"HandWrittenSignature"===l.shapeAnnotationType||"SignatureText"===l.shapeAnnotationType||"SignatureImage"===l.shapeAnnotationType?(1===i&&1===t||d&&(b>=f&&C<p&&(i=Math.max(i,t)),C>=p&&b<f&&(t=Math.max(i,t)),b<f&&C<p&&(i=t=Math.max(i,t))),d||(i=t=Math.max(i,t))):("Perimeter"===l.shapeAnnotationType||"Radius"===l.shapeAnnotationType||"Stamp"===l.shapeAnnotationType)&&("Stamp"===l.shapeAnnotationType?(!p&&!i&&(i=Math.max(1===i?0:i)),!f&&!t&&(t=Math.max(1===t?0:t))):(!p||!f)&&(1===i&&1===t||(i=t=Math.max(1===i?0:i,1===t?0:t)))),this.blocked=this.commandHandler.scaleSelectedItems(t,i,this.getPivot(this.corner)),this.blocked},e}(Bi),Fi=function(s){function e(t,i,n){var o=s.call(this,t,i)||this;return o.sourceObject=n,o}return pi(e,s),e.prototype.mouseDown=function(t){if(!isNaN(this.pdfViewerBase.activeElements.activePageID)&&"e-pv-page-container"!=event.target.className){s.prototype.mouseDown.call(this,t),this.inAction=!0;var i={bounds:{x:100,y:300,width:100,height:100},pageIndex:0,strokeColor:"red",thickness:3};i.id=at(),this.sourceObject.pageIndex=i.pageIndex=this.pdfViewerBase.activeElements.activePageID||0,this.sourceObject.enableShapeLabel=this.commandHandler.enableShapeLabel,this.pdfViewerBase.updateFreeTextProperties(this.sourceObject),this.isFormDesign=!1;var n=document.getElementById("FormField_helper_html_element");if(n&&n.remove(),this.commandHandler.drawingObject=this.drawingObject=this.commandHandler.add(this.sourceObject||i),"Textbox"===this.drawingObject.formFieldAnnotationType||"SignatureField"===this.drawingObject.formFieldAnnotationType||"InitialField"===this.drawingObject.formFieldAnnotationType||"Checkbox"===this.drawingObject.formFieldAnnotationType||"ListBox"===this.drawingObject.formFieldAnnotationType||"RadioButton"===this.drawingObject.formFieldAnnotationType||"DropdownList"===this.drawingObject.formFieldAnnotationType||"PasswordField"===this.drawingObject.formFieldAnnotationType){this.inAction=!1,this.drawingObject.pageNumber=this.pdfViewerBase.getActivePage(!0);var o=this.commandHandler.formDesignerModule.updateFormFieldInitialSize(this.drawingObject.wrapper.children[0],this.drawingObject.formFieldAnnotationType),r=this.pdfViewerBase.pageContainer.firstElementChild.clientWidth-o.width,l=this.pdfViewerBase.pageContainer.firstElementChild.clientHeight-o.height,d=this.pdfViewerBase.pageContainer.firstElementChild.offsetLeft,h=void 0;if(this.currentPosition.y>=l&&event.target&&event.target.parentElement&&event.target.parentElement.classList.contains("foreign-object")){var p=event.path[3].getBoundingClientRect();h=event.clientX-p.left}else h=this.currentPosition.x-d;this.updateNodeDimension(this.drawingObject,this.currentPosition.x>=r&&this.currentPosition.y>=l?{x:r,y:l,width:this.drawingObject.wrapper.children[0].width,height:this.drawingObject.wrapper.children[0].height}:this.currentPosition.x>=r?{x:r,y:this.currentPosition.y,width:this.drawingObject.wrapper.children[0].width,height:this.drawingObject.wrapper.children[0].height}:this.currentPosition.y>=l?{x:h,y:l,width:this.drawingObject.wrapper.children[0].width,height:this.drawingObject.wrapper.children[0].height}:{x:this.currentPosition.x,y:this.currentPosition.y,width:this.drawingObject.wrapper.children[0].width,height:this.drawingObject.wrapper.children[0].height}),this.drawingObject.bounds.x=this.drawingObject.bounds.x-this.drawingObject.bounds.width/2,this.drawingObject.bounds.y=this.drawingObject.bounds.y-this.drawingObject.bounds.height/2,this.commandHandler.formFieldCollection.push(this.drawingObject);var c=this.drawingObject;this.commandHandler.formFieldCollections.push({id:c.id,name:c.name,value:c.value,type:c.formFieldAnnotationType,isReadOnly:c.isReadonly,fontFamily:c.fontFamily,fontSize:c.fontSize,fontStyle:c.fontStyle,color:c.color,backgroundColor:c.backgroundColor,alignment:c.alignment,visibility:c.visibility,maxLength:c.maxLength,isRequired:c.isRequired,isPrint:c.isPrint,isSelected:c.isSelected,isChecked:c.isChecked,tooltip:c.tooltip,bounds:c.bounds,thickness:c.thickness,borderColor:c.borderColor,signatureIndicatorSettings:c.signatureIndicatorSettings,pageIndex:c.pageIndex}),this.commandHandler.formDesignerModule.drawHTMLContent(this.drawingObject.formFieldAnnotationType,this.drawingObject.wrapper.children[0],this.drawingObject,this.drawingObject.pageIndex,this.commandHandler),this.commandHandler.select([this.commandHandler.drawingObject.id],this.commandHandler.annotationSelectorSettings),this.commandHandler.annotation&&this.commandHandler.annotation.addAction(this.pdfViewerBase.getActivePage(!0),null,this.drawingObject,"Addition","",this.drawingObject,this.drawingObject),this.endAction(),this.pdfViewerBase.tool=null,this.pdfViewerBase.action="Select",this.drawingObject=null,this.pdfViewerBase.isMouseDown=!1,this.pdfViewerBase.pdfViewer.drawingObject=null,this.isFormDesign=!0}}},e.prototype.mouseMove=function(t){if(s.prototype.mouseMove.call(this,t),this.inAction&&!1===se.equals(this.currentPosition,this.prevPosition)){this.dragging=!0;var i=de.toBounds([this.prevPosition,this.currentPosition]);this.updateNodeDimension(this.drawingObject,i),"Radius"===this.drawingObject.shapeAnnotationType&&this.updateRadiusLinePosition(this.drawingObject.wrapper.children[1],this.drawingObject)}return!0},e.prototype.mouseUp=function(t){if(this.drawingObject&&this.dragging){this.commandHandler.clearSelection(this.pdfViewerBase.activeElements.activePageID),this.commandHandler.select([this.drawingObject.id],this.commandHandler.annotationSelectorSettings);var i=this.commandHandler.selectedItems.annotations[0];this.commandHandler.nodePropertyChange(i,{bounds:{x:i.wrapper.offsetX,y:i.wrapper.offsetY}}),this.commandHandler.annotation.updateCalibrateValues(this.drawingObject,!0),this.commandHandler&&!this.isFormDesign&&this.commandHandler.annotation.addAction(this.pageIndex,null,this.drawingObject,"Addition","",this.drawingObject,this.drawingObject),this.dragging=!1,s.prototype.mouseUp.call(this,t),this.inAction=!1}else s.prototype.mouseUp.call(this,t);this.drawingObject=null},e.prototype.endAction=function(){s.prototype.endAction.call(this)},e.prototype.updateNodeDimension=function(t,i){var n=this.commandHandler.viewerBase.getZoomFactor();t.bounds.x=i.x/n+i.width/n,t.bounds.y=i.y/n+i.height/n,t.bounds.width=i.width/n,t.bounds.height=i.height/n;var o=this.commandHandler.annotationModule?this.commandHandler.annotationModule.findAnnotationSettings(t):{},r=0,l=0;o.maxWidth||o.maxHeight?(r=o.maxHeight?o.maxHeight:2e3,t.bounds.width>(l=o.maxWidth?o.maxWidth:2e3)&&(t.bounds.width=l),t.bounds.height>r&&(t.bounds.height=r),t.bounds.height<=r&&t.bounds.width<=l&&this.commandHandler.nodePropertyChange(t,{bounds:t.bounds})):this.commandHandler.nodePropertyChange(t,{bounds:t.bounds})},e.prototype.updateRadiusLinePosition=function(t,i){var n={x:i.bounds.x+i.bounds.width/4,y:i.bounds.y},o={x:i.bounds.x+i.bounds.width/2,y:i.bounds.y+i.bounds.height/2},r=he();pe(r,i.rotateAngle,o.x,o.y);var l=R(r,n),d={x:l.x,y:l.y};t.offsetX=d.x,t.offsetY=d.y,t.width=i.bounds.width/2;var h=this.commandHandler.annotationModule.findAnnotationSettings(i),p=0;h.maxWidth&&i.bounds.width>(p=h.maxWidth?h.maxWidth:2e3)&&(i.bounds.width=p,t.width=i.bounds.width/2),this.commandHandler.renderDrawing(void 0,i.pageIndex)},e}(Bi),Xt=function(s){function e(t,i,n){var o=s.call(this,t,i)||this;return o.action=n,o}return pi(e,s),e.prototype.mouseDown=function(t){if(s.prototype.mouseDown.call(this,t),this.inAction=!0,this.drawingObject){var n=void 0,o=this.drawingObject,r=this.drawingObject.vertexPoints[this.drawingObject.vertexPoints.length-1];r.x===(n={x:(n=o.vertexPoints[o.vertexPoints.length-1]).x,y:n.y}).x&&r.x===n.y||this.drawingObject.vertexPoints.push(n),this.commandHandler.nodePropertyChange(o,{vertexPoints:o.vertexPoints})}else{this.startPoint={x:this.startPosition.x,y:this.startPosition.y};var i={bounds:{x:this.currentPosition.x,y:this.currentPosition.y,width:5,height:5},vertexPoints:[{x:this.startPoint.x/this.pdfViewerBase.getZoomFactor(),y:this.startPoint.y/this.pdfViewerBase.getZoomFactor()},{x:this.currentPosition.x/this.pdfViewerBase.getZoomFactor(),y:this.currentPosition.y/this.pdfViewerBase.getZoomFactor()}],shapeAnnotationType:"Line",fillColor:this.commandHandler.drawingObject.fillColor,strokeColor:this.commandHandler.drawingObject.strokeColor,pageIndex:this.pdfViewerBase.activeElements.activePageID,notes:this.commandHandler.drawingObject.notes,thickness:this.commandHandler.drawingObject.thickness,author:this.commandHandler.drawingObject.author,subject:this.commandHandler.drawingObject.subject,borderDashArray:this.commandHandler.drawingObject.borderDashArray,modifiedDate:this.commandHandler.drawingObject.modifiedDate,borderStyle:this.commandHandler.drawingObject.borderStyle,measureType:this.commandHandler.drawingObject.measureType,enableShapeLabel:this.commandHandler.enableShapeLabel,opacity:this.commandHandler.drawingObject.opacity};this.pdfViewerBase.updateFreeTextProperties(i),this.drawingObject=this.commandHandler.add(i)}},e.prototype.mouseMove=function(t){if(s.prototype.mouseMove.call(this,t),this.inAction&&!1===se.equals(this.currentPosition,this.prevPosition)){this.dragging=!0;var i=this.drawingObject;this.drawingObject&&this.currentPosition&&(i.vertexPoints[i.vertexPoints.length-1].x=this.currentPosition.x/this.pdfViewerBase.getZoomFactor(),i.vertexPoints[i.vertexPoints.length-1].y=this.currentPosition.y/this.pdfViewerBase.getZoomFactor(),this.commandHandler.nodePropertyChange(i,{vertexPoints:i.vertexPoints})),"Perimeter"===i.measureType&&Bu(i,0,this.commandHandler.annotation.measureAnnotationModule)}return!0},e.prototype.mouseUp=function(t,i,n){var o;if(s.prototype.mouseMove.call(this,t),t.source&&null!==t.annotationSelectorSettings&&(o=t.source.annotationSelectorSettings),this.drawingObject)if((new de(this.drawingObject.vertexPoints[this.drawingObject.vertexPoints.length-1].x-20,this.drawingObject.vertexPoints[this.drawingObject.vertexPoints.length-1].y-20,40,40).containsPoint({x:this.drawingObject.vertexPoints[0].x,y:this.drawingObject.vertexPoints[0].y})||i)&&this.dragging){if(this.inAction&&(this.inAction=!1,this.drawingObject)){if(n||this.drawingObject.vertexPoints.length>2&&this.drawingObject.vertexPoints.splice(this.drawingObject.vertexPoints.length-1,1),"Polygon"===this.action){n?this.drawingObject.vertexPoints[this.drawingObject.vertexPoints.length]=this.drawingObject.vertexPoints[0]:this.drawingObject.vertexPoints[this.drawingObject.vertexPoints.length-1]=this.drawingObject.vertexPoints[0],this.commandHandler.nodePropertyChange(this.drawingObject,{vertexPoints:this.drawingObject.vertexPoints});var d=_(this.drawingObject);d.shapeAnnotationType="Polygon",d.bounds.width=d.wrapper.actualSize.width,d.bounds.height=d.wrapper.actualSize.height,d.bounds.x=this.drawingObject.wrapper.bounds.x,d.bounds.y=this.drawingObject.wrapper.bounds.y,this.commandHandler.add(d),this.commandHandler.remove(this.drawingObject),this.commandHandler.select([d.id],o);var h=this.commandHandler.selectedItems.annotations[0];h&&(this.commandHandler.enableShapeAnnotation&&((0,a.le)(h.measureType)||""===h.measureType)&&this.commandHandler.annotation.shapeAnnotationModule.renderShapeAnnotations(h,h.pageIndex),this.commandHandler.enableMeasureAnnotation&&("Area"===h.measureType||"Volume"===h.measureType)&&("Area"===h.measureType?(h.notes=this.commandHandler.annotation.measureAnnotationModule.calculateArea(h.vertexPoints),this.commandHandler.annotation.stickyNotesAnnotationModule.addTextToComments(h.annotName,h.notes)):"Volume"===h.measureType&&(h.notes=this.commandHandler.annotation.measureAnnotationModule.calculateVolume(h.vertexPoints),this.commandHandler.annotation.stickyNotesAnnotationModule.addTextToComments(h.annotName,h.notes)),h.enableShapeLabel&&(h.labelContent=h.notes,this.commandHandler.nodePropertyChange(h,{vertexPoints:h.vertexPoints,notes:h.notes})),this.commandHandler.annotation.measureAnnotationModule.renderMeasureShapeAnnotations(h,h.pageIndex)))}else n||i&&this.drawingObject.vertexPoints.splice(this.drawingObject.vertexPoints.length-1,1),this.commandHandler.nodePropertyChange(this.drawingObject,{vertexPoints:this.drawingObject.vertexPoints,sourceDecoraterShapes:this.commandHandler.drawingObject.sourceDecoraterShapes,taregetDecoraterShapes:this.commandHandler.drawingObject.taregetDecoraterShapes}),this.commandHandler.select([this.drawingObject.id],o),this.commandHandler.enableMeasureAnnotation&&"Perimeter"===this.drawingObject.measureType&&(this.commandHandler.renderDrawing(null,this.drawingObject.pageIndex),this.drawingObject.notes=this.commandHandler.annotation.measureAnnotationModule.calculatePerimeter(this.drawingObject),this.drawingObject.enableShapeLabel&&(this.drawingObject.labelContent=this.drawingObject.notes,this.commandHandler.nodePropertyChange(this.drawingObject,{vertexPoints:this.drawingObject.vertexPoints,notes:this.drawingObject.notes})),this.commandHandler.annotation.stickyNotesAnnotationModule.addTextToComments(this.drawingObject.annotName,this.drawingObject.notes),this.commandHandler.annotation.measureAnnotationModule.renderMeasureShapeAnnotations(this.drawingObject,this.drawingObject.pageIndex));var p=this.commandHandler.selectedItems.annotations[0];this.commandHandler.annotation.addAction(this.pageIndex,null,p,"Addition","",p,p),this.drawingObject=null}this.endAction()}else this.inAction&&!this.dragging&&this.commandHandler.remove(this.drawingObject)},e.prototype.mouseLeave=function(t){this.mouseUp(t,!0,!0)},e.prototype.mouseWheel=function(t){s.prototype.mouseWheel.call(this,t),this.mouseMove(t)},e.prototype.endAction=function(){this.inAction=!1,this.drawingObject=null,this.commandHandler.tool=""},e}(Bi),Ze=function(s){function e(t,i,n,o){var r=s.call(this,t,i,!0)||this;return r.endPoint=n,r.drawingObject=o,r}return pi(e,s),e.prototype.mouseDown=function(t){if(this.inAction=!0,this.undoElement=void 0,s.prototype.mouseDown.call(this,t),this.initialPosition=t.position,this.prevSource=this.drawingObject,this.currentPosition=t.position,this.drawingObject){if(!this.dragging){var l={bounds:{x:this.currentPosition.x,y:this.currentPosition.y,width:5,height:5},vertexPoints:[{x:this.startPosition.x/this.pdfViewerBase.getZoomFactor(),y:this.startPosition.y/this.pdfViewerBase.getZoomFactor()},{x:this.currentPosition.x/this.pdfViewerBase.getZoomFactor(),y:this.currentPosition.y/this.pdfViewerBase.getZoomFactor()}],shapeAnnotationType:this.drawingObject.shapeAnnotationType,sourceDecoraterShapes:this.drawingObject.sourceDecoraterShapes,taregetDecoraterShapes:this.drawingObject.taregetDecoraterShapes,fillColor:this.drawingObject.fillColor,strokeColor:this.drawingObject.strokeColor,pageIndex:this.pdfViewerBase.activeElements.activePageID,opacity:this.drawingObject.opacity||1,borderDashArray:this.drawingObject.borderDashArray,thickness:this.drawingObject.thickness,modifiedDate:this.drawingObject.modifiedDate,author:this.drawingObject.author,subject:this.drawingObject.subject,lineHeadEnd:this.drawingObject.lineHeadEnd,lineHeadStart:this.drawingObject.lineHeadStart,measureType:this.commandHandler.drawingObject.measureType,enableShapeLabel:this.commandHandler.enableShapeLabel};this.pdfViewerBase.updateFreeTextProperties(l),this.drawingObject=this.commandHandler.add(l)}}else{var o=this.commandHandler.annotation.measureAnnotationModule,r={vertexPoints:[{x:this.startPosition.x/this.pdfViewerBase.getZoomFactor(),y:this.startPosition.y/this.pdfViewerBase.getZoomFactor()},{x:this.currentPosition.x/this.pdfViewerBase.getZoomFactor(),y:this.currentPosition.y/this.pdfViewerBase.getZoomFactor()}],bounds:{x:this.currentPosition.x,y:this.currentPosition.y,width:5,height:5},sourceDecoraterShapes:this.commandHandler.drawingObject.sourceDecoraterShapes,taregetDecoraterShapes:this.commandHandler.drawingObject.taregetDecoraterShapes,measureType:"Distance",fillColor:this.commandHandler.drawingObject.fillColor,notes:this.commandHandler.drawingObject.notes,strokeColor:this.commandHandler.drawingObject.strokeColor,opacity:this.commandHandler.drawingObject.opacity,thickness:this.commandHandler.drawingObject.thickness,borderDashArray:this.commandHandler.drawingObject.borderDashArray,shapeAnnotationType:"Distance",pageIndex:this.pdfViewerBase.activeElements.activePageID,author:this.commandHandler.drawingObject.author,subject:this.commandHandler.drawingObject.subject,enableShapeLabel:this.commandHandler.enableShapeLabel,leaderHeight:o.leaderLength};this.pdfViewerBase.updateFreeTextProperties(r),this.drawingObject=this.commandHandler.add(r)}},e.prototype.mouseUp=function(t){if(this.dragging){if(s.prototype.mouseMove.call(this,t),this.commandHandler){var i;i=t.source&&null!==t.annotationSelectorSettings?t.source.annotationSelectorSettings:"";var n=this.drawingObject;this.commandHandler.nodePropertyChange(n,{vertexPoints:n.vertexPoints,leaderHeight:n.leaderHeight}),this.commandHandler.clearSelection(this.pdfViewerBase.activeElements.activePageID),this.commandHandler.select([n.id],i),this.commandHandler.renderSelector(this.pdfViewerBase.activeElements.activePageID,i)}this.endPoint&&this.endPoint.indexOf("ConnectorSegmentPoint")>-1&&this.dragging&&(this.commandHandler.annotation.updateCalibrateValues(this.drawingObject),this.commandHandler.annotation.addAction(this.pageIndex,null,this.drawingObject,"Addition","",this.drawingObject,this.drawingObject),this.drawingObject=null,this.dragging=!1,s.prototype.mouseUp.call(this,t)),this.drawingObject&&(this.endPoint="ConnectorSegmentPoint_1")}else this.drawingObject&&this.commandHandler.remove(this.drawingObject)},e.prototype.mouseMove=function(t){if(s.prototype.mouseMove.call(this,t),this.inAction&&!1===se.equals(this.currentPosition,this.prevPosition)){if(this.currentPosition=t.position,this.dragging=!0,this.currentPosition&&this.prevPosition){var o;o=t.source&&null!==t.annotationSelectorSettings?t.source.annotationSelectorSettings:"",(this.inAction&&this.commandHandler&&this.drawingObject&&void 0!==this.endPoint&&0!=this.currentPosition.x-this.prevPosition.x||0!=this.currentPosition.y-this.prevPosition.y)&&(this.blocked=!this.commandHandler.dragConnectorEnds(this.endPoint,this.drawingObject,this.currentPosition,this.selectedSegment,t.target,null,o),this.commandHandler.renderSelector(this.pdfViewerBase.activeElements.activePageID,o))}this.prevPosition=this.currentPosition}return!this.blocked},e.prototype.mouseLeave=function(t){this.mouseUp(t)},e.prototype.endAction=function(){s.prototype.endAction.call(this),this.prevPosition=null,this.endPoint=null},e}(Bi),xb=function(s){function e(t,i){return s.call(this,t,i,!0)||this}return pi(e,s),e.prototype.mouseDown=function(t){var i=_(t.source);this.undoElement={bounds:{x:i.wrapper.offsetX,y:i.wrapper.offsetY,width:i.wrapper.actualSize.width,height:i.wrapper.actualSize.height},rotateAngle:i.rotateAngle},s.prototype.mouseDown.call(this,t)},e.prototype.mouseUp=function(t){var n;this.undoElement.rotateAngle!==t.source.wrapper.rotateAngle&&(this.commandHandler.renderSelector(this.pdfViewerBase.activeElements.activePageID,t.source.annotations[0].annotationSelectorSettings),n={bounds:{x:t.source.wrapper.offsetX,y:t.source.wrapper.offsetY,width:t.source.wrapper.actualSize.width,height:t.source.wrapper.actualSize.height},rotateAngle:t.source.wrapper.rotateAngle}),this.commandHandler.annotation.addAction(this.pageIndex,null,t.source,"Rotate","",this.undoElement,n),this.commandHandler.annotation.stampAnnotationModule.updateSessionStorage(t.source,null,"Rotate"),this.commandHandler.annotation.stickyNotesAnnotationModule.updateStickyNotes(t.source,null),s.prototype.mouseUp.call(this,t)},e.prototype.mouseMove=function(t){s.prototype.mouseMove.call(this,t);var i=t.source,n=t.source.annotations[0].annotationSelectorSettings;if(this.currentPosition=t.position,i.wrapper){var r=se.findAngle({x:i.wrapper.offsetX,y:i.wrapper.offsetY},this.currentPosition)+90;this.blocked=!this.commandHandler.rotate((r=(r+360)%360)-i.wrapper.rotateAngle,n)}return!this.blocked},e.prototype.getTooltipContent=function(t){return Math.round(t.rotateAngle%360).toString()+"\xb0"},e.prototype.mouseLeave=function(t){this.mouseUp(t)},e.prototype.endAction=function(){s.prototype.endAction.call(this)},e}(Bi);function ft(s,e,t,i){if(t&&e.activeElements.activePageID>-1){var n=Ou(e,t,s),o=function(s,e,t,i){var o,r,l,n=null;if(e&&e.type&&-1!==e.type.indexOf("touch")){if(o=e,i.annotation){var d=t.getElement("_pageDiv_"+i.annotation.getEventPageNumber(e));if(d){var h=d.getBoundingClientRect();r=o.changedTouches[0].clientX-h.left,l=o.changedTouches[0].clientY-h.top}}}else if(e&&e.target&&e.path&&e.target.parentElement&&e.target.parentElement.classList.contains("foreign-object")){var p=e.path[4].getBoundingClientRect();r=e.clientX-p.left,l=e.clientY-p.top}else e.target&&e.target.parentElement&&e.target.parentElement.classList.contains("foreign-object")?(p=e.target.offsetParent.offsetParent.offsetParent.getBoundingClientRect(),r=e.clientX-p.left,l=e.clientY-p.top):e.target&&e.target.parentElement&&e.target.parentElement.parentElement&&e.target.parentElement.parentElement.classList.contains("foreign-object")?(p=e.target.offsetParent.offsetParent.offsetParent.offsetParent.getBoundingClientRect(),r=e.clientX-p.left,l=e.clientY-p.top):(r=isNaN(e.offsetX)?e.position?e.position.x:0:e.offsetX,l=isNaN(e.offsetY)?e.position?e.position.y:0:e.offsetY);for(var f=i.touchPadding/2,c=0,u=0;u<s.length;u++)if("Distance"===s[u].shapeAnnotationType||"Line"===s[u].shapeAnnotationType||"LineWidthArrowHead"===s[u].shapeAnnotationType||t.tool instanceof Ze){var y={x:r/t.getZoomFactor(),y:l/t.getZoomFactor()},b=Th(s[u],y,f),C=mb(s[u],y);if(b&&!C){var S=Tb(s[u],b);if(S){var x=de.toBounds([S,S]);x.Inflate(10),x.containsPoint(y)&&(C=!0)}}b&&C&&(n=s[u])}else{var m=s[u].wrapper.bounds,g=0;if(("Stamp"===s[u].shapeAnnotationType||"Image"===s[u].shapeAnnotationType)&&(g=25),(m.x-f)*t.getZoomFactor()<r&&(m.x+m.width+f)*t.getZoomFactor()>r&&(m.y-f-g)*t.getZoomFactor()<l&&(m.y+m.height+f)*t.getZoomFactor()>l)if(t.tool instanceof Fi||t.tool instanceof wo)n=s[u];else if(c){var v=r-(m.x-f)*t.getZoomFactor()+((m.x+m.width+f)*t.getZoomFactor()-r)+(l-(m.y-f-g)*t.getZoomFactor())+((m.y+m.height+f)*t.getZoomFactor()-l);c>v||c===v?(n=s[u],c=v):("Image"===s[u].shapeAnnotationType||"Stamp"===s[u].shapeAnnotationType)&&(n=s[u])}else n=s[u],c=r-(m.x-f)*t.getZoomFactor()+((m.x+m.width+f)*t.getZoomFactor()-r)+(l-(m.y-f-g)*t.getZoomFactor())+((m.y+m.height+f)*t.getZoomFactor()-l)}return n}(n,s,e,t);return i?n:o}}function Ou(s,e,t){var i=s.currentPosition||{x:t.offsetX,y:t.offsetY},o=function(s,e,t){for(var i=[],n=0,o=e;n<o.length;n++){var r=o[n];(Th(r,s,t)||"Stamp"===r.shapeAnnotationType&&Th(r,s,40))&&kb(r,"zIndex",i)}return i}(i={x:i.x/s.getZoomFactor(),y:i.y/s.getZoomFactor()},e.getPageTable(s.activeElements.activePageID).objects,e.touchPadding);return o}function Tb(s,e){var i=s.sourcePoint,n=s.targetPoint;if("Distance"===s.shapeAnnotationType){var o=e,r=void 0,l=se.findAngle(s.sourcePoint,s.targetPoint);if(o.id.indexOf("leader")>-1){var d=s.wrapper.children[0].bounds.center;o.id.indexOf("leader1")>-1?(r={x:s.sourcePoint.x,y:s.sourcePoint.y-s.leaderHeight},d=i):(r={x:s.targetPoint.x,y:s.targetPoint.y-s.leaderHeight},d=n);var h=he();return pe(h,l,d.x,d.y),R(h,{x:r.x,y:r.y})}}}function Th(s,e,t){return function(s,e,t){if(s&&s.children)for(var i=s.children.length-1;i>=0;i--){var n=s.children[i],o=t;if(!(0,a.le)(n.children)&&n.children.length>0)for(var r=n.children.length-1;r>=0;r--){var l=n.children[r];if(l&&l.bounds.containsPoint(e,o)){if(l instanceof dn&&(d=this.findTargetElement(l,e)))return d;if(l.bounds.containsPoint(e,o))return l}}else if(n&&n.bounds.containsPoint(e,o)){var d;if(n instanceof dn&&(d=this.findTargetElement(n,e)))return d;if(n.bounds.containsPoint(e,o))return n}}if(s&&s.bounds.containsPoint(e,t)&&"none"!==s.style.fill){var h=s,c=he();pe(c,h.parentTransform,h.offsetX,h.offsetY);var g={x:h.offsetX-h.pivot.x*h.actualSize.width+(.5===h.pivot.x?2*h.pivot.x:h.pivot.x)*h.actualSize.width/2,y:h.offsetY-h.pivot.y*h.actualSize.height-30};if(kt(e,g=R(c,g),10))return s}return null}(s.wrapper,e,t)}function kb(s,e,t){if(0===t.length)t.push(s);else if(1===t.length)t[0][e]>s[e]?t.splice(0,0,s):t.push(s);else if(t.length>1){for(var i=0,n=t.length-1,o=Math.floor((i+n)/2);o!==i;)t[o][e]<s[e]?(i=o,o=Math.floor((i+n)/2)):t[o][e]>s[e]&&(n=o,o=Math.floor((i+n)/2));t[n][e]<s[e]?t.push(s):t[i][e]>s[e]?t.splice(i,0,s):t[i][e]<s[e]&&t[n][e]>s[e]&&t.splice(n,0,s)}}var Ib=function(){function s(){this.activePage=void 0,this.activePageID=void 0}return Object.defineProperty(s.prototype,"activePageID",{get:function(){return this.activePage},set:function(e){this.activePage=e},enumerable:!0,configurable:!0}),s}();function kh(s,e,t,i,n){var o=So("div",{id:n.element.id+i+"_diagramAdornerLayer",style:"width:"+s.width+"px;height:"+s.height+"px;"+e});if(!ln(o.id)){var r=n.viewerBase.getElement("_pageDiv_"+i),l=r.getBoundingClientRect(),d=function(s,e,t){var i=document.createElementNS("http://www.w3.org/2000/svg","svg");return ci(i,{id:s,width:e,height:t}),i}(n.element.id+i+"_diagramAdorner_svg",l.width,l.height);d.setAttribute("class","e-adorner-layer"+i),d.setAttribute("style","pointer-events:none;"),n.adornerSvgLayer=Wa("g",{id:n.element.id+i+"_diagramAdorner"}),n.adornerSvgLayer.setAttribute("style"," pointer-events: all; "),d.appendChild(n.adornerSvgLayer),o.appendChild(d),o.style.width=l.width+"px",o.style.height=l.height+"px",r?r.insertBefore(o,r.childNodes[0]):t.parentElement.appendChild(o);var h=Wa("g",{id:n.element.id+i+"_SelectorElement"});n.adornerSvgLayer.appendChild(h),ci(d,{style:"pointer-events:none;"})}n.viewerBase.applyElementStyles(o,i)}var ct=(()=>(function(s){s[s.None=0]="None",s[s.Bold=1]="Bold",s[s.Italic=2]="Italic",s[s.Underline=4]="Underline",s[s.Strikethrough=8]="Strikethrough"}(ct||(ct={})),ct))(),$e=(()=>(function(s){s[s.Copy=0]="Copy",s[s.Highlight=1]="Highlight",s[s.Cut=2]="Cut",s[s.Underline=4]="Underline",s[s.Paste=8]="Paste",s[s.Delete=16]="Delete",s[s.ScaleRatio=32]="ScaleRatio",s[s.Strikethrough=64]="Strikethrough",s[s.Properties=128]="Properties",s[s.Comment=256]="Comment"}($e||($e={})),$e))(),Q=(()=>(function(s){s[s.Corners=1]="Corners",s[s.Edges=2]="Edges"}(Q||(Q={})),Q))(),ae=(()=>(function(s){s[s.Draw=1]="Draw",s[s.Text=2]="Text",s[s.Upload=4]="Upload"}(ae||(ae={})),ae))(),Fs=(()=>(function(s){s.auto="auto",s.crossHair="crosshair",s.e_resize="e-resize",s.ew_resize="ew-resize",s.grab="grab",s.grabbing="grabbing",s.move="move",s.n_resize="n-resize",s.ne_resize="ne-resize",s.ns_resize="ns-resize",s.nw_resize="nw-resize",s.pointer="pointer",s.s_resize="s-resize",s.se_resize="se-resize",s.sw_resize="sw-resize",s.text="text",s.w_resize="w-resize"}(Fs||(Fs={})),Fs))(),Ft=(()=>(function(s){s.Revised="Revised",s.Reviewed="Reviewed",s.Received="Received",s.Approved="Approved",s.Confidential="Confidential",s.NotApproved="NotApproved"}(Ft||(Ft={})),Ft))(),st=(()=>(function(s){s.Witness="Witness",s.InitialHere="InitialHere",s.SignHere="SignHere",s.Accepted="Accepted",s.Rejected="Rejected"}(st||(st={})),st))(),Be=(()=>(function(s){s.Approved="Approved",s.NotApproved="NotApproved",s.Draft="Draft",s.Final="Final",s.Completed="Completed",s.Confidential="Confidential",s.ForPublicRelease="ForPublicRelease",s.NotForPublicRelease="NotForPublicRelease",s.ForComment="ForComment",s.Void="Void",s.PreliminaryResults="PreliminaryResults",s.InformationOnly="InformationOnly"}(Be||(Be={})),Be))(),Li=(()=>(function(s){s.Select="Select",s.Move="Move",s.Resize="Resize",s.Delete="Delete",s.None="None",s.PropertyChange="PropertyChange"}(Li||(Li={})),Li))(),Lt=(()=>(function(s){s.Json="Json",s.Xfdf="Xfdf"}(Lt||(Lt={})),Lt))(),Pb=function(){function s(e,t){this.inputBoxCount=0,this.isFreeTextValueChange=!1,this.isAddAnnotationProgramatically=!1,this.isInuptBoxInFocus=!1,this.freeTextPageNumbers=[],this.selectedText="",this.isTextSelected=!1,this.selectionStart=0,this.selectionEnd=0,this.isBold=!1,this.isItalic=!1,this.isUnderline=!1,this.isStrikethrough=!1,this.isReadonly=!1,this.isMaximumWidthReached=!1,this.previousText="Type Here",this.currentPosition=[],this.pdfViewer=e,this.pdfViewerBase=t,this.updateTextProperties(),this.inputBoxElement=document.createElement("textarea"),this.inputBoxElement.style.position="absolute",this.inputBoxElement.style.Width=this.defautWidth,this.inputBoxElement.style.Height=this.defaultHeight,this.inputBoxElement.style.zIndex="5",this.inputBoxElement.style.fontSize=this.fontSize+"px",this.inputBoxElement.className="free-text-input",this.inputBoxElement.style.resize="none",this.inputBoxElement.style.borderColor=this.borderColor,this.inputBoxElement.style.background=this.fillColor,this.inputBoxElement.style.borderStyle=this.borderStyle,this.inputBoxElement.style.borderWidth=this.borderWidth+"px",this.inputBoxElement.style.padding=this.padding,this.inputBoxElement.style.paddingLeft="3px",this.inputBoxElement.style.borderRadius="2px",this.inputBoxElement.style.verticalAlign="middle",this.inputBoxElement.style.fontFamily=this.fontFamily,this.inputBoxElement.style.color=this.pdfViewer.freeTextSettings.fontColor?this.pdfViewer.freeTextSettings.fontColor:"#000",this.inputBoxElement.style.overflow="hidden",this.inputBoxElement.style.wordBreak=this.wordBreak,this.inputBoxElement.readOnly=this.isReadonly,this.inputBoxElement.addEventListener("focusout",this.onFocusOutInputBox.bind(this)),this.inputBoxElement.addEventListener("keydown",this.onKeyDownInputBox.bind(this)),this.inputBoxElement.addEventListener("mouseup",this.onMouseUpInputBox.bind(this)),this.freeTextPageNumbers=[]}return s.prototype.updateTextProperties=function(){if(this.defautWidth=this.pdfViewer.freeTextSettings.width?this.pdfViewer.freeTextSettings.width:151,this.defaultHeight=this.pdfViewer.freeTextSettings.height?this.pdfViewer.freeTextSettings.height:24.6,this.borderColor=this.pdfViewer.freeTextSettings.borderColor?this.pdfViewer.freeTextSettings.borderColor:"#ffffff00",this.fillColor=this.pdfViewer.freeTextSettings.fillColor?this.pdfViewer.freeTextSettings.fillColor:"#fff",this.borderStyle=this.pdfViewer.freeTextSettings.borderStyle?this.pdfViewer.freeTextSettings.borderStyle:"solid",this.borderWidth=this.pdfViewer.freeTextSettings.borderWidth?this.pdfViewer.freeTextSettings.borderWidth:1,this.fontSize=this.pdfViewer.freeTextSettings.fontSize?this.pdfViewer.freeTextSettings.fontSize:16,this.opacity=this.pdfViewer.freeTextSettings.opacity?this.pdfViewer.freeTextSettings.opacity:1,this.fontColor=this.pdfViewer.freeTextSettings.fontColor?this.pdfViewer.freeTextSettings.fontColor:"#000",this.author="Guest"!==this.pdfViewer.freeTextSettings.author?this.pdfViewer.freeTextSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest",this.pdfViewer.freeTextSettings.fontFamily){var e=this.pdfViewer.freeTextSettings.fontFamily;this.fontFamily="Helvetica"===e||"Times New Roman"===e||"Courier"===e||"Symbol"===e||"ZapfDingbats"===e?e:"Helvetica"}else this.fontFamily="Helvetica";this.textAlign=this.pdfViewer.freeTextSettings.textAlignment?this.pdfViewer.freeTextSettings.textAlignment:"Left",this.defaultText=this.pdfViewer.freeTextSettings.defaultText?this.pdfViewer.freeTextSettings.defaultText:"Type here",this.isReadonly=!1,this.pdfViewer.freeTextSettings.enableAutoFit?(this.wordBreak="break-all",this.padding="2px"):(this.padding="0px",this.wordBreak="break-word"),(this.pdfViewer.freeTextSettings.isLock||this.pdfViewer.annotationSettings.isLock||this.pdfViewer.freeTextSettings.isReadonly)&&(this.isReadonly=!0),1===this.pdfViewer.freeTextSettings.fontStyle?this.isBold=!0:2===this.pdfViewer.freeTextSettings.fontStyle?this.isItalic=!0:4===this.pdfViewer.freeTextSettings.fontStyle?this.isUnderline=!0:8===this.pdfViewer.freeTextSettings.fontStyle?this.isStrikethrough=!0:3===this.pdfViewer.freeTextSettings.fontStyle?(this.isBold=!0,this.isItalic=!0):5===this.pdfViewer.freeTextSettings.fontStyle?(this.isBold=!0,this.isUnderline=!0):9===this.pdfViewer.freeTextSettings.fontStyle?(this.isBold=!0,this.isStrikethrough=!0):7===this.pdfViewer.freeTextSettings.fontStyle?(this.isBold=!0,this.isItalic=!0,this.isUnderline=!0):11===this.pdfViewer.freeTextSettings.fontStyle?(this.isBold=!0,this.isItalic=!0,this.isStrikethrough=!0):14===this.pdfViewer.freeTextSettings.fontStyle?(this.isBold=!0,this.isUnderline=!0,this.isStrikethrough=!0):6===this.pdfViewer.freeTextSettings.fontStyle&&(this.isUnderline=!0,this.isItalic=!0)},s.prototype.renderFreeTextAnnotations=function(e,t,i){var n=!1;if(!i)for(var o=0;o<this.freeTextPageNumbers.length;o++)if(this.freeTextPageNumbers[o]===t){n=!0;break}if(e&&!n&&e.length>=1){this.freeTextPageNumbers.push(t);for(var r=0;r<e.length;r++){var l=e[r];if(l.annotationAddMode=this.pdfViewer.annotationModule.findAnnotationMode(l,t,l.AnnotType),l.AnnotType){var d=null;if(l.VertexPoints){d=[];for(var h=0;h<l.VertexPoints.length;h++)d.push({x:l.VertexPoints[h].X,y:l.VertexPoints[h].Y})}l.AnnotationSettings=l.AnnotationSettings?l.AnnotationSettings:this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.freeTextSettings);var f=void 0,c=.5,u=(0,a.le)(l.Bounds.X)?l.Bounds.x:l.Bounds.X-c,m=(0,a.le)(l.Bounds.Y)?l.Bounds.y:l.Bounds.Y-c,g=l.Bounds.Width?l.Bounds.Width:l.Bounds.width,v=l.Bounds.Height?l.Bounds.Height:l.Bounds.height,y=!!l.isAddAnnotationProgramatically&&l.isAddAnnotationProgramatically,b=this.getRotationValue(t,y),S=l.PageRotation;l.Rotate=1===Math.sign(l.Rotate)?-l.Rotate+b:l.Rotate+b;var x=Math.abs(l.Rotate);if(i&&b!==S&&this.pdfViewerBase.isJsonImported){var V=this.pdfViewerBase.pageSize[t],T=l.Bounds.X,k=l.Bounds.Y,A=g,M=v;if(S>0){var I=S/90;1===I?(v=g,g=l.Bounds.Height,u=l.Bounds.Y,m=270!==b?V.height-l.Bounds.X-l.Bounds.Width:V.width-l.Bounds.X-l.Bounds.Width):2===I?270!==b&&90!==b?(u=V.width-l.Bounds.X-l.Bounds.Width,m=V.height-l.Bounds.Y-l.Bounds.Height):(u=V.height-l.Bounds.X-l.Bounds.Width,m=V.width-l.Bounds.Y-l.Bounds.Height):3===I&&(v=g,g=l.Bounds.Height,u=90!==b?V.width-l.Bounds.Y-g:V.height-l.Bounds.Y-g,m=l.Bounds.X),T=u,k=m,A=g,M=v}1==(x=b/90%4)?(v=g,g=M,u=V.width-k-M-c,m=T-c,x=90):2===x?(u=V.width-T-A-c,m=V.height-k-M-c,x=180):3===x?(v=g,g=M,u=k-c,m=V.height-T-v-c,x=270):0===x&&(u=T-c,m=k-c)}if(90===x||270===x){var N=g;u=u-(g=v)/2+(v=N)/2,m+=g/2-v/2}var D;D="Imported Annotation"===l.annotationAddMode?l.IsPrint:l.AnnotationSettings.isPrint,l.allowedInteractions=l.AllowedInteractions?l.AllowedInteractions:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(l),f={author:l.Author,modifiedDate:l.ModifiedDate,subject:l.Subject,id:"freetext"+this.inputBoxCount,rotateAngle:l.Rotate,dynamicText:l.MarkupText,strokeColor:l.StrokeColor,thickness:l.Thickness,fillColor:l.FillColor,bounds:{x:u,y:m,left:u,top:m,width:g,height:v,right:l.Bounds.Right,bottom:l.Bounds.Bottom},annotName:l.AnnotName,shapeAnnotationType:"FreeText",pageIndex:t,opacity:l.Opacity,fontColor:l.FontColor,fontSize:l.FontSize,pageRotation:b,fontFamily:l.FontFamily,notes:l.MarkupText,textAlign:l.TextAlign,comments:this.pdfViewer.annotationModule.getAnnotationComments(l.Comments,l,l.Author),review:{state:l.State,stateModel:l.StateModel,modifiedDate:l.ModifiedDate,author:l.Author},font:{isBold:l.Font.Bold,isItalic:l.Font.Italic,isStrikeout:l.Font.Strikeout,isUnderline:l.Font.Underline},annotationSelectorSettings:this.getSettings(l),annotationSettings:l.AnnotationSettings,customData:this.pdfViewer.annotation.getCustomData(l),annotationAddMode:l.annotationAddMode,allowedInteractions:l.allowedInteractions,isPrint:D,isCommentLock:l.IsCommentLock,isReadonly:l.IsReadonly,isAddAnnotationProgrammatically:y},i&&(f.id=l.AnnotName,f.previousFontSize=l.FontSize?l.FontSize:this.fontSize);var Z=this.pdfViewer.add(f);this.pdfViewer.annotationModule.storeAnnotations(t,f,"_annotations_freetext"),this.isAddAnnotationProgramatically&&this.pdfViewer.fireAnnotationAdd(f.pageIndex,f.annotName,"FreeText",f.bounds,{opacity:f.opacity,borderColor:f.strokeColor,borderWidth:f.thickness,author:l.author,subject:l.subject,modifiedDate:l.modifiedDate,fillColor:f.fillColor,fontSize:f.fontSize,width:f.bounds.width,height:f.bounds.height,fontColor:f.fontColor,fontFamily:f.fontFamily,defaultText:f.dynamicText,fontStyle:f.font,textAlignment:f.textAlign}),this.inputBoxCount+=1,this.pdfViewer.annotation.freeTextAnnotationModule.isFreeTextValueChange=!0,this.pdfViewer.nodePropertyChange(Z,{}),this.pdfViewer.annotation.freeTextAnnotationModule.isFreeTextValueChange=!1}}}},s.prototype.getSettings=function(e){var t=this.pdfViewer.annotationSelectorSettings;return e.AnnotationSelectorSettings?t=e.AnnotationSelectorSettings:this.pdfViewer.freeTextSettings.annotationSelectorSettings&&(t=this.pdfViewer.freeTextSettings.annotationSelectorSettings),t},s.prototype.setAnnotationType=function(e){if("FreeText"===(this.pdfViewerBase.disableTextSelectionMode(),e)){this.currentAnnotationMode="FreeText",this.updateTextProperties();var t=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();this.pdfViewer.drawingObject={shapeAnnotationType:"FreeText",strokeColor:this.borderColor,fillColor:this.fillColor,opacity:this.opacity,notes:"",isCommentLock:!1,thickness:this.borderWidth,borderDashArray:"0",modifiedDate:t,author:this.pdfViewer.freeTextSettings.author,subject:"Text Box",font:{isBold:this.isBold,isItalic:this.isItalic,isStrikeout:this.isStrikethrough,isUnderline:this.isUnderline},textAlign:this.textAlign},this.pdfViewer.tool="Select"}},s.prototype.modifyInCollection=function(e,t,i,n){n||this.pdfViewerBase.updateDocumentEditedProperty(!0);var o=null,r=this.getAnnotations(t,null);if(null!=r&&i){for(var l=0;l<r.length;l++)if(i.id===r[l].id){if("bounds"===e)r[l].bounds={left:i.bounds.x,top:i.bounds.y,width:i.bounds.width,height:i.bounds.height,right:i.bounds.right,bottom:i.bounds.bottom};else if("fill"===e)r[l].fillColor=i.wrapper.children[0].style.fill;else if("stroke"===e)r[l].strokeColor=i.wrapper.children[0].style.strokeColor;else if("opacity"===e)r[l].opacity=i.wrapper.children[0].style.opacity;else if("thickness"===e)r[l].thickness=i.wrapper.children[0].style.strokeWidth;else if("notes"===e)r[l].note=i.notes;else{if("delete"===e){o=r.splice(l,1)[0];break}"dynamicText"===e?r[l].dynamicText=i.dynamicText:"fontColor"===e?r[l].fontColor=i.fontColor:"fontSize"===e?r[l].fontSize=i.fontSize:"fontFamily"===e?r[l].fontFamily=i.fontFamily:"textPropertiesChange"===e?r[l].font={isBold:i.font.isBold,isItalic:i.font.isItalic,isStrikeout:i.font.isStrikeout,isUnderline:i.font.isUnderline}:"textAlign"===e&&(r[l].textAlign=i.textAlign)}r[l].modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),this.pdfViewer.annotationModule.storeAnnotationCollections(r[l],t)}this.manageAnnotations(r,t)}return o},s.prototype.addInCollection=function(e,t){if(t){var i=this.getAnnotations(e,null);i&&i.push(t),this.manageAnnotations(i,e)}},s.prototype.saveFreeTextAnnotations=function(){var e=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_freetext");this.pdfViewerBase.isStorageExceed&&(e=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_freetext"]);for(var t=new Array,i=0;i<this.pdfViewerBase.pageCount;i++)t[i]=[];if(e&&!this.pdfViewer.annotationSettings.skipDownload)for(var n=JSON.parse(e),o=0;o<n.length;o++){var r=[],l=n[o];if(l){for(var d=0;l.annotations.length>d;d++)this.pdfViewer.annotationModule.updateModifiedDate(l.annotations[d]),l.annotations[d].bounds=this.getBoundsBasedOnRotation(l.annotations[d].bounds,l.annotations[d].rotateAngle,l.pageIndex,l.annotations[d]),l.annotations[d].bounds=JSON.stringify(this.pdfViewer.annotation.getBounds(l.annotations[d].bounds,l.pageIndex)),l.annotations[d].strokeColor=JSON.stringify(this.getRgbCode(l.annotations[d].strokeColor)),l.annotations[d].fillColor=JSON.stringify(this.getRgbCode(l.annotations[d].fillColor)),l.annotations[d].fontColor=JSON.stringify(this.getRgbCode(l.annotations[d].fontColor)),l.annotations[d].vertexPoints=JSON.stringify(l.annotations[d].vertexPoints),null!==l.annotations[d].rectangleDifference&&(l.annotations[d].rectangleDifference=JSON.stringify(l.annotations[d].rectangleDifference));r=l.annotations}t[l.pageIndex]=r}return JSON.stringify(t)},s.prototype.getRotationValue=function(e,t){var i=this.pdfViewerBase.pageSize[e];return!(0,a.le)(t)&&t||0===i.rotation?0:1===i.rotation?90:2===i.rotation?180:3===i.rotation?270:0},s.prototype.getBoundsBasedOnRotation=function(e,t,i,n,o){var r=this.getRotationValue(i,o),l=.5;if(n.rotateAngle=t-r,n.pageRotation=r,90===t||-90===t||270===t||-270===t){var d=e.left+e.width/2-e.height/2,h=e.top-(e.width/2-e.height/2);return{x:d+l,y:h+l,left:d+l,top:h+l,width:e.height,height:e.width}}return{x:e.left+l,y:e.top+l,left:e.left+l,top:e.top+l,width:e.width,height:e.height}},s.prototype.manageAnnotations=function(e,t){var i=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_freetext");if(this.pdfViewerBase.isStorageExceed&&(i=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_freetext"]),i){var n=JSON.parse(i);this.pdfViewerBase.isStorageExceed||window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_freetext");var o=this.pdfViewer.annotationModule.getPageCollection(n,t);n[o]&&(n[o].annotations=e);var r=JSON.stringify(n);this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_freetext"]=r:window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_annotations_freetext",r)}},s.prototype.getAnnotations=function(e,t){var i,n=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_freetext");if(this.pdfViewerBase.isStorageExceed&&(n=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_freetext"]),n){var o=JSON.parse(n),r=this.pdfViewer.annotationModule.getPageCollection(o,e);i=o[r]?o[r].annotations:t}else i=t;return i},s.prototype.getRgbCode=function(e){!e.match(/#([a-z0-9]+)/gi)&&!e.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/)&&(e=this.pdfViewer.annotationModule.nameToHash(e));var t=e.split(",");return(0,a.le)(t[1])&&(t=(e=this.pdfViewer.annotationModule.getValue(e,"rgba")).split(",")),{r:parseInt(t[0].split("(")[1]),g:parseInt(t[1]),b:parseInt(t[2]),a:parseInt(t[3])}},s.prototype.onFocusOutInputBox=function(){var e=this.pdfViewer.allowServerDataBinding;if(this.pdfViewer.enableServerDataBinding(!1),this.pdfViewerBase.isFreeTextContextMenu)this.inputBoxElement.focus(),this.isTextSelected||window.getSelection().removeAllRanges();else{this.pdfViewer.fireBeforeAddFreeTextAnnotation(this.inputBoxElement.value);var t=this.inputBoxElement.id&&this.inputBoxElement.id.split("_freeText_")[1]&&this.inputBoxElement.id.split("_freeText_")[1].split("_")[0]?parseFloat(this.inputBoxElement.id.split("_freeText_")[1].split("_")[0]):this.pdfViewerBase.currentPageNumber-1,i=this.pdfViewerBase.getElement("_pageDiv_"+t),n=parseFloat(this.inputBoxElement.style.width),o=parseFloat(this.inputBoxElement.style.paddingLeft);if(this.pdfViewer.freeTextSettings.enableAutoFit&&!this.isMaximumWidthReached&&!this.isNewFreeTextAnnot){var r=parseFloat(this.inputBoxElement.style.fontSize);this.inputBoxElement.style.width=n+o-r+"px"}this.pdfViewer.freeTextSettings.enableAutoFit&&!this.isMaximumWidthReached&&this.isNewFreeTextAnnot&&(n=parseFloat(this.inputBoxElement.style.width),this.inputBoxElement.style.width=n-8+"px");var d=parseFloat(this.inputBoxElement.style.height),h=parseFloat(this.inputBoxElement.style.width),p=parseFloat(this.inputBoxElement.style.left);this.pdfViewerBase.isMixedSizeDocument&&(p-=document.getElementById(this.pdfViewer.element.id+"_annotationCanvas_"+t).offsetLeft);var c=parseFloat(this.inputBoxElement.style.top),u=this.pdfViewerBase.getZoomFactor();this.pdfViewer.isValidFreeText&&(this.inputBoxElement.value="Type Here",this.pdfViewer.isValidFreeText=!1);var m=this.inputBoxElement.value,g=!1;if(!0===this.isNewFreeTextAnnot){var v=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),y=this.pdfViewer.annotation.createGUID();this.isNewFreeTextAnnot=!1,g=!0;var b=void 0,C=this.pdfViewer.annotation.stickyNotesAnnotationModule.addComments("freeText",t+1);C&&(document.getElementById(C).id=y);var S=this.pdfViewer.freeTextSettings.annotationSelectorSettings?this.pdfViewer.freeTextSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,x=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.freeTextSettings);this.author=this.author?this.author:this.pdfViewer.freeTextSettings.author?this.pdfViewer.freeTextSettings.author:"Guest";var V=this.pdfViewer.freeTextSettings.allowedInteractions?this.pdfViewer.freeTextSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions;b={author:this.author,modifiedDate:v,subject:"Text Box",id:"free_text"+this.inputBoxCount,rotateAngle:0,dynamicText:m,strokeColor:this.borderColor,thickness:this.borderWidth,fillColor:this.fillColor,bounds:{left:p/u,top:c/u,x:p/u,y:c/u,width:h/u,height:d/u},annotName:y,shapeAnnotationType:"FreeText",pageIndex:t,fontColor:this.fontColor,fontSize:this.fontSize,fontFamily:this.fontFamily,opacity:this.opacity,comments:[],textAlign:this.textAlign,font:{isBold:this.isBold,isItalic:this.isItalic,isStrikeout:this.isStrikethrough,isUnderline:this.isUnderline},review:{state:"Unmarked",stateModel:"None",modifiedDate:v,author:this.author},annotationSelectorSettings:S,annotationSettings:x,customData:this.pdfViewer.annotationModule.getData("FreeText"),isPrint:this.pdfViewer.freeTextSettings.isPrint,allowedInteractions:V,isReadonly:this.isReadonly},this.pdfViewer.enableRtl&&(b.textAlign="Right");var T=this.pdfViewer.add(b),k={left:b.bounds.x,top:b.bounds.y,width:b.bounds.width,height:b.bounds.height},A={opacity:b.opacity,borderColor:b.strokeColor,borderWidth:b.thickness,author:T.author,subject:T.subject,modifiedDate:T.modifiedDate,fillColor:b.fillColor,fontSize:b.fontSize,width:b.bounds.width,height:b.bounds.height,fontColor:b.fontColor,fontFamily:b.fontFamily,defaultText:b.dynamicText,fontStyle:b.font,textAlignment:b.textAlign};this.pdfViewer.annotation.storeAnnotations(t,b,"_annotations_freetext"),this.pdfViewer.fireAnnotationAdd(b.pageIndex,b.annotName,"FreeText",k,A),this.pdfViewer.annotation.addAction(t,null,b,"Addition","",b,b),this.pdfViewer.renderSelector(b.pageIndex),this.pdfViewer.clearSelection(b.pageIndex),this.pdfViewerBase.updateDocumentEditedProperty(!0),this.selectedAnnotation=T}if(this.isInuptBoxInFocus=!1,this.selectedAnnotation&&this.pdfViewer.selectedItems.annotations){var M=(d/=u)-this.selectedAnnotation.bounds.height,I=void 0;M>0&&(I=(I=this.selectedAnnotation.wrapper.offsetY+M/2)>0?I:void 0);var B=(h/=u)-this.selectedAnnotation.bounds.width,N=void 0;B>0?N=(N=this.selectedAnnotation.wrapper.offsetX+B/2)>0?N:void 0:(B=Math.abs(B),N=this.selectedAnnotation.wrapper.offsetX-B/2),this.selectedAnnotation.bounds.width=h,this.selectedAnnotation.bounds.height=d,this.pdfViewer.annotation.modifyDynamicTextValue(m,this.selectedAnnotation.annotName),this.selectedAnnotation.dynamicText=m,this.modifyInCollection("dynamicText",t,this.selectedAnnotation,g),this.modifyInCollection("bounds",t,this.selectedAnnotation,g),this.pdfViewer.nodePropertyChange(this.selectedAnnotation,{bounds:{width:this.selectedAnnotation.bounds.width,height:this.selectedAnnotation.bounds.height,y:I,x:N}});var D=document.getElementById(this.selectedAnnotation.annotName);D&&D.childNodes&&(D.childNodes[0].ej2_instances?D.childNodes[0].ej2_instances[0].value=m:D.childNodes[0].childNodes&&D.childNodes[0].childNodes[1].ej2_instances&&(D.childNodes[0].childNodes[1].ej2_instances[0].value=m)),this.pdfViewer.renderSelector(this.selectedAnnotation.pageIndex,this.selectedAnnotation.annotationSelectorSettings)}this.inputBoxElement.parentElement&&(i&&i.id===this.inputBoxElement.parentElement.id?i.removeChild(this.inputBoxElement):this.inputBoxElement.parentElement.removeChild(this.inputBoxElement));var Z=document.getElementById(this.pdfViewer.element.id+"_annotationCanvas_"+t);this.pdfViewer.renderDrawing(Z,t),this.inputBoxCount+=1,!g&&this.previousText!==m&&this.pdfViewer.annotationModule.triggerAnnotationPropChange(this.selectedAnnotation,!1,!1,!1,!1,!1,!1,!1,!0,this.previousText,m)}this.pdfViewer.enableServerDataBinding(e,!0)},s.prototype.onKeyDownInputBox=function(e){var t=this;(9===e.which||(0,a.le)(this.pdfViewer.selectedItems.annotations[0])&&!this.isNewFreeTextAnnot)&&e.preventDefault(),this.selectedAnnotation=this.pdfViewer.selectedItems.annotations&&this.isNewFreeTextAnnot?this.pdfViewer.selectedItems.annotations[0]:this.selectedAnnotation,setTimeout(function(){t.defaultHeight<t.inputBoxElement.scrollHeight&&parseInt(t.inputBoxElement.style.height)<t.inputBoxElement.scrollHeight?t.updateFreeTextAnnotationSize(!0):t.updateFreeTextAnnotationSize(!1)},0)},s.prototype.updateFreeTextAnnotationSize=function(e){var t=this,i=t.pdfViewer.freeTextSettings.enableAutoFit;if(i?this.autoFitFreeText():this.isMaximumWidthReached=!0,this.isMaximumWidthReached){var n=t.inputBoxElement.getBoundingClientRect().height;!e&&!t.inputBoxElement.readOnly&&(t.inputBoxElement.style.height="auto");var r=t.inputBoxElement.getBoundingClientRect().height-n,l=parseFloat(t.inputBoxElement.style.fontSize);t.inputBoxElement.style.height=t.inputBoxElement.readOnly?t.inputBoxElement.style.height:t.inputBoxElement.scrollHeight+l/2+"px",t.inputBoxElement.style.height=r<0&&!t.inputBoxElement.readOnly?n+"px":t.inputBoxElement.style.height}var d=t.pdfViewerBase.getZoomFactor(),h=parseFloat(this.inputBoxElement.style.height),p=parseFloat(this.inputBoxElement.style.width);if(h/=d,p/=d,this.selectedAnnotation){var f=h-t.selectedAnnotation.bounds.height,c=0;if(f>0?c=t.selectedAnnotation.wrapper.offsetY+f/2:(f=Math.abs(f),c=t.selectedAnnotation.wrapper.offsetY-f/2),i){var u=p-t.selectedAnnotation.bounds.width,m=0;u>0?m=t.selectedAnnotation.wrapper.offsetX+u/2:(u=Math.abs(u),m=t.selectedAnnotation.wrapper.offsetX-u/2)}t.selectedAnnotation.bounds.width=p,t.selectedAnnotation.bounds.height=h,t.pdfViewer.nodePropertyChange(t.selectedAnnotation,i?{bounds:{width:t.selectedAnnotation.bounds.width,height:t.selectedAnnotation.bounds.height,y:c,x:m}}:{bounds:{width:t.selectedAnnotation.bounds.width,height:t.selectedAnnotation.bounds.height,y:c}}),t.pdfViewer.renderSelector(t.selectedAnnotation.pageIndex,this.selectedAnnotation.annotationSelectorSettings)}},s.prototype.autoFitFreeText=function(e,t){var i=this.pdfViewerBase.currentPageNumber-1,r=(this.pdfViewerBase.getElement("_pageDiv_"+i),this.pdfViewerBase.getElement("_annotationCanvas_"+i).getContext("2d")),l=this.inputBoxElement.style.fontSize;r.font=this.pdfViewer.freeTextSettings.fontStyle===ct.Bold||"bold"===this.inputBoxElement.style.fontWeight?"bold "+l+" "+this.inputBoxElement.style.fontFamily:l+" "+this.inputBoxElement.style.fontFamily;var d="",h=[],p=this.inputBoxElement.value;if(p.indexOf("\n")>-1){h=p.split("\n");for(var f=0;f<h.length;f++){var c=r.measureText(h[f]),u=r.measureText(d);c.width>u.width&&(d=h[f])}this.isMaximumWidthReached=!0}else d=p,this.isMaximumWidthReached=!1;var g,m=r.measureText(d),y=(l=parseFloat(this.inputBoxElement.style.fontSize))+l/2;this.isNewFreeTextAnnot?(g=Math.ceil(m.width+18),this.inputBoxElement.style.height=y+"px",this.inputBoxElement.style.top=t-y/2+"px"):g=Math.ceil(m.width)+l+Math.ceil(4),e||(this.inputBoxElement.style.height=y+"px"),this.inputBoxElement.style.width=g+"px";var b=this.pdfViewerBase.getPageWidth(i)-parseFloat(this.inputBoxElement.style.left);if(parseFloat(this.inputBoxElement.style.width)>b)if(this.isMaximumWidthReached=!0,this.isNewAddedAnnot&&e){this.inputBoxElement.style.width=(g-=8)+"px";var C=e+g*this.pdfViewerBase.getZoomFactor(),S=parseFloat(this.inputBoxElement.style.left);C>=this.pdfViewerBase.getPageWidth(i)&&(S=this.pdfViewerBase.getPageWidth(i)-g),this.inputBoxElement.style.left=S+"px"}else this.inputBoxElement.style.width=b+"px"},s.prototype.onMouseUpInputBox=function(e){var t=e.target;this.selectionStart=0,this.selectionEnd=0,3===e.which&&t&&(this.selectionStart=t.selectionStart,this.selectionEnd=t.selectionEnd),this.isTextSelected=3===e.which&&null!=window.getSelection()&&""!==window.getSelection().toString()},s.prototype.addInuptElemet=function(e,t,i){void 0===t&&(t=null),this.currentPosition=[],(0,a.le)(i)&&(i=this.pdfViewerBase.currentPageNumber-1),t&&(i=t.pageIndex),(0,a.xr)()&&null===t&&0===this.pdfViewer.selectedItems.annotations.length&&this.updateTextProperties(),this.inputBoxElement.id=this.pdfViewer.element.id+"_freeText_"+i+"_"+this.inputBoxCount;var n=this.pdfViewerBase.getElement("_pageDiv_"+i),o=document.getElementById(this.pdfViewer.element.id+"_annotationCanvas_"+i),r=this.pdfViewerBase.getZoomFactor();if(this.inputBoxElement.value=t&&t.dynamicText?t.dynamicText:this.defaultText,this.inputBoxElement.style.boxSizing="border-box",this.inputBoxElement.style.left=e.x+"px",this.inputBoxElement.style.top=e.y-this.defaultHeight*r/2+"px",this.inputBoxElement.style.wordBreak=this.pdfViewer.freeTextSettings.enableAutoFit?"break-all":"break-word",t?this.applyFreetextStyles(r,t.isReadonly):this.applyFreetextStyles(r),this.inputBoxElement.style.fontWeight=this.isBold?"bold":"normal",this.inputBoxElement.style.fontStyle=this.isItalic?"italic":"normal",this.inputBoxElement.style.textDecoration="none",this.isUnderline&&(this.inputBoxElement.style.textDecoration="underline"),this.isStrikethrough&&(this.inputBoxElement.style.textDecoration="line-through"),this.pdfViewer.enableRtl?(this.inputBoxElement.style.textAlign="right",this.inputBoxElement.style.direction="rtl",this.inputBoxElement.style.left=e.x-this.defautWidth*r/2):this.inputBoxElement.style.textAlign=this.textAlign.toLowerCase(),this.inputBoxElement.style.borderColor=this.borderColor,this.inputBoxElement.style.color=this.fontColor,this.inputBoxElement.style.background=this.fillColor,t&&t.wrapper&&t.wrapper.children[0]&&(this.inputBoxElement.style.opacity=t.wrapper.children[0].style.opacity),!0===this.isNewFreeTextAnnot&&this.pdfViewer.clearSelection(i),t&&t.wrapper&&t.wrapper.bounds){var l=t.wrapper.bounds;l.left&&(this.inputBoxElement.style.left=l.left*r+"px"),l.top&&(this.inputBoxElement.style.top=l.top*r+"px"),this.inputBoxElement.style.height=l.height?l.height*r+"px":this.defaultHeight*r+"px",this.inputBoxElement.style.width=l.width?l.width*r+"px":this.defautWidth*r+"px",this.selectedAnnotation=t,this.previousText=this.selectedAnnotation.dynamicText,this.selectedAnnotation.dynamicText="",this.inputBoxElement.style.borderColor=this.selectedAnnotation.strokeColor,this.inputBoxElement.style.color=this.selectedAnnotation.fontColor,this.inputBoxElement.style.background=this.selectedAnnotation.fillColor,!0===this.selectedAnnotation.font.isBold&&(this.inputBoxElement.style.fontWeight="bold"),!0===this.selectedAnnotation.font.isItalic&&(this.inputBoxElement.style.fontStyle="italic"),!0===this.selectedAnnotation.font.isUnderline&&(this.inputBoxElement.style.textDecoration="underline"),!0===this.selectedAnnotation.font.isStrikeout&&(this.inputBoxElement.style.textDecoration="line-through"),this.pdfViewer.enableRtl?(this.inputBoxElement.style.textAlign="right",this.inputBoxElement.style.direction="rtl"):this.selectedAnnotation.textAlign&&(this.inputBoxElement.style.textAlign=this.selectedAnnotation.textAlign),this.inputBoxElement.style.fontSize=this.selectedAnnotation.fontSize*r+"px",this.inputBoxElement.style.fontFamily=this.selectedAnnotation.fontFamily,this.pdfViewer.nodePropertyChange(this.selectedAnnotation,{})}this.pdfViewerBase.isMixedSizeDocument&&(this.inputBoxElement.style.left=parseFloat(this.inputBoxElement.style.left)+o.offsetLeft+"px"),this.pdfViewer.annotation.freeTextAnnotationModule.isFreeTextValueChange=!1,this.pdfViewer.freeTextSettings.enableAutoFit&&this.autoFitFreeText(e.x,e.y),n.appendChild(this.inputBoxElement),!this.pdfViewer.freeTextSettings.enableAutoFit&&this.defaultHeight*r<this.inputBoxElement.scrollHeight&&parseInt(this.inputBoxElement.style.height)<this.inputBoxElement.scrollHeight&&(this.inputBoxElement.style.height=this.inputBoxElement.scrollHeight+"px",this.inputBoxElement.style.top=e.y-parseFloat(this.inputBoxElement.style.height)/2+"px"),this.isInuptBoxInFocus=!0,this.inputBoxElement.focus(),(!0===this.isNewFreeTextAnnot||this.inputBoxElement.value===this.defaultText)&&(this.inputBoxElement.select(),this.pdfViewerBase.isFreeTextSelected=!0),this.currentPosition.push(parseInt(this.inputBoxElement.style.left)/r,parseInt(this.inputBoxElement.style.top)/r,parseInt(this.inputBoxElement.style.width)/r,parseInt(this.inputBoxElement.style.height)/r)},s.prototype.applyFreetextStyles=function(e,t){this.inputBoxElement.style.height=this.defaultHeight*e+"px",this.inputBoxElement.style.width=this.defautWidth*e+"px",this.inputBoxElement.style.borderWidth=this.borderWidth*e+"px",this.inputBoxElement.style.fontSize=this.fontSize*e+"px",this.inputBoxElement.style.fontFamily=this.fontFamily,this.inputBoxElement.readOnly=(0,a.le)(t)?this.isReadonly:t},s.prototype.copySelectedText=function(){if(null!==window.getSelection()){this.selectedText=window.getSelection().toString();var e=document.createElement("textarea");e.contentEditable="true",e.textContent=this.selectedText,e.style.position="fixed",document.body.appendChild(e),e.select();try{document.execCommand("copy")}catch(t){console.warn("Copy to clipboard failed.",t)}finally{e&&document.body.removeChild(e)}}},s.prototype.pasteSelectedText=function(e){if(""!==this.selectedText&&e){var t=e.value;e.value=t.slice(0,this.selectionStart)+this.selectedText+t.slice(this.selectionEnd,t.length)}var i=event;this.onKeyDownInputBox(i)},s.prototype.cutSelectedText=function(e){if(null!==window.getSelection()){var t=e.value;this.selectedText=window.getSelection().toString(),e.value=t.slice(0,e.selectionStart)+t.slice(e.selectionEnd);var i=document.createElement("textarea");i.contentEditable="true",i.textContent=this.selectedText,i.style.position="fixed",document.body.appendChild(i),i.select();try{document.execCommand("cut")}catch(n){console.warn("Copy to clipboard failed.",n)}finally{i&&document.body.removeChild(i)}}},s.prototype.saveImportedFreeTextAnnotations=function(e,t){var i=e;if(i.AnnotType){var l,n=null;if(i.VertexPoints){n=[];for(var o=0;o<i.VertexPoints.length;o++)n.push({x:i.VertexPoints[o].X,y:i.VertexPoints[o].Y})}i.AnnotationSettings=i.AnnotationSettings?i.AnnotationSettings:this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.freeTextSettings),i.allowedInteractions=this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(i);var d=(0,a.le)(i.Bounds.X)?i.Bounds.x:i.Bounds.X,h=(0,a.le)(i.Bounds.Y)?i.Bounds.y:i.Bounds.Y;l={author:i.Author,allowedInteractions:i.allowedInteractions,modifiedDate:i.ModifiedDate,subject:i.Subject,id:"freetext",rotateAngle:i.Rotate,dynamicText:i.MarkupText,strokeColor:i.StrokeColor,thickness:i.Thickness,fillColor:i.FillColor,bounds:{x:d,y:h,left:d,top:h,width:i.Bounds.Width?i.Bounds.Width:i.Bounds.width,height:i.Bounds.Height?i.Bounds.Height:i.Bounds.height,right:i.Bounds.Right,bottom:i.Bounds.Bottom},annotName:i.AnnotName,shapeAnnotationType:"FreeText",pageIndex:t,opacity:i.Opacity,fontColor:i.FontColor,fontSize:i.FontSize,fontFamily:i.FontFamily,notes:i.MarkupText,textAlign:i.TextAlign,comments:this.pdfViewer.annotationModule.getAnnotationComments(i.Comments,i,i.Author),review:{state:i.State,stateModel:i.StateModel,modifiedDate:i.ModifiedDate,author:i.Author},font:{isBold:i.Font.Bold,isItalic:i.Font.Italic,isStrikeout:i.Font.Strikeout,isUnderline:i.Font.Underline},annotationSelectorSettings:this.getSettings(i),annotationSettings:i.AnnotationSettings,customData:this.pdfViewer.annotation.getCustomData(i),isPrint:i.IsPrint,isCommentLock:i.IsCommentLock,isReadonly:i.IsReadonly},this.pdfViewer.annotationModule.storeAnnotations(t,l,"_annotations_freetext")}},s.prototype.updateFreeTextAnnotationCollections=function(e,t){var i=e;if(i.AnnotType){var n=null;if(i.VertexPoints){n=[];for(var o=0;o<i.VertexPoints.length;o++)n.push({x:i.VertexPoints[o].X,y:i.VertexPoints[o].Y})}i.AnnotationSettings=i.AnnotationSettings?i.AnnotationSettings:this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.freeTextSettings),i.IsLocked&&(i.AnnotationSettings.isLock=i.IsLocked),i.allowedInteractions=this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(i);var l=i.Bounds.X?i.Bounds.X:i.Bounds.x,d=i.Bounds.Y?i.Bounds.Y:i.Bounds.y;return{author:i.Author,allowedInteractions:i.allowedInteractions,modifiedDate:i.ModifiedDate,subject:i.Subject,id:"freetext",rotateAngle:i.Rotate,dynamicText:i.MarkupText,strokeColor:i.StrokeColor,thickness:i.Thickness,fillColor:i.FillColor,bounds:{x:l,y:d,left:l,top:d,width:i.Bounds.Width?i.Bounds.Width:i.Bounds.width,height:i.Bounds.Height?i.Bounds.Height:i.Bounds.height,right:i.Bounds.Right,bottom:i.Bounds.Bottom},annotationId:i.AnnotName,shapeAnnotationType:"FreeText",pageIndex:t,opacity:i.Opacity,fontColor:i.FontColor,fontSize:i.FontSize,fontFamily:i.FontFamily,notes:i.MarkupText,comments:this.pdfViewer.annotationModule.getAnnotationComments(i.Comments,i,i.Author),review:{state:i.State,stateModel:i.StateModel,modifiedDate:i.ModifiedDate,author:i.Author},customData:this.pdfViewer.annotation.getCustomData(i),font:{isBold:i.Font.Bold,isItalic:i.Font.Italic,isStrikeout:i.Font.Strikeout,isUnderline:i.Font.Underline},pageNumber:t,annotationSettings:i.AnnotationSettings,isCommentLock:i.IsCommentLock}}},s.prototype.updateAddAnnotationDetails=function(e,t){t=e?e.offset?e.offset:{x:1,y:1}:(e={offset:{x:1,y:1},pageNumber:0,width:void 0,height:void 0}).offset;var i=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),n=this.pdfViewer.annotation.createGUID(),o=e.fontStyle?e.fontStyle:ct.None,r=this.pdfViewer.freeTextSettings.annotationSelectorSettings?this.pdfViewer.freeTextSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,l=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.freeTextSettings),d=this.pdfViewer.freeTextSettings.allowedInteractions?this.pdfViewer.freeTextSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions;l.isLock=!!e.isLock&&e.isLock,l.minHeight=e.minHeight?e.minHeight:0,l.minWidth=e.minWidth?e.minWidth:0,l.maxWidth=e.maxWidth?e.maxWidth:0,l.maxHeight=e.maxHeight?e.maxHeight:0,e.width=e.width?e.width:150,e.height=e.height?e.height:24.6;var h=[];return h[0]={AllowedInteractions:e.allowedInteractions?e.allowedInteractions:d,AnnotName:n,AnnotType:"freeText",AnnotationFlags:"Default",AnnotationIntent:null,AnnotationSelectorSettings:e.annotationSelectorSettings?e.annotationSelectorSettings:r,AnnotationSettings:l,Author:e.author?e.author:"Guest",Border:{HorizontalRadius:0,VerticalRadius:0,Width:e.borderWidth?e.borderWidth:1},BorderColor:{IsEmpty:!0,B:255,Blue:1,C:0,G:255},Bounds:{X:t.x,Y:t.y,Width:e.width,Height:e.height,Left:t.x,Top:t.y,Right:t.x+e.width,Bottom:t.y+e.height},CalloutLines:null,Color:{IsEmpty:!1,B:51,Blue:.2,C:0,G:255},Comments:null,CreatedDate:i,CustomData:e.customData?e.customData:null,ExistingCustomData:null,FillColor:e.fillColor?e.fillColor:"#ffffff00",Flatten:!1,FlattenPopups:!1,Font:{Bold:o==ct.Bold,Italic:o==ct.Italic,Strikeout:o==ct.Strikethrough,Underline:o==ct.Underline},FontColor:e.fontColor?e.fontColor:"#000",FontFamily:e.fontFamily?e.fontFamily:"Helvetica",FontSize:e.fontSize?e.fontSize:16,FreeTextAnnotationType:"Text Box",InnerColor:null,IsCommentLock:!1,IsLock:!!e.isLock&&e.isLock,IsPrint:null==e.isPrint||e.isPrint,Layer:null,LineEndingStyle:"OpenArrow",Location:null,MarkupText:e.defaultText?e.defaultText:"Type Here",ModifiedDate:i,Name:n,Opacity:e.opacity?e.opacity:1,Page:null,PageTags:null,ReviewHistory:null,Rotate:0,IsReadonly:!!e.isReadonly&&e.isReadonly,State:"Unmarked",StateModel:"None",StrokeColor:e.borderColor?e.borderColor:"#ffffff00",Subject:"Text Box",Text:e.defaultText?e.defaultText:"Type Here",TextAlign:e.textAlignment?e.textAlignment:"Left",TextMarkupColor:null,Thickness:e.borderWidth?e.borderWidth:1,isAddAnnotationProgramatically:!0},{freeTextAnnotation:h}},s.prototype.getPaddingValues=function(e){var i=5;return[4,i=e/16*(i-2)]},s.prototype.addInputInZoom=function(e){var t=this.pdfViewerBase.getZoomFactor();this.inputBoxElement.style.left=e.x*t+"px",this.inputBoxElement.style.top=e.y*t+"px",this.inputBoxElement.style.height=e.height*t+"px",this.inputBoxElement.style.width=e.width*t+"px",this.inputBoxElement.style.borderWidth=this.borderWidth*t+"px",this.inputBoxElement.style.fontSize=this.fontSize*t+"px"},s}(),Db=function(){function s(e,t){this.pdfViewer=e,this.pdfViewerBase=t,this.inputBoxElement=document.createElement("input"),this.inputBoxElement.addEventListener("focusout",this.onFocusOutInputBox.bind(this)),this.maxHeight=24.6,this.maxWidth=151,this.fontSize=16,this.isInFocus=!1,this.inputBoxElement.style.position="absolute",this.inputBoxElement.style.fontFamily="Helvetica"}return s.prototype.editLabel=function(e,t){var n=this.pdfViewerBase.getElement("_pageDiv_"+(this.pdfViewerBase.currentPageNumber-1)),o=this.pdfViewerBase.getZoomFactor();if(this.inputBoxElement.value=t.labelContent,this.inputBoxElement.select(),t.labelContent="",this.pdfViewer.nodePropertyChange(t,{}),this.inputBoxElement.style.left=e.x*o+"px",this.inputBoxElement.style.top=e.y*o+"px",this.inputBoxElement.style.maxHeight=this.maxHeight*o+"px",this.inputBoxElement.style.maxWidth=this.maxWidth*o+"px",this.inputBoxElement.style.fontSize=this.fontSize*o+"px",this.inputBoxElement.style.textAlign="center",t&&t.wrapper&&t.wrapper.bounds){this.inputBoxElement.style.width=t.wrapper.bounds.width?t.wrapper.bounds.width/2*o+1+"px":this.maxWidth*o+"px";var r=parseFloat(this.inputBoxElement.style.width);r=r>this.maxWidth*o?this.maxWidth*o:r,t.wrapper.bounds.left&&(this.inputBoxElement.style.left=(t.wrapper.bounds.left+t.wrapper.bounds.width/2-r/(2*o))*o+"px"),t.wrapper.bounds.top&&(this.inputBoxElement.style.top="Line"===t.shapeAnnotationType||"LineWidthArrowHead"===t.shapeAnnotationType||"Distance"===t.shapeAnnotationType||"Polygon"===t.shapeAnnotationType?(t.wrapper.bounds.top+t.wrapper.bounds.height/2-this.maxHeight)*o+"px":(t.wrapper.bounds.top+t.wrapper.bounds.height/2-this.maxHeight/2)*o+"px"),this.inputBoxElement.maxLength=t.labelMaxLength,this.inputBoxElement.fontFamily=t.fontFamily,this.inputBoxElement.style.color=t.fontColor,this.inputBoxElement.style.border="1px solid #ffffff00",this.inputBoxElement.style.padding="2px",this.inputBoxElement.style.background=t.labelFillColor}n.appendChild(this.inputBoxElement),this.isInFocus=!0,this.inputBoxElement.focus()},s.prototype.onFocusOutInputBox=function(){var e=this.pdfViewerBase.currentPageNumber-1,t=this.pdfViewerBase.getElement("_pageDiv_"+e),i=parseFloat(this.inputBoxElement.style.height),n=parseFloat(this.inputBoxElement.style.width);this.isInFocus=!1;var o=this.pdfViewer.selectedItems.annotations[0];if(o){n=(n-1)/this.pdfViewerBase.getZoomFactor(),i=(i-1)/this.pdfViewerBase.getZoomFactor(),o.labelContent=this.inputBoxElement.value,o.notes=this.inputBoxElement.value,"Rectangle"===o.shapeAnnotationType||"Ellipse"===o.shapeAnnotationType||"Line"===o.shapeAnnotationType||"LineWidthArrowHead"===o.shapeAnnotationType?this.pdfViewer.annotation.shapeAnnotationModule.modifyInCollection("labelContent",e,o):"Radius"===o.shapeAnnotationType&&o.measureType&&this.pdfViewer.annotation.measureAnnotationModule.modifyInCollection("labelContent",e,o),this.pdfViewer.nodePropertyChange(o,{}),this.pdfViewer.renderSelector(o.pageIndex,this.pdfViewer.annotationSelectorSettings);var r=document.getElementById(this.pdfViewer.selectedItems.annotations[0].annotName);r&&r.childNodes&&"label"!==this.inputBoxElement.value&&(r.childNodes[0].ej2_instances?r.childNodes[0].ej2_instances[0].value=this.inputBoxElement.value:r.childNodes[0].childNodes&&r.childNodes[0].childNodes[1].ej2_instances&&(r.childNodes[0].childNodes[1].ej2_instances[0].value=this.inputBoxElement.value))}t.removeChild(this.inputBoxElement);var l=document.getElementById(this.pdfViewer.element.id+"_annotationCanvas_"+e);this.pdfViewer.renderDrawing(l,e)},s.prototype.calculateLabelBounds=function(e,t){var i={};if(e){var n=0,o=0,r=0,l=24.6;void 0===t&&(t=this.pdfViewerBase.currentPageNumber-1);var h=this.pdfViewerBase.pageSize[t].rotation;e.width&&(r=(r=e.width/2)>0&&r<151?r:151),e.left&&(o=e.left+e.width/2-r/2),e.top&&(n=e.top+e.height/2-l/2),i=1===h||3===h?{left:o,top:n,width:r-l+r/2,height:2*l+r,right:0,bottom:0}:{left:o,top:n,width:r,height:l,right:0,bottom:0}}return i},s.prototype.calculateLabelBoundsFromLoadedDocument=function(e){var t={};if(e){var i=0,n=0,o=0;e.Width&&(o=(o=e.Width/2)>0&&o<151?o:151),e.Left&&(n=e.Left+e.Width/2-o/2),e.Top&&(i=e.Top+e.Height/2-12.3),t={left:n,top:i,width:o,height:24.6,right:0,bottom:0}}return t},s}(),Bb=function(){function s(e,t){this.isUndoRedoAction=!1,this.isUndoAction=!1,this.annotationSelected=!0,this.isAnnotDeletionApiCall=!1,this.removedDocumentAnnotationCollection=[],this.isShapeCopied=!1,this.actionCollection=[],this.redoCollection=[],this.isPopupNoteVisible=!1,this.undoCommentsElement=[],this.redoCommentsElement=[],this.selectAnnotationId=null,this.isAnnotationSelected=!1,this.annotationPageIndex=null,this.previousIndex=null,this.overlappedAnnotations=[],this.overlappedCollections=[],this.isFormFieldShape=!1,this.removedAnnotationCollection=[],this.pdfViewer=e,this.pdfViewerBase=t,this.pdfViewer.enableTextMarkupAnnotation&&(this.textMarkupAnnotationModule=new Lb(this.pdfViewer,this.pdfViewerBase)),this.pdfViewer.enableShapeAnnotation&&(this.shapeAnnotationModule=new Rb(this.pdfViewer,this.pdfViewerBase)),this.pdfViewer.enableMeasureAnnotation&&(this.measureAnnotationModule=new Nb(this.pdfViewer,this.pdfViewerBase)),this.stampAnnotationModule=new Ob(this.pdfViewer,this.pdfViewerBase),this.stickyNotesAnnotationModule=new _b(this.pdfViewer,this.pdfViewerBase),this.freeTextAnnotationModule=new Pb(this.pdfViewer,this.pdfViewerBase),this.inputElementModule=new Db(this.pdfViewer,this.pdfViewerBase),this.inkAnnotationModule=new zb(this.pdfViewer,this.pdfViewerBase)}return s.prototype.setAnnotationMode=function(e,t,i,n){var o=this.pdfViewer.allowServerDataBinding;if(this.pdfViewer.enableServerDataBinding(!1),"None"!==e&&this.triggerAnnotationUnselectEvent(),"None"===e)this.clearAnnotationMode();else if("Highlight"===e||"Strikethrough"===e||"Underline"===e)this.textMarkupAnnotationModule&&(this.textMarkupAnnotationModule.isSelectionMaintained=!1,this.textMarkupAnnotationModule.drawTextMarkupAnnotations(e.toString()));else if("Line"===e||"Arrow"===e||"Rectangle"===e||"Circle"===e||"Polygon"===e)this.shapeAnnotationModule&&this.shapeAnnotationModule.setAnnotationType(e);else if("Distance"===e||"Perimeter"===e||"Area"===e||"Radius"===e||"Volume"===e)this.measureAnnotationModule&&this.measureAnnotationModule.setAnnotationType(e);else if("FreeText"===e&&this.freeTextAnnotationModule)this.freeTextAnnotationModule.setAnnotationType("FreeText"),this.freeTextAnnotationModule.isNewFreeTextAnnot=!0,this.freeTextAnnotationModule.isNewAddedAnnot=!0;else if("HandWrittenSignature"===e)this.pdfViewerBase.signatureModule.setAnnotationMode();else if("Initial"===e)this.pdfViewerBase.signatureModule.setInitialMode();else if("Ink"===e)this.inkAnnotationModule.setAnnotationMode();else if("StickyNotes"===e){this.pdfViewerBase.isCommentIconAdded=!0,this.pdfViewerBase.isAddComment=!0;var r=document.getElementById(this.pdfViewer.element.id+"_pageDiv_"+(this.pdfViewerBase.currentPageNumber-1));r&&r.addEventListener("mousedown",this.pdfViewer.annotationModule.stickyNotesAnnotationModule.drawIcons.bind(this))}else if("Stamp"===e)if(this.pdfViewer.annotation.stampAnnotationModule.isStampAddMode=!0,this.pdfViewer.annotationModule.stampAnnotationModule.isStampAnnotSelected=!0,this.pdfViewerBase.stampAdded=!0,t){var l=Ft[t];this.pdfViewerBase.isDynamicStamp=!0,this.stampAnnotationModule.retrieveDynamicStampAnnotation(l)}else i?(l=st[i],this.pdfViewerBase.isDynamicStamp=!1,this.stampAnnotationModule.retrievestampAnnotation(l)):n&&(l=Be[n],this.pdfViewerBase.isDynamicStamp=!1,this.stampAnnotationModule.retrievestampAnnotation(l));this.pdfViewer.enableServerDataBinding(o,!0),this.pdfViewerBase.initiateTextSelection()},s.prototype.deleteAnnotationById=function(e){e&&(this.isAnnotDeletionApiCall=!0,this.annotationSelected=!1,this.selectAnnotation(e),this.deleteAnnotation(),this.isAnnotDeletionApiCall=!1)},s.prototype.clearAnnotationMode=function(){if(this.textMarkupAnnotationModule&&(this.textMarkupAnnotationModule.isTextMarkupAnnotationMode=!1),this.freeTextAnnotationModule&&(this.freeTextAnnotationModule.isNewFreeTextAnnot=!1,this.freeTextAnnotationModule.isNewAddedAnnot=!1),this.pdfViewerBase.isTextMarkupAnnotationModule()&&(this.pdfViewer.annotation.textMarkupAnnotationModule.currentTextMarkupAddMode=""),this.pdfViewerBase.isShapeAnnotationModule()&&(this.pdfViewer.annotation.shapeAnnotationModule.currentAnnotationMode=""),this.pdfViewerBase.isCalibrateAnnotationModule()&&(this.pdfViewer.annotation.measureAnnotationModule.currentAnnotationMode=""),this.pdfViewer.annotationModule.inkAnnotationModule){var e=parseInt(this.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber);this.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(e)}},s.prototype.deleteAnnotation=function(){this.textMarkupAnnotationModule&&this.textMarkupAnnotationModule.deleteTextMarkupAnnotation();var e=this.pdfViewer.selectedItems.annotations[0];if(e){var t=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_formfields"),i=JSON.parse(t),n=[];if(i){for(var o=0;o<i.length;o++)if(i[o].uniqueID==e.id){i[o].Value="";for(var r=0;r<i.length;r++)i[o].FieldName===i[r].FieldName&&"ink"===i[r].Name&&i.splice(r,1);n.push(i[o])}else n.push(i[o]);window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_formfields",JSON.stringify(n))}}var l=!1,d=!1;if(this.pdfViewer.selectedItems.annotations.length>0){var h=this.pdfViewer.selectedItems.annotations[0],p=h.shapeAnnotationType;if("Path"===p||"SignatureField"===h.formFieldAnnotationType||"InitialField"===h.formFieldAnnotationType||"HandWrittenSignature"===p||"SignatureText"===p||"SignatureImage"===p){var f=document.getElementById(h.id);f&&f.disabled&&(d=!0)}if(h.annotationSettings&&(l=h.annotationSettings.isLock)&&this.checkAllowedInteractions("Delete",h)&&(l=!1),!l&&!d){var c=h.pageIndex,u=h.shapeAnnotationType,m=void 0;"Line"===u||"LineWidthArrowHead"===u||"Polygon"===u||"Ellipse"===u||"Rectangle"===u||"Radius"===u||"Distance"===u?((0,a.le)(h.measureType)||""===h.measureType?(this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(h,"shape"),this.updateImportAnnotationCollection(h,c,"shapeAnnotation")):(this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(h,"measure"),this.updateImportAnnotationCollection(h,c,"measureShapeAnnotation")),m=this.modifyInCollections(h,"delete")):"FreeText"===u?(this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(h,"FreeText","delete"),m=this.modifyInCollections(h,"delete"),this.updateImportAnnotationCollection(h,c,"freeTextAnnotation")):"HandWrittenSignature"===u||"SignatureImage"===u||"SignatureText"===u?m=this.modifyInCollections(h,"delete"):"Ink"===u?(this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(h,"Ink","delete"),m=this.modifyInCollections(h,"delete"),this.updateImportAnnotationCollection(h,c,"signatureInkAnnotation")):(this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(m=this.pdfViewer.selectedItems.annotations[0],m.shapeAnnotationType,"delete"),this.pdfViewer.annotation.stampAnnotationModule.updateSessionStorage(h,null,"delete")),"StickyNotes"===u&&this.updateImportAnnotationCollection(h,c,"stickyNotesAnnotation"),this.updateImportAnnotationCollection(h,c,"stampAnnotations"),this.pdfViewer.annotation.addAction(c,null,h,"Delete","",m,h);var g=void 0;""!==h.annotName?g=document.getElementById(h.annotName):m&&""!==m.annotName&&(g=document.getElementById(m.annotName)),this.removeCommentPanelDiv(g);var v=this.pdfViewer.selectedItems.annotations[0],y=v.annotName,b=this.getAnnotationType(v.shapeAnnotationType,v.measureType);if("Path"===u||"SignatureField"===v.formFieldAnnotationType||"InitialField"===v.formFieldAnnotationType||"HandWrittenSignature"===u||"SignatureText"===u||"SignatureImage"===u){var C=this.pdfViewer.retrieveFormFields(),x=void 0;(S=C.findIndex(function(D){return D.id===h.id}))>-1&&(x=C[S].name);for(var V=0;V<C.length;V++)if(v.id===C[V].id||(0,a.le)(x)&&x===C[V].name){C[V].value="",C[V].signatureType="";var T=this.getAnnotationsFromCollections(C[V].id);this.updateInputFieldDivElement(T),m=this.modifyInCollections(T,"delete"),this.pdfViewer.annotation.addAction(T.pageIndex,null,T,"Delete","",m,T),this.pdfViewer.formDesignerModule&&v.formFieldAnnotationType?this.updateFormFieldCollection(T):this.updateAnnotationCollection(T),this.pdfViewer.remove(T)}this.pdfViewer.formDesignerModule&&v.formFieldAnnotationType?this.updateFormFieldCollection(h):this.updateAnnotationCollection(h)}this.pdfViewer.formDesignerModule&&v.formFieldAnnotationType?this.updateFormFieldCollection(h):this.updateAnnotationCollection(h);var k=this.pdfViewer.nameTable[h.id.split("_")[0]];if(null!=k&&("SignatureField"===k.formFieldAnnotationType||"InitialField"===k.formFieldAnnotationType)){var S;x=void 0,(S=this.pdfViewer.formFieldCollections.findIndex(function(O){return O.id===h.id.split("_")[0]}))>-1&&(x=this.pdfViewer.formFieldCollections[S].name);for(var A=0;A<this.pdfViewer.formFieldCollections.length;A++)if(x===this.pdfViewer.formFieldCollections[A].name){var M=this.pdfViewer.formFieldCollections[A];this.pdfViewer.fireFormFieldPropertiesChangeEvent("formFieldPropertiesChange",M,M.pageIndex,!0,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,M.value,""),M.value="",M.signatureType="",this.pdfViewer.formDesignerModule.updateFormFieldCollections(M);var I=this.getAnnotationsFromCollections(M.id+"_content");m=this.modifyInCollections(I,"delete"),this.pdfViewer.annotation.addAction(I.pageIndex,null,I,"Delete","",m,I),this.updateInputFieldDivElement(I);var B=this.pdfViewer.nameTable[I.id.split("_")[0]];B.wrapper.children.splice(B.wrapper.children.indexOf(I.wrapper.children[0]),1),this.pdfViewer.remove(I)}}this.pdfViewer.remove(h),this.pdfViewer.renderDrawing(),this.pdfViewer.clearSelection(c),this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection,"_formDesigner"),this.pdfViewerBase.updateDocumentEditedProperty(!0),this.pdfViewerBase.tool=null,this.pdfViewer.tool=null,"HandWrittenSignature"===v.shapeAnnotationType||"SignatureText"===v.shapeAnnotationType||"SignatureImage"===v.shapeAnnotationType||"Path"===v.shapeAnnotationType?this.pdfViewer.fireSignatureRemove(c,v.id,v.shapeAnnotationType,{left:v.bounds.x,top:v.bounds.y,width:v.bounds.width,height:v.bounds.height}):this.pdfViewer.annotationModule&&this.pdfViewer.fireAnnotationRemove(c,y,b,v.bounds),this.pdfViewer.textSelectionModule&&this.pdfViewer.textSelectionModule.enableTextSelectionMode()}}this.updateToolbar(!0),this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.annotationToolbarModule&&!l&&(this.pdfViewer.toolbarModule.annotationToolbarModule.selectAnnotationDeleteItem(!1,!0),this.pdfViewer.toolbarModule.annotationToolbarModule.enableTextMarkupAnnotationPropertiesTools(!1))},s.prototype.getAnnotationsFromCollections=function(e){var t=this.pdfViewer.annotations;if(t&&e)for(var i=0;i<t.length;i++)if(t[i].id===e)return t[i]},s.prototype.updateInputFieldDivElement=function(e){var t=document.getElementById(e.id),i=document.getElementById(e.id+"_html_element");null===t&&!(0,a.le)(i)&&(t=i.children[0].children[0]),t&&t.classList.contains("e-pdfviewer-signatureformfields-signature")&&(t.className="e-pdfviewer-signatureformfields",t.style.pointerEvents="",t.parentElement.style.pointerEvents="",this.pdfViewer.formDesignerModule?this.pdfViewer.formDesignerModule.updateSignatureValue(e.id):this.pdfViewer.formFieldsModule.updateDataInSession(t,""))},s.prototype.storeAnnotationCollections=function(e,t){if(this.isFormFieldShape){var i=this.checkFormDesignCollection(e);(n=_(e)).formFieldId=e.annotName,n.pageNumber=t,delete n.annotName,e.id&&(n.uniqueKey=e.id,delete n.id),i.isExisting?this.pdfViewer.formFieldCollection.splice(i.position,0,n):this.pdfViewer.formFieldCollection.push(n)}else{var n;i=this.checkAnnotationCollection(e),(n=_(e)).annotationId=e.annotName,n.pageNumber=t,delete n.annotName,"stamp"===e.shapeAnnotationType&&(n.uniqueKey=e.randomId,delete n.randomId),"sticky"===e.shapeAnnotationType&&(n.uniqueKey=e.annotName),e.id&&(n.uniqueKey=e.id,delete n.id),n.customData&&e.customData&&JSON.stringify(n.customData)!==JSON.stringify(e.customData)&&(n.customData=e.customData),i.isExisting?this.pdfViewer.annotationCollection.splice(i.position,0,n):this.pdfViewer.annotationCollection.push(n)}},s.prototype.checkFormDesignCollection=function(e){var t=this.pdfViewer.formFieldCollection;if(t&&e)for(var i=0;i<t.length;i++)if(t[i].formFieldId===e.annotName)return this.pdfViewer.formFieldCollection.splice(i,1),{isExisting:!0,position:i};return{isExisting:!1,position:null}},s.prototype.updateFormFieldCollection=function(e){var t=this.pdfViewer.formFieldCollection;if(t&&e)for(var i=0;i<t.length;i++)if(t[i].formFieldId===e.annotName){this.removedAnnotationCollection.push(t[i]),this.pdfViewer.formFieldCollection.splice(i,1);break}},s.prototype.getCustomData=function(e){var t;return e.ExistingCustomData&&!e.CustomData?t=JSON.parse(e.ExistingCustomData):null===e.CustomData?("sticky"===e.shapeAnnotationType&&(t=this.pdfViewer.stickyNotesSettings.customData),"Stamp"===e.shapeAnnotationType&&(t=this.pdfViewer.stampSettings.customData),"FreeText"===e.shapeAnnotationType&&(t=this.pdfViewer.freeTextSettings.customData),"shape"===e.id&&(t=this.getShapeData(e.ShapeAnnotationType,e.subject)),"measure"===e.id&&(t=this.getMeasureData(e.Subject)),"textMarkup"===e.shapeAnnotationType&&(t=this.getTextMarkupData(e.subject)),"Ink"===e.shapeAnnotationType&&(t=this.pdfViewer.inkAnnotationSettings.customData)):t=e.CustomData,t},s.prototype.getShapeData=function(e,t){var i;return"Line"===e&&"Arrow"!==t&&this.pdfViewer.lineSettings.customData?i=this.pdfViewer.lineSettings.customData:"LineWidthArrowHead"!==e&&"Arrow"!==t||!this.pdfViewer.arrowSettings.customData?"Rectangle"!==e&&"Square"!==e||!this.pdfViewer.rectangleSettings.customData?"Ellipse"!==e&&"Circle"!==e||!this.pdfViewer.circleSettings.customData?"Polygon"===e&&this.pdfViewer.polygonSettings.customData?i=this.pdfViewer.polygonSettings.customData:this.pdfViewer.annotationSettings.customData&&(i=this.pdfViewer.annotationSettings.customData):i=this.pdfViewer.circleSettings.customData:i=this.pdfViewer.rectangleSettings.customData:i=this.pdfViewer.arrowSettings.customData,i},s.prototype.getMeasureData=function(e){var t;return"Distance"!==e&&"Distance calculation"!==e||!this.pdfViewer.distanceSettings.customData?"Line"!==e&&"Perimeter calculation"!==e||!this.pdfViewer.lineSettings.customData?"Polygon"!==e&&"Area calculation"!==e&&"Volume calculation"!==e||!this.pdfViewer.polygonSettings.customData?"Radius"!==e&&"Radius calculation"!==e||!this.pdfViewer.radiusSettings.customData?this.pdfViewer.annotationSettings.customData&&(t=this.pdfViewer.annotationSettings.customData):t=this.pdfViewer.radiusSettings.customData:t=this.pdfViewer.polygonSettings.customData:t=this.pdfViewer.lineSettings.customData:t=this.pdfViewer.distanceSettings.customData,t},s.prototype.getTextMarkupData=function(e){var t;return"Highlight"===e&&this.pdfViewer.highlightSettings.customData?t=this.pdfViewer.highlightSettings.customData:"Underline"===e&&this.pdfViewer.underlineSettings.customData?t=this.pdfViewer.underlineSettings.customData:"Strikethrough"===e&&this.pdfViewer.strikethroughSettings.customData?t=this.pdfViewer.strikethroughSettings.customData:this.pdfViewer.annotationSettings.customData&&(t=this.pdfViewer.annotationSettings.customData),t},s.prototype.getData=function(e){var t;return"FreeText"===e&&this.pdfViewer.freeTextSettings.customData?t=this.pdfViewer.freeTextSettings.customData:"image"!==e&&"Stamp"!==e||!this.pdfViewer.stampSettings.customData?"sticky"===e&&this.pdfViewer.stickyNotesSettings.customData?t=this.pdfViewer.stickyNotesSettings.customData:this.pdfViewer.annotationSettings.customData&&(t=this.pdfViewer.annotationSettings.customData):t=this.pdfViewer.stampSettings.customData,t},s.prototype.clearAnnotationStorage=function(){if(Math.round(JSON.stringify(window.sessionStorage).length/1024)>4500){for(var i=window.sessionStorage.length,n=[],o=0;o<i;o++)window.sessionStorage.key(o)&&window.sessionStorage.key(o).split("_")[3]&&"annotations"===window.sessionStorage.key(o).split("_")[3]&&(this.pdfViewerBase.annotationStorage[window.sessionStorage.key(o)]=window.sessionStorage.getItem(window.sessionStorage.key(o)),n.push(window.sessionStorage.key(o)));if(n)for(o=0;o<n.length;o++)window.sessionStorage.removeItem(n[o])}},s.prototype.checkAnnotationCollection=function(e){var t=this.pdfViewer.annotationCollection;if(t&&e)for(var i=0;i<t.length;i++)if(t[i].annotationId===e.annotName)return this.pdfViewer.annotationCollection.splice(i,1),{isExisting:!0,position:i};return{isExisting:!1,position:null}},s.prototype.updateAnnotationCollection=function(e){var t=this.pdfViewer.annotationCollection;if(t&&e)for(var i=0;i<t.length;i++)if(t[i].annotationId===e.annotName||t[i].annotationId===e.annotationId){this.removedAnnotationCollection.push(t[i]),this.pdfViewer.annotationCollection.splice(i,1);break}},s.prototype.updateImportAnnotationCollection=function(e,t,i){if(this.pdfViewerBase.isImportAction&&this.pdfViewerBase.importedAnnotation&&this.pdfViewerBase.importedAnnotation[t]){var n=this.pdfViewerBase.importedAnnotation[t];if(n[i])for(var o=0;o<n[i].length;o++)if(e.annotName===n[i][o].AnnotName||e.annotName===n[i][o].annotName){this.pdfViewerBase.importedAnnotation[t][i].splice(o,1);break}}var r=this.pdfViewerBase.documentAnnotationCollections;if(r&&r[t]){var l=r[t];if(l&&l[i])for(o=0;o<l[i].length;o++)if(e.annotName===l[i][o].AnnotName){this.pdfViewerBase.documentAnnotationCollections[t][i].splice(o,1);break}}},s.prototype.selectAnnotation=function(e){var t,i;if("object"==typeof e&&(t=this.getAnnotationsFromAnnotationCollections(i=(t=e).annotationId)),"string"==typeof e&&(t=this.getAnnotationsFromAnnotationCollections(e),i=e),t){var o,n=(0,a.le)(t.pageNumber)?t.pageIndex:t.pageNumber;o=this.findRenderPageList(n);var r=this.pdfViewer.annotationSelectorSettings;if(t&&n>=0){if("textMarkup"===t.shapeAnnotationType)if(t.rect||t.bounds){var l=this.pdfViewerBase.pageSize[n].top*this.pdfViewerBase.getZoomFactor()+this.getAnnotationTop(t)*this.pdfViewerBase.getZoomFactor();if(!this.isAnnotDeletionApiCall){var d=(l-20).toString();this.pdfViewerBase.viewerContainer.scrollTop=parseInt(d),this.pdfViewerBase.viewerContainer.scrollLeft=this.getAnnotationLeft(t)*this.pdfViewerBase.getZoomFactor()}}else this.pdfViewer.navigation&&this.pdfViewer.navigation.goToPage(n+1);else if(t.bounds){l=this.pdfViewerBase.pageSize[n].top*this.pdfViewerBase.getZoomFactor()+t.bounds.top*this.pdfViewerBase.getZoomFactor();var h=t.bounds.left*this.pdfViewerBase.getZoomFactor();if("Ink"===t.shapeAnnotationType&&(l=this.pdfViewerBase.pageSize[n].top*this.pdfViewerBase.getZoomFactor()+t.bounds.y*this.pdfViewerBase.getZoomFactor(),h=t.bounds.x*this.pdfViewerBase.getZoomFactor()),!this.isAnnotDeletionApiCall){var p=(l-20).toString();this.pdfViewerBase.viewerContainer.scrollTop=parseInt(p),this.pdfViewerBase.viewerContainer.scrollLeft=h}}else this.pdfViewer.navigation&&this.pdfViewer.navigation.goToPage(n+1);if(o){if(this.previousIndex&&this.pdfViewer.clearSelection(this.previousIndex),this.pdfViewer.clearSelection(n),this.previousIndex=n,"textMarkup"===t.shapeAnnotationType){this.pdfViewer.annotationModule.textMarkupAnnotationModule.clearCurrentAnnotationSelection(n,!0);var f=this.pdfViewerBase.getElement("_annotationCanvas_"+n),c=this.getTextMarkupAnnotations(n,t);c&&(this.textMarkupAnnotationModule.currentTextMarkupAnnotation=null,this.textMarkupAnnotationModule.isSelectedAnnotation=!0,this.textMarkupAnnotationModule.showHideDropletDiv(!0),this.textMarkupAnnotationModule.annotationClickPosition=null,this.textMarkupAnnotationModule.selectAnnotation(c,f,n,null,!0),this.textMarkupAnnotationModule.currentTextMarkupAnnotation=c,this.textMarkupAnnotationModule.selectTextMarkupCurrentPage=n,this.textMarkupAnnotationModule.enableAnnotationPropertiesTool(!0),this.textMarkupAnnotationModule.isSelectedAnnotation=!1,this.pdfViewer.toolbarModule&&this.pdfViewer.enableAnnotationToolbar&&(this.pdfViewer.toolbarModule.annotationToolbarModule.isToolbarHidden=!0,this.pdfViewer.toolbarModule.annotationToolbarModule.showAnnotationToolbar(this.pdfViewer.toolbarModule.annotationItem)))}else"stamp"===t.shapeAnnotationType||"stamp"===t.ShapeAnnotationType?(this.pdfViewer.select([t.uniqueKey],r),this.pdfViewer.annotation.onAnnotationMouseDown()):"sticky"===t.shapeAnnotationType||"sticky"===t.ShapeAnnotationType?(this.pdfViewer.select([t.annotationId],r),this.pdfViewer.annotation.onAnnotationMouseDown()):(this.pdfViewer.select([t.uniqueKey],r),this.pdfViewer.annotation.onAnnotationMouseDown());var u=document.getElementById(this.pdfViewer.element.id+"_commantPanel");if(u&&"block"===u.style.display){var m=document.getElementById(this.pdfViewer.element.id+"_accordionContainer"+this.pdfViewer.currentPageNumber);m&&m.ej2_instances[0].expandItem(!0);var g=document.getElementById(i);g&&(g.classList.contains("e-pv-comments-border")||g.firstChild.click())}}else(t.uniqueKey||"textMarkup"===t.shapeAnnotationType&&"Imported Annotation"===t.annotationAddMode)&&(this.selectAnnotationId=i,this.isAnnotationSelected=!0,this.annotationPageIndex=n,this.selectAnnotationFromCodeBehind())}if(!o&&!t.uniqueKey){var v=this.updateCollectionForNonRenderedPages(t,i,n);v.pageIndex=n,this.pdfViewer.annotation.addAction(n,null,v,"Delete","",v,v),this.undoCommentsElement.push(v);var y=document.getElementById(t.annotationId);this.removeCommentPanelDiv(y)}}},s.prototype.updateCollectionForNonRenderedPages=function(e,t,i){var n,o=this.pdfViewer.annotationCollection;if(o.length){var r=o.filter(function(f){return f.annotationId===t});n=r[0],this.updateAnnotationCollection(r[0])}var l=this.getTypeOfAnnotation(e),d=this.pdfViewerBase.documentAnnotationCollections[i];if(d[l].length)for(var h=0;h<d[l].length;h++)if(d[l][h].AnnotName===e.annotationId){this.removedDocumentAnnotationCollection.push(d[l][h]),d[l].splice(h,1);break}return n},s.prototype.getTypeOfAnnotation=function(e){var t;return e.id&&"shape"===e.id.toLowerCase()?t="shapeAnnotation":e.id&&"measure"===e.id.toLowerCase()?t="measureShapeAnnotation":e.id&&"freetext"===e.id.toLowerCase()?t="freeTextAnnotation":e.shapeAnnotationType&&"textmarkup"===e.shapeAnnotationType.toLowerCase()?t="textMarkupAnnotation":e.shapeAnnotationType&&"stamp"===e.shapeAnnotationType.toLowerCase()?t="stampAnnotations":e.shapeAnnotationType&&"ink"===e.shapeAnnotationType.toLowerCase()?t="signatureInkAnnotation":e.shapeAnnotationType&&"sticky"===e.shapeAnnotationType.toLowerCase()&&(t="stickyNotesAnnotation"),t},s.prototype.removeCommentPanelDiv=function(e){e&&(1===e.parentElement.childElementCount?this.stickyNotesAnnotationModule.updateAccordionContainer(e):e.remove())},s.prototype.clearSelection=function(){this.textMarkupAnnotationModule&&this.textMarkupAnnotationModule.currentTextMarkupAnnotation?(this.textMarkupAnnotationModule.clearCurrentSelectedAnnotation(),this.textMarkupAnnotationModule.clearCurrentAnnotationSelection(this.textMarkupAnnotationModule.selectTextMarkupCurrentPage)):this.pdfViewer.clearSelection(this.pdfViewer.selectedItems&&this.pdfViewer.selectedItems.annotations[0]?this.pdfViewer.selectedItems.annotations[0].pageIndex:this.pdfViewer.currentPageNumber-1)},s.prototype.getAnnotationTop=function(e){return e.rect?e.rect.Top?e.rect.Top:e.rect.top:e.bounds[0].Top?e.bounds[0].Top:e.bounds[0].top},s.prototype.getAnnotationLeft=function(e){return e.rect?e.rect.Left?e.rect.Left:e.rect.left:e.bounds[0].Left?e.bounds[0].Left:e.bounds[0].left},s.prototype.selectAnnotationFromCodeBehind=function(){if(this.isAnnotationSelected&&this.selectAnnotationId){var e=this.getAnnotationsFromAnnotationCollections(this.selectAnnotationId),t=this.selectAnnotationId,i=e.pageNumber,n=this.pdfViewer.annotationSelectorSettings;if(e&&this.annotationPageIndex>=0&&this.annotationPageIndex===i){if(this.previousIndex&&this.pdfViewer.clearSelection(this.previousIndex),this.pdfViewer.clearSelection(i),this.previousIndex=i,"textMarkup"===e.shapeAnnotationType){this.pdfViewer.annotationModule.textMarkupAnnotationModule.clearCurrentAnnotationSelection(i,!0);var o=this.pdfViewerBase.getElement("_annotationCanvas_"+i),r=this.getTextMarkupAnnotations(i,e);r&&(this.textMarkupAnnotationModule.currentTextMarkupAnnotation=null,this.textMarkupAnnotationModule.isSelectedAnnotation=!0,this.textMarkupAnnotationModule.showHideDropletDiv(!0),this.textMarkupAnnotationModule.annotationClickPosition=null,this.textMarkupAnnotationModule.selectAnnotation(r,o,i),this.textMarkupAnnotationModule.currentTextMarkupAnnotation=r,this.textMarkupAnnotationModule.selectTextMarkupCurrentPage=i,this.textMarkupAnnotationModule.enableAnnotationPropertiesTool(!0),this.textMarkupAnnotationModule.isSelectedAnnotation=!1,this.pdfViewer.toolbarModule&&this.pdfViewer.enableAnnotationToolbar&&(this.pdfViewer.toolbarModule.annotationToolbarModule.isToolbarHidden=!0,this.pdfViewer.toolbarModule.annotationToolbarModule.showAnnotationToolbar(this.pdfViewer.toolbarModule.annotationItem)))}else"stamp"===e.shapeAnnotationType||"stamp"===e.ShapeAnnotationType?(this.pdfViewer.select([e.uniqueKey],n),this.pdfViewer.annotation.onAnnotationMouseDown()):"sticky"===e.shapeAnnotationType||"sticky"===e.ShapeAnnotationType?(this.pdfViewer.select([e.annotationId],n),this.pdfViewer.annotation.onAnnotationMouseDown()):e.uniqueKey?(this.pdfViewer.select([e.uniqueKey],n),this.pdfViewer.annotation.onAnnotationMouseDown()):(this.pdfViewer.select([e.annotationId],n),this.pdfViewer.annotation.onAnnotationMouseDown());var l=document.getElementById(this.pdfViewer.element.id+"_commantPanel");if(l&&"block"===l.style.display){var d=document.getElementById(this.pdfViewer.element.id+"_accordionContainer"+this.pdfViewer.currentPageNumber);d&&d.ej2_instances[0].expandItem(!0);var h=document.getElementById(t);h&&(h.classList.contains("e-pv-comments-border")||h.firstChild.click())}}this.isAnnotationSelected=!1,this.selectAnnotationId=null,this.annotationPageIndex=null}},s.prototype.findRenderPageList=function(e){var t=!1,i=this.pdfViewerBase.renderedPagesList;if(i)for(var n=0;n<i.length;n++)if(i[n]===e)return!0;return t},s.prototype.getPageNumberFromAnnotationCollections=function(e){var t=this.pdfViewer.annotations;if(e){if("textMarkup"===e.shapeAnnotationType)return e.pageNumber;if(t)for(var i=0;i<t.length;i++)if(t[i].annotName===e.annotationId)return t[i].pageIndex}},s.prototype.getAnnotationsFromAnnotationCollections=function(e){var t=this.pdfViewer.annotationCollection;if(t&&e)for(var i=0;i<t.length;i++)if(t[i].annotationId===e)return t[i];0===this.pdfViewer.selectedItems.annotations.length&&this.pdfViewer.selectedItems.annotations.push(this.pdfViewer.nameTable[e])},s.prototype.getTextMarkupAnnotations=function(e,t){var i=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_textMarkup");if(this.pdfViewerBase.isStorageExceed&&(i=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_textMarkup"]),!i)return null;var n=JSON.parse(i),o=this.getPageCollection(n,e);if(n[o]){for(var r=0;r<n[o].annotations.length;r++)if(n[o].annotations[r].annotName===t.annotationId)return n[o].annotations[r];return null}},s.prototype.getAnnotationType=function(e,t){var i;if(""===t||(0,a.le)(t))switch(e){case"Line":i="Line";break;case"LineWidthArrowHead":i="Arrow";break;case"Rectangle":i="Rectangle";break;case"Ellipse":i="Circle";break;case"Polygon":i="Polygon";break;case"Stamp":i="Stamp";break;case"Image":i="Image";break;case"FreeText":i="FreeText";break;case"Ink":i="Ink";break;case"StickyNotes":i="StickyNotes"}else switch(t){case"Distance":i="Distance";break;case"Perimeter":i="Perimeter";break;case"Area":i="Area";break;case"Radius":i="Radius";break;case"Volume":i="Volume"}return i},s.prototype.getAnnotationIndex=function(e,t){for(var i=this.pdfViewer.drawing.getPageObjects(e),n=null,o=0;o<i.length;o++)if(i[o].id===t){n=o;break}return n},s.prototype.initializeCollection=function(){this.actionCollection=[],this.redoCollection=[],this.pdfViewerBase.customStampCollection=[],this.popupNote||this.createNote()},s.prototype.showCommentsPanel=function(){if(this.pdfViewer.enableCommentPanel){var e=document.getElementById(this.pdfViewer.element.id+"_commantPanel");if(e&&"none"===e.style.display){e.style.display="block",a.AR.isDevice&&!(0,a.xr)()&&document.getElementById(this.pdfViewer.element.id+"_viewerMainContainer").insertBefore(this.pdfViewerBase.navigationPane.commentPanelContainer,this.pdfViewer.toolbarModule.toolbarElement),this.pdfViewerBase.navigationPane.commentPanelResizer&&(this.pdfViewerBase.navigationPane.commentPanelResizer.style.display="block"),this.pdfViewerBase.navigationPane.setCommentPanelResizeIconTop(),this.pdfViewer.annotation.stickyNotesAnnotationModule.updateCommentPanelTextTop();var i=document.getElementById(this.pdfViewer.element.id+"_viewerContainer"),n=document.getElementById(this.pdfViewer.element.id+"_pageViewContainer");if(i&&(this.pdfViewer.enableRtl?i.style.left=this.pdfViewerBase.navigationPane.getViewerContainerRight()+"px":i.style.right=this.pdfViewerBase.navigationPane.getViewerContainerRight()+"px",i.style.width=this.pdfViewer.element.clientWidth-this.pdfViewerBase.navigationPane.getViewerContainerLeft()-this.pdfViewerBase.navigationPane.getViewerContainerRight()+"px",n.style.width=i.offsetWidth-this.pdfViewerBase.navigationPane.getViewerContainerScrollbarWidth()+"px"),this.pdfViewerBase.updateZoomValue(),this.pdfViewer.annotation&&this.pdfViewer.annotation.textMarkupAnnotationModule&&this.pdfViewer.annotation.textMarkupAnnotationModule.showHideDropletDiv(!0),a.AR.isDevice&&!(0,a.xr)()){if(e.style.height=this.pdfViewerBase.viewerMainContainer.clientHeight+"px",this.pdfViewer.selectedItems.annotations.length>0){var o=document.getElementById(this.pdfViewer.selectedItems.annotations[0].annotName);o&&o.lastElementChild.children[1]&&o.lastElementChild.children[1].ej2_instances?o.lastElementChild.children[1].ej2_instances[0].enableEditMode=!0:o&&o.lastElementChild.ej2_instances&&(o.lastElementChild.ej2_instances[0].enableEditMode=!0,o.lastElementChild.style.display="block",o.lastElementChild.children[1]&&(o.lastElementChild.children[1].style.display="block"))}this.pdfViewer.toolbarModule.annotationToolbarModule.toolbar&&(this.pdfViewer.toolbarModule.annotationToolbarModule.toolbar.element.style.display="none",this.pdfViewer.toolbarModule.annotationToolbarModule.propertyToolbar&&(this.pdfViewer.toolbarModule.annotationToolbarModule.propertyToolbar.element.style.display="none"))}}}},s.prototype.addAction=function(e,t,i,n,o,r,l){this.actionCollection.push({pageIndex:e,index:t,annotation:i,action:n,modifiedProperty:o,undoElement:r,redoElement:l}),this.updateToolbar()},s.prototype.undo=function(){var e=this.actionCollection.pop();if(e){var t=e.annotation.shapeAnnotationType;switch(this.isUndoRedoAction=!0,this.isUndoAction=!0,e.action){case"Text Markup Added":case"Text Markup Deleted":this.textMarkupAnnotationModule&&this.textMarkupAnnotationModule.undoTextMarkupAction(e.annotation,e.pageIndex,e.index,e.action);break;case"Text Markup Property modified":this.textMarkupAnnotationModule&&(e.annotation=this.textMarkupAnnotationModule.undoRedoPropertyChange(e.annotation,e.pageIndex,e.index,e.modifiedProperty,!0));break;case"Drag":case"Resize":pt(e.annotation)?this.pdfViewer.nodePropertyChange(e.annotation,{bounds:e.undoElement.bounds,vertexPoints:e.undoElement.vertexPoints,leaderHeight:e.undoElement.leaderHeight}):this.pdfViewer.nodePropertyChange(e.annotation,{bounds:e.undoElement.bounds}),("Distance"===e.annotation.measureType||"Perimeter"===e.annotation.measureType||"Area"===e.annotation.measureType||"Radius"===e.annotation.measureType||"Volume"===e.annotation.measureType)&&(this.pdfViewer.nodePropertyChange(e.annotation,{notes:e.undoElement.notes}),this.updateCalibrateValues(e.annotation)),e.annotation.formFieldAnnotationType&&this.pdfViewer.formDesigner.updateHTMLElement(e.annotation),this.pdfViewer.clearSelection(this.pdfViewerBase.activeElements.activePageID),this.pdfViewer.select([e.annotation.id]),("Line"===e.annotation.shapeAnnotationType||"Rectangle"===e.annotation.shapeAnnotationType||"Ellipse"===e.annotation.shapeAnnotationType||"Polygon"===e.annotation.shapeAnnotationType||"LineWidthArrowHead"===e.annotation.shapeAnnotationType||"Radius"===e.annotation.shapeAnnotationType||"FreeText"===e.annotation.shapeAnnotationType||"HandWrittenSignature"===e.annotation.shapeAnnotationType||"SignatureText"===e.annotation.shapeAnnotationType||"SignatureImage"===e.annotation.shapeAnnotationType||"Ink"===e.annotation.shapeAnnotationType)&&this.modifyInCollections(e.annotation,"bounds");break;case"Addition":if(this.pdfViewer.formDesigner&&e.annotation.formFieldAnnotationType)this.pdfViewer.formDesigner.deleteFormField(e.undoElement.id,!1);else{var i=!1;if("Line"===t||"LineWidthArrowHead"===t||"Polygon"===t||"Ellipse"===t||"Rectangle"===t||"Radius"===t||"Distance"===t){""===e.annotation.measureType||(0,a.le)(e.annotation.measureType)?this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(e.annotation,"shape"):this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(e.annotation,"measure"),i=!0;var n=e.annotation,o=n.wrapper?n.wrapper:null;o&&o.bounds&&(e.annotation.bounds=o.bounds),e.duplicate=this.modifyInCollections(e.annotation,"delete")}("Stamp"===t||"Image"===t)&&(this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(e.annotation,e.annotation.shapeAnnotationType,"delete"),this.stampAnnotationModule.updateSessionStorage(e.annotation,null,"delete"),i=!0),("FreeText"===t||"HandWrittenSignature"===t||"SignatureImage"===t||"SignatureText"===t||"Ink"===t)&&(i=!0,this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(e.annotation,e.annotation.shapeAnnotationType,"delete"),e.duplicate=this.modifyInCollections(e.annotation,"delete")),i||this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(e.annotation,e.annotation.shapeAnnotationType,"delete"),this.pdfViewer.clearSelection(this.pdfViewerBase.activeElements.activePageID),this.pdfViewer.remove(e.annotation),this.pdfViewer.renderDrawing(null,e.annotation.pageIndex);var r=document.getElementById(e.annotation.annotName);if(r&&(1===r.parentElement.childElementCount?this.stickyNotesAnnotationModule.updateAccordionContainer(r):r.parentElement.removeChild(r)),a.AR.isDevice&&!this.pdfViewer.enableDesktopMode){var l=document.getElementById(this.pdfViewer.element.id+"_propertyToolbar");l&&l.children.length>0&&(this.pdfViewer.toolbarModule.annotationToolbarModule.toolbarCreated=!1,this.pdfViewer.toolbarModule.annotationToolbarModule.createAnnotationToolbarForMobile())}}break;case"Delete":if(this.pdfViewer.formDesigner&&e.annotation.formFieldAnnotationType)e.undoElement.bounds.x=e.undoElement.wrapper.bounds.x,e.undoElement.bounds.y=e.undoElement.wrapper.bounds.y,this.pdfViewer.formDesigner.drawFormField(e.undoElement);else{if(("Line"===t||"LineWidthArrowHead"===t||"Polygon"===t||"Ellipse"===t||"Rectangle"===t||"Radius"===t||"Distance"===t)&&(""===e.annotation.measureType||(0,a.le)(e.annotation.measureType)?(t="shape",this.shapeAnnotationModule.addInCollection(e.annotation.pageIndex,e.undoElement)):(t="shape_measure",this.measureAnnotationModule.addInCollection(e.annotation.pageIndex,e.undoElement))),"Stamp"===t||"Image"===t?this.stampAnnotationModule.updateDeleteItems(e.annotation.pageIndex,e.annotation):"FreeText"===t?this.freeTextAnnotationModule.addInCollection(e.annotation.pageIndex,e.undoElement):"Ink"===t&&this.inkAnnotationModule.addInCollection(e.annotation.pageIndex,e.undoElement),!e.annotation.annotationId){var d=this.pdfViewer.add(e.annotation);("FreeText"===t||d.enableShapeLabel)&&d&&this.pdfViewer.nodePropertyChange(d,{})}var h=void 0;if(e.annotation.id&&(h=this.pdfViewer.nameTable[e.annotation.id.split("_")[0]]),null!=h&&("SignatureField"===h.formFieldAnnotationType||"InitialField"===h.formFieldAnnotationType)){h.wrapper.children.push(e.annotation.wrapper.children[0]),"SignatureText"===e.annotation.shapeAnnotationType&&h.wrapper.children.push(e.annotation.wrapper.children[1]);var p=e.annotation.id.split("_")[0]+"_content",f=null;if(this.pdfViewer.formDesignerModule&&(f=this.pdfViewerBase.getItemFromSessionStorage("_formDesigner")),f){for(var c=JSON.parse(f),u=0;u<c.length;u++)if(c[u].Key===p)if("SignatureText"===e.annotation.shapeAnnotationType)c[u].FormField.signatureType="Text",c[u].FormField.value=e.annotation.data,this.pdfViewerBase.formFieldCollection[u].FormField.value=e.annotation.data,this.pdfViewerBase.formFieldCollection[u].FormField.signatureType="Text";else if("SignatureImage"===e.annotation.shapeAnnotationType)c[u].FormField.signatureType="Image",c[u].FormField.value=e.annotation.data,this.pdfViewerBase.formFieldCollection[u].FormField.value=e.annotation.data,this.pdfViewerBase.formFieldCollection[u].FormField.signatureType="Image";else{c[u].FormField.signatureType="Path",this.pdfViewerBase.formFieldCollection[u].FormField.signatureType="Path";var g=gt(ze(e.annotation.data));c[u].FormField.value=JSON.stringify(g),this.pdfViewerBase.formFieldCollection[u].FormField.value=JSON.stringify(g)}this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection,"_formDesigner")}}if(this.pdfViewer.renderDrawing(null,e.annotation.pageIndex),this.pdfViewer.annotationModule.stickyNotesAnnotationModule.addAnnotationComments(e.annotation.pageIndex,t),e.annotation.annotationId){var v=this.removedAnnotationCollection[this.removedAnnotationCollection.length-1],y=this.getTypeOfAnnotation(v);this.pdfViewer.annotationCollection.push(v),this.removedAnnotationCollection.splice(this.removedAnnotationCollection.length-1),this.pdfViewerBase.documentAnnotationCollections[e.annotation.pageNumber>=0?e.annotation.pageNumber:e.annotation.pageIndex][y].push(this.removedDocumentAnnotationCollection[this.removedDocumentAnnotationCollection.length-1]),this.removedDocumentAnnotationCollection.splice(this.removedDocumentAnnotationCollection.length-1)}}break;case"stampOpacity":this.pdfViewer.nodePropertyChange(e.annotation,{opacity:e.undoElement.opacity}),this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(e.annotation,null,!0),e.annotation.modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();break;case"Shape Stroke":this.pdfViewer.nodePropertyChange(e.annotation,{strokeColor:e.undoElement.strokeColor}),this.modifyInCollections(e.annotation,"stroke"),this.pdfViewer.renderDrawing();break;case"Shape Fill":this.pdfViewer.nodePropertyChange(e.annotation,{fillColor:e.undoElement.fillColor}),this.modifyInCollections(e.annotation,"fill"),this.pdfViewer.renderDrawing();break;case"Shape Opacity":this.pdfViewer.nodePropertyChange(e.annotation,{opacity:e.undoElement.opacity}),"StickyNotes"===e.annotation.shapeAnnotationType?(this.stickyNotesAnnotationModule.updateOpacityValue(e.annotation),this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(e.annotation,null,!0),e.annotation.modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime()):this.modifyInCollections(e.annotation,"opacity"),this.pdfViewer.renderDrawing();break;case"Shape Thickness":this.pdfViewer.nodePropertyChange(e.annotation,{thickness:e.undoElement.thickness}),this.modifyInCollections(e.annotation,"thickness"),this.pdfViewer.renderDrawing();break;case"Line properties change":this.pdfViewer.nodePropertyChange(e.annotation,{fillColor:e.undoElement.fillColor,borderDashArray:e.undoElement.borderDashArray,borderStyle:e.undoElement.borderStyle,strokeColor:e.undoElement.strokeColor,opacity:e.undoElement.opacity,thickness:e.undoElement.thickness,sourceDecoraterShapes:this.getArrowType(e.undoElement.lineHeadStart),taregetDecoraterShapes:this.getArrowType(e.undoElement.lineHeadEnd)}),this.updateCollectionForLineProperty(e.annotation),this.pdfViewer.renderDrawing();break;case"Text Property Added":e.annotation=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.undoAction(e.annotation,e.action,e.undoElement),this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(e.annotation,null,!0),e.annotation.modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();break;case"Comments Property Added":case"Status Property Added":case"Comments Reply Deleted":e.annotation=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.undoAction(e.annotation,e.action,e.undoElement);break;case"dynamicText Change":this.pdfViewer.annotation.freeTextAnnotationModule.isFreeTextValueChange=!0,e.annotation.dynamicText=e.undoElement.dynamicText,this.pdfViewer.selectedItems.annotations[0]&&(this.pdfViewer.selectedItems.annotations[0].dynamicText=e.undoElement.dynamicText),this.pdfViewer.annotationModule.stickyNotesAnnotationModule.undoAction(e.annotation,e.action,e.undoElement),this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(e.annotation,null,!0),this.modifyInCollections(e.annotation,"dynamicText"),this.pdfViewer.nodePropertyChange(this.pdfViewer.selectedItems.annotations[0]?this.pdfViewer.selectedItems.annotations[0]:e.annotation,{}),this.pdfViewer.annotation.freeTextAnnotationModule.isFreeTextValueChange=!1,this.pdfViewer.clearSelection(this.pdfViewerBase.activeElements.activePageID);break;case"fontColor":this.pdfViewer.nodePropertyChange(e.annotation,{fontColor:e.undoElement.fontColor}),this.modifyInCollections(e.annotation,"fontColor"),this.pdfViewer.renderDrawing();break;case"fontSize":this.pdfViewer.nodePropertyChange(e.annotation,{fontSize:e.undoElement.fontSize}),this.modifyInCollections(e.annotation,"fontSize"),this.pdfViewer.renderDrawing();break;case"fontFamily":this.pdfViewer.nodePropertyChange(e.annotation,{fontFamily:e.undoElement.fontFamily}),this.modifyInCollections(e.annotation,"fontFamily"),this.pdfViewer.renderDrawing();break;case"textAlign":this.pdfViewer.nodePropertyChange(e.annotation,{textAlign:e.undoElement.textAlign}),this.modifyInCollections(e.annotation,"textAlign"),this.pdfViewer.renderDrawing();break;case"textPropertiesChange":this.pdfViewer.nodePropertyChange(e.annotation,{font:e.undoElement.font}),this.modifyInCollections(e.annotation,"textPropertiesChange"),this.pdfViewer.renderDrawing();break;case"Rotate":this.pdfViewer.nodePropertyChange(e.annotation.annotations[0],{bounds:e.undoElement.bounds,rotateAngle:e.undoElement.rotateAngle}),this.modifyInCollections(e.annotation.annotations[0],"bounds"),this.pdfViewer.renderDrawing();break;case"FormDesigner Properties Change":e.undoElement&&e.undoElement.isMultiline!==e.redoElement.isMultiline&&this.undoRedoMultiline(e.undoElement),this.updateFormFieldPropertiesChanges(e.undoElement.formFieldAnnotationType,e.undoElement);break;case"FormField Value Change":if(e.annotation.formFieldAnnotationType)"RadioButton"==e.annotation.formFieldAnnotationType?(this.updateFormFieldValueChange(e.annotation.formFieldAnnotationType,e.undoElement,!1),this.updateFormFieldValueChange(e.annotation.formFieldAnnotationType,e.redoElement,!0)):this.updateFormFieldValueChange(e.annotation.formFieldAnnotationType,e.annotation,e.undoElement);else{document.getElementById(e.annotation.id+"_html_element").children[0].children[0].className="e-pdfviewer-signatureformfields",h=this.pdfViewer.nameTable[e.annotation.id.split("_")[0]];var S=this.pdfViewer.nameTable[e.annotation.id];if(h.wrapper.children.splice(h.wrapper.children.indexOf(S.wrapper.children[0]),1),"SignatureText"===e.annotation.shapeAnnotationType&&h.wrapper.children.splice(h.wrapper.children.indexOf(S.wrapper.children[1]),1),p=e.annotation.id.split("_")[0]+"_content",f=null,this.pdfViewer.formDesignerModule&&(f=this.pdfViewerBase.getItemFromSessionStorage("_formDesigner")),f){for(c=JSON.parse(f),u=0;u<c.length;u++)c[u].Key===p&&(c[u].FormField.value="",c[u].FormField.signatureType="",this.pdfViewerBase.formFieldCollection[u].FormField.value="",this.pdfViewerBase.formFieldCollection[u].FormField.signatureType="");this.pdfViewer.remove(e.annotation),this.pdfViewer.renderDrawing(),this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection,"_formDesigner")}}}this.redoCollection.push(e),this.updateToolbar(),this.isUndoRedoAction=!1,this.isUndoAction=!1}},s.prototype.redo=function(){var e=this.redoCollection.pop();if(e){var t=e.annotation.shapeAnnotationType;switch(this.isUndoRedoAction=!0,e.action){case"Text Markup Property modified":this.textMarkupAnnotationModule&&(e.annotation=this.textMarkupAnnotationModule.undoRedoPropertyChange(e.annotation,e.pageIndex,e.index,e.modifiedProperty));break;case"Text Markup Added":case"Text Markup Deleted":this.textMarkupAnnotationModule&&this.textMarkupAnnotationModule.redoTextMarkupAction(e.annotation,e.pageIndex,e.index,e.action);break;case"Drag":case"Resize":pt(e.annotation)?this.pdfViewer.nodePropertyChange(e.annotation,{bounds:e.redoElement.bounds,vertexPoints:e.redoElement.vertexPoints,leaderHeight:e.redoElement.leaderHeight}):this.pdfViewer.nodePropertyChange(e.annotation,{bounds:e.redoElement.bounds}),("Distance"===e.annotation.measureType||"Perimeter"===e.annotation.measureType||"Area"===e.annotation.measureType||"Radius"===e.annotation.measureType||"Volume"===e.annotation.measureType)&&(this.pdfViewer.nodePropertyChange(e.annotation,{notes:e.redoElement.notes}),this.updateCalibrateValues(e.annotation)),e.annotation.formFieldAnnotationType&&this.pdfViewer.formDesigner.updateHTMLElement(e.annotation),this.pdfViewer.clearSelection(this.pdfViewerBase.activeElements.activePageID),this.pdfViewer.select([e.annotation.id]),("Line"===e.annotation.shapeAnnotationType||"Rectangle"===e.annotation.shapeAnnotationType||"Ellipse"===e.annotation.shapeAnnotationType||"Polygon"===e.annotation.shapeAnnotationType||"LineWidthArrowHead"===e.annotation.shapeAnnotationType||"Radius"===e.annotation.shapeAnnotationType||"FreeText"===e.annotation.shapeAnnotationType||"HandWrittenSignature"===e.annotation.shapeAnnotationType||"SignatureText"===e.annotation.shapeAnnotationType||"SignatureImage"===e.annotation.shapeAnnotationType||"Ink"===e.annotation.shapeAnnotationType)&&this.modifyInCollections(e.annotation,"bounds");break;case"Addition":if(this.pdfViewer.formDesigner&&e.annotation.formFieldAnnotationType)e.redoElement.bounds.x=e.redoElement.wrapper.bounds.x,e.redoElement.bounds.y=e.redoElement.wrapper.bounds.y,this.pdfViewer.formDesigner.drawFormField(e.redoElement);else{("Line"===t||"LineWidthArrowHead"===t||"Polygon"===t||"Ellipse"===t||"Rectangle"===t||"Radius"===t||"Distance"===t)&&(""===e.annotation.measureType||(0,a.le)(e.annotation.measureType)?(t="shape",this.shapeAnnotationModule.addInCollection(e.annotation.pageIndex,e.duplicate)):(t="shape_measure",this.measureAnnotationModule.addInCollection(e.annotation.pageIndex,e.duplicate))),"FreeText"===t&&this.freeTextAnnotationModule.addInCollection(e.annotation.pageIndex,e.duplicate),"Stamp"===t&&this.stampAnnotationModule.updateDeleteItems(e.annotation.pageIndex,e.redoElement),("HandWrittenSignature"===t||"SignatureText"===t||"SignatureImage"===t)&&this.pdfViewerBase.signatureModule.addInCollection(e.annotation.pageIndex,e.duplicate),"Ink"===t&&this.inkAnnotationModule.addInCollection(e.annotation.pageIndex,e.duplicate);var i=this.pdfViewer.add(e.annotation);if(this.pdfViewer.select([e.annotation.id]),("FreeText"===t||i.enableShapeLabel)&&i&&this.pdfViewer.nodePropertyChange(i,{}),this.pdfViewer.renderDrawing(null,e.annotation.pageIndex),this.pdfViewer.annotationModule.stickyNotesAnnotationModule.addAnnotationComments(e.annotation.pageIndex,t),a.AR.isDevice&&!this.pdfViewer.enableDesktopMode){var n=document.getElementById(this.pdfViewer.element.id+"_propertyToolbar");n&&n.children.length>0&&(this.pdfViewer.toolbarModule.annotationToolbarModule.toolbarCreated=!1,this.pdfViewer.toolbarModule.annotationToolbarModule.createAnnotationToolbarForMobile())}}break;case"Delete":if(this.pdfViewer.formDesigner&&e.annotation.formFieldAnnotationType)this.pdfViewer.formDesigner.deleteFormField(e.redoElement.id,!1);else{var o=!1,r=e.annotation.shapeAnnotationType;("Line"===t||"LineWidthArrowHead"===t||"Polygon"===t||"Ellipse"===t||"Rectangle"===t||"Radius"===t||"Distance"===t)&&(r=""===e.annotation.measureType||(0,a.le)(e.annotation.measureType)?"shape":"measure",this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(e.annotation,r,"delete"),this.modifyInCollections(e.annotation,"delete"),o=!0),"Stamp"===t&&(this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(e.annotation,r,"delete"),this.stampAnnotationModule.updateSessionStorage(e.annotation,null,"delete"),o=!0),("FreeText"===t||"HandWrittenSignature"===t||"SignatureText"===t||"SignatureImage"===t)&&(this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(e.annotation,r,"delete"),this.modifyInCollections(e.annotation,"delete")),o||this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(e.annotation,r,"delete");var l=void 0;if(e.annotation.id&&(l=this.pdfViewer.nameTable[e.annotation.id.split("_")[0]]),null!=l&&("SignatureField"===l.formFieldAnnotationType||"InitialField"===l.formFieldAnnotationType)){l.wrapper.children.splice(l.wrapper.children.indexOf(e.annotation.wrapper.children[0]),1),"SignatureText"===e.annotation.shapeAnnotationType&&l.wrapper.children.splice(l.wrapper.children.indexOf(e.annotation.wrapper.children[1]),1);var d=e.annotation.id.split("_")[0]+"_content",h=null;if(this.pdfViewer.formDesignerModule&&(h=this.pdfViewerBase.getItemFromSessionStorage("_formDesigner")),h){for(var p=JSON.parse(h),f=0;f<p.length;f++)p[f].Key===d&&(p[f].FormField.value="",p[f].FormField.signatureType="",this.pdfViewerBase.formFieldCollection[f].FormField.value="",this.pdfViewerBase.formFieldCollection[f].FormField.signatureType="");this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection,"_formDesigner")}}this.pdfViewer.clearSelection(e.annotation.pageIndex),this.pdfViewer.remove(e.annotation),this.pdfViewer.renderDrawing(null,e.annotation.pageIndex);var c=e.annotation.annotName?e.annotation.annotName:e.annotation.annotationId,u=document.getElementById(c);if(this.removeCommentPanelDiv(u),e.annotation.annotationId){var m=this.updateCollectionForNonRenderedPages(e.annotation,c,e.annotation.pageIndex);this.undoCommentsElement.push(m)}}break;case"stampOpacity":this.pdfViewer.nodePropertyChange(e.annotation,{opacity:e.redoElement.opacity}),this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(e.annotation,null,!0);break;case"Shape Stroke":this.pdfViewer.nodePropertyChange(e.annotation,{strokeColor:e.redoElement.strokeColor}),this.modifyInCollections(e.annotation,"stroke"),this.pdfViewer.renderDrawing();break;case"Shape Fill":this.pdfViewer.nodePropertyChange(e.annotation,{fillColor:e.redoElement.fillColor}),this.modifyInCollections(e.annotation,"fill"),this.pdfViewer.renderDrawing();break;case"Shape Opacity":this.pdfViewer.nodePropertyChange(e.annotation,{opacity:e.redoElement.opacity}),"StickyNotes"===e.annotation.shapeAnnotationType?(this.stickyNotesAnnotationModule.updateOpacityValue(e.annotation),this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(e.annotation,null,!0)):this.modifyInCollections(e.annotation,"opacity"),this.pdfViewer.renderDrawing();break;case"Shape Thickness":this.pdfViewer.nodePropertyChange(e.annotation,{thickness:e.redoElement.thickness}),this.modifyInCollections(e.annotation,"thickness"),this.pdfViewer.renderDrawing();break;case"Line properties change":this.pdfViewer.nodePropertyChange(e.annotation,{fillColor:e.redoElement.fillColor,strokeColor:e.redoElement.strokeColor,opacity:e.redoElement.opacity,thickness:e.redoElement.thickness,sourceDecoraterShapes:this.getArrowType(e.redoElement.lineHeadStart),taregetDecoraterShapes:this.getArrowType(e.redoElement.lineHeadEnd),borderDashArray:e.redoElement.borderDashArray,borderStyle:e.redoElement.borderStyle}),this.updateCollectionForLineProperty(e.annotation),this.pdfViewer.renderDrawing();break;case"Text Property Added":e.annotation=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.redoAction(e.annotation,e.action,e.undoElement),this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(e.annotation,null,!0);break;case"Comments Property Added":e.annotation=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.redoAction(e.annotation,e.action,e.undoElement);break;case"Status Property Added":case"Comments Reply Deleted":e.annotation=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.redoAction(e.annotation,e.action);break;case"dynamicText Change":this.pdfViewer.annotation.freeTextAnnotationModule.isFreeTextValueChange=!0,e.annotation.dynamicText=e.redoElement.dynamicText;var g=this.pdfViewer.selectedItems.annotations[0];g&&(g.dynamicText=e.redoElement.dynamicText,g.bounds.height=e.redoElement.bounds.height),this.pdfViewer.annotationModule.stickyNotesAnnotationModule.redoAction(e.annotation,e.action,e.undoElement),this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(e.annotation,null,!0),this.modifyInCollections(e.annotation,"dynamicText"),this.pdfViewer.nodePropertyChange(g||e.annotation,{}),this.pdfViewer.annotation.freeTextAnnotationModule.isFreeTextValueChange=!1,this.pdfViewer.clearSelection(this.pdfViewerBase.activeElements.activePageID),this.pdfViewer.select([e.annotation.id]);break;case"fontColor":this.pdfViewer.nodePropertyChange(e.annotation,{fontColor:e.redoElement.fontColor}),this.modifyInCollections(e.annotation,"fontColor"),this.pdfViewer.renderDrawing();break;case"fontSize":this.pdfViewer.nodePropertyChange(e.annotation,{fontSize:e.redoElement.fontSize}),this.modifyInCollections(e.annotation,"fontSize"),this.pdfViewer.renderDrawing();break;case"textAlign":this.pdfViewer.nodePropertyChange(e.annotation,{textAlign:e.redoElement.textAlign}),this.modifyInCollections(e.annotation,"textAlign"),this.pdfViewer.renderDrawing();break;case"textPropertiesChange":this.pdfViewer.nodePropertyChange(e.annotation,{font:e.redoElement.font}),this.modifyInCollections(e.annotation,"textPropertiesChange"),this.pdfViewer.renderDrawing();break;case"Rotate":this.pdfViewer.nodePropertyChange(e.annotation.annotations[0],{bounds:e.redoElement.bounds,rotateAngle:e.redoElement.rotateAngle}),this.modifyInCollections(e.annotation.annotations[0],"bounds"),this.pdfViewer.renderDrawing();break;case"FormDesigner Properties Change":e.redoElement&&e.undoElement.isMultiline!==e.redoElement.isMultiline&&this.undoRedoMultiline(e.redoElement),this.updateFormFieldPropertiesChanges(e.redoElement.formFieldAnnotationType,e.redoElement);break;case"FormField Value Change":if(e.annotation.formFieldAnnotationType)"RadioButton"==e.annotation.formFieldAnnotationType?(this.updateFormFieldValueChange(e.annotation.formFieldAnnotationType,e.undoElement,!0),this.updateFormFieldValueChange(e.annotation.formFieldAnnotationType,e.redoElement,!1)):this.updateFormFieldValueChange(e.annotation.formFieldAnnotationType,e.annotation,e.redoElement);else{document.getElementById(e.annotation.id+"_html_element").children[0].children[0].className="e-pdfviewer-signatureformfields-signature",l=this.pdfViewer.nameTable[e.annotation.id.split("_")[0]];var y=this.pdfViewer.nameTable[e.annotation.id];if(l.wrapper.children.push(y.wrapper.children[0]),"SignatureText"===e.annotation.shapeAnnotationType&&l.wrapper.children.push(y.wrapper.children[1]),d=e.annotation.id.split("_")[0]+"_content",h=null,this.pdfViewer.formDesignerModule&&(h=this.pdfViewerBase.getItemFromSessionStorage("_formDesigner")),h){for(p=JSON.parse(h),f=0;f<p.length;f++)if(p[f].Key===d)if("SignatureText"===e.annotation.shapeAnnotationType)p[f].FormField.signatureType="Text",p[f].FormField.value=e.annotation.data,this.pdfViewerBase.formFieldCollection[f].FormField.value=e.annotation.data,this.pdfViewerBase.formFieldCollection[f].FormField.signatureType="Text";else if("SignatureImage"===e.annotation.shapeAnnotationType)p[f].FormField.signatureType="Image",p[f].FormField.value=e.annotation.data,this.pdfViewerBase.formFieldCollection[f].FormField.value=e.annotation.data,this.pdfViewerBase.formFieldCollection[f].FormField.signatureType="Image";else{p[f].FormField.signatureType="Path",this.pdfViewerBase.formFieldCollection[f].FormField.signatureType="Path";var C=gt(ze(e.annotation.data));p[f].FormField.value=JSON.stringify(C),this.pdfViewerBase.formFieldCollection[f].FormField.value=JSON.stringify(C)}this.pdfViewer.add(e.annotation);var S=document.getElementById(this.pdfViewer.element.id+"_annotationCanvas_"+e.pageIndex);this.pdfViewer.renderDrawing(S,e.pageIndex),this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection,"_formDesigner")}}}e.redoElement&&void 0!==e.redoElement.modifiedDate&&(e.annotation.modifiedDate=e.redoElement.modifiedDate),this.actionCollection.push(e),this.updateToolbar(),this.isUndoRedoAction=!1}},s.prototype.undoRedoMultiline=function(e){e.isMultiline&&"Textbox"===e.formFieldAnnotationType?this.pdfViewer.formDesignerModule.renderMultilineText(e,!0):"Textbox"===e.formFieldAnnotationType&&this.pdfViewer.formDesignerModule.renderTextbox(e,!0)},s.prototype.updateFormFieldValueChange=function(e,t,i){if(t){var n=this.pdfViewer.formDesigner.getFormField(t.id.split("_")[0]),o=null;if(this.pdfViewer.formDesignerModule&&(o=this.pdfViewerBase.getItemFromSessionStorage("_formDesigner")),o){var r=JSON.parse(o),l=this.pdfViewer.formDesigner.getFormFiledIndex(t.id.split("_")[0]);switch(e){case"Textbox":case"PasswordField":case"RadioButton":case"DropdownList":case"ListBox":var d=document.getElementById(t.id.split("_")[0]+"_content_html_element").firstElementChild.firstElementChild;if("Textbox"==e||"PasswordField"==e)n.value=i,this.pdfViewer.formDesigner.updateValuePropertyChange(n,d,!0,l,r);else if("RadioButton"==e)n.isSelected=i,this.pdfViewer.formDesigner.updateIsSelectedPropertyChange(n,d.firstElementChild,!0,l,r);else if("DropdownList"==e||"ListBox"==e)if(n.selectedIndex=i,r[l].FormField.selectedIndex=i,this.pdfViewerBase.formFieldCollection[l].FormField.selectedIndex=i,this.pdfViewer.nameTable[r[l].Key.split("_")[0]].selectedIndex=i,"ListBox"==e)for(var h=0;h<d.options.length;h++)d.options[h].selected=!!i.includes(h);else d.selectedIndex=i;break;case"Checkbox":var p=document.getElementById(t.id.split("_")[0]+"_content_html_element").firstElementChild.firstElementChild.lastElementChild;n.isChecked=i,this.pdfViewer.formDesigner.updateIsCheckedPropertyChange(n,p,!0,l,r)}this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection,"_formDesigner")}}},s.prototype.updateFormFieldPropertiesChanges=function(e,t){switch(e){case"Textbox":case"PasswordField":this.pdfViewer.formDesigner.updateTextboxFormDesignerProperties(t,!0);break;case"Checkbox":this.pdfViewer.formDesigner.updateCheckboxFormDesignerProperties(t,!0);break;case"RadioButton":this.pdfViewer.formDesigner.updateRadioButtonDesignerProperties(t,!0);break;case"DropdownList":this.pdfViewer.formDesigner.updateDropdownFormDesignerProperties(t,!0);break;case"ListBox":this.pdfViewer.formDesigner.updateListBoxFormDesignerProperties(t,!0);break;case"SignatureField":case"InitialField":this.pdfViewer.formDesigner.updateSignatureTextboxProperties(t,!0)}},s.prototype.updateCollectionForLineProperty=function(e){this.modifyInCollections(e,"fill"),this.modifyInCollections(e,"stroke"),this.modifyInCollections(e,"opacity"),this.modifyInCollections(e,"thickness"),this.modifyInCollections(e,"dashArray"),this.modifyInCollections(e,"startArrow"),this.modifyInCollections(e,"endArrow")},s.prototype.updateToolbar=function(e){this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.updateUndoRedoButtons(),this.pdfViewerBase.updateDocumentEditedProperty(!this.actionCollection||0!=this.actionCollection.length),e&&this.pdfViewerBase.updateDocumentEditedProperty(!0)},s.prototype.createNote=function(){this.popupNote=(0,a.az)("div",{id:this.pdfViewer.element.id+"_annotation_note",className:"e-pv-annotation-note",styles:"display:none"}),this.popupNoteAuthor=(0,a.az)("div",{id:this.pdfViewer.element.id+"_annotation_note_author",className:"e-pv-annotation-note-author"}),this.popupNote.appendChild(this.popupNoteAuthor),this.popupNoteContent=(0,a.az)("div",{id:this.pdfViewer.element.id+"_annotation_note_content",className:"e-pv-annotation-note-content"}),this.popupNote.appendChild(this.popupNoteContent),this.pdfViewerBase.mainContainer.appendChild(this.popupNote)},s.prototype.showPopupNote=function(e,t,i,n,o){var r=this.pdfViewerBase.mainContainer.getBoundingClientRect(),l=this.popupNote.getBoundingClientRect();i&&(this.popupNoteAuthor.textContent=i),this.popupNoteContent.textContent=n,"Highlight"===o?this.popupNote.style.backgroundColor="rgb(237, 232, 177)":"Underline"===o?this.popupNote.style.backgroundColor="rgb(187, 241, 191)":"Strikethrough"===o&&(this.popupNote.style.backgroundColor="rgb(242, 188, 207)"),this.popupNote.style.display="block";var d=e.pageY-r.top+5,h=e.pageX-r.left+5;h+l.width>r.width&&(h-=l.width),d+l.height>r.height&&(d-=l.height),this.popupNote.style.top=d+"px",this.popupNote.style.left=h+"px"},s.prototype.hidePopupNote=function(){this.popupNote&&(this.popupNote.style.display="none")},s.prototype.createTextMarkupPopup=function(){var e=this,t=this.pdfViewer.element.id;this.popupElement=(0,a.az)("div",{id:t+"_popup_annotation_note",className:"e-pv-annotation-popup-menu",styles:"display:none"});var i=(0,a.az)("div",{id:t+"_popup_header",className:"e-pv-annotation-popup-header"});this.authorPopupElement=(0,a.az)("div",{id:t+"_popup_author",className:"e-pv-annotation-popup-author"}),i.appendChild(this.authorPopupElement);var n=(0,a.az)("span",{id:t+"_popup_close",className:"e-pv-annotation-popup-close e-pv-icon"});i.appendChild(n),this.popupElement.appendChild(i),this.modifiedDateElement=(0,a.az)("div",{id:t+"_popup_modified_time",className:"e-pv-annotation-modified-time"}),this.popupElement.appendChild(this.modifiedDateElement);var o=(0,a.az)("div",{id:t+"_popup_content_container",className:"e-pv-annotation-popup-note-container"});this.noteContentElement=(0,a.az)("div",{id:t+"_popup_content",className:"e-pv-annotation-popup-content"}),this.noteContentElement.contentEditable="true",o.appendChild(this.noteContentElement),this.popupElement.appendChild(o),this.pdfViewerBase.viewerContainer.appendChild(this.popupElement),n.addEventListener("click",this.saveClosePopupMenu.bind(this)),n.addEventListener("touchend",this.saveClosePopupMenu.bind(this)),this.popupElement.addEventListener("mousedown",this.onPopupElementMoveStart.bind(this)),this.popupElement.addEventListener("mousemove",this.onPopupElementMove.bind(this)),window.addEventListener("mouseup",this.onPopupElementMoveEnd.bind(this)),this.popupElement.addEventListener("touchstart",this.onPopupElementMoveStart.bind(this)),this.popupElement.addEventListener("touchmove",this.onPopupElementMove.bind(this)),window.addEventListener("touchend",this.onPopupElementMoveEnd.bind(this)),this.noteContentElement.addEventListener("mousedown",function(){e.noteContentElement.focus()})},s.prototype.onPopupElementMoveStart=function(e){if("touchstart"===e.type&&(e=e.changedTouches[0]),e.target.id!==this.noteContentElement.id||!e.target.contains(this.noteContentElement.childNodes[0])){this.isPopupMenuMoved=!0;var t=this.popupElement.getBoundingClientRect();this.clientX=e.clientX-t.left,this.clientY=e.clientY-t.top+this.pdfViewerBase.pageSize[this.currentAnnotPageNumber].top*this.pdfViewerBase.getZoomFactor()}},s.prototype.onPopupElementMove=function(e){if("touchmove"===e.type&&(e=e.changedTouches[0]),this.isPopupMenuMoved&&(e.target.id!==this.noteContentElement.id||!e.target.contains(this.noteContentElement.childNodes[0]))){var t=e.clientX-this.clientX+parseFloat(this.popupElement.style.left),i=e.clientY-this.clientY+parseFloat(this.popupElement.style.top);this.clientX=e.clientX,this.clientY=e.clientY;var n=this.popupElement.getBoundingClientRect(),o=document.getElementById(this.pdfViewer.element.id+"_pageDiv_"+this.currentAnnotPageNumber);this.popupElement.style.left=t>parseFloat(o.style.left)&&t+n.width<parseFloat(o.style.left)+parseFloat(o.style.width)?t+"px":parseFloat(this.popupElement.style.left)+"px",this.popupElement.style.top=i>parseFloat(o.style.top)&&i+n.height<parseFloat(o.style.top)+parseFloat(o.style.height)?i+"px":parseFloat(this.popupElement.style.top)+"px"}},s.prototype.onPopupElementMoveEnd=function(){this.isPopupMenuMoved=!1},s.prototype.saveClosePopupMenu=function(){this.textMarkupAnnotationModule&&this.textMarkupAnnotationModule.saveNoteContent(this.currentAnnotPageNumber,this.noteContentElement.innerText),this.closePopupMenu()},s.prototype.closePopupMenu=function(){this.popupElement&&(this.popupElement.parentElement.removeChild(this.popupElement),this.popupElement=null,this.isPopupNoteVisible=!1)},s.prototype.showAnnotationPopup=function(e){if(this.textMarkupAnnotationModule&&(this.currentAnnotPageNumber=this.getEventPageNumber(e),this.textMarkupAnnotationModule&&(e.target!==this.noteContentElement||e.target.contains(this.noteContentElement.childNodes[0]))&&(this.hidePopupNote(),!this.popupElement))){this.createTextMarkupPopup(),this.popupElement.style.display="block",this.authorPopupElement.textContent=this.textMarkupAnnotationModule.currentTextMarkupAnnotation.author,this.modifiedDateElement.textContent=this.getProperDate(this.textMarkupAnnotationModule.currentTextMarkupAnnotation.modifiedDate),this.noteContentElement.textContent=this.textMarkupAnnotationModule.currentTextMarkupAnnotation.note;var t=this.popupElement.getBoundingClientRect(),i=document.getElementById(this.pdfViewer.element.id+"_pageDiv_"+this.currentAnnotPageNumber),n=i.getBoundingClientRect(),o=e.clientY-n.top+parseFloat(i.style.top),r=e.clientX;this.popupElement.style.left=r+t.width>parseFloat(i.style.left)+parseFloat(i.style.width)?r-t.width+"px":r+"px",this.popupElement.style.top=o+t.height>parseFloat(i.style.top)+parseFloat(i.style.height)?o-t.height+"px":o+"px",this.isPopupNoteVisible=!0}},s.prototype.modifyOpacity=function(e,t){var r,i=this.pdfViewer.selectedItems.annotations[0],n=_(i),o=_(i);i.opacity!==(r=t?e/100:e.value/100)&&(o.opacity=r,this.pdfViewer.nodePropertyChange(i,{opacity:r}),"StickyNotes"===i.shapeAnnotationType?this.stickyNotesAnnotationModule.updateOpacityValue(i):this.modifyInCollections(i,"opacity"),"HandWrittenSignature"===i.shapeAnnotationType||"SignatureImage"===i.shapeAnnotationType||"SignatureText"===i.shapeAnnotationType?this.pdfViewer.fireSignaturePropertiesChange(i.pageIndex,i.signatureName,i.shapeAnnotationType,!1,!0,!1,n.opacity,o.opacity):this.triggerAnnotationPropChange(i,!1,!1,!1,!0),this.pdfViewer.annotation.addAction(i.pageIndex,null,i,"Shape Opacity","",n,o),this.pdfViewer.renderDrawing())},s.prototype.modifyFontColor=function(e){var t=this.pdfViewer.selectedItems.annotations[0],i=_(t),n=_(t);n.fontColor=e,this.pdfViewer.nodePropertyChange(t,{fontColor:e}),this.modifyInCollections(t,"fontColor"),this.triggerAnnotationPropChange(t,!1,!1,!1,!0),this.pdfViewer.annotation.addAction(t.pageIndex,null,t,"fontColor","",i,n),this.pdfViewer.renderDrawing()},s.prototype.modifyFontFamily=function(e){var t=this.pdfViewer.selectedItems.annotations[0],i=_(t),n=_(t);n.fontFamily=e,this.pdfViewer.freeTextSettings.enableAutoFit?this.updateFontFamilyRenderSize(t,e):this.pdfViewer.nodePropertyChange(t,{fontFamily:e}),this.modifyInCollections(t,"fontFamily"),this.triggerAnnotationPropChange(t,!1,!1,!1,!0),this.pdfViewer.annotation.addAction(t.pageIndex,null,t,"fontFamily","",i,n),this.pdfViewer.renderDrawing()},s.prototype.modifyFontSize=function(e){var t=this.pdfViewer.selectedItems.annotations[0],i=_(t),n=_(t);n.fontSize=e;var o=this.freeTextAnnotationModule,r=t.bounds.x,l=t.bounds.y;if(t.fontSize=e,o&&!o.isNewFreeTextAnnot&&""!==t.dynamicText){if(o.addInuptElemet({x:r,y:l},t),t){t.previousFontSize>e&&(o.inputBoxElement.style.height="auto",o.inputBoxElement.style.height=o.inputBoxElement.scrollHeight+5+"px");var d=parseFloat(o.inputBoxElement.style.height),h=parseFloat(o.inputBoxElement.style.width),p=this.pdfViewerBase.getZoomFactor();h/=p;var f=(d/=p)-t.bounds.height,c=void 0;f>0?c=(c=t.wrapper.offsetY+f/2)>0?c:void 0:(f=Math.abs(f),c=(c=t.wrapper.offsetY-f/2)>0?c:void 0);var u=h-t.bounds.width,m=void 0;u>0?m=(m=t.wrapper.offsetX+u/2)>0?m:void 0:(u=Math.abs(u),m=t.wrapper.offsetX-u/2),t.bounds.width=h,t.bounds.height=d,this.pdfViewer.nodePropertyChange(t,{fontSize:e,bounds:{width:t.bounds.width,height:t.bounds.height,y:c,x:m}}),this.pdfViewer.renderSelector(t.pageIndex,this.pdfViewer.annotationSelectorSettings),t.previousFontSize=e}this.modifyInCollections(t,"fontSize"),this.modifyInCollections(t,"bounds"),this.triggerAnnotationPropChange(t,!1,!1,!1,!0),this.pdfViewer.annotation.addAction(t.pageIndex,null,t,"fontSize","",i,n),this.pdfViewer.renderDrawing()}},s.prototype.modifyTextAlignment=function(e){var t=this.pdfViewer.selectedItems.annotations[0],i=_(t),n=_(t);n.textAlign=e,this.pdfViewer.nodePropertyChange(t,{textAlign:e}),this.modifyInCollections(t,"textAlign"),this.triggerAnnotationPropChange(t,!1,!1,!1,!0),this.pdfViewer.annotation.addAction(t.pageIndex,null,t,"textAlign","",i,n),this.pdfViewer.renderDrawing()},s.prototype.modifyTextProperties=function(e,t){var i=this.pdfViewer.selectedItems.annotations[0],n=_(i),o=_(i);"bold"===t?o.font.isBold=e.isBold:"italic"===t?o.font.isItalic=e.isItalic:"underline"===t?(o.font.isUnderline=e.isUnderline,o.font.isUnderline&&o.font.isStrikeout&&(o.font.isStrikeout=!1)):"strikeout"===t&&(o.font.isStrikeout=e.isStrikeout,o.font.isUnderline&&o.font.isStrikeout&&(o.font.isUnderline=!1)),this.pdfViewer.nodePropertyChange(i,{font:e}),this.modifyInCollections(i,"textPropertiesChange"),this.triggerAnnotationPropChange(i,!1,!1,!1,!0),this.pdfViewer.annotation.addAction(i.pageIndex,null,i,"textPropertiesChange","",n,o),this.pdfViewer.renderDrawing()},s.prototype.modifyThickness=function(e){var t=this.pdfViewer.selectedItems.annotations[0];if(t.thickness!==e){var i=_(t),n=_(t);n.thickness=e,this.pdfViewer.nodePropertyChange(t,{thickness:e}),this.modifyInCollections(t,"thickness"),"HandWrittenSignature"===t.shapeAnnotationType||"SignatureText"===t.shapeAnnotationType||"SignatureImage"===t.shapeAnnotationType?this.pdfViewer.fireSignaturePropertiesChange(t.pageIndex,t.signatureName,t.shapeAnnotationType,!1,!1,!0,i.thickness,n.thickness):this.triggerAnnotationPropChange(t,!1,!1,!0,!1),this.pdfViewer.annotation.addAction(t.pageIndex,null,t,"Shape Thickness","",i,n),this.pdfViewer.renderDrawing()}},s.prototype.modifyStrokeColor=function(e){var t=this.pdfViewer.selectedItems.annotations[0],i=_(t),n=_(t);n.strokeColor=e,this.pdfViewer.nodePropertyChange(t,{strokeColor:e}),this.modifyInCollections(t,"stroke"),"HandWrittenSignature"===t.shapeAnnotationType||"SignatureText"===t.shapeAnnotationType||"SignatureImage"===t.shapeAnnotationType?this.pdfViewer.fireSignaturePropertiesChange(t.pageIndex,t.signatureName,t.shapeAnnotationType,!0,!1,!1,i.strokeColor,n.strokeColor):this.triggerAnnotationPropChange(t,!1,!0,!1,!1),this.pdfViewer.annotation.addAction(t.pageIndex,null,t,"Shape Stroke","",i,n),this.pdfViewer.renderDrawing()},s.prototype.modifyFillColor=function(e){var t=this.pdfViewer.selectedItems.annotations[0],i=_(t),n=_(t);n.fillColor=e,this.pdfViewer.nodePropertyChange(this.pdfViewer.selectedItems.annotations[0],{fillColor:e}),this.modifyInCollections(t,"fill"),this.triggerAnnotationPropChange(t,!0,!1,!1,!1),this.pdfViewer.annotation.addAction(t.pageIndex,null,t,"Shape Fill","",i,n),this.pdfViewer.renderDrawing()},s.prototype.modifyDynamicTextValue=function(e,t){var i=null;if(i=this.pdfViewer.selectedItems.annotations.filter(function(r){return r.annotName===t})[0]){var n=_(i),o=_(i);i.dynamicText=e,o.dynamicText=e,""===n.dynamicText&&(n.dynamicText=this.freeTextAnnotationModule.previousText),this.pdfViewer.nodePropertyChange(this.pdfViewer.selectedItems.annotations[0],{dynamicText:e}),this.pdfViewer.annotation.addAction(i.pageIndex,null,i,"dynamicText Change","",n,o),this.modifyInCollections(i,"dynamicText"),this.pdfViewer.renderDrawing()}},s.prototype.modifyInCollections=function(e,t){var i;return""===e.measureType||(0,a.le)(e.measureType)?i="FreeText"===e.shapeAnnotationType?this.freeTextAnnotationModule.modifyInCollection(t,e.pageIndex,e):"HandWrittenSignature"===e.shapeAnnotationType||"SignatureText"===e.shapeAnnotationType||"SignatureImage"===e.shapeAnnotationType?this.pdfViewerBase.signatureModule.modifySignatureCollection(t,e.pageIndex,e):"Stamp"===e.shapeAnnotationType?this.stampAnnotationModule.modifyInCollection(t,e.pageIndex,e):"Ink"===e.shapeAnnotationType?this.inkAnnotationModule.modifySignatureInkCollection(t,e.pageIndex,e):this.shapeAnnotationModule.modifyInCollection(t,e.pageIndex,e):("Distance"===e.measureType||"Perimeter"===e.measureType||"Radius"===e.measureType||"Area"===e.measureType||"Volume"===e.measureType)&&(i=this.measureAnnotationModule.modifyInCollection(t,e.pageIndex,e)),this.isUndoRedoAction?(this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(e,null,!0),this.isUndoAction&&(e.modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime())):"bounds"!==t&&this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(e),i},s.prototype.createPropertiesWindow=function(){var e=this;if((0,a.xr)()){var r=100*this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.opacity,l=this.getArrowString(this.pdfViewer.selectedItems.annotations[0].sourceDecoraterShapes),d=this.getArrowString(this.pdfViewer.selectedItems.annotations[0].taregetDecoraterShapes),h=void 0;parseInt(this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeDashArray)>=3?h="Dashed":"2"===this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeDashArray?h="Dotted":"0"===this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeDashArray&&(h="Solid"),this.pdfViewer._dotnetInstance.invokeMethodAsync("OpenPropertiesDialog",r,l,d,h)}else{var i=(0,a.az)("div",{id:this.pdfViewer.element.id+"_properties_window",className:"e-pv-properties-window"}),n=this.createAppearanceTab();this.pdfViewerBase.pageContainer.appendChild(i),this.propertiesDialog=new j.Vq({showCloseIcon:!0,closeOnEscape:!1,isModal:!0,header:this.pdfViewer.localeObj.getConstant("Line Properties"),target:this.pdfViewer.element,content:n,close:function(){e.destroyPropertiesWindow()}}),this.propertiesDialog.buttons=!a.AR.isDevice||this.pdfViewer.enableDesktopMode?[{buttonModel:{content:this.pdfViewer.localeObj.getConstant("OK"),isPrimary:!0},click:this.onOkClicked.bind(this)},{buttonModel:{content:this.pdfViewer.localeObj.getConstant("Cancel")},click:this.onCancelClicked.bind(this)}]:[{buttonModel:{content:this.pdfViewer.localeObj.getConstant("Cancel")},click:this.onCancelClicked.bind(this)},{buttonModel:{content:this.pdfViewer.localeObj.getConstant("OK"),isPrimary:!0},click:this.onOkClicked.bind(this)}],this.pdfViewer.enableRtl&&(this.propertiesDialog.enableRtl=!0),this.propertiesDialog.appendTo(i),this.pdfViewer.selectedItems.annotations[0]&&"Line"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&(document.getElementById(this.pdfViewer.element.id+"_properties_fill_color").disabled=!0),this.startArrowDropDown.content=this.createContent(this.getArrowString(this.pdfViewer.selectedItems.annotations[0].sourceDecoraterShapes)).outerHTML,this.endArrowDropDown.content=this.createContent(this.getArrowString(this.pdfViewer.selectedItems.annotations[0].taregetDecoraterShapes)).outerHTML,this.thicknessBox.value=this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeWidth,this.fillColorPicker.value=this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.fill,this.refreshColorPicker(this.fillColorPicker),this.strokeColorPicker.value=this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeColor,this.refreshColorPicker(this.strokeColorPicker),this.updateColorInIcon(this.fillDropDown.element,this.fillColorPicker.value),this.updateColorInIcon(this.strokeDropDown.element,this.strokeColorPicker.value),this.opacitySlider.value=100*this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.opacity,this.updateOpacityIndicator(),parseInt(this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeDashArray)>=3?this.lineStyleDropDown.content=this.createDropDownContent("dashed").outerHTML:"2"===this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeDashArray?this.lineStyleDropDown.content=this.createDropDownContent("dotted").outerHTML:"0"===this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeDashArray&&(this.lineStyleDropDown.content=this.createDropDownContent("solid").outerHTML),this.selectedLineStyle=this.pdfViewer.selectedItems.annotations[0].borderStyle,this.selectedLineDashArray=this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeDashArray,"Distance"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&(this.leaderLengthBox.value=this.pdfViewer.selectedItems.annotations[0].leaderHeight)}},s.prototype.updatePropertiesWindowInBlazor=function(){var e=document.querySelector("#"+this.pdfViewer.element.id+"_line_thickness"),t=document.querySelector("#"+this.pdfViewer.element.id+"_properties_fill_color_button"),i=document.querySelector("#"+this.pdfViewer.element.id+"_properties_stroke_color_button"),n=document.querySelector("#"+this.pdfViewer.element.id+"_properties_leader_length");e.value=this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeWidth,t.value=this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.fill,i.value=this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeColor,this.onStrokeColorChange(i.value),this.onFillColorChange(t.value),"Distance"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&(n.value=parseInt(this.pdfViewer.selectedItems.annotations[0].leaderHeight.toString()))},s.prototype.destroyPropertiesWindow=function(){this.strokeColorPicker&&(this.strokeColorPicker.destroy(),this.strokeColorPicker=null),this.fillColorPicker&&(this.fillColorPicker.destroy(),this.fillColorPicker=null),this.endArrowDropDown&&(this.endArrowDropDown.destroy(),this.endArrowDropDown=null),this.startArrowDropDown&&(this.startArrowDropDown.destroy(),this.startArrowDropDown=null),this.opacitySlider&&(this.opacitySlider.destroy(),this.opacitySlider=null),this.thicknessBox&&(this.thicknessBox.destroy(),this.thicknessBox=null),this.lineStyleDropDown&&(this.lineStyleDropDown.destroy(),this.lineStyleDropDown=null),this.leaderLengthBox&&(this.leaderLengthBox.destroy(),this.leaderLengthBox=null),this.propertiesDialog&&(this.propertiesDialog.destroy(),this.propertiesDialog=null);var e=this.pdfViewerBase.getElement("_properties_window");e&&e.parentElement.removeChild(e)},s.prototype.refreshColorPicker=function(e){e.setProperties({value:e.value},!0),e.refresh()},s.prototype.createAppearanceTab=function(){var e=this,t=this.pdfViewer.element.id,i=[{text:this.pdfViewer.localeObj.getConstant("None")},{text:this.pdfViewer.localeObj.getConstant("Open Arrow")},{text:this.pdfViewer.localeObj.getConstant("Closed Arrow")},{text:this.pdfViewer.localeObj.getConstant("Round Arrow")},{text:this.pdfViewer.localeObj.getConstant("Square Arrow")},{text:this.pdfViewer.localeObj.getConstant("Diamond Arrow")}],n=(0,a.az)("div",{id:t+"_properties_appearance"}),o=(0,a.az)("div",{className:"e-pv-properties-line-style-prop"});n.appendChild(o);var r=this.createInputElement(this.pdfViewer.localeObj.getConstant("Start Arrow"),o,"text","button",!0,"e-pv-properties-line-start",t+"_properties_line_start");this.startArrowDropDown=new Le.uw({items:i,cssClass:"e-pv-properties-line-start",select:this.onStartArrowHeadStyleSelect.bind(this)},r);var l=this.createInputElement(this.pdfViewer.localeObj.getConstant("End Arrow"),o,"text","button",!0,"e-pv-properties-line-end",t+"_properties_line_end"),d=(0,a.az)("div",{className:"e-pv-properties-border-style"});n.appendChild(d),this.endArrowDropDown=new Le.uw({items:i,cssClass:"e-pv-properties-line-end",select:this.onEndArrowHeadStyleSelect.bind(this)},l);var h=this.createInputElement(this.pdfViewer.localeObj.getConstant("Line Style"),d,"text","button",!0,"e-pv-properties-line-style",t+"_properties_line_style"),p=this.createStyleList();this.lineStyleDropDown=new Le.uw({cssClass:"e-pv-properties-line-style",target:p},h);var f=this.createInputElement(this.pdfViewer.localeObj.getConstant("Line Thickness"),d,"text","input",!0,"e-pv-properties-line-thickness",t+"_properties_thickness");this.thicknessBox=new G.No({value:0,format:"## pt",cssClass:"e-pv-properties-line-thickness",min:0,max:12},f);var c=(0,a.az)("div",{className:"e-pv-properties-color-style"});n.appendChild(c);var u=this.createInputElement(this.pdfViewer.localeObj.getConstant("Fill Color"),c,"color","button",!0,"e-pv-properties-line-fill-color",t+"_properties_fill_color");this.fillColorPicker=this.createColorPicker(t+"_properties_fill_color",!0),this.fillColorPicker.change=function(b){var C=""===b.currentValue.hex?"#ffffff00":b.currentValue.hex;e.fillDropDown.toggle(),e.updateColorInIcon(e.fillDropDown.element,C)},this.fillDropDown=this.createDropDownButton(u,"e-pv-properties-fill-color-icon",this.fillColorPicker.element.parentElement),this.fillDropDown.beforeOpen=this.onFillDropDownBeforeOpen.bind(this),this.fillDropDown.open=function(){e.fillColorPicker.refresh()};var m=this.createInputElement(this.pdfViewer.localeObj.getConstant("Line Color"),c,"color","button",!0,"e-pv-properties-line-stroke-color",t+"_properties_stroke_color");this.strokeColorPicker=this.createColorPicker(t+"_properties_stroke_color",!1),this.strokeColorPicker.change=function(b){var C=""===b.currentValue.hex?"#ffffff00":b.currentValue.hex;e.strokeDropDown.toggle(),e.updateColorInIcon(e.strokeDropDown.element,C)},this.strokeDropDown=this.createDropDownButton(m,"e-pv-properties-stroke-color-icon",this.strokeColorPicker.element.parentElement),this.strokeDropDown.beforeOpen=this.onStrokeDropDownBeforeOpen.bind(this),this.strokeDropDown.open=function(){e.strokeColorPicker.refresh()};var g=(0,a.az)("div",{className:"e-pv-properties-opacity-style"});n.appendChild(g);var v=this.createInputElement(this.pdfViewer.localeObj.getConstant("Opacity"),g,"","div",!0,"e-pv-properties-line-opacity",t+"_properties_opacity");if(this.opacitySlider=new G.iR({type:"MinRange",max:100,min:0,cssClass:"e-pv-properties-line-opacity",change:function(){e.updateOpacityIndicator()}},v),"Distance"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType){var y=this.createInputElement(this.pdfViewer.localeObj.getConstant("Leader Length"),g,"text","input",!0,"e-pv-properties-line-leader-length",t+"_properties_leader_length");this.leaderLengthBox=new G.No({value:0,format:"## pt",cssClass:"e-pv-properties-line-leader-length",min:0,max:100},y)}return n},s.prototype.createContent=function(e){var t=(0,a.az)("div",{className:"e-pv-properties-line-style-content"});return t.textContent=e,t},s.prototype.onStrokeDropDownBeforeOpen=function(){1===this.pdfViewer.selectedItems.annotations.length&&(this.strokeColorPicker.value=this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeColor),this.strokeColorPicker.refresh()},s.prototype.onFillDropDownBeforeOpen=function(){1===this.pdfViewer.selectedItems.annotations.length&&(this.fillColorPicker.value=this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeColor),this.fillColorPicker.refresh()},s.prototype.createStyleList=function(){var e=this,t=(0,a.az)("ul");document.body.appendChild(t);var i=this.createListForStyle("solid");i.addEventListener("click",function(){e.setThickness("0","solid")}),t.appendChild(i);var n=this.createListForStyle("dotted");n.addEventListener("click",function(){e.setThickness("2","dotted")}),t.appendChild(n);var o=this.createListForStyle("dashed");return o.addEventListener("click",function(){e.setThickness("3","dashed")}),t.appendChild(o),t},s.prototype.createColorPicker=function(e,t){var i=(0,a.az)("input",{id:e+"_target"});document.body.appendChild(i);var n=new G.zH({inline:!0,mode:"Palette",enableOpacity:!1,value:"#000000",showButtons:!1,modeSwitcher:!1,noColor:t});return this.pdfViewer.enableRtl&&(n.enableRtl=!0),n.appendTo(i),n},s.prototype.createDropDownButton=function(e,t,i){var n=new Le.uw({iconCss:t+" e-pv-icon",target:i});return this.pdfViewer.enableRtl&&(n.enableRtl=!0),n.appendTo(e),n},s.prototype.updateColorInIcon=function(e,t){e.childNodes[0].style.borderBottomColor=t},s.prototype.onFillColorChange=function(e){var t=document.querySelector("#"+this.pdfViewer.element.id+"_properties_fill_color_button");"transparent"!==e&&(t.children[0].style.borderBottomColor=e)},s.prototype.onStrokeColorChange=function(e){var t=document.querySelector("#"+this.pdfViewer.element.id+"_properties_stroke_color_button");"transparent"!==e&&(t.children[0].style.borderBottomColor=e)},s.prototype.setThickness=function(e,t,i){i||(this.lineStyleDropDown.content=this.createDropDownContent(t).outerHTML),this.selectedLineDashArray=e,"0"===e?this.selectedLineStyle="Solid":("2"===e||"3"===e)&&(this.selectedLineStyle="Dashed")},s.prototype.createDropDownContent=function(e){var t=(0,a.az)("div",{className:"e-pv-line-styles-content-container"}),i=(0,a.az)("span",{className:"e-pv-line-styles-content",styles:"border-bottom-style:"+e});return t.appendChild(i),t},s.prototype.createListForStyle=function(e){var t=(0,a.az)("li",{className:"e-menu-item"}),i=(0,a.az)("div",{className:"e-pv-line-styles-container"}),n=(0,a.az)("span",{className:"e-pv-line-styles-item",styles:"border-bottom-style:"+e});return i.appendChild(n),t.appendChild(i),t},s.prototype.onStartArrowHeadStyleSelect=function(e){this.startArrowDropDown.content=this.createContent(e.item.text).outerHTML},s.prototype.onEndArrowHeadStyleSelect=function(e){this.endArrowDropDown.content=this.createContent(e.item.text).outerHTML},s.prototype.createInputElement=function(e,t,i,n,o,r,l){var d=(0,a.az)("div",{id:l+"_container",className:r+"-container"});if(o){var h=(0,a.az)("div",{id:l+"_label",className:r+"-label"});h.textContent=e,d.appendChild(h)}this.pdfViewer.localeObj.getConstant("Opacity")===e&&(this.opacityIndicator=(0,a.az)("span",{className:"e-pv-properties-opacity-indicator"}),d.appendChild(this.opacityIndicator));var p=(0,a.az)(n,{id:l});return"input"===n&&(p.type=i),d.appendChild(p),t.appendChild(d),p},s.prototype.updateOpacityIndicator=function(){this.opacityIndicator.textContent=this.opacitySlider.value+"%"},s.prototype.onOkClicked=function(e){var t,i,n,o,r,l;if((0,a.xr)()){var d=document.querySelector("#"+this.pdfViewer.element.id+"_properties_line_start"),h=document.querySelector("#"+this.pdfViewer.element.id+"_properties_line_end"),p=document.querySelector("#"+this.pdfViewer.element.id+"_line_thickness"),f=document.querySelector("#"+this.pdfViewer.element.id+"_properties_style"),c=document.querySelector("#"+this.pdfViewer.element.id+"_properties_fill_color_button"),u=document.querySelector("#"+this.pdfViewer.element.id+"_properties_stroke_color_button"),m=document.querySelector("#"+this.pdfViewer.element.id+"_properties_opacity");t=this.getArrowTypeFromDropDown(d.value,!0),i=this.getArrowTypeFromDropDown(h.value,!0),n=parseInt(p.value),o=""===(o=this.getValue(u.children[0].style.borderBottomColor,"hex"))?"#ffffff00":o,r=""===(r=this.getValue(c.children[0].style.borderBottomColor,"hex"))?"#ffffff00":r,l=e?e/100:m.value/100,f.value&&("Solid"===f.value?this.setThickness("0","solid",!0):"Dotted"===f.value?this.setThickness("2","dotted",!0):"Dashed"===f.value&&this.setThickness("3","dashed",!0))}else t=this.getArrowTypeFromDropDown(this.startArrowDropDown.content),i=this.getArrowTypeFromDropDown(this.endArrowDropDown.content),n=this.thicknessBox.value,o=""===(o=this.strokeColorPicker.getValue(this.strokeColorPicker.value,"hex"))?"#ffffff00":o,r=""===(r=this.fillColorPicker.getValue(this.fillColorPicker.value,"hex"))||"#transp"===r||"#ffffff00"===this.fillColorPicker.value?"#ffffff00":r,l=this.opacitySlider.value/100;var g=this.pdfViewer.selectedItems.annotations[0],v=_(g),y=_(g),b={},C=!1,S=!1,x=!1,V=!1,T=!1,k=!1,A=!1;if(t!==g.sourceDecoraterShapes&&(b.sourceDecoraterShapes=t,y.lineHeadStart=this.getArrowString(t),T=!0),i!==g.taregetDecoraterShapes&&(b.taregetDecoraterShapes=i,y.lineHeadEnd=this.getArrowString(i),k=!0),n!==g.wrapper.children[0].style.strokeWidth&&(b.thickness=n,y.thickness=n,x=!0),o!==g.wrapper.children[0].style.strokeColor&&(b.strokeColor=o,y.strokeColor=o,S=!0),r!==g.wrapper.children[0].style.fill&&(b.fillColor=r,y.fillColor=r,C=!0),l!==g.wrapper.children[0].style.opacity&&(b.opacity=l,y.opacity=l,V=!0),this.selectedLineDashArray!==g.wrapper.children[0].style.strokeDashArray&&(b.borderDashArray=this.selectedLineDashArray,b.borderStyle=this.selectedLineStyle,y.borderDashArray=b.borderDashArray,y.borderStyle=b.borderStyle,A=!0),(0,a.xr)()){var M=document.querySelector("#"+this.pdfViewer.element.id+"_properties_leader_length");"Distance"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&parseInt(M.value)!==this.pdfViewer.selectedItems.annotations[0].leaderHeight&&(b.leaderHeight=parseInt(M.value))}else"Distance"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&this.leaderLengthBox.value!==this.pdfViewer.selectedItems.annotations[0].leaderHeight&&(b.leaderHeight=this.leaderLengthBox.value);this.pdfViewer.nodePropertyChange(this.pdfViewer.selectedItems.annotations[0],b),this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.fill=r,this.triggerAnnotationPropChange(this.pdfViewer.selectedItems.annotations[0],C,S,x,V,T,k,A),this.modifyInCollections(this.pdfViewer.selectedItems.annotations[0],"thickness"),this.modifyInCollections(this.pdfViewer.selectedItems.annotations[0],"stroke"),this.modifyInCollections(this.pdfViewer.selectedItems.annotations[0],"fill"),this.modifyInCollections(this.pdfViewer.selectedItems.annotations[0],"opacity"),this.modifyInCollections(this.pdfViewer.selectedItems.annotations[0],"dashArray"),this.modifyInCollections(this.pdfViewer.selectedItems.annotations[0],"startArrow"),this.modifyInCollections(this.pdfViewer.selectedItems.annotations[0],"endArrow"),"Distance"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&this.modifyInCollections(this.pdfViewer.selectedItems.annotations[0],"leaderLength"),this.pdfViewer.annotation.addAction(g.pageIndex,null,g,"Line properties change","",v,y),this.renderAnnotations(g.pageIndex,null,null,null),(0,a.xr)()||this.propertiesDialog.hide()},s.prototype.onCancelClicked=function(){this.propertiesDialog.hide()},s.prototype.getArrowTypeFromDropDown=function(e,t){t||(e=e.split("</div>")[0].split('">')[1]);var i="None";switch(e){case this.pdfViewer.localeObj.getConstant("None"):i="None";break;case this.pdfViewer.localeObj.getConstant("Open Arrow"):i="OpenArrow";break;case this.pdfViewer.localeObj.getConstant("Closed Arrow"):i="Arrow";break;case this.pdfViewer.localeObj.getConstant("Round Arrow"):i="Circle";break;case this.pdfViewer.localeObj.getConstant("Square Arrow"):i="Square";break;case this.pdfViewer.localeObj.getConstant("Diamond Arrow"):i="Diamond";break;case this.pdfViewer.localeObj.getConstant("Butt"):i="Butt"}return i},s.prototype.getArrowString=function(e){var t=this.pdfViewer.localeObj.getConstant("None");switch(e){case"Arrow":t=this.pdfViewer.localeObj.getConstant("Closed");break;case"OpenArrow":t=this.pdfViewer.localeObj.getConstant("Open Arrow");break;case"Circle":t=this.pdfViewer.localeObj.getConstant("Round");break;case"None":case"Square":case"Diamond":t=this.pdfViewer.localeObj.getConstant(e);break;case"Butt":t=this.pdfViewer.localeObj.getConstant("Butt")}return t},s.prototype.onAnnotationMouseUp=function(){0!==this.pdfViewer.selectedItems.annotations.length?(this.pdfViewer.toolbar&&this.pdfViewer.toolbar.annotationToolbarModule&&(this.enableBasedOnType(),this.pdfViewer.toolbar.annotationToolbarModule.selectAnnotationDeleteItem(!0),a.AR.isDevice||this.pdfViewer.toolbar.annotationToolbarModule.updateAnnnotationPropertyItems()),this.pdfViewerBase.disableTextSelectionMode()):(this.pdfViewer.textSelectionModule&&!this.pdfViewerBase.isPanMode&&!this.pdfViewer.designerMode&&this.pdfViewer.textSelectionModule.enableTextSelectionMode(),this.pdfViewer.toolbar&&this.pdfViewer.toolbar.annotationToolbarModule&&(!a.AR.isDevice||this.pdfViewer.enableDesktopMode)&&(this.pdfViewer.annotation.freeTextAnnotationModule&&!this.pdfViewer.annotation.freeTextAnnotationModule.isInuptBoxInFocus&&!this.pdfViewer.toolbar.annotationToolbarModule.inkAnnotationSelected&&(this.pdfViewer.toolbar.annotationToolbarModule.enableAnnotationPropertiesTools(!1),this.pdfViewer.toolbar.annotationToolbarModule.enableFreeTextAnnotationPropertiesTools(!1)),this.pdfViewer.toolbar.annotationToolbarModule.updateAnnnotationPropertyItems(),this.pdfViewer.toolbar.annotationToolbarModule.selectAnnotationDeleteItem(!1)))},s.prototype.onShapesMouseup=function(e,t){if(e=(0,a.le)(this.pdfViewer.selectedItems.annotations[0])?e:this.pdfViewer.selectedItems.annotations[0]){if(this.textMarkupAnnotationModule&&this.textMarkupAnnotationModule.currentTextMarkupAnnotation&&(this.textMarkupAnnotationModule.currentTextMarkupAnnotation=null,this.textMarkupAnnotationModule.selectTextMarkupCurrentPage=null),(this.pdfViewerBase.tool instanceof Fi||this.pdfViewerBase.tool instanceof Ze)&&!this.pdfViewerBase.tool.dragging){var i={opacity:e.opacity,fillColor:e.fillColor,strokeColor:e.strokeColor,thickness:e.thickness,author:e.author,subject:e.subject,modifiedDate:e.modifiedDate};this.getAnnotationIndex(e.pageIndex,e.id),this.pdfViewerBase.tool instanceof Ze&&(i.lineHeadStartStyle=this.getArrowString(e.sourceDecoraterShapes),i.lineHeadEndStyle=this.getArrowString(e.taregetDecoraterShapes),i.borderDashArray=e.borderDashArray),(!this.pdfViewerBase.isAnnotationAdded||"Distance"===e.measureType)&&(""===e.measureType||(0,a.le)(e.measureType)?this.shapeAnnotationModule.renderShapeAnnotations(e,this.pdfViewer.annotation.getEventPageNumber(t)):("Distance"===e.measureType||"Perimeter"===e.measureType||"Radius"===e.measureType)&&this.measureAnnotationModule.renderMeasureShapeAnnotations(e,this.pdfViewer.annotation.getEventPageNumber(t))),this.pdfViewerBase.updateDocumentEditedProperty(!0)}else this.pdfViewerBase.tool instanceof yo||this.pdfViewerBase.tool instanceof Bs?(this.pdfViewerBase.updateDocumentEditedProperty(!0),""===e.measureType||(0,a.le)(e.measureType)?"FreeText"===e.shapeAnnotationType?this.pdfViewer.annotation.freeTextAnnotationModule.modifyInCollection("bounds",this.pdfViewer.annotation.getEventPageNumber(t),e):"HandWrittenSignature"===e.shapeAnnotationType||"SignatureImage"===e.shapeAnnotationType||"SignatureText"===e.shapeAnnotationType?this.pdfViewerBase.signatureModule.modifySignatureCollection("bounds",this.pdfViewer.annotation.getEventPageNumber(t),e):"Ink"===e.shapeAnnotationType?this.inkAnnotationModule.modifySignatureInkCollection("bounds",this.pdfViewer.annotation.getEventPageNumber(t),e):"Stamp"===e.shapeAnnotationType||"Image"===e.shapeAnnotationType?this.stampAnnotationModule.modifyInCollection("bounds",this.pdfViewer.annotation.getEventPageNumber(t),e):this.pdfViewer.annotation.shapeAnnotationModule.modifyInCollection("bounds",this.pdfViewer.annotation.getEventPageNumber(t),e):("Distance"===e.measureType||"Perimeter"===e.measureType||"Radius"===e.measureType||"Area"===e.measureType||"Volume"===e.measureType)&&this.pdfViewer.annotation.measureAnnotationModule.modifyInCollection("bounds",this.pdfViewer.annotation.getEventPageNumber(t),e),this.pdfViewerBase.tool instanceof Bs&&(e.formFieldAnnotationType||this.triggerAnnotationResize(e)),this.pdfViewerBase.tool instanceof yo&&"Select"!==this.pdfViewerBase.action&&(e.formFieldAnnotationType||this.triggerAnnotationMove(e))):this.pdfViewerBase.tool instanceof Da&&(this.pdfViewerBase.updateDocumentEditedProperty(!0),""===e.measureType||(0,a.le)(e.measureType)?("Line"===e.shapeAnnotationType||"LineWidthArrowHead"===e.shapeAnnotationType||"Polygon"===e.shapeAnnotationType)&&this.pdfViewer.annotation.shapeAnnotationModule.modifyInCollection("bounds",this.pdfViewer.annotation.getEventPageNumber(t),e):("Distance"===e.measureType||"Perimeter"===e.measureType||"Area"===e.measureType||"Volume"===e.measureType)&&("Distance"===e.measureType&&this.pdfViewer.annotation.measureAnnotationModule.modifyInCollection("leaderLength",this.pdfViewer.annotation.getEventPageNumber(t),e),this.pdfViewer.annotation.measureAnnotationModule.modifyInCollection("bounds",this.pdfViewer.annotation.getEventPageNumber(t),e)),this.triggerAnnotationResize(e));if(this.pdfViewerBase.navigationPane&&this.pdfViewerBase.navigationPane.annotationMenuObj&&this.pdfViewer.isSignatureEditable&&("HandWrittenSignature"===e.shapeAnnotationType||"SignatureText"===e.shapeAnnotationType||"SignatureImage"===e.shapeAnnotationType)&&(this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant("Export Annotations")],!0),this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant("Export XFDF")],!0)),this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.annotationToolbarModule&&this.pdfViewer.enableAnnotationToolbar&&(this.pdfViewer.toolbarModule.annotationToolbarModule.clearTextMarkupMode(),""===e.measureType||(0,a.le)(e.measureType)?this.pdfViewer.toolbarModule.annotationToolbarModule.clearMeasureMode():("Distance"===e.measureType||"Perimeter"===e.measureType||"Area"===e.measureType||"Volume"===e.measureType||"Radius"===e.measureType)&&this.pdfViewer.toolbarModule.annotationToolbarModule.clearShapeMode(),1===this.pdfViewer.selectedItems.annotations.length&&null===this.pdfViewer.selectedItems.annotations[0].formFieldAnnotationType&&this.pdfViewer.toolbarModule.annotationToolbarModule.enableAnnotationPropertiesTools(!0),!(0,a.xr)()&&1===this.pdfViewer.selectedItems.annotations.length&&!this.pdfViewer.designerMode)){if(this.pdfViewer.toolbarModule.annotationToolbarModule.selectAnnotationDeleteItem(!0),this.pdfViewer.toolbarModule.annotationToolbarModule.setCurrentColorInPicker(),this.pdfViewer.toolbarModule.annotationToolbarModule.isToolbarHidden=!0,this.pdfViewer.formDesignerModule||""==e.properties.id||null==e.properties.id||"sign"==e.properties.id.slice(0,4))this.pdfViewer.toolbarModule.annotationToolbarModule.showAnnotationToolbar(this.pdfViewer.toolbarModule.annotationItem);else{var r=document.getElementById(e.properties.id),l=r&&r.disabled;l?this.pdfViewer.annotation&&l&&this.pdfViewer.annotation.clearSelection():this.pdfViewer.toolbarModule.annotationToolbarModule.showAnnotationToolbar(this.pdfViewer.toolbarModule.annotationItem)}this.pdfViewer.isAnnotationToolbarVisible&&this.pdfViewer.isFormDesignerToolbarVisible&&(document.getElementById(this.pdfViewer.element.id+"_formdesigner_toolbar").style.display="none",this.pdfViewer.toolbarModule&&(this.pdfViewer.toolbarModule.formDesignerToolbarModule.isToolbarHidden=!1,this.pdfViewer.toolbarModule.formDesignerToolbarModule.showFormDesignerToolbar(this.pdfViewer.toolbarModule.formDesignerItem),this.pdfViewer.toolbarModule.annotationToolbarModule.adjustViewer(!0)))}}},s.prototype.updateCalibrateValues=function(e,t){"Distance"===e.measureType?(e.notes=function(s,e,t){for(var i,n=0;n<s.wrapper.children.length;n++){var o=s.wrapper.children[n];o&&!(0,a.le)(o.content)&&(i=t.setConversion(Ma([e[0],e[1]])*t.pixelToPointFactor,s),o.content=i,o.childNodes[0].text=o.content,o.refreshTextElement())}return i}(e,e.vertexPoints,this.measureAnnotationModule),!0===e.enableShapeLabel&&(e.labelContent=e.notes),this.pdfViewer.annotation.measureAnnotationModule.modifyInCollection("notes",e.pageIndex,e,t),this.pdfViewer.annotation.stickyNotesAnnotationModule.addTextToComments(e.annotName,e.notes),this.renderAnnotations(e.pageIndex,null,null,null,null)):"Radius"===e.measureType?(e.notes=function(s,e){for(var t,i=0;i<s.wrapper.children.length;i++){var n=s.wrapper.children[i];n&&!(0,a.le)(n.content)&&(t=e.setConversion(s.bounds.width/2*e.pixelToPointFactor,s),n.content=t,2===n.childNodes.length?(n.childNodes[0].text=t,n.childNodes.splice(n.childNodes.length-1,1)):n.childNodes[0].text=t,n.refreshTextElement())}return t}(e,this.measureAnnotationModule),!0===e.enableShapeLabel&&(e.labelContent=e.notes),this.pdfViewer.annotation.measureAnnotationModule.modifyInCollection("notes",e.pageIndex,e,t),this.pdfViewer.annotation.stickyNotesAnnotationModule.addTextToComments(e.annotName,e.notes),this.renderAnnotations(e.pageIndex,null,null,null,null)):"Perimeter"===e.measureType?(e.notes=Bu(e,0,this.measureAnnotationModule),!0===e.enableShapeLabel&&(e.labelContent=e.notes),this.pdfViewer.annotation.measureAnnotationModule.modifyInCollection("notes",e.pageIndex,e,t),this.pdfViewer.annotation.stickyNotesAnnotationModule.addTextToComments(e.annotName,e.notes),this.renderAnnotations(e.pageIndex,null,null,null,null)):"Area"===e.measureType?(e.notes=this.measureAnnotationModule.calculateArea(e.vertexPoints,e.id,e.pageIndex),!0===e.enableShapeLabel&&(e.labelContent=e.notes,Fu(e)),this.pdfViewer.annotation.measureAnnotationModule.modifyInCollection("notes",e.pageIndex,e,t),this.pdfViewer.annotation.stickyNotesAnnotationModule.addTextToComments(e.annotName,e.notes),this.renderAnnotations(e.pageIndex,null,null,null,null)):"Volume"===e.measureType&&(e.notes=this.measureAnnotationModule.calculateVolume(e.vertexPoints,e.id,e.pageIndex),!0===e.enableShapeLabel&&(e.labelContent=e.notes,Fu(e)),this.pdfViewer.annotation.measureAnnotationModule.modifyInCollection("notes",e.pageIndex,e,t),this.pdfViewer.annotation.stickyNotesAnnotationModule.addTextToComments(e.annotName,e.notes),this.renderAnnotations(e.pageIndex,null,null,null,null))},s.prototype.onAnnotationMouseDown=function(){if(1===this.pdfViewer.selectedItems.annotations.length&&null===this.pdfViewer.selectedItems.annotations[0].formFieldAnnotationType&&this.pdfViewer.toolbar&&this.pdfViewer.toolbar.annotationToolbarModule){if(!(0,a.xr)()&&a.AR.isDevice&&!this.pdfViewer.enableDesktopMode&&"none"===document.getElementById(this.pdfViewer.element.id+"_commantPanel").style.display)if(this.pdfViewer.enableToolbar&&this.pdfViewer.enableAnnotationToolbar&&this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation)this.pdfViewer.toolbarModule.annotationToolbarModule.createPropertyTools("");else if(this.pdfViewer.enableToolbar&&this.pdfViewer.enableAnnotationToolbar){this.pdfViewer.toolbarModule.annotationToolbarModule.createAnnotationToolbarForMobile(),this.pdfViewer.toolbarModule.annotationToolbarModule.createPropertyTools(this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType);var t=document.getElementById(this.pdfViewer.element.id+"_annotationIcon");t&&!t.parentElement.classList.contains("e-pv-select")&&t.parentElement.classList.add("e-pv-select")}this.enableBasedOnType(),this.pdfViewer.toolbar.annotationToolbarModule.selectAnnotationDeleteItem(!0)}},s.prototype.enableBasedOnType=function(){var e=!1,t=this.pdfViewer.selectedItems.annotations[0];t&&t.annotationSettings&&(e=t.annotationSettings.isLock)&&this.checkAllowedInteractions("PropertyChange",t)&&(e=!1),!a.AR.isDevice||this.pdfViewer.enableDesktopMode?e||("Stamp"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType||"Image"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType||"StickyNotes"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType?this.pdfViewer.toolbar.annotationToolbarModule.enableStampAnnotationPropertiesTools(!0):"Path"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType||"SignatureImage"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType||"SignatureText"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType?this.pdfViewer.toolbar.annotationToolbarModule.enableAnnotationPropertiesTools(!1):"FreeText"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType?this.pdfViewer.toolbar.annotationToolbarModule.enableFreeTextAnnotationPropertiesTools(!0):"HandWrittenSignature"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType||"Ink"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType?this.pdfViewer.toolbar.annotationToolbarModule.enableSignaturePropertiesTools(!0):1===this.pdfViewer.selectedItems.annotations.length&&null===this.pdfViewer.selectedItems.annotations[0].formFieldAnnotationType&&this.pdfViewer.toolbar.annotationToolbarModule.enableAnnotationPropertiesTools(!0)):!this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation&&"Path"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&a.AR.isDevice&&!this.pdfViewer.enableDesktopMode&&this.pdfViewer.toolbarModule.annotationToolbarModule.createMobileAnnotationToolbar(!0,!0)},s.prototype.getProperDate=function(e){var t=new Date(e.toString());if(isNaN(t.getFullYear())){var i=e.slice(2,16);i=i.slice(0,4)+"/"+i.slice(4,6)+"/"+i.slice(6,8)+" "+i.slice(8,10)+":"+i.slice(10,12)+":"+i.slice(12,14),t=new Date(i)}return t.getMonth()+1+"/"+t.getDate()+"/"+t.getFullYear()+" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()},s.prototype.getPageCollection=function(e,t){for(var i=null,n=0;n<e.length;n++)if(e[n].pageIndex===t){i=n;break}return i},s.prototype.getAnnotationWithId=function(e,t){for(var i,n=0;n<e.length;n++)t===e[n].id&&(i=e[n]);return i},s.prototype.getEventPageNumber=function(e){var i,t=e.target;return t.classList.contains("e-pv-hyperlink")?t=t.parentElement:t.parentElement&&t.parentElement.classList.contains("foreign-object")?t=t.parentElement.parentElement.parentElement.parentElement:t.classList.contains("e-pdfviewer-formFields")&&(t=t.parentElement),t&&(i=t.id.split("_text_")[1]||t.id.split("_textLayer_")[1]||t.id.split("_annotationCanvas_")[1]||t.id.split("_pageDiv_")[1]),isNaN(i)&&(e=this.pdfViewerBase.annotationEvent)&&(i=(t=e.target).id.split("_text_")[1]||t.id.split("_textLayer_")[1]||t.id.split("_annotationCanvas_")[1]||t.id.split("_pageDiv_")[1]),parseInt(i)},s.prototype.getAnnotationComments=function(e,t,i){var n=[];if(e&&e.length>0)for(var r=0;r<e.length;r++){var l=e[r];n[n.length]={shapeAnnotationType:"sticky",author:l.Author,modifiedDate:l.ModifiedDate,note:l.Note,state:l.state,stateModel:l.stateModel,comments:[],review:{state:l.State,stateModel:l.StateModel,modifiedDate:l.ModifiedDate,author:l.Author},annotName:l.AnnotName,parentId:t.AnnotName,subject:"Comments",isLock:l.IsLock}}return n},s.prototype.getRandomNumber=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){return(16*Math.random()|0).toString(16)})},s.prototype.createGUID=function(){return this.getRandomNumber()},s.prototype.createAnnotationLayer=function(e,t,i,n,o){var r=this.pdfViewerBase.getElement("_annotationCanvas_"+n);if(r)return this.updateCanvas(r,t,i,n),r;var l=(0,a.az)("canvas",{id:this.pdfViewer.element.id+"_annotationCanvas_"+n,className:"e-pv-annotation-canvas"});return this.updateCanvas(l,t,i,n),e.appendChild(l),l},s.prototype.resizeAnnotations=function(e,t,i){var n=this.pdfViewerBase.getElement("_annotationCanvas_"+i);n&&(n.style.width=e+"px",n.style.height=t+"px",this.pdfViewerBase.applyElementStyles(n,i))},s.prototype.clearAnnotationCanvas=function(e){var t=this.pdfViewerBase.getElement("_annotationCanvas_"+e),i=this.pdfViewerBase.getZoomFactor(),n=this.pdfViewerBase.getZoomRatio(i);if(t){var o=this.pdfViewerBase.pageSize[e].width,r=this.pdfViewerBase.pageSize[e].height;t.width=o*n,t.height=r*n,t.style.width=o*i+"px",t.style.height=r*i+"px"}},s.prototype.renderAnnotations=function(e,t,i,n,o,r){this.clearAnnotationCanvas(e),this.shapeAnnotationModule&&(r?this.shapeAnnotationModule.renderShapeAnnotations(t,e,!0):this.shapeAnnotationModule.renderShapeAnnotations(t,e)),this.measureAnnotationModule&&(r?this.measureAnnotationModule.renderMeasureShapeAnnotations(i,e,!0):this.measureAnnotationModule.renderMeasureShapeAnnotations(i,e)),null!=o||(o=this.pdfViewerBase.getElement("_annotationCanvas_"+e)),this.pdfViewer.drawing.refreshCanvasDiagramLayer(o,e),this.textMarkupAnnotationModule&&(r?this.textMarkupAnnotationModule.renderTextMarkupAnnotationsInPage(n,e,!0):this.textMarkupAnnotationModule.renderTextMarkupAnnotationsInPage(n,e))},s.prototype.storeAnnotations=function(e,t,i){Math.round(JSON.stringify(window.sessionStorage).length/1024)>4500&&(this.clearAnnotationStorage(),this.pdfViewerBase.isStorageExceed=!0);var o=window.sessionStorage.getItem(this.pdfViewerBase.documentId+i);this.pdfViewerBase.isStorageExceed&&(o=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+i]);var r=0;if(o){this.storeAnnotationCollections(t,e);var p=JSON.parse(o);this.pdfViewerBase.isStorageExceed||window.sessionStorage.removeItem(this.pdfViewerBase.documentId+i);var f=this.pdfViewer.annotationModule.getPageCollection(p,e);if(p[f])p[f].annotations.push(t),r=p[f].annotations.indexOf(t);else{var c={pageIndex:e,annotations:[]};c.annotations.push(t),r=c.annotations.indexOf(t),p.push(c)}var h=JSON.stringify(p);this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+i]=h:window.sessionStorage.setItem(this.pdfViewerBase.documentId+i,h)}else{this.storeAnnotationCollections(t,e);var l={pageIndex:e,annotations:[]};l.annotations.push(t),r=l.annotations.indexOf(t);var d=[];d.push(l),h=JSON.stringify(d),this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+i]=h:window.sessionStorage.setItem(this.pdfViewerBase.documentId+i,h)}return r},s.prototype.getArrowType=function(e){var t="None";switch(e){case"ClosedArrow":case"Closed":t="Arrow";break;case"OpenArrow":case"Open":t="OpenArrow";break;case"Square":t="Square";break;case"Circle":case"Round":t="Circle";break;case"Diamond":t="Diamond";break;case"Butt":t="Butt"}return t},s.prototype.getArrowTypeForCollection=function(e){var t;switch(e){case"Arrow":t="ClosedArrow";break;case"OpenArrow":case"Square":case"Circle":case"Diamond":case"None":t=e.toString();break;case"Butt":t="Butt"}return t},s.prototype.getBounds=function(e,t){var i=this.pdfViewerBase.pageSize[t];return i?1===i.rotation?{left:e.top,top:i.width-(e.left+e.width),width:e.height,height:e.width}:2===i.rotation?{left:i.width-e.left-e.width,top:i.height-e.top-e.height,width:e.width,height:e.height}:3===i.rotation?{left:i.height-e.top-e.height,top:e.left,width:e.height,height:e.width}:e:e},s.prototype.getInkBounds=function(e,t){var i=this.pdfViewerBase.pageSize[t];return i?1===i.rotation?{x:e.y,y:i.width-(e.x+e.width),width:e.height,height:e.width}:2===i.rotation?{x:i.width-e.x-e.width,y:i.height-e.y-e.height,width:e.width,height:e.height}:3===i.rotation?{x:i.height-e.y-e.height,y:e.x,width:e.height,height:e.width}:e:e},s.prototype.getVertexPoints=function(e,t){if(e){var i=this.pdfViewerBase.pageSize[t];if(1===i.rotation){for(var n=[],o=0;o<e.length;o++)n.push({x:e[o].y,y:i.width-e[o].x});return n}if(2===i.rotation){var l=[];for(o=0;o<e.length;o++)l.push({x:i.width-e[o].x,y:i.height-e[o].y});return l}if(3===i.rotation){var d=[];for(o=0;o<e.length;o++)d.push({x:i.height-e[o].y,y:e[o].x});return d}return e}},s.prototype.getStoredAnnotations=function(e,t,i){var n,o=window.sessionStorage.getItem(this.pdfViewerBase.documentId+i);if(this.pdfViewerBase.isStorageExceed&&(o=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+i]),o){var r=JSON.parse(o),l=this.pdfViewer.annotationModule.getPageCollection(r,e);n=r[l]?r[l].annotations:null}else n=null;return n},s.prototype.triggerAnnotationPropChange=function(e,t,i,n,o,r,l,d,h,p,f){this.getAnnotationIndex(e.pageIndex,e.id);var u=this.getAnnotationType(e.shapeAnnotationType,e.measureType),m={name:"annotationPropertiesChange",pageIndex:e.pageIndex,annotationId:e.annotName,annotationType:u,isColorChanged:t,isOpacityChanged:o,isThicknessChanged:n,isStrokeColorChanged:i};h&&(m.isFreeTextChanged=h,m.previousText=p,m.currentText=f),r&&(m.isLineHeadStartStyleChanged=r),l&&(m.isLineHeadEndStyleChanged=l),d&&(m.isBorderDashArrayChanged=d),this.pdfViewer.trigger("annotationPropertiesChange",m)},s.prototype.triggerAnnotationAdd=function(e){var t={opacity:e.opacity,fillColor:e.fillColor,strokeColor:e.strokeColor,thickness:e.thickness,author:e.author,subject:e.subject,modifiedDate:e.modifiedDate},i={left:e.wrapper.bounds.x,top:e.wrapper.bounds.y,width:e.wrapper.bounds.width,height:e.wrapper.bounds.height},n=this.getAnnotationType(e.shapeAnnotationType,e.measureType);("Line"===n||"Arrow"===n||"Distance"===n||"Perimeter"===n)&&(t.lineHeadStartStyle=this.getArrowString(e.sourceDecoraterShapes),t.lineHeadEndStyle=this.getArrowString(e.taregetDecoraterShapes),t.borderDashArray=e.borderDashArray),this.pdfViewer.enableShapeLabel?this.pdfViewer.fireAnnotationAdd(e.pageIndex,e.annotName,n,i,t,null,null,null,{fontColor:e.fontColor,fontSize:e.fontSize,fontFamily:e.fontFamily,opacity:e.labelOpacity,labelContent:e.labelContent,fillColor:e.labelFillColor}):this.pdfViewer.fireAnnotationAdd(e.pageIndex,e.annotName,n,i,t)},s.prototype.triggerAnnotationResize=function(e){var t={opacity:e.opacity,fillColor:e.fillColor,strokeColor:e.strokeColor,thickness:e.thickness,author:e.author,subject:e.subject,modifiedDate:e.modifiedDate},n=(this.getAnnotationIndex(e.pageIndex,e.id),e.bounds),o={left:n.x,top:n.y,x:n.x,y:n.y,width:n.width,height:n.height},r={left:n.oldProperties.x,top:n.oldProperties.y,width:n.oldProperties.width,height:n.oldProperties.height},l=this.getAnnotationType(e.shapeAnnotationType,e.measureType);("Line"===l||"Arrow"===l||"Distance"===l||"Perimeter"===l)&&(t.lineHeadStartStyle=this.getArrowString(e.sourceDecoraterShapes),t.lineHeadEndStyle=this.getArrowString(e.taregetDecoraterShapes),t.borderDashArray=e.borderDashArray),this.pdfViewer.enableShapeLabel&&"HandWrittenSignature"!==e.shapeAnnotationType?this.pdfViewer.fireAnnotationResize(e.pageIndex,e.annotName,l,o,t,null,null,null,{fontColor:e.fontColor,fontSize:e.fontSize,fontFamily:e.fontFamily,opacity:e.labelOpacity,labelContent:e.labelContent,fillColor:e.labelFillColor,notes:e.notes}):"HandWrittenSignature"===e.shapeAnnotationType||"SignatureText"===e.shapeAnnotationType||"SignatureImage"===e.shapeAnnotationType?this.pdfViewer.fireSignatureResize(e.pageIndex,e.signatureName,e.shapeAnnotationType,e.opacity,e.strokeColor,e.thickness,o,r):this.pdfViewer.fireAnnotationResize(e.pageIndex,e.annotName,l,o,t)},s.prototype.triggerAnnotationMove=function(e,t){var i={opacity:e.opacity,fillColor:e.fillColor,strokeColor:e.strokeColor,thickness:e.thickness,author:e.author,subject:e.subject,modifiedDate:e.modifiedDate},n=e.bounds,o={left:n.x,top:n.y,x:n.x,y:n.y,width:n.width,height:n.height},r={left:n.oldProperties.x?n.oldProperties.x:n.x,top:n.oldProperties.y?n.oldProperties.y:n.y,width:n.width,height:n.height},l=this.getAnnotationType(e.shapeAnnotationType,e.measureType);("Line"===l||"Arrow"===l||"Distance"===l||"Perimeter"===l)&&(i.lineHeadStartStyle=this.getArrowString(e.sourceDecoraterShapes),i.lineHeadEndStyle=this.getArrowString(e.taregetDecoraterShapes),i.borderDashArray=e.borderDashArray),"HandWrittenSignature"===e.shapeAnnotationType||"SignatureText"===e.shapeAnnotationType||"SignatureImage"===e.shapeAnnotationType?this.pdfViewer.fireSignatureMove(e.pageIndex,e.signatureName,e.shapeAnnotationType,e.opacity,e.strokeColor,e.thickness,r,o):t?this.pdfViewer.fireAnnotationMoving(e.pageIndex,e.annotName,l,i,r,o):this.pdfViewer.fireAnnotationMove(e.pageIndex,e.annotName,l,i,r,o)},s.prototype.annotationSelect=function(e,t,i,n,o,r){var l;"textMarkup"===i.shapeAnnotationType?l={type:"TextMarkup",subType:i.subject,opacity:i.opacity,color:i.color,textMarkupContent:i.textMarkupContent,textMarkupStartIndex:i.textMarkupStartIndex,textMarkupEndIndex:i.textMarkupEndIndex,customData:i.customData}:"StickyNotes"===i.shapeAnnotationType?l={type:"StickyNotes",opacity:i.opacity,customData:i.customData}:"Stamp"===i.shapeAnnotationType||"Image"===i.shapeAnnotationType?l={type:"Stamp",opacity:i.opacity,customData:i.customData}:"Ink"===i.shapeAnnotationType?l={type:"Ink",opacity:i.opacity,strokeColor:i.strokeColor,thickness:i.thickness,modifiedDate:i.modifiedDate,width:i.bounds.width,height:i.bounds.height,left:i.bounds.x,top:i.bounds.y,data:i.data,customData:i.customData}:"FreeText"===i.shapeAnnotationType?l={type:"FreeText",opacity:i.opacity,fillColor:i.fillColor,strokeColor:i.strokeColor,thickness:i.thickness,content:i.dynamicText,fontFamily:i.fontFamily,fontSize:i.fontSize,fontColor:i.fontColor,textAlign:i.textAlign,fontStyle:this.updateFreeTextFontStyle(i.font),customData:i.customData}:""===i.measureType?"Line"===i.shapeAnnotationType?l={type:"Shape",subType:"Line",opacity:i.opacity,fillColor:i.fillColor,strokeColor:i.strokeColor,thickness:i.thickness,borderDashArray:i.borderDashArray,lineHeadStartStyle:i.sourceDecoraterShapes,lineHeadEndStyle:i.taregetDecoraterShapes,customData:i.customData}:"Arrow"===i.shapeAnnotationType||"LineWidthArrowHead"===i.shapeAnnotationType?l={type:"Shape",subType:"Arrow",opacity:i.opacity,fillColor:i.fillColor,strokeColor:i.strokeColor,thickness:i.thickness,borderDashArray:i.borderDashArray,lineHeadStartStyle:i.sourceDecoraterShapes,lineHeadEndStyle:i.taregetDecoraterShapes,customData:i.customData}:"Rectangle"===i.shapeAnnotationType?l={type:"Shape",subType:"Rectangle",opacity:i.opacity,fillColor:i.fillColor,strokeColor:i.strokeColor,thickness:i.thickness,customData:i.customData}:"Circle"===i.shapeAnnotationType||"Ellipse"===i.shapeAnnotationType?l={type:"Shape",subType:"Circle",opacity:i.opacity,fillColor:i.fillColor,strokeColor:i.strokeColor,thickness:i.thickness,customData:i.customData}:"Polygon"===i.shapeAnnotationType&&(l={type:"Shape",subType:"Polygon",opacity:i.opacity,fillColor:i.fillColor,strokeColor:i.strokeColor,thickness:i.thickness,customData:i.customData}):""!==i.measureType&&("Distance"===i.measureType?l={type:"Measure",subType:"Distance",opacity:i.opacity,fillColor:i.fillColor,strokeColor:i.strokeColor,thickness:i.thickness,borderDashArray:i.borderDashArray,lineHeadStartStyle:i.sourceDecoraterShapes,lineHeadEndStyle:i.taregetDecoraterShapes,customData:i.customData}:"Perimeter"===i.measureType?l={type:"Measure",subType:"Perimeter",opacity:i.opacity,fillColor:i.fillColor,strokeColor:i.strokeColor,thickness:i.thickness,borderDashArray:i.borderDashArray,lineHeadStartStyle:i.sourceDecoraterShapes,lineHeadEndStyle:i.taregetDecoraterShapes,customData:i.customData}:"Area"===i.measureType?l={type:"Measure",subType:"Area",opacity:i.opacity,fillColor:i.fillColor,strokeColor:i.strokeColor,thickness:i.thickness,customData:i.customData}:"Radius"===i.measureType?l={type:"Measure",subType:"Radius",opacity:i.opacity,fillColor:i.fillColor,strokeColor:i.strokeColor,thickness:i.thickness,customData:i.customData}:"Volume"===i.measureType&&(l={type:"Measure",subType:"Volume",opacity:i.opacity,fillColor:i.fillColor,strokeColor:i.strokeColor,thickness:i.thickness,calibrate:i.calibrate,annotationId:i.annotName,customData:i.customData}));var d=[],h=this.getOverlappedAnnotations(i,t);if(h&&this.overlappedCollections){for(var p=[],f=0;f<h.length;f++)if("textMarkup"!==h[f].shapeAnnotationType&&this.overlappedCollections||r){for(var c=0;c<this.overlappedCollections.length;c++)if(h[f].annotName===this.overlappedCollections[c].annotName){p.push(h[f]);break}}else p.push(h[f]);h=p}if(this.pdfViewer.enableMultiLineOverlap)for(f=0;f<h.length;f++)if("textMarkup"===h[f].shapeAnnotationType){var u=!1;for(c=0;c<h[f].bounds.length;c++){var m=this.orderTextMarkupBounds(h[f].bounds[c]),g=this.textMarkupAnnotationModule.annotationClickPosition;g&&(g.x||g.y)?m.left<=g.x&&m.left+m.width>=g.x&&m.top<=g.y&&m.top+m.height>=g.y&&(u=!0):u=!0}u||h.splice(f,1)}if(h&&h.length>0)for(n=h,f=0;f<n.length;f++){var v=_(n[f]);v.annotationId=n[f].annotName,e===n[f].annotName&&i.measureType&&"Volume"===i.measureType&&(l.calibrate=n[f].calibrate),delete v.annotName,d.push(v)}else d=null;this.addFreeTextProperties(i,l);var y=i.annotationAddMode;if(o)("Stamp"===i.shapeAnnotationType||"Image"===i.shapeAnnotationType)&&this.pdfViewerBase.isNewStamp||this.pdfViewer.fireAnnotationDoubleClick(e,t,l);else if("Stamp"===i.shapeAnnotationType||"Image"===i.shapeAnnotationType)!this.pdfViewerBase.isNewStamp&&this.annotationSelected&&this.pdfViewer.fireAnnotationSelect(e,t,l,d||null,null,null,y);else{var b=this.textMarkupAnnotationModule,C=b&&b.multiPageCollectionList(i);C&&0===C.length&&(C=null),this.annotationSelected&&(d?this.pdfViewer.fireAnnotationSelect(e,t,l,d,C,r=!1,y):this.pdfViewer.fireAnnotationSelect(e,t,l,null,C,r=!0,y))}this.annotationSelected=!0},s.prototype.selectSignature=function(e,t,i){var n=i.bounds;this.pdfViewerBase.signatureAdded||this.pdfViewer.fireSignatureSelect(e,t,{bounds:{height:n.height,width:n.width,x:n.x,y:n.y},opacity:i.opacity,thickness:i.thickness,strokeColor:i.strokeColor})},s.prototype.editSignature=function(e){var t,i=(t=e.uniqueKey?this.pdfViewer.nameTable[e.uniqueKey]:this.pdfViewer.selectedItems.annotations[0]).pageIndex;if("HandWrittenSignature"===t.shapeAnnotationType||"SignatureText"===t.shapeAnnotationType||"SignatureImage"===t.shapeAnnotationType){var n=_(t),o=_(t);t.opacity!==e.opacity&&(o.opacity=e.opacity,this.pdfViewer.nodePropertyChange(t,{opacity:e.opacity}),this.pdfViewer.fireSignaturePropertiesChange(t.pageIndex,t.signatureName,t.shapeAnnotationType,!1,!0,!1,n.opacity,o.opacity),this.pdfViewer.annotation.addAction(t.pageIndex,null,t,"Shape Opacity","",n,o)),t.strokeColor!==e.strokeColor&&(o.strokeColor=e.strokeColor,this.pdfViewer.nodePropertyChange(t,{strokeColor:e.strokeColor}),this.pdfViewer.fireSignaturePropertiesChange(t.pageIndex,t.signatureName,t.shapeAnnotationType,!0,!1,!1,n.strokeColor,o.strokeColor),this.pdfViewer.annotation.addAction(t.pageIndex,null,t,"Shape Stroke","",n,o)),t.thickness!==e.thickness&&(o.thickness=e.thickness,this.pdfViewer.nodePropertyChange(t,{thickness:e.thickness}),this.pdfViewer.fireSignaturePropertiesChange(t.pageIndex,t.signatureName,t.shapeAnnotationType,!1,!1,!0,n.thickness,o.thickness),this.pdfViewer.annotation.addAction(t.pageIndex,null,t,"Shape Thickness","",n,o)),t.modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),this.pdfViewer.renderDrawing(),this.pdfViewerBase.signatureModule.modifySignatureCollection(null,i,t,!0)}},s.prototype.deletComment=function(e){e.parentElement.firstChild===e?this.deleteAnnotation():this.pdfViewer.annotationModule.stickyNotesAnnotationModule.modifyCommentDeleteProperty(e.parentElement,e)},s.prototype.addReplyComments=function(e,t,i){if("add"===i){var n=document.getElementById(e.annotName);this.pdfViewer.annotationModule.stickyNotesAnnotationModule.createCommentDiv(n);for(var o=0;o<t.length;o++)this.pdfViewer.annotationModule.stickyNotesAnnotationModule.saveCommentDiv(n,t[o])}else"next"===i&&(n=document.getElementById(e.annotationId),this.selectAnnotation(e),this.pdfViewer.annotationModule.stickyNotesAnnotationModule.saveCommentDiv(n,t))},s.prototype.editComments=function(e,t){document.getElementById(e).childNodes[1].ej2_instances[0].value=t},s.prototype.editAnnotation=function(e){var t,i,n,o,r=!1;if(this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation?(i=(t=this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation).annotName,o=this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage):this.pdfViewer.selectedItems.annotations[0]&&(i=(t=this.pdfViewer.selectedItems.annotations[0]).annotName,o=t.pageIndex),void 0!==e.uniqueKey){if((t=this.pdfViewer.nameTable[e.uniqueKey]).annotationSettings.isLock=e.annotationSettings.isLock,i=t.annotName,o=t.pageIndex,(0,a.xr)()&&e.allowedInteractions)for(var l=e.allowedInteractions.length,d=0;d<l;d++)0===e.allowedInteractions[d]&&(e.allowedInteractions[d]=Li.Select),1===e.allowedInteractions[d]&&(e.allowedInteractions[d]=Li.Move),2===e.allowedInteractions[d]&&(e.allowedInteractions[d]=Li.Resize),3===e.allowedInteractions[d]&&(e.allowedInteractions[d]=Li.Delete),4===e.allowedInteractions[d]&&(e.allowedInteractions[d]=Li.PropertyChange),5===e.allowedInteractions[d]&&(e.allowedInteractions[d]=Li.None);t.allowedInteractions=e.allowedInteractions?e.allowedInteractions:this.updateAnnotationAllowedInteractions(e)}if(t||"sticky"===e.shapeAnnotationType&&void 0!==e.annotationId&&((t=this.pdfViewer.nameTable[e.annotationId]).annotationSettings.isLock=e.annotationSettings.isLock,i=t.annotName,o=t.pageIndex),"textMarkup"===e.shapeAnnotationType&&!this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation)for(t=this.pdfViewer.annotationModule.textMarkupAnnotationModule.getAnnotations(e.pageNumber,e),d=0;d<t.length;d++)if(e.annotationId===t[d].annotName){r=!0,(t=t[d]).isPrint=e.isPrint,this.textMarkupAnnotationModule.currentTextMarkupAnnotation=t,this.textMarkupAnnotationModule.selectTextMarkupCurrentPage=t.pageNumber,t.allowedInteractions=e.allowedInteractions,o=t.pageNumber,i=e.annotationId;break}if(t){var h=_(t),p=_(t);if("textMarkup"===e.shapeAnnotationType&&(n="textMarkup"),e&&!0===e.isCommentLock&&(t.isCommentLock=e.isCommentLock),e.comments)for(var f=0;f<e.comments.length;f++)!0===e.comments[f].isLock&&(n?(t.comments=e.comments,t.comments[f].isLock=e.comments[f].isLock):(t.properties.comments=e.comments,t.properties.comments[f].isLock=e.comments[f].isLock));if(e&&""!==e.note&&void 0!==e.note?n?(t.note=e.note,this.pdfViewer.annotationModule.stickyNotesAnnotationModule.addTextToComments(t.annotName,t.note)):(t.notes=e.note,this.pdfViewer.annotationModule.stickyNotesAnnotationModule.addTextToComments(t.annotName,t.notes)):e&&e.isCommentLock&&(e.type&&"FreeText"!==e.type||"FreeText"!==e.shapeAnnotationType)&&this.pdfViewer.annotationModule.stickyNotesAnnotationModule.addTextToComments(t.annotName,"  "),e.commentId&&e.editComment&&"edit"===e.commentType&&this.editComments(e.commentId,e.editComment),e.replyComment&&"add"===e.commentType&&(this.addReplyComments(t,e.replyComment,e.commentType),this.pdfViewer.annotationCollection[0].note=e.note),e.nextComment&&"next"===e.commentType&&this.addReplyComments(e,e.nextComment,e.commentType),""===e.note&&"delete"===e.commentType){var c=document.getElementById(e.annotationId);this.deletComment(c)}if(e.comments)for(var u=0;u<e.comments.length;u++)""===e.comments[u].note&&"delete"===e.commentType&&(c=document.getElementById(e.comments[u].annotName),this.deletComment(c));if("TextMarkup"===e.type||"textMarkup"===e.shapeAnnotationType){if(t.annotationSettings&&e.annotationSettings&&t.annotationSettings.isLock!==e.annotationSettings.isLock){var m=this.textMarkupAnnotationModule.modifyAnnotationProperty("AnnotationSettings",e.annotationSettings.isLock,null);this.textMarkupAnnotationModule.manageAnnotations(m,this.textMarkupAnnotationModule.selectTextMarkupCurrentPage)}t.opacity!==e.opacity&&this.pdfViewer.annotationModule.textMarkupAnnotationModule.modifyOpacityProperty(null,e.opacity),t.color!==e.color&&this.pdfViewer.annotationModule.textMarkupAnnotationModule.modifyColorProperty(e.color),n="textMarkup",r&&(this.textMarkupAnnotationModule.currentTextMarkupAnnotation=null,this.textMarkupAnnotationModule.selectTextMarkupCurrentPage=null)}else if(e&&"image"===e.stampAnnotationType&&"stamp"===e.shapeAnnotationType&&e.stampAnnotationPath)n="stamp",t.data!==e.stampAnnotationPath&&(t.data=e.stampAnnotationPath,t.wrapper.children[0].imageSource=e.stampAnnotationPath),e.opacity&&t.opacity!==e.opacity&&this.annotationPropertyChange(t,e.opacity,"Shape Opacity",h,p),this.calculateAnnotationBounds(t,e);else if("StickyNotes"===e.type||"Stamp"===e.type||"sticky"===e.shapeAnnotationType||"stamp"===e.shapeAnnotationType)e.opacity&&t.opacity!==e.opacity&&this.annotationPropertyChange(t,e.opacity,"Shape Opacity",h,p),this.calculateAnnotationBounds(t,e),n="StickyNotes"===e.type||"sticky"===e.shapeAnnotationType?"sticky":"stamp";else if("Ink"===e.type||"Shape"===e.type||"Measure"===e.type||"Line"===e.shapeAnnotationType||"Square"===e.shapeAnnotationType||"Circle"===e.shapeAnnotationType||"Polygon"===e.shapeAnnotationType||"Polyline"===e.shapeAnnotationType||"Ink"===e.shapeAnnotationType){if(this.calculateAnnotationBounds(t,e),e.opacity&&t.opacity!==e.opacity&&this.annotationPropertyChange(t,e.opacity,"Shape Opacity",h,p),e.fillColor&&t.fillColor!==e.fillColor&&(p.fillColor=e.fillColor,e.labelSettings&&e.labelSettings.fillColor&&(e.labelSettings.fillColor=e.fillColor),this.pdfViewer.nodePropertyChange(t,{fillColor:e.fillColor}),this.triggerAnnotationPropChange(t,!0,!1,!1,!1),this.pdfViewer.annotation.addAction(t.pageIndex,null,t,"Shape Fill","",h,p)),e.strokeColor&&t.strokeColor!==e.strokeColor&&(p.strokeColor=e.strokeColor,this.pdfViewer.nodePropertyChange(t,{strokeColor:e.strokeColor}),this.triggerAnnotationPropChange(t,!1,!0,!1,!1),this.pdfViewer.annotation.addAction(t.pageIndex,null,t,"Shape Stroke","",h,p)),e.thickness&&t.thickness!==e.thickness&&(p.thickness=e.thickness,this.pdfViewer.nodePropertyChange(t,{thickness:e.thickness}),this.triggerAnnotationPropChange(t,!1,!1,!0,!1),this.pdfViewer.annotation.addAction(t.pageIndex,null,t,"Shape Thickness","",h,p)),t.author!==e.author&&(p.author=e.author,this.pdfViewer.nodePropertyChange(t,{author:e.author}),this.triggerAnnotationPropChange(t,!1,!0,!1,!1)),t.modifiedDate!==e.modifiedDate&&(p.modifiedDate=e.modifiedDate,this.pdfViewer.nodePropertyChange(t,{modifiedDate:e.modifiedDate})),t.subject!==e.subject&&(p.subject=e.subject,this.pdfViewer.nodePropertyChange(t,{subject:e.subject}),this.triggerAnnotationPropChange(t,!1,!0,!1,!1),this.pdfViewer.annotation.addAction(t.pageIndex,null,t,"Shape Stroke","",h,p)),this.pdfViewer.enableShapeLabel&&t.fontColor!==e.fontColor&&(p.fontColor=e.fontColor,this.pdfViewer.nodePropertyChange(t,{fontColor:e.fontColor})),this.pdfViewer.enableShapeLabel&&e.labelSettings&&e.labelSettings.fillColor&&t.labelFillColor!==e.labelSettings.fillColor&&(p.labelFillColor=e.labelSettings.fillColor,this.pdfViewer.nodePropertyChange(t,{labelFillColor:e.labelSettings.fillColor})),("Line"===e.shapeAnnotationType||"Polyline"===e.shapeAnnotationType||"Polygon"===e.shapeAnnotationType)&&JSON.stringify(t.vertexPoints)!==JSON.stringify(e.vertexPoints)&&(t.vertexPoints=e.vertexPoints,this.pdfViewer.nodePropertyChange(t,{vertexPoints:e.vertexPoints})),"Line"===e.subType||"Arrow"===e.subType||"Distance"===e.subType||"Perimeter"===e.subType){var g=!1,v=!1,y=!1;h.lineHeadStart=t.sourceDecoraterShapes,h.lineHeadEnd=t.taregetDecoraterShapes,p.lineHeadStart=e.lineHeadStartStyle,p.lineHeadEnd=e.lineHeadEndStyle,p.borderDashArray=e.borderDashArray,t.taregetDecoraterShapes!==e.lineHeadEndStyle&&(v=!0),t.sourceDecoraterShapes!==e.lineHeadStartStyle&&(g=!0),t.borderDashArray!==e.borderDashArray&&(y=!0),this.pdfViewer.nodePropertyChange(t,{sourceDecoraterShapes:e.lineHeadStartStyle,taregetDecoraterShapes:e.lineHeadEndStyle,borderDashArray:e.borderDashArray}),this.triggerAnnotationPropChange(t,!1,!1,!1,!1,g,v,y),this.pdfViewer.annotation.addAction(t.pageIndex,null,t,"Line properties change","",h,p)}("Shape"===e.type||"Line"===e.shapeAnnotationType||"Square"===e.shapeAnnotationType||"Circle"===e.shapeAnnotationType||"Polygon"===e.shapeAnnotationType)&&(n="shape"),("Ink"===e.type||"Ink"===e.shapeAnnotationType)&&(n="ink"),("Measure"===e.type||"Distance calculation"===e.subject||"Perimeter calculation"===e.subject||"Radius calculation"===e.subject||"Area calculation"===e.subject||"Volume calculation"===e.subject)&&(n="shape_measure"),e.labelSettings&&this.pdfViewer.enableShapeLabel&&(this.updateFreeTextProperties(t),this.pdfViewer.nodePropertyChange(t,{labelOpacity:e.labelSettings.opacity,fontColor:e.labelSettings.fontColor,fontSize:e.labelSettings.fontSize,fontFamily:e.labelSettings.fontFamily,labelContent:t.notes,labelFillColor:e.labelSettings.fillColor})),this.pdfViewer.enableShapeLabel&&e.calibrate&&e.calibrate.depth&&this.pdfViewer.annotationModule.measureAnnotationModule.volumeDepth!==e.calibrate.depth&&(this.pdfViewer.annotationModule.measureAnnotationModule.volumeDepth=e.calibrate.depth,t.notes=this.pdfViewer.annotationModule.measureAnnotationModule.calculateVolume(t.vertexPoints,t.id,t.pageIndex),t.labelContent=t.notes,e.labelSettings&&e.labelSettings.labelContent&&(e.labelSettings.labelContent=t.notes),this.pdfViewer.nodePropertyChange(t,{labelContent:t.labelContent}),this.pdfViewer.annotationModule.stickyNotesAnnotationModule.addTextToComments(t.annotName,t.notes))}else if("FreeText"===e.type||"FreeText"===e.shapeAnnotationType){if(n="freetext",this.pdfViewer.freeTextSettings.enableAutoFit&&t.dynamicText!==e.content){var C=this.pdfViewerBase.getElement("_annotationCanvas_"+t.pageIndex).getContext("2d"),S=e.fontSize,V=e.fontFamily,T=this.pdfViewerBase.getZoomFactor();C.font=e.font.isBold?"bold "+S+"px "+V:S+"px "+V;var A="",M=[],I=e.content?e.content:e.dynamicText;if(I.indexOf("\n")>-1){M=I.split("\n");for(var B=0;B<M.length;B++){var N=C.measureText(M[B]),D=C.measureText(A);N.width>D.width&&(A=M[B])}}else A=I;var Z=C.measureText(A);e.bounds.width=Math.ceil(Z.width+18);var H=this.pdfViewerBase.getElement("_pageDiv_"+e.pageIndex).clientWidth-e.bounds.left*T;e.bounds.width>H&&(e.bounds.width=H/T);var $=e.bounds.height;e.bounds.height=$>=t.bounds.height?$:t.bounds.height}this.calculateAnnotationBounds(t,e),this.pdfViewer.nodePropertyChange(t,{opacity:e.opacity,fontColor:e.fontColor,fontSize:e.fontSize,fontFamily:e.fontFamily,dynamicText:e.content?e.content:e.dynamicText,fillColor:e.fillColor,textAlign:e.textAlign,strokeColor:e.strokeColor,thickness:e.thickness,font:this.setFreeTextFontStyle(e.fontStyle?e.fontStyle:e.font),isReadonly:e.isReadonly}),e.opacity&&t.opacity!==e.opacity&&this.triggerAnnotationPropChange(t,!1,!1,!1,!0),e.fillColor&&t.fillColor!==e.fillColor&&this.triggerAnnotationPropChange(t,!0,!1,!1,!1),e.strokeColor&&t.strokeColor!==e.strokeColor&&this.triggerAnnotationPropChange(t,!1,!0,!1,!1),e.thickness&&t.thickness!==e.thickness&&this.triggerAnnotationPropChange(t,!1,!1,!0,!1),e.content&&this.pdfViewer.selectedItems.annotations[0]&&this.updateAnnotationComments(this.pdfViewer.selectedItems.annotations[0].annotName,e.content);var me=document.getElementById(this.pdfViewer.element.id+"_commenttextbox_editor");new go({value:e.content}).appendTo(me)}t.modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),t.customData!==e.customData&&(t.customData=e.customData),t.isPrint=e.isPrint,"TextMarkup"!==e.type&&(this.pdfViewer.renderDrawing(),this.updateCollection(i,o,e,n))}},s.prototype.annotationPropertyChange=function(e,t,i,n,o){this.pdfViewer.nodePropertyChange(e,{opacity:t}),this.triggerAnnotationPropChange(e,!1,!1,!1,!0),this.pdfViewer.annotation.addAction(e.pageIndex,null,e,i,"",n,o)},s.prototype.calculateAnnotationBounds=function(e,t){var i=this.pdfViewerBase.convertBounds(e.wrapper.bounds),n=this.pdfViewerBase.convertBounds(t.bounds);i&&n&&(JSON.stringify(i)!==JSON.stringify(n)&&Math.abs(i.Y-n.Y)>2||Math.abs(i.X-n.X)>2||Math.abs(i.Width-n.Width)>2||Math.abs(i.Height-n.Height)>2)&&(this.pdfViewer.nodePropertyChange(e,{bounds:{x:n.X+n.Width/2,y:n.Y+n.Height/2,width:n.Width,height:n.Height}}),this.pdfViewer.clearSelection(this.pdfViewerBase.activeElements.activePageID),this.triggerAnnotationPropChange(e,!1,!1,!1,!1))},s.prototype.updateFreeTextProperties=function(e){e.labelSettings&&(e.labelSettings.fillColor&&(e.labelFillColor=e.labelSettings.fillColor),e.labelSettings.fontColor&&(e.fontColor=e.labelSettings.fontColor),e.labelSettings.fontSize&&(e.fontSize=e.labelSettings.fontSize),e.labelSettings.fontFamily&&(e.fontFamily=e.labelSettings.fontFamily),e.labelSettings.opacity&&(e.labelOpacity=e.labelSettings.opacity),e.labelSettings.labelContent&&(e.labelContent=e.labelSettings.labelContent))},s.prototype.updateAnnotationComments=function(e,t){var i=document.getElementById(e);i&&i.childNodes&&(i.childNodes[0].ej2_instances?i.childNodes[0].ej2_instances[0].value=t:i.childNodes[0].childNodes&&i.childNodes[0].childNodes[1].ej2_instances&&(i.childNodes[0].childNodes[1].ej2_instances[0].value=t))},s.prototype.addFreeTextProperties=function(e,t){this.pdfViewer.enableShapeLabel&&e&&t&&(t.labelSettings={fontColor:e.fontColor,fontSize:e.fontSize,fontFamily:e.fontFamily,opacity:e.labelOpacity,labelContent:e.labelContent,fillColor:e.labelFillColor})},s.prototype.updateMeasurementSettings=function(){this.pdfViewer.enableAnnotation&&this.pdfViewer.enableMeasureAnnotation&&this.measureAnnotationModule.updateMeasureValues("1 "+this.pdfViewer.measurementSettings.conversionUnit+" = "+this.pdfViewer.measurementSettings.scaleRatio+" "+this.pdfViewer.measurementSettings.displayUnit,this.pdfViewer.measurementSettings.displayUnit,this.pdfViewer.measurementSettings.conversionUnit,this.pdfViewer.measurementSettings.depth)},s.prototype.updateCollection=function(e,t,i,n){var o,r=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_"+n);if(this.pdfViewerBase.isStorageExceed&&(r=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_"+n]),r){var l=JSON.parse(r),d=this.getPageCollection(l,t);if(l[d]&&null!==(o=l[d].annotations)){for(var h=0;h<o.length;h++)if(o[h].annotName===e){var p=this.modifyAnnotationProperties(o[h],i,n);o[h]=p}this.pdfViewerBase.isStorageExceed||window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_"+n),l[d]&&(l[d].annotations=o);var f=JSON.stringify(l);this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_"+n]=f:window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_annotations_"+n,f)}}},s.prototype.modifyAnnotationProperties=function(e,t,i){if(t&&!0===t.isCommentLock&&(e.isCommentLock=t.isCommentLock),t.comments)for(var n=0;n<t.comments.length;n++)!0===t.comments[n].isLock&&(e.comments[n].isLock=t.comments[n].isLock);if(t&&""!==t.note&&void 0!==t.note&&(e.note=t.note),t.commentId&&t.editComment&&"edit"===t.commentType){var o=document.getElementById(t.commentId);for(t.annotationId===t.commentId&&(e.note=o.childNodes[1].ej2_instances[0].value),n=0;n<t.comments.length;n++)t.comments[n].annotName===t.commentId&&(e.comments[n].note=o.childNodes[1].ej2_instances[0].value)}if("textMarkup"===i)e.opacity=t.opacity,e.color=t.color,e.allowedInteractions=t.allowedInteractions;else if("sticky"===i||"stamp"===i)t.bounds&&(e.bounds=t.bounds),e.opacity=t.opacity,e.annotationSettings=t.annotationSettings,e.allowedInteractions=t.allowedInteractions,t.stampAnnotationPath&&(e.stampAnnotationPath=t.stampAnnotationPath);else if("ink"===i)t.bounds&&(e.bounds=t.bounds),e.opacity=t.opacity,e.strokeColor=t.strokeColor,e.thickness=t.thickness,e.annotationSettings=t.annotationSettings,e.allowedInteractions=t.allowedInteractions;else if("shape"===i||"shape_measure"===i){if("Line"===t.subType||"Arrow"===t.subType||"Distance"===t.subType||"Perimeter"===t.subType?(t.bounds&&(e.bounds=t.bounds),t.vertexPoint&&(e.vertexPoints=t.vertexPoints),e.opacity=t.opacity,e.fillColor=t.fillColor,e.strokeColor=t.strokeColor,e.thickness=t.thickness,e.borderDashArray=t.borderDashArray,e.lineHeadStart=this.getArrowTypeForCollection(t.lineHeadStartStyle),e.lineHeadEnd=this.getArrowTypeForCollection(t.lineHeadEndStyle),e.annotationSettings=t.annotationSettings,e.allowedInteractions=t.allowedInteractions):(t.bounds&&(e.bounds=t.bounds),t.vertexPoint&&(e.vertexPoints=t.vertexPoints),e.opacity=t.opacity,e.fillColor=t.fillColor,e.strokeColor=t.strokeColor,e.thickness=t.thickness,e.annotationSettings=t.annotationSettings,e.allowedInteractions=t.allowedInteractions,t.calibrate&&e.annotName===t.annotationId&&e.calibrate.depth!==t.calibrate.depth&&(e.calibrate.depth=t.calibrate.depth,this.pdfViewer.annotationModule.measureAnnotationModule.volumeDepth=t.calibrate.depth,e.note=this.pdfViewer.annotationModule.measureAnnotationModule.calculateVolume(e.vertexPoints))),this.pdfViewer.enableShapeLabel&&t.labelSettings){var r=t.labelSettings.labelContent;e.note=r,e.fontSize=t.labelSettings.fontSize,e.labelFillColor=t.labelSettings.fillColor,e.labelContent&&(e.labelContent=r),e.labelSettings&&(e.labelSettings=t.labelSettings),this.updateAnnotationComments(e.annotName,r)}}else"freetext"===i&&(t.bounds&&(e.bounds=t.bounds),e.opacity=t.opacity,e.strokeColor=t.strokeColor,e.thickness=t.thickness,t.content&&(e.dynamicText=t.content),e.fontFamily=t.fontFamily,e.fontSize=t.fontSize,e.fontColor=t.fontColor,e.fillColor=t.fillColor,e.font=t.font?t.font:t.fontStyle,e.textAlign=t.textAlign,e.annotationSettings=t.annotationSettings,e.allowedInteractions=t.allowedInteractions,e.isReadonly=t.isReadonly);return e.customData=t.customData,e.modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),e.isPrint=t.isPrint,t.annotationSettings&&!(0,a.le)(t.annotationSettings.isLock)&&(e.isLocked=t.annotationSettings.isLock),e},s.prototype.updateAnnotationAuthor=function(e,t){var i;return"sticky"===e?i="Guest"!==this.pdfViewer.stickyNotesSettings.author?this.pdfViewer.stickyNotesSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest":"stamp"===e?i="Guest"!==this.pdfViewer.stampSettings.author?this.pdfViewer.stampSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest":"shape"===e?"Line"===t?i="Guest"!==this.pdfViewer.lineSettings.author?this.pdfViewer.lineSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest":"LineWidthArrowHead"===t||"Arrow"===t?i="Guest"!==this.pdfViewer.arrowSettings.author?this.pdfViewer.arrowSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest":"Circle"===t||"Ellipse"===t||"Oval"===t?i="Guest"!==this.pdfViewer.circleSettings.author?this.pdfViewer.circleSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest":"Rectangle"===t||"Square"===t?i="Guest"!==this.pdfViewer.rectangleSettings.author?this.pdfViewer.rectangleSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest":"Polygon"===t&&(i="Guest"!==this.pdfViewer.polygonSettings.author?this.pdfViewer.polygonSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest"):"measure"===e?"Distance"===t||"Distance calculation"===t?i="Guest"!==this.pdfViewer.distanceSettings.author?this.pdfViewer.distanceSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest":"Perimeter"===t||"Perimeter calculation"===t?i="Guest"!==this.pdfViewer.perimeterSettings.author?this.pdfViewer.perimeterSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest":"Radius"===t||"Radius calculation"===t?i="Guest"!==this.pdfViewer.radiusSettings.author?this.pdfViewer.radiusSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest":"Area"===t||"Area calculation"===t?i="Guest"!==this.pdfViewer.areaSettings.author?this.pdfViewer.areaSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest":("Volume"===t||"Volume calculation"===t)&&(i="Guest"!==this.pdfViewer.volumeSettings.author?this.pdfViewer.volumeSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest"):"textMarkup"===e?i="Highlight"===t?"Guest"!==this.pdfViewer.highlightSettings.author?this.pdfViewer.highlightSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest":"Underline"===t?"Guest"!==this.pdfViewer.underlineSettings.author?this.pdfViewer.underlineSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest":"Strikethrough"===t?"Guest"!==this.pdfViewer.strikethroughSettings.author?this.pdfViewer.strikethroughSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest":this.pdfViewer.annotationSettings.author:"freeText"===e?i="Guest"!==this.pdfViewer.freeTextSettings.author?this.pdfViewer.freeTextSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest":"ink"===e&&(i="Guest"!==this.pdfViewer.inkAnnotationSettings.author?this.pdfViewer.inkAnnotationSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest"),i||(i=this.pdfViewer.annotationSettings.author),i},s.prototype.nameToHash=function(e){var t={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",yellow:"#ffff00",yellowgreen:"#9acd32",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkred:"#8b0000",darksalmon:"#e9967a",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",indigo:"#4b0082",ivory:"#fffff0",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",pink:"#ffc0cb",plum:"#dda0dd",steelblue:"#4682b4",violet:"#ee82ee",powderblue:"#b0e0e6",purple:"#800080",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0"};return void 0!==t[e.toLowerCase()]?t[e.toLowerCase()]:""},s.prototype.updateFreeTextFontStyle=function(e){return 1===e.isBold?1:2===e.isItalic?2:4===e.isUnderline?4:e.isStrikeout?8:{isBold:e.isBold,isItalic:e.isItalic,isUnderline:e.isUnderline,isStrikeout:e.isUnderline}},s.prototype.setFreeTextFontStyle=function(e){return 1===e?{isBold:!0}:2===e?{isItalic:!0}:4===e?{isUnderline:!0}:8===e?{isStrikeout:!0}:{isBold:e.isBold,isItalic:e.isItalic,isUnderline:e.isUnderline,isStrikeout:e.isUnderline}},s.prototype.findAnnotationSettings=function(e,t){var i=this.pdfViewer.annotationSettings;if(e){var n=e.shapeAnnotationType;"StickyNotes"===n&&this.pdfViewer.stickyNotesSettings?i=this.pdfViewer.stickyNotesSettings:"Stamp"===n||"Image"===n?(i=this.pdfViewer.stampSettings,("image"===n||"Image"===n)&&(i=this.pdfViewer.customStampSettings)):"FreeText"===n?i=this.pdfViewer.freeTextSettings:""===e.measureType?"Line"===n?i=this.pdfViewer.lineSettings:"Arrow"===n||"LineWidthArrowHead"===n?i=this.pdfViewer.arrowSettings:"Rectangle"===n?i=this.pdfViewer.rectangleSettings:"Circle"===n||"Ellipse"===n?i=this.pdfViewer.circleSettings:"Polygon"===n&&this.pdfViewer.polygonSettings&&(i=this.pdfViewer.polygonSettings):""!==e.measureType&&("Distance"===e.measureType?i=this.pdfViewer.distanceSettings:"Perimeter"===e.measureType?i=this.pdfViewer.perimeterSettings:"Area"===e.measureType?i=this.pdfViewer.areaSettings:"Radius"===e.measureType?i=this.pdfViewer.radiusSettings:"Volume"===e.measureType&&(i=this.pdfViewer.volumeSettings))}var o=e?e.annotationSettings:{};return o&&(o.minWidth||o.maxWidth||o.minHeight||o.maxHeight)?this.updateSettings(o):t?this.updateSettings(i):i},s.prototype.updateAnnotationSettings=function(e){var t=this.pdfViewer.annotationSettings;return"sticky"===e.AnnotType?t=this.pdfViewer.stickyNotesSettings:"stamp"===e.AnnotType||"image"===e.AnnotType||"Image"===e.AnnotType?(t=this.pdfViewer.stampSettings,("image"===e.Subject||"Image"===e.Subject)&&(t=this.pdfViewer.customStampSettings)):"freeText"===e.AnnotType?t=this.pdfViewer.freeTextSettings:"shape"===e.AnnotType?"Line"===e.Subject?t=this.pdfViewer.lineSettings:"Arrow"===e.Subject||"LineWidthArrowHead"===e.Subject?t=this.pdfViewer.arrowSettings:"Rectangle"===e.Subject||"Square"===e.Subject?t=this.pdfViewer.rectangleSettings:"Circle"===e.Subject||"Ellipse"===e.Subject||"Oval"===e.Subject?t=this.pdfViewer.circleSettings:"Polygon"===e.Subject&&(t=this.pdfViewer.polygonSettings):"shape_measure"===e.AnnotType&&("Distance"===e.Subject||"Distance calculation"===e.Subject?t=this.pdfViewer.distanceSettings:"Perimeter"===e.Subject||"Perimeter calculation"===e.Subject?t=this.pdfViewer.perimeterSettings:"Area"===e.Subject||"Area calculation"===e.Subject?t=this.pdfViewer.areaSettings:"Radius"===e.Subject||"Radius calculation"===e.Subject?t=this.pdfViewer.radiusSettings:("Volume"===e.Subject||"Volume calculation"===e.Subject)&&(t=this.pdfViewer.volumeSettings)),this.updateSettings(t)},s.prototype.updateSettings=function(e){var t=0,i=0,n=0,o=0,d=this.pdfViewer.annotationSettings;return e.minWidth||e.maxWidth||e.minHeight||e.maxHeight?(t=e.maxHeight?e.maxHeight:2e3,i=e.maxWidth?e.maxWidth:2e3,n=e.minHeight?e.minHeight:0,o=e.minWidth?e.minWidth:0):(d.minWidth||d.maxWidth||d.minHeight||d.maxHeight)&&(t=d.maxHeight?d.maxHeight:2e3,i=d.maxWidth?d.maxWidth:2e3,n=d.minHeight?d.minHeight:0,o=d.minWidth?d.minWidth:0),{minWidth:o,maxWidth:i,minHeight:n,maxHeight:t,isLock:e.isLock?e.isLock:!!d.isLock&&d.isLock,isPrint:e.isPrint}},s.prototype.getOverlappedAnnotations=function(e,t){for(var n,i=this.getPageShapeAnnotations(t),o=0;o<i.length;o++)if(e.annotName===i[o].annotName){n=i[o];break}return this.findOverlappedAnnotations(n,i)},s.prototype.getPageShapeAnnotations=function(e){var t=[],i=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_ink");if(i){var n=JSON.parse(i);if(n&&n[o=this.getPageCollection(n,e)]){var r=n[o].annotations;if(r&&r.length>0)for(var l=0;l<r.length;l++)t.push(r[l])}}var d=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_shape");if(d){var h=JSON.parse(d);if(h&&h[o=this.getPageCollection(h,e)]){var p=h[o].annotations;if(p&&p.length>0)for(l=0;l<p.length;l++)t.push(p[l])}}var f=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_shape_measure");if(f){var c=JSON.parse(f);if(c&&c[o=this.getPageCollection(c,e)]){var u=c[o].annotations;if(u&&u.length>0)for(l=0;l<u.length;l++)t.push(u[l])}}var m=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_stamp");if(m){var g=JSON.parse(m);if(g&&g[o=this.getPageCollection(g,e)]){var v=g[o].annotations;if(v&&v.length>0)for(l=0;l<v.length;l++)t.push(v[l])}}var y=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_freetext");if(y){var b=JSON.parse(y);if(b&&b[o=this.getPageCollection(b,e)]){var C=b[o].annotations;if(C&&C.length>0)for(l=0;l<C.length;l++)t.push(C[l])}}var S=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_sticky");if(S){var x=JSON.parse(S);if(x&&x[o=this.getPageCollection(x,e)]){var V=x[o].annotations;if(V&&V.length>0)for(l=0;l<V.length;l++)t.push(V[l])}}var T=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_textMarkup");if(T){var o,k=JSON.parse(T);if(k&&k[o=this.getPageCollection(k,e)]){var A=k[o].annotations;if(A&&A.length>0)for(l=0;l<A.length;l++)t.push(A[l])}}return t},s.prototype.findOverlappedAnnotations=function(e,t){if(this.overlappedAnnotations=[],e&&e.bounds)if("textMarkup"===e.shapeAnnotationType)for(var i=0;i<e.bounds.length;i++){var n=this.orderTextMarkupBounds(e.bounds[i]);this.calculateOverlappedAnnotationBounds(e,n,t)}else this.calculateOverlappedAnnotationBounds(e,e.bounds,t);return this.overlappedAnnotations},s.prototype.calculateOverlappedAnnotationBounds=function(e,t,i){var n=t;"Ink"===e.shapeAnnotationType&&(n={left:t.x,top:t.y,height:t.height,width:t.width});for(var o=parseInt(n.left),r=parseInt(n.top),l=parseInt(n.top+n.height),d=parseInt(n.left+n.width),h=0;h<i.length;h++)if(e.annotName===i[h].annotName)this.checkOverlappedCollections(i[h],this.overlappedAnnotations);else{var p=1;"textMarkup"===i[h].shapeAnnotationType&&(p=i[h].bounds.length);for(var f=0;f<p;f++){var c,u=i[h].bounds;if("Ink"===i[h].shapeAnnotationType&&(u={left:u.x,top:u.y,height:u.height,width:u.width}),c="textMarkup"!==i[h].shapeAnnotationType&&1===p?u:this.orderTextMarkupBounds(u[f])){var m=!1;(o<=parseInt(c.left)&&d>=parseInt(c.left)||o<=parseInt(c.left+c.width)&&d>=parseInt(c.left+c.width))&&(m=!0),m&&(m=r<=parseInt(c.top)&&l>=parseInt(c.top)||r<=parseInt(c.top+c.height)&&l>=parseInt(c.top+c.height)),m?this.checkOverlappedCollections(i[h],this.overlappedAnnotations):((parseInt(c.left)<=o&&parseInt(c.left+c.width)>=o||d>=parseInt(c.left)&&d<=parseInt(c.left+c.width))&&(m=!0),m&&(m=parseInt(c.top)<=r&&parseInt(c.top+c.height)>=r||l>=parseInt(c.top)&&l<=parseInt(c.top+c.height)),m?this.checkOverlappedCollections(i[h],this.overlappedAnnotations):((o<=parseInt(c.left)&&d>=parseInt(c.left)||o<=parseInt(c.left+c.width)&&d>=parseInt(c.left+c.width))&&(m=!0),m&&(m=parseInt(c.top)<=r&&parseInt(c.top+c.height)>=r||l>=parseInt(c.top)&&l<=parseInt(c.top+c.height)),m?this.checkOverlappedCollections(i[h],this.overlappedAnnotations):((parseInt(c.left)<=o&&parseInt(c.left+c.width)>=o||d>=parseInt(c.left)&&d<=parseInt(c.left+c.width))&&(m=!0),m&&(m=r<=parseInt(c.top)&&l>=parseInt(c.top)||r<=parseInt(c.top+c.height)&&l>=parseInt(c.top+c.height)),m&&this.checkOverlappedCollections(i[h],this.overlappedAnnotations))))}}}},s.prototype.findAnnotationMode=function(e,t,i){var n=this.pdfViewer.viewerBase.importedAnnotation[t];if(n){var o=void 0;if("shape"===i?o=n.shapeAnnotation:"shape_measure"===i?o=n.measureShapeAnnotation:"freeText"===i?o=n.freeTextAnnotation:"stamp"===i?o=n.stampAnnotations:"sticky"===i?o=n.stickyNotesAnnotation:"textMarkup"===i&&(o=n.textMarkupAnnotation),o)for(var r=0;r<o.length;r++)if(o[r].AnnotName===e.AnnotName)return"Imported Annotation"}return"Existing Annotation"},s.prototype.checkOverlappedCollections=function(e,t){if(t.length>0){for(var i=!1,n=0;n<t.length;n++)if(e.annotName===t[n].annotName&&e.bounds===t[n].bounds){i=!0;break}i||t.push(e)}else t.push(e)},s.prototype.orderTextMarkupBounds=function(e){return e.Left||e.Width?{left:e.Left,top:e.Top,height:e.Height,width:e.Width}:{left:e.left,top:e.top,height:e.height,width:e.width}},s.prototype.updateModifiedDate=function(e){if(e.modifiedDate&&(e.modifiedDate=this.setAnnotationModifiedDate(e.modifiedDate)),e.comments&&e.comments.length>0)for(var t=0;t<e.comments.length;t++)e.comments[t].modifiedDate&&(e.comments[t].modifiedDate=this.setAnnotationModifiedDate(e.comments[t].modifiedDate),e.comments[t].review&&e.comments[t].review.modifiedDate&&(e.comments[t].review.modifiedDate=this.setAnnotationModifiedDate(e.comments[t].review.modifiedDate)));e.review&&e.review.modifiedDate&&(e.review.modifiedDate=this.setAnnotationModifiedDate(e.review.modifiedDate))},s.prototype.setAnnotationModifiedDate=function(e){var t;if(""===e)return e;var n=parseInt(e.split(" ")[1].split(":")[0]);t=3===e.split(" ").length?n+":"+e.split(" ")[1].split(":")[1]+":"+e.split(" ")[1].split(":")[2]+" "+e.split(" ")[2]:n>=12?12===n?n+":"+e.split(" ")[1].split(":")[1]+":"+e.split(" ")[1].split(":")[2]+" PM":n-12+":"+e.split(" ")[1].split(":")[1]+":"+e.split(" ")[1].split(":")[2]+" PM":n+":"+e.split(" ")[1].split(":")[1]+":"+e.split(" ")[1].split(":")[2]+" AM";var o=e.split(" ")[0];return e.split(",").length>1?o+" "+t:o+", "+t},s.prototype.clear=function(){this.shapeAnnotationModule&&(this.shapeAnnotationModule.shapeCount=0),this.measureAnnotationModule&&(this.measureAnnotationModule.measureShapeCount=0),this.textMarkupAnnotationModule&&this.textMarkupAnnotationModule.clear(),this.stickyNotesAnnotationModule&&this.stickyNotesAnnotationModule.clear(),this.pdfViewer.refresh(),this.undoCommentsElement=[],this.redoCommentsElement=[],this.overlappedAnnotations=[],this.previousIndex=null,this.pdfViewer.annotation&&this.pdfViewer.annotation.stampAnnotationModule&&(this.pdfViewer.annotation.stampAnnotationModule.stampPageNumber=[]),this.pdfViewer.annotation&&this.pdfViewer.annotation.freeTextAnnotationModule&&(this.pdfViewer.annotation.freeTextAnnotationModule.freeTextPageNumbers=[],this.freeTextAnnotationModule.previousText="Type Here"),this.pdfViewer.annotation&&this.pdfViewer.annotation.inkAnnotationModule&&(this.pdfViewer.annotation.inkAnnotationModule.inkAnnotationindex=[]),window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_shape"),window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_shape_measure"),window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_stamp"),window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_sticky")},s.prototype.retrieveAnnotationCollection=function(){return this.pdfViewer.annotationCollection},s.prototype.checkAllowedInteractions=function(e,t){var i=this.updateAnnotationAllowedInteractions(t);if(i&&i.length>0)for(var n=0;n<i.length;n++)if("Select"===e){if("Move"===i[n]||"Resize"===i[n]||"Delete"===i[n]||"PropertyChange"===i[n]||"Select"===i[n])return!0}else if(i[n]===e)return!0;return!1},s.prototype.checkContextMenuDeleteItem=function(e){var t=this.findCurrentAnnotation();t&&t.annotationSettings&&(t.annotationSettings.isLock?this.checkAllowedInteractions("Delete",t)?e.enableItems([this.pdfViewer.localeObj.getConstant("Delete Context")],!0):e.enableItems([this.pdfViewer.localeObj.getConstant("Delete Context")],!1):e.enableItems([this.pdfViewer.localeObj.getConstant("Delete Context")],!0))},s.prototype.isEnableDelete=function(){var e=this.findCurrentAnnotation();return!(!e||!e.annotationSettings||e.annotationSettings.isLock&&!this.checkAllowedInteractions("Delete",e))},s.prototype.findCurrentAnnotation=function(){return this.textMarkupAnnotationModule&&this.textMarkupAnnotationModule.currentTextMarkupAnnotation?this.textMarkupAnnotationModule.currentTextMarkupAnnotation:this.pdfViewer.selectedItems.annotations&&this.pdfViewer.selectedItems.annotations[0]?this.pdfViewer.selectedItems.annotations[0]:void 0},s.prototype.updateAnnotationAllowedInteractions=function(e){var t=["None"];return e&&("FreeText"===e.shapeAnnotationType&&this.pdfViewer.freeTextSettings.allowedInteractions?t=this.checkAllowedInteractionSettings(this.pdfViewer.freeTextSettings.allowedInteractions,e.allowedInteractions):"Ink"===e.shapeAnnotationType&&this.pdfViewer.inkAnnotationSettings.allowedInteractions?t=this.checkAllowedInteractionSettings(this.pdfViewer.inkAnnotationSettings.allowedInteractions,e.allowedInteractions):"StickyNotes"===e.shapeAnnotationType&&this.pdfViewer.stickyNotesSettings.allowedInteractions?t=this.checkAllowedInteractionSettings(this.pdfViewer.stickyNotesSettings.allowedInteractions,e.allowedInteractions):"Stamp"===e.shapeAnnotationType&&this.pdfViewer.stampSettings.allowedInteractions?t=this.checkAllowedInteractionSettings(this.pdfViewer.stampSettings.allowedInteractions,e.allowedInteractions):"Image"===e.shapeAnnotationType&&this.pdfViewer.customStampSettings.allowedInteractions?t=this.checkAllowedInteractionSettings(this.pdfViewer.customStampSettings.allowedInteractions,e.allowedInteractions):"textMarkup"===e.shapeAnnotationType?"Highlight"===e.textMarkupAnnotationType&&this.pdfViewer.highlightSettings.allowedInteractions?t=this.checkAllowedInteractionSettings(this.pdfViewer.highlightSettings.allowedInteractions,e.allowedInteractions):"Underline"===e.textMarkupAnnotationType&&this.pdfViewer.underlineSettings.allowedInteractions?t=this.checkAllowedInteractionSettings(this.pdfViewer.underlineSettings.allowedInteractions,e.allowedInteractions):"Strikethrough"===e.textMarkupAnnotationType&&this.pdfViewer.strikethroughSettings.allowedInteractions&&(t=this.checkAllowedInteractionSettings(this.pdfViewer.strikethroughSettings.allowedInteractions,e.allowedInteractions)):""!==e.measureType?"Distance"===e.measureType&&this.pdfViewer.distanceSettings.allowedInteractions?t=this.checkAllowedInteractionSettings(this.pdfViewer.distanceSettings.allowedInteractions,e.allowedInteractions):"Perimeter"===e.measureType&&this.pdfViewer.perimeterSettings.allowedInteractions?t=this.checkAllowedInteractionSettings(this.pdfViewer.perimeterSettings.allowedInteractions,e.allowedInteractions):"Radius"===e.measureType&&this.pdfViewer.radiusSettings.allowedInteractions?t=this.checkAllowedInteractionSettings(this.pdfViewer.radiusSettings.allowedInteractions,e.allowedInteractions):"Area"===e.measureType&&this.pdfViewer.areaSettings.allowedInteractions?t=this.checkAllowedInteractionSettings(this.pdfViewer.areaSettings.allowedInteractions,e.allowedInteractions):"Volume"===e.measureType&&this.pdfViewer.volumeSettings.allowedInteractions&&(t=this.checkAllowedInteractionSettings(this.pdfViewer.volumeSettings.allowedInteractions,e.allowedInteractions)):"Line"===e.shapeAnnotationType&&this.pdfViewer.lineSettings.allowedInteractions?t=this.checkAllowedInteractionSettings(this.pdfViewer.lineSettings.allowedInteractions,e.allowedInteractions):"Arrow"!==e.shapeAnnotationType&&"LineWidthArrowHead"!==e.shapeAnnotationType||!this.pdfViewer.arrowSettings.allowedInteractions?"Circle"!==e.shapeAnnotationType&&"Ellipse"!==e.shapeAnnotationType&&"Oval"!==e.shapeAnnotationType||!this.pdfViewer.circleSettings.allowedInteractions?"Rectangle"!==e.shapeAnnotationType&&"Square"!==e.shapeAnnotationType||!this.pdfViewer.rectangleSettings.allowedInteractions?"Polygon"===e.shapeAnnotationType&&this.pdfViewer.polygonSettings.allowedInteractions&&(t=this.checkAllowedInteractionSettings(this.pdfViewer.polygonSettings.allowedInteractions,e.allowedInteractions)):t=this.checkAllowedInteractionSettings(this.pdfViewer.rectangleSettings.allowedInteractions,e.allowedInteractions):t=this.checkAllowedInteractionSettings(this.pdfViewer.circleSettings.allowedInteractions,e.allowedInteractions):t=this.checkAllowedInteractionSettings(this.pdfViewer.arrowSettings.allowedInteractions,e.allowedInteractions)),t},s.prototype.checkIsLockSettings=function(e){var t=!1;return e&&("FreeText"===e.shapeAnnotationType?t=this.checkLockSettings(this.pdfViewer.freeTextSettings.isLock):"Ink"===e.shapeAnnotationType?t=this.checkLockSettings(this.pdfViewer.inkAnnotationSettings.isLock):"StickyNotes"===e.shapeAnnotationType?t=this.checkLockSettings(this.pdfViewer.stickyNotesSettings.isLock):"Stamp"===e.shapeAnnotationType?t=this.checkLockSettings(this.pdfViewer.stampSettings.isLock):"Image"===e.shapeAnnotationType?t=this.checkLockSettings(this.pdfViewer.customStampSettings.isLock):"textMarkup"===e.shapeAnnotationType?"Highlight"===e.textMarkupAnnotationType?t=this.checkLockSettings(this.pdfViewer.highlightSettings.isLock):"Underline"===e.textMarkupAnnotationType?t=this.checkLockSettings(this.pdfViewer.underlineSettings.isLock):"Strikethrough"===e.textMarkupAnnotationType&&(t=this.checkLockSettings(this.pdfViewer.strikethroughSettings.isLock)):""!==e.measureType?"Distance"===e.measureType?t=this.checkLockSettings(this.pdfViewer.distanceSettings.isLock):"Perimeter"===e.measureType?t=this.checkLockSettings(this.pdfViewer.perimeterSettings.isLock):"Radius"===e.measureType?t=this.checkLockSettings(this.pdfViewer.radiusSettings.isLock):"Area"===e.measureType?t=this.checkLockSettings(this.pdfViewer.areaSettings.isLock):"Volume"===e.measureType&&(t=this.checkLockSettings(this.pdfViewer.volumeSettings.isLock)):"Line"===e.shapeAnnotationType?t=this.checkLockSettings(this.pdfViewer.lineSettings.isLock):"Arrow"===e.shapeAnnotationType||"LineWidthArrowHead"===e.shapeAnnotationType?t=this.checkLockSettings(this.pdfViewer.arrowSettings.isLock):"Circle"===e.shapeAnnotationType||"Ellipse"===e.shapeAnnotationType||"Oval"===e.shapeAnnotationType?t=this.checkLockSettings(this.pdfViewer.circleSettings.isLock):"Rectangle"===e.shapeAnnotationType||"Square"===e.shapeAnnotationType?t=this.checkLockSettings(this.pdfViewer.rectangleSettings.isLock):"Polygon"===e.shapeAnnotationType&&(t=this.checkLockSettings(this.pdfViewer.polygonSettings.isLock))),t},s.prototype.checkLockSettings=function(e){var t=!1;return(e||this.pdfViewer.annotationSettings.isLock)&&(t=!0),t},s.prototype.restrictContextMenu=function(){var e=!1,t=this.findCurrentAnnotation();return t&&this.checkIsLockSettings(t)&&this.checkAllowedInteractions("Select",t)&&(e=!0),e},s.prototype.checkAllowedInteractionSettings=function(e,t){if(t){if(1!==t.length)return t;if("None"!==t[0])return t}if(e){if(1!==e.length)return e;if("None"!==e[0])return e}return this.pdfViewer.annotationSettings.allowedInteractions?this.pdfViewer.annotationSettings.allowedInteractions:["None"]},s.prototype.getValue=function(e,t){if(t=t?t.toLowerCase():"hex","r"===e[0]){var i=this.convertRgbToNumberArray(e);if("hex"===t||"hexa"===t){var n=this.rgbToHex(i);return"hex"===t?n.slice(0,7):n}return"hsv"===t?this.convertToHsvString(this.rgbToHsv.apply(this,i.slice(0,3))):"hsva"===t?this.convertToHsvString(this.rgbToHsv.apply(this,i)):"null"}if("h"===e[0])return i=this.hsvToRgb.apply(this,this.convertRgbToNumberArray(e)),"rgba"===t?this.convertToRgbString(i):"hex"===t||"hexa"===t?(n=this.rgbToHex(i),"hex"===t?n.slice(0,7):n):"rgb"===t?this.convertToRgbString(i.slice(0,3)):"null";e=this.roundValue(e);var o=this.hexToRgb(e);return("rgb"===t||"hsv"===t)&&(o=o.slice(0,3)),"rgba"===t||"rgb"===t?this.convertToRgbString(o):"hsva"===t||"hsv"===t?this.convertToHsvString(this.rgbToHsv.apply(this,o)):"hex"===t?e.slice(0,7):"a"===t?o[3].toString():"null"},s.prototype.convertRgbToNumberArray=function(e){return e.slice(e.indexOf("(")+1,e.indexOf(")")).split(",").map(function(t,i){return 3!==i?parseInt(t,10):parseFloat(t)})},s.prototype.convertToRgbString=function(e){return e.length?4===e.length?"rgba("+e.join()+")":"rgb("+e.join()+")":""},s.prototype.convertToHsvString=function(e){return 4===e.length?"hsva("+e.join()+")":"hsv("+e.join()+")"},s.prototype.roundValue=function(e){if(!e)return"";"#"!==e[0]&&(e="#"+e);var t=e.length;if(4===t&&(e+="f",t=5),5===t){for(var i="",n=1,o=e.length;n<o;n++)i+=e.charAt(n)+e.charAt(n);e="#"+i,t=9}return 7===t&&(e+="ff"),e},s.prototype.hexToRgb=function(e){if(!e)return[];9!==(e=e.trim()).length&&(e=this.roundValue(e));var t=Number((parseInt(e.slice(-2),16)/255).toFixed(2));e=e.slice(1,7);var i=parseInt(e,16),n=[];return n.push(i>>16&255),n.push(i>>8&255),n.push(255&i),n.push(t),n},s.prototype.rgbToHsv=function(e,t,i,n){e/=255,t/=255,i/=255;var l,d,o=Math.max(e,t,i),r=Math.min(e,t,i),h=o,p=o-r;if(d=0===o?0:p/o,o===r)l=0;else{switch(o){case e:l=(t-i)/p+(t<i?6:0);break;case t:l=(i-e)/p+2;break;case i:l=(e-t)/p+4}l/=6}var f=[Math.round(360*l),Math.round(1e3*d)/10,Math.round(1e3*h)/10];return(0,a.le)(n)||f.push(n),f},s.prototype.hsvToRgb=function(e,t,i,n){var o,r,l,d,h,p,f,c;if(i/=100,0==(t/=100))return o=r=l=i,[Math.round(255*o),Math.round(255*r),Math.round(255*l),n];switch(p=i*(1-t),f=i*(1-t*(h=(e/=60)-(d=Math.floor(e)))),c=i*(1-t*(1-h)),d){case 0:o=i,r=c,l=p;break;case 1:o=f,r=i,l=p;break;case 2:o=p,r=i,l=c;break;case 3:o=p,r=f,l=i;break;case 4:o=c,r=p,l=i;break;default:o=i,r=p,l=f}var u=[Math.round(255*o),Math.round(255*r),Math.round(255*l)];return(0,a.le)(n)||u.push(n),u},s.prototype.rgbToHex=function(e){return e.length?"#"+this.hex(e[0])+this.hex(e[1])+this.hex(e[2])+((0,a.le)(e[3])?"":0!==e[3]?(Math.round(255*e[3])+65536).toString(16).substr(-2):"00"):""},s.prototype.exportAnnotationsAsStream=function(e){var t=this;return this.pdfViewer.annotationModule&&this.pdfViewer.viewerBase.updateExportItem()?new Promise(function(n,o){t.pdfViewer.viewerBase.createRequestForExportAnnotations(!0,e,!0).then(function(r){n(r)})}):null},s.prototype.hex=function(e){return(0,a.le)(e)?"0":("0"+e.toString(16)).slice(-2)},s.prototype.cloneObject=function(e){return JSON.parse(JSON.stringify(e))},s.prototype.destroy=function(){this.destroyPropertiesWindow(),this.textMarkupAnnotationModule.clear()},s.prototype.getModuleName=function(){return"Annotation"},s.prototype.getVertexPointsXY=function(e){for(var t=[],i=0;i<e.length;i++)t[i]={X:e[i].x,Y:e[i].y};return t},s.prototype.addAnnotation=function(e,t,i,n,o){var r={x:1,y:1},l=0;t&&t.pageNumber&&t.pageNumber>0&&(l=t.pageNumber?t.pageNumber-1:0);var d=null,h=[];this.pdfViewer.annotation.triggerAnnotationUnselectEvent(),"FreeText"==e?(h[l]=this.pdfViewer.annotation.freeTextAnnotationModule.updateAddAnnotationDetails(t,r),this.pdfViewer.annotation.freeTextAnnotationModule.isAddAnnotationProgramatically=!0):"StickyNotes"==e?(h[l]=this.pdfViewer.annotation.stickyNotesAnnotationModule.updateAddAnnotationDetails(t,r),this.pdfViewer.annotation.stickyNotesAnnotationModule.isAddAnnotationProgramatically=!0):"Highlight"==e||"Underline"==e||"Strikethrough"==e?(("Highlight"==e||"Underline"==e||"Strikethrough"==e)&&(d=t),h[l]=this.pdfViewer.annotation.textMarkupAnnotationModule.updateAddAnnotationDetails(e,d),this.pdfViewer.annotation.textMarkupAnnotationModule.isAddAnnotationProgramatically=!0):"Line"===e||"Arrow"===e||"Rectangle"===e||"Circle"===e||"Polygon"===e?(("Line"==e||"Arrow"==e||"Rectangle"==e||"Circle"==e||"Polygon"==e)&&(d=t),h[l]=this.pdfViewer.annotation.shapeAnnotationModule.updateAddAnnotationDetails(e,d,r),this.pdfViewer.annotation.shapeAnnotationModule.isAddAnnotationProgramatically=!0):"Distance"===e||"Perimeter"===e||"Area"===e||"Radius"===e||"Volume"===e?(("Distance"==e||"Perimeter"==e||"Area"==e||"Radius"==e||"Volume"==e)&&(d=t),h[l]=this.pdfViewer.annotation.measureAnnotationModule.updateAddAnnotationDetails(e,d,r),this.pdfViewer.annotation.measureAnnotationModule.isAddAnnotationProgramatically=!0):"Stamp"===e?(h[l]=this.pdfViewer.annotation.stampAnnotationModule.updateAddAnnotationDetails(t,r,l,i,n,o),this.pdfViewer.annotation.stampAnnotationModule.isAddAnnotationProgramatically=!0):"Ink"===e&&(h[l]=this.pdfViewer.annotation.inkAnnotationModule.updateAddAnnotationDetails(t,r,l),this.pdfViewer.annotation.inkAnnotationModule.isAddAnnotationProgramatically=!0);var p={pdfAnnotation:h};this.pdfViewerBase.isAddAnnotation=!0,this.pdfViewerBase.importAnnotations(p),this.pdfViewerBase.isAddAnnotation=!1},s.prototype.triggerAnnotationAddEvent=function(e){var t=e.shapeAnnotationType;if("Stamp"===t||"Image"===t||"Path"===t||"FreeText"===t||"StickyNotes"===t||"Ink"===t){var i;i="FreeText"===t?{opacity:e.opacity,borderColor:e.strokeColor,borderWidth:e.thickness,author:e.author,subject:e.subject,modifiedDate:e.modifiedDate,fillColor:e.fillColor,fontSize:e.fontSize,width:e.bounds.width,height:e.bounds.height,fontColor:e.fontColor,fontFamily:e.fontFamily,defaultText:e.dynamicText,fontStyle:e.font,textAlignment:e.textAlign}:{opacity:e.opacity,fillColor:e.fillColor,strokeColor:e.strokeColor,thickness:e.thickness,author:e.author,subject:e.subject,modifiedDate:e.modifiedDate,data:e.data};var n={left:e.bounds.x,top:e.bounds.y,width:e.bounds.width,height:e.bounds.height},o=this.getAnnotationType(e.shapeAnnotationType,e.measureType);this.pdfViewer.fireAnnotationAdd(e.pageIndex,e.annotName,o,n,i)}else if("SignatureText"===t||"SignatureImage"===t||"HandWrittenSignature"===t)this.pdfViewer.fireSignatureAdd(e.pageIndex,e.signatureName,e.shapeAnnotationType,n={left:e.bounds.x,top:e.bounds.y,width:e.bounds.width,height:e.bounds.height},e.opacity,e.strokeColor,e.thickness,e.data);else{var r={opacity:e.opacity,fillColor:e.fillColor,strokeColor:e.strokeColor,thickness:e.thickness,author:e.author,subject:e.subject,modifiedDate:e.modifiedDate};n={left:e.bounds.x,top:e.bounds.y,width:e.bounds.width,height:e.bounds.height},("Line"===(o=this.getAnnotationType(e.shapeAnnotationType,e.measureType))||"Arrow"===o||"Distance"===o||"Perimeter"===o)&&(r.lineHeadStartStyle=this.getArrowString(e.sourceDecoraterShapes),r.lineHeadEndStyle=this.getArrowString(e.taregetDecoraterShapes),r.borderDashArray=e.borderDashArray),this.pdfViewer.enableShapeLabel?this.pdfViewer.fireAnnotationAdd(e.pageIndex,e.annotName,o,n,r,null,null,null,{fontColor:e.fontColor,fontSize:e.fontSize,fontFamily:e.fontFamily,opacity:e.labelOpacity,labelContent:e.labelContent,fillColor:e.labelFillColor}):this.pdfViewer.fireAnnotationAdd(e.pageIndex,e.annotName,o,n,r)}},s.prototype.triggerAnnotationUnselectEvent=function(){if(this.pdfViewer.selectedItems.annotations&&this.pdfViewer.selectedItems.annotations[0]){var e=this.pdfViewer.selectedItems.annotations[0];"HandWrittenSignature"!==e.shapeAnnotationType&&"SignatureText"!==e.shapeAnnotationType&&"SignatureImage"!==e.shapeAnnotationType&&"Path"!==e.shapeAnnotationType&&(this.pdfViewer.fireAnnotationUnSelect(e.annotName,e.pageIndex,e),this.pdfViewer.clearSelection(e.pageIndex))}},s.prototype.updateFontFamilyRenderSize=function(e,t){var i=this.freeTextAnnotationModule;i.inputBoxElement.style.fontFamily=t,i.autoFitFreeText();var n=this.pdfViewerBase.getZoomFactor(),r=(parseFloat(i.inputBoxElement.style.paddingLeft),e.bounds.height*n),d=parseFloat(i.inputBoxElement.style.width)-8;d/=n;var h=(r/=n)-e.bounds.height,p=void 0;h>0?p=(p=e.wrapper.offsetY+h/2)>0?p:void 0:(h=Math.abs(h),p=(p=e.wrapper.offsetY-h/2)>0?p:void 0);var f=d-e.bounds.width,c=void 0;f>0?c=(c=e.wrapper.offsetX+f/2)>0?c:void 0:(f=Math.abs(f),c=e.wrapper.offsetX-f/2),e.bounds.width=d,e.bounds.height=r,this.pdfViewer.nodePropertyChange(e,{fontFamily:t,bounds:{width:e.bounds.width,height:e.bounds.height,y:p,x:c}}),this.pdfViewer.renderSelector(e.pageIndex,this.pdfViewer.annotationSelectorSettings),this.modifyInCollections(e,"bounds")},s.prototype.updateCanvas=function(e,t,i,n){var o=this.pdfViewerBase.getZoomRatio();e.width=t*o,e.height=i*o,e.style.width=t+"px",e.style.height=i+"px",e.style.position="absolute",e.style.zIndex="1",this.pdfViewerBase.applyElementStyles(e,n)},s}(),Ah=function(s,e,t,i){return new(t||(t=Promise))(function(n,o){function r(h){try{d(i.next(h))}catch(p){o(p)}}function l(h){try{d(i.throw(h))}catch(p){o(p)}}function d(h){h.done?n(h.value):new t(function(p){p(h.value)}).then(r,l)}d((i=i.apply(s,e||[])).next())})},Mh=function(s,e){var i,n,o,r,t={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(h){return function(p){return function(h){if(i)throw new TypeError("Generator is already executing.");for(;t;)try{if(i=1,n&&(o=2&h[0]?n.return:h[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,h[1])).done)return o;switch(n=0,o&&(h=[2&h[0],o.value]),h[0]){case 0:case 1:o=h;break;case 4:return t.label++,{value:h[1],done:!1};case 5:t.label++,n=h[1],h=[0];continue;case 7:h=t.ops.pop(),t.trys.pop();continue;default:if(!(o=(o=t.trys).length>0&&o[o.length-1])&&(6===h[0]||2===h[0])){t=0;continue}if(3===h[0]&&(!o||h[1]>o[0]&&h[1]<o[3])){t.label=h[1];break}if(6===h[0]&&t.label<o[1]){t.label=o[1],o=h;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(h);break}o[2]&&t.ops.pop(),t.trys.pop();continue}h=e.call(s,t)}catch(p){h=[6,p],n=0}finally{i=o=0}if(5&h[0])throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}([h,p])}}},Fb=function(){function s(e,t){this.pdfViewer=e,this.pdfViewerBase=t}return s.prototype.renderHyperlinkContent=function(e,t){if(this.pdfViewer.enableHyperlink){var i=e.hyperlinks,n=e.hyperlinkBounds;this.linkAnnotation=e.linkAnnotation,this.linkPage=e.linkPage,this.annotationY=e.annotationLocation,i&&i.length>0&&n.length>0&&this.renderWebLink(i,n,t),this.linkAnnotation&&this.linkAnnotation.length>0&&this.linkPage.length>0&&this.renderDocumentLink(this.linkAnnotation,this.linkPage,this.annotationY,t)}},s.prototype.disableHyperlinkNavigationUnderObjects=function(e,t,i){if(Ou(i,i.pdfViewer,t).length>0)t.target.classList.contains("e-pv-hyperlink")&&(e.style.cursor="move",e.style.pointerEvents="none",e.title="");else{var o=document.getElementsByClassName("e-pv-hyperlink");if(o&&o.length>0)for(var r=0;r<o.length;r++)"none"===o[r].style.pointerEvents&&(o[r].style.pointerEvents="all"),o[r].title||(o[r].title=o[r].href)}},s.prototype.renderWebLink=function(e,t,i){for(var n=this,o=this,r=!1,l=function(p){var f=(0,a.az)("a",{id:"weblinkdiv_"+p});(f=d.setHyperlinkProperties(f,t[p],i)).title=e[p],e[p]&&1===e[p].split("http").length?f.setAttribute("href","http://"+e[p]):f.setAttribute("href",e[p]),"CurrentTab"===d.pdfViewer.hyperlinkOpenState?(f.target="_self",f.onclick=function(g){return Ah(n,void 0,void 0,function(){var v;return Mh(this,function(y){switch(y.label){case 0:return r?[3,4]:(g.preventDefault(),o.pdfViewerBase.tool instanceof Ze||o.pdfViewerBase.tool instanceof Xt?[2,!1]:[3,1]);case 1:return[4,o.pdfViewer.fireHyperlinkClick(e[p],f)];case 2:return(v=y.sent())&&(r=!0,f.click()),[2,v];case 3:return[3,5];case 4:return r=!1,[2,!0];case 5:return[2]}})})},f.onmouseover=function(){o.triggerHyperlinkEvent(f)}):"NewTab"===d.pdfViewer.hyperlinkOpenState?(f.target="_blank",f.onclick=function(g){return Ah(n,void 0,void 0,function(){var v;return Mh(this,function(y){switch(y.label){case 0:return r?[3,4]:(g.preventDefault(),o.pdfViewerBase.tool instanceof Ze||o.pdfViewerBase.tool instanceof Xt?[2,!1]:[3,1]);case 1:return[4,o.pdfViewer.fireHyperlinkClick(e[p],f)];case 2:return(v=y.sent())&&(r=!0,f.click()),[2,v];case 3:return[3,5];case 4:return r=!1,[2,!0];case 5:return[2]}})})},f.onmouseover=function(){o.triggerHyperlinkEvent(f)}):"NewWindow"===d.pdfViewer.hyperlinkOpenState&&(f.onclick=function(g){return Ah(n,void 0,void 0,function(){return Mh(this,function(y){switch(y.label){case 0:return g.preventDefault(),o.pdfViewerBase.tool instanceof Ze||o.pdfViewerBase.tool instanceof Xt?[2,!1]:[3,1];case 1:return[4,o.pdfViewer.fireHyperlinkClick(e[p],f)];case 2:return y.sent()&&window.open(f.href,"_blank","scrollbars=yes,resizable=yes"),[2,!1]}})})},f.onmouseover=function(){o.triggerHyperlinkEvent(f)}),document.getElementById(d.pdfViewer.element.id+"_pageDiv_"+i).appendChild(f)},d=this,h=0;h<e.length;h++)l(h)},s.prototype.triggerHyperlinkEvent=function(e){return!(this.pdfViewerBase.tool instanceof Ze||this.pdfViewerBase.tool instanceof Xt||(this.pdfViewer.fireHyperlinkHover(e),0))},s.prototype.renderDocumentLink=function(e,t,i,n){for(var o=this,r=function(h){var p=(0,a.az)("a",{id:"linkdiv_"+h});if((p=l.setHyperlinkProperties(p,e[h],n)).setAttribute("href","javascript:void(0)"),void 0!==t[h]&&t[h]>0){var c=l.pdfViewerBase.pageSize[n].height,u=void 0,m=void 0,g=l.pdfViewerBase.pageSize[t[h]];g&&(0!==i.length?(u=i[h],m=g.top*l.pdfViewerBase.getZoomFactor()+(c-u)*l.pdfViewerBase.getZoomFactor()):m=g.top*l.pdfViewerBase.getZoomFactor()),void 0!==m&&(p.name=m.toString(),p.onclick=function(){return o.pdfViewerBase.tool instanceof Ze||o.pdfViewerBase.tool instanceof Xt||(o.pdfViewerBase.viewerContainer.scrollTop=parseInt(p.name)),!1}),document.getElementById(l.pdfViewer.element.id+"_pageDiv_"+n).appendChild(p)}},l=this,d=0;d<e.length;d++)r(d)},s.prototype.setHyperlinkProperties=function(e,t,i){return e.className="e-pv-hyperlink",e.style.background="transparent",e.style.position="absolute",e.style.left=t.Left*this.pdfViewerBase.getZoomFactor()+"px",e.style.top=t.Top*this.pdfViewerBase.getZoomFactor()+"px",e.style.width=t.Width*this.pdfViewerBase.getZoomFactor()+"px",t.Height<0?(e.style.height=-t.Height*this.pdfViewerBase.getZoomFactor()+"px",e.style.top=(t.Top+t.Height)*this.pdfViewerBase.getZoomFactor()+"px"):e.style.height=(t.Height<0?-t.Height:t.Height)*this.pdfViewerBase.getZoomFactor()+"px",e.style.color="transparent",this.pdfViewerBase.applyElementStyles(e,i),e},s.prototype.modifyZindexForTextSelection=function(e,t){if(this.pdfViewerBase.pageCount>0){var i=this.pdfViewerBase.getElement("_pageDiv_"+e);if(i)for(var n=i.childNodes,o=0;o<n.length;o++){var r=n[o];"A"===r.tagName&&(t?r.classList.add("e-pv-onselection"):r.classList.remove("e-pv-onselection"))}}},s.prototype.modifyZindexForHyperlink=function(e,t){t?e.classList.add("e-pv-onselection"):e.classList.remove("e-pv-onselection")},s.prototype.destroy=function(){for(var e=0;e<this.pdfViewerBase.pageCount-1;e++){var t=document.getElementById(this.pdfViewer.element.id+"_pageDiv_"+e);if(t){var i=t.getElementsByTagName("a");if(0!==i.length)for(var n=i.length-1;n>=0;n--)i[n].parentNode.removeChild(i[n])}}},s.prototype.getModuleName=function(){return"LinkAnnotation"},s}(),Lb=function(){function s(e,t){var i=this;this.currentTextMarkupAddMode="",this.selectTextMarkupCurrentPage=null,this.currentTextMarkupAnnotation=null,this.isAddAnnotationProgramatically=!1,this.currentAnnotationIndex=null,this.isAnnotationSelect=!1,this.isDropletClicked=!1,this.isRightDropletClicked=!1,this.isLeftDropletClicked=!1,this.isSelectionMaintained=!1,this.isExtended=!1,this.isNewAnnotation=!1,this.selectedTextMarkup=null,this.multiPageCollection=[],this.triggerAddEvent=!1,this.isSelectedAnnotation=!1,this.dropletHeight=20,this.annotationClickPosition={},this.maintainSelection=function(n){i.isDropletClicked=!0,i.pdfViewer.textSelectionModule.initiateSelectionByTouch(),i.isExtended=!0,i.pdfViewer.textSelectionModule.selectionRangeArray=[]},this.selectionEnd=function(n){i.isDropletClicked&&(i.isDropletClicked=!1)},this.annotationLeftMove=function(n){i.isDropletClicked&&(i.isLeftDropletClicked=!0)},this.annotationRightMove=function(n){i.isDropletClicked&&(i.isRightDropletClicked=!0)},this.pdfViewer=e,this.pdfViewerBase=t}return s.prototype.createAnnotationSelectElement=function(){this.dropDivAnnotationLeft=(0,a.az)("div",{id:this.pdfViewer.element.id+"_droplet_left",className:"e-pv-drop"}),this.dropDivAnnotationLeft.style.borderRight="2px solid",this.dropDivAnnotationRight=(0,a.az)("div",{id:this.pdfViewer.element.id+"_droplet_right",className:"e-pv-drop"}),this.dropDivAnnotationRight.style.borderLeft="2px solid",this.dropElementLeft=(0,a.az)("div",{className:"e-pv-droplet",id:this.pdfViewer.element.id+"_dropletspan_left"}),this.dropElementLeft.style.transform="rotate(0deg)",this.dropDivAnnotationLeft.appendChild(this.dropElementLeft),this.dropElementRight=(0,a.az)("div",{className:"e-pv-droplet",id:this.pdfViewer.element.id+"_dropletspan_right"}),this.dropElementRight.style.transform="rotate(-90deg)",this.dropDivAnnotationRight.appendChild(this.dropElementRight),this.pdfViewerBase.pageContainer.appendChild(this.dropDivAnnotationLeft),this.pdfViewerBase.pageContainer.appendChild(this.dropDivAnnotationRight),this.dropElementLeft.style.top="20px",this.dropElementRight.style.top="20px",this.dropElementRight.style.left="-8px",this.dropElementLeft.style.left="-8px",this.dropDivAnnotationLeft.style.display="none",this.dropDivAnnotationRight.style.display="none",this.dropDivAnnotationLeft.addEventListener("mousedown",this.maintainSelection),this.dropDivAnnotationLeft.addEventListener("mousemove",this.annotationLeftMove),this.dropDivAnnotationLeft.addEventListener("mouseup",this.selectionEnd),this.dropDivAnnotationRight.addEventListener("mousedown",this.maintainSelection),this.dropDivAnnotationRight.addEventListener("mousemove",this.annotationRightMove),this.dropDivAnnotationRight.addEventListener("mouseup",this.selectionEnd)},s.prototype.textSelect=function(e,t,i){if(this.isLeftDropletClicked){var n=this.dropDivAnnotationRight.getBoundingClientRect(),o=this.dropDivAnnotationLeft.getBoundingClientRect(),r=t,l=i;e.classList.contains("e-pv-text")&&(this.pdfViewer.textSelectionModule.textSelectionOnDrag(e,r,l,o.top-25>n.top),this.updateLeftposition(r,l))}else this.isRightDropletClicked&&(n=this.dropDivAnnotationLeft.getBoundingClientRect(),r=t,l=i,e.classList.contains("e-pv-text")&&(this.pdfViewer.textSelectionModule.textSelectionOnDrag(e,r,l,l>=n.top),this.updatePosition(r,l)))},s.prototype.showHideDropletDiv=function(e){var t=this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode;this.isEnableTextMarkupResizer(t)&&this.dropDivAnnotationLeft&&this.dropDivAnnotationRight&&(e?(this.dropDivAnnotationLeft.style.display="none",this.dropDivAnnotationRight.style.display="none"):(this.dropDivAnnotationLeft.style.display="",this.dropDivAnnotationRight.style.display="",this.updateDropletStyles(t)))},s.prototype.isEnableTextMarkupResizer=function(e){var t=!1;return e?("Highlight"===e&&this.pdfViewer.highlightSettings.enableTextMarkupResizer||"Underline"===e&&this.pdfViewer.underlineSettings.enableTextMarkupResizer||"Strikethrough"===e&&this.pdfViewer.strikethroughSettings.enableTextMarkupResizer||this.pdfViewer.enableTextMarkupResizer)&&(t=!0):(this.pdfViewer.enableTextMarkupResizer||this.pdfViewer.highlightSettings.enableTextMarkupResizer||this.pdfViewer.underlineSettings.enableTextMarkupResizer||this.pdfViewer.strikethroughSettings.enableTextMarkupResizer)&&(t=!0),t},s.prototype.updateDropletStyles=function(e){this.isEnableTextMarkupResizer(e)&&this.dropDivAnnotationLeft&&this.dropDivAnnotationLeft.offsetWidth>0&&(this.dropDivAnnotationLeft.style.width=this.dropletHeight*this.pdfViewerBase.getZoomFactor()+"px",this.dropDivAnnotationRight.style.width=this.dropletHeight*this.pdfViewerBase.getZoomFactor()+"px",this.dropElementLeft.style.width=this.dropletHeight*this.pdfViewerBase.getZoomFactor()+"px",this.dropElementRight.style.width=this.dropletHeight*this.pdfViewerBase.getZoomFactor()+"px",this.dropDivAnnotationLeft.style.height=this.dropletHeight*this.pdfViewerBase.getZoomFactor()+"px",this.dropDivAnnotationRight.style.height=this.dropletHeight*this.pdfViewerBase.getZoomFactor()+"px",this.dropElementLeft.style.height=this.dropletHeight*this.pdfViewerBase.getZoomFactor()+"px",this.dropElementRight.style.height=this.dropletHeight*this.pdfViewerBase.getZoomFactor()+"px",this.dropElementLeft.style.top=this.dropletHeight*this.pdfViewerBase.getZoomFactor()+"px",this.dropElementRight.style.top=this.dropletHeight*this.pdfViewerBase.getZoomFactor()+"px")},s.prototype.updateAnnotationBounds=function(){this.isSelectionMaintained=!1;var e=this.currentTextMarkupAnnotation;e&&e.isMultiSelect?(this.showHideDropletDiv(!0),this.updateMultiAnnotBounds(e)):e&&e.bounds&&(this.retreieveSelection(e,null),this.pdfViewer.textSelectionModule.maintainSelection(this.selectTextMarkupCurrentPage,!1),this.isSelectionMaintained=!0,window.getSelection().removeAllRanges())},s.prototype.updateMultiAnnotBounds=function(e){if(!e.annotpageNumbers&&(t=this.getAnnotations(e.pageNumber,null)))for(var i=0;i<t.length;i++)if(t[i].annotName===e.annotName){e=t[i];break}for(var n=e.annotpageNumbers[0],o=e.annotpageNumbers[0],r=0;r<e.annotpageNumbers.length;r++){var l=e.annotpageNumbers[r];l>=o&&(o=l),l<=n&&(n=l)}for(var d=n;d<=o;d++){var t;if(t=this.getAnnotations(d,null))for(var h=0;h<e.annotNameCollection.length;h++){var p=e.annotNameCollection[h];for(i=0;i<t.length;i++)if(t[i].annotName===p){var f=t[i];this.retreieveSelection(f,null),this.pdfViewer.textSelectionModule.maintainSelection(f.pageNumber,!1)}}}this.isSelectionMaintained=!0,window.getSelection().removeAllRanges()},s.prototype.retreieveSelection=function(e,t){for(var i=0;i<e.bounds.length;i++){var n=e.bounds[i],o=(n.left?n.left:n.Left)*this.pdfViewerBase.getZoomFactor(),r=(n.top?n.top:n.Top)*this.pdfViewerBase.getZoomFactor(),l=(n.width?n.width:n.Width)*this.pdfViewerBase.getZoomFactor(),h=this.pdfViewerBase.getElement("_textLayer_"+e.pageNumber);if(h){for(var p=h.childNodes,f=0;f<p.length;f++)if(p[f]){var c=p[f].getBoundingClientRect(),u=this.getClientValueTop(c.top,e.pageNumber),m=c.left-this.pdfViewerBase.getElement("_pageDiv_"+e.pageNumber).getBoundingClientRect().left,g=m+c.width,v=parseInt(p[f].style.left),y=parseInt(p[f].style.top),b=this.pdfViewer.textSelectionModule.checkLeftBounds(m,v,g,o),C=this.pdfViewer.textSelectionModule.checkTopBounds(u,y,r);if(b&&C){t=p[f];break}}if(null!=t){var S=this.pdfViewerBase.getElement("_textLayer_"+e.pageNumber).getBoundingClientRect();this.pdfViewer.textSelectionModule.textSelectionOnMouseMove(t,o+S.left,r+S.top,!1),e.bounds.length-1===i&&this.pdfViewer.textSelectionModule.textSelectionOnMouseMove(t,o+S.left+l,r+S.top,!1)}}}},s.prototype.updatePosition=function(e,t,i){this.showHideDropletDiv(!1);var n=this.pdfViewerBase.pageSize[this.pdfViewerBase.currentPageNumber-1].top,o=this.getClientValueTop(t,this.pdfViewerBase.currentPageNumber-1),r=document.getElementById(this.pdfViewer.element.id+"_droplet_right");r.style.top=i?o*this.pdfViewerBase.getZoomFactor()+n*this.pdfViewerBase.getZoomFactor()+"px":o+n*this.pdfViewerBase.getZoomFactor()+"px",r.style.left=e+this.pdfViewerBase.viewerContainer.scrollLeft-this.pdfViewerBase.viewerContainer.getBoundingClientRect().left+"px"},s.prototype.updateLeftposition=function(e,t,i){this.showHideDropletDiv(!1);var n=this.pdfViewerBase.pageSize[this.pdfViewerBase.currentPageNumber-1].top,o=this.getClientValueTop(t,this.pdfViewerBase.currentPageNumber-1),r=document.getElementById(this.pdfViewer.element.id+"_droplet_left");r.style.display="",r.style.top=i?o*this.pdfViewerBase.getZoomFactor()+n*this.pdfViewerBase.getZoomFactor()+"px":o+n*this.pdfViewerBase.getZoomFactor()+"px",r.style.left=e+this.pdfViewerBase.viewerContainer.scrollLeft-this.pdfViewerBase.viewerContainer.getBoundingClientRect().left-this.dropletHeight*this.pdfViewerBase.getZoomFactor()+"px"},s.prototype.getClientValueTop=function(e,t){return this.pdfViewerBase.getElement("_pageDiv_"+t)?e-this.pdfViewerBase.getElement("_pageDiv_"+t).getBoundingClientRect().top:e},s.prototype.renderTextMarkupAnnotationsInPage=function(e,t,i){var n=this.pdfViewerBase.getElement("_annotationCanvas_"+t);i?(this.renderTextMarkupAnnotations(null,t,n,this.pdfViewerBase.getZoomFactor()),this.renderTextMarkupAnnotations(e,t,n,this.pdfViewerBase.getZoomFactor(),!0)):this.renderTextMarkupAnnotations(e,t,n,this.pdfViewerBase.getZoomFactor())},s.prototype.renderTextMarkupAnnotations=function(e,t,i,n,o){if(i){var r=i.getContext("2d");r.setTransform(1,0,0,1,0,0),r.setLineDash([]);var l;if(l=o?e:this.getAnnotations(t,e))for(var d=0;d<l.length;d++){var h=l[d],p=null,f=void 0;if(h.TextMarkupAnnotationType){if(o&&this.pdfViewerBase.isJsonImported){for(var c=[],u=0;u<h.Bounds.length;u++)h.Bounds[u]=this.pdfViewerBase.importJsonForRotatedDocuments(h.Rotate,t,h.Bounds[u],h.AnnotationRotation),h.Bounds[u].left=h.Bounds[u].X,h.Bounds[u].top=h.Bounds[u].Y,c.push(h.Bounds[u]);h.Bounds=c,f=this.pdfViewerBase.isPageRotated}h.annotationAddMode=this.pdfViewer.annotationModule.findAnnotationMode(h,t,h.AnnotType),h.Author||(h.Author=this.pdfViewer.annotationModule.updateAnnotationAuthor("textMarkup",h.TextMarkupAnnotationType)),h.Subject||(h.Subject=h.TextMarkupAnnotationType),h.AnnotationSettings=h.AnnotationSettings&&h.AnnotationSettings.isLock?{isLock:h.AnnotationSettings.isLock}:this.getAnnotationSettings(h.TextMarkupAnnotationType);var m;m="Imported Annotation"===h.annotationAddMode?h.IsPrint:this.getIsPrintValue(h.TextMarkupAnnotationType),h.allowedInteractions=h.AllowedInteractions?h.AllowedInteractions:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(h),p={textMarkupAnnotationType:h.TextMarkupAnnotationType,color:h.Color,allowedInteractions:h.allowedInteractions,opacity:h.Opacity,bounds:h.Bounds,author:h.Author,subject:h.Subject,modifiedDate:h.ModifiedDate,note:h.Note,rect:h.Rect,annotName:h.AnnotName,comments:this.pdfViewer.annotationModule.getAnnotationComments(h.Comments,h,h.Author),review:{state:h.State,stateModel:h.StateModel,modifiedDate:h.ModifiedDate,author:h.Author},shapeAnnotationType:"textMarkup",pageNumber:t,textMarkupContent:h.TextMarkupContent,textMarkupStartIndex:0,textMarkupEndIndex:0,annotationSelectorSettings:this.getSettings(h),customData:this.pdfViewer.annotation.getCustomData(h),annotationAddMode:h.annotationAddMode,annotationSettings:h.AnnotationSettings,isPrint:m,isCommentLock:h.IsCommentLock,isAnnotationRotated:f,annotationRotation:h.AnnotationRotation},h.IsMultiSelect&&(p.annotNameCollection=h.AnnotNameCollection,p.annotpageNumbers=h.AnnotpageNumbers,p.isMultiSelect=h.IsMultiSelect),h.textMarkupContent&&""!==h.textMarkupContent&&(p.textMarkupContent=h.textMarkupContent,p.textMarkupStartIndex=h.textMarkupStartIndex,p.textMarkupEndIndex=h.textMarkupEndIndex),this.pdfViewer.annotationModule.storeAnnotations(t,p,"_annotations_textMarkup"),this.isAddAnnotationProgramatically&&this.pdfViewer.fireAnnotationAdd(p.pageNumber,p.annotName,h.TextMarkupAnnotationType,p.bounds,{opacity:p.opacity,author:h.author,subject:h.subject,modifiedDate:h.modifiedDate,width:p.bounds.width,height:p.bounds.height})}var y=h.Bounds?h.Bounds:h.bounds,b=h.Opacity?h.Opacity:h.opacity,C=h.Color?h.Color:h.color,S=h.AnnotationRotation?h.AnnotationRotation:h.annotationRotation,x=!0;switch(h.TextMarkupAnnotationType&&(x=h.IsPrint),h.textMarkupAnnotationType&&(x=h.isPrint),h.TextMarkupAnnotationType?h.TextMarkupAnnotationType:h.textMarkupAnnotationType){case"Highlight":this.renderHighlightAnnotation(y,b,C,r,n,x,t);break;case"Strikethrough":this.renderStrikeoutAnnotation(y,b,C,r,n,t,x,S);break;case"Underline":this.renderUnderlineAnnotation(y,b,C,r,n,t,x,S)}}var V=!1;if(this.currentTextMarkupAnnotation&&this.currentTextMarkupAnnotation.annotpageNumbers)for(var T=0;T<this.currentTextMarkupAnnotation.annotpageNumbers.length;T++)if(t===this.currentTextMarkupAnnotation.annotpageNumbers[T]){V=!0,this.isAnnotationSelect=!1;break}(t===this.selectTextMarkupCurrentPage||V)&&(this.isAnnotationSelect?this.isAnnotationSelect=!1:this.maintainAnnotationSelection())}},s.prototype.getSettings=function(e){return e.AnnotationSelectorSettings?e.AnnotationSelectorSettings:this.getSelector(e.TextMarkupAnnotationType)},s.prototype.drawTextMarkupAnnotations=function(e){this.isTextMarkupAnnotationMode=!0,this.currentTextMarkupAddMode=e;var t=!0;this.multiPageCollection=[];var i=this.pdfViewer.textSelectionModule?this.pdfViewer.textSelectionModule.selectionRangeArray:[];i.length>0&&!this.isSelectionMaintained&&this.convertSelectionToTextMarkup(e,i,this.pdfViewerBase.getZoomFactor());var o,n=window.getSelection();if(n&&n.anchorNode&&(o=n.anchorNode.parentElement),this.isEnableTextMarkupResizer(e)&&this.isExtended&&window.getSelection().toString()){if((r=this.getDrawnBounds())[0]&&r[0].bounds)for(var l=this.currentTextMarkupAnnotation,d=0;d<r.length;d++)if(l&&l.pageNumber===r[d].pageIndex)this.currentTextMarkupAnnotation=l,this.selectTextMarkupCurrentPage=r[d].pageIndex,this.updateTextMarkupAnnotationBounds(r,d);else if(l&&""===e&&(e=l.textMarkupAnnotationType),l.isMultiSelect)l.isMultiSelect&&l.annotNameCollection&&this.modifyCurrentAnnotation(l,r,d);else{var h=!1;this.isMultiAnnotation(e)&&(this.multiPageCollection.push(l),h=!0),this.drawTextMarkups(e,r[d].bounds,r[d].pageIndex,r[d].rect,this.pdfViewerBase.getZoomFactor(),r[d].textContent,r[d].startIndex,r[d].endIndex,h,o)}}else if(window.getSelection().toString()){var r=this.getDrawnBounds();if(h=this.isMultiPageAnnotations(r,e),r.length>0)for(var p=0;p<r.length;p++)""===e&&(t=!1),this.drawTextMarkups(e,r[p].bounds,r[p].pageIndex,r[p].rect,this.pdfViewerBase.getZoomFactor(),r[p].textContent,r[p].startIndex,r[p].endIndex,h,o)}if(this.multiPageCollection)for(var f=0;f<this.multiPageCollection.length;f++)this.updateAnnotationNames(this.multiPageCollection[f],this.multiPageCollection[f].pageNumber);this.isExtended=!1,this.isSelectionMaintained=!1,t&&this.pdfViewer.textSelectionModule&&this.pdfViewer.textSelectionModule.clearTextSelection(),this.isEnableTextMarkupResizer(e)&&this.updateAnnotationBounds()},s.prototype.isMultiPageAnnotations=function(e,t){for(var i=!1,n=0;n<e.length;n++)if(e[n].pageIndex!==e[0].pageIndex&&this.isMultiAnnotation(t)){i=!0;break}return i},s.prototype.isMultiAnnotation=function(e){var t=!1;return("Highlight"===e&&this.pdfViewer.highlightSettings.enableMultiPageAnnotation||"Underline"===e&&this.pdfViewer.underlineSettings.enableMultiPageAnnotation||"Strikethrough"===e&&this.pdfViewer.strikethroughSettings.enableMultiPageAnnotation||this.pdfViewer.enableMultiPageAnnotation)&&(t=!0),t},s.prototype.modifyCurrentAnnotation=function(e,t,i){for(var n=0;n<e.annotNameCollection.length;n++){var o=e.annotNameCollection[n],r=this.getAnnotations(t[i].pageIndex,null);if(r)for(var l=0;l<r.length;l++)if(r[l].annotName===o){this.currentTextMarkupAnnotation=r[l],this.selectTextMarkupCurrentPage=t[i].pageIndex,this.updateTextMarkupAnnotationBounds(t,i);break}}},s.prototype.drawAnnotationSelector=function(e,t,i){for(var n=0;n<e.bounds.length;n++){var o=e.bounds[n],r=o.left?o.left:o.Left,l=o.top?o.top:o.Top,d=o.width?o.width:o.Width,h=o.height?o.height:o.Height;i||(i=this.pdfViewerBase.getElement("_annotationCanvas_"+e.pageNumber)),this.drawAnnotationSelectRect(i,this.getMagnifiedValue(r-.5,this.pdfViewerBase.getZoomFactor()),this.getMagnifiedValue(l-.5,this.pdfViewerBase.getZoomFactor()),this.getMagnifiedValue(d+.5,this.pdfViewerBase.getZoomFactor()),this.getMagnifiedValue(h+.5,this.pdfViewerBase.getZoomFactor()),t)}},s.prototype.selectMultiPageAnnotations=function(e){for(var t=0;t<e.annotNameCollection.length;t++){var i=e.annotNameCollection[t];if(i!==e.annotName)for(var n=0;n<e.annotpageNumbers.length;n++){var r=this.getAnnotations(e.annotpageNumbers[n],null);if(r)for(var l=0;l<r.length;l++)r[l].annotName===i&&this.drawAnnotationSelector(r[l],e)}}},s.prototype.deletMultiPageAnnotation=function(e){for(var t=0;t<e.annotNameCollection.length;t++){var i=e.annotNameCollection[t];if(i!==e.annotName)for(var n=0;n<e.annotpageNumbers.length;n++){var o=e.annotpageNumbers[n],r=this.getAnnotations(o,null);if(r)for(var l=0;l<r.length;l++)if(r[l].annotName===i){var h,d=r[l];h=r.splice(l,1)[0],this.pdfViewer.annotationModule.addAction(o,l,h,"Text Markup Deleted",null),this.currentAnnotationIndex=l,this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(h,"textMarkup");var p=document.getElementById(h.annotName);p&&(1===p.parentElement.childElementCount?this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateAccordionContainer(p):p.remove()),this.pdfViewer.annotationModule.updateAnnotationCollection(d),this.manageAnnotations(r,o),this.pdfViewer.annotationModule.updateImportAnnotationCollection(d,d.pageNumber,"textMarkupAnnotation"),this.pdfViewer.annotationModule.renderAnnotations(o,null,null,null)}}}},s.prototype.modifyMultiPageAnnotations=function(e,t,i){for(var n=0;n<e.annotNameCollection.length;n++){var o=e.annotNameCollection[n];if(o!==e.annotName)for(var r=0;r<e.annotpageNumbers.length;r++){var l=e.annotpageNumbers[r],d=this.getAnnotations(l,null);if(d)for(var h=0;h<d.length;h++)d[h].annotName===o&&("Color"===t?d[h].color=i:d[h].opacity=i,d[h].modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),this.currentAnnotationIndex=h,(null===status||"changed"===status)&&this.pdfViewer.annotationModule.addAction(d[h].pageNumber,h,d[h],"Text Markup Property modified",t),this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateAnnotationModifiedDate(d[h]),this.manageAnnotations(d,l),this.pdfViewer.annotationModule.renderAnnotations(l,null,null,null))}}},s.prototype.convertSelectionToTextMarkup=function(e,t,i){var n=!1;this.triggerAddEvent=!1,this.multiPageCollection=[];for(var o=0;o<t.length;o++){var r=t[o].textContent,l=void 0;if(t[o].startNode===t[o].endNode){var d=document.getElementById(t[o].startNode).textContent;l=this.getIndexNumbers(t[o].pageNumber,r,d)}else l=this.getIndexNumbers(t[o].pageNumber,r);if(!n)for(var h=1;h<t.length;h++)if(t[h].pageNumber!==t[0].pageNumber&&this.isMultiAnnotation(e)){n=!0;break}this.isMultiAnnotation(e)&&t.length-1===o&&(this.triggerAddEvent=!0),this.drawTextMarkups(e,t[o].rectangleBounds,t[o].pageNumber,t[o].bound,i,r,l.startIndex,l.endIndex,n,document.getElementById(t[o].startNode))}},s.prototype.updateTextMarkupAnnotationBounds=function(e,t){if(this.currentTextMarkupAnnotation){var i=this.getAnnotations(e[t].pageIndex,null),n=null;if(i){for(var o=0;o<i.length;o++)JSON.stringify(this.currentTextMarkupAnnotation)===JSON.stringify(i[o])&&(i[o].bounds=e[t].bounds,i[o].textMarkupContent=e[t].textContent,i[o].textMarkupStartIndex=e[t].startIndex,i[o].textMarkupEndIndex=e[t].endIndex,i[o].modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),n=i[o]);if(this.manageAnnotations(i,e[t].pageIndex),this.currentTextMarkupAnnotation=null,this.pdfViewer.annotationModule.renderAnnotations(e[t].pageIndex,null,null,null),this.pdfViewerBase.updateDocumentEditedProperty(!0),n){var r={opacity:n.opacity,color:n.color,author:n.author,subject:n.subject,modifiedDate:n.modifiedDate},l=this.multiPageCollectionList(n);l.length>0?e.length-1===t&&this.pdfViewer.fireAnnotationResize(e[t].pageIndex,n.annotName,n.textMarkupAnnotationType,n.bounds,r,n.textMarkupContent,n.textMarkupStartIndex,n.textMarkupEndIndex,null,l):this.pdfViewer.fireAnnotationResize(e[t].pageIndex,n.annotName,n.textMarkupAnnotationType,n.bounds,r,n.textMarkupContent,n.textMarkupStartIndex,n.textMarkupEndIndex,null)}this.currentAnnotationIndex=null,this.selectTextMarkupCurrentPage=null}}},s.prototype.multiPageCollectionList=function(e){var t=[];if(e.isMultiSelect&&e.annotNameCollection){t.push(e);for(var i=0;i<e.annotNameCollection.length;i++){var n=e.annotNameCollection[i];if(n!==e.annotName)for(var o=0;o<e.annotpageNumbers.length;o++){var l=this.getAnnotations(e.annotpageNumbers[o],null);if(l)for(var d=0;d<l.length;d++)l[d].annotName===n&&t.push(l[d])}}}return t},s.prototype.updateAnnotationNames=function(e,t){if(e){var i=this.getAnnotations(t,null);if(i){for(var o=0;o<i.length;o++)if(e.annotName===i[o].annotName){for(var r=[],l=[],d=0;d<this.multiPageCollection.length;d++)r.push(this.multiPageCollection[d].annotName),l.push(this.multiPageCollection[d].pageNumber);i[o].isMultiSelect=!0,i[o].annotNameCollection=r,i[o].annotpageNumbers=l}this.manageAnnotations(i,t)}}},s.prototype.updateAnnotationContent=function(e,t){if(e){var i=this.getAnnotations(this.selectTextMarkupCurrentPage,null);if(i){for(var o=0;o<i.length;o++)JSON.stringify(this.currentTextMarkupAnnotation)===JSON.stringify(i[o])&&(i[o].textMarkupContent=t.textContent,i[o].textMarkupStartIndex=t.startIndex,i[o].textMarkupEndIndex=t.endIndex),this.pdfViewer.annotationModule.storeAnnotationCollections(i[o],this.selectTextMarkupCurrentPage);this.manageAnnotations(i,this.selectTextMarkupCurrentPage)}}},s.prototype.drawTextMarkups=function(e,t,i,n,o,r,l,d,h,p){var f=null;this.isNewAnnotation=!1;var u,c="Guest",m=this.getPageContext(i),g=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();this.highlightColor=this.highlightColor?this.highlightColor:this.pdfViewer.highlightSettings.color,this.underlineColor=this.underlineColor?this.underlineColor:this.pdfViewer.underlineSettings.color,this.strikethroughColor=this.strikethroughColor?this.strikethroughColor:this.pdfViewer.strikethroughSettings.color,this.highlightOpacity=this.pdfViewer.highlightSettings.opacity,this.underlineOpacity=this.pdfViewer.underlineSettings.opacity,this.strikethroughOpacity=this.pdfViewer.strikethroughSettings.opacity,this.annotationAddMode="UI Drawn Annotation";var v,b=0,C=this.getAngle(this.pdfViewerBase.pageSize[i].rotation);if(m){switch(m.setLineDash([]),e){case"Highlight":this.isNewAnnotation=!0,(f=this.getAddedAnnotation(e,this.highlightColor,this.highlightOpacity,t,c="Guest"!==this.pdfViewer.highlightSettings.author&&this.pdfViewer.highlightSettings.author?this.pdfViewer.highlightSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest",u="Highlight",g,"",!1,n,i,r,l,d,h,v=this.pdfViewer.highlightSettings.allowedInteractions?this.pdfViewer.highlightSettings.allowedInteractions:"None",b))&&this.renderHighlightAnnotation(f.bounds,f.opacity,f.color,m,o,f.isPrint,i);break;case"Strikethrough":this.isNewAnnotation=!0,u="Strikethrough",c="Guest"!==this.pdfViewer.strikethroughSettings.author&&this.pdfViewer.strikethroughSettings.author?this.pdfViewer.strikethroughSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest",v=this.pdfViewer.strikethroughSettings.allowedInteractions?this.pdfViewer.strikethroughSettings.allowedInteractions:"None",p&&""!==p.style.transform&&(b=p.style.transform.startsWith("rotate(90deg)")?Math.abs(C-90):p.style.transform.startsWith("rotate(180deg)")?Math.abs(C-180):p.style.transform.startsWith("rotate(-90deg)")?Math.abs(C-270):C),(f=this.getAddedAnnotation(e,this.strikethroughColor,this.strikethroughOpacity,t,c,u,g,"",!1,n,i,r,l,d,h,v,b))&&this.renderStrikeoutAnnotation(f.bounds,f.opacity,f.color,m,o,i,f.isPrint,f.annotationRotation);break;case"Underline":this.isNewAnnotation=!0,u="Underline",c="Guest"!==this.pdfViewer.underlineSettings.author&&this.pdfViewer.underlineSettings.author?this.pdfViewer.underlineSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest",v=this.pdfViewer.underlineSettings.allowedInteractions?this.pdfViewer.underlineSettings.allowedInteractions:"None",p&&""!==p.style.transform&&(b=p.style.transform.startsWith("rotate(90deg)")?Math.abs(C-90):p.style.transform.startsWith("rotate(180deg)")?Math.abs(C-180):p.style.transform.startsWith("rotate(-90deg)")?Math.abs(C-270):C),(f=this.getAddedAnnotation(e,this.underlineColor,this.underlineOpacity,t,c,u,g,"",!1,n,i,r,l,d,h,v,b))&&this.renderUnderlineAnnotation(f.bounds,f.opacity,f.color,m,o,i,f.isPrint,f.annotationRotation)}if(this.isNewAnnotation=!1,f){this.pdfViewerBase.updateDocumentEditedProperty(!0);var S={opacity:f.opacity,color:f.color,author:f.author,subject:f.subject,modifiedDate:f.modifiedDate};this.isMultiAnnotation(e)?this.triggerAddEvent&&this.pdfViewer.fireAnnotationAdd(i,f.annotName,e,f.bounds,S,r,l,d,null,this.multiPageCollection):this.pdfViewer.fireAnnotationAdd(i,f.annotName,e,f.bounds,S,r,l,d)}a.AR.isDevice&&!this.pdfViewer.enableDesktopMode&&this.pdfViewer.enableToolbar&&this.pdfViewer.enableAnnotationToolbar&&this.pdfViewer.toolbarModule.annotationToolbarModule.createPropertyTools(e)}},s.prototype.getAngle=function(e){var t=0;if(e)switch(e){case 0:t=0;break;case 1:t=90;break;case 2:t=180;break;case 3:t=270}return t},s.prototype.retreiveTextIndex=function(e){if(""===e.textMarkupContent){this.retreieveSelection(e,null);var t=this.getDrawnBounds();window.getSelection().removeAllRanges(),t[0]&&t[0].bounds&&(this.updateAnnotationContent(e,t[0]),e.textMarkupContent=t[0].textContent,e.textMarkupStartIndex=t[0].startIndex,e.textMarkupEndIndex=t[0].endIndex)}return e},s.prototype.renderHighlightAnnotation=function(e,t,i,n,o,r,l){for(var d=this.pdfViewerBase.getZoomRatio(o),h=0;h<e.length;h++){var p=e[h];n.beginPath();var f=p.X?p.X:p.left,c=p.Y?p.Y:p.top,u=p.Width?p.Width:p.width,m=p.Height?p.Height:p.height;f=f||p.x,c=c||p.y,m-=1,n.canvas.id===this.pdfViewer.element.id+"_print_annotation_layer_"+l?r&&(n.rect(f*d,c*d,u*d,m*d),n.globalAlpha=.5*t,n.closePath(),n.fillStyle=i,n.msFillRule="nonzero",n.fill()):(n.rect(f*d,c*d,u*d,m*d),n.globalAlpha=.5*t,n.closePath(),n.fillStyle=i,n.msFillRule="nonzero",n.fill())}n.save()},s.prototype.renderStrikeoutAnnotation=function(e,t,i,n,o,r,l,d){for(var h=0;h<e.length;h++){var p=this.getProperBounds(e[h]),f=this.pdfViewerBase.pageSize[r],c=this.pdfViewerBase.getZoomRatio(o),u=f.rotation;if(d){var m=this.getAngle(u);u=Math.abs(d-m)/90}n.canvas.id===this.pdfViewer.element.id+"_print_annotation_layer_"+r?l&&(1===u?this.drawLine(t,p.x+p.width/2,p.y,p.width,p.height,i,c,n,r,d):2===u?this.drawLine(t,p.x,p.y+p.height/2,p.width,p.height,i,c,n,r,d):3===u?this.drawLine(t,p.x,p.y,p.width/2,p.height,i,c,n,r,d):this.drawLine(t,p.x,p.y,p.width,p.height/2,i,c,n,r,d)):1===u?this.drawLine(t,p.x+p.width/2,p.y,p.width,p.height,i,c,n,r,d):2===u?this.drawLine(t,p.x,p.y+p.height/2,p.width,p.height,i,c,n,r,d):3===u?this.drawLine(t,p.x,p.y,p.width/2,p.height,i,c,n,r,d):this.drawLine(t,p.x,p.y,p.width,p.height/2,i,c,n,r,d)}},s.prototype.renderUnderlineAnnotation=function(e,t,i,n,o,r,l,d){for(var h=0;h<e.length;h++){var p=this.getProperBounds(e[h]),f=this.pdfViewerBase.getZoomRatio(o);n.canvas.id===this.pdfViewer.element.id+"_print_annotation_layer_"+r?l&&this.drawLine(t,p.x,p.y,p.width,p.height,i,f,n,r,d):this.drawLine(t,p.x,p.y,p.width,p.height,i,f,n,r,d)}},s.prototype.getProperBounds=function(e){var t=e.X?e.X:e.left,i=e.Y?e.Y:e.top;return{x:t=t||e.x,y:i=i||e.y,width:e.Width?e.Width:e.width,height:e.Height?e.Height:e.height}},s.prototype.drawLine=function(e,t,i,n,o,r,l,d,h,p){d.globalAlpha=e,(0,a.xr)()&&(i-=1),o-=1,d.beginPath();var c=this.pdfViewerBase.pageSize[h].rotation;if(p){var u=this.getAngle(c);c=Math.abs(p-u)/90}1===c?(d.moveTo(t*l,i*l),d.lineTo(t*l,(i+o)*l)):2===c?(d.moveTo(t*l,i*l),d.lineTo((n+t)*l,i*l)):3===c?(d.moveTo((n+t)*l,i*l),d.lineTo((n+t)*l,(i+o)*l)):(d.moveTo(t*l,(i+o)*l),d.lineTo((n+t)*l,(i+o)*l)),d.lineWidth=1,d.strokeStyle=r,d.closePath(),d.msFillRule="nonzero",d.stroke()},s.prototype.printTextMarkupAnnotations=function(e,t,i,n,o,r){var l=(0,a.az)("canvas",{id:this.pdfViewer.element.id+"_print_annotation_layer_"+t});l.style.width="816px",l.style.height="1056px";var d=this.pdfViewerBase.pageSize[t].width,h=this.pdfViewerBase.pageSize[t].height,p=this.pdfViewerBase.getZoomFactor(),f=this.pdfViewerBase.getZoomRatio(p);l.height=h*f,l.width=d*f;var c=this.getAnnotations(t,null,"_annotations_textMarkup"),u=this.getAnnotations(t,null,"_annotations_shape"),m=this.getAnnotations(t,null,"_annotations_shape_measure"),g=this.getAnnotations(t,null,"_annotations_stamp"),v=this.getAnnotations(t,null,"_annotations_sticky");g||u||v||m?this.pdfViewer.renderDrawing(l,t):(this.pdfViewer.annotation.renderAnnotations(t,n,o,null,l),this.pdfViewer.annotation.stampAnnotationModule.renderStampAnnotations(i,t,l),this.pdfViewer.annotation.stickyNotesAnnotationModule.renderStickyNotesAnnotations(r,t,l));var y=this.pdfViewerBase.getZoomFactor();return this.renderTextMarkupAnnotations(c?null:e,t,l,y),l.toDataURL()},s.prototype.saveTextMarkupAnnotations=function(){var e=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_textMarkup");this.pdfViewerBase.isStorageExceed&&(e=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_textMarkup"]);for(var t=new Array,i=0;i<this.pdfViewerBase.pageCount;i++)t[i]=[];if(e&&!this.pdfViewer.annotationSettings.skipDownload)for(var n=JSON.parse(e),o=0;o<n.length;o++){var r=[],l=n[o];if(l){for(var d=0;l.annotations.length>d;d++){if(this.pdfViewer.annotationModule.updateModifiedDate(l.annotations[d]),this.pdfViewerBase.isJsonExported)if(l.annotations[d].isAnnotationRotated)l.annotations[d].bounds=this.getBoundsForSave(l.annotations[d].bounds,o);else{var h=this.pdfViewerBase.pageSize[l.pageIndex];h&&(l.annotations[d].annotationRotation=h.rotation)}l.annotations[d].bounds=JSON.stringify(this.getBoundsForSave(l.annotations[d].bounds,o)),l.annotations[d].color=JSON.stringify(this.getRgbCode(l.annotations[d].color)),l.annotations[d].rect=JSON.stringify(l.annotations[d].rect)}r=l.annotations}t[l.pageIndex]=r}return JSON.stringify(t)},s.prototype.deleteTextMarkupAnnotation=function(){if(this.currentTextMarkupAnnotation){var e=!1;if(this.currentTextMarkupAnnotation.annotationSettings&&(e=this.currentTextMarkupAnnotation.annotationSettings.isLock,this.pdfViewer.annotationModule.checkAllowedInteractions("Delete",this.currentTextMarkupAnnotation)&&(e=!1)),!e){var t=null;this.showHideDropletDiv(!0);var i=this.currentTextMarkupAnnotation;this.currentTextMarkupAnnotation.isMultiSelect&&i.annotNameCollection&&this.deletMultiPageAnnotation(i);var n=this.getAnnotations(this.selectTextMarkupCurrentPage,null);if(n){for(var o=0;o<n.length;o++)if(this.currentTextMarkupAnnotation.annotName===n[o].annotName){t=n.splice(o,1)[0],this.pdfViewer.annotationModule.addAction(this.selectTextMarkupCurrentPage,o,t,"Text Markup Deleted",null),this.currentAnnotationIndex=o,this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(t,"textMarkup");var r=document.getElementById(t.annotName);r&&(1===r.parentElement.childElementCount?this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateAccordionContainer(r):r.remove())}this.pdfViewer.annotationModule.updateAnnotationCollection(this.currentTextMarkupAnnotation),this.manageAnnotations(n,this.selectTextMarkupCurrentPage),this.pdfViewer.annotationModule.updateImportAnnotationCollection(this.currentTextMarkupAnnotation,this.currentTextMarkupAnnotation.pageNumber,"textMarkupAnnotation");var l=this.currentTextMarkupAnnotation.annotName,d=this.currentTextMarkupAnnotation.bounds;this.currentTextMarkupAnnotation=null,this.pdfViewer.annotationModule.renderAnnotations(this.selectTextMarkupCurrentPage,null,null,null),this.pdfViewerBase.updateDocumentEditedProperty(!0);var h=this.multiPageCollectionList(i);h.length>0?(h.push(t),this.pdfViewer.fireAnnotationRemove(this.selectTextMarkupCurrentPage,l,t.textMarkupAnnotationType,d,t.textMarkupContent,t.textMarkupStartIndex,t.textMarkupEndIndex,h)):this.pdfViewer.fireAnnotationRemove(this.selectTextMarkupCurrentPage,l,t.textMarkupAnnotationType,d,t.textMarkupContent,t.textMarkupStartIndex,t.textMarkupEndIndex),this.currentAnnotationIndex=null,this.selectTextMarkupCurrentPage=null,a.AR.isDevice&&!this.pdfViewer.enableDesktopMode&&(this.pdfViewer.toolbarModule.annotationToolbarModule.hideMobileAnnotationToolbar(),this.pdfViewer.toolbarModule.showToolbar(!0))}}}},s.prototype.modifyColorProperty=function(e){if(this.currentTextMarkupAnnotation){var t=this.modifyAnnotationProperty("Color",e,null);this.manageAnnotations(t,this.selectTextMarkupCurrentPage),this.pdfViewer.annotationModule.renderAnnotations(this.selectTextMarkupCurrentPage,null,null,null),this.pdfViewerBase.updateDocumentEditedProperty(!0);var i=this.currentTextMarkupAnnotation,n=this.multiPageCollectionList(i);n.length>0?(this.pdfViewer.fireAnnotationPropertiesChange(this.selectTextMarkupCurrentPage,i.annotName,i.textMarkupAnnotationType,!0,!1,!1,!1,i.textMarkupContent,i.textMarkupStartIndex,i.textMarkupEndIndex,n),this.currentAnnotationIndex=null):(this.pdfViewer.fireAnnotationPropertiesChange(this.selectTextMarkupCurrentPage,i.annotName,i.textMarkupAnnotationType,!0,!1,!1,!1,i.textMarkupContent,i.textMarkupStartIndex,i.textMarkupEndIndex),this.currentAnnotationIndex=null)}},s.prototype.modifyOpacityProperty=function(e,t){if(this.currentTextMarkupAnnotation){var i;if((i=t?this.modifyAnnotationProperty("Opacity",t,"changed"):this.modifyAnnotationProperty("Opacity",e.value/100,e.name))&&(this.manageAnnotations(i,this.selectTextMarkupCurrentPage),this.pdfViewer.annotationModule.renderAnnotations(this.selectTextMarkupCurrentPage,null,null,null),t||"changed"===e.name)){this.pdfViewerBase.updateDocumentEditedProperty(!0);var n=this.currentTextMarkupAnnotation,o=this.multiPageCollectionList(n);o.length>0?(this.pdfViewer.fireAnnotationPropertiesChange(this.selectTextMarkupCurrentPage,n.annotName,n.textMarkupAnnotationType,!1,!0,!1,!1,n.textMarkupContent,n.textMarkupStartIndex,n.textMarkupEndIndex,o),this.currentAnnotationIndex=null):(this.pdfViewer.fireAnnotationPropertiesChange(this.selectTextMarkupCurrentPage,n.annotName,n.textMarkupAnnotationType,!1,!0,!1,!1,n.textMarkupContent,n.textMarkupStartIndex,n.textMarkupEndIndex),this.currentAnnotationIndex=null)}}},s.prototype.modifyAnnotationProperty=function(e,t,i,n){var o=this.currentTextMarkupAnnotation;o.isMultiSelect&&o.annotNameCollection&&this.modifyMultiPageAnnotations(o,e,t);var r=this.getAnnotations(this.selectTextMarkupCurrentPage,null);if(r)for(var l=0;l<r.length;l++)JSON.stringify(this.currentTextMarkupAnnotation)===JSON.stringify(r[l])&&("Color"===e?r[l].color=t:"Opacity"===e?r[l].opacity=t:"AnnotationSettings"===e&&(r[l].annotationSettings={isLock:t}),r[l].modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),this.currentAnnotationIndex=l,(null===i||"changed"===i)&&this.pdfViewer.annotationModule.addAction(this.selectTextMarkupCurrentPage,l,this.currentTextMarkupAnnotation,"Text Markup Property modified",e),this.currentTextMarkupAnnotation=r[l],this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateAnnotationModifiedDate(r[l]),this.pdfViewer.annotationModule.storeAnnotationCollections(r[l],this.selectTextMarkupCurrentPage));return r},s.prototype.undoTextMarkupAction=function(e,t,i,n){var o=this.getAnnotations(t,null);if(o)if("Text Markup Added"===n){this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(o[i],"textMarkup");var r=document.getElementById(o[i].annotName);r&&(1===r.parentElement.childElementCount?this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateAccordionContainer(r):r.parentElement.removeChild(r)),o.splice(i,1)}else"Text Markup Deleted"===n&&(this.pdfViewer.annotationModule.stickyNotesAnnotationModule.addAnnotationComments(t,e.shapeAnnotationType),o.splice(i,0,e));this.clearCurrentAnnotation(),this.pdfViewerBase.updateDocumentEditedProperty(!0),this.manageAnnotations(o,t),this.pdfViewer.annotationModule.renderAnnotations(t,null,null,null)},s.prototype.undoRedoPropertyChange=function(e,t,i,n,o){var r=this.getAnnotations(t,null);if(r){if("Color"===n){var l=r[i].color;r[i].color=e.color,e.color=l}else{var d=r[i].opacity;r[i].opacity=e.opacity,e.opacity=d}this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateAnnotationModifiedDate(e,null,!0),o&&(e.modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime())}return this.clearCurrentAnnotation(),this.pdfViewerBase.updateDocumentEditedProperty(!0),this.manageAnnotations(r,t),this.pdfViewer.annotationModule.renderAnnotations(t,null,null,null),e},s.prototype.redoTextMarkupAction=function(e,t,i,n){var o=this.getAnnotations(t,null);if(o)if("Text Markup Added"===n)this.pdfViewer.annotationModule.stickyNotesAnnotationModule.addAnnotationComments(t,e.shapeAnnotationType),o.push(e);else if("Text Markup Deleted"===n){this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(o[i],"textMarkup");var r=document.getElementById(o[i].annotName);r&&(1===r.parentElement.childElementCount?this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateAccordionContainer(r):r.remove()),o.splice(i,1)}this.clearCurrentAnnotation(),this.pdfViewerBase.updateDocumentEditedProperty(!0),this.manageAnnotations(o,t),this.pdfViewer.annotationModule.renderAnnotations(t,null,null,null)},s.prototype.saveNoteContent=function(e,t){var i=this.getAnnotations(e,null);if(i)for(var n=0;n<i.length;n++)JSON.stringify(this.currentTextMarkupAnnotation)===JSON.stringify(i[n])&&(i[n].note=t);this.manageAnnotations(i,e),this.pdfViewerBase.updateDocumentEditedProperty(!0)},s.prototype.clearCurrentAnnotation=function(){if(!this.isExtended){this.pdfViewer.isMaintainSelection&&!this.pdfViewer.textSelectionModule.isTextSelection?(this.selectTextMarkupCurrentPage=this.selectTextMarkupCurrentPage,this.currentTextMarkupAnnotation=this.currentTextMarkupAnnotation):(this.selectTextMarkupCurrentPage=null,this.currentTextMarkupAnnotation=null);var e=!1;this.pdfViewer.annotation.freeTextAnnotationModule&&this.pdfViewer.annotation.freeTextAnnotationModule.isInuptBoxInFocus&&(e=!0),e||this.enableAnnotationPropertiesTool(!1)}},s.prototype.clearCurrentAnnotationSelection=function(e,t){this.isAnnotationSelect=!!t;for(var n=e+2<this.pdfViewerBase.pageCount?e+2:this.pdfViewerBase.pageCount-1,o=e-2>=0?e-2:0;o<=n;o++)this.clearAnnotationSelection(o)},s.prototype.getBoundsForSave=function(e,t){for(var i=[],n=0;n<e.length;n++){var o=this.getAnnotationBounds(e[n],t);i.push(o)}return i},s.prototype.getAnnotationBounds=function(e,t){var i=e.left?e.left:e.Left,n=e.top?e.top:e.Top,o=e.height?e.height:e.Height,r=e.width?e.width:e.Width,l=this.pdfViewerBase.pageSize[t];return i=i||e.x,n=n||e.y,l?1===l.rotation?{left:n,top:l.width-(i+r),width:o,height:r}:2===l.rotation?{left:l.width-i-r,top:l.height-n-o,width:r,height:o}:3===l.rotation?{left:l.height-n-o,top:i,width:o,height:r}:{left:i,top:n,width:r,height:o}:{left:i,top:n,width:r,height:o}},s.prototype.getRgbCode=function(e){!e.match(/#([a-z0-9]+)/gi)&&!e.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/)&&(e=this.pdfViewer.annotationModule.nameToHash(e));var t=e.split(",");(0,a.le)(t[1])&&(t=(e=this.pdfViewer.annotationModule.getValue(e,"rgba")).split(","));var i=parseInt(t[0].split("(")[1]),n=parseInt(t[1]),o=parseInt(t[2]);return{a:parseInt(t[3]),r:i,g:n,b:o}},s.prototype.getDrawnBounds=function(){var e=[],t=window.getSelection();if(null!==t.anchorNode){var i=document.createRange(),n=this.pdfViewerBase.textLayer.isBackWardSelection(t);if(t.anchorNode===t.focusNode){var o=this.pdfViewerBase.textLayer.getPageIndex(t.anchorNode);if(!isNaN(o)){var d=this.pdfViewerBase.getElement("_pageDiv_"+o).getBoundingClientRect();this.pdfViewerBase.isMixedSizeDocument&&(d=this.pdfViewerBase.getElement("_textLayer_"+o).getBoundingClientRect()),n?(i.setStart(t.focusNode,t.focusOffset),i.setEnd(t.anchorNode,t.anchorOffset)):t.anchorOffset<t.focusOffset?(i.setStart(t.anchorNode,t.anchorOffset),i.setEnd(t.focusNode,t.focusOffset)):(i.setStart(t.focusNode,t.focusOffset),i.setEnd(t.anchorNode,t.anchorOffset));var h=i.getBoundingClientRect(),p=this.getIndexNumbers(o,i.toString(),i.commonAncestorContainer.textContent.toString()),f={left:this.getDefaultValue(h.left-d.left),top:this.getDefaultValue(h.top-d.top),width:this.getDefaultValue(h.width),height:this.getDefaultValue(h.height),right:this.getDefaultValue(h.right-d.left),bottom:this.getDefaultValue(h.bottom-d.top)},c=[];c.push(f),e.push({pageIndex:o,bounds:c,rect:{left:f.left,top:f.top,right:f.right,bottom:f.bottom},startIndex:p.startIndex,endIndex:p.endIndex,textContent:i.toString()})}}else{var m=void 0,g=void 0,v=void 0,y=void 0;n?(m=t.focusNode,v=t.focusOffset,g=t.anchorNode,y=t.anchorOffset):(m=t.anchorNode,v=t.anchorOffset,g=t.focusNode,y=t.focusOffset);for(var b=this.pdfViewerBase.textLayer.getPageIndex(m),C=this.pdfViewerBase.textLayer.getTextIndex(m,b),S=this.pdfViewerBase.textLayer.getPageIndex(g),x=this.pdfViewerBase.textLayer.getTextIndex(g,S),V=0,T=0,k=0,A=b;A<=S;A++){var M=[],I=void 0,B=void 0,N=void 0,D=void 0,Z=this.pdfViewerBase.getElement("_textLayer_"+A).childNodes;d=this.pdfViewerBase.getElement("_pageDiv_"+A).getBoundingClientRect(),this.pdfViewerBase.isMixedSizeDocument&&(d=this.pdfViewerBase.getElement("_textLayer_"+A).getBoundingClientRect());for(var O=k=A===b?C:0;O<Z.length;O++){var H=Z[O];O===k?(I=k,N=A===b?v:0):(B=O,D=A===S?y:H.textContent.length),V=O===C&&A===b?v:0,T=O===x&&A===S?y:H.textContent.length;for(var $=0;$<H.childNodes.length;$++){var me=H.childNodes[$];i.setStart(me,V),i.setEnd(me,T)}if(h=i.getBoundingClientRect(),f={left:this.getDefaultValue(h.left-d.left),top:this.getDefaultValue(h.top-d.top),width:this.getDefaultValue(h.width),height:this.getDefaultValue(h.height),right:this.getDefaultValue(h.right-d.left),bottom:this.getDefaultValue(h.bottom-d.top)},M.push(f),i.detach(),A===S&&O===x)break}B||(B=I),D||(D=T);var W=this.pdfViewerBase.getElement("_text_"+A+"_"+I).childNodes[0],Te=this.pdfViewerBase.getElement("_text_"+A+"_"+B).childNodes[0],ke=document.createRange();ke.setStart(W,N),ke.setEnd(Te,D);var rt=ke.getBoundingClientRect(),Rt=ke.toString(),fi=(p=this.getIndexNumbers(A,Rt),{left:this.getDefaultValue(rt.left-d.left),top:this.getDefaultValue(rt.top-d.top),width:this.getDefaultValue(rt.width),height:this.getDefaultValue(rt.height),right:this.getDefaultValue(rt.right-d.left),bottom:this.getDefaultValue(rt.bottom-d.top)});e.push({pageIndex:A,bounds:M,rect:{left:fi.left,top:fi.top,right:fi.right,bottom:fi.bottom},startIndex:p.startIndex,endIndex:p.endIndex,textContent:Rt})}}}return t.removeAllRanges(),e},s.prototype.getIndexNumbers=function(e,t,i){var o,r,n=this.pdfViewerBase.getStoredData(e);if(n){for(var l=0,d=n.pageText,h=0;h<e;h++)if(this.pdfViewer.isExtractText){var p=this.pdfViewer.textSearchModule.documentTextCollection[h][h],f=p.pageText?p.pageText:p.PageText;if(this.pdfViewer.textSearchModule&&this.pdfViewer.textSearchModule.documentTextCollection&&this.pdfViewer.textSearchModule.isTextRetrieved)this.pdfViewer.textSearchModule.documentTextCollection[h]&&(l+=f.length);else if(this.pdfViewer.textSearchModule&&this.pdfViewer.textSearchModule.documentTextCollection){if(!(e<=this.pdfViewer.textSearchModule.documentTextCollection.length)){l=0;break}this.pdfViewer.textSearchModule.documentTextCollection[h]&&(l+=f.length)}}r=(o=(0,a.le)(i)?d.indexOf(t)+l:d.indexOf(i)+i.indexOf(t)+l)+(t.length-1)}return{startIndex:o,endIndex:r}},s.prototype.rerenderAnnotationsPinch=function(e){var t=this.pdfViewerBase.getElement("_annotationCanvas_"+e);if(t){var i=this.pdfViewerBase.getElement("_old_annotationCanvas_"+e);i&&(t?(i.id=t.id,t.parentElement.removeChild(t)):i.id=this.pdfViewer.element.id+"_annotationCanvas_"+e,t=i),t.style.width="",t.style.height="",this.pdfViewer.restrictZoomRequest?(t.style.width=this.pdfViewerBase.pageSize[e].width*this.pdfViewerBase.getZoomFactor()+"px",t.style.height=this.pdfViewerBase.pageSize[e].height*this.pdfViewerBase.getZoomFactor()+"px"):(t.width=this.pdfViewerBase.pageSize[e].width*this.pdfViewerBase.getZoomFactor(),t.height=this.pdfViewerBase.pageSize[e].height*this.pdfViewerBase.getZoomFactor()),this.renderTextMarkupAnnotations(null,e,t,this.pdfViewerBase.getZoomFactor())}},s.prototype.rerenderAnnotations=function(e){for(var t=document.querySelectorAll("#"+this.pdfViewer.element.id+"_old_annotationCanvas_"+e),i=0;i<t.length;i++)t[i]&&t[i].parentElement.removeChild(t[i]);var n=this.pdfViewerBase.getElement("_annotationCanvas_"+e);n&&(n.style.display="block")},s.prototype.onTextMarkupAnnotationMouseUp=function(e){var t=this.pdfViewer.annotationModule.getEventPageNumber(e);if((0,a.le)(t)||isNaN(t))this.pdfViewerBase.isClickedOnScrollBar(e,!0)||(this.clearCurrentAnnotation(),this.clearCurrentAnnotationSelection(t));else{var i=this.pdfViewerBase.getElement("_annotationCanvas_"+t);this.selectedTextMarkup=this.currentTextMarkupAnnotation?this.currentTextMarkupAnnotation:null,this.clearCurrentSelectedAnnotation();var n=this.getCurrentMarkupAnnotation(e.clientX,e.clientY,t,i);if(n&&!window.getSelection().toString()){var o=!1,r=!1;if(n.annotationSettings&&n.annotationSettings.isLock&&(o=n.annotationSettings.isLock)&&this.pdfViewer.annotationModule.checkAllowedInteractions("Select",n)&&(o=!1,r=!this.pdfViewer.annotationModule.checkAllowedInteractions("PropertyChange",n)),!o){var l=i.parentElement.getBoundingClientRect();this.annotationClickPosition={x:e.clientX-l.left,y:e.clientY-l.top},this.selectAnnotation(n,i,t,e),a.AR.isDevice&&!this.pdfViewer.enableDesktopMode&&this.pdfViewer.enableToolbar&&this.pdfViewer.enableAnnotationToolbar&&this.pdfViewer.toolbarModule.annotationToolbarModule.createPropertyTools(this.currentTextMarkupAnnotation.textMarkupAnnotationType),this.currentTextMarkupAnnotation=n,this.selectTextMarkupCurrentPage=t,r||this.enableAnnotationPropertiesTool(!0);var p=document.getElementById(this.pdfViewer.element.id+"_commantPanel");if(p&&"block"===p.style.display){var f=document.getElementById(this.pdfViewer.element.id+"_accordionContainer"+(t+1));f&&f.ej2_instances[0].expandItem(!0);var c=document.getElementById(n.annotName);c&&c.firstChild.click()}(0,a.xr)()||this.pdfViewer.toolbarModule&&this.pdfViewer.enableAnnotationToolbar&&(this.pdfViewer.toolbarModule.annotationToolbarModule.isToolbarHidden=!0,this.pdfViewer.toolbarModule.annotationToolbarModule.showAnnotationToolbar(this.pdfViewer.toolbarModule.annotationItem))}}else this.clearCurrentAnnotation();this.pdfViewer.isMaintainSelection&&!this.pdfViewer.textSelectionModule.isTextSelection?n&&this.clearCurrentAnnotationSelection(t):this.clearCurrentAnnotationSelection(t)}},s.prototype.onTextMarkupAnnotationTouchEnd=function(e){var t=this.pdfViewer.annotationModule.getEventPageNumber(e);if((0,a.le)(t)||isNaN(t))if(null!=this.selectTextMarkupCurrentPage&&a.AR.isDevice&&!this.pdfViewer.enableDesktopMode){var f=this.selectTextMarkupCurrentPage;this.selectTextMarkupCurrentPage=null,this.clearAnnotationSelection(f)}else this.clearCurrentAnnotation(),this.clearCurrentAnnotationSelection(t);else{this.selectedTextMarkup=this.currentTextMarkupAnnotation?this.currentTextMarkupAnnotation:null,this.clearCurrentAnnotationSelection(t);var i=this.pdfViewerBase.getElement("_annotationCanvas_"+t);this.clearCurrentSelectedAnnotation();var n=this.getCurrentMarkupAnnotation(e.touches[0].clientX,e.touches[0].clientY,t,i);if(n){var o=!1;if(n.annotationSettings&&n.annotationSettings.isLock&&(o=n.annotationSettings.isLock),!o){var r=i.parentElement.getBoundingClientRect();this.annotationClickPosition={x:e.touches[0].clientX-r.left,y:e.touches[0].clientY-r.top},this.selectAnnotation(n,i,t,e),a.AR.isDevice&&!this.pdfViewer.enableDesktopMode&&this.pdfViewer.enableToolbar&&this.pdfViewer.enableAnnotationToolbar&&this.pdfViewer.toolbarModule.annotationToolbarModule.createPropertyTools(this.currentTextMarkupAnnotation.textMarkupAnnotationType),this.currentTextMarkupAnnotation=n,this.selectTextMarkupCurrentPage=t,this.enableAnnotationPropertiesTool(!0);var h=document.getElementById(this.pdfViewer.element.id+"_accordionContainer"+(t+1));h&&h.ej2_instances[0].expandItem(!0);var p=document.getElementById(n.annotName);p&&(a.AR.isDevice||p.firstChild.click())}}else this.clearCurrentAnnotation();this.clearCurrentAnnotationSelection(t)}},s.prototype.clearCurrentSelectedAnnotation=function(){if(this.currentTextMarkupAnnotation){this.clearAnnotationSelection(this.selectTextMarkupCurrentPage);var e=this.currentTextMarkupAnnotation;this.pdfViewer.fireAnnotationUnSelect(e.annotName,e.pageNumber,e),this.clearCurrentAnnotation()}},s.prototype.onTextMarkupAnnotationMouseMove=function(e){var t=e.target,i=parseInt(t.id.split("_text_")[1])||parseInt(t.id.split("_textLayer_")[1])||parseInt(t.id.split("_annotationCanvas_")[1]);if(e.target&&(t.id.indexOf("_text")>-1||t.id.indexOf("_annotationCanvas")>-1||t.classList.contains("e-pv-hyperlink"))&&this.pdfViewer.annotation){i=this.pdfViewer.annotation.getEventPageNumber(e);var n=this.pdfViewerBase.getElement("_annotationCanvas_"+i),o=this.getCurrentMarkupAnnotation(e.clientX,e.clientY,i,n);if(o){t.style.cursor="pointer";var r=this.pdfViewerBase.getMousePosition(e),l=this.pdfViewerBase.relativePosition(e),d={left:l.x,top:l.y},h={left:r.x,top:r.y},p={opacity:o.opacity,color:o.color,author:o.author,subject:o.subject,modifiedDate:o.modifiedDate};this.pdfViewerBase.isMousedOver=!0,this.pdfViewer.fireAnnotationMouseover(o.annotName,o.pageNumber,o.textMarkupAnnotationType,o.bounds,p,h,d)}else this.pdfViewer.annotationModule.hidePopupNote(),this.pdfViewerBase.isPanMode&&!this.pdfViewerBase.getAnnotationToolStatus()&&(t.style.cursor="grab"),this.pdfViewerBase.isMousedOver&&!this.pdfViewerBase.isFormFieldMousedOver&&(this.pdfViewer.fireAnnotationMouseLeave(i),this.pdfViewerBase.isMousedOver=!1)}},s.prototype.showPopupNote=function(e,t){t.note&&this.pdfViewer.annotationModule.showPopupNote(e,t.color,t.author,t.note,t.textMarkupAnnotationType)},s.prototype.getCurrentMarkupAnnotation=function(e,t,i,n){var o=[];if(n){var r=n.parentElement.getBoundingClientRect();n.clientWidth!==n.parentElement.clientWidth&&(r=n.getBoundingClientRect());var l=e-r.left,d=t-r.top,h=this.getAnnotations(i,null),p=!1;if(h)for(var f=0;f<h.length;f++)for(var c=h[f],u=0;u<c.bounds.length;u++){var m=c.bounds[u],g=m.left?m.left:m.Left,v=m.top?m.top:m.Top,y=m.width?m.width:m.Width,b=m.height?m.height:m.Height;if(l>=this.getMagnifiedValue(g,this.pdfViewerBase.getZoomFactor())&&l<=this.getMagnifiedValue(g+y,this.pdfViewerBase.getZoomFactor())&&d>=this.getMagnifiedValue(v,this.pdfViewerBase.getZoomFactor())&&d<=this.getMagnifiedValue(v+b,this.pdfViewerBase.getZoomFactor()))o.push(c),p=!0;else if(p){p=!1;break}}var C=null;return o.length>1?C=this.compareCurrentAnnotations(o):1===o.length&&(C=o[0]),C}return null},s.prototype.compareCurrentAnnotations=function(e){for(var t,i=null,n=0;n<e.length&&n!==e.length-1;n++){var o=e[n].bounds,r=o[0].left?o[0].left:o[0].Left,d=e[n+1].bounds,h=d[0].left?d[0].left:d[0].Left;r<h||(o[0].top?o[0].top:o[0].Top)<(d[0].top?d[0].top:d[0].Top)?(t=h,i=e[n+1]):(t=r,i=e[n]),t&&n===e.length-2&&t===r&&t===h&&(t=h,i=e[n+1])}return i},s.prototype.clearAnnotationSelection=function(e){var t=this.pdfViewerBase.getElement("_annotationCanvas_"+e);t&&(t.getContext("2d").setLineDash([]),this.pdfViewer.annotationModule.renderAnnotations(e,null,null,null))},s.prototype.selectAnnotation=function(e,t,i,n,o){this.pdfViewer.selectedItems.annotations[0]&&(this.pdfViewer.clearSelection(this.pdfViewer.selectedItems.annotations[0].pageIndex),this.pdfViewer.clearSelection(this.selectTextMarkupCurrentPage));var r=!1;if(e.annotationSettings&&e.annotationSettings.isLock&&(r=e.annotationSettings.isLock)&&this.pdfViewer.annotationModule.checkAllowedInteractions("Select",e)&&(r=!1),!r){var l=!1;this.currentTextMarkupAnnotation||(l=!0),this.selectedTextMarkup&&e&&!o&&(l=this.selectedTextMarkup.annotName!==e.annotName),isNaN(i)||(this.selectTextMarkupCurrentPage=i,this.currentTextMarkupAnnotation=e,e=this.retreiveTextIndex(e),this.currentTextMarkupAnnotation=e),this.isSelectedAnnotation&&this.pdfViewer.textSelectionModule&&(this.pdfViewerBase.isSelection=!0,this.updateAnnotationBounds());var d=n;if(this.isEnableTextMarkupResizer(e.textMarkupAnnotationType)&&e&&d&&!d.touches&&this.updateCurrentResizerPosition(e),this.drawAnnotationSelector(e,this.currentTextMarkupAnnotation,t),e.isMultiSelect&&e.annotNameCollection&&this.selectMultiPageAnnotations(e),""!==e.annotName&&!this.isNewAnnotation&&l){var h=!1;d||(h=!0),this.pdfViewer.annotationModule.annotationSelect(e.annotName,this.selectTextMarkupCurrentPage,e,null,!1,h),this.selectedTextMarkup=null}e&&this.isEnableTextMarkupResizer(e.textMarkupAnnotationType)&&(this.isTextMarkupAnnotationMode=!0)}},s.prototype.updateCurrentResizerPosition=function(e){if(e||(e=this.currentTextMarkupAnnotation),e&&this.isEnableTextMarkupResizer(e.textMarkupAnnotationType)&&e){var t=this.pdfViewerBase.getElement("_textLayer_"+this.selectTextMarkupCurrentPage);if(t){var i=t.getBoundingClientRect(),o=e.bounds[0].top?e.bounds[0].top:e.bounds[0].Top;this.updateLeftposition((e.bounds[0].left?e.bounds[0].left:e.bounds[0].Left)*this.pdfViewerBase.getZoomFactor()+i.left,i.top+o,!0);var r=e.bounds[e.bounds.length-1],d=r.top?r.top:r.Top;this.updatePosition(((r.left?r.left:r.Left)+(r.width?r.width:r.Width))*this.pdfViewerBase.getZoomFactor()+i.left,d+i.top,!0)}}},s.prototype.drawAnnotationSelectRect=function(e,t,i,n,o,r){var l=this.pdfViewerBase.getZoomRatio();if(e){var d=e.getContext("2d");if(d.setTransform(1,0,0,1,0,0),d.beginPath(),"string"==typeof r.annotationSelectorSettings){(h=0===JSON.parse(r.annotationSelectorSettings).selectorLineDashArray.length?[4]:JSON.parse(r.annotationSelectorSettings).selectorLineDashArray).length>2&&(h=[h[0],h[1]]),d.setLineDash(h),d.globalAlpha=1,d.rect(t*l,i*l,n*l,o*l),d.closePath();var p=""===JSON.parse(r.annotationSelectorSettings).selectionBorderColor?"#0000ff":JSON.parse(r.annotationSelectorSettings).selectionBorderColor;d.strokeStyle=p,d.lineWidth=1===JSON.parse(r.annotationSelectorSettings).selectionBorderThickness?1:r.annotationSelectorSettings.selectionBorderThickness,d.stroke(),d.save()}else{var h;(h=0===r.annotationSelectorSettings.selectorLineDashArray.length?[4]:r.annotationSelectorSettings.selectorLineDashArray).length>2&&(h=[h[0],h[1]]),d.setLineDash(h),d.globalAlpha=1,d.rect(t*l,i*l,n*l,o*l),d.closePath(),d.strokeStyle=p=""===r.annotationSelectorSettings.selectionBorderColor?"#0000ff":r.annotationSelectorSettings.selectionBorderColor,d.lineWidth=r.annotationSelectorSettings.selectionBorderThickness?1:r.annotationSelectorSettings.selectionBorderThickness,d.stroke(),d.save()}}},s.prototype.enableAnnotationPropertiesTool=function(e){if(this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.annotationToolbarModule&&(this.pdfViewer.toolbarModule.annotationToolbarModule.colorDropDownElementInBlazor=this.pdfViewer.element.querySelector(".e-pv-annotation-color-container")),this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.annotationToolbarModule&&(a.AR.isDevice||this.pdfViewer.toolbarModule.annotationToolbarModule.createMobileAnnotationToolbar(e)),this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.annotationToolbarModule&&this.pdfViewer.toolbarModule.annotationToolbarModule.isMobileAnnotEnabled&&0===this.pdfViewer.selectedItems.annotations.length&&this.pdfViewer.toolbarModule.annotationToolbarModule){this.pdfViewer.toolbarModule.annotationToolbarModule.selectAnnotationDeleteItem(e);var t=e;this.isTextMarkupAnnotationMode&&(t=!0),this.pdfViewer.toolbarModule.annotationToolbarModule.enableTextMarkupAnnotationPropertiesTools(t),this.currentTextMarkupAnnotation?(0,a.xr)()?this.pdfViewer.toolbarModule.annotationToolbarModule.updateColorInIcon(this.pdfViewer.toolbarModule.annotationToolbarModule.colorDropDownElementInBlazor,this.currentTextMarkupAnnotation.color):this.pdfViewer.toolbarModule.annotationToolbarModule.updateColorInIcon(this.pdfViewer.toolbarModule.annotationToolbarModule.colorDropDownElement,this.currentTextMarkupAnnotation.color):(0,a.le)(this.isTextMarkupAnnotationMode)||this.isTextMarkupAnnotationMode?this.pdfViewer.toolbarModule.annotationToolbarModule.setCurrentColorInPicker():(0,a.xr)()?this.pdfViewer.toolbarModule.annotationToolbarModule.updateColorInIcon(this.pdfViewer.toolbarModule.annotationToolbarModule.colorDropDownElementInBlazor,"#000000"):this.pdfViewer.toolbarModule.annotationToolbarModule.updateColorInIcon(this.pdfViewer.toolbarModule.annotationToolbarModule.colorDropDownElement,"#000000")}},s.prototype.maintainAnnotationSelection=function(){if(this.currentTextMarkupAnnotation){var e=this.pdfViewerBase.getElement("_annotationCanvas_"+this.selectTextMarkupCurrentPage);e&&this.selectAnnotation(this.currentTextMarkupAnnotation,e,this.selectTextMarkupCurrentPage)}},s.prototype.manageAnnotations=function(e,t){var i=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_textMarkup");if(this.pdfViewerBase.isStorageExceed&&(i=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_textMarkup"]),i){var n=JSON.parse(i);this.pdfViewerBase.isStorageExceed||window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_textMarkup");var o=this.pdfViewer.annotationModule.getPageCollection(n,t);n[o]&&(n[o].annotations=e);var r=JSON.stringify(n);this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_textMarkup"]=r:window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_annotations_textMarkup",r)}},s.prototype.getAnnotations=function(e,t,i){var n;(null==i||null==i)&&(i="_annotations_textMarkup");var o=window.sessionStorage.getItem(this.pdfViewerBase.documentId+i);if(this.pdfViewerBase.isStorageExceed&&(o=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+i]),o){var r=JSON.parse(o),l=this.pdfViewer.annotationModule.getPageCollection(r,e);n=r[l]?r[l].annotations:t}else n=t;return n},s.prototype.getAddedAnnotation=function(e,t,i,n,o,r,l,d,h,p,f,c,u,m,g,v,y){var b=l||this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),C=this.pdfViewer.annotation.createGUID(),S=this.pdfViewer.annotation.stickyNotesAnnotationModule.addComments("textMarkup",f+1,e);S&&(document.getElementById(S).id=C);var x=this.getAnnotationSettings(e),V=this.getIsPrintValue(e),T={textMarkupAnnotationType:e,color:t,opacity:i,bounds:n,author:o,allowedInteractions:v,subject:r,modifiedDate:b,note:d,rect:p,annotName:C,comments:[],review:{state:"",stateModel:"",author:o,modifiedDate:b},shapeAnnotationType:"textMarkup",pageNumber:f,textMarkupContent:c,textMarkupStartIndex:u,textMarkupEndIndex:m,isMultiSelect:g,annotationSelectorSettings:this.getSelector(e),customData:this.pdfViewer.annotation.getTextMarkupData(r),annotationAddMode:this.annotationAddMode,annotationSettings:x,isPrint:V,isCommentLock:h,isAnnotationRotated:!1,annotationRotation:y};g&&this.multiPageCollection.push(T);var k=!1;g&&this.isExtended&&(k=!0),document.getElementById(C)&&!k&&document.getElementById(C).addEventListener("mouseup",this.annotationDivSelect(T,f));var A=this.pdfViewer.annotationModule.storeAnnotations(f,T,"_annotations_textMarkup");return this.pdfViewer.annotationModule.addAction(f,A,T,"Text Markup Added",null),T},s.prototype.getSelector=function(e){var t=this.pdfViewer.annotationSelectorSettings;return"Highlight"===e&&this.pdfViewer.highlightSettings.annotationSelectorSettings?t=this.pdfViewer.highlightSettings.annotationSelectorSettings:"Underline"===e&&this.pdfViewer.underlineSettings.annotationSelectorSettings?t=this.pdfViewer.underlineSettings.annotationSelectorSettings:"Strikethrough"===e&&this.pdfViewer.strikethroughSettings.annotationSelectorSettings&&(t=this.pdfViewer.strikethroughSettings.annotationSelectorSettings),t},s.prototype.getAnnotationSettings=function(e){var t={isLock:!1};return("Highlight"===e&&this.pdfViewer.highlightSettings.isLock||"Underline"===e&&this.pdfViewer.underlineSettings.isLock||"Strikethrough"===e&&this.pdfViewer.strikethroughSettings.isLock||this.pdfViewer.annotationSettings.isLock)&&(t={isLock:!0}),t},s.prototype.getIsPrintValue=function(e){var t=!0;return"Highlight"===e&&(t=this.pdfViewer.highlightSettings.isPrint),"Underline"===e&&(t=this.pdfViewer.underlineSettings.isPrint),"Strikethrough"===e&&(t=this.pdfViewer.strikethroughSettings.isPrint),t},s.prototype.annotationDivSelect=function(e,t){var i=this.pdfViewerBase.getElement("_annotationCanvas_"+t);if(this.selectAnnotation(e,i,t),this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.annotationToolbarModule&&this.pdfViewer.enableAnnotationToolbar){this.pdfViewer.toolbarModule.annotationToolbarModule.clearShapeMode(),this.pdfViewer.toolbarModule.annotationToolbarModule.clearMeasureMode();var n=!1;e.annotationSettings&&e.annotationSettings.isLock&&(n=e.annotationSettings.isLock),n?(this.pdfViewer.annotationModule.checkAllowedInteractions("PropertyChange",e)&&(this.pdfViewer.toolbarModule.annotationToolbarModule.enableTextMarkupAnnotationPropertiesTools(!0),this.pdfViewer.toolbarModule.annotationToolbarModule.setCurrentColorInPicker()),this.pdfViewer.annotationModule.checkAllowedInteractions("Delete",e)&&this.pdfViewer.toolbarModule.annotationToolbarModule.selectAnnotationDeleteItem(!0)):(this.pdfViewer.toolbarModule.annotationToolbarModule.enableTextMarkupAnnotationPropertiesTools(!0),this.pdfViewer.toolbarModule.annotationToolbarModule.selectAnnotationDeleteItem(!0),this.pdfViewer.toolbarModule.annotationToolbarModule.setCurrentColorInPicker()),this.pdfViewer.toolbarModule.annotationToolbarModule.isToolbarHidden=!0,(0,a.xr)()||this.pdfViewer.toolbarModule.annotationToolbarModule.showAnnotationToolbar(this.pdfViewer.toolbarModule.annotationItem)}},s.prototype.getPageContext=function(e){var t=this.pdfViewerBase.getElement("_annotationCanvas_"+e),i=null;return t&&(i=t.getContext("2d")),i},s.prototype.getDefaultValue=function(e){return e/this.pdfViewerBase.getZoomFactor()},s.prototype.getMagnifiedValue=function(e,t){return e*t},s.prototype.saveImportedTextMarkupAnnotations=function(e,t){var i;e.Author=this.pdfViewer.annotationModule.updateAnnotationAuthor("textMarkup",e.Subject),e.AnnotationSettings=e.AnnotationSettings&&e.AnnotationSettings.isLock?{isLock:e.AnnotationSettings.isLock}:this.getAnnotationSettings(e.TextMarkupAnnotationType),e.allowedInteractions=this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(e),i={textMarkupAnnotationType:e.TextMarkupAnnotationType,color:e.Color,opacity:e.Opacity,allowedInteractions:e.allowedInteractions,bounds:e.Bounds,author:e.Author,subject:e.Subject,modifiedDate:e.ModifiedDate,note:e.Note,rect:e.Rect,annotName:e.AnnotName,comments:this.pdfViewer.annotationModule.getAnnotationComments(e.Comments,e,e.Author),review:{state:e.State,stateModel:e.StateModel,modifiedDate:e.ModifiedDate,author:e.Author},shapeAnnotationType:"textMarkup",pageNumber:t,textMarkupContent:"",textMarkupStartIndex:0,textMarkupEndIndex:0,annotationSelectorSettings:this.getSettings(e),customData:this.pdfViewer.annotation.getCustomData(e),isMultiSelect:e.IsMultiSelect,annotNameCollection:e.AnnotNameCollection,annotpageNumbers:e.AnnotpageNumbers,annotationAddMode:this.annotationAddMode,annotationSettings:e.AnnotationSettings,isPrint:e.isPrint,isCommentLock:e.IsCommentLock,isAnnotationRotated:!1},this.pdfViewer.annotationModule.storeAnnotations(t,i,"_annotations_textMarkup")},s.prototype.updateTextMarkupAnnotationCollections=function(e,t){return e.allowedInteractions=e.AllowedInteractions?e.AllowedInteractions:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(e),{textMarkupAnnotationType:e.TextMarkupAnnotationType,allowedInteractions:e.allowedInteractions,color:e.Color,opacity:e.Opacity,bounds:e.Bounds,author:e.Author,subject:e.Subject,modifiedDate:e.ModifiedDate,note:e.Note,rect:e.Rect,annotationId:e.AnnotName,comments:this.pdfViewer.annotationModule.getAnnotationComments(e.Comments,e,e.Author),review:{state:e.State,stateModel:e.StateModel,modifiedDate:e.ModifiedDate,author:e.Author},shapeAnnotationType:"textMarkup",pageNumber:t,isMultiSelect:e.IsMultiSelect,annotNameCollection:e.AnnotNameCollection,annotpageNumbers:e.AnnotpageNumbers,customData:this.pdfViewer.annotation.getCustomData(e),isPrint:e.isPrint,isCommentLock:e.IsCommentLock}},s.prototype.updateTextMarkupSettings=function(e){"highlightSettings"===e&&(this.highlightColor=this.pdfViewer.highlightSettings.color?this.pdfViewer.highlightSettings.color:this.highlightColor,this.highlightOpacity=this.pdfViewer.highlightSettings.opacity?this.pdfViewer.highlightSettings.opacity:this.highlightOpacity),"underlineSettings"===e&&(this.underlineColor=this.pdfViewer.underlineSettings.color?this.pdfViewer.underlineSettings.color:this.underlineColor,this.underlineOpacity=this.pdfViewer.underlineSettings.opacity?this.pdfViewer.underlineSettings.opacity:this.underlineOpacity),"strikethroughSettings"===e&&(this.strikethroughColor=this.pdfViewer.strikethroughSettings.color?this.pdfViewer.strikethroughSettings.color:this.strikethroughColor,this.strikethroughOpacity=this.pdfViewer.strikethroughSettings.opacity?this.pdfViewer.strikethroughSettings.opacity:this.strikethroughOpacity)},s.prototype.clear=function(){this.selectTextMarkupCurrentPage=null,this.currentTextMarkupAnnotation=null,this.annotationClickPosition=null,window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_textMarkup")},s.prototype.getOffsetPoints=function(e){for(var t=[],i=0;i<e.length;i++)t[i]={X:e[i].x,Y:e[i].y,Width:e[i].width,Height:e[i].height,Left:e[i].x,Top:e[i].y};return t},s.prototype.updateAddAnnotationDetails=function(e,t){t||(t={pageNumber:0});var d,i=null,n=null,o="",r=null,l="",h=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),p=this.pdfViewer.annotation.createGUID();"Highlight"==e?(i=this.pdfViewer.highlightSettings.annotationSelectorSettings?this.pdfViewer.highlightSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,r=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.highlightSettings),n=this.pdfViewer.highlightSettings.allowedInteractions?this.pdfViewer.highlightSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions,o="Highlight",l=t.color?t.color:"#ffff00"):"Underline"==e?(i=this.pdfViewer.underlineSettings.annotationSelectorSettings?this.pdfViewer.underlineSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,r=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.underlineSettings),n=this.pdfViewer.underlineSettings.allowedInteractions?this.pdfViewer.underlineSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions,o="Underline",l=t.color?t.color:"#00ff00"):"Strikethrough"==e&&(i=this.pdfViewer.strikethroughSettings.annotationSelectorSettings?this.pdfViewer.strikethroughSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,r=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.strikethroughSettings),n=this.pdfViewer.strikethroughSettings.allowedInteractions?this.pdfViewer.strikethroughSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions,o="Strikethrough",l=t.color?t.color:"#ff0000"),r.isLock=!!t.isLock&&t.isLock,d=t.bounds?this.getOffsetPoints(t.bounds):[{X:1,Y:1,Width:100,Height:14,Left:1,Top:1,Location:{X:1,Y:1},Size:{Height:14,IsEmpty:!1,Width:100}}];var f=[];return f[0]={AllowedInteractions:t.allowedInteractions?t.allowedInteractions:n,AnnotName:p,AnnotNameCollection:null,AnnotType:"textMarkup",AnnotationSelectorSettings:t.annotationSelectorSettings?t.annotationSelectorSettings:i,AnnotationSettings:r,Author:t.author?t.author:"Guest",Bounds:d,Color:t.color?t.color:l,Comments:null,CreatedDate:h,CustomData:t.customData?t.customData:null,ExistingCustomData:null,EnableMultiPageAnnotation:!!t.enableMultiPageAnnotation&&t.enableMultiPageAnnotation,EnableTextMarkupResizer:!!t.enableTextMarkupResizer&&t.enableTextMarkupResizer,IsCommentLock:!1,IsMultiSelect:!1,IsLock:!!t.isLock&&t.isLock,IsPrint:!t.isPrint||t.isPrint,ModifiedDate:h,Note:"",Opacity:t.opacity?t.opacity:1,Rect:{},State:"",StateModel:"",Subject:o,TextMarkupAnnotationType:o},{textMarkupAnnotation:f}},s}(),Nb=function(){function s(e,t){this.measureShapeCount=0,this.isAddAnnotationProgramatically=!1,this.pdfViewer=e,this.pdfViewerBase=t}return Object.defineProperty(s.prototype,"pixelToPointFactor",{get:function(){return.75},enumerable:!0,configurable:!0}),s.prototype.renderMeasureShapeAnnotations=function(e,t,i){if(e)if(e.length>=1){if(!this.pdfViewer.annotation.getStoredAnnotations(t,e,"_annotations_shape_measure")||i)for(var o=0;o<e.length;o++){var r=e[o],l=null;this.measureShapeCount=this.measureShapeCount+1,r.annotationAddMode=this.pdfViewer.annotationModule.findAnnotationMode(r,t,r.AnnotType);var d=void 0;if(r.ShapeAnnotationType){i&&this.pdfViewerBase.isJsonImported&&(r.Bounds=this.pdfViewerBase.importJsonForRotatedDocuments(r.Rotate,t,r.Bounds,r.AnnotationRotation),d=this.pdfViewerBase.isPageRotated);var h=null;if(r.VertexPoints)if(h=[],i&&this.pdfViewerBase.isJsonImported)h=this.pdfViewerBase.calculateVertexPoints(r.Rotate,t,r.VertexPoints,r.AnnotationRotation);else for(var p=0;p<r.VertexPoints.length;p++)h.push({x:r.VertexPoints[p].X?r.VertexPoints[p].X:r.VertexPoints[p].x,y:r.VertexPoints[p].Y?r.VertexPoints[p].Y:r.VertexPoints[p].y});r.Bounds&&!0===r.EnableShapeLabel&&(r.LabelBounds=this.pdfViewer.annotationModule.inputElementModule.calculateLabelBoundsFromLoadedDocument(r.Bounds),r.LabelBorderColor=r.LabelBorderColor?r.LabelBorderColor:r.StrokeColor,r.FontColor=r.FontColor?r.FontColor:r.StrokeColor,r.LabelFillColor=r.LabelFillColor?r.LabelFillColor:r.FillColor,r.FontSize=r.FontSize?r.FontSize:16,r.LabelSettings=r.LabelSettings?r.LabelSettings:this.pdfViewer.shapeLabelSettings),r.AnnotationSettings=r.AnnotationSettings?r.AnnotationSettings:this.pdfViewer.annotationModule.updateAnnotationSettings(r),r.allowedInteractions=r.AllowedInteractions?r.AllowedInteractions:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(r);var m=r.AnnotationSettings.isPrint,g={ratio:r.Calibrate.Ratio,x:this.getNumberFormatArray(r.Calibrate.X),distance:this.getNumberFormatArray(r.Calibrate.Distance),area:this.getNumberFormatArray(r.Calibrate.Area),angle:this.getNumberFormatArray(r.Calibrate.Angle),volume:this.getNumberFormatArray(r.Calibrate.Volume),targetUnitConversion:r.Calibrate.TargetUnitConversion};r.Calibrate.Depth&&(g.depth=r.Calibrate.Depth);var S,x=(l={id:"measure"+this.measureShapeCount,shapeAnnotationType:r.ShapeAnnotationType,author:r.Author,allowedInteractions:r.allowedInteractions,modifiedDate:r.ModifiedDate,subject:r.Subject,note:r.Note,strokeColor:r.StrokeColor,fillColor:r.FillColor,opacity:r.Opacity,thickness:r.Thickness,rectangleDifference:r.RectangleDifference,borderStyle:r.BorderStyle,borderDashArray:r.BorderDashArray,rotateAngle:r.RotateAngle,isCloudShape:r.IsCloudShape,cloudIntensity:r.CloudIntensity,vertexPoints:h,lineHeadStart:r.LineHeadStart,lineHeadEnd:r.LineHeadEnd,isLocked:r.IsLocked,bounds:{left:r.Bounds.X?r.Bounds.X:r.Bounds.x,top:r.Bounds.Y?r.Bounds.Y:r.Bounds.y,width:r.Bounds.Width?r.Bounds.Width:r.Bounds.width,height:r.Bounds.Height?r.Bounds.Height:r.Bounds.height,right:r.Bounds.Right,bottom:r.Bounds.Bottom},caption:r.Caption,captionPosition:r.CaptionPosition,calibrate:g,leaderLength:r.LeaderLength,leaderLineExtension:r.LeaderLineExtension,leaderLineOffset:r.LeaderLineOffset,indent:r.Indent,annotName:r.AnnotName,comments:this.pdfViewer.annotationModule.getAnnotationComments(r.Comments,r,r.Author),review:{state:r.State,stateModel:r.StateModel,modifiedDate:r.ModifiedDate,author:r.Author},labelContent:r.LabelContent,enableShapeLabel:r.EnableShapeLabel,labelFillColor:r.LabelFillColor,fontColor:r.FontColor,labelBorderColor:r.LabelBorderColor,fontSize:r.FontSize,labelBounds:r.LabelBounds,annotationSelectorSettings:this.getSettings(r),labelSettings:r.LabelSettings,annotationSettings:r.AnnotationSettings,customData:this.pdfViewer.annotation.getCustomData(r),isPrint:m,isCommentLock:r.IsCommentLock,isAnnotationRotated:d}).vertexPoints;null==h&&(x=[]),r.AnnotationSelectorSettings=r.AnnotationSelectorSettings?r.AnnotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,r.allowedInteractions=r.AllowedInteractions?r.AllowedInteractions:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(r),S={id:"measure"+this.measureShapeCount,shapeAnnotationType:this.getShapeType(l),author:l.author,allowedInteractions:r.allowedInteractions,modifiedDate:l.modifiedDate,subject:l.subject,notes:l.note,fillColor:l.fillColor,strokeColor:l.strokeColor,opacity:l.opacity,thickness:l.thickness,borderStyle:l.borderStyle,borderDashArray:l.borderDashArray.toString(),rotateAngle:parseFloat(l.rotateAngle.split("Angle")[1]),isCloudShape:l.isCloudShape,cloudIntensity:l.cloudIntensity,taregetDecoraterShapes:this.pdfViewer.annotation.getArrowType(l.lineHeadEnd),sourceDecoraterShapes:this.pdfViewer.annotation.getArrowType(l.lineHeadStart),vertexPoints:x,bounds:{x:l.bounds.left,y:l.bounds.top,width:l.bounds.width,height:l.bounds.height},leaderHeight:l.leaderLength,pageIndex:t,annotName:l.annotName,comments:l.comments,review:l.review,measureType:this.getMeasureType(l),labelContent:r.LabelContent,enableShapeLabel:r.EnableShapeLabel,labelFillColor:r.LabelFillColor,fontColor:r.FontColor,labelBorderColor:r.LabelBorderColor,fontSize:r.FontSize,labelBounds:r.LabelBounds,annotationSelectorSettings:r.AnnotationSelectorSettings,annotationSettings:l.annotationSettings,annotationAddMode:r.annotationAddMode,isPrint:m,isCommentLock:l.isCommentLock},this.pdfViewer.annotation.storeAnnotations(t,l,"_annotations_shape_measure"),this.isAddAnnotationProgramatically&&this.pdfViewer.fireAnnotationAdd(S.pageIndex,S.annotName,r.ShapeAnnotationType,S.bounds,{opacity:S.opacity,strokeColor:S.strokeColor,thickness:S.thickness,modifiedDate:S.modifiedDate,width:S.bounds.width,height:S.bounds.height}),this.pdfViewer.add(S)}}}else e.shapeAnnotationType&&(l=this.createAnnotationObject(e),this.pdfViewer.annotationModule.storeAnnotations(t,l,"_annotations_shape_measure"),this.pdfViewer.annotationModule.triggerAnnotationAdd(e))},s.prototype.getSettings=function(e){return e.AnnotationSelectorSettings?e.AnnotationSelectorSettings:this.getSelector(e.Subject)},s.prototype.setAnnotationType=function(e){var t="Guest";switch(this.updateMeasureproperties(),this.pdfViewerBase.disableTextSelectionMode(),e){case"Distance":this.currentAnnotationMode="Distance",this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),t="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.distanceSettings.author?this.pdfViewer.distanceSettings.author:"Guest",this.pdfViewer.drawingObject={sourceDecoraterShapes:this.pdfViewer.annotation.getArrowType(this.distanceStartHead),taregetDecoraterShapes:this.pdfViewer.annotation.getArrowType(this.distanceEndHead),measureType:"Distance",fillColor:this.distanceFillColor,notes:"",strokeColor:this.distanceStrokeColor,leaderHeight:this.leaderLength,opacity:this.distanceOpacity,thickness:this.distanceThickness,borderDashArray:this.distanceDashArray.toString(),shapeAnnotationType:"Distance",author:t,subject:"Distance calculation",isCommentLock:!1},this.pdfViewer.tool="Distance";break;case"Perimeter":this.currentAnnotationMode="Perimeter",this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),t="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.perimeterSettings.author?this.pdfViewer.perimeterSettings.author:"Guest",this.pdfViewer.drawingObject={shapeAnnotationType:"LineWidthArrowHead",fillColor:this.perimeterFillColor,notes:"",strokeColor:this.perimeterStrokeColor,opacity:this.perimeterOpacity,thickness:this.perimeterThickness,sourceDecoraterShapes:this.pdfViewer.annotation.getArrowType(this.perimeterStartHead),taregetDecoraterShapes:this.pdfViewer.annotation.getArrowType(this.perimeterEndHead),measureType:"Perimeter",borderDashArray:this.perimeterDashArray.toString(),author:t,subject:"Perimeter calculation",isCommentLock:!1},this.pdfViewer.tool="Perimeter";break;case"Area":this.currentAnnotationMode="Area";var o=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();this.pdfViewer.drawingObject={shapeAnnotationType:"Polygon",fillColor:this.areaFillColor,notes:"",strokeColor:this.areaStrokeColor,thickness:this.areaThickness,opacity:this.areaOpacity,measureType:"Area",modifiedDate:o,borderStyle:"",borderDashArray:"0",author:t="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.areaSettings.author?this.pdfViewer.areaSettings.author:"Guest",subject:"Area calculation",isCommentLock:!1},this.pdfViewer.tool="Polygon";break;case"Radius":this.currentAnnotationMode="Radius";var r=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();this.pdfViewer.drawingObject={shapeAnnotationType:"Radius",fillColor:this.radiusFillColor,notes:"",strokeColor:this.radiusStrokeColor,opacity:this.radiusOpacity,thickness:this.radiusThickness,measureType:"Radius",modifiedDate:r,borderStyle:"",borderDashArray:"0",author:t="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.radiusSettings.author?this.pdfViewer.radiusSettings.author:"Guest",subject:"Radius calculation",isCommentLock:!1},this.pdfViewer.tool="DrawTool";break;case"Volume":this.currentAnnotationMode="Volume";var l=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();this.pdfViewer.drawingObject={shapeAnnotationType:"Polygon",notes:"",fillColor:this.volumeFillColor,strokeColor:this.volumeStrokeColor,opacity:this.volumeOpacity,thickness:this.volumeThickness,measureType:"Volume",modifiedDate:l,borderStyle:"",borderDashArray:"0",author:t="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.volumeSettings.author?this.pdfViewer.volumeSettings.author:"Guest",subject:"Volume calculation",isCommentLock:!1},this.pdfViewer.tool="Polygon"}},s.prototype.updateMeasureproperties=function(){this.distanceFillColor=this.pdfViewer.distanceSettings.fillColor?this.pdfViewer.distanceSettings.fillColor:"#ff0000",this.distanceStrokeColor=this.pdfViewer.distanceSettings.strokeColor?this.pdfViewer.distanceSettings.strokeColor:"#ff0000",this.distanceOpacity=this.pdfViewer.distanceSettings.opacity?this.pdfViewer.distanceSettings.opacity:1,this.distanceThickness=this.pdfViewer.distanceSettings.thickness?this.pdfViewer.distanceSettings.thickness:1,this.distanceDashArray=this.pdfViewer.distanceSettings.borderDashArray?this.pdfViewer.distanceSettings.borderDashArray:0,this.leaderLength=null!=this.pdfViewer.distanceSettings.leaderLength?this.pdfViewer.distanceSettings.leaderLength:40,this.distanceStartHead=this.pdfViewer.distanceSettings.lineHeadStartStyle?this.pdfViewer.distanceSettings.lineHeadStartStyle:"Closed",this.distanceEndHead=this.pdfViewer.distanceSettings.lineHeadEndStyle?this.pdfViewer.distanceSettings.lineHeadEndStyle:"Closed",this.perimeterFillColor=this.pdfViewer.perimeterSettings.fillColor?this.pdfViewer.perimeterSettings.fillColor:"#ffffff00",this.perimeterStrokeColor=this.pdfViewer.perimeterSettings.strokeColor?this.pdfViewer.perimeterSettings.strokeColor:"#ff0000",this.perimeterOpacity=this.pdfViewer.perimeterSettings.opacity?this.pdfViewer.perimeterSettings.opacity:1,this.perimeterThickness=this.pdfViewer.perimeterSettings.thickness?this.pdfViewer.perimeterSettings.thickness:1,this.perimeterDashArray=this.pdfViewer.perimeterSettings.borderDashArray?this.pdfViewer.perimeterSettings.borderDashArray:0,this.perimeterStartHead=this.pdfViewer.perimeterSettings.lineHeadStartStyle?this.pdfViewer.perimeterSettings.lineHeadStartStyle:"Open",this.perimeterEndHead=this.pdfViewer.perimeterSettings.lineHeadEndStyle?this.pdfViewer.perimeterSettings.lineHeadEndStyle:"Open",this.areaFillColor=this.pdfViewer.areaSettings.fillColor?this.pdfViewer.areaSettings.fillColor:"#ffffff00",this.areaStrokeColor=this.pdfViewer.areaSettings.strokeColor?this.pdfViewer.areaSettings.strokeColor:"#ff0000",this.areaOpacity=this.pdfViewer.areaSettings.opacity?this.pdfViewer.areaSettings.opacity:1,this.areaThickness=this.pdfViewer.areaSettings.thickness?this.pdfViewer.areaSettings.thickness:1,this.radiusFillColor=this.pdfViewer.radiusSettings.fillColor?this.pdfViewer.radiusSettings.fillColor:"#ffffff00",this.radiusStrokeColor=this.pdfViewer.radiusSettings.strokeColor?this.pdfViewer.radiusSettings.strokeColor:"#ff0000",this.radiusOpacity=this.pdfViewer.radiusSettings.opacity?this.pdfViewer.radiusSettings.opacity:1,this.radiusThickness=this.pdfViewer.radiusSettings.thickness?this.pdfViewer.radiusSettings.thickness:1,this.volumeFillColor=this.pdfViewer.volumeSettings.fillColor?this.pdfViewer.volumeSettings.fillColor:"#ffffff00",this.volumeStrokeColor=this.pdfViewer.volumeSettings.strokeColor?this.pdfViewer.volumeSettings.strokeColor:"#ff0000",this.volumeOpacity=this.pdfViewer.volumeSettings.opacity?this.pdfViewer.volumeSettings.opacity:1,this.volumeThickness=this.pdfViewer.volumeSettings.thickness?this.pdfViewer.volumeSettings.thickness:1,this.unit=this.pdfViewer.measurementSettings.conversionUnit.toLowerCase(),this.displayUnit=this.pdfViewer.measurementSettings.displayUnit.toLowerCase(),this.ratio=this.pdfViewer.measurementSettings.scaleRatio,this.volumeDepth=this.pdfViewer.measurementSettings.depth,this.scaleRatioString="1 "+this.unit+" = "+this.ratio.toString()+" "+this.displayUnit},s.prototype.createAnnotationObject=function(e){var t,i,n=this.pdfViewer.annotation.createGUID(),o=this.pdfViewer.annotation.stickyNotesAnnotationModule.addComments("shape_measure",e.pageIndex+1,e.measureType);o&&(document.getElementById(o).id=n),e.annotName=n,e.author=this.pdfViewer.annotationModule.updateAnnotationAuthor("measure",e.subject),this.pdfViewer.annotation.stickyNotesAnnotationModule.addTextToComments(n,e.notes),e.wrapper.bounds?(t={left:e.wrapper.bounds.x,top:e.wrapper.bounds.y,height:e.wrapper.bounds.height,width:e.wrapper.bounds.width,right:e.wrapper.bounds.right,bottom:e.wrapper.bounds.bottom},i=this.pdfViewer.annotationModule.inputElementModule.calculateLabelBounds(e.wrapper.bounds)):(t={left:0,top:0,height:0,width:0,right:0,bottom:0},i={left:0,top:0,height:0,width:0,right:0,bottom:0});var r=parseInt(e.borderDashArray);r=isNaN(r)?0:r;var l={ratio:this.scaleRatioString,x:[this.createNumberFormat("x")],distance:[this.createNumberFormat("d")],area:[this.createNumberFormat("a")]};"Volume"===e.measureType&&(l.depth=this.volumeDepth);var d=this.pdfViewer.annotationModule.findAnnotationSettings(e,!0),h=this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(e);e.isPrint=d.isPrint;var p=this.pdfViewer.shapeLabelSettings,f={borderColor:e.strokeColor,fillColor:e.fillColor,fontColor:e.fontColor,fontSize:e.fontSize,labelContent:e.labelContent,labelHeight:p.labelHeight,labelWidth:p.labelMaxWidth,opacity:e.opacity};return{id:e.id,shapeAnnotationType:this.getShapeAnnotType(e.measureType),author:e.author,allowedInteractions:h,subject:e.subject,note:e.notes,strokeColor:e.strokeColor,fillColor:e.fillColor,opacity:e.opacity,thickness:e.thickness,borderStyle:e.borderStyle,borderDashArray:r,bounds:t,modifiedDate:this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),rotateAngle:"RotateAngle"+e.rotateAngle,isCloudShape:e.isCloudShape,cloudIntensity:e.cloudIntensity,vertexPoints:e.vertexPoints,lineHeadStart:this.pdfViewer.annotation.getArrowTypeForCollection(e.sourceDecoraterShapes),lineHeadEnd:this.pdfViewer.annotation.getArrowTypeForCollection(e.taregetDecoraterShapes),rectangleDifference:[],isLocked:d.isLock,leaderLength:e.leaderHeight,leaderLineExtension:2,leaderLineOffset:0,calibrate:l,caption:!0,captionPosition:"Top",indent:this.getIndent(e.measureType),annotName:n,comments:[],review:{state:"",stateModel:"",modifiedDate:this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),author:e.author},labelContent:e.labelContent,enableShapeLabel:e.enableShapeLabel,labelFillColor:e.labelFillColor,labelBorderColor:e.labelBorderColor,fontColor:e.fontColor,fontSize:e.fontSize,labelBounds:i,annotationSelectorSettings:this.getSelector(e.subject),labelSettings:f,annotationSettings:d,customData:this.pdfViewer.annotation.getMeasureData(e.subject),isPrint:e.isPrint,isCommentLock:e.isCommentLock,isAnnotationRotated:!1}},s.prototype.getSelector=function(e){var t=this.pdfViewer.annotationSelectorSettings;return"Distance calculation"===e&&this.pdfViewer.distanceSettings.annotationSelectorSettings?t=this.pdfViewer.distanceSettings.annotationSelectorSettings:"Perimeter calculation"===e&&this.pdfViewer.perimeterSettings.annotationSelectorSettings?t=this.pdfViewer.perimeterSettings.annotationSelectorSettings:"Area calculation"===e&&this.pdfViewer.areaSettings.annotationSelectorSettings?t=this.pdfViewer.areaSettings.annotationSelectorSettings:"Radius calculation"===e&&this.pdfViewer.radiusSettings.annotationSelectorSettings?t=this.pdfViewer.radiusSettings.annotationSelectorSettings:"Volume calculation"===e&&this.pdfViewer.volumeSettings.annotationSelectorSettings&&(t=this.pdfViewer.volumeSettings.annotationSelectorSettings),t},s.prototype.getShapeAnnotType=function(e){var t;switch(e){case"Distance":t="Line";break;case"Perimeter":t="Polyline";break;case"Area":case"Volume":t="Polygon";break;case"Radius":t="Circle"}return t},s.prototype.getShapeType=function(e){var t;return"Line"===e.shapeAnnotationType?t="Distance":"Polyline"===e.shapeAnnotationType?t="LineWidthArrowHead":"Polygon"===e.shapeAnnotationType&&"PolygonDimension"===e.indent?t="Polygon":"Polygon"===e.shapeAnnotationType&&"PolygonRadius"===e.indent||"Circle"===e.shapeAnnotationType?t="Radius":"Polygon"===e.shapeAnnotationType&&"PolygonVolume"===e.indent&&(t="Polygon"),t},s.prototype.getMeasureType=function(e){var t;return"Line"===e.shapeAnnotationType?t="Distance":"Polyline"===e.shapeAnnotationType?t="Perimeter":"Polygon"===e.shapeAnnotationType&&"PolygonDimension"===e.indent?t="Area":"Polygon"===e.shapeAnnotationType&&"PolygonRadius"===e.indent||"Circle"===e.shapeAnnotationType?t="Radius":"Polygon"===e.shapeAnnotationType&&"PolygonVolume"===e.indent&&(t="Volume"),t},s.prototype.getIndent=function(e){var t;switch(e){case"Distance":t="LineDimension";break;case"Perimeter":t="PolyLineDimension";break;case"Area":t="PolygonDimension";break;case"Radius":t="PolygonRadius";break;case"Volume":t="PolygonVolume"}return t},s.prototype.getNumberFormatArray=function(e){var t=new Array;if(e)for(var i=0;i<e.length;i++)t[i]={unit:e[i].Unit,fractionalType:e[i].FractionalType,conversionFactor:e[i].ConversionFactor,denominator:e[i].Denominator,formatDenominator:e[i].FormatDenominator};return t},s.prototype.createNumberFormat=function(e){var t=1,i=this.displayUnit;return"x"===e&&(t=this.getFactor(this.unit)),"a"===e&&(i="sq "+this.displayUnit),{unit:i,fractionalType:"D",conversionFactor:t,denominator:100,formatDenominator:!1}},s.prototype.saveMeasureShapeAnnotations=function(){var e=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_shape_measure");this.pdfViewerBase.isStorageExceed&&(e=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_shape_measure"]);for(var t=new Array,i=0;i<this.pdfViewerBase.pageCount;i++)t[i]=[];if(e&&!this.pdfViewer.annotationSettings.skipDownload)for(var n=JSON.parse(e),o=0;o<n.length;o++){var r=[],l=n[o];if(l){for(var d=0;l.annotations.length>d;d++){if(this.pdfViewer.annotationModule.updateModifiedDate(l.annotations[d]),this.pdfViewerBase.isJsonExported)if(l.annotations[d].isAnnotationRotated)l.annotations[d].bounds=this.pdfViewer.annotation.getBounds(l.annotations[d].bounds,l.pageIndex),l.annotations[d].vertexPoints=this.pdfViewer.annotation.getVertexPoints(l.annotations[d].vertexPoints,l.pageIndex);else{var h=this.pdfViewerBase.pageSize[l.pageIndex];h&&(l.annotations[d].annotationRotation=h.rotation)}if(l.annotations[d].bounds=JSON.stringify(this.pdfViewer.annotation.getBounds(l.annotations[d].bounds,l.pageIndex)),l.annotations[d].strokeColor=JSON.stringify(this.getRgbCode(l.annotations[d].strokeColor)),l.annotations[d].fillColor=JSON.stringify(this.getRgbCode(l.annotations[d].fillColor)),l.annotations[d].vertexPoints=JSON.stringify(this.pdfViewer.annotation.getVertexPoints(l.annotations[d].vertexPoints,l.pageIndex)),null!==l.annotations[d].rectangleDifference&&(l.annotations[d].rectangleDifference=JSON.stringify(l.annotations[d].rectangleDifference)),l.annotations[d].calibrate=this.getStringifiedMeasure(l.annotations[d].calibrate),!0===l.annotations[d].enableShapeLabel){l.annotations[d].labelBounds=JSON.stringify(this.pdfViewer.annotationModule.inputElementModule.calculateLabelBounds(JSON.parse(l.annotations[d].bounds),l.pageIndex));var c=l.annotations[d].labelFillColor;l.annotations[d].labelFillColor=JSON.stringify(this.getRgbCode(c)),l.annotations[d].labelBorderColor=JSON.stringify(this.getRgbCode(l.annotations[d].labelBorderColor)),l.annotations[d].labelSettings.fillColor=c,l.annotations[d].fontColor=JSON.stringify(this.getRgbCode(l.annotations[d].labelSettings.fontColor))}}r=l.annotations}t[l.pageIndex]=r}return JSON.stringify(t)},s.prototype.createScaleRatioWindow=function(){var e=this;if((0,a.xr)())this.pdfViewer._dotnetInstance.invokeMethodAsync("OpenScaleRatioDialog");else{var i=(0,a.az)("div",{id:this.pdfViewer.element.id+"_scale_ratio_window",className:"e-pv-scale-ratio-window"});this.pdfViewerBase.pageContainer.appendChild(i);var n=this.createRatioUI();this.scaleRatioDialog=new j.Vq({showCloseIcon:!0,closeOnEscape:!1,isModal:!0,header:this.pdfViewer.localeObj.getConstant("Scale Ratio"),target:this.pdfViewer.element,content:n,close:function(){e.sourceTextBox.destroy(),e.convertUnit.destroy(),e.destTextBox.destroy(),e.dispUnit.destroy(),e.scaleRatioDialog.destroy();var o=e.pdfViewerBase.getElement("_scale_ratio_window");o.parentElement.removeChild(o)}}),this.scaleRatioDialog.buttons=!a.AR.isDevice||this.pdfViewer.enableDesktopMode?[{buttonModel:{content:this.pdfViewer.localeObj.getConstant("OK"),isPrimary:!0},click:this.onOkClicked.bind(this)},{buttonModel:{content:this.pdfViewer.localeObj.getConstant("Cancel")},click:this.onCancelClicked.bind(this)}]:[{buttonModel:{content:this.pdfViewer.localeObj.getConstant("Cancel")},click:this.onCancelClicked.bind(this)},{buttonModel:{content:this.pdfViewer.localeObj.getConstant("OK"),isPrimary:!0},click:this.onOkClicked.bind(this)}],this.pdfViewer.enableRtl&&(this.scaleRatioDialog.enableRtl=!0),this.scaleRatioDialog.appendTo(i),this.convertUnit.content=this.createContent(this.pdfViewer.localeObj.getConstant(this.unit)).outerHTML,this.dispUnit.content=this.createContent(this.pdfViewer.localeObj.getConstant(this.displayUnit)).outerHTML,this.depthUnit.content=this.createContent(this.pdfViewer.localeObj.getConstant(this.displayUnit)).outerHTML}},s.prototype.createRatioUI=function(){var e=(0,a.az)("div"),t=this.pdfViewer.element.id,i=[{text:this.pdfViewer.localeObj.getConstant("pt"),label:"pt"},{text:this.pdfViewer.localeObj.getConstant("in"),label:"in"},{text:this.pdfViewer.localeObj.getConstant("mm"),label:"mm"},{text:this.pdfViewer.localeObj.getConstant("cm"),label:"cm"},{text:this.pdfViewer.localeObj.getConstant("p"),label:"p"},{text:this.pdfViewer.localeObj.getConstant("ft"),label:"ft"},{text:this.pdfViewer.localeObj.getConstant("ft_in"),label:"ft_in"},{text:this.pdfViewer.localeObj.getConstant("m"),label:"m"}],n=(0,a.az)("div",{id:t+"_scale_ratio_label",className:"e-pv-scale-ratio-text"});n.textContent=this.pdfViewer.localeObj.getConstant("Scale Ratio"),e.appendChild(n);var o=(0,a.az)("div",{id:t+"_scale_src_container"});e.appendChild(o);var r=this.createInputElement("input","e-pv-scale-ratio-src-input",t+"_src_input",o);this.sourceTextBox=new G.No({value:1,format:"##",cssClass:"e-pv-scale-ratio-src-input",min:1,max:100},r);var l=this.createInputElement("button","e-pv-scale-ratio-src-unit",t+"_src_unit",o);this.convertUnit=new Le.uw({items:i,cssClass:"e-pv-scale-ratio-src-unit"},l),this.convertUnit.select=this.convertUnitSelect.bind(this);var d=(0,a.az)("div",{id:t+"_scale_dest_container"}),h=this.createInputElement("input","e-pv-scale-ratio-dest-input",t+"_dest_input",d);this.destTextBox=new G.No({value:1,format:"##",cssClass:"e-pv-scale-ratio-dest-input",min:1,max:100},h);var p=this.createInputElement("button","e-pv-scale-ratio-dest-unit",t+"_dest_unit",d);this.dispUnit=new Le.uw({items:i,cssClass:"e-pv-scale-ratio-dest-unit"},p),this.dispUnit.select=this.dispUnitSelect.bind(this),e.appendChild(d);var f=(0,a.az)("div",{id:t+"_depth_label",className:"e-pv-depth-text"});f.textContent=this.pdfViewer.localeObj.getConstant("Depth"),e.appendChild(f);var c=(0,a.az)("div",{id:t+"_depth_container"});e.appendChild(c);var u=this.createInputElement("input","e-pv-depth-input",t+"_depth_input",c);this.depthTextBox=new G.No({value:this.volumeDepth,format:"##",cssClass:"e-pv-depth-input",min:1},u);var m=this.createInputElement("button","e-pv-depth-unit",t+"_depth_unit",c);return this.depthUnit=new Le.uw({items:i,cssClass:"e-pv-depth-unit"},m),this.depthUnit.select=this.depthUnitSelect.bind(this),e},s.prototype.convertUnitSelect=function(e){this.convertUnit.content=this.createContent(e.item.text).outerHTML},s.prototype.dispUnitSelect=function(e){this.dispUnit.content=this.createContent(e.item.text).outerHTML,this.depthUnit.content=this.createContent(e.item.text).outerHTML},s.prototype.depthUnitSelect=function(e){this.depthUnit.content=this.createContent(e.item.text).outerHTML},s.prototype.createContent=function(e){var t=(0,a.az)("div",{className:"e-pv-scale-unit-content"});return t.textContent=e,t},s.prototype.createInputElement=function(e,t,i,n){var o=(0,a.az)("div",{id:i+"_container",className:t+"-container"}),r=(0,a.az)(e,{id:i});return"input"===e&&(r.type="text"),o.appendChild(r),n.appendChild(o),r},s.prototype.onOkClicked=function(){if((0,a.xr)()){var e=document.querySelector("#"+this.pdfViewer.element.id+"_src_unit"),t=document.querySelector("#"+this.pdfViewer.element.id+"_dest_unit"),i=document.querySelector("#"+this.pdfViewer.element.id+"_ratio_input"),n=document.querySelector("#"+this.pdfViewer.element.id+"_dest_input"),o=document.querySelector("#"+this.pdfViewer.element.id+"_depth_input");e&&t&&i&&n&&o&&(this.unit=e.value,this.displayUnit=t.value,this.ratio=parseInt(n.value)/parseInt(i.value),this.volumeDepth=parseInt(o.value)),this.scaleRatioString=parseInt(i.value)+" "+this.unit+" = "+parseInt(n.value)+" "+this.displayUnit,this.updateMeasureValues(this.scaleRatioString,this.displayUnit,this.unit,this.volumeDepth)}else{var r,l;this.unit=this.getContent(this.convertUnit.content),this.displayUnit=this.getContent(this.dispUnit.content),this.ratio=this.destTextBox.value/this.sourceTextBox.value,this.volumeDepth=this.depthTextBox.value,this.scaleRatioString=this.sourceTextBox.value+" "+this.unit+" = "+this.destTextBox.value+" "+this.displayUnit,this.scaleRatioDialog.hide(),r=this.restoreUnit(this.convertUnit),l=this.restoreUnit(this.dispUnit),this.updateMeasureValues(this.scaleRatioString,l,r,this.volumeDepth)}},s.prototype.restoreUnit=function(e){for(var t,i=0;i<e.items.length;i++){var n=e.items[i];this.unit===n.text&&(t=n.label)}return t},s.prototype.updateMeasureValues=function(e,t,i,n){this.scaleRatioString=e,this.displayUnit=t,this.unit=i,this.volumeDepth=n;for(var o=0;o<this.pdfViewerBase.pageCount;o++){var r=this.getAnnotations(o,null);if(r)for(var l=0;l<r.length;l++){var d=(r=this.getAnnotations(o,null))[l];d.annotationSettings.isLock||(d.calibrate.ratio=e,d.calibrate.x[0].unit=t,d.calibrate.distance[0].unit=t,d.calibrate.area[0].unit=t,d.calibrate.x[0].conversionFactor=this.getFactor(i),"PolygonVolume"===d.indent&&(d.calibrate.depth=n),r[l]=d,this.manageAnnotations(r,o),this.pdfViewer.annotation.updateCalibrateValues(this.getAnnotationBaseModel(d.id)))}this.pdfViewer.annotation.renderAnnotations(o,null,null,null,null,!1)}},s.prototype.getAnnotationBaseModel=function(e){for(var t=null,i=0;i<this.pdfViewer.annotations.length;i++)if(e===this.pdfViewer.annotations[i].id){t=this.pdfViewer.annotations[i];break}return t},s.prototype.getContent=function(e){return e.split("</div>")[0].split('">')[1]},s.prototype.setConversion=function(e,t){var i;if(t){var n=t.pageIndex;"diagram_helper"===t.id&&(t=this.getCurrentObject(n=t.pageIndex?t.pageIndex:this.pdfViewerBase.activeElements.activePageID,null,t.annotName)),i=t?this.getCurrentValues(t.id,n):this.getCurrentValues()}else i=this.getCurrentValues();return this.convertPointToUnits(i.factor,e*i.ratio,i.unit)},s.prototype.onCancelClicked=function(){this.scaleRatioDialog.hide()},s.prototype.modifyInCollection=function(e,t,i,n){n||this.pdfViewerBase.updateDocumentEditedProperty(!0);var o=null,r=this.getAnnotations(t,null);if(null!=r&&i){for(var l=0;l<r.length;l++)if(i.id===r[l].id){if("bounds"===e)this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateAnnotationModifiedDate(i,!0),"Line"===r[l].shapeAnnotationType||"Polyline"===r[l].shapeAnnotationType||"Polygon"===r[l].shapeAnnotationType?(r[l].vertexPoints=i.vertexPoints,r[l].bounds={left:i.bounds.x,top:i.bounds.y,width:i.bounds.width,height:i.bounds.height,right:i.bounds.right,bottom:i.bounds.bottom}):r[l].bounds={left:i.bounds.x,top:i.bounds.y,width:i.bounds.width,height:i.bounds.height,right:i.bounds.right,bottom:i.bounds.bottom},!0===r[l].enableShapeLabel&&i.wrapper&&(r[l].labelBounds=this.pdfViewer.annotationModule.inputElementModule.calculateLabelBounds(i.wrapper.bounds));else if("fill"===e)r[l].fillColor=i.wrapper.children[0].style.fill,this.pdfViewer.enableShapeLabel&&(r[l].labelFillColor=i.wrapper.children[0].style.fill);else if("stroke"===e)r[l].strokeColor=i.wrapper.children[0].style.strokeColor;else if("opacity"===e)r[l].opacity=i.wrapper.children[0].style.opacity;else if("thickness"===e)r[l].thickness=i.wrapper.children[0].style.strokeWidth;else if("dashArray"===e)r[l].borderDashArray=i.wrapper.children[0].style.strokeDashArray,r[l].borderStyle=i.borderStyle;else if("startArrow"===e)r[l].lineHeadStart=this.pdfViewer.annotation.getArrowTypeForCollection(i.sourceDecoraterShapes);else if("endArrow"===e)r[l].lineHeadEnd=this.pdfViewer.annotation.getArrowTypeForCollection(i.taregetDecoraterShapes);else if("leaderLength"===e)r[l].leaderLength=i.leaderHeight;else if("notes"===e)r[l].note=i.notes,!0===r[l].enableShapeLabel&&(r[l].labelContent=i.notes);else{if("delete"===e){o=r.splice(l,1)[0];break}if("labelContent"===e){r[l].note=i.labelContent,r[l].labelContent=i.labelContent;break}"fontColor"===e?r[l].fontColor=i.fontColor:"fontSize"===e&&(r[l].fontSize=i.fontSize)}r[l].modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),this.pdfViewer.annotationModule.storeAnnotationCollections(r[l],t)}this.manageAnnotations(r,t)}return o},s.prototype.addInCollection=function(e,t){var i=this.getAnnotations(e,null);i&&i.push(t),this.manageAnnotations(i,e)},s.prototype.manageAnnotations=function(e,t){var i=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_shape_measure");if(this.pdfViewerBase.isStorageExceed&&(i=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_shape_measure"]),i){var n=JSON.parse(i);this.pdfViewerBase.isStorageExceed||window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_shape_measure");var o=this.pdfViewer.annotationModule.getPageCollection(n,t);n[o]&&(n[o].annotations=e);var r=JSON.stringify(n);this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_shape_measure"]=r:window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_annotations_shape_measure",r)}},s.prototype.getAnnotations=function(e,t){var i,n=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_shape_measure");if(this.pdfViewerBase.isStorageExceed&&(n=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_shape_measure"]),n){var o=JSON.parse(n),r=this.pdfViewer.annotationModule.getPageCollection(o,e);i=o[r]?o[r].annotations:t}else i=t;return i},s.prototype.getCurrentObject=function(e,t,i){var n=null,o=this.getAnnotations(e,null);if(null!=o)for(var r=0;r<o.length;r++)if(t){if(t===o[r].id){n=o[r];break}}else if(i&&i===o[r].annotName){n=o[r];break}return n},s.prototype.getCurrentValues=function(e,t){var i,n,o,r;if(e&&!isNaN(t)){var l=this.getCurrentObject(t,e);l?(i=this.getCurrentRatio(l.calibrate.ratio),n=l.calibrate.x[0].unit,o=l.calibrate.x[0].conversionFactor,r=l.calibrate.depth):(i=this.ratio,n=this.displayUnit,o=this.getFactor(this.unit),r=this.volumeDepth)}else i=this.ratio,n=this.displayUnit,o=this.getFactor(this.unit),r=this.volumeDepth;return{ratio:i,unit:n,factor:o,depth:r}},s.prototype.getCurrentRatio=function(e){var t=e.split(" ");return"="===t[3]?parseFloat(t[4])/parseFloat(t[0]):parseFloat(t[3])/parseFloat(t[0])},s.prototype.calculateArea=function(e,t,i){var n=this.getCurrentValues(t,i),o=this.getArea(e,n.factor,n.unit)*n.ratio;if("ft_in"===n.unit){var r=Math.round(100*o)/100;if(r>=12){if((r=(r=(Math.round(r/12*100)/100).toString()).split("."))[1]){var l=0;return r[1].charAt(1)?(l=parseInt(r[1].charAt(0))+"."+parseInt(r[1].charAt(1)),l=Math.round(l)):l=r[1],l?r[0]+" "+this.pdfViewer.localeObj.getConstant("sq")+" "+this.pdfViewer.localeObj.getConstant("ft")+" "+l+" "+this.pdfViewer.localeObj.getConstant("in"):r[0]+" "+this.pdfViewer.localeObj.getConstant("sq")+" "+this.pdfViewer.localeObj.getConstant("ft")}return r[0]+" "+this.pdfViewer.localeObj.getConstant("sq")+" "+this.pdfViewer.localeObj.getConstant("ft")}return Math.round(100*o)/100+" "+this.pdfViewer.localeObj.getConstant("sq")+" "+this.pdfViewer.localeObj.getConstant("in")}return"m"===n.unit?100*o/100+" "+this.pdfViewer.localeObj.getConstant("sq")+" "+this.pdfViewer.localeObj.getConstant(n.unit):Math.round(100*o)/100+" "+this.pdfViewer.localeObj.getConstant("sq")+" "+this.pdfViewer.localeObj.getConstant(n.unit)},s.prototype.getArea=function(e,t,i){for(var n=0,o=e.length-1,r=0;r<e.length;r++)n+=(e[o].x*this.pixelToPointFactor*t+e[r].x*this.pixelToPointFactor*t)*(e[o].y*this.pixelToPointFactor*t-e[r].y*this.pixelToPointFactor*t),o=r;return Math.abs("ft_in"===i?2*n:n/2)},s.prototype.calculateVolume=function(e,t,i){var n=this.getCurrentValues(t,i),o=n.depth?n.depth:this.volumeDepth,l=this.getArea(e,n.factor,n.unit)*(o*this.convertUnitToPoint(n.unit)*n.factor)*n.ratio;if("ft_in"===n.unit){var d=Math.round(100*l)/100;if(d>=12){if((d=(d=(Math.round(d/12*100)/100).toString()).split("."))[1]){var h=0;return d[1].charAt(1)?(h=parseInt(d[1].charAt(0))+"."+parseInt(d[1].charAt(1)),h=Math.round(h)):h=d[1],h?d[0]+" "+this.pdfViewer.localeObj.getConstant("cu")+" "+this.pdfViewer.localeObj.getConstant("ft")+" "+h+" "+this.pdfViewer.localeObj.getConstant("in"):d[0]+" "+this.pdfViewer.localeObj.getConstant("cu")+" "+this.pdfViewer.localeObj.getConstant("ft")}return d[0]+" "+this.pdfViewer.localeObj.getConstant("cu")+" "+this.pdfViewer.localeObj.getConstant("ft")}return Math.round(100*l)/100+" "+this.pdfViewer.localeObj.getConstant("cu")+" "+this.pdfViewer.localeObj.getConstant("in")}return Math.round(100*l)/100+" "+this.pdfViewer.localeObj.getConstant("cu")+" "+this.pdfViewer.localeObj.getConstant(n.unit)},s.prototype.calculatePerimeter=function(e){var t=se.getLengthFromListOfPoints(e.vertexPoints);return this.setConversion(t*this.pixelToPointFactor,e)},s.prototype.getFactor=function(e){var t;switch(e){case"in":case"ft_in":t=1/72;break;case"cm":t=1/28.346;break;case"mm":t=1/2.835;break;case"pt":t=1;break;case"p":t=1/12;break;case"ft":t=1/864;break;case"m":t=1/2834.64567}return t},s.prototype.convertPointToUnits=function(e,t,i){var n;if("ft_in"===i){var o=Math.round(t*e*100)/100;if(o>=12)if((o=(o=(Math.round(o/12*100)/100).toString()).split("."))[1]){var r=0;o[1].charAt(1)?(r=parseInt(o[1].charAt(0))+"."+parseInt(o[1].charAt(1)),r=Math.round(r)):r=o[1],n=r?o[0]+" "+this.pdfViewer.localeObj.getConstant("ft")+" "+r+" "+this.pdfViewer.localeObj.getConstant("in"):o[0]+" "+this.pdfViewer.localeObj.getConstant("ft")}else n=o[0]+" "+this.pdfViewer.localeObj.getConstant("ft");else n=Math.round(t*e*100)/100+" "+this.pdfViewer.localeObj.getConstant("in")}else n=Math.round(t*e*100)/100+" "+this.pdfViewer.localeObj.getConstant(i);return n},s.prototype.convertUnitToPoint=function(e){var t;switch(e){case"in":case"ft_in":t=72;break;case"cm":t=28.346;break;case"mm":t=2.835;break;case"pt":t=1;break;case"p":t=12;break;case"ft":t=864;break;case"m":t=2834.64567}return t},s.prototype.getStringifiedMeasure=function(e){return(0,a.le)(e)||(e.angle=JSON.stringify(e.angle),e.area=JSON.stringify(e.area),e.distance=JSON.stringify(e.distance),e.volume=JSON.stringify(e.volume)),JSON.stringify(e)},s.prototype.getRgbCode=function(e){!e.match(/#([a-z0-9]+)/gi)&&!e.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/)&&(e=this.pdfViewer.annotationModule.nameToHash(e));var t=e.split(",");return(0,a.le)(t[1])&&(t=(e=this.pdfViewer.annotationModule.getValue(e,"rgba")).split(",")),{r:parseInt(t[0].split("(")[1]),g:parseInt(t[1]),b:parseInt(t[2]),a:parseInt(t[3])}},s.prototype.saveImportedMeasureAnnotations=function(e,t){var i,n=null;if(e.VertexPoints){n=[];for(var o=0;o<e.VertexPoints.length;o++)n.push({x:e.VertexPoints[o].X,y:e.VertexPoints[o].Y})}var l={ratio:e.Calibrate.Ratio,x:this.getNumberFormatArray(e.Calibrate.X),distance:this.getNumberFormatArray(e.Calibrate.Distance),area:this.getNumberFormatArray(e.Calibrate.Area),angle:this.getNumberFormatArray(e.Calibrate.Angle),volume:this.getNumberFormatArray(e.Calibrate.Volume),targetUnitConversion:e.Calibrate.TargetUnitConversion};e.Calibrate.Depth&&(l.depth=e.Calibrate.Depth),e.Bounds&&!0===e.EnableShapeLabel&&(e.LabelBounds=this.pdfViewer.annotationModule.inputElementModule.calculateLabelBoundsFromLoadedDocument(e.Bounds),e.LabelBorderColor=e.LabelBorderColor?e.LabelBorderColor:e.StrokeColor,e.FontColor=e.FontColor?e.FontColor:e.StrokeColor,e.LabelFillColor=e.LabelFillColor?e.LabelFillColor:e.FillColor,e.FontSize=e.FontSize?e.FontSize:16,e.LabelSettings=e.LabelSettings?e.LabelSettings:this.pdfViewer.shapeLabelSettings),e.AnnotationSettings=e.AnnotationSettings?e.AnnotationSettings:this.pdfViewer.annotationModule.updateAnnotationSettings(e),e.Author=this.pdfViewer.annotationModule.updateAnnotationAuthor("measure",e.Subject),i={id:"measure",shapeAnnotationType:e.ShapeAnnotationType,author:e.Author,modifiedDate:e.ModifiedDate,subject:e.Subject,note:e.Note,strokeColor:e.StrokeColor,fillColor:e.FillColor,opacity:e.Opacity,thickness:e.Thickness,rectangleDifference:e.RectangleDifference,borderStyle:e.BorderStyle,borderDashArray:e.BorderDashArray,rotateAngle:e.RotateAngle,isCloudShape:e.IsCloudShape,cloudIntensity:e.CloudIntensity,vertexPoints:n,lineHeadStart:e.LineHeadStart,lineHeadEnd:e.LineHeadEnd,isLocked:e.IsLocked,bounds:{left:e.Bounds.X,top:e.Bounds.Y,width:e.Bounds.Width,height:e.Bounds.Height,right:e.Bounds.Right,bottom:e.Bounds.Bottom},caption:e.Caption,captionPosition:e.CaptionPosition,calibrate:l,leaderLength:e.LeaderLength,leaderLineExtension:e.LeaderLineExtension,leaderLineOffset:e.LeaderLineOffset,indent:e.Indent,annotName:e.AnnotName,comments:this.pdfViewer.annotationModule.getAnnotationComments(e.Comments,e,e.Author),review:{state:e.State,stateModel:e.StateModel,modifiedDate:e.ModifiedDate,author:e.Author},labelContent:e.LabelContent,enableShapeLabel:e.EnableShapeLabel,labelFillColor:e.LabelFillColor,labelBorderColor:e.LabelBorderColor,fontColor:e.FontColor,fontSize:e.FontSize,labelBounds:e.LabelBounds,annotationSelectorSettings:this.getSettings(e),labelSettings:e.LabelSettings,annotationSettings:e.AnnotationSettings,customData:this.pdfViewer.annotation.getCustomData(e),isPrint:e.IsPrint,isCommentLock:e.IsCommentLock,isAnnotationRotated:!1},this.pdfViewer.annotationModule.storeAnnotations(t,i,"_annotations_shape_measure")},s.prototype.updateMeasureAnnotationCollections=function(e,t){var n=null;if(e.VertexPoints){n=[];for(var o=0;o<e.VertexPoints.length;o++)n.push({x:e.VertexPoints[o].X,y:e.VertexPoints[o].Y})}var l={ratio:e.Calibrate.Ratio,x:this.getNumberFormatArray(e.Calibrate.X),distance:this.getNumberFormatArray(e.Calibrate.Distance),area:this.getNumberFormatArray(e.Calibrate.Area),angle:this.getNumberFormatArray(e.Calibrate.Angle),volume:this.getNumberFormatArray(e.Calibrate.Volume),targetUnitConversion:e.Calibrate.TargetUnitConversion};if(e.Calibrate.Depth&&(l.depth=e.Calibrate.Depth),e.Bounds&&!0===e.EnableShapeLabel){e.LabelBounds=this.pdfViewer.annotationModule.inputElementModule.calculateLabelBoundsFromLoadedDocument(e.Bounds),e.LabelBorderColor=e.LabelBorderColor?e.LabelBorderColor:e.StrokeColor,e.FontColor=e.FontColor?e.FontColor:e.StrokeColor,e.LabelFillColor=e.LabelFillColor?e.LabelFillColor:e.FillColor,e.FontSize=e.FontSize?e.FontSize:16;var d=this.pdfViewer.shapeLabelSettings;e.LabelSettings=e.LabelSettings?e.LabelSettings:{borderColor:e.StrokeColor,fillColor:e.FillColor,fontColor:e.FontColor,fontSize:e.FontSize,labelContent:e.LabelContent,labelHeight:d.labelHeight,labelWidth:d.labelWidth,opacity:e.Opacity}}return e.AnnotationSelectorSettings=e.AnnotationSelectorSettings?e.AnnotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,e.AnnotationSettings=e.AnnotationSettings?e.AnnotationSettings:this.pdfViewer.annotationModule.updateAnnotationSettings(e),e.IsLocked&&(e.AnnotationSettings.isLock=e.IsLocked),{id:"measure",shapeAnnotationType:e.ShapeAnnotationType,author:e.Author,modifiedDate:e.ModifiedDate,subject:e.Subject,note:e.Note,strokeColor:e.StrokeColor,fillColor:e.FillColor,opacity:e.Opacity,thickness:e.Thickness,rectangleDifference:e.RectangleDifference,borderStyle:e.BorderStyle,borderDashArray:e.BorderDashArray,rotateAngle:e.RotateAngle,isCloudShape:e.IsCloudShape,cloudIntensity:e.CloudIntensity,vertexPoints:n,lineHeadStart:e.LineHeadStart,lineHeadEnd:e.LineHeadEnd,isLocked:e.IsLocked,bounds:{left:e.Bounds.X,top:e.Bounds.Y,width:e.Bounds.Width,height:e.Bounds.Height,right:e.Bounds.Right,bottom:e.Bounds.Bottom},caption:e.Caption,captionPosition:e.CaptionPosition,calibrate:l,leaderLength:e.LeaderLength,leaderLineExtension:e.LeaderLineExtension,leaderLineOffset:e.LeaderLineOffset,indent:e.Indent,annotationId:e.AnnotName,comments:this.pdfViewer.annotationModule.getAnnotationComments(e.Comments,e,e.Author),review:{state:e.State,stateModel:e.StateModel,modifiedDate:e.ModifiedDate,author:e.Author},labelContent:e.LabelContent,enableShapeLabel:e.EnableShapeLabel,labelFillColor:e.LabelFillColor,labelBorderColor:e.LabelBorderColor,fontColor:e.FontColor,fontSize:e.FontSize,labelBounds:e.LabelBounds,pageNumber:t,annotationSelectorSettings:e.AnnotationSelectorSettings,labelSettings:e.labelSettings,annotationSettings:e.AnnotationSettings,customData:this.pdfViewer.annotation.getCustomData(e),isPrint:e.IsPrint}},s.prototype.updateAddAnnotationDetails=function(e,t,i){i=t?t.offset?t.offset:{x:10,y:10}:(t={offset:{x:10,y:10},pageNumber:0,width:void 0,height:void 0}).offset;var n=null,o=null,r=null,l="",d="",h="",p=!1,f=[],c=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),u=this.pdfViewer.annotation.createGUID();"Distance"==e?(n=this.pdfViewer.lineSettings.annotationSelectorSettings?this.pdfViewer.lineSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,r=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.lineSettings),o=this.pdfViewer.lineSettings.allowedInteractions?this.pdfViewer.lineSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions,l="LineDimension",d="Line",h="Distance calculation",p=!0,f=t.vertexPoints?t.vertexPoints:[{x:i.x,y:i.y},{x:i.x+100,y:i.y}],t.width=t.width?t.width:1,t.height=t.height?t.height:1):"Perimeter"==e?(n=this.pdfViewer.arrowSettings.annotationSelectorSettings?this.pdfViewer.arrowSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,r=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.arrowSettings),o=this.pdfViewer.arrowSettings.allowedInteractions?this.pdfViewer.arrowSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions,l="PolyLineDimension",d="Polyline",h="Perimeter calculation",p=!0,f=t.vertexPoints?t.vertexPoints:[{x:i.x,y:i.y},{x:i.x+85,y:i.y},{x:i.x+86,y:i.y+62}],t.width=t.width?t.width:1,t.height=t.height?t.height:1):"Area"==e?(n=this.pdfViewer.rectangleSettings.annotationSelectorSettings?this.pdfViewer.rectangleSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,r=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.rectangleSettings),o=this.pdfViewer.rectangleSettings.allowedInteractions?this.pdfViewer.rectangleSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions,l="PolygonDimension",d="Polygon",h="Area calculation",f=t.vertexPoints?t.vertexPoints:[{x:i.x,y:i.y},{x:i.x+88,y:i.y-1},{x:i.x+89,y:i.y+53},{x:i.x,y:i.y}],t.width=t.width?t.width:1,t.height=t.height?t.height:1):"Radius"==e?(n=this.pdfViewer.circleSettings.annotationSelectorSettings?this.pdfViewer.circleSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,r=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.circleSettings),o=this.pdfViewer.circleSettings.allowedInteractions?this.pdfViewer.circleSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions,l="PolygonRadius",d="Circle",h="Radius calculation",t.width=t.width?t.width:100,t.height=t.height?t.height:100,f=null):"Volume"==e&&(n=this.pdfViewer.polygonSettings.annotationSelectorSettings?this.pdfViewer.polygonSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,r=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.polygonSettings),o=this.pdfViewer.polygonSettings.allowedInteractions?this.pdfViewer.polygonSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions,l="PolygonVolume",d="Polygon",h="Volume calculation",f=t.vertexPoints?t.vertexPoints:[{x:i.x,y:i.y},{x:i.x,y:i.y+109},{x:i.x+120,y:i.y+109},{x:i.x+120,y:i.y-1},{x:i.x,y:i.y}],t.width=t.width?t.width:1,t.height=t.height?t.height:1),r.isLock=!!t.isLock&&t.isLock,r.minHeight=t.minHeight?t.minHeight:0,r.minWidth=t.minWidth?t.minWidth:0,r.maxWidth=t.maxWidth?t.maxWidth:0,r.maxHeight=t.maxHeight?t.maxHeight:0;var m_factor=.013888888888888888,g="";if(f||"Radius"==e||"Volume"==e)if("Distance"==e||"Perimeter"==e||"Radius"==e){var v=0;if("Radius"==e)v=t.width/2*this.pixelToPointFactor;else{for(var y=0;y<f.length-1;y++)v+=Math.sqrt(Math.pow(f[y].x-f[y+1].x,2)+Math.pow(f[y].y-f[y+1].y,2));v*=this.pixelToPointFactor}g=this.convertPointToUnits(m_factor,1*v,"in")}else if("Area"==e||"Volume"==e){for(var C=0,S=f.length-1,x=0;x<f.length;x++)C+=(f[S].x*this.pixelToPointFactor*m_factor+f[x].x*this.pixelToPointFactor*m_factor)*(f[S].y*this.pixelToPointFactor*m_factor-f[x].y*this.pixelToPointFactor*m_factor),S=x;C=Math.abs(C/2),"Volume"==e?(C=C*(96*this.convertUnitToPoint("in")*m_factor)*1,g=Math.round(100*C)/100+this.pdfViewer.localeObj.getConstant("cu")+" "+this.pdfViewer.localeObj.getConstant("in")):g=Math.round(100*C)/100+this.pdfViewer.localeObj.getConstant("sq")+" "+this.pdfViewer.localeObj.getConstant("in")}f&&(f=this.pdfViewer.annotation.getVertexPointsXY(f));var V=[];return V[0]={AllowedInteractions:t.allowedInteractions?t.allowedInteractions:o,AnnotName:u,AnnotType:"shape_measure",AnnotationSelectorSettings:t.annotationSelectorSettings?t.annotationSelectorSettings:n,AnnotationSettings:r,Author:t.author?t.author:"Guest",BorderDashArray:t.borderDashArray?t.borderDashArray:0,BorderStyle:"Solid",Bounds:{X:i.x,Y:i.y,Width:t.width,Height:t.height,Left:i.x,Top:i.y,Location:{X:i.x,Y:i.y},Size:{Height:t.height,IsEmpty:!1,Width:t.width}},Calibrate:{Area:[{ConversionFactor:1,Denominator:100,FormatDenominator:!1,FractionalType:"D",Unit:"sq in"}],Depth:t.depth?t.depth:0,Distance:[{ConversionFactor:1,Denominator:100,FormatDenominator:!1,FractionalType:"D",Unit:"in"}],Ratio:"1 in = 1 in",TargetUnitConversion:0,Volume:null,X:[{ConversionFactor:.013888889,Denominator:100,FormatDenominator:!1,FractionalType:"D",Unit:"in"}]},Caption:!0,CaptionPosition:"Top",CloudIntensity:0,Comments:null,CustomData:t.customData?t.customData:null,CreatedDate:c,EnableShapeLabel:!1,ExistingCustomData:null,FillColor:t.fillColor?t.fillColor:"#ffffff00",FontColor:null,FontSize:0,Indent:l,IsCloudShape:!1,IsCommentLock:!1,IsLocked:!!t.isLock&&t.isLock,IsPrint:!t.isPrint||t.isPrint,LabelBorderColor:null,LabelBounds:{X:0,Y:0,Width:0,Height:0},LabelContent:null,LabelFillColor:null,LabelSettings:null,LeaderLength:0,LeaderLineExtension:0,LeaderLineOffset:0,LineHeadEnd:t.lineHeadStartStyle?t.lineHeadStartStyle:p?"ClosedArrow":"None",LineHeadStart:t.lineHeadEndStyle?t.lineHeadEndStyle:p?"ClosedArrow":"None",ModifiedDate:"",Note:g,Opacity:t.opacity?t.opacity:1,RectangleDifference:null,RotateAngle:"RotateAngle0",ShapeAnnotationType:d,State:"",StateModel:"",StrokeColor:t.strokeColor?t.strokeColor:"#ff0000",Subject:h,Thickness:t.thickness?t.thickness:1,VertexPoints:f},{measureShapeAnnotation:V}},s}(),Rb=function(){function s(e,t){this.shapeCount=0,this.isAddAnnotationProgramatically=!1,this.pdfViewer=e,this.pdfViewerBase=t}return s.prototype.renderShapeAnnotations=function(e,t,i){if(e)if(e.length>=1){if(!this.pdfViewer.annotation.getStoredAnnotations(t,e,"_annotations_shape")||i)for(var o=0;o<e.length;o++){var r=e[o];r.annotationAddMode=this.pdfViewer.annotationModule.findAnnotationMode(r,t,r.AnnotType);var l=null;this.shapeCount=this.shapeCount+1;var d=void 0;if(r.ShapeAnnotationType){i&&this.pdfViewerBase.isJsonImported&&(r.Bounds=this.pdfViewerBase.importJsonForRotatedDocuments(r.Rotate,t,r.Bounds,r.AnnotationRotation),d=this.pdfViewerBase.isPageRotated);var h=null;if(r.VertexPoints)if(h=[],i&&this.pdfViewerBase.isJsonImported)h=this.pdfViewerBase.calculateVertexPoints(r.Rotate,t,r.VertexPoints,r.AnnotationRotation);else for(var p=0;p<r.VertexPoints.length;p++)h.push({x:r.VertexPoints[p].X?r.VertexPoints[p].X:r.VertexPoints[p].x,y:r.VertexPoints[p].Y?r.VertexPoints[p].Y:r.VertexPoints[p].y});r.Bounds&&!0===r.EnableShapeLabel&&(r.LabelBounds=this.pdfViewer.annotationModule.inputElementModule.calculateLabelBoundsFromLoadedDocument(r.Bounds),r.LabelBorderColor=r.LabelBorderColor?r.LabelBorderColor:r.StrokeColor,r.FontColor=r.FontColor?r.FontColor:r.StrokeColor,r.LabelFillColor=r.LabelFillColor?r.LabelFillColor:r.FillColor,r.FontSize=r.FontSize?r.FontSize:16,r.LabelSettings=r.LabelSettings?r.LabelSettings:this.pdfViewer.shapeLabelSettings),r.AnnotationSelectorSettings=r.AnnotationSelectorSettings?r.AnnotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,r.AnnotationSettings=r.AnnotationSettings?r.AnnotationSettings:this.pdfViewer.annotationModule.updateAnnotationSettings(r),r.allowedInteractions=r.AllowedInteractions?r.AllowedInteractions:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(r);var m;m="Imported Annotation"===r.annotationAddMode?r.IsPrint:r.AnnotationSettings.isPrint;var C,g=r.Bounds.X?r.Bounds.X:r.Bounds.x,v=r.Bounds.Y?r.Bounds.Y:r.Bounds.y,y=r.Bounds.Width?r.Bounds.Width:r.Bounds.width,b=r.Bounds.Height?r.Bounds.Height:r.Bounds.height,S=(l={id:"shape"+this.shapeCount,shapeAnnotationType:r.ShapeAnnotationType,author:r.Author,allowedInteractions:r.allowedInteractions,modifiedDate:r.ModifiedDate,subject:r.Subject,pageNumber:t,note:r.Note,strokeColor:r.StrokeColor,fillColor:r.FillColor,opacity:r.Opacity,thickness:r.Thickness,rectangleDifference:r.RectangleDifference,borderStyle:r.BorderStyle,borderDashArray:r.BorderDashArray,rotateAngle:r.RotateAngle,isCloudShape:r.IsCloudShape,cloudIntensity:r.CloudIntensity,vertexPoints:h,lineHeadStart:r.LineHeadStart,lineHeadEnd:r.LineHeadEnd,isLocked:r.IsLocked,comments:this.pdfViewer.annotationModule.getAnnotationComments(r.Comments,r,r.Author),review:{state:r.State,stateModel:r.StateModel,modifiedDate:r.ModifiedDate,author:r.Author},annotName:r.AnnotName,bounds:{left:g,top:v,width:y,height:b,right:r.Bounds.Right,bottom:r.Bounds.Bottom},labelContent:r.LabelContent,enableShapeLabel:r.EnableShapeLabel,labelFillColor:r.LabelFillColor,fontColor:r.FontColor,labelBorderColor:r.LabelBorderColor,fontSize:r.FontSize,labelBounds:r.LabelBounds,annotationSelectorSettings:this.getSettings(r),labelSettings:r.LabelSettings,annotationSettings:r.AnnotationSettings,customData:this.pdfViewer.annotation.getCustomData(r),isPrint:m,isCommentLock:r.IsCommentLock,isAnnotationRotated:d}).vertexPoints;null==h&&(S=[]),r.AnnotationSelectorSettings=r.AnnotationSelectorSettings?r.AnnotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,C={id:"shape"+this.shapeCount,shapeAnnotationType:this.getShapeType(l),author:l.author,allowedInteractions:l.allowedInteractions,modifiedDate:l.modifiedDate,annotName:l.annotName,subject:l.subject,notes:l.note,fillColor:l.fillColor,strokeColor:l.strokeColor,opacity:l.opacity,thickness:l.thickness,borderStyle:l.borderStyle,borderDashArray:l.borderDashArray?l.borderDashArray.toString():"0",rotateAngle:parseFloat(l.rotateAngle.split("Angle")[1]),comments:l.comments,review:l.review,isCloudShape:l.isCloudShape,cloudIntensity:l.cloudIntensity,taregetDecoraterShapes:this.pdfViewer.annotation.getArrowType(l.lineHeadEnd),sourceDecoraterShapes:this.pdfViewer.annotation.getArrowType(l.lineHeadStart),vertexPoints:S,bounds:{x:l.bounds.left,y:l.bounds.top,width:l.bounds.width,height:l.bounds.height},pageIndex:l.pageNumber,labelContent:r.LabelContent,enableShapeLabel:r.EnableShapeLabel,labelFillColor:r.LabelFillColor,fontColor:r.FontColor,labelBorderColor:r.LabelBorderColor,fontSize:r.FontSize,labelBounds:r.LabelBounds,annotationSelectorSettings:r.AnnotationSelectorSettings,annotationSettings:l.annotationSettings,annotationAddMode:r.annotationAddMode,isPrint:m,isCommentLock:l.isCommentLock},this.pdfViewer.add(C),this.pdfViewer.annotationModule.storeAnnotations(t,l,"_annotations_shape"),this.isAddAnnotationProgramatically&&this.pdfViewer.fireAnnotationAdd(C.pageIndex,C.annotName,r.ShapeAnnotationType,C.bounds,{opacity:C.opacity,strokeColor:C.strokeColor,thickness:C.thickness,modifiedDate:C.modifiedDate,width:C.bounds.width,height:C.bounds.height})}}}else e.shapeAnnotationType&&(l=this.createAnnotationObject(e),this.pdfViewer.annotationModule.isFormFieldShape=!(0,a.le)(e.formFieldAnnotationType)&&""!==e.formFieldAnnotationType,this.pdfViewer.annotationModule.storeAnnotations(t,l,"_annotations_shape"),this.pdfViewer.annotationModule.triggerAnnotationAdd(e))},s.prototype.getSettings=function(e){return e.AnnotationSelectorSettings?e.AnnotationSelectorSettings:this.getSelector(e.ShapeAnnotationType,e.Subject)},s.prototype.setAnnotationType=function(e){this.updateShapeProperties(),this.pdfViewerBase.disableTextSelectionMode();var t="Guest";switch(e){case"Line":this.currentAnnotationMode="Line";var i=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();t="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.lineSettings.author?this.pdfViewer.lineSettings.author:"Guest",this.pdfViewer.drawingObject={shapeAnnotationType:this.setShapeType("Line"),fillColor:this.lineFillColor,notes:"",strokeColor:this.lineStrokeColor,opacity:this.lineOpacity,thickness:this.lineThickness,modifiedDate:i,borderDashArray:this.lineDashArray.toString(),sourceDecoraterShapes:this.pdfViewer.annotation.getArrowType(this.lineStartHead.toString()),taregetDecoraterShapes:this.pdfViewer.annotation.getArrowType(this.lineEndHead.toString()),author:t,subject:"Line",lineHeadStart:this.lineStartHead,lineHeadEnd:this.lineEndHead,isCommentLock:!1},this.pdfViewer.tool="Line";break;case"Arrow":this.currentAnnotationMode="Arrow";var n=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();t="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.arrowSettings.author?this.pdfViewer.arrowSettings.author:"Guest",this.pdfViewer.drawingObject={shapeAnnotationType:this.setShapeType("Arrow"),opacity:this.arrowOpacity,sourceDecoraterShapes:this.pdfViewer.annotation.getArrowType(this.arrowStartHead.toString()),taregetDecoraterShapes:this.pdfViewer.annotation.getArrowType(this.arrowEndHead.toString()),fillColor:this.arrowFillColor,strokeColor:this.arrowStrokeColor,notes:"",thickness:this.arrowThickness,borderDashArray:this.arrowDashArray.toString(),author:t,subject:"Arrow",modifiedDate:n,lineHeadStart:this.arrowStartHead,lineHeadEnd:this.arrowEndHead,isCommentLock:!1},this.pdfViewer.tool="Line";break;case"Rectangle":this.currentAnnotationMode="Rectangle";var o=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();t="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.rectangleSettings.author?this.pdfViewer.rectangleSettings.author:"Guest",this.pdfViewer.drawingObject={shapeAnnotationType:this.setShapeType("Rectangle"),strokeColor:this.rectangleStrokeColor,fillColor:this.rectangleFillColor,opacity:this.rectangleOpacity,notes:"",thickness:this.rectangleThickness,borderDashArray:"0",modifiedDate:o,author:t,subject:"Rectangle",isCommentLock:!1},this.pdfViewer.tool="DrawTool";break;case"Circle":this.currentAnnotationMode="Circle";var r=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();t="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.circleSettings.author?this.pdfViewer.circleSettings.author:"Guest",this.pdfViewer.drawingObject={shapeAnnotationType:this.setShapeType("Circle"),strokeColor:this.circleStrokeColor,fillColor:this.circleFillColor,opacity:this.circleOpacity,notes:"",thickness:this.circleThickness,borderDashArray:"0",modifiedDate:r,author:t,subject:"Circle",isCommentLock:!1},this.pdfViewer.tool="DrawTool";break;case"Polygon":this.currentAnnotationMode="Polygon";var l=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();this.pdfViewer.drawingObject={strokeColor:this.polygonStrokeColor,fillColor:this.polygonFillColor,opacity:this.polygonOpacity,thickness:this.polygonThickness,borderDashArray:"0",notes:"",author:t="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.polygonSettings.author?this.pdfViewer.polygonSettings.author:"Guest",subject:"Polygon",modifiedDate:l,borderStyle:"",isCommentLock:!1},this.pdfViewer.tool="Polygon"}},s.prototype.updateShapeProperties=function(){this.lineFillColor=this.pdfViewer.lineSettings.fillColor?this.pdfViewer.lineSettings.fillColor:"#ffffff00",this.lineStrokeColor=this.pdfViewer.lineSettings.strokeColor?this.pdfViewer.lineSettings.strokeColor:"#ff0000",this.lineThickness=this.pdfViewer.lineSettings.thickness?this.pdfViewer.lineSettings.thickness:1,this.lineOpacity=this.pdfViewer.lineSettings.opacity?this.pdfViewer.lineSettings.opacity:1,this.lineDashArray=this.pdfViewer.lineSettings.borderDashArray?this.pdfViewer.lineSettings.borderDashArray:0,this.lineStartHead=this.pdfViewer.lineSettings.lineHeadStartStyle?this.pdfViewer.lineSettings.lineHeadStartStyle:"None",this.lineEndHead=this.pdfViewer.lineSettings.lineHeadEndStyle?this.pdfViewer.lineSettings.lineHeadEndStyle:"None",this.arrowFillColor=this.pdfViewer.arrowSettings.fillColor?this.pdfViewer.arrowSettings.fillColor:"#ffffff00",this.arrowStrokeColor=this.pdfViewer.arrowSettings.strokeColor?this.pdfViewer.arrowSettings.strokeColor:"#ff0000",this.arrowThickness=this.pdfViewer.arrowSettings.thickness?this.pdfViewer.arrowSettings.thickness:1,this.arrowOpacity=this.pdfViewer.arrowSettings.opacity?this.pdfViewer.arrowSettings.opacity:1,this.arrowDashArray=this.pdfViewer.arrowSettings.borderDashArray?this.pdfViewer.arrowSettings.borderDashArray:0,this.arrowStartHead=this.pdfViewer.arrowSettings.lineHeadStartStyle?this.pdfViewer.arrowSettings.lineHeadStartStyle:"Closed",this.arrowEndHead=this.pdfViewer.arrowSettings.lineHeadEndStyle?this.pdfViewer.arrowSettings.lineHeadEndStyle:"Closed",this.rectangleFillColor=this.pdfViewer.rectangleSettings.fillColor?this.pdfViewer.rectangleSettings.fillColor:"#ffffff00",this.rectangleStrokeColor=this.pdfViewer.rectangleSettings.strokeColor?this.pdfViewer.rectangleSettings.strokeColor:"#ff0000",this.rectangleThickness=this.pdfViewer.rectangleSettings.thickness?this.pdfViewer.rectangleSettings.thickness:1,this.rectangleOpacity=this.pdfViewer.rectangleSettings.opacity?this.pdfViewer.rectangleSettings.opacity:1,this.circleFillColor=this.pdfViewer.circleSettings.fillColor?this.pdfViewer.circleSettings.fillColor:"#ffffff00",this.circleStrokeColor=this.pdfViewer.circleSettings.strokeColor?this.pdfViewer.circleSettings.strokeColor:"#ff0000",this.circleThickness=this.pdfViewer.circleSettings.thickness?this.pdfViewer.circleSettings.thickness:1,this.circleOpacity=this.pdfViewer.circleSettings.opacity?this.pdfViewer.circleSettings.opacity:1,this.polygonFillColor=this.pdfViewer.polygonSettings.fillColor?this.pdfViewer.polygonSettings.fillColor:"#ffffff00",this.polygonStrokeColor=this.pdfViewer.polygonSettings.strokeColor?this.pdfViewer.polygonSettings.strokeColor:"#ff0000",this.polygonThickness=this.pdfViewer.polygonSettings.thickness?this.pdfViewer.polygonSettings.thickness:1,this.polygonOpacity=this.pdfViewer.polygonSettings.opacity?this.pdfViewer.polygonSettings.opacity:1},s.prototype.setShapeType=function(e){var t;switch(e){case"Line":case"Polyline":t="Line";break;case"Circle":t="Ellipse";break;case"Square":t="Rectangle";break;case"Arrow":t="LineWidthArrowHead"}return t},s.prototype.getShapeType=function(e){var t;switch(e.shapeAnnotationType){case"Line":case"Polyline":t="Line";break;case"Circle":t="Ellipse";break;case"Square":t="Rectangle";break;case"Polygon":t="Polygon"}return("Line"===e.shapeAnnotationType||"Polyline"===e.shapeAnnotationType)&&("None"!==e.lineHeadStart||"None"!==e.lineHeadEnd)&&(t="LineWidthArrowHead"),t},s.prototype.getShapeAnnotType=function(e){var t;switch(e){case"Line":case"LineWidthArrowHead":t="Line";break;case"Rectangle":t="Square";break;case"Ellipse":t="Circle";break;case"Polygon":t="Polygon"}return t},s.prototype.modifyInCollection=function(e,t,i){this.pdfViewer.annotationModule.isFormFieldShape=!(0,a.le)(i.formFieldAnnotationType)&&""!==i.formFieldAnnotationType,this.pdfViewerBase.updateDocumentEditedProperty(!0);var n=null;i&&"bounds"===e&&this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateAnnotationModifiedDate(i,!0);var o=this.getAnnotations(t,null);if(null!=o&&i){for(var r=0;r<o.length;r++)if(i.id===o[r].id){if("bounds"===e){if("Line"===o[r].shapeAnnotationType||"Polygon"===o[r].shapeAnnotationType?(o[r].vertexPoints=i.vertexPoints,o[r].bounds={left:i.bounds.x,top:i.bounds.y,width:i.bounds.width,height:i.bounds.height,right:i.bounds.right,bottom:i.bounds.bottom}):o[r].bounds={left:i.bounds.x,top:i.bounds.y,width:i.bounds.width,height:i.bounds.height,right:i.bounds.right,bottom:i.bounds.bottom},!0===o[r].enableShapeLabel&&i.wrapper){var l=0,d=0,h=0;i.wrapper.bounds.width&&(h=(h=i.wrapper.bounds.width/2)>0&&h<151?h:151),i.wrapper.bounds.left&&(d=i.wrapper.bounds.left+i.wrapper.bounds.width/2-h/2),i.wrapper.bounds.top&&(l=i.wrapper.bounds.top+i.wrapper.bounds.height/2-12.3),o[r].labelBounds={left:d,top:l,width:h,height:24.6,right:0,bottom:0}}}else if("fill"===e)o[r].fillColor=i.wrapper.children[0].style.fill;else if("stroke"===e)o[r].strokeColor=i.wrapper.children[0].style.strokeColor;else if("opacity"===e)o[r].opacity=i.wrapper.children[0].style.opacity;else if("thickness"===e)o[r].thickness=i.wrapper.children[0].style.strokeWidth;else if("dashArray"===e)o[r].borderDashArray=i.wrapper.children[0].style.strokeDashArray,o[r].borderStyle=i.borderStyle;else if("startArrow"===e)o[r].lineHeadStart=this.pdfViewer.annotation.getArrowTypeForCollection(i.sourceDecoraterShapes);else if("endArrow"===e)o[r].lineHeadEnd=this.pdfViewer.annotation.getArrowTypeForCollection(i.taregetDecoraterShapes);else if("notes"===e)o[r].note=i.notes;else{if("delete"===e){n=o.splice(r,1)[0];break}if("labelContent"===e){o[r].note=i.labelContent,o[r].labelContent=i.labelContent;break}"fontColor"===e?o[r].fontColor=i.fontColor:"fontSize"===e&&(o[r].fontSize=i.fontSize)}o[r].modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),this.pdfViewer.annotationModule.storeAnnotationCollections(o[r],t)}this.manageAnnotations(o,t)}return n},s.prototype.addInCollection=function(e,t){var i=this.getAnnotations(e,null);i&&i.push(t),this.manageAnnotations(i,e)},s.prototype.saveShapeAnnotations=function(){var e=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_shape");this.pdfViewerBase.isStorageExceed&&(e=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_shape"]);for(var t=new Array,i=0;i<this.pdfViewerBase.pageCount;i++)t[i]=[];if(e&&!this.pdfViewer.annotationSettings.skipDownload)for(var n=JSON.parse(e),o=0;o<n.length;o++){var r=[],l=n[o];if(l){for(var d=0;l.annotations.length>d;d++)if(this.pdfViewerBase.checkFormFieldCollection(l.annotations[d].id))l.annotations[d]="";else{if(this.pdfViewer.annotationModule.updateModifiedDate(l.annotations[d]),this.pdfViewerBase.isJsonExported)if(l.annotations[d].isAnnotationRotated)l.annotations[d].bounds=this.pdfViewer.annotation.getBounds(l.annotations[d].bounds,l.pageIndex),l.annotations[d].vertexPoints=this.pdfViewer.annotation.getVertexPoints(l.annotations[d].vertexPoints,l.pageIndex);else{var h=this.pdfViewerBase.pageSize[l.pageIndex];h&&(l.annotations[d].annotationRotation=h.rotation)}if(l.annotations[d].bounds=JSON.stringify(this.pdfViewer.annotation.getBounds(l.annotations[d].bounds,l.pageIndex)),l.annotations[d].strokeColor=JSON.stringify(this.getRgbCode(l.annotations[d].strokeColor)),l.annotations[d].fillColor=JSON.stringify(this.getRgbCode(l.annotations[d].fillColor)),l.annotations[d].vertexPoints=JSON.stringify(this.pdfViewer.annotation.getVertexPoints(l.annotations[d].vertexPoints,l.pageIndex)),null!==l.annotations[d].rectangleDifference&&(l.annotations[d].rectangleDifference=JSON.stringify(l.annotations[d].rectangleDifference)),!0===l.annotations[d].enableShapeLabel){l.annotations[d].labelBounds=JSON.stringify(this.pdfViewer.annotationModule.inputElementModule.calculateLabelBounds(JSON.parse(l.annotations[d].bounds)));var c=l.annotations[d].labelFillColor;l.annotations[d].labelFillColor=JSON.stringify(this.getRgbCode(c)),l.annotations[d].labelBorderColor=JSON.stringify(this.getRgbCode(l.annotations[d].labelBorderColor)),l.annotations[d].labelSettings.fillColor=c,l.annotations[d].fontColor=JSON.stringify(this.getRgbCode(l.annotations[d].labelSettings.fontColor))}}l.annotations=l.annotations.filter(function(g){return g}),r=l.annotations}t[l.pageIndex]=r}return JSON.stringify(t)},s.prototype.manageAnnotations=function(e,t){var i=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_shape");if(this.pdfViewerBase.isStorageExceed&&(i=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_shape"]),i){var n=JSON.parse(i);this.pdfViewerBase.isStorageExceed||window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_shape");var o=this.pdfViewer.annotationModule.getPageCollection(n,t);n[o]&&(n[o].annotations=e);var r=JSON.stringify(n);this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_shape"]=r:window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_annotations_shape",r)}},s.prototype.createAnnotationObject=function(e){var t,i,n=this.pdfViewer.annotation.createGUID();if(!e.formFieldAnnotationType){var o=this.pdfViewer.annotation.stickyNotesAnnotationModule.addComments("shape",e.pageIndex+1,e.shapeAnnotationType);o&&(document.getElementById(o).id=n)}e.annotName=n,e.wrapper.bounds?(t={left:e.wrapper.bounds.x,top:e.wrapper.bounds.y,height:e.wrapper.bounds.height,width:e.wrapper.bounds.width,right:e.wrapper.bounds.right,bottom:e.wrapper.bounds.bottom},i=this.pdfViewer.annotationModule.inputElementModule.calculateLabelBounds(e.wrapper.bounds)):(t={left:0,top:0,height:0,width:0,right:0,bottom:0},i={left:0,top:0,height:0,width:0,right:0,bottom:0}),e.author=this.pdfViewer.annotationModule.updateAnnotationAuthor("shape","Line"===e.subject&&"Polygon"===e.shapeAnnotationType?"Polygon":e.subject),this.pdfViewer.annotation.stickyNotesAnnotationModule.addTextToComments(n,e.notes);var r=parseInt(e.borderDashArray);r=isNaN(r)?0:r;var l=this.pdfViewer.annotationModule.findAnnotationSettings(e,!0);e.isPrint=l.isPrint;var d=this.pdfViewer.shapeLabelSettings,h={borderColor:e.strokeColor,fillColor:e.fillColor,fontColor:e.fontColor,fontSize:e.fontSize,labelContent:e.labelContent,labelHeight:d.labelHeight,labelWidth:d.labelMaxWidth,opacity:e.opacity};return{id:e.id,shapeAnnotationType:this.getShapeAnnotType(e.shapeAnnotationType),author:e.author,allowedInteractions:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(e),subject:e.subject,note:e.notes,strokeColor:e.strokeColor,annotName:n,comments:[],review:{state:"",stateModel:"",modifiedDate:this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),author:e.author},fillColor:e.fillColor,opacity:e.opacity,thickness:e.thickness,pageNumber:e.pageIndex,borderStyle:e.borderStyle,borderDashArray:r,bounds:t,modifiedDate:this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),rotateAngle:"RotateAngle"+e.rotateAngle,isCloudShape:e.isCloudShape,cloudIntensity:e.cloudIntensity,vertexPoints:e.vertexPoints,lineHeadStart:this.pdfViewer.annotation.getArrowTypeForCollection(e.sourceDecoraterShapes),lineHeadEnd:this.pdfViewer.annotation.getArrowTypeForCollection(e.taregetDecoraterShapes),rectangleDifference:[],isLocked:l.isLock,labelContent:e.labelContent,enableShapeLabel:e.enableShapeLabel,labelFillColor:e.labelFillColor,fontColor:e.fontColor,labelBorderColor:e.labelBorderColor,fontSize:e.fontSize,labelBounds:i,annotationSelectorSettings:this.getSelector(e.shapeAnnotationType,e.subject),labelSettings:h,annotationSettings:l,customData:this.pdfViewer.annotation.getShapeData(e.shapeAnnotationType,e.subject),isPrint:e.isPrint,isCommentLock:e.isCommentLock,isAnnotationRotated:!1}},s.prototype.getSelector=function(e,t){var i=this.pdfViewer.annotationSelectorSettings;return"Line"===e&&"Arrow"!==t&&this.pdfViewer.lineSettings.annotationSelectorSettings?i=this.pdfViewer.lineSettings.annotationSelectorSettings:"LineWidthArrowHead"!==e&&"Arrow"!==t||!this.pdfViewer.lineSettings.annotationSelectorSettings?"Rectangle"!==e&&"Square"!==e||!this.pdfViewer.rectangleSettings.annotationSelectorSettings?"Ellipse"!==e&&"Circle"!==e||!this.pdfViewer.circleSettings.annotationSelectorSettings?"Polygon"===e&&this.pdfViewer.polygonSettings.annotationSelectorSettings&&(i=this.pdfViewer.polygonSettings.annotationSelectorSettings):i=this.pdfViewer.circleSettings.annotationSelectorSettings:i=this.pdfViewer.rectangleSettings.annotationSelectorSettings:i=this.pdfViewer.arrowSettings.annotationSelectorSettings,i},s.prototype.getAnnotations=function(e,t){var i,n=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_shape");if(this.pdfViewerBase.isStorageExceed&&(n=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_shape"]),n){var o=JSON.parse(n),r=this.pdfViewer.annotationModule.getPageCollection(o,e);i=o[r]?o[r].annotations:t}else i=t;return i},s.prototype.getRgbCode=function(e){!e.match(/#([a-z0-9]+)/gi)&&!e.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/)&&(e=this.pdfViewer.annotationModule.nameToHash(e));var t=e.split(",");return(0,a.le)(t[1])&&(t=(e=this.pdfViewer.annotationModule.getValue(e,"rgba")).split(",")),{r:parseInt(t[0].split("(")[1]),g:parseInt(t[1]),b:parseInt(t[2]),a:parseFloat(t[3])}},s.prototype.saveImportedShapeAnnotations=function(e,t){var i,n=null;if(e.Author=this.pdfViewer.annotationModule.updateAnnotationAuthor("shape",e.Subject),e.VertexPoints){n=[];for(var o=0;o<e.VertexPoints.length;o++)n.push({x:e.VertexPoints[o].X,y:e.VertexPoints[o].Y})}e.Bounds&&!0===e.EnableShapeLabel&&(e.LabelBounds=this.pdfViewer.annotationModule.inputElementModule.calculateLabelBoundsFromLoadedDocument(e.Bounds),e.LabelBorderColor=e.LabelBorderColor?e.LabelBorderColor:e.StrokeColor,e.FontColor=e.FontColor?e.FontColor:e.StrokeColor,e.LabelFillColor=e.LabelFillColor?e.LabelFillColor:e.FillColor,e.FontSize=e.FontSize?e.FontSize:16,e.LabelSettings=e.LabelSettings?e.LabelSettings:this.pdfViewer.shapeLabelSettings),e.AnnotationSettings=e.AnnotationSettings?e.AnnotationSettings:this.pdfViewer.annotationModule.updateAnnotationSettings(e),e.allowedInteractions=this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(e),i={id:"shape",shapeAnnotationType:e.ShapeAnnotationType,author:e.Author,allowedInteractions:e.allowedInteractions,modifiedDate:e.ModifiedDate,subject:e.Subject,pageNumber:t,note:e.Note,strokeColor:e.StrokeColor,fillColor:e.FillColor,opacity:e.Opacity,thickness:e.Thickness,rectangleDifference:e.RectangleDifference,borderStyle:e.BorderStyle,borderDashArray:e.BorderDashArray,rotateAngle:e.RotateAngle,isCloudShape:e.IsCloudShape,cloudIntensity:e.CloudIntensity,vertexPoints:n,lineHeadStart:e.LineHeadStart,lineHeadEnd:e.LineHeadEnd,isLocked:e.IsLocked,comments:this.pdfViewer.annotationModule.getAnnotationComments(e.Comments,e,e.Author),review:{state:e.State,stateModel:e.StateModel,modifiedDate:e.ModifiedDate,author:e.Author},annotName:e.AnnotName,bounds:{left:e.Bounds.X,top:e.Bounds.Y,width:e.Bounds.Width,height:e.Bounds.Height,right:e.Bounds.Right,bottom:e.Bounds.Bottom},labelContent:e.LabelContent,enableShapeLabel:e.EnableShapeLabel,labelFillColor:e.LabelFillColor,labelBorderColor:e.LabelBorderColor,fontColor:e.FontColor,fontSize:e.FontSize,labelBounds:e.LabelBounds,annotationSelectorSettings:this.getSettings(e),labelSettings:e.LabelSettings,annotationSettings:e.AnnotationSettings,customData:this.pdfViewer.annotation.getCustomData(e),isPrint:e.IsPrint,isCommentLock:e.IsCommentLock,isAnnotationRotated:!1},this.pdfViewer.annotationModule.storeAnnotations(t,i,"_annotations_shape")},s.prototype.updateShapeAnnotationCollections=function(e,t){var n=null;if(e.VertexPoints){n=[];for(var o=0;o<e.VertexPoints.length;o++)n.push({x:e.VertexPoints[o].X,y:e.VertexPoints[o].Y})}if(e.Bounds&&!0===e.EnableShapeLabel){e.LabelBounds=this.pdfViewer.annotationModule.inputElementModule.calculateLabelBoundsFromLoadedDocument(e.Bounds),e.LabelBorderColor=e.LabelBorderColor?e.LabelBorderColor:e.StrokeColor,e.FontColor=e.FontColor?e.FontColor:e.StrokeColor,e.LabelFillColor=e.LabelFillColor?e.LabelFillColor:e.FillColor,e.FontSize=e.FontSize?e.FontSize:16;var l=this.pdfViewer.shapeLabelSettings;e.LabelSettings=e.LabelSettings?e.LabelSettings:{borderColor:e.StrokeColor,fillColor:e.FillColor,fontColor:e.FontColor,fontSize:e.FontSize,labelContent:e.LabelContent,labelHeight:l.labelHeight,labelWidth:l.labelWidth,opacity:e.Opacity}}return e.AnnotationSettings=e.AnnotationSettings?e.AnnotationSettings:this.pdfViewer.annotationModule.updateAnnotationSettings(e),e.IsLocked&&(e.AnnotationSettings.isLock=e.IsLocked),e.allowedInteractions=e.AllowedInteractions?e.AllowedInteractions:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(e),{id:"shape",shapeAnnotationType:e.ShapeAnnotationType,author:e.Author,allowedInteractions:e.allowedInteractions,modifiedDate:e.ModifiedDate,subject:e.Subject,note:e.Note,strokeColor:e.StrokeColor,fillColor:e.FillColor,opacity:e.Opacity,thickness:e.Thickness,rectangleDifference:e.RectangleDifference,borderStyle:e.BorderStyle,borderDashArray:e.BorderDashArray,rotateAngle:e.RotateAngle,isCloudShape:e.IsCloudShape,cloudIntensity:e.CloudIntensity,vertexPoints:n,lineHeadStart:e.LineHeadStart,lineHeadEnd:e.LineHeadEnd,isLocked:e.IsLocked,comments:this.pdfViewer.annotationModule.getAnnotationComments(e.Comments,e,e.Author),review:{state:e.State,stateModel:e.StateModel,modifiedDate:e.ModifiedDate,author:e.Author},annotationId:e.AnnotName,bounds:{left:e.Bounds.X,top:e.Bounds.Y,width:e.Bounds.Width,height:e.Bounds.Height,right:e.Bounds.Right,bottom:e.Bounds.Bottom},labelContent:e.LabelContent,enableShapeLabel:e.EnableShapeLabel,labelFillColor:e.LabelFillColor,labelBorderColor:e.LabelBorderColor,fontColor:e.FontColor,fontSize:e.FontSize,labelBounds:e.LabelBounds,pageNumber:t,labelSettings:e.LabelSettings,annotationSettings:e.AnnotationSettings,customData:this.pdfViewer.annotation.getCustomData(e),isPrint:e.IsPrint}},s.prototype.updateAddAnnotationDetails=function(e,t,i){i=t?t.offset?t.offset:{x:10,y:10}:(t={offset:{x:10,y:10},pageNumber:0,width:void 0,height:void 0}).offset;var n=null,o=null,r=null,l="",d=!1,h=null,p=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),f=this.pdfViewer.annotation.createGUID();"Line"==e?(n=this.pdfViewer.lineSettings.annotationSelectorSettings?this.pdfViewer.lineSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,r=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.lineSettings),o=this.pdfViewer.lineSettings.allowedInteractions?this.pdfViewer.lineSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions,l="Line",h=t.vertexPoints?t.vertexPoints:[{x:i.x,y:i.y},{x:i.x+100,y:i.y}],t.width=t.width?t.width:1,t.height=t.height?t.height:1):"Arrow"==e?(n=this.pdfViewer.arrowSettings.annotationSelectorSettings?this.pdfViewer.arrowSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,r=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.arrowSettings),o=this.pdfViewer.arrowSettings.allowedInteractions?this.pdfViewer.arrowSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions,l="Line",d=!0,h=t.vertexPoints?t.vertexPoints:[{x:i.x,y:i.y},{x:i.x+100,y:i.y}],t.width=t.width?t.width:1,t.height=t.height?t.height:1):"Rectangle"==e?(n=this.pdfViewer.rectangleSettings.annotationSelectorSettings?this.pdfViewer.rectangleSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,r=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.rectangleSettings),o=this.pdfViewer.rectangleSettings.allowedInteractions?this.pdfViewer.rectangleSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions,l="Square",t.width=t.width?t.width:150,t.height=t.height?t.height:75):"Circle"==e?(n=this.pdfViewer.circleSettings.annotationSelectorSettings?this.pdfViewer.circleSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,r=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.circleSettings),o=this.pdfViewer.circleSettings.allowedInteractions?this.pdfViewer.circleSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions,l="Circle",t.width=t.width?t.width:100,t.height=t.height?t.height:90):"Polygon"==e&&(n=this.pdfViewer.polygonSettings.annotationSelectorSettings?this.pdfViewer.polygonSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,r=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.polygonSettings),o=this.pdfViewer.polygonSettings.allowedInteractions?this.pdfViewer.polygonSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions,l="Polygon",h=t.vertexPoints?t.vertexPoints:[{x:i.x,y:i.y},{x:i.x+42,y:i.y-29},{x:i.x+89,y:i.y-1},{x:i.x+78,y:i.y+42},{x:i.x+11,y:i.y+42},{x:i.x,y:i.y}],t.width=t.width?t.width:1,t.height=t.height?t.height:1),r.isLock=!!t.isLock&&t.isLock,r.minHeight=t.minHeight?t.minHeight:0,r.minWidth=t.minWidth?t.minWidth:0,r.maxWidth=t.maxWidth?t.maxWidth:0,r.maxHeight=t.maxHeight?t.maxHeight:0,h&&(h=this.pdfViewer.annotation.getVertexPointsXY(h));var c=[],u={AllowedInteractions:t.allowedInteractions?t.allowedInteractions:o,AnnotName:f,AnnotType:"shape",AnnotationSelectorSettings:t.annotationSelectorSettings?t.annotationSelectorSettings:n,AnnotationSettings:r,Author:t.author?t.author:"Guest",BorderDashArray:t.borderDashArray?t.borderDashArray:0,BorderStyle:"Solid",Bounds:{X:i.x,Y:i.y,Width:t.width,Height:t.height,Left:i.x,Top:i.y,Location:{X:i.x,Y:i.y},Size:{Height:t.height,IsEmpty:!1,Width:t.width}},CloudIntensity:0,Comments:null,CustomData:t.customData?t.customData:null,CreatedDate:p,EnableShapeLabel:!1,ExistingCustomData:null,FillColor:t.fillColor?t.fillColor:"#ffffff00",FontColor:null,FontSize:0,IsCloudShape:!1,IsCommentLock:!1,IsLocked:!!t.isLock&&t.isLock,IsPrint:!t.isPrint||t.isPrint,LabelBorderColor:null,LabelBounds:{X:0,Y:0,Width:0,Height:0},LabelContent:null,LabelFillColor:null,LabelSettings:null,LineHeadEnd:t.lineHeadStartStyle?t.lineHeadStartStyle:d?"ClosedArrow":"None",LineHeadStart:t.lineHeadEndStyle?t.lineHeadEndStyle:d?"ClosedArrow":"None",ModifiedDate:"",Note:"",Opacity:t.opacity?t.opacity:1,RectangleDifference:null,RotateAngle:"RotateAngle0",ShapeAnnotationType:l,State:"",StateModel:"",StrokeColor:t.strokeColor?t.strokeColor:"#ff0000",Subject:e.toString(),Thickness:t.thickness?t.thickness:1,VertexPoints:h};return c[0]=u,{shapeAnnotation:c}},s}(),Ob=function(){function s(e,t){this.isStampAddMode=!1,this.stampPageNumber=[],this.isAddAnnotationProgramatically=!1,this.customStampName=null,this.dynamicText="",this.pdfViewer=e,this.pdfViewerBase=t}return s.prototype.renderStampAnnotations=function(e,t,i,n){for(var o=!1,r=0;r<this.stampPageNumber.length;r++)if(this.stampPageNumber[r]===t){o=!0;break}if(n&&(o=!1),e&&!o){this.stampPageNumber.push(t);for(var l=function(p){var f=e[p];f.annotationAddMode=d.pdfViewer.annotationModule.findAnnotationMode(f,t,f.AnnotType);var c=f.Apperarance,u=f.Rect,m=f.Opacity,v=parseFloat(e[p].pageNumber);isNaN(v)&&(v=e[p].PageNumber);var y=f.IsDynamic;document.getElementById(d.pdfViewer.element.id+"_pageDiv_"+v),f.AnnotationSettings=f.AnnotationSettings?f.AnnotationSettings:d.pdfViewer.annotationModule.updateSettings(d.pdfViewer.stampSettings);var C=d.stampImageData(f);if(y&&f.Subject&&"Draft"!==f.Subject&&!C){d.retrieveDynamicStampAnnotation(f.Subject),d.isExistingStamp=!0;for(var S=d.calculateImagePosition(u,!0),x=f.RotateAngle,V=0;V<c.length;V++){var T=c[V];if("string"===T.type&&void 0!==T.text){var A=void 0;2===(A=n?T.text:T.text.split("(")[1].split(")")[0]).split("(").length?A.split("(")[1].split(")")[0].toLowerCase()!==f.Subject.toLowerCase()&&(d.dynamicText+=A.split("(")[1].split(")")[0]):A.toLowerCase()!==f.Subject.toLowerCase()&&(d.dynamicText+=A)}}d.renderStamp(S.left,S.top,S.width,S.height,v,m,x,i,f,!0)}else if(f.Subject&&!C)d.retrievestampAnnotation(f.Subject),d.isExistingStamp=!0,S=d.calculateImagePosition(u,!0),d.renderStamp(S.left,S.top,S.width,S.height,v,m,x=f.RotateAngle,i,f),d.isExistingStamp=!1;else if(c)for(var M=function(B){var N=c[B],D=N.imagedata,O=N.CreationDate,H=N.ModifiedDate,$=N.RotateAngle;if(D){var me=new Image,W=d;me.onload=function(){var Te=W.calculateImagePosition(u,!0);f.AnnotationSettings=f.AnnotationSettings?f.AnnotationSettings:W.pdfViewer.customStampSettings.annotationSettings,W.renderCustomImage(Te,v,me,O,H,$,m,i,!0,f)},me.src=D}},I=0;I<c.length;I++)M(I)},d=this,h=0;h<e.length;h++)l(h)}},s.prototype.moveStampElement=function(e,t,i){var n=this.pdfViewerBase.getZoomFactor();e/=n,t/=n;var o="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.stampSettings.author?this.pdfViewer.stampSettings.author:"Guest";if(this.pdfViewerBase.isDynamicStamp)if(this.pdfViewer.dateTimeFormat){var r=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();this.dynamicText="By "+o+" at "+r.split(" ")[1]+r.split(" ")[2]+" , "+r.split(" ")[0]+" "}else{var l=(new Date).toString().split(" ").splice(1,3).join(" "),d=(new Date).toLocaleTimeString();this.dynamicText="By "+o+" at "+d+" , "+l+"   "}var h,p=this.currentStampAnnotation;return p&&"Image"===p.shapeAnnotationType?h={id:"stamp"+this.pdfViewerBase.customStampCount,bounds:{x:e,y:t,width:p.bounds.width,height:p.bounds.height},pageIndex:i,data:p.data,modifiedDate:p.modifiedDate,shapeAnnotationType:"Image",opacity:p.opacity,rotateAngle:p.RotationAngle,annotName:p.annotationName,comments:[],review:{state:"",stateModel:"",modifiedDate:"",author:p.author}}:p&&(h={id:"stamp"+this.pdfViewerBase.customStampCount,bounds:{x:e,y:t,width:p.width,height:p.height},pageIndex:i,data:p.pathdata,shapeAnnotationType:"Stamp",strokeColor:p.strokeColor,fillColor:p.fillColor,opacity:.5,stampFillColor:p.stampFillColor,stampStrokeColor:p.stampStrokeColor,rotateAngle:p.RotateAngle,isDynamicStamp:this.pdfViewerBase.isDynamicStamp,dynamicText:this.dynamicText,subject:p.iconName,annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings}),this.pdfViewerBase.currentSignatureAnnot&&(h="SignatureText"===(p=this.pdfViewerBase.currentSignatureAnnot).shapeAnnotationType?{id:"sign"+this.pdfViewerBase.signatureCount,bounds:{x:e,y:t,width:p.bounds.width,height:p.bounds.height},pageIndex:i,data:p.data,modifiedDate:"",shapeAnnotationType:"SignatureText",thickness:p.thickness,strokeColor:p.strokeColor,opacity:p.opacity,signatureName:p.signatureName,fontFamily:p.fontFamily,fontSize:Math.floor(p.bounds.height/2)}:"SignatureImage"===p.shapeAnnotationType?{id:"sign"+this.pdfViewerBase.signatureCount,bounds:{x:e,y:t,width:p.bounds.width,height:p.bounds.height},pageIndex:i,data:p.data,modifiedDate:"",shapeAnnotationType:"SignatureImage",thickness:p.thickness,strokeColor:p.strokeColor,opacity:p.opacity,signatureName:p.signatureName}:{id:"sign"+this.pdfViewerBase.signatureCount,bounds:{x:e,y:t,width:p.bounds.width,height:p.bounds.height},pageIndex:i,data:p.data,shapeAnnotationType:"HandWrittenSignature",thickness:p.thickness,strokeColor:p.strokeColor,opacity:p.opacity,signatureName:p.signatureName}),h},s.prototype.ConvertPointToPixel=function(e){return e*(96/72)},s.prototype.calculateImagePosition=function(e,t){var n=parseFloat(e.x?e.x:e.X),o=parseFloat(e.y?e.y:e.Y),r=parseFloat(e.width?e.width:e.Width),l=parseFloat(e.height?e.height:e.Height);return t?{width:this.ConvertPointToPixel(r),height:this.ConvertPointToPixel(l),left:this.ConvertPointToPixel(n),top:this.ConvertPointToPixel(o)}:{width:r,height:l,left:n,top:o}},s.prototype.createCustomStampAnnotation=function(e,t){var i=this,n=this.pdfViewerBase.currentPageNumber-1,r=(document.getElementById(this.pdfViewer.element.id+"_pageDiv_"+n),new Image),l=this;r.onload=function(){i.pdfViewerBase.getZoomFactor();var h=i.pdfViewer.customStampSettings,p=h.width>0?h.width:0,f=h.height>0?h.height:0,c=100;p>0||f>0||(r.naturalHeight>=r.naturalWidth?(f=r.naturalHeight/r.naturalHeight*c,p=r.naturalWidth/r.naturalHeight*c):(f=r.naturalHeight/r.naturalWidth*c,p=r.naturalWidth/r.naturalWidth*c));var g={width:p,height:f,left:i.pdfViewer.customStampSettings.left,top:i.pdfViewer.customStampSettings.top},v=(new Date).toLocaleDateString(),y=i.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();l.renderCustomImage(g,n,r,v,y,0,1,null,null,null,t)},r.src=e},s.prototype.renderStamp=function(e,t,i,n,o,r,l,d,h,p){a.AR.isDevice&&(this.pdfViewerBase.customStampCount+=1);var f="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.stampSettings.author?this.pdfViewer.stampSettings.author:"Guest";if(this.pdfViewerBase.isDynamicStamp){var c=(new Date).toString().split(" ").splice(1,3).join(" "),u=(new Date).toLocaleTimeString();this.dynamicText="By "+f+" at "+u+" , "+c+" "}p&&(this.dynamicText+=" ",this.pdfViewerBase.isDynamicStamp=!0);var m,g=null,y=this.currentStampAnnotation;if(y){if(null!==i&&null!==n){y.width=i,y.height=n,y.Opacity=r,y.RotateAngle=l,y.AnnotName=b=h.AnnotName,y.State=h.State,y.AnnotationSettings=h.AnnotationSettings||this.pdfViewer.annotationModule.updateAnnotationSettings(y),y.AnnotationSelectorSettings=h.AnnotationSelectorSettings||this.pdfViewer.annotationSelectorSettings,y.ModifiedDate=h.ModifiedDate,y.StateModel=h.StateNodel,y.IsCommentLock=h.IsCommentLock,y.Note=h.Note;var M=h.Author;y.Author=M,y.Subject=h.Subject;var B=this.pdfViewer.annotation.getCustomData(h);y.allowedInteractions=h.AllowedInteractions?h.AllowedInteractions:h.allowedInteractions?h.allowedInteractions:["None"],y.CustomData=B,y.isPrint="Imported Annotation"===y.annotationAddMode?h.IsPrint:h.AnnotationSettings.isPrint,null===y.Author&&(y.Author="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.stampSettings.author?this.pdfViewer.stampSettings.author:"Guest"),y.Comments=this.pdfViewer.annotationModule.getAnnotationComments(h.Comments,h,M)}else{var b=this.pdfViewer.annotation.createGUID(),Z=this.pdfViewer.annotation.stickyNotesAnnotationModule.addComments("stamp",o+1);Z&&(document.getElementById(Z).id=b),y.AnnotationSettings=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.stampSettings),y.AnnotName=b,y.Comments=[],y.State="",y.StateModel="",y.Note="",y.Opacity=1,y.RotateAngle=0,y.ModifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),y.Author="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.stampSettings.author?this.pdfViewer.stampSettings.author:"Guest"}var H=gt(ze(y.pathdata)),$=h?h.annotationAddMode:"UI Drawn Annotation";y.AnnotationSelectorSettings=y.AnnotationSelectorSettings?y.AnnotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,m={id:"stamp"+this.pdfViewerBase.customStampCount,bounds:{x:e,y:t,width:y.width,height:y.height},pageIndex:o,data:y.pathdata,modifiedDate:y.ModifiedDate,shapeAnnotationType:"Stamp",strokeColor:y.strokeColor,fillColor:y.fillColor,opacity:y.Opacity,stampFillColor:y.stampFillColor,stampStrokeColor:y.stampStrokeColor,rotateAngle:y.RotateAngle,isDynamicStamp:this.pdfViewerBase.isDynamicStamp,dynamicText:this.dynamicText,annotName:y.AnnotName,notes:y.Note,comments:y.Comments,review:{state:y.State,stateModel:y.StateModel,modifiedDate:y.ModifiedDate,author:y.Author},subject:y.iconName,annotationSelectorSettings:y.AnnotationSelectorSettings,annotationSettings:y.AnnotationSettings,allowedInteractions:y.allowedInteractions,annotationAddMode:$,isPrint:y.isPrint,isCommentLock:y.IsCommentLock},g={stampAnnotationType:"path",author:y.Author,modifiedDate:y.ModifiedDate,subject:y.Subject,note:y.Note,strokeColor:y.strokeColor,fillColor:y.fillColor,opacity:y.Opacity,stampFillcolor:y.stampFillColor,rotateAngle:y.RotateAngle,creationDate:y.creationDate,pageNumber:o,icon:y.iconName,stampAnnotationPath:H,randomId:"stamp"+this.pdfViewerBase.customStampCount,isDynamicStamp:this.pdfViewerBase.isDynamicStamp,dynamicText:this.dynamicText,bounds:{left:e,top:t,width:y.width,height:y.height},annotName:y.AnnotName,comments:y.Comments,review:{state:y.State,stateModel:y.StateModel,author:y.Author,modifiedDate:y.ModifiedDate},shapeAnnotationType:"stamp",annotationSelectorSettings:this.getSettings(y),annotationSettings:y.AnnotationSettings,customData:this.pdfViewer.annotation.getCustomData(y),allowedInteractions:y.allowedInteractions,isPrint:y.isPrint,isCommentLock:y.IsCommentLock,isMaskedImage:y.IsMaskedImage,customStampName:""},this.storeStampInSession(o,g),this.isAddAnnotationProgramatically&&this.triggerAnnotationAdd(m,y),this.pdfViewer.add(m),null!=d&&null!=d||(d=document.getElementById(this.pdfViewer.element.id+"_annotationCanvas_"+o)),this.pdfViewer.renderDrawing(d,o),this.pdfViewerBase.stampAdded&&(this.triggerAnnotationAdd(m,y),this.pdfViewerBase.isNewStamp=!0,this.pdfViewer.annotation.addAction(o,null,m,"Addition","",m,m)),this.pdfViewerBase.stampAdded=!1,this.isExistingStamp||(y.creationDate=(new Date).toLocaleDateString(),y.modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime())}this.resetAnnotation()},s.prototype.getSettings=function(e){var t=this.pdfViewer.annotationSelectorSettings;return e.AnnotationSelectorSettings?t=e.AnnotationSelectorSettings:this.pdfViewer.stampSettings.annotationSelectorSettings&&(t=this.pdfViewer.stampSettings.annotationSelectorSettings),t},s.prototype.resetAnnotation=function(){this.pdfViewerBase.isDynamicStamp=!1,this.dynamicText="",this.currentStampAnnotation=null,a.AR.isDevice||(this.pdfViewerBase.customStampCount+=1)},s.prototype.updateDeleteItems=function(e,t,i){this.pdfViewerBase.updateDocumentEditedProperty(!0);var n=null,o=!1;if(t.modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),t.author="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.stampSettings.author?this.pdfViewer.stampSettings.author:"Guest",i){var r=this.pdfViewer.annotation.createGUID(),l=this.pdfViewer.annotation.stickyNotesAnnotationModule.addComments("stamp",e+1);l&&(document.getElementById(l).id=r),t.annotName=r,t.Comments=[],t.State="",t.StateModel="",t.Note="",t.Opacity=1,t.RotateAngle=0}"Stamp"===t.shapeAnnotationType&&(t.isPrint=this.pdfViewer.stampSettings.isPrint);var d=this.pdfViewer.stampSettings.annotationSelectorSettings?this.pdfViewer.stampSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,h=this.pdfViewer.stampSettings.allowedInteractions?this.pdfViewer.stampSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions;if("Image"===t.shapeAnnotationType?(t.Author="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.customStampSettings.author?this.pdfViewer.customStampSettings.author:"Guest",t.isPrint=this.pdfViewer.customStampSettings.isPrint,this.customStampName=this.customStampName?this.customStampName:this.currentStampAnnotation.signatureName?this.currentStampAnnotation.signatureName:t.id,n={stampAnnotationType:"image",author:t.author,modifiedDate:t.modifiedDate,subject:"",note:"",strokeColor:"",fillColor:"",opacity:i,rotateAngle:"0",creationDate:t.currentDate,pageNumber:e,icon:"",stampAnnotationPath:t.data,randomId:"stamp"+this.pdfViewerBase.customStampCount,bounds:{left:t.bounds.x,top:t.bounds.y,width:t.bounds.width,height:t.bounds.height},stampFillcolor:"",isDynamicStamp:!1,annotName:t.annotName,comments:[],review:{state:"",stateModel:"",author:t.author,modifiedDate:t.modifiedDate},shapeAnnotationType:"stamp",annotationSelectorSettings:d,annotationSettings:this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.customStampSettings),customData:this.pdfViewer.annotationModule.getData("image"),isPrint:t.isPrint,allowedInteractions:h,isCommentLock:!1,isMaskedImage:t.isMaskedImage,customStampName:this.customStampName}):n=t.stampAnnotationType?{stampAnnotationType:t.stampAnnotationType,author:t.author,modifiedDate:t.modifiedDate,subject:t.Subject,note:t.Note,strokeColor:t.strokeColor,fillColor:t.fillColor,opacity:t.opacity,stampFillcolor:t.stampFillcolor,rotateAngle:t.rotateAngle,creationDate:t.creationDate,pageNumber:t.pageNumber,icon:t.icon,stampAnnotationPath:t.stampAnnotationPath,randomId:t.randomId,isDynamicStamp:t.isDynamicStamp,dynamicText:t.dynamicText,bounds:{left:t.bounds.left,top:t.bounds.top,width:t.bounds.width,height:t.bounds.height},annotName:t.annotName,comments:t.Comments,review:{state:t.State,stateModel:t.StateModel,author:t.author,modifiedDate:t.ModifiedDate},shapeAnnotationType:"stamp",annotationSelectorSettings:d,annotationSettings:this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.stampSettings),customData:this.pdfViewer.annotationModule.getData(t.stampAnnotationType),isPrint:t.isPrint,allowedInteractions:h,isCommentLock:t.isCommentLock,isMaskedImage:t.isMaskedImage,customStampName:""}:{stampAnnotationType:t.shapeAnnotationType,author:t.author,modifiedDate:t.modifiedDate,subject:t.subject,note:t.notes,strokeColor:t.strokeColor,fillColor:t.fillColor,opacity:t.opacity,stampFillcolor:t.stampFillColor,rotateAngle:t.rotateAngle,creationDate:t.creationDate,pageNumber:t.pageIndex,icon:t.subject,stampAnnotationPath:t.data,randomId:t.id,isDynamicStamp:t.isDynamicStamp,dynamicText:t.dynamicText,shapeAnnotationType:"stamp",bounds:{left:t.bounds.x,top:t.bounds.y,width:t.bounds.width,height:t.bounds.height},annotName:t.annotName,comments:t.Comments,review:{state:t.State,stateModel:t.StateModel,author:t.author,modifiedDate:t.ModifiedDate},annotationSelectorSettings:d,annotationSettings:this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.stampSettings),customData:this.pdfViewer.annotationModule.getData(t.shapeAnnotationType),isPrint:t.isPrint,allowedInteractions:h,isCommentLock:t.isCommentLock,isMaskedImage:t.isMaskedImage,customStampName:""},i){if("Image"!==t.shapeAnnotationType){var f=gt(ze(t.data));n.stampAnnotationPath=f}if(t.creationDate=(new Date).toLocaleDateString(),!a.AR.isDevice&&t.wrapper&&(n.bounds.width=t.wrapper.actualSize.width,n.bounds.height=t.wrapper.actualSize.height,n.bounds.left=t.wrapper.bounds.x,n.bounds.top=t.wrapper.bounds.y),n.opacity=i,this.pdfViewerBase.stampAdded){this.storeStampInSession(e,n),o=!0;var c={left:n.bounds.left,top:n.bounds.top,width:n.bounds.width,height:n.bounds.height};this.pdfViewerBase.updateDocumentEditedProperty(!0);var u={opacity:n.opacity,author:n.author,modifiedDate:n.modifiedDate};"Image"===t.shapeAnnotationType?(this.pdfViewerBase.stampAdded=!1,this.pdfViewer.fireAnnotationAdd(n.pageNumber,n.annotName,"Image",c,u,null,null,null,null,null,this.customStampName),this.customStampName=null):this.pdfViewer.fireAnnotationAdd(n.pageNumber,n.annotName,"Stamp",c,u),this.pdfViewer.annotation.addAction(e,null,t,"Addition","",t,n)}}o||this.storeStampInSession(e,n)},s.prototype.renderCustomImage=function(e,t,i,n,o,r,l,d,h,p,f){var c,m,g,v,u=null,y=this.pdfViewer.customStampSettings.left>0&&this.pdfViewer.customStampSettings.top>0,b=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.customStampSettings),C=this.pdfViewer.stampSettings.allowedInteractions?this.pdfViewer.stampSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions;a.AR.isDevice&&(this.pdfViewerBase.customStampCount+=1),h?(m=p.AnnotName,g=p.Author,v=p.IsCommentLock,b=p.AnnotationSettings?p.AnnotationSettings:this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.customStampSettings),C=p.AllowedInteractions?p.AllowedInteractions:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(p),null===g&&(g="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.customStampSettings.author?this.pdfViewer.customStampSettings.author:"Guest")):(m=this.pdfViewer.annotation.createGUID(),g="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.customStampSettings.author?this.pdfViewer.customStampSettings.author:"Guest",v=!1),o||(o=p.ModifiedDate?p.ModifiedDate:(new Date).toLocaleString());var x;this.currentStampAnnotation=c={id:"stamp"+this.pdfViewerBase.customStampCount,allowedInteractions:C,bounds:{x:e.left,y:e.top,width:e.width,height:e.height},pageIndex:t,data:i.src,modifiedDate:o,shapeAnnotationType:"Image",opacity:l,rotateAngle:r,annotName:m,comments:[],review:{state:"",stateModel:"",modifiedDate:"",author:g},annotationSettings:b,annotationAddMode:p?p.annotationAddMode:"UI Drawn Annotation ",signatureName:f,isPrint:x=h?"Imported Annotation"===p.annotationAddMode?p.IsPrint:p.AnnotationSettings.isPrint:this.pdfViewer.customStampSettings.isPrint,isCommentLock:v};var V=this.pdfViewer.stampSettings.annotationSelectorSettings?this.pdfViewer.stampSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings;if(h||y){if(!p){this.isStampAnnotSelected=!1,(p=c).Note="",p.State="",p.StateModel="";var T=this.pdfViewer.annotation.stickyNotesAnnotationModule.addComments("stamp",t+1);T&&(document.getElementById(T).id=m)}if(u={stampAnnotationType:"image",author:g,allowedInteractions:C,modifiedDate:o,subject:"",note:p.Note,strokeColor:"",fillColor:"",opacity:l,rotateAngle:"0",creationDate:n,pageNumber:t,icon:"",stampAnnotationPath:i.src,randomId:"stamp"+this.pdfViewerBase.customStampCount,bounds:{left:e.left,top:e.top,width:e.width,height:e.height},stampFillcolor:"",isDynamicStamp:!1,annotName:m,comments:this.pdfViewer.annotationModule.getAnnotationComments(p.Comments,p,p.Author),review:{state:p.State,stateModel:p.StateModel,author:g,modifiedDate:o},shapeAnnotationType:"stamp",annotationSelectorSettings:V,annotationSettings:b,customData:this.pdfViewer.annotation.getCustomData(p),isPrint:x,isCommentLock:v,isMaskedImage:p.IsMaskedImage,customStampName:p.CustomStampName},this.storeStampInSession(t,u),c.comments=this.pdfViewer.annotationModule.getAnnotationComments(p.Comments,p,p.Author),c.review={state:p.State,stateModel:p.StateModel,author:g,modifiedDate:o},this.isAddAnnotationProgramatically){var k={opacity:c.opacity,borderColor:c.strokeColor,borderWidth:c.thickness,author:p.author,subject:p.subject,modifiedDate:p.modifiedDate,fillColor:c.fillColor,fontSize:c.fontSize,width:c.bounds.width,height:c.bounds.height,fontColor:c.fontColor,fontFamily:c.fontFamily,defaultText:c.dynamicText,fontStyle:c.font,textAlignment:c.textAlign};this.customStampName=this.customStampName?this.customStampName:this.currentStampAnnotation.signatureName?this.currentStampAnnotation.signatureName:p.id,this.pdfViewer.fireAnnotationAdd(c.pageIndex,c.annotName,"Image",c.bounds,k,null,null,null,null,null,this.customStampName),this.customStampName=null}this.pdfViewer.add(c),null!=d&&null!=d||(d=document.getElementById(this.pdfViewer.element.id+"_annotationCanvas_"+t)),this.pdfViewer.renderDrawing(d,t),this.pdfViewerBase.stampAdded&&this.pdfViewer.annotation.addAction(t,null,c,"Addition","",c,c)}a.AR.isDevice||(this.pdfViewerBase.customStampCount+=1)},s.prototype.retrieveDynamicStampAnnotation=function(e){var t;if(e){switch(e.trim()){case"Revised":t={iconName:"Revised",pathdata:"M19.68,21.22a3.94,3.94,0,0,1-1.1-1.9L16,11.87l-.21-.64a20.77,20.77,0,0,0,2.11-.58,7.24,7.24,0,0,0,2-1.09,5.65,5.65,0,0,0,1.72-2.12,5.4,5.4,0,0,0,.52-2.2A4.15,4.15,0,0,0,19.1,1.05a14.58,14.58,0,0,0-4.72-.6H5.31v.86a7,7,0,0,1,2,.33c.3.14.45.48.45,1a6.1,6.1,0,0,1-.14,1.08l-.21.8L3.31,19.32a3.35,3.35,0,0,1-.94,1.78,3.58,3.58,0,0,1-1.74.57v.86h9.83v-.86a6.22,6.22,0,0,1-2-.35c-.29-.15-.43-.52-.43-1.11,0-.1,0-.21,0-.31a2.36,2.36,0,0,1,0-.28l.28-1.14,1.95-6.86h.93l3.56,10.91h6.25v-.88A3.05,3.05,0,0,1,19.68,21.22ZM13.29,10.31a14,14,0,0,1-2.63.23l2-7.56a2.67,2.67,0,0,1,.52-1.17,1.4,1.4,0,0,1,1-.3,2.74,2.74,0,0,1,2.33.91,3.72,3.72,0,0,1,.69,2.3,6.4,6.4,0,0,1-.49,2.52,6.72,6.72,0,0,1-1.06,1.82A4.11,4.11,0,0,1,13.29,10.31ZM26,.45H43.74l-1.4,6.27-.88-.15a6,6,0,0,0-.78-3.4c-.84-1.12-2.54-1.69-5.11-1.69a2.9,2.9,0,0,0-1.68.32A2.34,2.34,0,0,0,33.26,3l-1.95,7.33a13.55,13.55,0,0,0,4.48-.56c.68-.32,1.44-1.3,2.27-2.92l.91.11-2.44,9-.91-.16a7.27,7.27,0,0,0,.09-.82q0-.35,0-.57a2.69,2.69,0,0,0-1-2.4A7.57,7.57,0,0,0,31,11.38l-2.17,8c0,.2-.09.38-.12.57a2.62,2.62,0,0,0,0,.43.92.92,0,0,0,.35.74,2.54,2.54,0,0,0,1.49.29,13.84,13.84,0,0,0,5.11-.84A9.85,9.85,0,0,0,40.73,16l.81.14-1.95,6.42h-18v-.9a3.43,3.43,0,0,0,1.42-.53A3.42,3.42,0,0,0,24,19.32L28,4.51c.1-.37.18-.72.25-1a4.23,4.23,0,0,0,.09-.78c0-.56-.15-.91-.44-1.06a6.85,6.85,0,0,0-2-.34ZM63.4,3.37,51,23.15H49.9L47.39,6.34a17.25,17.25,0,0,0-.93-4.24c-.25-.43-.93-.7-2.05-.79V.45h9.86v.86a5.47,5.47,0,0,0-1.72.19,1.14,1.14,0,0,0-.81,1.16,3,3,0,0,0,0,.31l0,.32L53.5,16.43l6.24-9.85c.49-.79.94-1.57,1.33-2.36a4.45,4.45,0,0,0,.6-1.85.88.88,0,0,0-.61-.9,6.11,6.11,0,0,0-1.52-.16V.45h6.34v.86a3.88,3.88,0,0,0-1.16.5A5.73,5.73,0,0,0,63.4,3.37ZM70.08,20c0,.11,0,.22,0,.31,0,.56.15.91.45,1.06a6.39,6.39,0,0,0,1.95.35v.86H62.63v-.86a3.58,3.58,0,0,0,1.74-.57,3.35,3.35,0,0,0,.94-1.78l4-14.81q.18-.63.27-1a3.78,3.78,0,0,0,.09-.75c0-.56-.16-.91-.47-1.06a7,7,0,0,0-2-.34V.45h9.83v.86a3.61,3.61,0,0,0-1.75.58,3.37,3.37,0,0,0-.91,1.78L70.4,18.48l-.26,1.14Zm19.26-7.23a6.37,6.37,0,0,1,1.07,3.62,6.58,6.58,0,0,1-2.06,4.71,7.54,7.54,0,0,1-5.65,2.1A10.15,10.15,0,0,1,80.89,23a11.42,11.42,0,0,1-1.8-.49l-.83-.3-.58-.2a2,2,0,0,0-.38,0,1,1,0,0,0-.78.26,3.89,3.89,0,0,0-.52.92H75l1.19-7.4,1,.07a14.63,14.63,0,0,0,.28,2.3,5.27,5.27,0,0,0,2.79,3.44,4.73,4.73,0,0,0,2.06.44,3.85,3.85,0,0,0,3.07-1.26,4.39,4.39,0,0,0,1.09-2.94q0-2.09-4.05-5.25c-2.7-2.22-4-4.26-4-6.14a6.31,6.31,0,0,1,1.78-4.53,6.51,6.51,0,0,1,5-1.87,9.67,9.67,0,0,1,1.82.18A6.54,6.54,0,0,1,88,.45l.84.28.56.13a2.59,2.59,0,0,0,.52.06,1.4,1.4,0,0,0,.88-.24,2.2,2.2,0,0,0,.53-.6h1L91,6.69l-.85-.12L90,5.49a6,6,0,0,0-1-2.62,3.82,3.82,0,0,0-3.38-1.73A3,3,0,0,0,82.9,2.53a3.6,3.6,0,0,0-.58,2,3.44,3.44,0,0,0,.59,2,6,6,0,0,0,1,1l2.85,2.33A12.75,12.75,0,0,1,89.34,12.72ZM110.27,16l.81.14-2,6.42H90.85v-.86a3.66,3.66,0,0,0,1.74-.57,3.42,3.42,0,0,0,.93-1.78l4-14.81c.1-.37.18-.72.25-1a4.23,4.23,0,0,0,.09-.78c0-.56-.14-.91-.44-1.06a6.85,6.85,0,0,0-2-.34V.45h17.77l-1.4,6.27L111,6.57a6,6,0,0,0-.78-3.4c-.84-1.12-2.54-1.69-5.1-1.69a2.92,2.92,0,0,0-1.69.32A2.34,2.34,0,0,0,102.8,3l-2,7.33a13.55,13.55,0,0,0,4.48-.56c.69-.32,1.44-1.3,2.27-2.92l.92.11-2.45,9-.91-.16a7.27,7.27,0,0,0,.09-.82q0-.35,0-.57a2.69,2.69,0,0,0-1-2.4,7.57,7.57,0,0,0-3.79-.64l-2.17,8c0,.2-.09.38-.12.57a2.62,2.62,0,0,0,0,.43.92.92,0,0,0,.35.74,2.54,2.54,0,0,0,1.49.29,13.84,13.84,0,0,0,5.11-.84A9.81,9.81,0,0,0,110.27,16Zm22.65-13Q130.39.45,125.52.45h-9.58v.86a7,7,0,0,1,2,.34c.31.15.47.5.47,1.06a3.61,3.61,0,0,1-.09.74c-.06.29-.15.64-.26,1.06L114,19.31a3.18,3.18,0,0,1-1.15,1.91,3.57,3.57,0,0,1-1.53.45v.86h9.47a14.87,14.87,0,0,0,10.95-4.14,12,12,0,0,0,3.75-8.77A8.94,8.94,0,0,0,132.92,2.94ZM129,15.36q-2.62,6.06-8.52,6.05a2.46,2.46,0,0,1-1.42-.29,1.05,1.05,0,0,1-.4-.93,2.24,2.24,0,0,1,0-.34,2.65,2.65,0,0,1,.08-.43l4.55-16.67a2,2,0,0,1,.54-.92,2.2,2.2,0,0,1,1.44-.35,4.74,4.74,0,0,1,4.47,2.22,7.9,7.9,0,0,1,.83,3.9A19.32,19.32,0,0,1,129,15.36Z",opacity:1,strokeColor:"",fillColor:"#192760",width:127.47,height:55.84601,stampFillColor:"#dce3ef",stampStrokeColor:""};break;case"Reviewed":t={iconName:"Reviewed",pathdata:"M17.37,18.25a3.47,3.47,0,0,1-1-1.67L14.17,10c0-.07-.1-.26-.19-.56A14.71,14.71,0,0,0,15.83,9a6.08,6.08,0,0,0,1.76-1A4.92,4.92,0,0,0,19.1,6.14a4.71,4.71,0,0,0,.46-1.93A3.65,3.65,0,0,0,16.86.52,12.83,12.83,0,0,0,12.72,0h-8V.75a6.62,6.62,0,0,1,1.72.3c.26.12.39.41.39.88a4.56,4.56,0,0,1-.13.94c0,.2-.1.44-.17.7L3,16.58a2.87,2.87,0,0,1-.82,1.56,3.15,3.15,0,0,1-1.53.51v.75H9.27v-.75a5.88,5.88,0,0,1-1.74-.31c-.25-.13-.37-.46-.37-1a2.53,2.53,0,0,1,0-.28,1.44,1.44,0,0,1,0-.24l.24-1,1.71-6H10l3.13,9.59h5.49v-.77A2.71,2.71,0,0,1,17.37,18.25ZM11.75,8.67a12.06,12.06,0,0,1-2.3.19L11.2,2.22a2.2,2.2,0,0,1,.46-1,1.19,1.19,0,0,1,.87-.27,2.41,2.41,0,0,1,2.05.8,3.29,3.29,0,0,1,.6,2A5.63,5.63,0,0,1,14.75,6a6.06,6.06,0,0,1-.93,1.59A3.65,3.65,0,0,1,11.75,8.67ZM22.9,0H38.52L37.29,5.51l-.78-.13a5.34,5.34,0,0,0-.68-3c-.74-1-2.24-1.48-4.49-1.48a2.68,2.68,0,0,0-1.49.27,2.09,2.09,0,0,0-.54,1L27.59,8.67a12.08,12.08,0,0,0,3.94-.5,5.69,5.69,0,0,0,2-2.56l.81.1-2.16,7.93-.79-.15c0-.27.06-.51.08-.71s0-.37,0-.5a2.34,2.34,0,0,0-.85-2.11A6.61,6.61,0,0,0,27.3,9.6l-1.91,7.08a4.91,4.91,0,0,0-.1.5,2,2,0,0,0,0,.38.83.83,0,0,0,.31.65,2.29,2.29,0,0,0,1.31.25,12.21,12.21,0,0,0,4.49-.73,8.69,8.69,0,0,0,4.51-4.09l.71.12L34.86,19.4H19.05v-.79a2.88,2.88,0,0,0,1.28-.47,2.94,2.94,0,0,0,.82-1.56l3.56-13q.13-.49.21-.9A3.26,3.26,0,0,0,25,2q0-.73-.39-.93A6.44,6.44,0,0,0,22.9.75ZM55.79,2.57,44.86,20h-.93L41.72,5.17a16.05,16.05,0,0,0-.81-3.73c-.22-.37-.82-.6-1.81-.69V0h8.67V.75a5,5,0,0,0-1.52.17,1,1,0,0,0-.7,1,2.53,2.53,0,0,0,0,.28l0,.27L47.09,14l5.48-8.66C53,4.69,53.4,4,53.75,3.32a4,4,0,0,0,.52-1.63.78.78,0,0,0-.54-.8A5.88,5.88,0,0,0,52.4.75V0H58V.75a3.55,3.55,0,0,0-1,.44A5.18,5.18,0,0,0,55.79,2.57ZM62,18.34a6,6,0,0,0,1.71.31v.75H55.12v-.75a3.15,3.15,0,0,0,1.53-.51,2.94,2.94,0,0,0,.82-1.56L61,3.57c.1-.37.18-.68.23-.93A2.81,2.81,0,0,0,61.34,2c0-.49-.13-.8-.41-.93a6.61,6.61,0,0,0-1.71-.3V0h8.63V.75a3.17,3.17,0,0,0-1.53.51,3,3,0,0,0-.8,1.57l-3.58,13-.22,1a2.74,2.74,0,0,0,0,.28,1.41,1.41,0,0,0,0,.28C61.64,17.9,61.78,18.21,62,18.34ZM69.13,0H84.75L83.52,5.51l-.78-.13a5.34,5.34,0,0,0-.68-3c-.74-1-2.24-1.48-4.49-1.48a2.68,2.68,0,0,0-1.49.27,2.09,2.09,0,0,0-.54,1L73.82,8.67a12.08,12.08,0,0,0,3.94-.5,5.69,5.69,0,0,0,2-2.56l.81.1L78.4,13.64l-.79-.15c0-.27.07-.51.08-.71s0-.37,0-.5a2.34,2.34,0,0,0-.85-2.11,6.61,6.61,0,0,0-3.33-.57l-1.91,7.08a4.91,4.91,0,0,0-.1.5,2,2,0,0,0,0,.38.83.83,0,0,0,.31.65,2.29,2.29,0,0,0,1.31.25,12.21,12.21,0,0,0,4.49-.73,8.69,8.69,0,0,0,4.51-4.09l.71.12L81.1,19.4H65v-.75a3.15,3.15,0,0,0,1.53-.51,2.94,2.94,0,0,0,.82-1.56l3.56-13q.14-.49.21-.9A3.26,3.26,0,0,0,71.24,2q0-.73-.39-.93a6.44,6.44,0,0,0-1.72-.3Zm39.15,2.83L100,20h-.84L97.41,5.85,90.67,20h-.84L87.58,3.13A3.83,3.83,0,0,0,87,1.23,2.84,2.84,0,0,0,85.33.71V0h8.06V.75A2.55,2.55,0,0,0,92.27,1a1.33,1.33,0,0,0-.66,1.31c0,.06,0,.13,0,.19s0,.15,0,.26l1.15,10.16,4.32-9a1,1,0,0,0,0-.27,3.33,3.33,0,0,0-.64-2.38A2.5,2.5,0,0,0,95.06.71V0h7.78V.71a2.9,2.9,0,0,0-1.4.34c-.27.19-.41.6-.41,1.24,0,.13,0,.32,0,.55,0,.4.08.88.14,1.47l1,8.47,4.51-9.42a7.12,7.12,0,0,0,.29-.74,2.48,2.48,0,0,0,.14-.79.9.9,0,0,0-.48-.93,3.25,3.25,0,0,0-1.34-.19V0h5.41V.71a2.34,2.34,0,0,0-1.1.35A4.56,4.56,0,0,0,108.28,2.83Zm16.45,10.81.71.12-1.71,5.64H107.66v-.75a3.15,3.15,0,0,0,1.53-.51,2.87,2.87,0,0,0,.82-1.56l3.57-13q.12-.49.21-.9a3.17,3.17,0,0,0,.08-.69q0-.73-.39-.93a6.44,6.44,0,0,0-1.72-.3V0h15.62l-1.23,5.51-.78-.13a5.26,5.26,0,0,0-.68-3C124,1.4,122.46.91,120.2.91a2.64,2.64,0,0,0-1.48.27,2.09,2.09,0,0,0-.55,1l-1.72,6.45a12,12,0,0,0,3.94-.5,5.62,5.62,0,0,0,2-2.56l.81.1L121,13.64l-.79-.15c0-.27.06-.51.07-.71s0-.37,0-.5a2.34,2.34,0,0,0-.86-2.11,6.57,6.57,0,0,0-3.32-.57l-1.91,7.08a5,5,0,0,0-.11.5,3.14,3.14,0,0,0,0,.38.8.8,0,0,0,.31.65,2.25,2.25,0,0,0,1.3.25,12.26,12.26,0,0,0,4.5-.73A8.67,8.67,0,0,0,124.73,13.64ZM144.64,2.19Q142.41,0,138.14,0h-8.42V.75a6.61,6.61,0,0,1,1.71.3c.28.13.41.44.41.93a2.81,2.81,0,0,1-.08.66c0,.25-.12.56-.23.93l-3.56,13a2.78,2.78,0,0,1-1,1.68,3.44,3.44,0,0,1-1.35.4v.75h8.32a13.06,13.06,0,0,0,9.63-3.64,10.49,10.49,0,0,0,3.3-7.7A7.87,7.87,0,0,0,144.64,2.19ZM141.2,13.1q-2.31,5.32-7.48,5.32a2.27,2.27,0,0,1-1.26-.25,1,1,0,0,1-.34-.82,1.62,1.62,0,0,1,0-.3,2.16,2.16,0,0,1,.08-.38l4-14.65a1.63,1.63,0,0,1,.47-.81A2,2,0,0,1,138,.91a4.16,4.16,0,0,1,3.93,1.95,7,7,0,0,1,.72,3.42A16.82,16.82,0,0,1,141.2,13.1Z",opacity:1,strokeColor:"",fillColor:"#192760",width:127.70402,height:55.84601,stampFillColor:"#dce3ef",stampStrokeColor:""};break;case"Received":t={iconName:"Received",pathdata:"M18.17,8.76a5,5,0,0,0,1.57-1.93,5,5,0,0,0,.47-2A3.76,3.76,0,0,0,17.42,1,13,13,0,0,0,13.13.48H4.89v.78a6.49,6.49,0,0,1,1.77.31c.27.12.41.43.41.91a5.87,5.87,0,0,1-.13,1c-.05.2-.12.44-.19.72L3.06,17.64a3,3,0,0,1-.84,1.61,3.36,3.36,0,0,1-1.59.53v.77H9.57v-.77a6.17,6.17,0,0,1-1.8-.32c-.26-.14-.39-.48-.39-1a2.46,2.46,0,0,1,0-.28,1.78,1.78,0,0,1,0-.26l.25-1,1.78-6.25h.84l3.24,9.92h5.66v-.8A2.76,2.76,0,0,1,18,19.36a3.57,3.57,0,0,1-1-1.72l-2.31-6.78c0-.07-.09-.27-.19-.58.87-.2,1.51-.38,1.92-.52A6.56,6.56,0,0,0,18.17,8.76Zm-2.93-2.1a6.19,6.19,0,0,1-1,1.65,3.85,3.85,0,0,1-2.14,1.14,12.92,12.92,0,0,1-2.39.2l1.81-6.87A2.5,2.5,0,0,1,12,1.72a1.27,1.27,0,0,1,.9-.27,2.5,2.5,0,0,1,2.12.83,3.35,3.35,0,0,1,.62,2.09A5.81,5.81,0,0,1,15.24,6.66ZM30.3,2.78,28.52,9.45a12.53,12.53,0,0,0,4.08-.51,5.91,5.91,0,0,0,2-2.66l.84.11-2.23,8.2-.82-.15c0-.28.07-.53.08-.74a5.17,5.17,0,0,0,0-.52A2.43,2.43,0,0,0,31.66,11a6.87,6.87,0,0,0-3.44-.58l-2,7.32a3.61,3.61,0,0,0-.11.51,2.31,2.31,0,0,0,0,.4.83.83,0,0,0,.32.67,2.32,2.32,0,0,0,1.35.26,12.58,12.58,0,0,0,4.65-.76,9,9,0,0,0,4.67-4.23l.73.13-1.77,5.83H19.8v-.83A2.83,2.83,0,0,0,21,19.25a3.09,3.09,0,0,0,.85-1.61L25.54,4.17c.09-.34.16-.65.22-.93a3.35,3.35,0,0,0,.09-.71c0-.5-.13-.82-.4-1a6.34,6.34,0,0,0-1.78-.31V.48H39.82l-1.27,5.7-.81-.13A5.44,5.44,0,0,0,37,3Q35.9,1.42,32.4,1.42a2.69,2.69,0,0,0-1.54.29A2.08,2.08,0,0,0,30.3,2.78ZM56.56,6.1c0-.07,0-.18,0-.33a4.89,4.89,0,0,0-1.12-3.53,3.75,3.75,0,0,0-2.82-1.16c-2.33,0-4.35,1.55-6.07,4.63a17.09,17.09,0,0,0-2.31,8.43c0,2.08.47,3.5,1.43,4.27a4.89,4.89,0,0,0,3.11,1.15,6.84,6.84,0,0,0,4.14-1.45A11.51,11.51,0,0,0,55,16l.91.66A10.08,10.08,0,0,1,52.26,20a9.33,9.33,0,0,1-4.34,1.11A8.56,8.56,0,0,1,42,19a7.25,7.25,0,0,1-2.35-5.67A13.53,13.53,0,0,1,43.22,4a11.19,11.19,0,0,1,8.56-4A12.34,12.34,0,0,1,55,.44,13.17,13.17,0,0,0,56.9.88a1,1,0,0,0,.71-.24A2.94,2.94,0,0,0,58.06,0H59L57.45,7l-.94-.18C56.54,6.42,56.55,6.17,56.56,6.1Zm18,8.49.74.13-1.78,5.83H56.87v-.77a3.31,3.31,0,0,0,1.58-.53,3.09,3.09,0,0,0,.85-1.61L63,4.17c.09-.34.16-.65.22-.93a3.35,3.35,0,0,0,.09-.71c0-.5-.14-.82-.4-1a6.34,6.34,0,0,0-1.78-.31V.48H77.26L76,6.18l-.81-.13A5.44,5.44,0,0,0,74.48,3q-1.14-1.54-4.64-1.54a2.69,2.69,0,0,0-1.54.29,2.08,2.08,0,0,0-.56,1.07L66,9.45A12.53,12.53,0,0,0,70,8.94a5.91,5.91,0,0,0,2-2.66l.84.11-2.23,8.2-.82-.15c0-.28.07-.53.08-.74a5.17,5.17,0,0,0,0-.52A2.43,2.43,0,0,0,69.1,11a6.87,6.87,0,0,0-3.44-.58l-2,7.32a3.61,3.61,0,0,0-.11.51,2.31,2.31,0,0,0,0,.4.83.83,0,0,0,.32.67,2.32,2.32,0,0,0,1.35.26,12.58,12.58,0,0,0,4.65-.76A8.91,8.91,0,0,0,74.52,14.59Zm31-11.45-11.31,18h-1L91,5.83A16.56,16.56,0,0,0,90.12,2c-.2-.34-.71-.56-1.51-.67a3,3,0,0,0-1.31.48,3.08,3.08,0,0,0-.82,1.62l-3.7,13.47-.24,1c0,.1,0,.2-.05.3s0,.2,0,.28c0,.51.14.83.41,1a6.21,6.21,0,0,0,1.77.32v.77H75.72v-.77a3.31,3.31,0,0,0,1.58-.53,3.09,3.09,0,0,0,.85-1.61L81.83,4.17c.11-.38.19-.7.25-.95a3.75,3.75,0,0,0,.08-.69c0-.5-.15-.82-.43-1A6.49,6.49,0,0,0,80,1.26V.48H97.22v.78a4.92,4.92,0,0,0-1.57.18,1,1,0,0,0-.73,1.05,2.81,2.81,0,0,0,0,.29l0,.28,1.56,12,5.67-9a24.21,24.21,0,0,0,1.21-2.14,4.07,4.07,0,0,0,.54-1.68.79.79,0,0,0-.55-.82A5.69,5.69,0,0,0,102,1.26V.48h5.76v.78a3.5,3.5,0,0,0-1,.46A5.16,5.16,0,0,0,105.52,3.14Zm16.83,11.45.73.13-1.77,5.83H104.69v-.77a3.31,3.31,0,0,0,1.58-.53,3,3,0,0,0,.85-1.61l3.69-13.47c.08-.34.16-.65.22-.93a4,4,0,0,0,.08-.71c0-.5-.13-.82-.4-1a6.34,6.34,0,0,0-1.78-.31V.48h16.16l-1.28,5.7-.8-.13A5.43,5.43,0,0,0,122.3,3q-1.14-1.54-4.64-1.54a2.67,2.67,0,0,0-1.53.29,2.16,2.16,0,0,0-.57,1.07l-1.78,6.67a12.53,12.53,0,0,0,4.08-.51,5.91,5.91,0,0,0,2.06-2.66l.83.11-2.22,8.2-.82-.15c0-.28.06-.53.08-.74s0-.38,0-.52a2.45,2.45,0,0,0-.88-2.18,6.9,6.9,0,0,0-3.44-.58l-2,7.32c-.05.18-.08.35-.11.51a3.58,3.58,0,0,0,0,.4.81.81,0,0,0,.32.67,2.28,2.28,0,0,0,1.35.26,12.62,12.62,0,0,0,4.65-.76A9,9,0,0,0,122.35,14.59ZM142.94,2.75Q140.63.48,136.21.48h-8.7v.78a6.66,6.66,0,0,1,1.77.31q.42.21.42,1a2.91,2.91,0,0,1-.08.68q-.08.39-.24,1L125.7,17.62a2.93,2.93,0,0,1-1,1.75,3.54,3.54,0,0,1-1.39.41v.77h8.61a13.5,13.5,0,0,0,10-3.76,10.84,10.84,0,0,0,3.41-8A8.14,8.14,0,0,0,142.94,2.75ZM139.38,14q-2.38,5.51-7.74,5.5a2.35,2.35,0,0,1-1.29-.26,1,1,0,0,1-.36-.85,1.78,1.78,0,0,1,0-.31,2.08,2.08,0,0,1,.08-.39l4.13-15.15a1.76,1.76,0,0,1,.49-.84A2,2,0,0,1,136,1.42a4.32,4.32,0,0,1,4.07,2A7.17,7.17,0,0,1,140.83,7,17.49,17.49,0,0,1,139.38,14Z",opacity:1,strokeColor:"",fillColor:"#192760",width:127.70402,height:55.84601,stampFillColor:"#dce3ef",stampStrokeColor:""};break;case"Approved":t={iconName:"Approved",pathdata:"M19,20.22H10.55v-.71a4.26,4.26,0,0,0,1.79-.41,1.37,1.37,0,0,0,.53-1.29c0-.22,0-.75-.16-1.58,0-.17-.11-.89-.29-2.15H6.06l-1.72,3a4,4,0,0,0-.31.66,2,2,0,0,0-.14.69c0,.41.12.67.37.78a5.42,5.42,0,0,0,1.53.3v.71H0v-.71A4,4,0,0,0,1.21,19a5.68,5.68,0,0,0,1.28-1.56L13.45.07h.76L17,17a4.35,4.35,0,0,0,.7,2.08,2.4,2.4,0,0,0,1.31.44Zm-6.83-7.31L11.13,5.73,6.76,12.91Zm7.18,6.52a3,3,0,0,0,1.33-.49,3,3,0,0,0,.84-1.59L25.19,4.11c.07-.3.14-.6.2-.9a3.14,3.14,0,0,0,.1-.72,1,1,0,0,0-.58-1,5.68,5.68,0,0,0-1.57-.23V.48h8.47a9.68,9.68,0,0,1,3.57.57,4,4,0,0,1,2.71,4,4.93,4.93,0,0,1-2.2,4.22,9.53,9.53,0,0,1-5.69,1.58l-.85,0-1.71-.11L26,16.6l-.25,1a1,1,0,0,0-.05.3,2.83,2.83,0,0,0,0,.29c0,.5.14.81.4.94a6.31,6.31,0,0,0,1.76.31v.76H19.39Zm8.52-9.66.54.06h.48a5.81,5.81,0,0,0,2.3-.36,3.47,3.47,0,0,0,1.4-1.18,6.24,6.24,0,0,0,.86-2,8.94,8.94,0,0,0,.3-2,3.29,3.29,0,0,0-.58-2,2.3,2.3,0,0,0-2-.79,1.23,1.23,0,0,0-.93.28,2.71,2.71,0,0,0-.46,1Zm8,9.69a3.19,3.19,0,0,0,1.55-.52,3,3,0,0,0,.84-1.59L42,4.11c.07-.3.14-.6.2-.9a3.14,3.14,0,0,0,.1-.72,1,1,0,0,0-.58-1,5.68,5.68,0,0,0-1.57-.23V.48h8.47a9.68,9.68,0,0,1,3.57.57,4,4,0,0,1,2.71,4,4.93,4.93,0,0,1-2.2,4.22A9.53,9.53,0,0,1,47,10.87l-.85,0-1.71-.11L42.79,16.6l-.25,1a1.45,1.45,0,0,0,0,.3,2.83,2.83,0,0,0,0,.29c0,.5.14.81.4.94a6.31,6.31,0,0,0,1.76.31v.76h-8.7Zm8.74-9.69.54.06h.48A5.81,5.81,0,0,0,48,9.48a3.41,3.41,0,0,0,1.4-1.18,6.24,6.24,0,0,0,.86-2,9,9,0,0,0,.31-2,3.29,3.29,0,0,0-.59-2,2.3,2.3,0,0,0-2-.79,1.23,1.23,0,0,0-.93.28,2.88,2.88,0,0,0-.46,1Zm7.95,9.69a3.27,3.27,0,0,0,1.56-.52A3.06,3.06,0,0,0,55,17.35L58.64,4.11l.18-.71a4.72,4.72,0,0,0,.13-1c0-.47-.13-.77-.4-.9a6.74,6.74,0,0,0-1.74-.3V.48h8.11A13,13,0,0,1,69.14,1a3.7,3.7,0,0,1,2.74,3.75,4.8,4.8,0,0,1-.46,2,5,5,0,0,1-1.54,1.9,6.55,6.55,0,0,1-1.79,1,19.35,19.35,0,0,1-1.89.52c.1.3.16.49.2.57l2.27,6.66a3.49,3.49,0,0,0,1,1.7,3.08,3.08,0,0,0,1.6.41v.76H65.33l-3.19-9.76h-.83L59.57,16.6l-.25,1a1.87,1.87,0,0,0,0,.25,2.64,2.64,0,0,0,0,.28q0,.8.39,1a5.88,5.88,0,0,0,1.76.32v.76H52.62ZM63.94,9.3a3.79,3.79,0,0,0,2.11-1.13A6,6,0,0,0,67,6.55a5.84,5.84,0,0,0,.44-2.26,3.31,3.31,0,0,0-.61-2,2.47,2.47,0,0,0-2.09-.81,1.25,1.25,0,0,0-.88.26,2.34,2.34,0,0,0-.47,1.05L61.59,9.5A13.42,13.42,0,0,0,63.94,9.3ZM76.39,4.53Q80.26,0,85,0a7.34,7.34,0,0,1,5.23,1.92,6.76,6.76,0,0,1,2,5.19,13.9,13.9,0,0,1-3.62,9.07q-3.86,4.61-8.88,4.6a7.06,7.06,0,0,1-5.13-1.92,6.86,6.86,0,0,1-2-5.14A14,14,0,0,1,76.39,4.53ZM77.3,18a2.56,2.56,0,0,0,2.57,1.78A4.62,4.62,0,0,0,83,18.47,14.42,14.42,0,0,0,86,13.54a27.18,27.18,0,0,0,1.52-4.83,20.67,20.67,0,0,0,.54-4.11,4.38,4.38,0,0,0-.73-2.55A2.62,2.62,0,0,0,85,1q-3.68,0-6.19,6.54a24.29,24.29,0,0,0-1.9,8.26A5.91,5.91,0,0,0,77.3,18ZM102.23.48v.76a5.19,5.19,0,0,0-1.55.17,1,1,0,0,0-.72,1,2.46,2.46,0,0,0,0,.28L100,3l1.52,11.76L107.11,6c.44-.71.84-1.41,1.2-2.11a4.06,4.06,0,0,0,.53-1.66.79.79,0,0,0-.55-.81,6.11,6.11,0,0,0-1.35-.14V.48h5.67v.76a3.31,3.31,0,0,0-1,.45,5.33,5.33,0,0,0-1.18,1.4L99.26,20.78h-.94l-2.25-15A15.49,15.49,0,0,0,95.24,2c-.22-.39-.84-.62-1.83-.71V.48Zm7.35,19a3.19,3.19,0,0,0,1.55-.52,3,3,0,0,0,.84-1.59l3.62-13.24c.09-.34.16-.64.22-.92a3.27,3.27,0,0,0,.09-.7c0-.5-.14-.81-.4-.94a6.13,6.13,0,0,0-1.75-.31V.48h15.89l-1.25,5.6L127.6,6a5.32,5.32,0,0,0-.7-3q-1.12-1.52-4.56-1.51a2.61,2.61,0,0,0-1.51.28,2.12,2.12,0,0,0-.56,1.06L118.52,9.3a12.1,12.1,0,0,0,4-.51,5.8,5.8,0,0,0,2-2.61l.82.1-2.19,8.07-.81-.14c0-.28.07-.52.08-.73s0-.37,0-.51a2.4,2.4,0,0,0-.87-2.15,6.76,6.76,0,0,0-3.38-.57l-1.94,7.2a3.34,3.34,0,0,0-.11.51,3.67,3.67,0,0,0,0,.39.81.81,0,0,0,.32.66,2.3,2.3,0,0,0,1.33.26,12.39,12.39,0,0,0,4.57-.75A8.84,8.84,0,0,0,127,14.35l.72.13-1.74,5.74H109.58Zm18.27,0a3.27,3.27,0,0,0,1.37-.41,2.85,2.85,0,0,0,1-1.71l3.63-13.23c.1-.38.18-.69.23-1a3,3,0,0,0,.09-.67c0-.5-.15-.81-.42-.94A6.38,6.38,0,0,0,132,1.24V.48h8.57c2.9,0,5.1.74,6.62,2.22a8,8,0,0,1,2.26,6,10.72,10.72,0,0,1-3.35,7.84,13.3,13.3,0,0,1-9.8,3.7h-8.47ZM144.4,3.39a4.23,4.23,0,0,0-4-2,2,2,0,0,0-1.29.31,1.74,1.74,0,0,0-.48.83l-4.07,14.9a3.24,3.24,0,0,0-.07.39,1.69,1.69,0,0,0,0,.3,1,1,0,0,0,.36.84,2.27,2.27,0,0,0,1.27.26q5.26,0,7.62-5.42a17.25,17.25,0,0,0,1.43-6.94A7,7,0,0,0,144.4,3.39Z",opacity:1,strokeColor:"",fillColor:"#516c30",width:127.70402,height:55.84601,stampFillColor:"#e6eddf",stampStrokeColor:""};break;case"Confidential":t={iconName:"Confidential",pathdata:"M13.71,0,12.63,6.9,12,6.73c0-.41,0-.66,0-.73s0-.18,0-.32a6.16,6.16,0,0,0-.79-3.47,2.37,2.37,0,0,0-2-1.14c-1.64,0-3.07,1.51-4.29,4.55a22,22,0,0,0-1.64,8.29c0,2,.34,3.44,1,4.2A3,3,0,0,0,6.5,19.24a4.08,4.08,0,0,0,2.93-1.43,10.47,10.47,0,0,0,1.5-2.09l.64.65A8.84,8.84,0,0,1,9,19.72a5.24,5.24,0,0,1-3.08,1.09,5.16,5.16,0,0,1-4.21-2.08A8.68,8.68,0,0,1,0,13.16,16.5,16.5,0,0,1,2.55,3.92Q5.1,0,8.61,0a6.35,6.35,0,0,1,2.25.43,6.62,6.62,0,0,0,1.38.43.55.55,0,0,0,.5-.23A2.61,2.61,0,0,0,13.06,0ZM27.49,7.11a17.19,17.19,0,0,1-2.61,9.07q-2.77,4.61-6.39,4.6a4.42,4.42,0,0,1-3.7-1.92,8.47,8.47,0,0,1-1.43-5.14A17.31,17.31,0,0,1,16,4.53C17.88,1.51,20,0,22.25,0A4.53,4.53,0,0,1,26,1.92,8.27,8.27,0,0,1,27.49,7.11ZM24.42,4.6a5.71,5.71,0,0,0-.53-2.55A1.76,1.76,0,0,0,22.24,1q-2.65,0-4.45,6.54a31.93,31.93,0,0,0-1.37,8.26A8.15,8.15,0,0,0,16.67,18c.34,1.19,1,1.78,1.85,1.78a2.9,2.9,0,0,0,2.28-1.29,15.85,15.85,0,0,0,2.13-4.93A34.08,34.08,0,0,0,24,8.71,28.5,28.5,0,0,0,24.42,4.6ZM42.75,1.3l.3-.06V.48H38.69v.76a2.55,2.55,0,0,1,1.16.33,1.8,1.8,0,0,1,.51,1.48,10.11,10.11,0,0,1-.13,1.34c-.06.41-.14.87-.24,1.39l-1.65,8.34L33.73.48H29.45v.76a2.66,2.66,0,0,1,1,.24,1.88,1.88,0,0,1,.65,1.06l.09.3L28.81,15a20.72,20.72,0,0,1-1,3.61,1.61,1.61,0,0,1-1.19.9v.76h4.42v-.76a2.55,2.55,0,0,1-1.13-.32,1.67,1.67,0,0,1-.56-1.44,7.13,7.13,0,0,1,.05-.79c.06-.43.17-1.09.34-2L31.89,4.38l5.52,16.33h.52l3-15a22.58,22.58,0,0,1,.87-3.42A1.42,1.42,0,0,1,42.75,1.3ZM55.53.48H44.23v.76a3.63,3.63,0,0,1,1.26.3c.19.13.29.42.29.9a7.08,7.08,0,0,1-.09,1c0,.2-.08.44-.13.71L43,17.34a3.47,3.47,0,0,1-.59,1.58,1.91,1.91,0,0,1-1.13.54v.76h6.29v-.76a2.13,2.13,0,0,1-1-.19A1.23,1.23,0,0,1,46,18.1c0-.1,0-.21,0-.31s0-.23.05-.35l1.4-7.21a3.15,3.15,0,0,1,2.37.64A3.21,3.21,0,0,1,50.38,13c0,.11,0,.28,0,.49s0,.46-.06.75l.58.14,1.58-8.07-.59-.1a5.79,5.79,0,0,1-1.43,2.59,6.17,6.17,0,0,1-2.77.52l1.26-6.54a2.06,2.06,0,0,1,.42-1.08,1.39,1.39,0,0,1,1-.26c1.62,0,2.7.51,3.24,1.54a7.11,7.11,0,0,1,.49,3l.57.13Zm3.69,17.71c0-.08,0-.17,0-.27s0-.2,0-.3l.17-1L62.06,3.36a3.44,3.44,0,0,1,.59-1.6,2,2,0,0,1,1.12-.52V.48H57.44v.76a3.47,3.47,0,0,1,1.26.31c.2.13.3.44.3.94a4.25,4.25,0,0,1-.06.67c0,.26-.09.57-.17,1L56.16,17.35a3.52,3.52,0,0,1-.6,1.59,2,2,0,0,1-1.12.52v.76h6.33v-.76a3.3,3.3,0,0,1-1.26-.32C59.32,19,59.22,18.69,59.22,18.19Zm18-9.51a13,13,0,0,1-2.42,7.84,8.31,8.31,0,0,1-7,3.7H61.6v-.76a2,2,0,0,0,1-.41,3.14,3.14,0,0,0,.73-1.71L65.93,4.11c.08-.38.13-.69.17-1a4.36,4.36,0,0,0,.06-.67c0-.5-.1-.81-.3-.94a3.47,3.47,0,0,0-1.26-.31V.48h6.17A5.52,5.52,0,0,1,75.53,2.7,9.91,9.91,0,0,1,77.17,8.68ZM74,6.87a9.22,9.22,0,0,0-.53-3.48,2.91,2.91,0,0,0-2.87-2,1.12,1.12,0,0,0-.93.31,1.81,1.81,0,0,0-.35.83l-2.93,14.9a3,3,0,0,0-.05.39c0,.11,0,.21,0,.3a1.17,1.17,0,0,0,.25.84,1.3,1.3,0,0,0,.92.26q3.8,0,5.49-5.42A23.26,23.26,0,0,0,74,6.87Zm11.3,11.65a6.72,6.72,0,0,1-3.29.75,1.3,1.3,0,0,1-1-.26,1,1,0,0,1-.23-.66,3.28,3.28,0,0,1,0-.39,4.88,4.88,0,0,1,.08-.51l1.4-7.2a3.73,3.73,0,0,1,2.43.57A2.87,2.87,0,0,1,85.43,13c0,.14,0,.31,0,.51s0,.45-.06.73l.59.14,1.57-8.07-.59-.1a5.79,5.79,0,0,1-1.46,2.61,6.5,6.5,0,0,1-2.89.51l1.26-6.56a2.41,2.41,0,0,1,.41-1.06c.16-.19.52-.28,1.08-.28,1.65,0,2.75.5,3.29,1.51a7,7,0,0,1,.5,3l.57.13.9-5.6H79.14v.76a3.35,3.35,0,0,1,1.26.31c.19.13.29.44.29.94a5,5,0,0,1-.07.7c0,.28-.09.58-.15.92L77.86,17.35a3.52,3.52,0,0,1-.6,1.59,2,2,0,0,1-1.13.52v.76H87.91l1.25-5.74-.52-.13A7.69,7.69,0,0,1,85.34,18.52ZM105.8,1.24V.48h-4.37v.76a2.55,2.55,0,0,1,1.16.33,1.77,1.77,0,0,1,.52,1.48A10.58,10.58,0,0,1,103,4.39c-.06.41-.13.87-.23,1.39l-1.66,8.34L96.47.48H92.19v.76a2.61,2.61,0,0,1,1,.24,1.83,1.83,0,0,1,.65,1.06l.1.3L91.55,15a19,19,0,0,1-1,3.61,1.61,1.61,0,0,1-1.19.9v.76h4.42v-.76a2.59,2.59,0,0,1-1.13-.32,1.67,1.67,0,0,1-.56-1.44,7.13,7.13,0,0,1,0-.79c.06-.43.17-1.09.35-2L94.63,4.38l5.52,16.33h.53l2.95-15a22.93,22.93,0,0,1,.86-3.42,1.42,1.42,0,0,1,1-1Zm11.4,4.9L118,.48H106.28l-.82,5,.55.2a8,8,0,0,1,1.87-3.16,3.7,3.7,0,0,1,2.7-1.06l-3.12,15.85a2.94,2.94,0,0,1-.87,1.85,2.48,2.48,0,0,1-1.34.26v.76h7v-.76a4.24,4.24,0,0,1-1.43-.3c-.23-.13-.34-.45-.34-.95a2.26,2.26,0,0,1,0-.26c0-.09,0-.2,0-.33l.18-1,3-15.1a2.73,2.73,0,0,1,1.79.63c.75.7,1.13,2,1.17,3.94Zm3.57,12.05c0-.08,0-.17,0-.27s0-.2,0-.3l.17-1,2.62-13.24a3.44,3.44,0,0,1,.59-1.6,2,2,0,0,1,1.12-.52V.48H119v.76a3.47,3.47,0,0,1,1.26.31c.2.13.3.44.3.94a4.25,4.25,0,0,1-.06.67c0,.26-.09.57-.17,1l-2.61,13.24a3.52,3.52,0,0,1-.6,1.59,2,2,0,0,1-1.12.52v.76h6.33v-.76a3.36,3.36,0,0,1-1.26-.32C120.87,19,120.77,18.69,120.77,18.19Zm28.86-3.71-1.24,5.74H130.3v-.71a2.48,2.48,0,0,0,1.3-.41,1.64,1.64,0,0,0,.37-1.29c0-.22,0-.75-.11-1.58,0-.17-.08-.89-.21-2.15h-4.58l-1.24,3a5.1,5.1,0,0,0-.22.66,2.45,2.45,0,0,0-.1.69c0,.41.09.67.26.78a3.05,3.05,0,0,0,1.11.3v.71h-4.17v-.71a2.66,2.66,0,0,0,.87-.53,5.79,5.79,0,0,0,.92-1.56L132.39.07h.55L135,17a5.53,5.53,0,0,0,.5,2.08,1.67,1.67,0,0,0,1.14.46v0a1.93,1.93,0,0,0,1.12-.52,3.52,3.52,0,0,0,.6-1.6l2.61-13.23c.08-.38.13-.69.17-1a4.36,4.36,0,0,0,.06-.67c0-.5-.1-.81-.3-.94a3.47,3.47,0,0,0-1.26-.31V.48h6.73v.76a3.23,3.23,0,0,0-1.49.48,3.06,3.06,0,0,0-.64,1.64l-2.77,14.08c0,.16-.05.3-.07.44s0,.29,0,.47a.79.79,0,0,0,.31.71,1.55,1.55,0,0,0,.87.21,6.83,6.83,0,0,0,3.79-1,8.42,8.42,0,0,0,2.81-3.88ZM131.5,12.91l-.78-7.18-3.14,7.18Z",opacity:1,strokeColor:"",fillColor:"#192760",width:127.70402,height:55.84601,stampFillColor:"#dce3ef",stampStrokeColor:""};break;case"NotApproved":case"Not Approved":t={iconName:"Not Approved",pathdata:"M0,19.46a1.56,1.56,0,0,0,1.16-.9A19.84,19.84,0,0,0,2.1,15L4.42,2.84l-.09-.3a1.82,1.82,0,0,0-.64-1.06,2.41,2.41,0,0,0-1-.24V.48H6.88l4.49,13.64L13,5.78c.09-.52.17-1,.22-1.39a10.11,10.11,0,0,0,.13-1.34,1.83,1.83,0,0,0-.49-1.48,2.49,2.49,0,0,0-1.13-.33V.48H16v.76l-.29.06a1.42,1.42,0,0,0-1,1,23.7,23.7,0,0,0-.84,3.42L11,20.71h-.51L5.1,4.38,3,15c-.17.87-.28,1.53-.33,2a5.32,5.32,0,0,0,0,.79,1.69,1.69,0,0,0,.54,1.44,2.48,2.48,0,0,0,1.1.32v.76H0ZM17.73,4.53C19.54,1.51,21.55,0,23.79,0a4.4,4.4,0,0,1,3.66,1.92,8.52,8.52,0,0,1,1.43,5.19,17.56,17.56,0,0,1-2.53,9.07q-2.7,4.61-6.21,4.6a4.24,4.24,0,0,1-3.6-1.92,8.6,8.6,0,0,1-1.39-5.14A17.68,17.68,0,0,1,17.73,4.53ZM18.37,18c.33,1.19.93,1.78,1.8,1.78a2.83,2.83,0,0,0,2.22-1.29,16.41,16.41,0,0,0,2.06-4.93,35.53,35.53,0,0,0,1.06-4.83A28.26,28.26,0,0,0,25.9,4.6a5.86,5.86,0,0,0-.52-2.55A1.7,1.7,0,0,0,23.78,1Q21.2,1,19.45,7.53a33,33,0,0,0-1.33,8.26A8.15,8.15,0,0,0,18.37,18Zm11.08,1.48a2.34,2.34,0,0,0,1.3-.26,3,3,0,0,0,.85-1.85l3-15.85A3.54,3.54,0,0,0,32,2.56a8,8,0,0,0-1.82,3.16l-.53-.2.8-5H41.81l-.74,5.66-.54-.07c0-1.92-.41-3.24-1.13-3.94a2.6,2.6,0,0,0-1.74-.63L34.79,16.6l-.17,1a2.43,2.43,0,0,0,0,.33,2.26,2.26,0,0,0,0,.26c0,.5.11.82.33.95a3.94,3.94,0,0,0,1.39.3v.76H29.45Zm26.65.76H50.18v-.71a2.28,2.28,0,0,0,1.25-.41,1.64,1.64,0,0,0,.37-1.29c0-.22,0-.75-.11-1.58,0-.17-.08-.89-.2-2.15H47l-1.2,3c-.08.2-.15.42-.22.66a2.84,2.84,0,0,0-.09.69c0,.41.08.67.25.78a2.91,2.91,0,0,0,1.08.3v.71H42.79v-.71a2.44,2.44,0,0,0,.85-.53,5.59,5.59,0,0,0,.9-1.56L52.21.07h.53l2,16.88A5.46,5.46,0,0,0,55.2,19a1.36,1.36,0,0,0,.9.43Zm-4.76-7.31-.76-7.18-3,7.18Zm4.95,6.53a1.82,1.82,0,0,0,1-.5,3.56,3.56,0,0,0,.58-1.59L60.42,4.11c.06-.3.1-.6.15-.9a5.46,5.46,0,0,0,.06-.72c0-.52-.13-.86-.4-1a2.88,2.88,0,0,0-1.1-.23V.48h5.93a5,5,0,0,1,2.5.57c1.26.73,1.9,2.07,1.9,4a5.81,5.81,0,0,1-1.54,4.22,5.32,5.32,0,0,1-4,1.58l-.59,0-1.2-.11L61,16.6l-.17,1a2.72,2.72,0,0,0,0,.3,2.81,2.81,0,0,0,0,.29c0,.5.09.81.28.94a3.26,3.26,0,0,0,1.23.31v.76h-6Zm6-9.67.38.06H63a3,3,0,0,0,1.62-.36,2.87,2.87,0,0,0,1-1.18,7.28,7.28,0,0,0,.6-2,11.67,11.67,0,0,0,.22-2,4.4,4.4,0,0,0-.41-2,1.44,1.44,0,0,0-1.39-.79.71.71,0,0,0-.65.28,3.7,3.7,0,0,0-.32,1Zm5.61,9.69A1.86,1.86,0,0,0,69,18.94a3.54,3.54,0,0,0,.59-1.59L72.15,4.11q.09-.45.15-.9a5.73,5.73,0,0,0,.07-.72,1.1,1.1,0,0,0-.41-1,2.88,2.88,0,0,0-1.1-.23V.48h5.93a5,5,0,0,1,2.5.57c1.27.73,1.9,2.07,1.9,4a5.77,5.77,0,0,1-1.54,4.22,5.31,5.31,0,0,1-4,1.58l-.6,0-1.2-.11L72.74,16.6l-.17,1a2.72,2.72,0,0,0,0,.3c0,.1,0,.19,0,.29,0,.5.1.81.29.94a3.15,3.15,0,0,0,1.23.31v.76h-6.1Zm6.12-9.69.38.06h.33a3,3,0,0,0,1.62-.36,3,3,0,0,0,1-1.18,7.67,7.67,0,0,0,.59-2,11.67,11.67,0,0,0,.22-2,4.4,4.4,0,0,0-.41-2,1.43,1.43,0,0,0-1.38-.79.73.73,0,0,0-.66.28,3.7,3.7,0,0,0-.32,1Zm5.57,9.69a1.9,1.9,0,0,0,1.09-.52,3.56,3.56,0,0,0,.58-1.59L83.84,4.11c0-.27.09-.51.13-.71a7.08,7.08,0,0,0,.09-1c0-.47-.1-.77-.28-.9a3.53,3.53,0,0,0-1.22-.3V.48h5.68a6.57,6.57,0,0,1,3,.53q1.92,1,1.92,3.75a6.79,6.79,0,0,1-.32,2,5.23,5.23,0,0,1-1.08,1.9,4.56,4.56,0,0,1-1.25,1,11.62,11.62,0,0,1-1.33.52c.07.3.12.49.14.57l1.59,6.66a4.07,4.07,0,0,0,.69,1.7,1.72,1.72,0,0,0,1.13.41v.76H88.52l-2.23-9.76h-.58L84.49,16.6l-.17,1a1,1,0,0,0,0,.25,2.62,2.62,0,0,0,0,.28c0,.53.09.86.26,1a3.11,3.11,0,0,0,1.24.32v.76H79.63ZM87.55,9.3A2.59,2.59,0,0,0,89,8.17a7.24,7.24,0,0,0,.66-1.62A8.18,8.18,0,0,0,90,4.29a4.32,4.32,0,0,0-.43-2,1.5,1.5,0,0,0-1.45-.81.71.71,0,0,0-.62.26,2.78,2.78,0,0,0-.33,1.05L85.91,9.5A6.63,6.63,0,0,0,87.55,9.3Zm8.72-4.77Q99,0,102.32,0A4.37,4.37,0,0,1,106,1.92a8.46,8.46,0,0,1,1.44,5.19,17.58,17.58,0,0,1-2.54,9.07q-2.7,4.61-6.21,4.6a4.27,4.27,0,0,1-3.6-1.92,8.67,8.67,0,0,1-1.38-5.14A17.68,17.68,0,0,1,96.27,4.53ZM96.9,18c.33,1.19.93,1.78,1.8,1.78a2.83,2.83,0,0,0,2.22-1.29A16.63,16.63,0,0,0,103,13.54a37.1,37.1,0,0,0,1.06-4.83,29.49,29.49,0,0,0,.38-4.11,5.86,5.86,0,0,0-.51-2.55A1.71,1.71,0,0,0,102.31,1C100.6,1,99.15,3.17,98,7.53a33.42,33.42,0,0,0-1.33,8.26A8.57,8.57,0,0,0,96.9,18ZM114.35.48v.76a2.57,2.57,0,0,0-1.08.17,1.07,1.07,0,0,0-.5,1,2.53,2.53,0,0,0,0,.28,2.64,2.64,0,0,0,0,.28l1.07,11.76L117.77,6c.31-.71.59-1.41.84-2.11A5.25,5.25,0,0,0,119,2.19a.85.85,0,0,0-.38-.81,3.09,3.09,0,0,0-.95-.14V.48h4v.76a2.08,2.08,0,0,0-.73.45,5.35,5.35,0,0,0-.82,1.4l-7.79,17.69h-.66L110,5.74A22,22,0,0,0,109.46,2c-.16-.39-.58-.62-1.28-.71V.48Zm5.15,19a1.83,1.83,0,0,0,1.08-.52,3.42,3.42,0,0,0,.59-1.59l2.54-13.24c.06-.34.11-.64.15-.92a4.83,4.83,0,0,0,.06-.7c0-.5-.09-.81-.28-.94a3.14,3.14,0,0,0-1.22-.31V.48h11.12l-.87,5.6L132.11,6a7,7,0,0,0-.49-3c-.52-1-1.59-1.51-3.19-1.51-.55,0-.9.09-1.06.28A2.44,2.44,0,0,0,127,2.74L125.76,9.3a6.21,6.21,0,0,0,2.81-.51A6,6,0,0,0,130,6.18l.58.1L129,14.35l-.56-.14c0-.28,0-.52,0-.73s0-.37,0-.51a2.92,2.92,0,0,0-.61-2.15,3.55,3.55,0,0,0-2.37-.57l-1.36,7.2a4.79,4.79,0,0,0-.07.51,3.28,3.28,0,0,0,0,.39,1,1,0,0,0,.22.66,1.24,1.24,0,0,0,.93.26,6.43,6.43,0,0,0,3.21-.75,7.67,7.67,0,0,0,3.21-4.17l.5.13-1.22,5.74H119.5Zm12.79,0a1.87,1.87,0,0,0,1-.41,3.23,3.23,0,0,0,.71-1.71L136.5,4.11c.07-.38.13-.69.17-1a5.89,5.89,0,0,0,.05-.67c0-.5-.1-.81-.29-.94a3.32,3.32,0,0,0-1.22-.31V.48h6a5.35,5.35,0,0,1,4.63,2.22,10.11,10.11,0,0,1,1.58,6,13.3,13.3,0,0,1-2.34,7.84,8,8,0,0,1-6.86,3.7h-5.93ZM143.87,3.39a2.84,2.84,0,0,0-2.79-2,1.08,1.08,0,0,0-.91.31,1.93,1.93,0,0,0-.34.83L137,17.44a3.1,3.1,0,0,0-.06.39c0,.11,0,.21,0,.3a1.22,1.22,0,0,0,.24.84,1.26,1.26,0,0,0,.9.26q3.67,0,5.33-5.42a23.91,23.91,0,0,0,1-6.94A9.45,9.45,0,0,0,143.87,3.39Z",opacity:1,strokeColor:"",fillColor:"#8a251a",width:127.70402,height:55.84601,stampFillColor:"#f6dedd",stampStrokeColor:""}}if(t)return t.modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),this.currentStampAnnotation=t,t}},s.prototype.retrievestampAnnotation=function(e){if(e){var t=void 0;switch(e.trim()){case"Approved":t={iconName:"Approved",pathdata:"M19,20.22H10.55v-.71a4.26,4.26,0,0,0,1.79-.41,1.37,1.37,0,0,0,.53-1.29c0-.22,0-.75-.16-1.58,0-.17-.11-.89-.29-2.15H6.06l-1.72,3a4,4,0,0,0-.31.66,2,2,0,0,0-.14.69c0,.41.12.67.37.78a5.42,5.42,0,0,0,1.53.3v.71H0v-.71A4,4,0,0,0,1.21,19a5.68,5.68,0,0,0,1.28-1.56L13.45.07h.76L17,17a4.35,4.35,0,0,0,.7,2.08,2.4,2.4,0,0,0,1.31.44Zm-6.83-7.31L11.13,5.73,6.76,12.91Zm7.18,6.52a3,3,0,0,0,1.33-.49,3,3,0,0,0,.84-1.59L25.19,4.11c.07-.3.14-.6.2-.9a3.14,3.14,0,0,0,.1-.72,1,1,0,0,0-.58-1,5.68,5.68,0,0,0-1.57-.23V.48h8.47a9.68,9.68,0,0,1,3.57.57,4,4,0,0,1,2.71,4,4.93,4.93,0,0,1-2.2,4.22,9.53,9.53,0,0,1-5.69,1.58l-.85,0-1.71-.11L26,16.6l-.25,1a1,1,0,0,0-.05.3,2.83,2.83,0,0,0,0,.29c0,.5.14.81.4.94a6.31,6.31,0,0,0,1.76.31v.76H19.39Zm8.52-9.66.54.06h.48a5.81,5.81,0,0,0,2.3-.36,3.47,3.47,0,0,0,1.4-1.18,6.24,6.24,0,0,0,.86-2,8.94,8.94,0,0,0,.3-2,3.29,3.29,0,0,0-.58-2,2.3,2.3,0,0,0-2-.79,1.23,1.23,0,0,0-.93.28,2.71,2.71,0,0,0-.46,1Zm8,9.69a3.19,3.19,0,0,0,1.55-.52,3,3,0,0,0,.84-1.59L42,4.11c.07-.3.14-.6.2-.9a3.14,3.14,0,0,0,.1-.72,1,1,0,0,0-.58-1,5.68,5.68,0,0,0-1.57-.23V.48h8.47a9.68,9.68,0,0,1,3.57.57,4,4,0,0,1,2.71,4,4.93,4.93,0,0,1-2.2,4.22A9.53,9.53,0,0,1,47,10.87l-.85,0-1.71-.11L42.79,16.6l-.25,1a1.45,1.45,0,0,0,0,.3,2.83,2.83,0,0,0,0,.29c0,.5.14.81.4.94a6.31,6.31,0,0,0,1.76.31v.76h-8.7Zm8.74-9.69.54.06h.48A5.81,5.81,0,0,0,48,9.48a3.41,3.41,0,0,0,1.4-1.18,6.24,6.24,0,0,0,.86-2,9,9,0,0,0,.31-2,3.29,3.29,0,0,0-.59-2,2.3,2.3,0,0,0-2-.79,1.23,1.23,0,0,0-.93.28,2.88,2.88,0,0,0-.46,1Zm7.95,9.69a3.27,3.27,0,0,0,1.56-.52A3.06,3.06,0,0,0,55,17.35L58.64,4.11l.18-.71a4.72,4.72,0,0,0,.13-1c0-.47-.13-.77-.4-.9a6.74,6.74,0,0,0-1.74-.3V.48h8.11A13,13,0,0,1,69.14,1a3.7,3.7,0,0,1,2.74,3.75,4.8,4.8,0,0,1-.46,2,5,5,0,0,1-1.54,1.9,6.55,6.55,0,0,1-1.79,1,19.35,19.35,0,0,1-1.89.52c.1.3.16.49.2.57l2.27,6.66a3.49,3.49,0,0,0,1,1.7,3.08,3.08,0,0,0,1.6.41v.76H65.33l-3.19-9.76h-.83L59.57,16.6l-.25,1a1.87,1.87,0,0,0,0,.25,2.64,2.64,0,0,0,0,.28q0,.8.39,1a5.88,5.88,0,0,0,1.76.32v.76H52.62ZM63.94,9.3a3.79,3.79,0,0,0,2.11-1.13A6,6,0,0,0,67,6.55a5.84,5.84,0,0,0,.44-2.26,3.31,3.31,0,0,0-.61-2,2.47,2.47,0,0,0-2.09-.81,1.25,1.25,0,0,0-.88.26,2.34,2.34,0,0,0-.47,1.05L61.59,9.5A13.42,13.42,0,0,0,63.94,9.3ZM76.39,4.53Q80.26,0,85,0a7.34,7.34,0,0,1,5.23,1.92,6.76,6.76,0,0,1,2,5.19,13.9,13.9,0,0,1-3.62,9.07q-3.86,4.61-8.88,4.6a7.06,7.06,0,0,1-5.13-1.92,6.86,6.86,0,0,1-2-5.14A14,14,0,0,1,76.39,4.53ZM77.3,18a2.56,2.56,0,0,0,2.57,1.78A4.62,4.62,0,0,0,83,18.47,14.42,14.42,0,0,0,86,13.54a27.18,27.18,0,0,0,1.52-4.83,20.67,20.67,0,0,0,.54-4.11,4.38,4.38,0,0,0-.73-2.55A2.62,2.62,0,0,0,85,1q-3.68,0-6.19,6.54a24.29,24.29,0,0,0-1.9,8.26A5.91,5.91,0,0,0,77.3,18ZM102.23.48v.76a5.19,5.19,0,0,0-1.55.17,1,1,0,0,0-.72,1,2.46,2.46,0,0,0,0,.28L100,3l1.52,11.76L107.11,6c.44-.71.84-1.41,1.2-2.11a4.06,4.06,0,0,0,.53-1.66.79.79,0,0,0-.55-.81,6.11,6.11,0,0,0-1.35-.14V.48h5.67v.76a3.31,3.31,0,0,0-1,.45,5.33,5.33,0,0,0-1.18,1.4L99.26,20.78h-.94l-2.25-15A15.49,15.49,0,0,0,95.24,2c-.22-.39-.84-.62-1.83-.71V.48Zm7.35,19a3.19,3.19,0,0,0,1.55-.52,3,3,0,0,0,.84-1.59l3.62-13.24c.09-.34.16-.64.22-.92a3.27,3.27,0,0,0,.09-.7c0-.5-.14-.81-.4-.94a6.13,6.13,0,0,0-1.75-.31V.48h15.89l-1.25,5.6L127.6,6a5.32,5.32,0,0,0-.7-3q-1.12-1.52-4.56-1.51a2.61,2.61,0,0,0-1.51.28,2.12,2.12,0,0,0-.56,1.06L118.52,9.3a12.1,12.1,0,0,0,4-.51,5.8,5.8,0,0,0,2-2.61l.82.1-2.19,8.07-.81-.14c0-.28.07-.52.08-.73s0-.37,0-.51a2.4,2.4,0,0,0-.87-2.15,6.76,6.76,0,0,0-3.38-.57l-1.94,7.2a3.34,3.34,0,0,0-.11.51,3.67,3.67,0,0,0,0,.39.81.81,0,0,0,.32.66,2.3,2.3,0,0,0,1.33.26,12.39,12.39,0,0,0,4.57-.75A8.84,8.84,0,0,0,127,14.35l.72.13-1.74,5.74H109.58Zm18.27,0a3.27,3.27,0,0,0,1.37-.41,2.85,2.85,0,0,0,1-1.71l3.63-13.23c.1-.38.18-.69.23-1a3,3,0,0,0,.09-.67c0-.5-.15-.81-.42-.94A6.38,6.38,0,0,0,132,1.24V.48h8.57c2.9,0,5.1.74,6.62,2.22a8,8,0,0,1,2.26,6,10.72,10.72,0,0,1-3.35,7.84,13.3,13.3,0,0,1-9.8,3.7h-8.47ZM144.4,3.39a4.23,4.23,0,0,0-4-2,2,2,0,0,0-1.29.31,1.74,1.74,0,0,0-.48.83l-4.07,14.9a3.24,3.24,0,0,0-.07.39,1.69,1.69,0,0,0,0,.3,1,1,0,0,0,.36.84,2.27,2.27,0,0,0,1.27.26q5.26,0,7.62-5.42a17.25,17.25,0,0,0,1.43-6.94A7,7,0,0,0,144.4,3.39Z",opacity:1,strokeColor:"",fillColor:"#516c30",width:149.474,height:20.783,stampFillColor:"#e6eddf",stampStrokeColor:""};break;case"Confidential":t={iconName:"Confidential",pathdata:"M13.71,0,12.63,6.9,12,6.73c0-.41,0-.66,0-.73s0-.18,0-.32a6.16,6.16,0,0,0-.79-3.47,2.37,2.37,0,0,0-2-1.14c-1.64,0-3.07,1.51-4.29,4.55a22,22,0,0,0-1.64,8.29c0,2,.34,3.44,1,4.2A3,3,0,0,0,6.5,19.24a4.08,4.08,0,0,0,2.93-1.43,10.47,10.47,0,0,0,1.5-2.09l.64.65A8.84,8.84,0,0,1,9,19.72a5.24,5.24,0,0,1-3.08,1.09,5.16,5.16,0,0,1-4.21-2.08A8.68,8.68,0,0,1,0,13.16,16.5,16.5,0,0,1,2.55,3.92Q5.1,0,8.61,0a6.35,6.35,0,0,1,2.25.43,6.62,6.62,0,0,0,1.38.43.55.55,0,0,0,.5-.23A2.61,2.61,0,0,0,13.06,0ZM27.49,7.11a17.19,17.19,0,0,1-2.61,9.07q-2.77,4.61-6.39,4.6a4.42,4.42,0,0,1-3.7-1.92,8.47,8.47,0,0,1-1.43-5.14A17.31,17.31,0,0,1,16,4.53C17.88,1.51,20,0,22.25,0A4.53,4.53,0,0,1,26,1.92,8.27,8.27,0,0,1,27.49,7.11ZM24.42,4.6a5.71,5.71,0,0,0-.53-2.55A1.76,1.76,0,0,0,22.24,1q-2.65,0-4.45,6.54a31.93,31.93,0,0,0-1.37,8.26A8.15,8.15,0,0,0,16.67,18c.34,1.19,1,1.78,1.85,1.78a2.9,2.9,0,0,0,2.28-1.29,15.85,15.85,0,0,0,2.13-4.93A34.08,34.08,0,0,0,24,8.71,28.5,28.5,0,0,0,24.42,4.6ZM42.75,1.3l.3-.06V.48H38.69v.76a2.55,2.55,0,0,1,1.16.33,1.8,1.8,0,0,1,.51,1.48,10.11,10.11,0,0,1-.13,1.34c-.06.41-.14.87-.24,1.39l-1.65,8.34L33.73.48H29.45v.76a2.66,2.66,0,0,1,1,.24,1.88,1.88,0,0,1,.65,1.06l.09.3L28.81,15a20.72,20.72,0,0,1-1,3.61,1.61,1.61,0,0,1-1.19.9v.76h4.42v-.76a2.55,2.55,0,0,1-1.13-.32,1.67,1.67,0,0,1-.56-1.44,7.13,7.13,0,0,1,.05-.79c.06-.43.17-1.09.34-2L31.89,4.38l5.52,16.33h.52l3-15a22.58,22.58,0,0,1,.87-3.42A1.42,1.42,0,0,1,42.75,1.3ZM55.53.48H44.23v.76a3.63,3.63,0,0,1,1.26.3c.19.13.29.42.29.9a7.08,7.08,0,0,1-.09,1c0,.2-.08.44-.13.71L43,17.34a3.47,3.47,0,0,1-.59,1.58,1.91,1.91,0,0,1-1.13.54v.76h6.29v-.76a2.13,2.13,0,0,1-1-.19A1.23,1.23,0,0,1,46,18.1c0-.1,0-.21,0-.31s0-.23.05-.35l1.4-7.21a3.15,3.15,0,0,1,2.37.64A3.21,3.21,0,0,1,50.38,13c0,.11,0,.28,0,.49s0,.46-.06.75l.58.14,1.58-8.07-.59-.1a5.79,5.79,0,0,1-1.43,2.59,6.17,6.17,0,0,1-2.77.52l1.26-6.54a2.06,2.06,0,0,1,.42-1.08,1.39,1.39,0,0,1,1-.26c1.62,0,2.7.51,3.24,1.54a7.11,7.11,0,0,1,.49,3l.57.13Zm3.69,17.71c0-.08,0-.17,0-.27s0-.2,0-.3l.17-1L62.06,3.36a3.44,3.44,0,0,1,.59-1.6,2,2,0,0,1,1.12-.52V.48H57.44v.76a3.47,3.47,0,0,1,1.26.31c.2.13.3.44.3.94a4.25,4.25,0,0,1-.06.67c0,.26-.09.57-.17,1L56.16,17.35a3.52,3.52,0,0,1-.6,1.59,2,2,0,0,1-1.12.52v.76h6.33v-.76a3.3,3.3,0,0,1-1.26-.32C59.32,19,59.22,18.69,59.22,18.19Zm18-9.51a13,13,0,0,1-2.42,7.84,8.31,8.31,0,0,1-7,3.7H61.6v-.76a2,2,0,0,0,1-.41,3.14,3.14,0,0,0,.73-1.71L65.93,4.11c.08-.38.13-.69.17-1a4.36,4.36,0,0,0,.06-.67c0-.5-.1-.81-.3-.94a3.47,3.47,0,0,0-1.26-.31V.48h6.17A5.52,5.52,0,0,1,75.53,2.7,9.91,9.91,0,0,1,77.17,8.68ZM74,6.87a9.22,9.22,0,0,0-.53-3.48,2.91,2.91,0,0,0-2.87-2,1.12,1.12,0,0,0-.93.31,1.81,1.81,0,0,0-.35.83l-2.93,14.9a3,3,0,0,0-.05.39c0,.11,0,.21,0,.3a1.17,1.17,0,0,0,.25.84,1.3,1.3,0,0,0,.92.26q3.8,0,5.49-5.42A23.26,23.26,0,0,0,74,6.87Zm11.3,11.65a6.72,6.72,0,0,1-3.29.75,1.3,1.3,0,0,1-1-.26,1,1,0,0,1-.23-.66,3.28,3.28,0,0,1,0-.39,4.88,4.88,0,0,1,.08-.51l1.4-7.2a3.73,3.73,0,0,1,2.43.57A2.87,2.87,0,0,1,85.43,13c0,.14,0,.31,0,.51s0,.45-.06.73l.59.14,1.57-8.07-.59-.1a5.79,5.79,0,0,1-1.46,2.61,6.5,6.5,0,0,1-2.89.51l1.26-6.56a2.41,2.41,0,0,1,.41-1.06c.16-.19.52-.28,1.08-.28,1.65,0,2.75.5,3.29,1.51a7,7,0,0,1,.5,3l.57.13.9-5.6H79.14v.76a3.35,3.35,0,0,1,1.26.31c.19.13.29.44.29.94a5,5,0,0,1-.07.7c0,.28-.09.58-.15.92L77.86,17.35a3.52,3.52,0,0,1-.6,1.59,2,2,0,0,1-1.13.52v.76H87.91l1.25-5.74-.52-.13A7.69,7.69,0,0,1,85.34,18.52ZM105.8,1.24V.48h-4.37v.76a2.55,2.55,0,0,1,1.16.33,1.77,1.77,0,0,1,.52,1.48A10.58,10.58,0,0,1,103,4.39c-.06.41-.13.87-.23,1.39l-1.66,8.34L96.47.48H92.19v.76a2.61,2.61,0,0,1,1,.24,1.83,1.83,0,0,1,.65,1.06l.1.3L91.55,15a19,19,0,0,1-1,3.61,1.61,1.61,0,0,1-1.19.9v.76h4.42v-.76a2.59,2.59,0,0,1-1.13-.32,1.67,1.67,0,0,1-.56-1.44,7.13,7.13,0,0,1,0-.79c.06-.43.17-1.09.35-2L94.63,4.38l5.52,16.33h.53l2.95-15a22.93,22.93,0,0,1,.86-3.42,1.42,1.42,0,0,1,1-1Zm11.4,4.9L118,.48H106.28l-.82,5,.55.2a8,8,0,0,1,1.87-3.16,3.7,3.7,0,0,1,2.7-1.06l-3.12,15.85a2.94,2.94,0,0,1-.87,1.85,2.48,2.48,0,0,1-1.34.26v.76h7v-.76a4.24,4.24,0,0,1-1.43-.3c-.23-.13-.34-.45-.34-.95a2.26,2.26,0,0,1,0-.26c0-.09,0-.2,0-.33l.18-1,3-15.1a2.73,2.73,0,0,1,1.79.63c.75.7,1.13,2,1.17,3.94Zm3.57,12.05c0-.08,0-.17,0-.27s0-.2,0-.3l.17-1,2.62-13.24a3.44,3.44,0,0,1,.59-1.6,2,2,0,0,1,1.12-.52V.48H119v.76a3.47,3.47,0,0,1,1.26.31c.2.13.3.44.3.94a4.25,4.25,0,0,1-.06.67c0,.26-.09.57-.17,1l-2.61,13.24a3.52,3.52,0,0,1-.6,1.59,2,2,0,0,1-1.12.52v.76h6.33v-.76a3.36,3.36,0,0,1-1.26-.32C120.87,19,120.77,18.69,120.77,18.19Zm28.86-3.71-1.24,5.74H130.3v-.71a2.48,2.48,0,0,0,1.3-.41,1.64,1.64,0,0,0,.37-1.29c0-.22,0-.75-.11-1.58,0-.17-.08-.89-.21-2.15h-4.58l-1.24,3a5.1,5.1,0,0,0-.22.66,2.45,2.45,0,0,0-.1.69c0,.41.09.67.26.78a3.05,3.05,0,0,0,1.11.3v.71h-4.17v-.71a2.66,2.66,0,0,0,.87-.53,5.79,5.79,0,0,0,.92-1.56L132.39.07h.55L135,17a5.53,5.53,0,0,0,.5,2.08,1.67,1.67,0,0,0,1.14.46v0a1.93,1.93,0,0,0,1.12-.52,3.52,3.52,0,0,0,.6-1.6l2.61-13.23c.08-.38.13-.69.17-1a4.36,4.36,0,0,0,.06-.67c0-.5-.1-.81-.3-.94a3.47,3.47,0,0,0-1.26-.31V.48h6.73v.76a3.23,3.23,0,0,0-1.49.48,3.06,3.06,0,0,0-.64,1.64l-2.77,14.08c0,.16-.05.3-.07.44s0,.29,0,.47a.79.79,0,0,0,.31.71,1.55,1.55,0,0,0,.87.21,6.83,6.83,0,0,0,3.79-1,8.42,8.42,0,0,0,2.81-3.88ZM131.5,12.91l-.78-7.18-3.14,7.18Z",opacity:1,strokeColor:"",fillColor:"#192760",width:149.633,height:20.811,stampFillColor:"#dce3ef",stampStrokeColor:""};break;case"Witness":t={iconName:"Witness",pathdata:"M19.63,2.67,12.77,16.84h-.69L10.63,5.17,5.05,16.84H4.36L2.5,2.92A3.13,3.13,0,0,0,2,1.35,2.38,2.38,0,0,0,.63.91V.33H7.3V1a2.27,2.27,0,0,0-.92.17A1.11,1.11,0,0,0,5.84,2.2v.16c0,.05,0,.13,0,.22L6.81,11l3.57-7.48a.79.79,0,0,0,0-.23,2.78,2.78,0,0,0-.53-2A2.23,2.23,0,0,0,8.68.91V.33h6.45V.91A2.42,2.42,0,0,0,14,1.2c-.23.16-.34.5-.34,1,0,.11,0,.26,0,.46s.07.73.12,1.21l.8,7L18.3,3.11c.09-.19.17-.4.25-.62a2.11,2.11,0,0,0,.11-.65.73.73,0,0,0-.4-.76,2.73,2.73,0,0,0-1.1-.17V.33h4.47V.91a1.92,1.92,0,0,0-.91.3A3.66,3.66,0,0,0,19.63,2.67ZM29.76.33H22.62V1A5.07,5.07,0,0,1,24,1.2c.23.11.34.36.34.77a2.86,2.86,0,0,1-.06.54c0,.21-.11.47-.19.77L21.17,14.05a2.47,2.47,0,0,1-.68,1.29,2.62,2.62,0,0,1-1.27.42v.62h7.15v-.62A5.09,5.09,0,0,1,25,15.51c-.22-.11-.33-.37-.33-.77a2,2,0,0,1,0-.23c0-.08,0-.16,0-.24l.19-.83,3-10.77a2.5,2.5,0,0,1,.66-1.3A2.76,2.76,0,0,1,29.76,1ZM41.9,4.88l.63,0,.86-4.6H30.2l-.93,4.1.62.16A6.6,6.6,0,0,1,32,2a5.22,5.22,0,0,1,3.06-.86L31.53,14.05a2.24,2.24,0,0,1-1,1.5,3.67,3.67,0,0,1-1.51.21v.62H37v-.62a6,6,0,0,1-1.62-.24c-.26-.1-.39-.36-.39-.77,0-.07,0-.14,0-.21s0-.16.05-.27l.2-.83L38.57,1.16a3.76,3.76,0,0,1,2,.52A3.69,3.69,0,0,1,41.9,4.88ZM59.24,1,59.58,1V.33H54.65V1A3.78,3.78,0,0,1,56,1.22a1.25,1.25,0,0,1,.58,1.2,6.26,6.26,0,0,1-.15,1.09c-.07.33-.16.71-.27,1.13l-1.87,6.79L49.05.33H44.21V1a3.51,3.51,0,0,1,1.13.2,1.51,1.51,0,0,1,.74.85l.1.25L43.49,12.1A13.5,13.5,0,0,1,42.4,15a1.87,1.87,0,0,1-1.35.72v.62h5v-.62a3.62,3.62,0,0,1-1.28-.26,1.19,1.19,0,0,1-.64-1.17,3.55,3.55,0,0,1,.06-.64q.11-.53.39-1.59L47,3.5,53.2,16.78h.59L57.13,4.6a15.29,15.29,0,0,1,1-2.78A1.51,1.51,0,0,1,59.24,1Zm7.26.31a2.11,2.11,0,0,1,1.23-.23c1.87,0,3.1.41,3.71,1.23A4.39,4.39,0,0,1,72,4.78l.64.11,1-4.56H60.75V1a5,5,0,0,1,1.42.25c.22.11.32.36.32.77a2.73,2.73,0,0,1-.07.57c0,.22-.1.47-.17.74l-3,10.77a2.47,2.47,0,0,1-.68,1.29,2.62,2.62,0,0,1-1.27.42v.62h13.3l1.42-4.66-.59-.11A7.1,7.1,0,0,1,67.75,15a10,10,0,0,1-3.72.61A1.86,1.86,0,0,1,63,15.4a.67.67,0,0,1-.26-.54,2.36,2.36,0,0,1,0-.32,3.38,3.38,0,0,1,.09-.41l1.58-5.86a5.48,5.48,0,0,1,2.75.47,2,2,0,0,1,.71,1.75c0,.11,0,.25,0,.41s0,.37-.06.6l.65.11L70.2,5.05,69.54,5a4.69,4.69,0,0,1-1.65,2.12,10.06,10.06,0,0,1-3.26.41l1.42-5.33A1.75,1.75,0,0,1,66.5,1.31ZM80.88.83a2.77,2.77,0,0,1,2.46,1.26A4.36,4.36,0,0,1,84,4l.08.78.62.08,1-4.8H85a1.77,1.77,0,0,1-.38.43A1,1,0,0,1,84,.67a2.76,2.76,0,0,1-.37,0l-.41-.1-.61-.2a4.78,4.78,0,0,0-.79-.2A6.71,6.71,0,0,0,80.46,0a4.76,4.76,0,0,0-3.62,1.36,4.61,4.61,0,0,0-1.29,3.29q0,2.05,2.94,4.47t2.94,3.82a3.19,3.19,0,0,1-.79,2.14,2.8,2.8,0,0,1-2.23.92,3.43,3.43,0,0,1-1.5-.33,3.82,3.82,0,0,1-2-2.5,10.33,10.33,0,0,1-.2-1.67L74,11.45l-.87,5.38h.73a2.85,2.85,0,0,1,.38-.67A.75.75,0,0,1,74.8,16a1.12,1.12,0,0,1,.27,0l.42.15.61.22a8.62,8.62,0,0,0,1.3.35,7.53,7.53,0,0,0,1.32.12,5.48,5.48,0,0,0,4.11-1.53,4.77,4.77,0,0,0,1.49-3.43,4.59,4.59,0,0,0-.77-2.63,9.31,9.31,0,0,0-1.87-2L79.61,5.5a4.31,4.31,0,0,1-.74-.77,2.55,2.55,0,0,1-.43-1.45,2.68,2.68,0,0,1,.42-1.44A2.23,2.23,0,0,1,80.88.83Zm12.31,0a2.8,2.8,0,0,1,2.47,1.26A4.49,4.49,0,0,1,96.35,4l.08.78.62.08,1-4.8h-.71a1.62,1.62,0,0,1-.39.43,1,1,0,0,1-.64.18,2.9,2.9,0,0,1-.38,0l-.41-.1-.61-.2a4.65,4.65,0,0,0-.78-.2A6.88,6.88,0,0,0,92.77,0a4.73,4.73,0,0,0-3.61,1.36,4.57,4.57,0,0,0-1.3,3.29q0,2.05,2.94,4.47c2,1.54,3,2.81,3,3.82a3.2,3.2,0,0,1-.8,2.14,2.78,2.78,0,0,1-2.23.92,3.36,3.36,0,0,1-1.49-.33A3.68,3.68,0,0,1,88,14.73a3.76,3.76,0,0,1-.81-1.56A10.6,10.6,0,0,1,87,11.5l-.7-.05-.86,5.38h.72a2.85,2.85,0,0,1,.38-.67.78.78,0,0,1,.57-.19,1.12,1.12,0,0,1,.27,0l.42.15.61.22a8.74,8.74,0,0,0,1.31.35,7.37,7.37,0,0,0,1.32.12,5.49,5.49,0,0,0,4.11-1.53,4.81,4.81,0,0,0,1.49-3.43,4.67,4.67,0,0,0-.77-2.63A9.57,9.57,0,0,0,94,7.2L91.93,5.5a4,4,0,0,1-.74-.77,2.48,2.48,0,0,1-.43-1.45,2.68,2.68,0,0,1,.42-1.44A2.2,2.2,0,0,1,93.19.83Z",opacity:1,strokeColor:"",fillColor:"#192760",width:97.39,height:16.84,stampFillColor:"#dce3ef",stampStrokeColor:""};break;case"InitialHere":case"Initial Here":t={iconName:"Initial Here",pathdata:"M6.36,15.51a5.09,5.09,0,0,0,1.42.25v.62H.63v-.62a2.62,2.62,0,0,0,1.27-.42,2.47,2.47,0,0,0,.68-1.29l3-10.77c.08-.3.15-.56.19-.77A2.86,2.86,0,0,0,5.78,2c0-.41-.11-.66-.34-.77A5.07,5.07,0,0,0,4,1V.33h7.14V1a2.76,2.76,0,0,0-1.27.42,2.5,2.5,0,0,0-.66,1.3l-3,10.77-.19.83c0,.08,0,.16,0,.24a2,2,0,0,0,0,.23C6,15.14,6.14,15.4,6.36,15.51ZM27,1,27.36,1V.33H22.43V1a3.78,3.78,0,0,1,1.31.27,1.25,1.25,0,0,1,.58,1.2,6.26,6.26,0,0,1-.15,1.09c-.07.33-.16.71-.27,1.13L22,11.43,16.83.33H12V1a3.49,3.49,0,0,1,1.12.2,1.51,1.51,0,0,1,.74.85l.11.25-2.7,9.85A13,13,0,0,1,10.18,15a1.85,1.85,0,0,1-1.35.72v.62h5v-.62a3.62,3.62,0,0,1-1.28-.26,1.19,1.19,0,0,1-.63-1.17,4.72,4.72,0,0,1,.05-.64q.1-.53.39-1.59l2.39-8.6L21,16.78h.6L24.91,4.6a15.29,15.29,0,0,1,1-2.78A1.51,1.51,0,0,1,27,1ZM35.78.33H28.64V1a5.16,5.16,0,0,1,1.41.25c.23.11.34.36.34.77a2.86,2.86,0,0,1-.06.54c0,.21-.11.47-.19.77L27.19,14.05a2.47,2.47,0,0,1-.68,1.29,2.66,2.66,0,0,1-1.27.42v.62h7.15v-.62A5.09,5.09,0,0,1,31,15.51c-.22-.11-.33-.37-.33-.77a2,2,0,0,1,0-.23,2,2,0,0,1,0-.24l.19-.83,3-10.77a2.5,2.5,0,0,1,.66-1.3A2.76,2.76,0,0,1,35.78,1Zm12.76,4.6.87-4.6H36.22l-.93,4.1.62.16A6.52,6.52,0,0,1,38,2a5.21,5.21,0,0,1,3-.86L37.55,14.05a2.24,2.24,0,0,1-1,1.5,3.7,3.7,0,0,1-1.51.21v.62H43v-.62a5.79,5.79,0,0,1-1.61-.24c-.26-.1-.39-.36-.39-.77a1.48,1.48,0,0,1,0-.21,2,2,0,0,1,0-.27l.2-.83L44.58,1.16a3.77,3.77,0,0,1,2,.52,3.74,3.74,0,0,1,1.31,3.2Zm4,9.81a.93.93,0,0,1,0-.23,2,2,0,0,1,0-.24l.18-.83,3-10.77a2.42,2.42,0,0,1,.67-1.3A2.72,2.72,0,0,1,57.72,1V.33H50.57V1A5.26,5.26,0,0,1,52,1.2c.23.11.34.36.34.77a2.28,2.28,0,0,1-.07.54,7.71,7.71,0,0,1-.19.77l-3,10.77a2.4,2.4,0,0,1-.68,1.29,2.58,2.58,0,0,1-1.26.42v.62h7.14v-.62a5.07,5.07,0,0,1-1.41-.25C52.69,15.4,52.58,15.14,52.58,14.74Zm32-3.13.57.11-1.4,4.66H63.34v-.57a3.65,3.65,0,0,0,1.46-.34c.29-.16.43-.51.43-1,0-.18,0-.61-.13-1.29,0-.14-.09-.73-.23-1.75H59.69l-1.4,2.44a3.38,3.38,0,0,0-.25.54,1.64,1.64,0,0,0-.11.56q0,.5.3.63a4.41,4.41,0,0,0,1.25.25v.57H54.76v-.57a3.36,3.36,0,0,0,1-.43,4.58,4.58,0,0,0,1-1.27L65.7,0h.62l2.3,13.72a3.49,3.49,0,0,0,.56,1.7,2.34,2.34,0,0,0,1.29.37v0a2.58,2.58,0,0,0,1.26-.42,2.46,2.46,0,0,0,.68-1.3L75.35,3.28c.09-.3.16-.56.2-.77A2.86,2.86,0,0,0,75.61,2c0-.41-.11-.66-.34-.77A5.17,5.17,0,0,0,73.85,1V.33h7.61V1a4.77,4.77,0,0,0-1.69.39A2.27,2.27,0,0,0,79,2.67L75.92,14.12c0,.13,0,.25-.07.36a2.21,2.21,0,0,0,0,.39.59.59,0,0,0,.35.57,2.33,2.33,0,0,0,1,.17,10.06,10.06,0,0,0,4.28-.84A7.67,7.67,0,0,0,84.6,11.61ZM64.7,10.44,63.81,4.6l-3.55,5.84Zm38,4.32a.71.71,0,0,1,0-.16s0-.16.07-.34l.2-.83L106,2.67a2.43,2.43,0,0,1,.79-1.39A2.78,2.78,0,0,1,107.9,1V.33h-7.15V1a4.45,4.45,0,0,1,1.27.19.81.81,0,0,1,.47.83,2.73,2.73,0,0,1-.07.57c0,.22-.1.47-.17.74l-1.14,4.16h-5.7L96.7,2.67a2.27,2.27,0,0,1,.73-1.33A4.77,4.77,0,0,1,99.12,1V.33H91.51V1a5.09,5.09,0,0,1,1.42.25c.22.11.33.36.33.77a2.93,2.93,0,0,1-.08.58c-.05.24-.1.48-.17.73L90.07,14a2.73,2.73,0,0,1-.65,1.29,2.47,2.47,0,0,1-1.3.43v.62h7.15v-.62a5.13,5.13,0,0,1-1.42-.24c-.21-.1-.31-.34-.31-.72a3.11,3.11,0,0,1,0-.57c0-.16.1-.43.19-.8L95.12,8.5h5.7L99.31,14a2.21,2.21,0,0,1-.74,1.33,4.36,4.36,0,0,1-1.69.39v.62h7.63v-.62a4.72,4.72,0,0,1-1.25-.17A.8.8,0,0,1,102.73,14.76Zm13.38.24a10.07,10.07,0,0,1-3.72.61,1.86,1.86,0,0,1-1.08-.21.67.67,0,0,1-.26-.54,2.36,2.36,0,0,1,0-.32,3.38,3.38,0,0,1,.09-.41l1.58-5.86a5.51,5.51,0,0,1,2.75.47,2,2,0,0,1,.7,1.75c0,.11,0,.25,0,.41s0,.37-.07.6l.66.11,1.78-6.56L117.89,5a4.63,4.63,0,0,1-1.65,2.12A10,10,0,0,1,113,7.5l1.43-5.33a1.6,1.6,0,0,1,.45-.86,2.07,2.07,0,0,1,1.23-.23c1.86,0,3.1.41,3.71,1.23a4.32,4.32,0,0,1,.56,2.47l.65.11,1-4.56H109.1V1a5.1,5.1,0,0,1,1.43.25c.21.11.32.36.32.77a3.63,3.63,0,0,1-.07.57c0,.22-.11.47-.18.74l-2.95,10.77a2.4,2.4,0,0,1-.68,1.29,2.58,2.58,0,0,1-1.26.42v.62H119l1.42-4.66-.58-.11A7.17,7.17,0,0,1,116.11,15ZM144.36,2.17,142.93,7.5a10.13,10.13,0,0,0,3.27-.41A4.69,4.69,0,0,0,147.84,5l.67.08-1.78,6.56-.66-.11c0-.23.06-.43.07-.6s0-.3,0-.41a2,2,0,0,0-.7-1.75,5.51,5.51,0,0,0-2.75-.47l-1.58,5.86a3.38,3.38,0,0,0-.09.41,2.36,2.36,0,0,0,0,.32.67.67,0,0,0,.26.54,1.86,1.86,0,0,0,1.08.21,10.07,10.07,0,0,0,3.72-.61,7.14,7.14,0,0,0,3.73-3.39l.58.11L149,16.38H131l-2.59-7.93h-.68l-1.42,5-.2.83,0,.2a1.77,1.77,0,0,0,0,.23c0,.43.1.7.31.81a4.87,4.87,0,0,0,1.43.25v.62h-7.14v-.62a2.58,2.58,0,0,0,1.26-.42,2.4,2.4,0,0,0,.68-1.29l3-10.77.15-.57a4.09,4.09,0,0,0,.1-.79c0-.38-.11-.62-.32-.72A4.8,4.8,0,0,0,124,1V.33h6.6a10.58,10.58,0,0,1,3.42.43,3,3,0,0,1,2.24,3.05,4,4,0,0,1-.38,1.6A4,4,0,0,1,134.66,7a5.47,5.47,0,0,1-1.45.8c-.33.11-.85.25-1.54.42a4.73,4.73,0,0,0,.16.46l1.85,5.42a2.81,2.81,0,0,0,.8,1.38,2.42,2.42,0,0,0,1.23.32,2.53,2.53,0,0,0,1.22-.41,2.47,2.47,0,0,0,.68-1.29l2.94-10.77c.07-.27.13-.52.18-.74A2.73,2.73,0,0,0,140.8,2c0-.41-.11-.66-.32-.77A5.1,5.1,0,0,0,139.05,1V.33H152l-1,4.56-.65-.11a4.32,4.32,0,0,0-.56-2.47c-.61-.82-1.85-1.23-3.71-1.23a2.07,2.07,0,0,0-1.23.23A1.67,1.67,0,0,0,144.36,2.17ZM131.54,6.59a5,5,0,0,0,.77-1.32,4.68,4.68,0,0,0,.36-1.84,2.74,2.74,0,0,0-.5-1.67,2,2,0,0,0-1.7-.66,1,1,0,0,0-.72.22,2,2,0,0,0-.38.85l-1.45,5.49a10.33,10.33,0,0,0,1.91-.16A3.07,3.07,0,0,0,131.54,6.59Z",opacity:1,strokeColor:"",fillColor:"#192760",width:151.345,height:16.781,stampFillColor:"#dce3ef",stampStrokeColor:""};break;case"SignHere":case"Sign Here":t={iconName:"Sign Here",pathdata:"M6.38,1.9A2.56,2.56,0,0,0,6,3.34a2.49,2.49,0,0,0,.44,1.45,3.9,3.9,0,0,0,.73.76l2.07,1.7a9.34,9.34,0,0,1,1.87,2.06,4.6,4.6,0,0,1,.78,2.63,4.78,4.78,0,0,1-1.5,3.43A5.46,5.46,0,0,1,6.23,16.9a7.34,7.34,0,0,1-1.31-.12,7.48,7.48,0,0,1-1.31-.36L3,16.2l-.42-.14a1.12,1.12,0,0,0-.27,0,.71.71,0,0,0-.57.19,2.85,2.85,0,0,0-.38.67H.63l.87-5.38.69,0a10.34,10.34,0,0,0,.2,1.68,3.82,3.82,0,0,0,2,2.5,3.42,3.42,0,0,0,1.5.32,2.76,2.76,0,0,0,2.23-.92A3.14,3.14,0,0,0,8.94,13c0-1-1-2.29-2.94-3.82S3.06,6.08,3.06,4.71A4.59,4.59,0,0,1,4.35,1.42,4.76,4.76,0,0,1,8,.06,6.71,6.71,0,0,1,9.29.19a4.78,4.78,0,0,1,.79.2l.61.2.41.1a2.76,2.76,0,0,0,.37,0,1,1,0,0,0,.65-.18A1.75,1.75,0,0,0,12.5.12h.72l-1,4.8-.62-.08-.09-.79a4.45,4.45,0,0,0-.69-1.91A2.78,2.78,0,0,0,8.39.89,2.2,2.2,0,0,0,6.38,1.9ZM22.8.39H15.66V1a4.71,4.71,0,0,1,1.41.25c.23.11.34.36.34.77a2.86,2.86,0,0,1-.06.54c0,.21-.11.47-.19.77L14.21,14.11a2.47,2.47,0,0,1-.68,1.29,2.62,2.62,0,0,1-1.27.42v.62h7.15v-.62A4.63,4.63,0,0,1,18,15.56c-.22-.1-.33-.36-.33-.77a1.8,1.8,0,0,1,0-.22c0-.08,0-.16,0-.24l.19-.83,3-10.77a2.5,2.5,0,0,1,.66-1.3A2.76,2.76,0,0,1,22.8,1ZM38.09,9.14V8.52H31.18v.62a5.05,5.05,0,0,1,1.44.28c.22.1.32.35.32.75a13.35,13.35,0,0,1-.54,2.54,19.13,19.13,0,0,1-.54,1.87A1.85,1.85,0,0,1,31,15.66a3.77,3.77,0,0,1-1.78.35A3.71,3.71,0,0,1,27,15.38c-1.09-.77-1.64-2.13-1.64-4.08a13.74,13.74,0,0,1,1.78-6.69q2.05-3.72,5-3.72a2.93,2.93,0,0,1,3,1.86,6.09,6.09,0,0,1,.4,2.48l.69.08L37.44,0h-.71a2.44,2.44,0,0,1-.41.53.82.82,0,0,1-.58.2A9.14,9.14,0,0,1,34.33.36,9.23,9.23,0,0,0,31.73,0a9.4,9.4,0,0,0-7.46,3.42,10.46,10.46,0,0,0-2.65,7,5.88,5.88,0,0,0,2.2,4.83,7.77,7.77,0,0,0,5,1.64A13.06,13.06,0,0,0,32,16.52a14.26,14.26,0,0,0,2.33-.75l.67-.3,1.2-4.36a4.15,4.15,0,0,1,.62-1.59A2.28,2.28,0,0,1,38.09,9.14ZM50.36,1a3.36,3.36,0,0,1,1.31.27,1.25,1.25,0,0,1,.58,1.2,6.26,6.26,0,0,1-.15,1.09c-.07.33-.16.7-.27,1.13L50,11.48,44.76.39H39.93V1a3.49,3.49,0,0,1,1.12.2,1.51,1.51,0,0,1,.74.85l.1.25L39.2,12.16a12.62,12.62,0,0,1-1.09,2.93,1.86,1.86,0,0,1-1.35.73v.62h5v-.62a3.62,3.62,0,0,1-1.28-.26,1.21,1.21,0,0,1-.63-1.17,4.72,4.72,0,0,1,0-.64q.1-.52.39-1.59l2.39-8.6,6.23,13.28h.6L52.84,4.66a15.29,15.29,0,0,1,1-2.78A1.52,1.52,0,0,1,55,1.05l.34,0V.39H50.36Zm22.33,13.8a.66.66,0,0,1,0-.15c0-.05,0-.16.07-.34l.2-.83L75.91,2.73a2.43,2.43,0,0,1,.79-1.39A2.78,2.78,0,0,1,77.86,1V.39H70.71V1A4.45,4.45,0,0,1,72,1.2a.81.81,0,0,1,.47.83,2.73,2.73,0,0,1-.07.57c0,.22-.1.47-.17.74L71.07,7.5h-5.7l1.29-4.77a2.27,2.27,0,0,1,.73-1.33A4.36,4.36,0,0,1,69.08,1V.39H61.47V1a4.73,4.73,0,0,1,1.42.25c.22.11.33.36.33.77a2.93,2.93,0,0,1-.08.58c0,.24-.1.48-.17.73L60,14.1a2.73,2.73,0,0,1-.65,1.29,2.47,2.47,0,0,1-1.3.43v.62h7.15v-.62a5.13,5.13,0,0,1-1.42-.24c-.21-.1-.31-.34-.31-.72a3,3,0,0,1,0-.57c0-.16.1-.43.19-.8l1.35-4.94h5.7L69.27,14.1a2.21,2.21,0,0,1-.74,1.33,4.77,4.77,0,0,1-1.69.39v.62h7.63v-.62a4.72,4.72,0,0,1-1.25-.17A.82.82,0,0,1,72.69,14.81Zm13.38.25a10.28,10.28,0,0,1-3.72.61,1.86,1.86,0,0,1-1.08-.21.67.67,0,0,1-.26-.54,2.23,2.23,0,0,1,0-.32,3.38,3.38,0,0,1,.09-.41l1.58-5.86a5.51,5.51,0,0,1,2.75.47,2,2,0,0,1,.7,1.75c0,.11,0,.24,0,.41s0,.37-.07.59l.66.12,1.78-6.56L87.85,5a4.75,4.75,0,0,1-1.64,2.12,10.13,10.13,0,0,1-3.27.41l1.43-5.33a1.56,1.56,0,0,1,.45-.86,2.07,2.07,0,0,1,1.23-.23c1.86,0,3.1.41,3.71,1.23a4.32,4.32,0,0,1,.56,2.47L91,5,92,.39H79.06V1a4.75,4.75,0,0,1,1.43.25c.21.11.32.36.32.77a2.73,2.73,0,0,1-.07.57c0,.22-.11.47-.18.74l-3,10.77a2.4,2.4,0,0,1-.68,1.29,2.58,2.58,0,0,1-1.26.42v.62H89l1.41-4.66-.58-.11A7.22,7.22,0,0,1,86.07,15.06ZM114.32,2.23l-1.43,5.33a10.13,10.13,0,0,0,3.27-.41A4.75,4.75,0,0,0,117.8,5l.67.08-1.78,6.56-.66-.12c0-.22.06-.42.07-.59s0-.3,0-.41a2,2,0,0,0-.71-1.75,5.51,5.51,0,0,0-2.75-.47l-1.58,5.86a3.38,3.38,0,0,0-.09.41,2.23,2.23,0,0,0,0,.32.67.67,0,0,0,.26.54,1.86,1.86,0,0,0,1.08.21,10.28,10.28,0,0,0,3.72-.61,7.22,7.22,0,0,0,3.73-3.39l.58.11-1.41,4.66h-18L98.33,8.51h-.68l-1.42,5-.2.83,0,.2a1.77,1.77,0,0,0,0,.23c0,.43.1.7.31.8a4.51,4.51,0,0,0,1.43.26v.62H90.59v-.62a2.58,2.58,0,0,0,1.26-.42,2.4,2.4,0,0,0,.68-1.29l3-10.77.15-.57a4.09,4.09,0,0,0,.1-.79c0-.38-.11-.62-.32-.73A5.3,5.3,0,0,0,94,1V.39h6.6A10.58,10.58,0,0,1,104,.82a3,3,0,0,1,2.24,3.05,4,4,0,0,1-.38,1.6A4.06,4.06,0,0,1,104.62,7a5.32,5.32,0,0,1-1.45.8c-.33.11-.84.25-1.54.42.08.24.13.4.16.46l1.85,5.42a2.81,2.81,0,0,0,.8,1.38,2.42,2.42,0,0,0,1.23.32,2.64,2.64,0,0,0,1.22-.41,2.47,2.47,0,0,0,.68-1.29l2.94-10.77c.07-.27.13-.52.18-.74a2.73,2.73,0,0,0,.07-.57c0-.41-.11-.66-.32-.77A4.75,4.75,0,0,0,109,1V.39h12.93l-1,4.56-.64-.11a4.39,4.39,0,0,0-.57-2.47c-.61-.82-1.85-1.23-3.71-1.23a2.07,2.07,0,0,0-1.23.23A1.7,1.7,0,0,0,114.32,2.23ZM101.5,6.64a4.76,4.76,0,0,0,.77-1.31,4.68,4.68,0,0,0,.36-1.84,2.72,2.72,0,0,0-.5-1.67,2,2,0,0,0-1.7-.66.94.94,0,0,0-.71.22,1.81,1.81,0,0,0-.39.85L97.88,7.72a10.33,10.33,0,0,0,1.91-.16A3,3,0,0,0,101.5,6.64Z",opacity:1,strokeColor:"",fillColor:"#192760",width:121.306,height:16.899,stampFillColor:"#dce3ef",stampStrokeColor:""};break;case"Accepted":t={iconName:"Accepted",pathdata:"M22.409294,0.00021190348 C22.64747,0.0056831966 22.875833,0.11701412 23.023336,0.32638185 23.631345,1.1873664 25.36437,2.8183636 27.4584,4.1123583 28.000408,4.4483535 28.015407,5.227338 27.477398,5.5713293 23.803344,7.9272954 12.881201,15.464245 9.4751583,23.800168 9.2091556,24.452168 8.3321453,24.542164 7.9521352,23.95016 6.0691143,21.014182 1.8990528,14.526234 0.095028103,11.832258 -0.13796928,11.485277 0.081027784,11.023275 0.49603404,10.97927 1.9670546,10.824272 4.8490969,10.421291,6.5811144,9.5293013 6.9811216,9.3233086 7.4691268,9.5782811 7.5601316,10.019287 7.847138,11.400286 8.4021459,13.83224 8.952148,14.781236 8.952148,14.781236 16.385246,3.2303471 21.985326,0.10638282 22.119951,0.031756414 22.266389,-0.003070501 22.409294,0.00021190348 z",opacity:1,strokeColor:"",fillColor:"#516c30",width:27.873,height:24.346,stampFillColor:"#e6eddf",stampStrokeColor:""};break;case"Rejected":t={iconName:"Rejected",pathdata:"M3.8779989,0 L11.294,7.4140023 18.710001,0 22.588001,3.8779911 15.172998,11.293032 22.588001,18.707033 18.710001,22.586 11.294,15.169985 3.8779989,22.586 0,18.707033 7.4150017,11.293032 0,3.8779911 z",opacity:1,strokeColor:"",fillColor:"#8a251a",width:22.588,height:22.586,stampFillColor:"#f6dedd",stampStrokeColor:""};break;case"Rejected_with_border":t={iconName:"Rejected_with_border",pathdata:"M3.8779989,0 L11.294,7.4140023 18.710001,0 22.588001,3.8779911 15.172998,11.293032 22.588001,18.707033 18.710001,22.586 11.294,15.169985 3.8779989,22.586 0,18.707033 7.4150017,11.293032 0,3.8779911 z",opacity:1,strokeColor:"",fillColor:"#192760",width:22.588,height:24.346,stampFillColor:"#dce3ef",stampStrokeColor:""};break;case"NotApproved":case"Not Approved":t={iconName:"Not Approved",pathdata:"M0,19.46a1.56,1.56,0,0,0,1.16-.9A19.84,19.84,0,0,0,2.1,15L4.42,2.84l-.09-.3a1.82,1.82,0,0,0-.64-1.06,2.41,2.41,0,0,0-1-.24V.48H6.88l4.49,13.64L13,5.78c.09-.52.17-1,.22-1.39a10.11,10.11,0,0,0,.13-1.34,1.83,1.83,0,0,0-.49-1.48,2.49,2.49,0,0,0-1.13-.33V.48H16v.76l-.29.06a1.42,1.42,0,0,0-1,1,23.7,23.7,0,0,0-.84,3.42L11,20.71h-.51L5.1,4.38,3,15c-.17.87-.28,1.53-.33,2a5.32,5.32,0,0,0,0,.79,1.69,1.69,0,0,0,.54,1.44,2.48,2.48,0,0,0,1.1.32v.76H0ZM17.73,4.53C19.54,1.51,21.55,0,23.79,0a4.4,4.4,0,0,1,3.66,1.92,8.52,8.52,0,0,1,1.43,5.19,17.56,17.56,0,0,1-2.53,9.07q-2.7,4.61-6.21,4.6a4.24,4.24,0,0,1-3.6-1.92,8.6,8.6,0,0,1-1.39-5.14A17.68,17.68,0,0,1,17.73,4.53ZM18.37,18c.33,1.19.93,1.78,1.8,1.78a2.83,2.83,0,0,0,2.22-1.29,16.41,16.41,0,0,0,2.06-4.93,35.53,35.53,0,0,0,1.06-4.83A28.26,28.26,0,0,0,25.9,4.6a5.86,5.86,0,0,0-.52-2.55A1.7,1.7,0,0,0,23.78,1Q21.2,1,19.45,7.53a33,33,0,0,0-1.33,8.26A8.15,8.15,0,0,0,18.37,18Zm11.08,1.48a2.34,2.34,0,0,0,1.3-.26,3,3,0,0,0,.85-1.85l3-15.85A3.54,3.54,0,0,0,32,2.56a8,8,0,0,0-1.82,3.16l-.53-.2.8-5H41.81l-.74,5.66-.54-.07c0-1.92-.41-3.24-1.13-3.94a2.6,2.6,0,0,0-1.74-.63L34.79,16.6l-.17,1a2.43,2.43,0,0,0,0,.33,2.26,2.26,0,0,0,0,.26c0,.5.11.82.33.95a3.94,3.94,0,0,0,1.39.3v.76H29.45Zm26.65.76H50.18v-.71a2.28,2.28,0,0,0,1.25-.41,1.64,1.64,0,0,0,.37-1.29c0-.22,0-.75-.11-1.58,0-.17-.08-.89-.2-2.15H47l-1.2,3c-.08.2-.15.42-.22.66a2.84,2.84,0,0,0-.09.69c0,.41.08.67.25.78a2.91,2.91,0,0,0,1.08.3v.71H42.79v-.71a2.44,2.44,0,0,0,.85-.53,5.59,5.59,0,0,0,.9-1.56L52.21.07h.53l2,16.88A5.46,5.46,0,0,0,55.2,19a1.36,1.36,0,0,0,.9.43Zm-4.76-7.31-.76-7.18-3,7.18Zm4.95,6.53a1.82,1.82,0,0,0,1-.5,3.56,3.56,0,0,0,.58-1.59L60.42,4.11c.06-.3.1-.6.15-.9a5.46,5.46,0,0,0,.06-.72c0-.52-.13-.86-.4-1a2.88,2.88,0,0,0-1.1-.23V.48h5.93a5,5,0,0,1,2.5.57c1.26.73,1.9,2.07,1.9,4a5.81,5.81,0,0,1-1.54,4.22,5.32,5.32,0,0,1-4,1.58l-.59,0-1.2-.11L61,16.6l-.17,1a2.72,2.72,0,0,0,0,.3,2.81,2.81,0,0,0,0,.29c0,.5.09.81.28.94a3.26,3.26,0,0,0,1.23.31v.76h-6Zm6-9.67.38.06H63a3,3,0,0,0,1.62-.36,2.87,2.87,0,0,0,1-1.18,7.28,7.28,0,0,0,.6-2,11.67,11.67,0,0,0,.22-2,4.4,4.4,0,0,0-.41-2,1.44,1.44,0,0,0-1.39-.79.71.71,0,0,0-.65.28,3.7,3.7,0,0,0-.32,1Zm5.61,9.69A1.86,1.86,0,0,0,69,18.94a3.54,3.54,0,0,0,.59-1.59L72.15,4.11q.09-.45.15-.9a5.73,5.73,0,0,0,.07-.72,1.1,1.1,0,0,0-.41-1,2.88,2.88,0,0,0-1.1-.23V.48h5.93a5,5,0,0,1,2.5.57c1.27.73,1.9,2.07,1.9,4a5.77,5.77,0,0,1-1.54,4.22,5.31,5.31,0,0,1-4,1.58l-.6,0-1.2-.11L72.74,16.6l-.17,1a2.72,2.72,0,0,0,0,.3c0,.1,0,.19,0,.29,0,.5.1.81.29.94a3.15,3.15,0,0,0,1.23.31v.76h-6.1Zm6.12-9.69.38.06h.33a3,3,0,0,0,1.62-.36,3,3,0,0,0,1-1.18,7.67,7.67,0,0,0,.59-2,11.67,11.67,0,0,0,.22-2,4.4,4.4,0,0,0-.41-2,1.43,1.43,0,0,0-1.38-.79.73.73,0,0,0-.66.28,3.7,3.7,0,0,0-.32,1Zm5.57,9.69a1.9,1.9,0,0,0,1.09-.52,3.56,3.56,0,0,0,.58-1.59L83.84,4.11c0-.27.09-.51.13-.71a7.08,7.08,0,0,0,.09-1c0-.47-.1-.77-.28-.9a3.53,3.53,0,0,0-1.22-.3V.48h5.68a6.57,6.57,0,0,1,3,.53q1.92,1,1.92,3.75a6.79,6.79,0,0,1-.32,2,5.23,5.23,0,0,1-1.08,1.9,4.56,4.56,0,0,1-1.25,1,11.62,11.62,0,0,1-1.33.52c.07.3.12.49.14.57l1.59,6.66a4.07,4.07,0,0,0,.69,1.7,1.72,1.72,0,0,0,1.13.41v.76H88.52l-2.23-9.76h-.58L84.49,16.6l-.17,1a1,1,0,0,0,0,.25,2.62,2.62,0,0,0,0,.28c0,.53.09.86.26,1a3.11,3.11,0,0,0,1.24.32v.76H79.63ZM87.55,9.3A2.59,2.59,0,0,0,89,8.17a7.24,7.24,0,0,0,.66-1.62A8.18,8.18,0,0,0,90,4.29a4.32,4.32,0,0,0-.43-2,1.5,1.5,0,0,0-1.45-.81.71.71,0,0,0-.62.26,2.78,2.78,0,0,0-.33,1.05L85.91,9.5A6.63,6.63,0,0,0,87.55,9.3Zm8.72-4.77Q99,0,102.32,0A4.37,4.37,0,0,1,106,1.92a8.46,8.46,0,0,1,1.44,5.19,17.58,17.58,0,0,1-2.54,9.07q-2.7,4.61-6.21,4.6a4.27,4.27,0,0,1-3.6-1.92,8.67,8.67,0,0,1-1.38-5.14A17.68,17.68,0,0,1,96.27,4.53ZM96.9,18c.33,1.19.93,1.78,1.8,1.78a2.83,2.83,0,0,0,2.22-1.29A16.63,16.63,0,0,0,103,13.54a37.1,37.1,0,0,0,1.06-4.83,29.49,29.49,0,0,0,.38-4.11,5.86,5.86,0,0,0-.51-2.55A1.71,1.71,0,0,0,102.31,1C100.6,1,99.15,3.17,98,7.53a33.42,33.42,0,0,0-1.33,8.26A8.57,8.57,0,0,0,96.9,18ZM114.35.48v.76a2.57,2.57,0,0,0-1.08.17,1.07,1.07,0,0,0-.5,1,2.53,2.53,0,0,0,0,.28,2.64,2.64,0,0,0,0,.28l1.07,11.76L117.77,6c.31-.71.59-1.41.84-2.11A5.25,5.25,0,0,0,119,2.19a.85.85,0,0,0-.38-.81,3.09,3.09,0,0,0-.95-.14V.48h4v.76a2.08,2.08,0,0,0-.73.45,5.35,5.35,0,0,0-.82,1.4l-7.79,17.69h-.66L110,5.74A22,22,0,0,0,109.46,2c-.16-.39-.58-.62-1.28-.71V.48Zm5.15,19a1.83,1.83,0,0,0,1.08-.52,3.42,3.42,0,0,0,.59-1.59l2.54-13.24c.06-.34.11-.64.15-.92a4.83,4.83,0,0,0,.06-.7c0-.5-.09-.81-.28-.94a3.14,3.14,0,0,0-1.22-.31V.48h11.12l-.87,5.6L132.11,6a7,7,0,0,0-.49-3c-.52-1-1.59-1.51-3.19-1.51-.55,0-.9.09-1.06.28A2.44,2.44,0,0,0,127,2.74L125.76,9.3a6.21,6.21,0,0,0,2.81-.51A6,6,0,0,0,130,6.18l.58.1L129,14.35l-.56-.14c0-.28,0-.52,0-.73s0-.37,0-.51a2.92,2.92,0,0,0-.61-2.15,3.55,3.55,0,0,0-2.37-.57l-1.36,7.2a4.79,4.79,0,0,0-.07.51,3.28,3.28,0,0,0,0,.39,1,1,0,0,0,.22.66,1.24,1.24,0,0,0,.93.26,6.43,6.43,0,0,0,3.21-.75,7.67,7.67,0,0,0,3.21-4.17l.5.13-1.22,5.74H119.5Zm12.79,0a1.87,1.87,0,0,0,1-.41,3.23,3.23,0,0,0,.71-1.71L136.5,4.11c.07-.38.13-.69.17-1a5.89,5.89,0,0,0,.05-.67c0-.5-.1-.81-.29-.94a3.32,3.32,0,0,0-1.22-.31V.48h6a5.35,5.35,0,0,1,4.63,2.22,10.11,10.11,0,0,1,1.58,6,13.3,13.3,0,0,1-2.34,7.84,8,8,0,0,1-6.86,3.7h-5.93ZM143.87,3.39a2.84,2.84,0,0,0-2.79-2,1.08,1.08,0,0,0-.91.31,1.93,1.93,0,0,0-.34.83L137,17.44a3.1,3.1,0,0,0-.06.39c0,.11,0,.21,0,.3a1.22,1.22,0,0,0,.24.84,1.26,1.26,0,0,0,.9.26q3.67,0,5.33-5.42a23.91,23.91,0,0,0,1-6.94A9.45,9.45,0,0,0,143.87,3.39Z",opacity:1,strokeColor:"",fillColor:"#8a251a",width:147.425,height:20.783,stampFillColor:"#f6dedd",stampStrokeColor:""};break;case"Draft":t={iconName:"Draft",pathdata:"M24.92,3Q22,.46,16.4.46h-11v.87a9.38,9.38,0,0,1,2.24.35q.54.23.54,1.08a3.24,3.24,0,0,1-.1.76c-.07.29-.17.65-.31,1.08L3.08,19.69a3.26,3.26,0,0,1-1.32,1.95A4.67,4.67,0,0,1,0,22.1V23H10.91q7.8,0,12.61-4.22a11.56,11.56,0,0,0,4.32-8.94A8.58,8.58,0,0,0,24.92,3ZM20.41,15.66a10.18,10.18,0,0,1-9.8,6.18A3.18,3.18,0,0,1,9,21.54a1,1,0,0,1-.46-.95,2.47,2.47,0,0,1,0-.35,3,3,0,0,1,.1-.44l5.24-17a1.91,1.91,0,0,1,.62-.95,2.81,2.81,0,0,1,1.66-.35c2.44,0,4.15.76,5.15,2.27a7.29,7.29,0,0,1,.94,4A17.63,17.63,0,0,1,20.41,15.66ZM49.75,9.74a5.84,5.84,0,0,0,2-2.16,5.1,5.1,0,0,0,.59-2.24c0-2.1-1.18-3.53-3.54-4.27A18.67,18.67,0,0,0,43.36.46H32.92v.87a8.79,8.79,0,0,1,2.24.35c.35.14.52.48.52,1a5.36,5.36,0,0,1-.17,1.11c-.06.23-.14.5-.23.8L30.61,19.7a3.26,3.26,0,0,1-1.08,1.81,4.44,4.44,0,0,1-2,.59V23H38.85V22.1a8.54,8.54,0,0,1-2.28-.36c-.32-.15-.49-.53-.49-1.13,0-.11,0-.21,0-.32a1.15,1.15,0,0,1,.06-.28l.31-1.16,2.25-7h1.07L43.89,23h7.64V22.1a4.27,4.27,0,0,1-2.07-.47,3.91,3.91,0,0,1-1.27-1.93l-2.92-7.6a4.67,4.67,0,0,1-.25-.65c1.1-.23,1.91-.42,2.43-.59A8.49,8.49,0,0,0,49.75,9.74ZM46,7.39a6.73,6.73,0,0,1-1.21,1.84,5,5,0,0,1-2.72,1.29,19.56,19.56,0,0,1-3,.23L41.38,3A2.54,2.54,0,0,1,42,1.85a1.76,1.76,0,0,1,1.14-.31,3.38,3.38,0,0,1,2.69.93,3.52,3.52,0,0,1,.79,2.34A5.94,5.94,0,0,1,46,7.39Zm27.9,11.85L70.29,0h-1L55.21,19.78a6.61,6.61,0,0,1-1.66,1.78,5.3,5.3,0,0,1-1.55.6V23h7.45v-.81a8,8,0,0,1-2-.34.85.85,0,0,1-.47-.89,2,2,0,0,1,.17-.79,5.32,5.32,0,0,1,.4-.75L59.8,16H68c.22,1.44.35,2.25.37,2.45a16,16,0,0,1,.2,1.81,1.51,1.51,0,0,1-.67,1.47,6.38,6.38,0,0,1-2.31.46V23H77.1v-.81a4.28,4.28,0,0,1-2.28-.55A4.47,4.47,0,0,1,73.93,19.24ZM60.7,14.64l5.62-8.19,1.4,8.19ZM84,.46h20.2l-1.61,6.39-1-.15a5.61,5.61,0,0,0-.88-3.43Q99.2,1.52,94.86,1.51a3.56,3.56,0,0,0-1.76.3A2.05,2.05,0,0,0,92.34,3L90.1,10.5A16.53,16.53,0,0,0,95,9.91c.77-.33,1.62-1.32,2.56-3l1.06.12-2.82,9.2-1-.17c0-.33.08-.61.1-.85s0-.43,0-.56a2.76,2.76,0,0,0-1-2.38c-.66-.49-2.07-.73-4.23-.73l-2.5,8.22a3.56,3.56,0,0,0-.09.39,1.55,1.55,0,0,0,0,.37,1.32,1.32,0,0,0,1,1.33,5.52,5.52,0,0,0,1.78.21V23H78.58V22.1a4.35,4.35,0,0,0,2-.61,3.33,3.33,0,0,0,1.06-1.8L86.32,4.6c.09-.31.16-.58.23-.81a5.05,5.05,0,0,0,.16-1.1c0-.53-.17-.87-.52-1A8.7,8.7,0,0,0,84,1.33Zm24.1,0h20.89l-1.37,6.46-1-.08c-.07-2.2-.76-3.69-2.09-4.49a6.61,6.61,0,0,0-3.2-.72L116,18.84,115.7,20a2.63,2.63,0,0,0-.07.38,1.51,1.51,0,0,0,0,.3c0,.57.2.94.61,1.08a11.19,11.19,0,0,0,2.56.34V23H106.2V22.1a6.49,6.49,0,0,0,2.4-.3,3.19,3.19,0,0,0,1.56-2.1l5.58-18.07a9.07,9.07,0,0,0-4.83,1.2,9.52,9.52,0,0,0-3.34,3.61l-1-.23Z",opacity:1,strokeColor:"",fillColor:"#192760",width:128.941,height:22.97,stampFillColor:"#dce3ef",stampStrokeColor:""};break;case"Final":t={iconName:"Final",pathdata:"M24.94,6l-1.06-.13a4.37,4.37,0,0,0-.91-3q-1.51-1.54-6-1.54a4.28,4.28,0,0,0-1.83.26,1.8,1.8,0,0,0-.78,1.08L12,9.21a20.26,20.26,0,0,0,5.15-.52A6.49,6.49,0,0,0,19.8,6.1l1.1.1L18,14.27l-1.09-.15a6.34,6.34,0,0,0,.11-.74c0-.22,0-.38,0-.5a2.26,2.26,0,0,0-1-2.09c-.68-.42-2.15-.63-4.39-.63L9,17.37a3.09,3.09,0,0,0-.1.34,1.22,1.22,0,0,0,0,.32,1.18,1.18,0,0,0,1,1.17,7,7,0,0,0,1.86.18v.77H0v-.77a5.14,5.14,0,0,0,2.11-.53,3,3,0,0,0,1.1-1.58L8.06,4c.09-.27.17-.5.23-.7a3.74,3.74,0,0,0,.18-1,.83.83,0,0,0-.55-.89,10.94,10.94,0,0,0-2.33-.3V.4h21Zm8.54,12.11a1.49,1.49,0,0,1,0-.28,2.46,2.46,0,0,1,.07-.29l.3-1L38.76,3.29a2.93,2.93,0,0,1,1.09-1.6A5.42,5.42,0,0,1,42,1.17V.4H30.17v.77a10.52,10.52,0,0,1,2.34.31.88.88,0,0,1,.56.94,2.58,2.58,0,0,1-.11.67c-.07.26-.18.57-.32,1L27.79,17.28a2.94,2.94,0,0,1-1.12,1.59,5.28,5.28,0,0,1-2.09.51v.77H36.36v-.77A10.22,10.22,0,0,1,34,19.07.89.89,0,0,1,33.48,18.12ZM66.19,2.24a2.53,2.53,0,0,1,1.87-1l.56-.06V.4H60.5v.77a8,8,0,0,1,2.16.33,1.47,1.47,0,0,1,1,1.48,5.61,5.61,0,0,1-.25,1.34c-.11.4-.25.87-.43,1.38l-3.08,8.35L51.26.4h-8v.77a8.44,8.44,0,0,1,1.86.24,2.26,2.26,0,0,1,1.22,1.05l.17.31L42.11,14.88a13.74,13.74,0,0,1-1.8,3.61,3.36,3.36,0,0,1-2.22.89v.77h8.23v-.77a7.75,7.75,0,0,1-2.1-.31,1.45,1.45,0,0,1-1-1.44,3.56,3.56,0,0,1,.1-.79,16.15,16.15,0,0,1,.64-2L47.85,4.31,58.11,20.64h1l5.5-15A15.48,15.48,0,0,1,66.19,2.24Zm23,17.13v.78H78.08v-.71A7.47,7.47,0,0,0,80.49,19a1.25,1.25,0,0,0,.7-1.29A13.26,13.26,0,0,0,81,16.16c0-.18-.16-.89-.39-2.15H72.06l-2.3,3a3.7,3.7,0,0,0-.42.66,1.54,1.54,0,0,0-.18.69.74.74,0,0,0,.49.78,10.28,10.28,0,0,0,2.06.3v.71H63.94v-.71a6.43,6.43,0,0,0,1.63-.53,6.63,6.63,0,0,0,1.72-1.56L82,0h1l3.78,16.88A3.69,3.69,0,0,0,87.7,19,3.53,3.53,0,0,0,89.24,19.37Zm-8.93-6.53L78.86,5.65,73,12.84Zm32.8,1.44a11.51,11.51,0,0,1-5.23,3.88,21.36,21.36,0,0,1-7,1A4.88,4.88,0,0,1,99.22,19a.74.74,0,0,1-.58-.71,2.33,2.33,0,0,1,0-.48c0-.13.08-.28.13-.43L104,3.29a2.72,2.72,0,0,1,1.19-1.64,9.4,9.4,0,0,1,2.79-.48V.4H95.4v.77a10.42,10.42,0,0,1,2.34.31.88.88,0,0,1,.56.94,2.58,2.58,0,0,1-.11.67c-.07.25-.17.57-.31.94L93,17.27a2.92,2.92,0,0,1-1.12,1.6,4.59,4.59,0,0,1-1.71.47v.81h21.55l2.32-5.74Z",opacity:1,strokeColor:"",fillColor:"#516c30",width:114.058,height:20.639,stampFillColor:"#e6eddf",stampStrokeColor:""};break;case"Completed":t={iconName:"Completed",pathdata:"M16.37,0,15.08,6.9l-.79-.17c0-.41,0-.66,0-.73a2.73,2.73,0,0,0,0-.32,5.33,5.33,0,0,0-.94-3.47A3,3,0,0,0,11,1.07c-2,0-3.68,1.51-5.13,4.55a18.84,18.84,0,0,0-2,8.29q0,3.06,1.2,4.2a3.82,3.82,0,0,0,2.64,1.13,5.3,5.3,0,0,0,3.51-1.43,10.75,10.75,0,0,0,1.78-2.09l.77.65a9.32,9.32,0,0,1-3.12,3.35A7,7,0,0,1,7,20.81a6.66,6.66,0,0,1-5-2.08,7.72,7.72,0,0,1-2-5.57A14.57,14.57,0,0,1,3.05,3.92Q6.1,0,10.29,0A8.92,8.92,0,0,1,13,.43a9.09,9.09,0,0,0,1.65.43.72.72,0,0,0,.6-.23A2.55,2.55,0,0,0,15.6,0ZM32.83,7.11a15.24,15.24,0,0,1-3.11,9.07q-3.31,4.61-7.63,4.6a5.63,5.63,0,0,1-4.42-1.92A7.47,7.47,0,0,1,16,13.72a15.27,15.27,0,0,1,3.18-9.19Q22.46,0,26.57,0a5.82,5.82,0,0,1,4.5,1.92A7.35,7.35,0,0,1,32.83,7.11ZM29.16,4.6a4.92,4.92,0,0,0-.63-2.55,2.14,2.14,0,0,0-2-1.06Q23.4,1,21.24,7.53a27.45,27.45,0,0,0-1.63,8.26A6.68,6.68,0,0,0,19.92,18a2.24,2.24,0,0,0,2.2,1.78,3.71,3.71,0,0,0,2.73-1.29,15,15,0,0,0,2.54-4.93,30.56,30.56,0,0,0,1.3-4.83A23,23,0,0,0,29.16,4.6Zm21.2,13.62a3.83,3.83,0,0,1,.08-.75,8.6,8.6,0,0,1,.19-.88L53.75,3.31a3,3,0,0,1,.85-1.67,2.72,2.72,0,0,1,1.21-.4V.48H50.42L42.66,14.39,41.21.48h-5.8v.76a4.65,4.65,0,0,1,1.45.21c.26.11.38.37.38.78a4.57,4.57,0,0,1-.08.75c-.06.28-.13.61-.23,1L34.34,15a16.85,16.85,0,0,1-1.16,3.65,1.9,1.9,0,0,1-1.42.86v.76h5.3v-.76a3.22,3.22,0,0,1-1.32-.29A1.48,1.48,0,0,1,35,17.74a8.32,8.32,0,0,1,.17-1.42c.07-.37.17-.82.3-1.37L38.06,4.23l1.71,16.38h.71L50,3.76l-3.2,13.58A2.84,2.84,0,0,1,46,19a4.06,4.06,0,0,1-1.76.49v.76h7.93v-.76a4.79,4.79,0,0,1-1.49-.31Q50.36,19,50.36,18.22ZM67.69,9.29a7.39,7.39,0,0,1-4.89,1.58l-.73,0-1.48-.11L59.21,16.6l-.21,1a1,1,0,0,0,0,.3,2.83,2.83,0,0,0,0,.29c0,.5.12.81.35.94a4.74,4.74,0,0,0,1.51.31v.76H53.31v-.76a2.52,2.52,0,0,0,1.33-.52,3.18,3.18,0,0,0,.72-1.59L58.48,4.11q.1-.45.18-.9a4.48,4.48,0,0,0,.08-.72,1,1,0,0,0-.49-1,4.36,4.36,0,0,0-1.36-.23V.48h7.29a7.29,7.29,0,0,1,3.07.57,4,4,0,0,1,2.33,4A5.22,5.22,0,0,1,67.69,9.29Zm-1.8-5a3.65,3.65,0,0,0-.51-2,1.85,1.85,0,0,0-1.7-.79,1,1,0,0,0-.8.28,3.27,3.27,0,0,0-.4,1l-1.66,7,.47.06h.41a4.37,4.37,0,0,0,2-.36,3.14,3.14,0,0,0,1.2-1.18,6.51,6.51,0,0,0,.74-2A9.87,9.87,0,0,0,65.89,4.25Zm16.9,10.1a8.71,8.71,0,0,1-3.35,3.88,9.36,9.36,0,0,1-4.53,1,2.15,2.15,0,0,1-1-.21.75.75,0,0,1-.37-.71,3.18,3.18,0,0,1,0-.47c0-.14,0-.28.08-.44l3.3-14.08a2.94,2.94,0,0,1,.77-1.64,4.47,4.47,0,0,1,1.79-.48V.48h-8v.76a4.8,4.8,0,0,1,1.5.31c.23.13.35.44.35.94a4.36,4.36,0,0,1-.06.67c0,.26-.12.57-.21,1L69.9,17.34a3.18,3.18,0,0,1-.72,1.6,2.53,2.53,0,0,1-1.34.52v.76H81.91l1.49-5.74ZM85.73,1.24a4.59,4.59,0,0,1,1.5.31c.23.13.34.44.34.94a3.84,3.84,0,0,1-.07.7c0,.28-.11.58-.19.92L84.2,17.35a3.18,3.18,0,0,1-.72,1.59,2.27,2.27,0,0,1-1.06.47h-.07v.8H96.2l1.5-5.74-.62-.13a8.14,8.14,0,0,1-3.94,4.17,9.39,9.39,0,0,1-3.94.75A1.75,1.75,0,0,1,88.06,19a.87.87,0,0,1-.27-.66,3.28,3.28,0,0,1,0-.39,5,5,0,0,1,.09-.51l1.67-7.2a5.16,5.16,0,0,1,2.91.57A2.58,2.58,0,0,1,93.24,13c0,.14,0,.31,0,.51s0,.45-.07.73l.7.14,1.88-8.07L95,6.18a5.62,5.62,0,0,1-1.74,2.61,9.05,9.05,0,0,1-3.45.51l1.51-6.56a2.23,2.23,0,0,1,.47-1.06,2,2,0,0,1,1.3-.28c2,0,3.29.5,3.93,1.51a6.13,6.13,0,0,1,.6,3l.68.13L99.4.48H85.73ZM114,6.14l.92-5.66h-14l-1,5,.66.2a7.81,7.81,0,0,1,2.23-3.16,4.91,4.91,0,0,1,3.23-1.06l-3.73,15.85a2.84,2.84,0,0,1-1,1.85,3.48,3.48,0,0,1-1.6.26v.76h8.4v-.76a5.82,5.82,0,0,1-1.71-.3c-.27-.13-.41-.45-.41-.95a2.26,2.26,0,0,1,0-.26c0-.09,0-.2,0-.33l.21-1,3.53-15.1a3.65,3.65,0,0,1,2.14.63c.89.7,1.35,2,1.39,3.94Zm9.44,12.38a9.39,9.39,0,0,1-3.94.75,1.77,1.77,0,0,1-1.14-.26.87.87,0,0,1-.27-.66,3.28,3.28,0,0,1,0-.39,5,5,0,0,1,.09-.51l1.67-7.2a5.12,5.12,0,0,1,2.91.57,2.58,2.58,0,0,1,.75,2.15c0,.14,0,.31,0,.51s0,.45-.07.73l.7.14L126,6.28l-.7-.1a5.78,5.78,0,0,1-1.74,2.61,9.16,9.16,0,0,1-3.46.51l1.51-6.56a2.14,2.14,0,0,1,.48-1.06,2,2,0,0,1,1.3-.28c2,0,3.28.5,3.92,1.51a6,6,0,0,1,.6,3l.68.13,1.08-5.6H116v.76a4.67,4.67,0,0,1,1.51.31c.22.13.34.44.34.94a4,4,0,0,1-.08.7c0,.28-.11.58-.18.92l-3.12,13.24a3.18,3.18,0,0,1-.72,1.59,2.56,2.56,0,0,1-1.34.52v.76h14.06l1.5-5.74-.62-.13A8.14,8.14,0,0,1,123.39,18.52Zm23.32-9.84a11.62,11.62,0,0,1-2.89,7.84,10.6,10.6,0,0,1-8.42,3.7h-7.29v-.76a2.58,2.58,0,0,0,1.18-.41,2.94,2.94,0,0,0,.88-1.71l3.11-13.23c.09-.38.16-.69.21-1a4.49,4.49,0,0,0,.07-.67c0-.5-.12-.81-.36-.94a4.8,4.8,0,0,0-1.5-.31V.48h7.36a7.16,7.16,0,0,1,5.69,2.22A8.72,8.72,0,0,1,146.71,8.68ZM143,6.87a8,8,0,0,0-.64-3.48,3.52,3.52,0,0,0-3.44-2,1.52,1.52,0,0,0-1.11.31,1.75,1.75,0,0,0-.41.83l-3.5,14.9c0,.14,0,.27-.07.39s0,.21,0,.3a1.06,1.06,0,0,0,.3.84,1.75,1.75,0,0,0,1.1.26q4.53,0,6.55-5.42A19.84,19.84,0,0,0,143,6.87Z",opacity:1,strokeColor:"",fillColor:"#516c30",width:146.706,height:20.811,stampFillColor:"#e6eddf",stampStrokeColor:""};break;case"ForPublicRelease":case"For Public Release":t={iconName:"For Public Release",pathdata:"M10.33.48l-.65,5.6L9.27,6a9.74,9.74,0,0,0-.36-3A2.27,2.27,0,0,0,6.57,1.4a.85.85,0,0,0-.71.26,2.67,2.67,0,0,0-.3,1.08L4.65,9.28a3.45,3.45,0,0,0,2-.52,6.65,6.65,0,0,0,1-2.59l.43.1L7,14.34l-.42-.14c0-.29,0-.54,0-.75s0-.38,0-.49a4.17,4.17,0,0,0-.39-2.09,1.91,1.91,0,0,0-1.71-.64l-1,7.21c0,.13,0,.24,0,.35s0,.21,0,.31a1.45,1.45,0,0,0,.38,1.17,1.17,1.17,0,0,0,.72.19v.76H0v-.76a1.31,1.31,0,0,0,.82-.54,4.39,4.39,0,0,0,.42-1.58L3.13,4.11c0-.27.06-.51.09-.71,0-.41.07-.73.07-1a1.34,1.34,0,0,0-.21-.9,2.13,2.13,0,0,0-.91-.3V.48ZM20.5,7.11a22.43,22.43,0,0,1-1.88,9.07q-2,4.61-4.62,4.6a3,3,0,0,1-2.67-1.92,10.91,10.91,0,0,1-1-5.14,22.46,22.46,0,0,1,1.92-9.19Q14.23,0,16.71,0a3.11,3.11,0,0,1,2.72,1.92A10.72,10.72,0,0,1,20.5,7.11ZM18.28,4.6a7.7,7.7,0,0,0-.38-2.55c-.26-.7-.65-1-1.19-1-1.28,0-2.35,2.17-3.22,6.53a43.69,43.69,0,0,0-1,8.26,10.72,10.72,0,0,0,.19,2.2c.24,1.18.69,1.77,1.33,1.77s1.16-.43,1.65-1.29a19.35,19.35,0,0,0,1.54-4.93A48.7,48.7,0,0,0,18,8.71,38.21,38.21,0,0,0,18.28,4.6Zm11.59.16a8.73,8.73,0,0,1-.24,2,5.64,5.64,0,0,1-.8,1.9,3.49,3.49,0,0,1-.93,1,7.31,7.31,0,0,1-1,.52c0,.3.08.49.1.57l1.18,6.66a4.54,4.54,0,0,0,.52,1.7,1.1,1.1,0,0,0,.83.41v.76H26.46l-1.65-9.76h-.43l-.91,6.14-.13,1a2,2,0,0,0,0,.25,2.62,2.62,0,0,0,0,.28,1.57,1.57,0,0,0,.2,1,1.77,1.77,0,0,0,.92.32v.76H19.86v-.76a1.33,1.33,0,0,0,.81-.52,4.35,4.35,0,0,0,.43-1.59L23,4.11c0-.27.07-.51.09-.71a8.23,8.23,0,0,0,.07-1,1.3,1.3,0,0,0-.21-.9,2.08,2.08,0,0,0-.91-.3V.48h4.22A3.79,3.79,0,0,1,28.44,1C29.4,1.66,29.87,2.91,29.87,4.76Zm-2.31-.47a5.77,5.77,0,0,0-.32-2,1.12,1.12,0,0,0-1.09-.81.5.5,0,0,0-.46.26,3.87,3.87,0,0,0-.24,1.05L24.52,9.5a3.73,3.73,0,0,0,1.22-.2,2.1,2.1,0,0,0,1.1-1.13,8.41,8.41,0,0,0,.49-1.62A10.75,10.75,0,0,0,27.56,4.29Zm14.92.78a7.06,7.06,0,0,1-1.14,4.22,3.5,3.5,0,0,1-3,1.58l-.44,0-.89-.11-.84,5.86-.12,1a1.45,1.45,0,0,0,0,.3,2.81,2.81,0,0,0,0,.29,1.38,1.38,0,0,0,.21.94,1.93,1.93,0,0,0,.91.31v.76H32.65v-.76a1.28,1.28,0,0,0,.8-.52,4.3,4.3,0,0,0,.44-1.59L35.77,4.11c0-.3.08-.6.11-.9a5.21,5.21,0,0,0,0-.72,1.29,1.29,0,0,0-.3-1,1.82,1.82,0,0,0-.81-.23V.48h4.4a3,3,0,0,1,1.86.57C42,1.78,42.48,3.12,42.48,5.07Zm-2.23-.82a5.74,5.74,0,0,0-.3-2,1.07,1.07,0,0,0-1-.79.5.5,0,0,0-.49.28,5.11,5.11,0,0,0-.24,1l-1,7,.28.06h.25a1.79,1.79,0,0,0,1.2-.36,2.88,2.88,0,0,0,.73-1.18,10.56,10.56,0,0,0,.44-2A15.74,15.74,0,0,0,40.25,4.25Zm12.91-3V.48H50v.76a1.46,1.46,0,0,1,.82.32A2,2,0,0,1,51.24,3a15,15,0,0,1-.14,1.57q0-.17-.15,1.17l-.89,6.16a29.63,29.63,0,0,1-1,4.77c-.55,1.63-1.31,2.44-2.28,2.44a1.59,1.59,0,0,1-1.38-.77,4.16,4.16,0,0,1-.5-2.23q0-.63.15-2c.06-.5.15-1.14.27-1.93l1.26-8.84a4.13,4.13,0,0,1,.46-1.66,1.66,1.66,0,0,1,1-.46V.48H43.34v.76a2,2,0,0,1,.9.3,1.3,1.3,0,0,1,.21.9,7.27,7.27,0,0,1,0,.75c0,.29-.07.59-.11.92l-1,7.24c-.16,1.14-.27,1.93-.32,2.38a19.16,19.16,0,0,0-.12,2,6.13,6.13,0,0,0,1,3.71,2.93,2.93,0,0,0,2.43,1.33c1.39,0,2.45-.9,3.17-2.69a29.58,29.58,0,0,0,1.23-5.61l1-6.74A24.45,24.45,0,0,1,52.3,2.1,1.22,1.22,0,0,1,53.16,1.24Zm7.14,9.82a5.87,5.87,0,0,1,.68,3,8.55,8.55,0,0,1-1,4.27,3.68,3.68,0,0,1-3.48,1.84H51.82v-.76a1.3,1.3,0,0,0,.72-.4,3.94,3.94,0,0,0,.52-1.71L55,4.1c0-.39.09-.72.12-1s0-.46,0-.6c0-.53-.07-.86-.23-1A1.64,1.64,0,0,0,54,1.24V.48h4.17a3.4,3.4,0,0,1,2.67,1,4.91,4.91,0,0,1,1,3.38,5.33,5.33,0,0,1-1.17,3.61,4.8,4.8,0,0,1-1.68,1.22A4.84,4.84,0,0,1,60.3,11.06Zm-1.66,2.45a3.81,3.81,0,0,0-.73-2.74,2.63,2.63,0,0,0-1.58-.52l-1,7.2a4,4,0,0,0-.05.4c0,.15,0,.32,0,.51a.9.9,0,0,0,.33.82,1.13,1.13,0,0,0,.59.12c1,0,1.67-.87,2.1-2.59A13.54,13.54,0,0,0,58.64,13.51Zm.12-5.29A5.92,5.92,0,0,0,59.4,6.1a12.74,12.74,0,0,0,.13-1.74,6.54,6.54,0,0,0-.29-2.11,1.11,1.11,0,0,0-1.13-.81.49.49,0,0,0-.49.32,3.52,3.52,0,0,0-.23,1l-.94,6.62A7.45,7.45,0,0,0,58,9,1.8,1.8,0,0,0,58.76,8.22Zm11.71,6.14a8.78,8.78,0,0,1-2,3.87,4,4,0,0,1-2.74,1,.89.89,0,0,1-.63-.21.93.93,0,0,1-.22-.7,3.4,3.4,0,0,1,0-.48c0-.14,0-.28,0-.44l2-14.08a3.8,3.8,0,0,1,.47-1.64,1.94,1.94,0,0,1,1.08-.48V.48H63.6v.76a2,2,0,0,1,.91.31,1.36,1.36,0,0,1,.22.94c0,.2,0,.42,0,.67s-.07.57-.13,1L62.68,17.34a4.31,4.31,0,0,1-.44,1.6,1.28,1.28,0,0,1-.8.52v.76h8.5l.9-5.74ZM76.89.48H72.32v.76a1.92,1.92,0,0,1,.9.31c.15.13.22.44.22.94a5.56,5.56,0,0,1,0,.67c0,.26-.07.57-.12,1L71.39,17.35A4.35,4.35,0,0,1,71,18.94a1.33,1.33,0,0,1-.81.52v.76h4.57v-.76a1.81,1.81,0,0,1-.91-.32,1.39,1.39,0,0,1-.21-.94c0-.09,0-.18,0-.28l0-.3.12-1L75.65,3.36a4.43,4.43,0,0,1,.43-1.6,1.3,1.3,0,0,1,.81-.52Zm8.46.15A.38.38,0,0,1,85,.87a4.12,4.12,0,0,1-1-.44A3.51,3.51,0,0,0,82.37,0Q79.84,0,78,3.92a21.42,21.42,0,0,0-1.84,9.24,11.15,11.15,0,0,0,1.2,5.57,3.51,3.51,0,0,0,3.05,2.08,3.15,3.15,0,0,0,2.21-1.09,8.92,8.92,0,0,0,1.89-3.35L84,15.72A11.08,11.08,0,0,1,83,17.81a2.71,2.71,0,0,1-2.12,1.43,2,2,0,0,1-1.59-1.13,8.33,8.33,0,0,1-.74-4.2A29.46,29.46,0,0,1,79.7,5.62Q81,1.08,82.8,1.07c.59,0,1.07.38,1.45,1.14a8,8,0,0,1,.57,3.47,2.73,2.73,0,0,1,0,.32c0,.08,0,.32,0,.73l.48.17L86.05,0h-.47A2.93,2.93,0,0,1,85.35.63Zm21.41,13.73.37.12-.9,5.74H94.72l-1.66-9.76h-.43l-.91,6.14-.13,1c0,.08,0,.16,0,.25s0,.19,0,.28a1.57,1.57,0,0,0,.2,1,1.81,1.81,0,0,0,.92.32v.76H88.11v-.76a1.3,1.3,0,0,0,.81-.52,4.35,4.35,0,0,0,.43-1.59L91.24,4.11c0-.27.07-.51.09-.71a8.23,8.23,0,0,0,.07-1,1.3,1.3,0,0,0-.21-.9,2.08,2.08,0,0,0-.91-.3V.48h4.23A3.81,3.81,0,0,1,96.7,1c1,.65,1.43,1.9,1.43,3.75a8.73,8.73,0,0,1-.24,2,5.66,5.66,0,0,1-.81,1.9,3.49,3.49,0,0,1-.93,1,6.73,6.73,0,0,1-1,.52c0,.3.09.49.1.57l1.18,6.66a4.74,4.74,0,0,0,.52,1.7,1,1,0,0,0,.78.39,1.23,1.23,0,0,0,.78-.5A4.3,4.3,0,0,0,99,17.35l1.88-13.24c.05-.34.09-.64.12-.92a6.28,6.28,0,0,0,0-.7,1.45,1.45,0,0,0-.2-.94,2,2,0,0,0-.91-.31V.48h8.26l-.65,5.6L107.1,6a9.57,9.57,0,0,0-.36-3,2.3,2.3,0,0,0-2.38-1.51c-.41,0-.67.09-.78.28a2.87,2.87,0,0,0-.29,1.06l-.91,6.56a3.57,3.57,0,0,0,2.08-.51,6.59,6.59,0,0,0,1.06-2.61l.42.1-1.14,8.08-.42-.15c0-.28,0-.52.05-.73s0-.37,0-.51a3.6,3.6,0,0,0-.46-2.15,2.14,2.14,0,0,0-1.75-.57l-1,7.2a4.7,4.7,0,0,0-.06.51c0,.16,0,.29,0,.39a1.12,1.12,0,0,0,.17.66.77.77,0,0,0,.69.26,3.77,3.77,0,0,0,2.37-.75A7.71,7.71,0,0,0,106.76,14.36ZM95.09,8.17a7.75,7.75,0,0,0,.49-1.62,10.75,10.75,0,0,0,.23-2.26,5.77,5.77,0,0,0-.32-2,1.11,1.11,0,0,0-1.08-.81.48.48,0,0,0-.46.26,3.44,3.44,0,0,0-.25,1.05L92.78,9.5A3.78,3.78,0,0,0,94,9.3,2.08,2.08,0,0,0,95.09,8.17Zm21.32,6.19a8.67,8.67,0,0,1-2,3.87,4,4,0,0,1-2.73,1,.89.89,0,0,1-.63-.21.93.93,0,0,1-.23-.7c0-.19,0-.35,0-.48s0-.28,0-.44l2-14.08a3.84,3.84,0,0,1,.46-1.64,2,2,0,0,1,1.08-.48V.48h-4.86v.76a2,2,0,0,1,.91.31,1.38,1.38,0,0,1,.21.94,5.56,5.56,0,0,1,0,.67c0,.26-.07.57-.12,1l-1.89,13.23a4.16,4.16,0,0,1-.43,1.6,1.27,1.27,0,0,1-.81.52v.76h8.51l.9-5.74Zm8.64,0a7.71,7.71,0,0,1-2.38,4.16,3.82,3.82,0,0,1-2.38.75.77.77,0,0,1-.69-.26,1.2,1.2,0,0,1-.17-.66c0-.1,0-.23,0-.39a4.7,4.7,0,0,1,.06-.51l1-7.2a2.17,2.17,0,0,1,1.76.57,3.69,3.69,0,0,1,.45,2.15c0,.14,0,.31,0,.51s0,.45,0,.73l.42.15,1.13-8.08-.42-.1a6.79,6.79,0,0,1-1,2.61,3.63,3.63,0,0,1-2.09.51l.91-6.56a2.87,2.87,0,0,1,.29-1.06c.12-.19.38-.28.78-.28A2.3,2.3,0,0,1,125,2.91a9.57,9.57,0,0,1,.36,3l.41.13.65-5.6h-8.26v.76a1.93,1.93,0,0,1,.91.31,1.45,1.45,0,0,1,.2.94,6.28,6.28,0,0,1,0,.7c0,.28-.07.58-.11.92l-1.89,13.24a4.35,4.35,0,0,1-.43,1.59,1.33,1.33,0,0,1-.81.52v.76h8.5l.91-5.74Zm10.29,5.15v.71h-4.65v-.71a1.44,1.44,0,0,0,.93-.41,2.08,2.08,0,0,0,.27-1.29c0-.22,0-.75-.08-1.58,0-.17-.06-.89-.15-2.15h-3.31l-.89,3a5.32,5.32,0,0,0-.16.66,3.4,3.4,0,0,0-.08.69,1.06,1.06,0,0,0,.2.78,1.68,1.68,0,0,0,.79.3v.71h-3v-.71a1.8,1.8,0,0,0,.63-.53,6.45,6.45,0,0,0,.67-1.56L132.19.07h.4L134.06,17a7.15,7.15,0,0,0,.36,2.08A1.13,1.13,0,0,0,135.34,19.51Zm-3.79-6.6L131,5.73l-2.27,7.18Zm9.6-4-1.32-2.09a4.57,4.57,0,0,1-.47-.94,5.12,5.12,0,0,1-.28-1.78,5.57,5.57,0,0,1,.27-1.77c.27-.83.7-1.24,1.29-1.24s1.21.51,1.57,1.54A8.78,8.78,0,0,1,142.65,5l.06,1,.39.1.63-5.91h-.46a2.09,2.09,0,0,1-.25.54.46.46,0,0,1-.41.21.57.57,0,0,1-.24-.05,1.23,1.23,0,0,1-.26-.12l-.39-.24a2.34,2.34,0,0,0-.5-.25,2.41,2.41,0,0,0-.85-.16,2.55,2.55,0,0,0-2.31,1.67,9.11,9.11,0,0,0-.83,4.05,10.47,10.47,0,0,0,1.88,5.5A9.21,9.21,0,0,1,141,16a6.49,6.49,0,0,1-.5,2.63,1.59,1.59,0,0,1-1.43,1.14,1.42,1.42,0,0,1-1-.4,3.55,3.55,0,0,1-.78-1.16,7.09,7.09,0,0,1-.52-1.92c-.05-.43-.1-1.12-.13-2.06l-.44-.06-.55,6.62h.46a4.11,4.11,0,0,1,.25-.82.36.36,0,0,1,.36-.23.47.47,0,0,1,.17,0,2.38,2.38,0,0,1,.27.18l.39.27a3.52,3.52,0,0,0,.84.43,2.48,2.48,0,0,0,.84.15,2.91,2.91,0,0,0,2.63-1.88,9.24,9.24,0,0,0,1-4.21,9.85,9.85,0,0,0-.49-3.24A12.1,12.1,0,0,0,141.15,8.92Zm7.75-7.24c.12-.19.38-.28.78-.28a2.3,2.3,0,0,1,2.38,1.51,9.57,9.57,0,0,1,.36,3l.41.13.65-5.6h-8.26v.76a1.93,1.93,0,0,1,.91.31c.14.13.2.44.2.94a6.28,6.28,0,0,1,0,.7c0,.28-.07.58-.11.92l-1.89,13.24a4.35,4.35,0,0,1-.43,1.59,1.33,1.33,0,0,1-.81.52v.76h8.5l.91-5.74-.38-.12a7.71,7.71,0,0,1-2.38,4.16,3.82,3.82,0,0,1-2.38.75.77.77,0,0,1-.69-.26,1.2,1.2,0,0,1-.17-.66c0-.1,0-.23,0-.39a4.7,4.7,0,0,1,.06-.51l1-7.2a2.17,2.17,0,0,1,1.76.57,3.69,3.69,0,0,1,.45,2.15c0,.14,0,.31,0,.51s0,.45,0,.73l.42.15,1.14-8.08-.43-.1a6.79,6.79,0,0,1-1.05,2.61,3.63,3.63,0,0,1-2.09.51l.91-6.56A2.87,2.87,0,0,1,148.9,1.68Z",opacity:1,strokeColor:"",fillColor:"#192760",width:153.485,height:20.812,stampFillColor:"#dce3ef",stampStrokeColor:""};break;case"NotForPublicRelease":case"Not For Public Release":t={iconName:"Not For Public Release",pathdata:"M9,2.35q-.21.9-.51,3.48L6.69,21.05H6.38L3.11,4.45,1.85,15.19c-.1.89-.17,1.56-.2,2s0,.55,0,.81A2.39,2.39,0,0,0,2,19.45a1.09,1.09,0,0,0,.67.33v.77H0v-.77a1.22,1.22,0,0,0,.71-.91,33.91,33.91,0,0,0,.57-3.68L2.7,2.88l-.06-.3a2.09,2.09,0,0,0-.39-1.07,1,1,0,0,0-.59-.25V.48H4.2L6.93,14.36l1-8.49c.06-.53.11-1,.14-1.4.06-.63.08-1.08.08-1.37a2.67,2.67,0,0,0-.3-1.5,1.07,1.07,0,0,0-.69-.34V.48H9.73v.78l-.18.06C9.29,1.41,9.09,1.75,9,2.35ZM16.74,2a13.19,13.19,0,0,1,.87,5.28,27.45,27.45,0,0,1-1.54,9.22q-1.65,4.66-3.79,4.67-1.35,0-2.19-1.95a13.31,13.31,0,0,1-.85-5.23A27.59,27.59,0,0,1,10.82,4.6C11.91,1.53,13.15,0,14.51,0,15.41,0,16.16.65,16.74,2Zm-.95,2.73a9.33,9.33,0,0,0-.31-2.59c-.21-.72-.54-1.08-1-1.08-1.05,0-1.92,2.21-2.64,6.64a54.69,54.69,0,0,0-.81,8.4,14.21,14.21,0,0,0,.15,2.23c.2,1.2.57,1.8,1.1,1.8s.95-.43,1.35-1.31a22.84,22.84,0,0,0,1.26-5c.28-1.55.49-3.19.65-4.91S15.79,5.74,15.79,4.68Zm2.3.93.32.21A10.7,10.7,0,0,1,19.52,2.6a1.87,1.87,0,0,1,1.6-1.08L19.27,17.63a4,4,0,0,1-.52,1.88,1,1,0,0,1-.79.27v.77h4.17v-.77a1.72,1.72,0,0,1-.85-.3,1.56,1.56,0,0,1-.2-1,2.44,2.44,0,0,1,0-.27c0-.08,0-.2,0-.33l.11-1L23,1.52A1.31,1.31,0,0,1,24,2.17a8.49,8.49,0,0,1,.69,4l.33.07L25.5.48H18.57ZM28.75.48v.78a1.39,1.39,0,0,1,.74.31,1.44,1.44,0,0,1,.18.9q0,.36-.06,1c0,.2-.05.44-.07.71L28,17.62a5.34,5.34,0,0,1-.35,1.61,1.05,1.05,0,0,1-.67.55v.77H30.7v-.77a.82.82,0,0,1-.6-.2,1.69,1.69,0,0,1-.31-1.18c0-.11,0-.22,0-.32l0-.35.83-7.33a1.42,1.42,0,0,1,1.4.64,5,5,0,0,1,.33,2.13c0,.12,0,.28,0,.5s0,.47,0,.76l.34.15.94-8.21-.35-.1a8.12,8.12,0,0,1-.85,2.64,2.42,2.42,0,0,1-1.64.52l.74-6.65a3.34,3.34,0,0,1,.25-1.1.64.64,0,0,1,.59-.26A1.91,1.91,0,0,1,34.28,3a11.32,11.32,0,0,1,.29,3.06l.34.13.54-5.7Zm15,6.75a27.46,27.46,0,0,1-1.55,9.22q-1.65,4.66-3.79,4.67-1.35,0-2.19-1.95a13.49,13.49,0,0,1-.85-5.23A27.59,27.59,0,0,1,37,4.6Q38.65,0,40.69,0c.91,0,1.65.65,2.23,2A13.17,13.17,0,0,1,43.8,7.23ZM42,4.68a9.3,9.3,0,0,0-.32-2.59c-.21-.72-.53-1.08-1-1.08Q39.12,1,38,7.65a54.69,54.69,0,0,0-.81,8.4,13,13,0,0,0,.16,2.23c.2,1.2.56,1.8,1.09,1.8s1-.43,1.35-1.31a23.28,23.28,0,0,0,1.27-5c.27-1.55.49-3.19.64-4.91S42,5.74,42,4.68ZM50.32,1c.78.66,1.17,1.93,1.17,3.8a11,11,0,0,1-.19,2,7.2,7.2,0,0,1-.66,1.93,3.45,3.45,0,0,1-.77,1,5.58,5.58,0,0,1-.8.52c0,.31.07.51.08.58l1,6.78a5.63,5.63,0,0,0,.42,1.72.85.85,0,0,0,.69.42v.77H48.69l-1.36-9.92H47l-.75,6.25-.1,1c0,.08,0,.16,0,.26v.28a1.94,1.94,0,0,0,.16,1,1.39,1.39,0,0,0,.75.32v.77H43.27v-.77a1.07,1.07,0,0,0,.66-.53,4.83,4.83,0,0,0,.36-1.61L45.84,4.18c0-.28.06-.52.08-.72,0-.42,0-.75,0-1a1.48,1.48,0,0,0-.17-.91,1.39,1.39,0,0,0-.74-.31V.48h3.46A2.67,2.67,0,0,1,50.32,1Zm-.73,3.34a7.2,7.2,0,0,0-.26-2.09c-.18-.55-.47-.83-.89-.83a.4.4,0,0,0-.38.27,4.46,4.46,0,0,0-.2,1.06L47.1,9.65a2.39,2.39,0,0,0,1-.2A2,2,0,0,0,49,8.31a10,10,0,0,0,.4-1.65A12.71,12.71,0,0,0,49.59,4.37Zm11.1-3.3c.77.74,1.16,2.1,1.16,4.09a8.51,8.51,0,0,1-.94,4.28A2.78,2.78,0,0,1,58.48,11h-.36l-.73-.12-.69,6-.11,1c0,.1,0,.2,0,.3s0,.2,0,.3a1.7,1.7,0,0,0,.17.95,1.47,1.47,0,0,0,.75.32v.77H53.77v-.77a1.07,1.07,0,0,0,.66-.53,4.83,4.83,0,0,0,.36-1.61L56.34,4.17l.09-.9c0-.31,0-.55,0-.74a1.58,1.58,0,0,0-.25-1,1.33,1.33,0,0,0-.67-.23V.48h3.62A2.11,2.11,0,0,1,60.69,1.07ZM60,4.32a7,7,0,0,0-.25-2.06c-.17-.53-.45-.8-.84-.8a.4.4,0,0,0-.4.29,6.14,6.14,0,0,0-.2,1L57.5,9.93l.23.06h.21a1.3,1.3,0,0,0,1-.36,3.17,3.17,0,0,0,.6-1.2,12.69,12.69,0,0,0,.36-2A19.64,19.64,0,0,0,60,4.32Zm10.6-3.06V.48H68v.78a1.17,1.17,0,0,1,.68.32A2.43,2.43,0,0,1,69,3.05c0,.32,0,.85-.11,1.6,0-.12,0,.27-.12,1.18l-.73,6.26a36.28,36.28,0,0,1-.8,4.86c-.45,1.65-1.07,2.47-1.87,2.47a1.27,1.27,0,0,1-1.13-.78,5.05,5.05,0,0,1-.41-2.27c0-.43,0-1.1.13-2,.05-.51.12-1.17.21-2l1-9a4.69,4.69,0,0,1,.38-1.69,1.24,1.24,0,0,1,.8-.47V.48H62.55v.78a1.39,1.39,0,0,1,.74.31,1.56,1.56,0,0,1,.17.91c0,.21,0,.47,0,.76s-.06.6-.1.94l-.85,7.36c-.14,1.15-.23,2-.27,2.42-.06.76-.1,1.44-.1,2a7.4,7.4,0,0,0,.81,3.78,2.35,2.35,0,0,0,2,1.35c1.14,0,2-.91,2.6-2.74a35.69,35.69,0,0,0,1-5.7l.79-6.85a30.83,30.83,0,0,1,.58-3.7A1.15,1.15,0,0,1,70.61,1.26Zm5.86,10a7.16,7.16,0,0,1,.56,3.1,10.31,10.31,0,0,1-.86,4.34,2.93,2.93,0,0,1-2.86,1.87h-3.8v-.77a1.07,1.07,0,0,0,.59-.41,4.64,4.64,0,0,0,.43-1.73L72.08,4.17c0-.4.08-.73.1-1s0-.46,0-.61a1.83,1.83,0,0,0-.19-1,1.22,1.22,0,0,0-.73-.28V.48h3.43a2.58,2.58,0,0,1,2.19,1.06A5.92,5.92,0,0,1,77.69,5a6.3,6.3,0,0,1-1,3.67,4.18,4.18,0,0,1-1.39,1.24A4.36,4.36,0,0,1,76.47,11.24Zm-1.36,2.49a4.59,4.59,0,0,0-.6-2.79,2,2,0,0,0-1.3-.52l-.84,7.32c0,.12,0,.25,0,.4s0,.33,0,.52a1.06,1.06,0,0,0,.27.84.77.77,0,0,0,.48.11c.8,0,1.38-.87,1.73-2.63A17.3,17.3,0,0,0,75.11,13.73Zm.1-5.38a7.33,7.33,0,0,0,.52-2.15,15,15,0,0,0,.11-1.77,7.89,7.89,0,0,0-.24-2.14c-.16-.55-.46-.83-.93-.83a.42.42,0,0,0-.4.33,4.42,4.42,0,0,0-.19,1l-.77,6.73a5.23,5.23,0,0,0,1.27-.36A1.77,1.77,0,0,0,75.21,8.35Zm9.61,6.24a9.73,9.73,0,0,1-1.66,3.94,2.93,2.93,0,0,1-2.25,1,.64.64,0,0,1-.51-.21,1,1,0,0,1-.19-.71c0-.19,0-.35,0-.49s0-.29,0-.44L81.91,3.41a4.53,4.53,0,0,1,.38-1.66,1.47,1.47,0,0,1,.88-.49V.48h-4v.78a1.39,1.39,0,0,1,.75.32,1.59,1.59,0,0,1,.18.95c0,.2,0,.43,0,.68s0,.58-.1,1L78.42,17.62a5.28,5.28,0,0,1-.35,1.63,1.12,1.12,0,0,1-.67.53v.77h7l.73-5.83ZM90.09,1.26V.48H86.34v.78a1.38,1.38,0,0,1,.74.32,1.59,1.59,0,0,1,.18.95q0,.3,0,.69c0,.25-.06.57-.11.95L85.58,17.64a5.41,5.41,0,0,1-.36,1.61,1.07,1.07,0,0,1-.66.53v.77h3.75v-.77a1.47,1.47,0,0,1-.75-.32,1.78,1.78,0,0,1-.17-1c0-.08,0-.18,0-.28s0-.2,0-.3l.1-1L89.07,3.41a5.68,5.68,0,0,1,.35-1.62A1.1,1.1,0,0,1,90.09,1.26Zm7-.62a.33.33,0,0,1-.3.24,3.1,3.1,0,0,1-.82-.44A2.5,2.5,0,0,0,94.59,0Q92.51,0,91,4a26.57,26.57,0,0,0-1.51,9.39,13.57,13.57,0,0,0,1,5.67c.66,1.41,1.49,2.11,2.5,2.11A2.46,2.46,0,0,0,94.79,20a9.66,9.66,0,0,0,1.55-3.4L96,16a12.68,12.68,0,0,1-.89,2.13c-.54,1-1.12,1.45-1.74,1.45-.47,0-.91-.39-1.31-1.15a10.33,10.33,0,0,1-.6-4.27,36.59,36.59,0,0,1,1-8.43c.72-3.08,1.57-4.63,2.54-4.63.48,0,.88.39,1.19,1.16a10,10,0,0,1,.47,3.53V6.1c0,.07,0,.32,0,.74L97,7l.64-7h-.38A4.28,4.28,0,0,1,97,.64Zm17.57,14,.31.13-.75,5.83h-9.45l-1.35-9.92H103l-.74,6.25-.11,1c0,.08,0,.16,0,.26v.28a1.94,1.94,0,0,0,.16,1,1.39,1.39,0,0,0,.75.32v.77H99.3v-.77a1.12,1.12,0,0,0,.67-.53,5.18,5.18,0,0,0,.35-1.61l1.55-13.46c0-.28.06-.52.08-.72,0-.42,0-.75,0-1a1.48,1.48,0,0,0-.17-.91,1.39,1.39,0,0,0-.74-.31V.48h3.46a2.64,2.64,0,0,1,1.8.55c.78.66,1.17,1.93,1.17,3.8a11,11,0,0,1-.19,2,6.57,6.57,0,0,1-.66,1.93,3.61,3.61,0,0,1-.76,1,6.48,6.48,0,0,1-.81.52c0,.31.07.51.08.58l1,6.78a5.63,5.63,0,0,0,.42,1.72.84.84,0,0,0,.65.4,1.06,1.06,0,0,0,.64-.51,5.41,5.41,0,0,0,.36-1.61l1.54-13.47c0-.34.07-.65.1-.92s0-.52,0-.72a1.61,1.61,0,0,0-.17-.95,1.31,1.31,0,0,0-.74-.32V.48h6.78l-.53,5.7-.34-.13a11.8,11.8,0,0,0-.3-3.09,1.92,1.92,0,0,0-2-1.54c-.33,0-.55.1-.64.29a3.46,3.46,0,0,0-.24,1.07L111,9.45a2.6,2.6,0,0,0,1.72-.51,7.79,7.79,0,0,0,.86-2.66l.35.11-.93,8.2-.35-.15c0-.28,0-.53,0-.74v-.52a4.42,4.42,0,0,0-.37-2.18,1.56,1.56,0,0,0-1.44-.58l-.83,7.32c0,.18,0,.35,0,.51s0,.3,0,.4a1.45,1.45,0,0,0,.13.67c.09.18.28.26.57.26a2.72,2.72,0,0,0,2-.76A8.33,8.33,0,0,0,114.61,14.59ZM105,8.31a9.81,9.81,0,0,0,.41-1.65,13.72,13.72,0,0,0,.18-2.29,6.87,6.87,0,0,0-.26-2.09c-.17-.55-.47-.83-.89-.83a.4.4,0,0,0-.38.27,5.05,5.05,0,0,0-.2,1.06l-.76,6.87a2.39,2.39,0,0,0,1-.2A2,2,0,0,0,105,8.31Zm17.51,6.28a9.86,9.86,0,0,1-1.67,3.94,2.93,2.93,0,0,1-2.25,1,.64.64,0,0,1-.51-.21,1.1,1.1,0,0,1-.19-.71c0-.19,0-.35,0-.49s0-.29,0-.44l1.64-14.32A4.53,4.53,0,0,1,120,1.75a1.47,1.47,0,0,1,.89-.49V.48h-4v.78a1.39,1.39,0,0,1,.75.32,1.59,1.59,0,0,1,.18.95c0,.2,0,.43,0,.68s0,.58-.1,1l-1.55,13.45a5.28,5.28,0,0,1-.35,1.63,1.1,1.1,0,0,1-.66.53v.77h7l.74-5.83Zm7.09,0a8.33,8.33,0,0,1-2,4.23,2.73,2.73,0,0,1-2,.76c-.29,0-.48-.08-.57-.26a1.45,1.45,0,0,1-.13-.67c0-.1,0-.23,0-.4s0-.33,0-.51l.83-7.32a1.58,1.58,0,0,1,1.44.58,4.42,4.42,0,0,1,.37,2.18c0,.14,0,.31,0,.52s0,.46,0,.74l.34.15.94-8.2-.35-.11a7.71,7.71,0,0,1-.87,2.66,2.56,2.56,0,0,1-1.71.51l.75-6.67A3.46,3.46,0,0,1,127,1.71c.09-.19.31-.29.64-.29a1.92,1.92,0,0,1,2,1.54,11.8,11.8,0,0,1,.3,3.09l.33.13.54-5.7H124v.78a1.31,1.31,0,0,1,.75.32,1.7,1.7,0,0,1,.17.95,6.75,6.75,0,0,1,0,.72c0,.27-.05.58-.09.92l-1.55,13.47a5.18,5.18,0,0,1-.35,1.61,1.12,1.12,0,0,1-.67.53v.77h7l.75-5.83Zm8.45,5.24v.72h-3.83v-.72a1.11,1.11,0,0,0,.77-.41,2.52,2.52,0,0,0,.23-1.31c0-.23,0-.77-.07-1.62,0-.17-.05-.9-.13-2.18h-2.71l-.74,3c0,.2-.09.43-.13.67a4.44,4.44,0,0,0-.06.71,1.27,1.27,0,0,0,.16.79,1.35,1.35,0,0,0,.65.3v.72h-2.47v-.72a1.66,1.66,0,0,0,.52-.54,7.25,7.25,0,0,0,.55-1.58L135.49.07h.33L137,17.23a8.87,8.87,0,0,0,.3,2.11A.9.9,0,0,0,138.08,19.83ZM135,13.12l-.47-7.3-1.86,7.3Zm7.88-4-1.09-2.13a6.38,6.38,0,0,1-.39-1,6.65,6.65,0,0,1-.23-1.82,6.93,6.93,0,0,1,.23-1.8q.33-1.26,1-1.26c.57,0,1,.53,1.3,1.57a10.87,10.87,0,0,1,.36,2.39l0,1,.33.1.51-6h-.38a2.26,2.26,0,0,1-.2.54.38.38,0,0,1-.34.22.54.54,0,0,1-.19-.05l-.22-.13-.32-.25a2.36,2.36,0,0,0-.41-.25,1.82,1.82,0,0,0-.7-.16c-.81,0-1.44.57-1.9,1.7a11.21,11.21,0,0,0-.68,4.12,12.36,12.36,0,0,0,1.55,5.58,10.74,10.74,0,0,1,1.54,4.78,7.8,7.8,0,0,1-.41,2.67c-.28.76-.67,1.15-1.17,1.15a1.07,1.07,0,0,1-.79-.4,3.78,3.78,0,0,1-.64-1.18,7.79,7.79,0,0,1-.42-1.95c-.05-.44-.08-1.14-.11-2.1l-.36-.06-.46,6.73h.38a6.32,6.32,0,0,1,.2-.83.31.31,0,0,1,.3-.24.21.21,0,0,1,.14,0,1.06,1.06,0,0,1,.22.18l.32.27a3,3,0,0,0,.69.44,1.72,1.72,0,0,0,.69.15c.92,0,1.64-.63,2.16-1.91a11.22,11.22,0,0,0,.78-4.28,12.2,12.2,0,0,0-.4-3.29A14.21,14.21,0,0,0,142.85,9.07Zm6.36-7.36c.09-.19.31-.29.64-.29a1.92,1.92,0,0,1,2,1.54,11.8,11.8,0,0,1,.3,3.09l.33.13L153,.48h-6.79v.78a1.31,1.31,0,0,1,.75.32,1.7,1.7,0,0,1,.17.95,6.75,6.75,0,0,1,0,.72c0,.27-.05.58-.09.92l-1.55,13.47a5.18,5.18,0,0,1-.35,1.61,1.12,1.12,0,0,1-.67.53v.77h7l.75-5.83-.31-.13a8.33,8.33,0,0,1-2,4.23,2.73,2.73,0,0,1-2,.76c-.29,0-.48-.08-.57-.26a1.45,1.45,0,0,1-.13-.67c0-.1,0-.23,0-.4s0-.33.05-.51l.83-7.32a1.58,1.58,0,0,1,1.44.58,4.42,4.42,0,0,1,.37,2.18c0,.14,0,.31,0,.52s0,.46,0,.74l.34.15.94-8.2-.35-.11a7.71,7.71,0,0,1-.87,2.66,2.56,2.56,0,0,1-1.71.51L149,2.78A3.46,3.46,0,0,1,149.21,1.71Z",opacity:1,strokeColor:"",fillColor:"#192760",width:152.969,height:21.152,stampFillColor:"#dce3ef",stampStrokeColor:""};break;case"ForComment":case"For Comment":t={iconName:"For Comment",pathdata:"M14.1.48l-.89,5.6L12.65,6a7.14,7.14,0,0,0-.48-3c-.54-1-1.6-1.54-3.19-1.54a1.37,1.37,0,0,0-1,.26,2.06,2.06,0,0,0-.42,1.08L6.35,9.28a6,6,0,0,0,2.73-.52,5.92,5.92,0,0,0,1.41-2.59l.58.1L9.52,14.34,9,14.2c0-.29,0-.54.05-.75s0-.38,0-.49a3.15,3.15,0,0,0-.55-2.09,3.07,3.07,0,0,0-2.32-.64L4.77,17.44c0,.13,0,.24-.06.35s0,.21,0,.31a1.23,1.23,0,0,0,.53,1.17,2,2,0,0,0,1,.19v.76H0v-.76a1.91,1.91,0,0,0,1.12-.54,3.56,3.56,0,0,0,.58-1.58L4.27,4.11c.05-.27.09-.51.12-.71a7.42,7.42,0,0,0,.1-1c0-.48-.1-.77-.29-.9A3.54,3.54,0,0,0,3,1.24V.48ZM28,7.11a17.42,17.42,0,0,1-2.57,9.07q-2.75,4.61-6.3,4.6a4.33,4.33,0,0,1-3.65-1.92,8.53,8.53,0,0,1-1.41-5.14,17.56,17.56,0,0,1,2.62-9.19Q19.43,0,22.82,0a4.48,4.48,0,0,1,3.72,1.92A8.46,8.46,0,0,1,28,7.11ZM25,4.6a5.72,5.72,0,0,0-.52-2.55,1.72,1.72,0,0,0-1.63-1c-1.74,0-3.2,2.17-4.39,6.53a32.66,32.66,0,0,0-1.35,8.26,8.24,8.24,0,0,0,.26,2.2c.33,1.18.94,1.77,1.82,1.77a2.88,2.88,0,0,0,2.25-1.29,16.48,16.48,0,0,0,2.1-4.93,37.09,37.09,0,0,0,1.07-4.83A28.26,28.26,0,0,0,25,4.6Zm15.83.16a6.49,6.49,0,0,1-.33,2,5.12,5.12,0,0,1-1.09,1.9,4.65,4.65,0,0,1-1.27,1,11.5,11.5,0,0,1-1.35.52c.07.3.12.49.14.57l1.62,6.66a3.79,3.79,0,0,0,.7,1.7,1.75,1.75,0,0,0,1.14.41v.76H36.13l-2.26-9.76h-.59L32,16.6l-.17,1,0,.25a2.62,2.62,0,0,0,0,.28q0,.8.27,1a3,3,0,0,0,1.25.32v.76H27.11v-.76a1.93,1.93,0,0,0,1.11-.52,3.54,3.54,0,0,0,.59-1.59L31.38,4.11c.06-.27.1-.51.13-.71a6,6,0,0,0,.1-1c0-.47-.1-.77-.29-.9a3.54,3.54,0,0,0-1.24-.3V.48h5.76a6.77,6.77,0,0,1,3,.53Q40.79,2,40.79,4.76Zm-3.16-.47a4.35,4.35,0,0,0-.44-2,1.54,1.54,0,0,0-1.48-.81.75.75,0,0,0-.63.26,2.78,2.78,0,0,0-.33,1.05L33.48,9.5a6.85,6.85,0,0,0,1.67-.2,2.55,2.55,0,0,0,1.49-1.13,6.37,6.37,0,0,0,.67-1.62A7.81,7.81,0,0,0,37.63,4.29ZM58.49,0a2.61,2.61,0,0,1-.32.63.55.55,0,0,1-.49.24A7,7,0,0,1,56.31.43,6.15,6.15,0,0,0,54.1,0q-3.47,0-6,3.92a16.73,16.73,0,0,0-2.51,9.24,8.73,8.73,0,0,0,1.64,5.57,5,5,0,0,0,7.19,1A8.89,8.89,0,0,0,57,16.37l-.64-.65a10.47,10.47,0,0,1-1.47,2.09A4,4,0,0,1,52,19.24a2.89,2.89,0,0,1-2.17-1.13c-.67-.75-1-2.15-1-4.2a22.2,22.2,0,0,1,1.62-8.29q1.8-4.54,4.23-4.55a2.33,2.33,0,0,1,2,1.14,6.16,6.16,0,0,1,.78,3.47c0,.14,0,.25,0,.32s0,.32,0,.73l.66.17L59.12,0ZM72.71,7.11a17.33,17.33,0,0,1-2.57,9.07c-1.82,3.07-3.93,4.6-6.3,4.6a4.34,4.34,0,0,1-3.65-1.92,8.53,8.53,0,0,1-1.4-5.14A17.55,17.55,0,0,1,61.4,4.53Q64.15,0,67.54,0a4.48,4.48,0,0,1,3.72,1.92A8.39,8.39,0,0,1,72.71,7.11Zm-3-2.51a5.72,5.72,0,0,0-.52-2.55,1.72,1.72,0,0,0-1.63-1c-1.74,0-3.2,2.17-4.39,6.53a32.66,32.66,0,0,0-1.35,8.26,8.24,8.24,0,0,0,.26,2.2c.33,1.18.94,1.77,1.82,1.77a2.85,2.85,0,0,0,2.25-1.29,16,16,0,0,0,2.1-4.93,34.08,34.08,0,0,0,1.07-4.83A28.26,28.26,0,0,0,69.68,4.6Zm17.5,13.62a4.63,4.63,0,0,1,.07-.75c0-.3.09-.59.15-.88L90,3.31a3.32,3.32,0,0,1,.7-1.67,2,2,0,0,1,1-.4V.48H87.23l-6.4,13.91L79.63.48H74.84v.76a3.29,3.29,0,0,1,1.2.21c.21.11.31.37.31.78a4.35,4.35,0,0,1-.07.75c0,.28-.11.61-.18,1L74,15a19.63,19.63,0,0,1-1,3.65,1.54,1.54,0,0,1-1.17.86v.76H76.2v-.76a2.31,2.31,0,0,1-1.09-.29,1.6,1.6,0,0,1-.58-1.43,8.8,8.8,0,0,1,.14-1.42c0-.37.14-.82.24-1.37L77,4.24l1.41,16.37H79L86.89,3.76,84.25,17.34A2.94,2.94,0,0,1,83.61,19a2.87,2.87,0,0,1-1.44.49v.76h6.54v-.76a3.39,3.39,0,0,1-1.23-.31Q87.18,19,87.18,18.22Zm17.73,0a4.63,4.63,0,0,1,.07-.75c0-.3.1-.59.16-.88l2.58-13.28a3.24,3.24,0,0,1,.69-1.67,2,2,0,0,1,1-.4V.48H105l-6.4,13.91L97.36.48H92.57v.76a3.29,3.29,0,0,1,1.2.21c.21.11.32.37.32.78A5.65,5.65,0,0,1,94,3c0,.28-.11.61-.19,1L91.69,15a19.63,19.63,0,0,1-1,3.65,1.54,1.54,0,0,1-1.17.86v.76h4.38v-.76a2.33,2.33,0,0,1-1.1-.29,1.6,1.6,0,0,1-.58-1.43,10.12,10.12,0,0,1,.14-1.42c.06-.37.14-.82.25-1.37L94.76,4.24l1.41,16.37h.59l7.86-16.85L102,17.34a3.1,3.1,0,0,1-.64,1.63,3,3,0,0,1-1.45.49v.76h6.55v-.76a3.46,3.46,0,0,1-1.24-.31Q104.91,19,104.91,18.22Zm11.52.3a6.56,6.56,0,0,1-3.25.75,1.27,1.27,0,0,1-.94-.26,1,1,0,0,1-.22-.66,3,3,0,0,1,0-.39,4.88,4.88,0,0,1,.08-.51l1.38-7.2a3.65,3.65,0,0,1,2.4.57,2.92,2.92,0,0,1,.62,2.15c0,.14,0,.31,0,.51s0,.45-.06.73l.58.15,1.55-8.08-.58-.1a5.92,5.92,0,0,1-1.44,2.61,6.32,6.32,0,0,1-2.85.51L115,2.74a2.44,2.44,0,0,1,.39-1.06,1.43,1.43,0,0,1,1.07-.28c1.63,0,2.71.5,3.25,1.51a7.37,7.37,0,0,1,.49,3l.56.13.89-5.6H110.31v.76a3.28,3.28,0,0,1,1.25.31c.19.13.28.44.28.94a4.83,4.83,0,0,1-.06.7c0,.28-.09.58-.16.92l-2.57,13.24a3.54,3.54,0,0,1-.59,1.59,1.93,1.93,0,0,1-1.11.52v.76H119l1.24-5.74-.51-.12A7.7,7.7,0,0,1,116.43,18.52ZM136.6,1.24V.48h-4.3v.76a2.5,2.5,0,0,1,1.14.33A1.8,1.8,0,0,1,134,3.05a10.58,10.58,0,0,1-.14,1.34c-.05.41-.13.87-.22,1.39L132,14.12,127.41.48h-4.22v.76a2.53,2.53,0,0,1,1,.24,1.82,1.82,0,0,1,.64,1.06l.1.3L122.55,15a19.54,19.54,0,0,1-1,3.61,1.59,1.59,0,0,1-1.18.9v.76h4.37v-.76a2.5,2.5,0,0,1-1.12-.32,1.67,1.67,0,0,1-.55-1.44,5.32,5.32,0,0,1,0-.79c0-.43.17-1.09.34-2l2.08-10.57L131,20.71h.52l2.91-15a24.72,24.72,0,0,1,.85-3.42,1.42,1.42,0,0,1,1-1Zm.48-.76-.81,5,.54.2a8.1,8.1,0,0,1,1.85-3.16,3.63,3.63,0,0,1,2.66-1.06l-3.08,15.85a3,3,0,0,1-.86,1.85,2.42,2.42,0,0,1-1.32.26v.76H143v-.76a4,4,0,0,1-1.41-.3c-.23-.13-.34-.45-.34-.95a2.26,2.26,0,0,1,0-.26c0-.09,0-.2,0-.33l.17-1,2.92-15.1a2.64,2.64,0,0,1,1.76.63c.74.7,1.12,2,1.15,3.94l.55.07L148.6.48Z",opacity:1,strokeColor:"",fillColor:"#192760",width:148.603,height:20.812,stampFillColor:"#dce3ef",stampStrokeColor:""};break;case"Void":t={iconName:"Void",pathdata:"M27.88,1.72a6.53,6.53,0,0,0-1.81,1.42L9,21.12H7.54L4.09,5.83A11.83,11.83,0,0,0,2.82,2Q2.3,1.4,0,1.26V.48H13.54v.78a11,11,0,0,0-2.37.18q-1.11.27-1.11,1.05a1.43,1.43,0,0,0,0,.29c0,.09,0,.19,0,.28l2.35,12,8.56-9a25.11,25.11,0,0,0,1.83-2.14,3.15,3.15,0,0,0,.82-1.68c0-.41-.28-.69-.84-.82a12.57,12.57,0,0,0-2.08-.15V.48h8.7v.78A7.11,7.11,0,0,0,27.88,1.72ZM57.37,7.23q0,4.85-5.56,9.22a21.41,21.41,0,0,1-13.62,4.67,14.41,14.41,0,0,1-7.89-1.95,6,6,0,0,1-3-5.23q0-4.92,5.66-9.34A21.12,21.12,0,0,1,46.2,0a15,15,0,0,1,8,2A6,6,0,0,1,57.37,7.23ZM50.82,4.68a3.46,3.46,0,0,0-1.13-2.59A4.93,4.93,0,0,0,46.17,1q-5.64,0-9.49,6.64c-1.94,3.36-2.92,6.16-2.92,8.4a4.27,4.27,0,0,0,.56,2.23q1.08,1.8,3.93,1.8a9.24,9.24,0,0,0,4.87-1.31,15.24,15.24,0,0,0,4.54-5A21.81,21.81,0,0,0,50,8.85,14.23,14.23,0,0,0,50.82,4.68ZM66,18.49a1.49,1.49,0,0,1,0-.28c0-.1,0-.2.08-.3l.35-1L72,3.41a2.94,2.94,0,0,1,1.25-1.62,6.79,6.79,0,0,1,2.4-.53V.48H62.19v.78a13.27,13.27,0,0,1,2.67.32.88.88,0,0,1,.64.95,2.38,2.38,0,0,1-.12.69c-.08.25-.2.57-.36.95L59.45,17.64a3,3,0,0,1-1.28,1.61,6.84,6.84,0,0,1-2.39.53v.77H69.27v-.77a13.72,13.72,0,0,1-2.67-.32A.9.9,0,0,1,66,18.49Zm38.25-9.67q0,4.59-5.15,8-5.73,3.77-15,3.76h-13v-.77a7.4,7.4,0,0,0,2.1-.41,3.08,3.08,0,0,0,1.57-1.75L80.28,4.17c.16-.38.28-.7.37-1a2.27,2.27,0,0,0,.12-.68.89.89,0,0,0-.64-.95,13.41,13.41,0,0,0-2.68-.32V.48H90.6q6.68,0,10.15,2.27A6.92,6.92,0,0,1,104.23,8.82ZM97.58,7a5.28,5.28,0,0,0-1.13-3.54q-1.77-2-6.14-2a4.24,4.24,0,0,0-2,.32,1.77,1.77,0,0,0-.74.84L81.35,17.73a1.72,1.72,0,0,0-.12.39,1.89,1.89,0,0,0,0,.31.89.89,0,0,0,.54.85,5.1,5.1,0,0,0,2,.26q8.07,0,11.68-5.5A12.61,12.61,0,0,0,97.58,7Z",opacity:1,strokeColor:"",fillColor:"#8a251a",width:104.233,height:21.123,stampFillColor:"#f6dedd",stampStrokeColor:""};break;case"PreliminaryResults":case"Preliminary Results":t={iconName:"Preliminary Results",pathdata:"M9.23,5.08q0-3-1.32-4.08A2.6,2.6,0,0,0,6.17.41H2v.78a1.5,1.5,0,0,1,.76.23,1.39,1.39,0,0,1,.28,1c0,.19,0,.43,0,.73s-.07.61-.1.91L1.17,17.56a4.76,4.76,0,0,1-.41,1.62A1.18,1.18,0,0,1,0,19.7v.78H4.25V19.7a1.77,1.77,0,0,1-.86-.31,1.5,1.5,0,0,1-.2-1c0-.09,0-.19,0-.3a1.36,1.36,0,0,1,0-.29l.12-1,.78-6L5,11h.41a3.21,3.21,0,0,0,2.78-1.6A7.57,7.57,0,0,0,9.23,5.08ZM7,6.32a10,10,0,0,1-.42,2,3,3,0,0,1-.68,1.21,1.63,1.63,0,0,1-1.13.36H4.53l-.27-.06,1-7.15a4.75,4.75,0,0,1,.22-1,.45.45,0,0,1,.46-.29,1,1,0,0,1,1,.8,6.22,6.22,0,0,1,.29,2.06A18,18,0,0,1,7,6.32ZM23.4,18.75a3.35,3.35,0,0,1-2.23.76.68.68,0,0,1-.64-.26,1.27,1.27,0,0,1-.16-.68c0-.09,0-.23,0-.39s0-.34.05-.51l.95-7.33a1.92,1.92,0,0,1,1.65.59,4,4,0,0,1,.42,2.18c0,.14,0,.31,0,.52s0,.46,0,.74l.4.15,1.07-8.21-.4-.1a7,7,0,0,1-1,2.65,3.15,3.15,0,0,1-2,.52l.85-6.67a3,3,0,0,1,.28-1.08c.11-.19.35-.28.73-.28a2.16,2.16,0,0,1,2.23,1.54A10.27,10.27,0,0,1,26,6l.39.13L27,.41H19.2v.78a1.67,1.67,0,0,1,.86.31,1.52,1.52,0,0,1,.19,1,6.58,6.58,0,0,1,0,.71c0,.28-.07.59-.11.93L18.33,17.56a4.59,4.59,0,0,1-.4,1.62,1.22,1.22,0,0,1-.74.51,1,1,0,0,1-.73-.4A5.08,5.08,0,0,1,16,17.56l-1.1-6.77c0-.08,0-.27-.1-.58a5.14,5.14,0,0,0,.92-.53,3.23,3.23,0,0,0,.87-1,6,6,0,0,0,.76-1.93,9.63,9.63,0,0,0,.22-2c0-1.87-.44-3.14-1.34-3.81a3.4,3.4,0,0,0-2-.54h-4v.78a1.78,1.78,0,0,1,.85.3,1.4,1.4,0,0,1,.19.91c0,.24,0,.56-.06,1,0,.21-.05.45-.09.73L9.31,17.56a4.53,4.53,0,0,1-.41,1.62,1.15,1.15,0,0,1-.75.52v.78h4.28V19.7a1.62,1.62,0,0,1-.86-.32,1.72,1.72,0,0,1-.18-1v-.29c0-.09,0-.18,0-.25l.12-1,.86-6.24h.4l1.55,9.92h10.8L26,14.65l-.35-.13A7.9,7.9,0,0,1,23.4,18.75ZM13.67,9.38a3.35,3.35,0,0,1-1.15.2l.87-6.87a4,4,0,0,1,.23-1.06.45.45,0,0,1,.43-.27,1.05,1.05,0,0,1,1,.83,6.14,6.14,0,0,1,.3,2.08,11.74,11.74,0,0,1-.21,2.29,9,9,0,0,1-.47,1.65A2,2,0,0,1,13.67,9.38ZM35,14.65l-.84,5.83h-8V19.7a1.24,1.24,0,0,0,.76-.52,4.73,4.73,0,0,0,.4-1.63L29.15,4.1q.08-.57.12-1c0-.26,0-.48,0-.68a1.42,1.42,0,0,0-.21-1,1.67,1.67,0,0,0-.85-.31V.41h4.56v.78a1.67,1.67,0,0,0-1,.49,4.17,4.17,0,0,0-.44,1.66L29.49,17.65c0,.16,0,.31,0,.45a3.47,3.47,0,0,0,0,.48,1,1,0,0,0,.21.72.8.8,0,0,0,.59.21,3.54,3.54,0,0,0,2.56-1.05,9.24,9.24,0,0,0,1.91-3.94Zm2.79,4.73a1.61,1.61,0,0,0,.85.32v.78H34.39V19.7a1.18,1.18,0,0,0,.76-.52,4.76,4.76,0,0,0,.41-1.62L37.33,4.1c.05-.38.09-.7.11-1a5.83,5.83,0,0,0,0-.68,1.5,1.5,0,0,0-.2-1,1.71,1.71,0,0,0-.85-.31V.41h4.29v.78a1.22,1.22,0,0,0-.77.52,4.9,4.9,0,0,0-.39,1.63L37.78,16.8l-.11,1,0,.29c0,.11,0,.2,0,.29A1.52,1.52,0,0,0,37.83,19.38Zm12.2,0a1.81,1.81,0,0,0,.85.31v.78h-4.5V19.7a1.64,1.64,0,0,0,1-.49,4,4,0,0,0,.44-1.66l1.81-13.8-5.4,17.12h-.4l-1-16.64L41.39,15.12c-.07.56-.13,1-.17,1.39-.06.61-.09,1.09-.09,1.45a2,2,0,0,0,.4,1.45,1.19,1.19,0,0,0,.75.29v.78h-3V19.7a1.21,1.21,0,0,0,.81-.87,29.47,29.47,0,0,0,.66-3.71L42.21,4c0-.38.09-.71.12-1a5.41,5.41,0,0,0,.05-.75c0-.42-.07-.69-.21-.8a1.69,1.69,0,0,0-.83-.21V.41h3.29l.83,14.14L49.85.41h3.07v.78a1.12,1.12,0,0,0-.69.41,4.08,4.08,0,0,0-.48,1.69L50,16.79c0,.29-.08.59-.11.89s0,.56,0,.76A1.41,1.41,0,0,0,50,19.39Zm5,0a1.61,1.61,0,0,0,.85.32v.78H51.56V19.7a1.18,1.18,0,0,0,.76-.52,4.76,4.76,0,0,0,.41-1.62L54.5,4.1c0-.38.09-.7.11-1a5.83,5.83,0,0,0,0-.68,1.5,1.5,0,0,0-.2-1,1.71,1.71,0,0,0-.85-.31V.41h4.29v.78a1.22,1.22,0,0,0-.77.52,4.9,4.9,0,0,0-.39,1.63L55,16.8l-.11,1,0,.29c0,.11,0,.2,0,.29A1.52,1.52,0,0,0,55,19.38ZM66.13,5.75,64.13,21h-.36L60,4.38,58.6,15.12c-.12.89-.2,1.55-.23,2a7.32,7.32,0,0,0,0,.81,2.17,2.17,0,0,0,.38,1.46,1.32,1.32,0,0,0,.77.32v.78h-3V19.7a1.26,1.26,0,0,0,.81-.91,29,29,0,0,0,.65-3.67L59.56,2.81,59.5,2.5a2,2,0,0,0-.45-1.06,1.21,1.21,0,0,0-.67-.25V.41h2.9L64.4,14.28,65.52,5.8c.07-.53.12-1,.16-1.41.06-.62.09-1.08.09-1.36a2.45,2.45,0,0,0-.34-1.51,1.39,1.39,0,0,0-.79-.33V.41h3v.78l-.21.06c-.29.08-.52.43-.68,1A34.22,34.22,0,0,0,66.13,5.75ZM83.27,1A3.41,3.41,0,0,0,81.21.41h-4v.78a1.74,1.74,0,0,1,.85.3c.14.13.2.43.2.91,0,.24,0,.56-.06,1,0,.21-.06.45-.09.73L76.38,17.56A4.53,4.53,0,0,1,76,19.18a1.18,1.18,0,0,1-.76.52v0a1,1,0,0,1-.67-.45,8.11,8.11,0,0,1-.34-2.12L72.83,0h-.38L67.11,17.64a6.42,6.42,0,0,1-.63,1.58,1.84,1.84,0,0,1-.59.54v.72h2.83v-.72a1.68,1.68,0,0,1-.75-.31,1.16,1.16,0,0,1-.18-.79,3.46,3.46,0,0,1,.07-.7,5.16,5.16,0,0,1,.15-.67l.84-3H72c.08,1.28.13,2,.13,2.18.06.85.08,1.39.08,1.61a2.26,2.26,0,0,1-.25,1.31,1.43,1.43,0,0,1-.88.42v.72H79.5V19.7a1.58,1.58,0,0,1-.86-.32,1.7,1.7,0,0,1-.19-1c0-.1,0-.2,0-.29a1.81,1.81,0,0,1,0-.25l.12-1,.85-6.24h.41l1.55,9.92h2.9V19.7a1,1,0,0,1-.79-.41A5.15,5.15,0,0,1,83,17.56l-1.11-6.77c0-.08,0-.27-.09-.58a5.53,5.53,0,0,0,.92-.53,3.52,3.52,0,0,0,.87-1,6.16,6.16,0,0,0,.75-1.93,9.67,9.67,0,0,0,.23-2C84.61,2.89,84.16,1.62,83.27,1ZM69.19,13.05l2.13-7.3.53,7.3Zm13-6.47a8.39,8.39,0,0,1-.46,1.65,2,2,0,0,1-1,1.15,3.29,3.29,0,0,1-1.14.2l.87-6.87a3.61,3.61,0,0,1,.23-1.06.45.45,0,0,1,.43-.27,1.05,1.05,0,0,1,1,.83,6.14,6.14,0,0,1,.3,2.08A11,11,0,0,1,82.22,6.58ZM90.48.41h3v.78a1.07,1.07,0,0,0-.55.41,6.13,6.13,0,0,0-.77,1.62l-2.72,8-.72,5.55c0,.22-.07.51-.1.86a7.29,7.29,0,0,0-.06.73,1.46,1.46,0,0,0,.29,1.07,1.61,1.61,0,0,0,.83.25v.78H85V19.7a1.56,1.56,0,0,0,.93-.39,3.7,3.7,0,0,0,.53-1.76l.85-6.45-1.26-8a6.07,6.07,0,0,0-.36-1.47.81.81,0,0,0-.7-.4V.41h4v.78a1.32,1.32,0,0,0-.76.23c-.15.12-.23.4-.23.84a4.46,4.46,0,0,0,0,.48c0,.19,0,.39.07.6l1,6.54,1.88-5.55c.1-.29.18-.55.24-.79a4.68,4.68,0,0,0,.14-1.11,1.35,1.35,0,0,0-.31-1,1.14,1.14,0,0,0-.66-.2Zm18.61,1.22c.1-.19.35-.28.73-.28a2.16,2.16,0,0,1,2.23,1.54A10.27,10.27,0,0,1,112.39,6l.38.13.62-5.7h-7.76v.78a1.67,1.67,0,0,1,.86.31,1.59,1.59,0,0,1,.19,1,6.58,6.58,0,0,1,0,.71c0,.28-.07.59-.11.93l-1.77,13.46a4.53,4.53,0,0,1-.41,1.62,1.17,1.17,0,0,1-.73.51,1,1,0,0,1-.73-.4,5.08,5.08,0,0,1-.49-1.73l-1.1-6.77c0-.08,0-.27-.1-.58a5.14,5.14,0,0,0,.92-.53,3.4,3.4,0,0,0,.88-1,6.16,6.16,0,0,0,.75-1.93,9.63,9.63,0,0,0,.22-2c0-1.87-.44-3.14-1.34-3.81a3.38,3.38,0,0,0-2-.54h-4v.78a1.78,1.78,0,0,1,.85.3,1.4,1.4,0,0,1,.19.91c0,.24,0,.56-.06,1,0,.21,0,.45-.09.73L95.74,17.56a4.53,4.53,0,0,1-.41,1.62,1.15,1.15,0,0,1-.75.52v.78h4.28V19.7a1.62,1.62,0,0,1-.86-.32,1.72,1.72,0,0,1-.18-1v-.29c0-.09,0-.18,0-.25l.12-1,.86-6.24h.4l1.55,9.92h10.8l.85-5.83-.35-.13a7.9,7.9,0,0,1-2.24,4.23,3.35,3.35,0,0,1-2.23.76.71.71,0,0,1-.65-.26,1.37,1.37,0,0,1-.15-.68c0-.09,0-.23,0-.39s0-.34.05-.51l.95-7.33a1.92,1.92,0,0,1,1.65.59,4,4,0,0,1,.42,2.18c0,.14,0,.31,0,.52s0,.46,0,.74l.4.15,1.07-8.21-.41-.1a7,7,0,0,1-1,2.65,3.15,3.15,0,0,1-2,.52l.85-6.67A3,3,0,0,1,109.09,1.63Zm-9,7.75a3.35,3.35,0,0,1-1.15.2l.87-6.87a4,4,0,0,1,.23-1.06.45.45,0,0,1,.43-.27,1.05,1.05,0,0,1,1,.83,6.14,6.14,0,0,1,.3,2.08,11.74,11.74,0,0,1-.21,2.29,9,9,0,0,1-.47,1.65A2,2,0,0,1,100.1,9.38ZM120.18.07h.43l-.59,6-.37-.1-.05-1a10.11,10.11,0,0,0-.41-2.39c-.34-1-.83-1.57-1.48-1.57s-.95.42-1.21,1.26a6.17,6.17,0,0,0-.25,1.8,5.92,5.92,0,0,0,.26,1.82,5.23,5.23,0,0,0,.44,1L118.19,9a12.6,12.6,0,0,1,1.12,2.57,10.75,10.75,0,0,1,.47,3.29,10,10,0,0,1-.9,4.29,2.76,2.76,0,0,1-2.46,1.91,2.17,2.17,0,0,1-.79-.15,3.28,3.28,0,0,1-.79-.44l-.36-.28-.26-.18a.38.38,0,0,0-.16,0,.34.34,0,0,0-.34.23,5.5,5.5,0,0,0-.23.84h-.43l.52-6.73.41.06c0,1,.07,1.66.12,2.09a7.13,7.13,0,0,0,.49,1.95,3.52,3.52,0,0,0,.73,1.18,1.25,1.25,0,0,0,.9.41c.57,0,1-.39,1.34-1.15a7.13,7.13,0,0,0,.47-2.68,9.86,9.86,0,0,0-1.76-4.77,11.23,11.23,0,0,1-1.77-5.58,9.8,9.8,0,0,1,.78-4.12A2.41,2.41,0,0,1,117.46,0a2.06,2.06,0,0,1,.79.16,1.9,1.9,0,0,1,.47.25l.37.25a1.15,1.15,0,0,0,.25.12.47.47,0,0,0,.22,0A.44.44,0,0,0,120,.62,2.6,2.6,0,0,0,120.18.07Zm10,2a26.67,26.67,0,0,0-.66,3.7l-.9,6.85a32.12,32.12,0,0,1-1.16,5.7c-.68,1.83-1.67,2.74-3,2.74a2.7,2.7,0,0,1-2.28-1.36,6.67,6.67,0,0,1-.92-3.77,19.46,19.46,0,0,1,.11-2c0-.46.15-1.26.3-2.42l1-7.36c0-.33.08-.64.11-.93s0-.55,0-.77a1.38,1.38,0,0,0-.2-.91,1.74,1.74,0,0,0-.85-.3V.41h4.43v.78a1.39,1.39,0,0,0-.91.47,4.25,4.25,0,0,0-.44,1.68l-1.18,9c-.11.8-.19,1.46-.25,2q-.15,1.37-.15,2a4.41,4.41,0,0,0,.48,2.27,1.44,1.44,0,0,0,1.29.78c.91,0,1.62-.82,2.13-2.48a30.62,30.62,0,0,0,.91-4.85L129,5.76c.1-.91.14-1.3.13-1.19a14.64,14.64,0,0,0,.13-1.6,2.12,2.12,0,0,0-.38-1.46,1.35,1.35,0,0,0-.77-.32V.41H131v.78A1.18,1.18,0,0,0,130.23,2.06Zm8.41,12.59-.84,5.83h-8V19.7a1.24,1.24,0,0,0,.76-.52,4.73,4.73,0,0,0,.4-1.63L132.75,4.1q.08-.57.12-1c0-.26,0-.48,0-.68,0-.51-.06-.83-.2-1a1.67,1.67,0,0,0-.85-.31V.41h4.56v.78a1.67,1.67,0,0,0-1,.49A4.17,4.17,0,0,0,135,3.34l-1.87,14.31c0,.16,0,.31-.05.45s0,.3,0,.48a1,1,0,0,0,.21.72.8.8,0,0,0,.59.21,3.54,3.54,0,0,0,2.56-1.05,9.24,9.24,0,0,0,1.91-3.94Zm7.72-8.56a7.63,7.63,0,0,0-.79-4,1.53,1.53,0,0,0-1.21-.64l-2,15.35-.12,1a2.47,2.47,0,0,0,0,.34,2.35,2.35,0,0,0,0,.26c0,.52.08.84.23,1a2,2,0,0,0,1,.3v.78h-4.76V19.7a1.18,1.18,0,0,0,.9-.26,3.75,3.75,0,0,0,.6-1.88l2.11-16.11a2.17,2.17,0,0,0-1.83,1.08,9.57,9.57,0,0,0-1.27,3.21l-.37-.2.56-5.13h7.91l-.52,5.76Zm3.41-3.79a6.17,6.17,0,0,0-.25,1.8,5.63,5.63,0,0,0,.26,1.82,5.23,5.23,0,0,0,.44,1L151.46,9a13.19,13.19,0,0,1,1.13,2.57,11.08,11.08,0,0,1,.46,3.29,10,10,0,0,1-.9,4.29,2.76,2.76,0,0,1-2.46,1.91,2.21,2.21,0,0,1-.79-.15,3.28,3.28,0,0,1-.79-.44l-.36-.28-.26-.18a.38.38,0,0,0-.16,0,.34.34,0,0,0-.34.23,5.5,5.5,0,0,0-.23.84h-.43l.52-6.73.41.06c0,1,.07,1.66.12,2.09a7.13,7.13,0,0,0,.49,1.95,3.52,3.52,0,0,0,.73,1.18,1.25,1.25,0,0,0,.9.41c.57,0,1-.39,1.34-1.15a7.13,7.13,0,0,0,.47-2.68,9.86,9.86,0,0,0-1.76-4.77,11.23,11.23,0,0,1-1.77-5.58,9.8,9.8,0,0,1,.78-4.12A2.41,2.41,0,0,1,150.73,0a2.06,2.06,0,0,1,.79.16,1.9,1.9,0,0,1,.47.25l.37.25a1.34,1.34,0,0,0,.24.12.56.56,0,0,0,.23,0,.44.44,0,0,0,.39-.21,2.6,2.6,0,0,0,.23-.55h.43l-.59,6-.37-.1,0-1a10.11,10.11,0,0,0-.41-2.39c-.34-1-.83-1.57-1.48-1.57S150,1.46,149.77,2.3Z",opacity:1,strokeColor:"",fillColor:"#192760",width:153.879,height:21.051,stampFillColor:"#dce3ef",stampStrokeColor:""};break;case"InformationOnly":case"Information Only":t={iconName:"Information Only",pathdata:"M4,19.14a2,2,0,0,0,1,.32v.76H0v-.76a1.42,1.42,0,0,0,.87-.52,4,4,0,0,0,.47-1.59l2-13.24c.06-.38.1-.69.13-1a5.73,5.73,0,0,0,0-.67c0-.5-.08-.81-.24-.94a2.2,2.2,0,0,0-1-.31V.48H7.26v.76a1.48,1.48,0,0,0-.88.52,4.14,4.14,0,0,0-.45,1.6l-2,13.24-.13,1c0,.1,0,.19,0,.3a2.72,2.72,0,0,0,0,.28A1.32,1.32,0,0,0,4,19.14ZM18.17,1.3l.24-.06V.48H15v.76a1.66,1.66,0,0,1,.9.33,2.08,2.08,0,0,1,.4,1.48,12.85,12.85,0,0,1-.1,1.34c-.05.41-.11.87-.18,1.39l-1.29,8.34L11.15.48H7.83v.76a1.69,1.69,0,0,1,.77.24,1.9,1.9,0,0,1,.51,1.06l.07.3L7.33,15a24.86,24.86,0,0,1-.76,3.61,1.32,1.32,0,0,1-.92.9v.76H9.09v-.76a1.67,1.67,0,0,1-.88-.32,1.92,1.92,0,0,1-.44-1.44,7.09,7.09,0,0,1,0-.79c0-.43.13-1.09.27-2L9.72,4.38,14,20.71h.41l2.3-15a28.78,28.78,0,0,1,.67-3.42C17.57,1.72,17.83,1.38,18.17,1.3ZM19.33.48v.76a2.32,2.32,0,0,1,1,.3c.15.13.23.42.23.9,0,.23,0,.55-.07,1,0,.2-.06.44-.1.71l-2,13.23a4,4,0,0,1-.46,1.58,1.39,1.39,0,0,1-.88.54v.76h4.89v-.76a1.36,1.36,0,0,1-.78-.19,1.39,1.39,0,0,1-.41-1.17c0-.1,0-.21,0-.31s0-.22,0-.35l1.09-7.21a2.09,2.09,0,0,1,1.83.64A3.81,3.81,0,0,1,24.1,13c0,.11,0,.28,0,.49s0,.46,0,.75l.45.14,1.22-8.07-.46-.1a6.19,6.19,0,0,1-1.11,2.59A3.89,3.89,0,0,1,22,9.28l1-6.54a2.43,2.43,0,0,1,.33-1.08.93.93,0,0,1,.76-.26,2.45,2.45,0,0,1,2.52,1.54A9,9,0,0,1,27,6l.44.13.7-5.6ZM39.06,7.11a21,21,0,0,1-2,9.07q-2.16,4.61-5,4.6a3.28,3.28,0,0,1-2.88-1.92,10.29,10.29,0,0,1-1.11-5.14,21.08,21.08,0,0,1,2.07-9.19Q32.31,0,35,0a3.37,3.37,0,0,1,2.93,1.92A10.14,10.14,0,0,1,39.06,7.11ZM36.68,4.6a7,7,0,0,0-.42-2.55A1.37,1.37,0,0,0,35,1c-1.37,0-2.52,2.17-3.46,6.53a40.81,40.81,0,0,0-1.07,8.26,10,10,0,0,0,.21,2.2c.26,1.18.74,1.77,1.43,1.77s1.24-.43,1.78-1.29a18.75,18.75,0,0,0,1.65-4.93,43.28,43.28,0,0,0,.85-4.83A36.93,36.93,0,0,0,36.68,4.6ZM61,19.15a2.25,2.25,0,0,0,1,.31v.76H56.84v-.76A2,2,0,0,0,58,19a3.6,3.6,0,0,0,.5-1.63L60.56,3.76l-6.2,16.85H53.9L52.78,4.24,51.12,15c-.09.55-.15,1-.2,1.37a13,13,0,0,0-.11,1.42,1.8,1.8,0,0,0,.46,1.43,1.54,1.54,0,0,0,.86.29v.76H45.49l-1.78-9.76h-.47l-1,6.14-.13,1,0,.25c0,.09,0,.19,0,.28a1.47,1.47,0,0,0,.22,1,2,2,0,0,0,1,.32v.76H38.37v-.76a1.42,1.42,0,0,0,.88-.52,4.21,4.21,0,0,0,.46-1.59l2-13.24c0-.27.08-.51.11-.71a8.23,8.23,0,0,0,.07-1,1.23,1.23,0,0,0-.23-.9,2.32,2.32,0,0,0-1-.3V.48h4.54A4.34,4.34,0,0,1,47.62,1c1,.65,1.54,1.9,1.54,3.75a7.78,7.78,0,0,1-.26,2A5.56,5.56,0,0,1,48,8.62a3.87,3.87,0,0,1-1,1,8.06,8.06,0,0,1-1.06.52c.05.3.09.49.11.57l1.27,6.66a4.58,4.58,0,0,0,.55,1.7,1.23,1.23,0,0,0,.83.39,1.31,1.31,0,0,0,.86-.84A23,23,0,0,0,50.36,15L52.05,4c.06-.37.11-.7.15-1a7.42,7.42,0,0,0,0-.75c0-.41-.08-.67-.25-.78a2.09,2.09,0,0,0-.94-.21V.48h3.77l1,13.91,5-13.91h3.51v.76a1.46,1.46,0,0,0-.79.4A3.71,3.71,0,0,0,63,3.31L61,16.59c0,.29-.09.58-.13.88s-.05.55-.05.75Q60.79,19,61,19.15Zm-15.14-11a7.46,7.46,0,0,0,.53-1.62,9.54,9.54,0,0,0,.25-2.26,5.31,5.31,0,0,0-.35-2,1.18,1.18,0,0,0-1.16-.81.54.54,0,0,0-.5.26,3.37,3.37,0,0,0-.26,1.05l-1,6.76a4.28,4.28,0,0,0,1.31-.2A2.17,2.17,0,0,0,45.89,8.17ZM73.21,19.51v.71h-5v-.71a1.61,1.61,0,0,0,1-.41,1.92,1.92,0,0,0,.3-1.29c0-.22,0-.75-.09-1.58,0-.17-.06-.89-.16-2.15H65.68l-1,3c-.06.2-.12.42-.17.66a3.4,3.4,0,0,0-.08.69q0,.62.21.78a1.9,1.9,0,0,0,.86.3v.71H62.29v-.71A2,2,0,0,0,63,19a6.47,6.47,0,0,0,.72-1.56L69.82.07h.43L71.83,17A6.77,6.77,0,0,0,72.22,19,1.23,1.23,0,0,0,73.21,19.51Zm-4.08-6.6-.61-7.18-2.44,7.18ZM82.52,6.14l.6-5.66H74l-.63,5,.42.2a8.71,8.71,0,0,1,1.46-3.16,2.57,2.57,0,0,1,2.1-1.06L75,17.35a3.36,3.36,0,0,1-.68,1.85,1.57,1.57,0,0,1-1,.26v.76H78.7v-.76a2.69,2.69,0,0,1-1.11-.3c-.18-.13-.27-.45-.27-.95a2.26,2.26,0,0,1,0-.26c0-.09,0-.2,0-.33l.14-1L79.8,1.5a1.87,1.87,0,0,1,1.39.63c.58.7.88,2,.91,3.94ZM88.84.48H83.92v.76a2.31,2.31,0,0,1,1,.31c.15.13.23.44.23.94a5.56,5.56,0,0,1,0,.67c0,.26-.08.57-.14,1l-2,13.24a4,4,0,0,1-.47,1.59,1.36,1.36,0,0,1-.87.52v.76H86.5v-.76a2,2,0,0,1-1-.32,1.32,1.32,0,0,1-.23-.94c0-.09,0-.18,0-.28s0-.2,0-.3l.13-1,2-13.24A4.09,4.09,0,0,1,88,1.76a1.45,1.45,0,0,1,.87-.52ZM99.11,7.11a21,21,0,0,1-2,9.07q-2.16,4.61-5,4.6a3.28,3.28,0,0,1-2.88-1.92,10.29,10.29,0,0,1-1.11-5.14,21.08,21.08,0,0,1,2.07-9.19C91.63,1.51,93.25,0,95,0A3.36,3.36,0,0,1,98,1.92,10,10,0,0,1,99.11,7.11ZM96.72,4.6a7.18,7.18,0,0,0-.41-2.55c-.28-.7-.7-1-1.29-1-1.37,0-2.52,2.17-3.46,6.53a40.7,40.7,0,0,0-1.06,8.26,10,10,0,0,0,.2,2.2c.26,1.18.74,1.77,1.43,1.77a2.2,2.2,0,0,0,1.78-1.29,18.75,18.75,0,0,0,1.65-4.93,41.1,41.1,0,0,0,.85-4.83A34.65,34.65,0,0,0,96.72,4.6Zm11.1-3.36a1.66,1.66,0,0,1,.9.33,2.08,2.08,0,0,1,.4,1.48,12.85,12.85,0,0,1-.1,1.34c0,.41-.11.87-.18,1.39l-1.29,8.34L104,.48h-3.33v.76a1.7,1.7,0,0,1,.78.24,2,2,0,0,1,.51,1.06l.07.3L100.13,15a24,24,0,0,1-.75,3.61,1.35,1.35,0,0,1-.93.9v.76h3.45v-.76a1.67,1.67,0,0,1-.88-.32,1.88,1.88,0,0,1-.44-1.44,7.09,7.09,0,0,1,0-.79c0-.43.13-1.09.27-2l1.64-10.57,4.29,16.33h.41l2.3-15a28.78,28.78,0,0,1,.67-3.42c.18-.59.44-.93.78-1l.23-.06V.48h-3.39ZM125,7.11a21,21,0,0,1-2,9.07c-1.45,3.07-3.1,4.6-5,4.6a3.28,3.28,0,0,1-2.87-1.92A10.29,10.29,0,0,1,114,13.72a21.22,21.22,0,0,1,2.06-9.19Q118.22,0,120.91,0a3.36,3.36,0,0,1,2.92,1.92A10,10,0,0,1,125,7.11ZM122.59,4.6a7,7,0,0,0-.41-2.55,1.37,1.37,0,0,0-1.28-1c-1.37,0-2.53,2.17-3.46,6.53a40.11,40.11,0,0,0-1.07,8.26,10.65,10.65,0,0,0,.2,2.2q.39,1.77,1.44,1.77a2.2,2.2,0,0,0,1.77-1.29,18.29,18.29,0,0,0,1.66-4.93,45.71,45.71,0,0,0,.85-4.83A36.53,36.53,0,0,0,122.59,4.6Zm14.26-3.3.24-.06V.48h-3.4v.76a1.74,1.74,0,0,1,.91.33,2.13,2.13,0,0,1,.4,1.48c0,.28,0,.73-.11,1.34,0,.41-.11.87-.18,1.39l-1.29,8.34L129.83.48h-3.32v.76a1.69,1.69,0,0,1,.77.24,1.9,1.9,0,0,1,.51,1.06l.07.3L126,15a27,27,0,0,1-.75,3.61,1.35,1.35,0,0,1-.93.9v.76h3.44v-.76a1.67,1.67,0,0,1-.88-.32,1.92,1.92,0,0,1-.44-1.44c0-.26,0-.52,0-.79.05-.43.13-1.09.27-2l1.65-10.57,4.29,16.33h.41l2.29-15a31.07,31.07,0,0,1,.67-3.42C136.25,1.72,136.52,1.38,136.85,1.3Zm8.52,13.06a8.55,8.55,0,0,1-2.19,3.87,4.44,4.44,0,0,1-2.94,1,1,1,0,0,1-.68-.21.9.9,0,0,1-.24-.7,3.4,3.4,0,0,1,0-.48c0-.14,0-.28,0-.44l2.15-14.08a3.69,3.69,0,0,1,.5-1.64,2.22,2.22,0,0,1,1.16-.48V.48H138v.76a2.2,2.2,0,0,1,1,.31c.16.13.24.44.24.94a5.73,5.73,0,0,1-.05.67c0,.26-.07.57-.13,1l-2,13.23a4,4,0,0,1-.47,1.6,1.36,1.36,0,0,1-.87.52v.76h9.16l1-5.74ZM151.79.48v.76a1.52,1.52,0,0,1,.76.2,1.21,1.21,0,0,1,.37,1,4.09,4.09,0,0,1-.17,1.09c-.07.24-.16.5-.27.79L150.32,9.8l-1.18-6.44a4.51,4.51,0,0,1-.08-.6,4.37,4.37,0,0,1,0-.46c0-.43.09-.71.27-.83a1.75,1.75,0,0,1,.87-.23V.48h-4.63v.76a.94.94,0,0,1,.8.4,5.08,5.08,0,0,1,.42,1.44L148.2,11l-1,6.35a3.35,3.35,0,0,1-.61,1.73,1.91,1.91,0,0,1-1.06.39v.76h5.32v-.76a2,2,0,0,1-.95-.25,1.29,1.29,0,0,1-.33-1.05,7.29,7.29,0,0,1,.06-.73q.06-.51.12-.84l.82-5.46,3.12-7.89a5.54,5.54,0,0,1,.89-1.59,1.28,1.28,0,0,1,.63-.41V.48Z",opacity:1,strokeColor:"",fillColor:"#192760",width:155.237,height:20.783,stampFillColor:"#dce3ef",stampStrokeColor:""}}if(t)return t.modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),this.currentStampAnnotation=t,t}},s.prototype.saveStampAnnotations=function(){var e=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_stamp");this.pdfViewerBase.isStorageExceed&&(e=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_stamp"]);for(var t=new Array,i=0;i<this.pdfViewerBase.pageCount;i++)t[i]=[];if(e&&!this.pdfViewer.annotationSettings.skipDownload)for(var n=JSON.parse(e),o=0;o<n.length;o++){var r=[],l=n[o];if(l){for(var d=0;l.annotations.length>d;d++)this.pdfViewer.annotationModule.updateModifiedDate(l.annotations[d]),l.annotations[d].bounds=JSON.stringify(this.pdfViewer.annotation.getBounds(l.annotations[d].bounds,l.pageIndex));r=l.annotations}t[l.pageIndex]=r}return JSON.stringify(t)},s.prototype.storeStampInSession=function(e,t){Math.round(JSON.stringify(window.sessionStorage).length/1024)+Math.round(JSON.stringify(t).length/1024)>4500&&(this.pdfViewerBase.isStorageExceed=!0,this.pdfViewer.annotationModule.clearAnnotationStorage());var o=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_stamp"),r=0;if(this.pdfViewerBase.isStorageExceed&&(o=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_stamp"]),o){this.pdfViewer.annotationModule.storeAnnotationCollections(t,e);var p=JSON.parse(o);this.pdfViewerBase.isStorageExceed||window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_stamp");var f=this.pdfViewer.annotationModule.getPageCollection(p,e);if(p[f])p[f].annotations.push(t),r=p[f].annotations.indexOf(t);else{var c={pageIndex:e,annotations:[]};c.annotations.push(t),r=c.annotations.indexOf(t),p.push(c)}var h=JSON.stringify(p);this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_stamp"]=h:window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_annotations_stamp",h)}else{this.pdfViewer.annotationModule.storeAnnotationCollections(t,e);var l={pageIndex:e,annotations:[]};l.annotations.push(t),r=l.annotations.indexOf(t);var d=[];d.push(l),h=JSON.stringify(d),this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_stamp"]=h:window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_annotations_stamp",h)}return r},s.prototype.updateSessionStorage=function(e,t,i){if(null!=t)for(var n=0;n<e.annotations.length;n++)if(e.annotations[n].id===t){e=e.annotations[n];break}"Rotate"===i&&(e=e.annotations[0]);var o=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_stamp");if(this.pdfViewerBase.isStorageExceed&&(o=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_stamp"]),o)for(var r=e.bounds,l=JSON.parse(o),d=0;d<l.length;d++)for(var h=l[d],p=0;p<h.annotations.length;p++)if(null!=l[d].annotations[p]&&l[d].annotations[p].randomId===e.id){this.pdfViewerBase.isStorageExceed||window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_stamp");var f=this.pdfViewer.annotationModule.getPageCollection(l,l[d].annotations[p].pageNumber);"delete"!==i?l[f]&&(l[d].annotations[p].opacity=e.wrapper.children[1]?e.wrapper.children[1].style.opacity:e.wrapper.children[0].style.opacity,l[d].annotations[p].rotateAngle=e.rotateAngle,l[d].annotations[p].bounds={left:r.x,top:r.y,width:e.wrapper.actualSize.width,height:e.wrapper.actualSize.height,right:r.right,bottom:r.bottom}):l[d].annotations.splice(p,1);var c=JSON.stringify(l);this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_stamp"]=c:window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_annotations_stamp",c);break}},s.prototype.saveImportedStampAnnotations=function(e,t){var o,i=null,n=!1,r=e.IsDynamic;if(e.AnnotationSettings=e.AnnotationSettings?e.AnnotationSettings:this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.stampSettings),e.allowedInteractions=this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(e),e.Subject&&r)o=this.retrieveDynamicStampAnnotation(e.Subject),n=!0;else if(e.Subject){if(o=this.retrievestampAnnotation(e.Subject),"Accepted"===e.Subject||"Rejected"===e.Subject){var l=ze(o.pathdata);o.pathdata=gt(l),n=!0}}else e.AnnotationSettings=e.AnnotationSettings?e.AnnotationSettings:this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.customStampSettings),i={stampAnnotationType:"image",author:e.Author,modifiedDate:e.ModifiedDate,subject:e.Subject,allowedInteractions:e.allowedInteractions,note:e.Note,strokeColor:e.StrokeColor,fillColor:e.FillColor,opacity:e.Opacity,stampFillcolor:e.FillColor,rotateAngle:e.RotateAngle,creationDate:e.ModifiedDate,pageNumber:t,icon:"",stampAnnotationPath:this.findImageData(e.Apperarance),randomId:"image",isDynamicStamp:this.pdfViewerBase.isDynamicStamp,dynamicText:" ",bounds:this.calculateImagePosition(e.Rect,!0),annotName:e.AnnotName,comments:this.pdfViewer.annotationModule.getAnnotationComments(e.Comments,e,e.Author),review:{state:e.State,stateModel:e.StateModel,author:e.Author,modifiedDate:e.ModifiedDate},shapeAnnotationType:"stamp",annotationSelectorSettings:this.getSettings(e),annotationSettings:e.annotationSettings,customData:this.pdfViewer.annotation.getCustomData(e),isPrint:e.isPrint,isCommentLock:e.IsCommentLock,isMaskedImage:e.IsMaskedImage,customStampName:e.CustomStampName},this.pdfViewer.annotationModule.storeAnnotations(t,i,"_annotations_stamp");o&&(i={stampAnnotationType:"path",author:e.Author,modifiedDate:e.ModifiedDate,subject:e.Subject,note:e.Note,strokeColor:e.StrokeColor,fillColor:e.FillColor,opacity:e.Opacity,stampFillcolor:o.stampFillColor,rotateAngle:e.RotateAngle,creationDate:e.ModifiedDate,pageNumber:t,icon:o.iconName,stampAnnotationPath:o.pathdata,randomId:"stamp",isDynamicStamp:!1,dynamicText:this.dynamicText,bounds:this.calculateImagePosition(e.Rect,!0),annotName:e.AnnotName,comments:this.pdfViewer.annotationModule.getAnnotationComments(e.Comments,e,e.Author),review:{state:e.State,stateModel:e.StateModel,author:e.Author,modifiedDate:e.ModifiedDate},shapeAnnotationType:"stamp",annotationSelectorSettings:this.getSettings(e),annotationSettings:e.AnnotationSettings,customData:this.pdfViewer.annotation.getCustomData(e),isPrint:e.isPrint,isCommentLock:e.IsCommentLock,isMaskedImage:e.IsMaskedImage,customStampName:""},n&&(i.dynamicText=this.findDynamicText(e.Apperarance,e.Subject),i.isDynamicStamp=!0),this.pdfViewer.annotationModule.storeAnnotations(t,i,"_annotations_stamp"))},s.prototype.updateStampAnnotationCollections=function(e,t){var n,o=e.IsDynamic;e.allowedInteractions=e.AllowedInteractions?e.AllowedInteractions:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(e);var r=this.stampImageData(e);if(e.Subject&&o&&"Draft"!==e.Subject&&!r)n=this.retrieveDynamicStampAnnotation(e.Subject);else{if(!e.Subject||r)return e.AnnotationSettings=e.AnnotationSettings?e.AnnotationSettings:this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.customStampSettings),e.IsLocked&&(e.AnnotationSettings.isLock=e.IsLocked),{stampAnnotationType:"image",author:e.Author,modifiedDate:e.ModifiedDate,allowedInteractions:e.allowedInteractions,note:e.Note,strokeColor:e.StrokeColor,fillColor:e.FillColor,opacity:e.Opacity,stampFillcolor:e.StampFillColor,rotateAngle:e.RotateAngle,pageNumber:t,randomId:"stamp",isDynamicStamp:this.pdfViewerBase.isDynamicStamp,dynamicText:this.dynamicText,annotationId:e.AnnotName,comments:this.pdfViewer.annotationModule.getAnnotationComments(e.Comments,e,e.Author),review:{state:e.State,stateModel:e.StateModel,author:e.Author,modifiedDate:e.ModifiedDate},shapeAnnotationType:"stamp",annotationSettings:e.AnnotationSettings,customData:this.pdfViewer.annotation.getCustomData(e),isPrint:e.isPrint,isMaskedImage:e.IsMaskedImage,customStampName:e.CustomStampName};n=this.retrievestampAnnotation(e.Subject)}if(n)return e.AnnotationSettings=e.AnnotationSettings?e.AnnotationSettings:this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.stampSettings),e.IsLocked&&(e.AnnotationSettings.isLock=e.IsLocked),e.allowedInteractions=e.AllowedInteractions?e.AllowedInteractions:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(e),{stampAnnotationType:"path",author:e.Author,allowedInteractions:e.allowedInteractions,modifiedDate:e.ModifiedDate,subject:e.Subject,note:e.Note,strokeColor:e.StrokeColor,fillColor:e.FillColor,opacity:e.Opacity,stampFillcolor:e.StampFillColor,rotateAngle:e.RotateAngle,creationDate:n.creationDate,pageNumber:t,icon:n.iconName,stampAnnotationPath:n.pathdata,randomId:"stamp",isDynamicStamp:this.pdfViewerBase.isDynamicStamp,dynamicText:this.dynamicText,bounds:{left:e.Rect.X,top:e.Rect.Y,width:e.Rect.Width,height:e.Rect.Height},annotationId:e.AnnotName,comments:this.pdfViewer.annotationModule.getAnnotationComments(e.Comments,e,e.Author),review:{state:e.State,stateModel:e.StateModel,author:e.Author,modifiedDate:e.ModifiedDate},shapeAnnotationType:"stamp",customData:this.pdfViewer.annotation.getCustomData(e),isPrint:e.isPrint,isMaskedImage:e.IsMaskedImage,customStampName:""}},s.prototype.stampImageData=function(e){var t=!1;if(e&&e.Apperarance)for(var i=0;i<e.Apperarance.length;i++)if(e.Apperarance[i].imagedata){t=!0;break}return t},s.prototype.findImageData=function(e){if(e)for(var t=0;t<e.length;t++){var n=e[t].imagedata;if(n)return n}return""},s.prototype.findDynamicText=function(e,t){var i="";if(e){for(var n=0;n<e.length;n++){var o=e[n];if("string"===o.type&&void 0!==o.text){var d=void 0;if(o.isImport)d=o.text;else{var h=o.text.split("(");d=h[1]?h[1].split(")")[0]:o.text}d.toLowerCase()!==t.toLowerCase()&&(i+=d)}}return i}return i},s.prototype.getAnnotations=function(e,t){var i,n=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_stamp");if(this.pdfViewerBase.isStorageExceed&&(n=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_stamp"]),n){var o=JSON.parse(n),r=this.pdfViewer.annotationModule.getPageCollection(o,e);i=o[r]?o[r].annotations:t}else i=t;return i},s.prototype.modifyInCollection=function(e,t,i){this.pdfViewerBase.updateDocumentEditedProperty(!0);var o=this.getAnnotations(t,null);if(null!=o&&i){for(var r=0;r<o.length;r++)i.annotName===o[r].annotName&&("bounds"===e&&(o[r].bounds={left:i.wrapper.bounds.x,top:i.wrapper.bounds.y,width:i.wrapper.bounds.width,height:i.wrapper.bounds.height},o[r].modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime()),this.pdfViewer.annotationModule.storeAnnotationCollections(o[r],t));this.manageAnnotations(o,t)}return null},s.prototype.manageAnnotations=function(e,t){var i=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_stamp");if(this.pdfViewerBase.isStorageExceed&&(i=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_stamp"]),i){var n=JSON.parse(i);this.pdfViewerBase.isStorageExceed||window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_stamp");var o=this.pdfViewer.annotationModule.getPageCollection(n,t);n[o]&&(n[o].annotations=e);var r=JSON.stringify(n);this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_stamp"]=r:window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_annotations_stamp",r)}},s.prototype.updateAddAnnotationDetails=function(e,t,i,n,o,r){t=e?e.offset?e.offset:{x:10,y:10}:(e={offset:{x:10,y:10},pageNumber:0,width:void 0,height:void 0}).offset,!n&&!o&&!r&&(n=Ft.Approved);var l=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),d=this.pdfViewer.annotation.createGUID(),h=i,p=[],f="",c="Stamp",u=[],m=!1,g=e.author?e.author:"Guest",v=this.pdfViewer.stampSettings.annotationSelectorSettings?this.pdfViewer.stampSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,y=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.stampSettings),b=this.pdfViewer.stampSettings.allowedInteractions?this.pdfViewer.stampSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions;if(y.isLock=!!e.isLock&&e.isLock,y.minHeight=e.minHeight?e.minHeight:0,y.minWidth=e.minWidth?e.minWidth:0,y.maxWidth=e.maxWidth?e.maxWidth:0,y.maxHeight=e.maxHeight?e.maxHeight:0,e.customStamps&&e.customStamps[0].customStampName)u[0]={imagedata:e.customStamps[0].customStampImageSource,isImport:!0},this.customStampName=e.customStamps[0].customStampName,this.pdfViewerBase.customStampCollection.push(e.customStamps[0]),c="Image",e.width=e.width?e.width:100,e.height=e.height?e.height:100;else if(n){var C;C=l.split(" "),f=n.toString(),u[0]={baseFontName:"Helvetica-BoldOblique",currentFontname:"95b303ab-d397-438a-83af-e2ff8a9900f1",fontSize:10,isImport:!0,text:"By "+g+" at "+C[1]+C[2]+" , "+C[0],type:"string"},m=!0,e.width=e.width?e.width:140,e.height=e.height?e.height:55}else o?(f=o.toString(),o==st.Accepted||o==st.Rejected?(e.width=e.width?e.width:35,e.height=e.height?e.height:35):o==st.SignHere?(e.width=e.width?e.width:110,e.height=e.height?e.height:30):o==st.Witness?(e.width=e.width?e.width:130,e.height=e.height?e.height:30):o==st.InitialHere&&(e.width=e.width?e.width:90,e.height=e.height?e.height:30)):r&&(f=r.toString(),r==Be.Final||r==Be.Draft?(e.width=e.width?e.width:110,e.height=e.height?e.height:30):r==Be.Void?(e.width=e.width?e.width:100,e.height=e.height?e.height:30):(e.width=e.width?e.width:130,e.height=e.height?e.height:30));return p[0]={AllowedInteractions:e.allowedInteractions?e.allowedInteractions:b,AnnotName:d,AnnotType:"stamp",AnnotationSelectorSettings:e.annotationSelectorSettings?e.annotationSelectorSettings:v,AnnotationSettings:y,Apperarance:u||null,Author:g,Comments:null,CreatedDate:l,CustomData:e.customData?e.customData:null,ExistingCustomData:null,FillColor:"#192760",Icon:0,IsCommentLock:!1,IsDynamic:m,IsLocked:!!e.isLock&&e.isLock,IsPrint:!e.isPrint||e.isPrint,ModifiedDate:"",Name:null,Note:"",Opacity:e.opacity?e.opacity:1,Rect:{X:t.x,Y:t.y,Width:e.width,Height:e.height,Left:t.x,Top:t.y,Location:{X:t.x,Y:t.y},Size:{Height:e.height,IsEmpty:!1,Width:e.width}},RotateAngle:0,StampAnnotationtype:c,State:"",StateModel:"",StrokeColor:"#dce3ef",Subject:f,matrix:null,CustomStampName:this.customStampName?this.customStampName:"",pageNumber:h},{stampAnnotations:p}},s.prototype.triggerAnnotationAdd=function(e,t){this.pdfViewer.fireAnnotationAdd(e.pageIndex,e.annotName,"Stamp",e.bounds,{opacity:e.opacity,borderColor:e.strokeColor,borderWidth:e.thickness,author:t.author,subject:t.subject,modifiedDate:t.modifiedDate,fillColor:e.fillColor,fontSize:e.fontSize,width:e.bounds.width,height:e.bounds.height,fontColor:e.fontColor,fontFamily:e.fontFamily,defaultText:e.dynamicText,fontStyle:e.font,textAlignment:e.textAlign})},s}(),_b=function(){function s(e,t){this.commentsCount=0,this.commentsreplyCount=0,this.commentContextMenu=[],this.isAccordionContainer=!0,this.isCreateContextMenu=!1,this.isCommentsSelected=!1,this.isAddAnnotationProgramatically=!1,this.isEditableElement=!1,this.isPageCommentsRendered=!1,this.isCommentsRendered=!1,this.isAnnotationRendered=!1,this.pdfViewer=e,this.pdfViewerBase=t,this.opacity=this.pdfViewer.stickyNotesSettings.opacity?this.pdfViewer.stickyNotesSettings.opacity:1}return s.prototype.renderStickyNotesAnnotations=function(e,t,i){if(e&&e.length>0)for(var n=0;n<e.length;n++){var o=e[n],r=!1,l=this.getAnnotations(t,null,"sticky");if(null!==l)for(var d=0;d<l.length;d++){var h=o.annotName?o.annotName:o.AnnotName,p=l[d].annotName?l[d].annotName:l[d].AnnotName;if(p&&h&&p===h){r=!0;break}}if(!r){o.annotationAddMode=this.pdfViewer.annotationModule.findAnnotationMode(o,t,o.AnnotType);var f,c=o.Bounds,u=o.Author;o.AnnotationSettings=o.AnnotationSettings?o.AnnotationSettings:this.pdfViewer.annotationModule.updateAnnotationSettings(o),o.allowedInteractions=o.AllowedInteraction?o.AllowedInteraction:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(o);var m,g;m="Imported Annotation"===o.annotationAddMode?o.IsPrint:o.AnnotationSettings.isPrint,o.IsLock&&(o.AnnotationSettings.isLock=o.IsLock),f={shapeAnnotationType:"sticky",author:u,modifiedDate:o.ModifiedDate,subject:o.Subject,note:o.Note,opacity:o.Opacity,state:o.State,stateModel:o.StateModel,pathData:"",comments:this.pdfViewer.annotationModule.getAnnotationComments(o.Comments,o,u),review:{state:o.State,stateModel:o.StateModel,modifiedDate:o.ModifiedDate,author:u},pageNumber:t,bounds:{left:o.Bounds.X,top:o.Bounds.Y,width:o.Bounds.Width,height:o.Bounds.Height,right:o.Bounds.Right,bottom:o.Bounds.Bottom},annotName:o.AnnotName,color:o.color,annotationSelectorSettings:this.getSettings(o),customData:this.pdfViewer.annotation.getCustomData(o),annotationSettings:o.AnnotationSettings,allowedInteractions:o.allowedInteractions,isPrint:m,isCommentLock:o.IsCommentLock},o.AnnotationSelectorSettings=o.AnnotationSelectorSettings?o.AnnotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,g={author:u,modifiedDate:f.modifiedDate,annotName:f.annotName,pageIndex:t,bounds:{x:c.Left,y:c.Top,width:c.Width,height:c.Height},strokeColor:"transparent",stampStrokeColor:"",data:this.setImageSource(),shapeAnnotationType:"StickyNotes",subject:f.subject,notes:f.note,opacity:f.opacity,id:f.annotName,fillColor:f.color,annotationSelectorSettings:o.AnnotationSelectorSettings,annotationSettings:f.annotationSettings,annotationAddMode:o.annotationAddMode,isPrint:m,isCommentLock:f.isCommentLock},i?this.drawStickyNotes(c.Left,c.Top,c.Width,c.Height,t,g,i):(this.pdfViewer.add(g),this.drawStickyNotes(c.Left,c.Top,c.Width,c.Height,t,g),this.pdfViewer.annotationModule.storeAnnotations(t,f,"_annotations_sticky")),this.isAddAnnotationProgramatically&&this.pdfViewer.fireAnnotationAdd(g.pageIndex,g.annotName,"StickyNotes",g.bounds,{opacity:g.opacity,borderColor:g.strokeColor,borderWidth:g.thickness,author:o.author,subject:o.subject,modifiedDate:o.modifiedDate,fillColor:g.fillColor,fontSize:g.fontSize,width:g.bounds.width,height:g.bounds.height,fontColor:g.fontColor,fontFamily:g.fontFamily,defaultText:g.dynamicText,fontStyle:g.font,textAlignment:g.textAlign})}}},s.prototype.getSettings=function(e){var t=this.pdfViewer.annotationSelectorSettings;return e.AnnotationSelectorSettings?t=e.AnnotationSelectorSettings:this.pdfViewer.stickyNotesSettings.annotationSelectorSettings&&(t=this.pdfViewer.stickyNotesSettings.annotationSelectorSettings),t},s.prototype.drawStickyNotes=function(e,t,i,n,o,r,l){var h,d=this,p=null,f=new Image,c=this;f.onload=function(){var u,m,g="Guest"!==d.pdfViewer.annotationSettings.author?d.pdfViewer.annotationSettings.author:d.pdfViewer.stickyNotesSettings.author;if(r)h={author:r.author,modifiedDate:r.modifiedDate,annotName:r.annotName,data:f.src,bounds:{x:e,y:t,width:i,height:n},subject:r.subject,notes:r.notes,opacity:r.opacity,id:r.annotName,shapeAnnotationType:"StickyNotes",strokeColor:"transparent",stampStrokeColor:"",pageIndex:r.pageIndex,isPrint:r.isPrint};else{m=d.pdfViewer.annotation.createGUID(),(u=c.addComments("sticky",o+1))&&(document.getElementById(u).id=m);var v=d.pdfViewer.stickyNotesSettings.annotationSelectorSettings?d.pdfViewer.stickyNotesSettings.annotationSelectorSettings:d.pdfViewer.annotationSelectorSettings,y=d.pdfViewer.stickyNotesSettings.isPrint;h={bounds:{x:e,y:t,width:i,height:n},pageIndex:o,data:f.src,modifiedDate:d.getDateAndTime(),shapeAnnotationType:"StickyNotes",strokeColor:"transparent",stampStrokeColor:"",annotName:m,id:m,opacity:d.opacity,isPrint:y};var b=d.pdfViewer.stickyNotesSettings.isLock?d.pdfViewer.stickyNotesSettings.isLock:d.pdfViewer.annotationSettings.isLock,C=d.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(r);p={author:g,allowedInteractions:C,modifiedDate:d.getDateAndTime(),subject:"Sticky Note",shapeAnnotationType:"sticky",pageNumber:o,note:"",opacity:d.opacity,pathData:"",state:"",stateModel:"",color:"rgba(255,255,0)",comments:[],annotName:m,bounds:{left:e,top:t,width:i,height:n},review:{state:"",stateModel:"",modifiedDate:"",author:g},annotationSelectorSettings:v,customData:d.pdfViewer.annotationModule.getData("sticky"),annotationSettings:{isLock:b},isPrint:y,isCommentLock:!1}}if(r||(c.pdfViewer.annotation.addAction(o,null,h,"Addition","",h,h),c.pdfViewer.add(h),c.pdfViewer.annotationModule.storeAnnotations(o,p,"_annotations_sticky")),c.pdfViewerBase.isAddComment){var S={left:h.bounds.x,top:h.bounds.y,width:h.bounds.width,height:h.bounds.height};d.pdfViewerBase.updateDocumentEditedProperty(!0),d.pdfViewer.fireAnnotationAdd(h.pageIndex,h.annotName,"StickyNotes",S,{opacity:h.opacity,author:g,modifiedDate:h.modifiedDate,subject:h.shapeAnnotationType})}if(l)c.pdfViewer.renderDrawing(l,o);else{var V=document.getElementById(c.pdfViewer.element.id+"_annotationCanvas_"+o);c.pdfViewer.renderDrawing(V,o)}a.AR.isDevice&&c.pdfViewer.select([h.id],h.annotationSelectorSettings),c.pdfViewerBase.isAddComment=!1},f.src=this.setImageSource()},s.prototype.setImageSource=function(){return"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcKICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIgogICB4bWxuczpjYz0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbnMjIgogICB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiCiAgIHhtbG5zOnN2Zz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgd2lkdGg9IjE2IgogICBoZWlnaHQ9IjE1IgogICB2aWV3Qm94PSIwIDAgNC4yMzMzMzMxIDMuOTY4NzQ5NyIKICAgdmVyc2lvbj0iMS4xIj4KICA8ZyBpZD0ibGF5ZXIxIj4KICAgIDxwYXRoCiAgICAgICBkPSJNIDMuODM4OSwwLjk0MTY3IEMgMy42NTM5LDAuNzAzNjcgMy40MTU5LDAuNTE3NjcgMy4xMjQ5LDAuMzg1NjcgMi44MDc5LDAuMjUzNjcgMi40ODk5LDAuMTczNjcgMi4xMTk5LDAuMTczNjcgMS43NDg5LDAuMTczNjcgMS40MzE5LDAuMjUzNjcgMS4xMTQyLDAuMzg1NjcgMC44MjMxNiwwLjUxNzY3IDAuNTg1MTYsMC43MDM2NyAwLjQwMDE2LDAuOTQxNjcgMC4yMTUxNiwxLjE3OTcgMC4xMzUxNiwxLjQxNzcgMC4xMzUxNiwxLjcwODcgMC4xMzUxNiwxLjk0NjcgMC4xODgxNiwyLjE1ODcgMC4zMjAxNiwyLjM0MzcgMC40NTMxNiwyLjU1NTcgMC42MTExNiwyLjcxMzcgMC44MjMxNiwyLjg0NjcgMC43OTIxNiwzLjE1NDcgMC42NTAxNiwzLjM4MjcgMC40NzkxNiwzLjU4NzcgMC40MjgxNiwzLjY2NzcgMC41MTcxNiwzLjc0MTcgMC42OTExNiwzLjcxOTcgMS4wODgyLDMuNjM5NyAxLjQwNDksMy40NTQ3IDEuNjQyOSwzLjE2MzcgMS44MDE5LDMuMTkwNyAxLjk2MDksMy4yMTY3IDIuMTE5OSwzLjIxNjcgMi40ODk5LDMuMjE2NyAyLjgwNzksMy4xMzc3IDMuMTI0OSwzLjAwNTcgMy40MTU5LDIuODcyNyAzLjY4MDksMi42ODc3IDMuODM4OSwyLjQ0OTcgNC4wMjQ5LDIuMjExNyA0LjEwMzksMS45NzM3IDQuMTAzOSwxLjY4MjcgNC4xMDM5LDEuNDE3NyA0LjAyNDksMS4xNTI3IDMuODM4OSwwLjk0MTY3IFoiCiAgICAgICBpZD0icGF0aDE1MjQiCiAgICAgICBzdHlsZT0iZmlsbDojZmZmNzAwO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDowLjI2NDU4MztzdHJva2Utb3BhY2l0eToxIiAvPgogICAgPHBhdGgKICAgICAgIGQ9Ik0gMy4wNDI5LDEuNDE2NyBIIDEuMTkxMiBDIDEuMTExMiwxLjQxNjcgMS4wNTkyLDEuMzYzNyAxLjA1OTIsMS4yODM3IDEuMDU5MiwxLjIwNDcgMS4xMTEyLDEuMTUxNyAxLjE5MTIsMS4xNTE3IEggMy4wNDI5IEMgMy4xMjE5LDEuMTUxNyAzLjE3NDksMS4yMDQ3IDMuMTc0OSwxLjI4MzcgMy4xNzQ5LDEuMzYzNyAzLjEyMTksMS40MTY3IDMuMDQyOSwxLjQxNjcgWiIKICAgICAgIGlkPSJwYXRoMTUzNiIKICAgICAgIHN0eWxlPSJzdHJva2Utd2lkdGg6MC4yNjQ1ODMiIC8+CiAgICA8cGF0aAogICAgICAgZD0iTSAzLjA0MjksMS45NDU3IEggMS4xOTEyIEMgMS4xMTEyLDEuOTQ1NyAxLjA1OTIsMS44OTI3IDEuMDU5MiwxLjgxMjcgMS4wNTkyLDEuNzMzNyAxLjExMTIsMS42ODA3IDEuMTkxMiwxLjY4MDcgSCAzLjA0MjkgQyAzLjEyMTksMS42ODA3IDMuMTc0OSwxLjczMzcgMy4xNzQ5LDEuODEyNyAzLjE3NDksMS44OTI3IDMuMTIxOSwxLjk0NTcgMy4wNDI5LDEuOTQ1NyBaIgogICAgICAgaWQ9InBhdGgxNTQwIgogICAgICAgc3R5bGU9InN0cm9rZS13aWR0aDowLjI2NDU4MyIgLz4KICA8L2c+Cjwvc3ZnPgo="},s.prototype.createRequestForComments=function(){var e,t=this,o=t.pdfViewerBase.pageCount;t.isCommentsRendered||(20<o?o=20:t.isPageCommentsRendered=!0),this.isCommentsRendered?e={pageStartIndex:20..toString(),pageEndIndex:o.toString(),hashId:this.pdfViewerBase.hashId,action:"RenderAnnotationComments",elementId:this.pdfViewer.element.id,uniqueId:t.pdfViewerBase.documentId}:(e={pageStartIndex:(0).toString(),pageEndIndex:o.toString(),hashId:this.pdfViewerBase.hashId,action:"RenderAnnotationComments",elementId:this.pdfViewer.element.id,uniqueId:t.pdfViewerBase.documentId},t.isCommentsRendered=!0),this.pdfViewerBase.jsonDocumentId&&(e.documentId=this.pdfViewerBase.jsonDocumentId);var r=this.pdfViewer.serviceUrl+"/"+this.pdfViewer.serverActionSettings.renderComments;t.commentsRequestHandler=new Ue(t.pdfViewer),t.commentsRequestHandler.url=r,t.commentsRequestHandler.mode=!0,t.commentsRequestHandler.responseType="text",t.commentsRequestHandler.send(e),t.commentsRequestHandler.onSuccess=function(l){var d=l.data;if(d){if("object"!=typeof d)try{"object"!=typeof(d=JSON.parse(d))&&(d=JSON.parse(d)),"object"!=typeof d&&(t.pdfViewerBase.onControlError(500,d,this.pdfViewer.serverActionSettings.renderComments),d=null)}catch(u){t.pdfViewerBase.onControlError(500,d,this.pdfViewer.serverActionSettings.renderComments),d=null}if(d){var h=!1;if(t.pdfViewerBase.annotationComments?t.pdfViewerBase.annotationComments=d.annotationDetails:(t.pdfViewerBase.annotationComments=d.annotationDetails,h=!0),d.annotationDetails&&d.uniqueId===t.pdfViewerBase.documentId){t.pdfViewer.fireAjaxRequestSuccess(this.pdfViewer.serverActionSettings.renderComments,d),t.isAnnotationRendered=!0;var p=void 0;if(t.pdfViewerBase.documentAnnotationCollections)p=t.updateAnnotationsInDocumentCollections(t.pdfViewerBase.annotationComments,t.pdfViewerBase.documentAnnotationCollections);else{var f=t.pdfViewerBase.createAnnotationsCollection();p=t.updateAnnotationsInDocumentCollections(t.pdfViewerBase.annotationComments,f)}t.pdfViewerBase.annotationComments=p,t.pdfViewerBase.documentAnnotationCollections=p;for(var c=d.startPageIndex;c<d.endPageIndex;c++)d.annotationDetails[c]&&t.renderAnnotationCollections(d.annotationDetails[c],c,h);t.isPageCommentsRendered||(t.isPageCommentsRendered=!0,t.createRequestForComments())}}}},t.commentsRequestHandler.onFailure=function(l){this.pdfViewer.fireAjaxRequestFailed(l.status,l.statusText)},t.commentsRequestHandler.onError=function(l){t.pdfViewer.fireAjaxRequestFailed(l.status,l.statusText,t.pdfViewer.serverActionSettings.renderComments)}},s.prototype.updateAnnotationsInDocumentCollections=function(e,t){for(var i=0;i<this.pdfViewerBase.pageCount;i++)if(e[i]&&t[i]){if(e[i].textMarkupAnnotation&&0!==e[i].textMarkupAnnotation.length&&t[i].textMarkupAnnotation)for(var n=0;n<e[i].textMarkupAnnotation.length;n++)this.updateDocumentAnnotationCollections(e[i].textMarkupAnnotation[n],t[i].textMarkupAnnotation);if(e[i].shapeAnnotation&&0!==e[i].shapeAnnotation.length&&t[i].shapeAnnotation)for(n=0;n<e[i].shapeAnnotation.length;n++)this.updateDocumentAnnotationCollections(e[i].shapeAnnotation[n],t[i].shapeAnnotation);if(e[i].measureShapeAnnotation&&0!==e[i].measureShapeAnnotation.length&&t[i].measureShapeAnnotation)for(n=0;n<e[i].measureShapeAnnotation.length;n++)this.updateDocumentAnnotationCollections(e[i].measureShapeAnnotation[n],t[i].measureShapeAnnotation);if(e[i].stampAnnotations&&0!==e[i].stampAnnotations.length&&t[i].stampAnnotations)for(n=0;n<e[i].stampAnnotations.length;n++)this.updateDocumentAnnotationCollections(e[i].stampAnnotations[n],t[i].stampAnnotations);if(e[i].stickyNotesAnnotation&&0!==e[i].stickyNotesAnnotation.length&&t[i].stickyNotesAnnotation)for(n=0;n<e[i].stickyNotesAnnotation.length;n++)this.updateDocumentAnnotationCollections(e[i].stickyNotesAnnotation[n],t[i].stickyNotesAnnotation);if(e[i].freeTextAnnotation&&0!==e[i].freeTextAnnotation.length&&t[i].freeTextAnnotation)for(n=0;n<e[i].freeTextAnnotation.length;n++)this.updateDocumentAnnotationCollections(e[i].freeTextAnnotation[n],t[i].freeTextAnnotation);if(e[i].signatureAnnotation&&0!==e[i].signatureAnnotation.length&&t[i].signatureAnnotation)for(n=0;n<e[i].signatureAnnotation.length;n++)this.updateDocumentAnnotationCollections(e[i].signatureAnnotation[n],t[i].signatureAnnotation);if(e[i].signatureInkAnnotation&&0!==e[i].signatureInkAnnotation.length&&t[i].signatureInkAnnotation)for(n=0;n<e[i].signatureInkAnnotation.length;n++)this.updateDocumentAnnotationCollections(e[i].signatureInkAnnotation[n],t[i].signatureInkAnnotation)}return t},s.prototype.updateDocumentAnnotationCollections=function(e,t){if(0===t.length)t.push(e);else{for(var i=!1,n=0;n<t.length;n++)if(e.AnnotName&&t[n].AnnotName&&e.AnnotName===t[n].AnnotName){i=!0;break}i||t.push(e)}},s.prototype.renderAnnotationCollections=function(e,t,i){var n=[];if(e.textMarkupAnnotation&&0!==e.textMarkupAnnotation.length)for(var o=0;o<e.textMarkupAnnotation.length;o++)this.pdfViewer.dateTimeFormat&&(e.textMarkupAnnotation[o].ModifiedDate=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.getDateAndTime(e.textMarkupAnnotation[o].ModifiedDate)),n.push(e.textMarkupAnnotation[o]),this.updateCollections(this.pdfViewer.annotationModule.textMarkupAnnotationModule.updateTextMarkupAnnotationCollections(e.textMarkupAnnotation[o],t));if(e.shapeAnnotation&&0!==e.shapeAnnotation.length)for(o=0;o<e.shapeAnnotation.length;o++)this.pdfViewer.dateTimeFormat&&(e.shapeAnnotation[o].ModifiedDate=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.getDateAndTime(e.shapeAnnotation[o].ModifiedDate)),n.push(e.shapeAnnotation[o]),this.updateCollections(this.pdfViewer.annotationModule.shapeAnnotationModule.updateShapeAnnotationCollections(e.shapeAnnotation[o],t));if(e.measureShapeAnnotation&&0!==e.measureShapeAnnotation.length)for(o=0;o<e.measureShapeAnnotation.length;o++)this.pdfViewer.dateTimeFormat&&(e.measureShapeAnnotation[o].ModifiedDate=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.getDateAndTime(e.measureShapeAnnotation[o].ModifiedDate)),n.push(e.measureShapeAnnotation[o]),this.updateCollections(this.pdfViewer.annotationModule.measureAnnotationModule.updateMeasureAnnotationCollections(e.measureShapeAnnotation[o],t));if(e.stampAnnotations&&0!==e.stampAnnotations.length)for(o=0;o<e.stampAnnotations.length;o++)this.pdfViewer.dateTimeFormat&&(e.stampAnnotations[o].ModifiedDate=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.getDateAndTime(e.stampAnnotations[o].ModifiedDate)),n.push(e.stampAnnotations[o]),this.updateCollections(this.pdfViewer.annotationModule.stampAnnotationModule.updateStampAnnotationCollections(e.stampAnnotations[o],t));if(e.stickyNotesAnnotation&&0!==e.stickyNotesAnnotation.length)for(o=0;o<e.stickyNotesAnnotation.length;o++)this.pdfViewer.dateTimeFormat&&(e.stickyNotesAnnotation[o].ModifiedDate=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.getDateAndTime(e.stickyNotesAnnotation[o].ModifiedDate)),n.push(e.stickyNotesAnnotation[o]),this.updateCollections(this.updateStickyNotesAnnotationCollections(e.stickyNotesAnnotation[o],t));if(e.freeTextAnnotation&&0!==e.freeTextAnnotation.length)for(o=0;o<e.freeTextAnnotation.length;o++)this.pdfViewer.dateTimeFormat&&(e.freeTextAnnotation[o].ModifiedDate=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.getDateAndTime(e.freeTextAnnotation[o].ModifiedDate)),n.push(e.freeTextAnnotation[o]),this.updateCollections(this.pdfViewer.annotationModule.freeTextAnnotationModule.updateFreeTextAnnotationCollections(e.freeTextAnnotation[o],t));if(e.signatureAnnotation&&0!==e.signatureAnnotation.length)for(o=0;o<e.signatureAnnotation.length;o++)this.pdfViewer.dateTimeFormat&&(e.signatureAnnotation[o].ModifiedDate=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.getDateAndTime(e.signatureAnnotation[o].ModifiedDate)),this.updateCollections(this.pdfViewerBase.signatureModule.updateSignatureCollections(e.signatureAnnotation[o],t),!0);if(e.signatureInkAnnotation&&0!==e.signatureInkAnnotation.length)for(o=0;o<e.signatureInkAnnotation.length;o++)this.pdfViewer.dateTimeFormat&&(e.signatureInkAnnotation[o].ModifiedDate=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.getDateAndTime(e.signatureInkAnnotation[o].ModifiedDate)),n.push(e.signatureInkAnnotation[o]),this.updateCollections(this.pdfViewer.annotationModule.inkAnnotationModule.updateInkCollections(e.signatureInkAnnotation[o],t));if(this.pdfViewer.toolbarModule&&this.renderAnnotationComments(n,t),i)for(o=0;o<this.pdfViewerBase.renderedPagesList.length;o++)this.pdfViewerBase.renderAnnotations(this.pdfViewerBase.renderedPagesList[o],!1)},s.prototype.updateCollections=function(e,t){var n,i=!1;if((n=t?this.pdfViewer.signatureCollection:this.pdfViewer.annotationCollection)&&e)for(var o=0;o<n.length;o++)if(t){if(n[o].signatureName===e.signatureName){i=!0;break}}else if(n[o].annotationId===e.annotationId){i=!0;break}!i&&e&&(t?this.pdfViewer.signatureCollection.push(e):this.pdfViewer.annotationCollection.push(e))},s.prototype.renderAnnotationComments=function(e,t){if(t+=1,e&&0!==e.length){this.createPageAccordion(t);for(var i=0;i<e.length;i++)e[i].AnnotName&&1===e[i].AnnotName.split("freeText").length&&this.createCommentControlPanel(e[i],t);var n=document.querySelectorAll(".e-pv-new-comments-div");if(n)for(var o=0;o<n.length;o++)n[o].style.display="none"}},s.prototype.initializeAcccordionContainer=function(){var e=(0,a.az)("div",{id:this.pdfViewer.element.id+"_commentsPanelText",className:"e-pv-comments-panel-text"});(0,a.xr)()?this.pdfViewer._dotnetInstance.invokeMethodAsync("GetLocaleText","PdfViewer_NoCommentsYet").then(function(i){e.textContent=i}):e.textContent=this.pdfViewer.localeObj.getConstant("No Comments Yet"),this.updateCommentPanelTextTop(),this.pdfViewerBase.navigationPane.commentsContentContainer.appendChild(e),this.accordionContentContainer=(0,a.az)("div",{id:this.pdfViewer.element.id+"_accordionContentContainer",className:"e-pv-accordion-content-container"}),this.pdfViewerBase.navigationPane.commentsContentContainer.appendChild(this.accordionContentContainer),this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant("Export Annotations")],!1),this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant("Export XFDF")],!1)},s.prototype.updateCommentPanelTextTop=function(){var e=document.getElementById(this.pdfViewer.element.id+"_commentsPanelText");this.pdfViewerBase.navigationPane.commentPanelContainer&&this.pdfViewerBase.navigationPane.commentPanelContainer.clientHeight&&"none"!==e.style.display&&(e.style.paddingTop=this.pdfViewerBase.navigationPane.commentPanelContainer.clientHeight/2-47+"px",e.style.paddingLeft=this.pdfViewerBase.navigationPane.commentPanelContainer.clientWidth/3+"px")},s.prototype.createPageAccordion=function(e){if(null===document.getElementById(this.pdfViewer.element.id+"_accordionContainer"+e))return this.accordionContent=(0,a.az)("div",{id:this.pdfViewer.element.id+"_accordioncontent"+e}),this.accordionContent.style.zIndex="1000",this.accordionPageContainer=(0,a.az)("div",{id:this.pdfViewer.element.id+"_accordionPageContainer"+e,className:"e-pv-accordion-page-container"}),this.accordionPageContainer.appendChild(this.accordionContent),this.pdfViewerBase.viewerMainContainer.appendChild(this.accordionPageContainer),this.accordionContainer=(0,a.az)("div",{id:this.pdfViewer.element.id+"_accordionContainer"+e,className:"e-pv-accordion-container"}),new re.UQ({items:[{header:this.pdfViewer.localeObj.getConstant("Page")+" "+e,expanded:!0,content:"#"+this.pdfViewer.element.id+"_accordioncontent"+e}]}).appendTo(this.accordionContainer),this.accordionContainer.style.order="pageIndex",this.alignAccordionContainer(this.accordionContainer,e),document.getElementById(this.pdfViewer.element.id+"_commentsPanelText")&&(this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant("Export Annotations")],!0),this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant("Export XFDF")],!0),document.getElementById(this.pdfViewer.element.id+"_commentsPanelText").style.display="none"),document.getElementById(this.pdfViewer.element.id+"_accordionContentContainer")&&(document.getElementById(this.pdfViewer.element.id+"_accordionContentContainer").style.display="block"),this.accordionContainer},s.prototype.alignAccordionContainer=function(e,t){var i=!0;if(this.accordionContentContainer){if(this.isAccordionContainer)this.accordionContentContainer.appendChild(e),i=!1;else for(var n=1;n<=this.pdfViewerBase.pageCount;n++){var o=document.getElementById(this.pdfViewer.element.id+"_accordionContainer"+n);if(o&&t<n){this.accordionContentContainer.insertBefore(e,o),i=!1;break}}i&&(this.accordionContentContainer.appendChild(e),i=!1),this.isAccordionContainer=!1}},s.prototype.updateCommentPanelScrollTop=function(e){var t=document.getElementById(this.pdfViewer.element.id+"_accordionContainer"+e);t&&(this.pdfViewerBase.navigationPane.commentsContentContainer.scrollTop=t.offsetTop+t.clientTop-35)},s.prototype.createCommentControlPanel=function(e,t,i,n,o){var r=document.getElementById(this.pdfViewer.element.id+"_accordioncontent"+t);if(r){var l=document.getElementById(this.pdfViewer.element.id+"_accordionContainer"+t);l&&l.ej2_instances[0].expandItem(!0),this.commentsContainer=(0,a.az)("div",{id:this.pdfViewer.element.id+"commentscontainer"+t+"_"+this.commentsCount,className:"e-pv-comments-container"}),this.commentsContainer.accessKey=t.toString()+"_"+this.commentsCount;var d=!1;if(e){if(this.commentsContainer.id=e.AnnotName,e.AnnotName)for(var h=0;h<r.childElementCount;h++)if(r.children[h].id===e.AnnotName){d=!0,o&&(document.getElementById(r.children[h].id).remove(),d=!1);break}this.commentsContainer.setAttribute("name",e.Name&&"freeText"===e.Name?"freeText":e.AnnotType)}i&&this.commentsContainer.setAttribute("name",i),this.commentsContainer.addEventListener("mousedown",this.commentsAnnotationSelect.bind(this));var f=(0,a.az)("div",{id:this.pdfViewer.element.id+"_commentdiv"+t+"_"+this.commentsCount,className:"e-pv-comments-div"});this.commentsCount=this.commentsCount+1,this.commentsContainer.appendChild(f),this.updateCommentPanelScrollTop(t),d||r.appendChild(this.commentsContainer);var c=void 0;e?("null"===(c=this.commentsContainer.getAttribute("name"))&&(c=e.AnnotationType),this.createTitleContainer(f,c,t,e.Subject,e.ModifiedDate,e.Author)):(c=this.commentsContainer.getAttribute("name"),this.createTitleContainer(f,c,t,n));var u=(0,a.az)("div",{id:this.pdfViewer.element.id+"_commenttextbox"+t+"_"+this.commentsCount,className:"e-pv-comment-textbox"}),m=new go({mode:"Inline",type:"Text",model:{placeholder:this.pdfViewer.localeObj.getConstant("Add a comment")+".."},emptyText:"",editableOn:"EditIconClick",saveButton:{content:this.pdfViewer.localeObj.getConstant("Post"),cssClass:"e-outline",disabled:!0},cancelButton:{content:this.pdfViewer.localeObj.getConstant("Cancel"),cssClass:"e-outline"},submitOnEnter:!0});e&&(!(0,a.le)(e.Note)||!(0,a.le)(e.Text))&&(m.created=function(){setTimeout(function(){m.element.querySelector(".e-editable-value").innerText=(0,a.le)(e.Note)?(0,a.le)(e.Text)?"":e.Text:e.Note})},m.beginEdit=function(){m.value=m.valueEle.innerText}),m.appendTo(u);var g=document.querySelectorAll(".e-editable-inline");for(h=0;h<g.length;h++)g[h].style.display="none";if(e||(m.enableEditMode=!0),u.addEventListener("keydown",function(S){m.element.querySelector(".e-btn-save")&&(m.element.querySelector(".e-btn-save").ej2_instances[0].disabled=""===S.srcElement.value)}),m.actionSuccess=this.createCommentDiv.bind(this,m),f.appendChild(u),e){if(m.value=(0,a.le)(e.Note)?(0,a.le)(e.Text)?"":e.Text:e.Note,this.checkIslockProperty(e)&&null==e.Comments&&this.createCommentDiv(this.commentsContainer),"freeText"===e.Name&&(m.value=e.MarkupText),e.State){var y=(0,a.az)("div",{id:this.pdfViewer.element.id+"status_container",className:"e-pv-status-container"}),b=(0,a.az)("div",{id:this.pdfViewer.element.id+"status_div",className:"e-pv-status-div"}),C=(0,a.az)("span",{id:this.pdfViewer.element.id+"status_icon"});b.appendChild(C),y.appendChild(b),f.appendChild(y),this.updateStatusContainer(e.State,C,b,y)}if(e.Comments){for(h=0;h<e.Comments.length;h++)this.renderComments(e.Comments[h],this.commentsContainer);" "!==e.Note&&""!==e.Note&&null!==e.Note&&this.createCommentDiv(this.commentsContainer)}}return this.isNewcommentAdded=!0,f.addEventListener("click",this.commentsDivClickEvent.bind(this)),f.addEventListener("mouseover",this.commentDivMouseOver.bind(this)),f.addEventListener("mouseleave",this.commentDivMouseLeave.bind(this)),f.addEventListener("mouseout",this.commentDivMouseLeave.bind(this)),f.addEventListener("focusout",this.commentDivMouseLeave.bind(this)),u.addEventListener("dblclick",this.openEditorElement.bind(this)),u.addEventListener("focusin",this.commentDivFocus.bind(this)),this.commentsContainer.id}return""},s.prototype.commentDivFocus=function(e){var t=this,i=this.pdfViewerBase.currentPageNumber;setTimeout(function(){t.updateScrollPosition(i)},500)},s.prototype.updateScrollPosition=function(e){var t=document.getElementById(this.pdfViewer.element.id+"_accordionContainer"+e);if(t&&this.isNewcommentAdded){var i=0,n=document.querySelectorAll(".e-editable-inline");n[0]&&(i=n[0].getBoundingClientRect().height);var o=t.offsetTop+t.clientTop+i;this.pdfViewerBase.navigationPane.commentsContentContainer.scrollTop<o&&(this.pdfViewerBase.navigationPane.commentsContentContainer.scrollTop=o),this.isNewcommentAdded=!1}},s.prototype.updateCommentsScrollTop=function(e){var t=document.getElementById(this.pdfViewer.element.id+"_accordionContainer"+this.pdfViewerBase.currentPageNumber),i=document.querySelector(".e-pv-comments-border"),n=0;t&&i&&(n=i.getBoundingClientRect().height,this.pdfViewerBase.navigationPane.commentsContentContainer.scrollTop=e?t.offsetTop+i.offsetTop+n/4:t.offsetTop+i.offsetTop-70)},s.prototype.createCommentDiv=function(e){var i,n,t=this,o=(0,a.az)("div",{id:this.pdfViewer.element.id+"_newcommentdiv"+this.commentsCount,className:"e-pv-new-comments-div"});e.localName?i=e:(i=e.valueEle.parentElement.parentElement.parentElement.parentElement,n=e.valueEle.parentElement.parentElement.previousSibling.childNodes[1]);var r=new go({mode:"Inline",type:"Text",value:"",editableOn:"Click",model:{placeholder:this.pdfViewer.localeObj.getConstant("Add a reply")+".."},emptyText:this.pdfViewer.localeObj.getConstant("Add a reply"),saveButton:{content:this.pdfViewer.localeObj.getConstant("Post"),cssClass:"e-outline",disabled:!0},cancelButton:{content:this.pdfViewer.localeObj.getConstant("Cancel"),cssClass:"e-outline"},submitOnEnter:!0});if(r.appendTo(o),o.lastChild.firstChild.click(),o.addEventListener("keydown",function(l){r.element.querySelector(".e-btn-save")&&(""!==l.srcElement.value?r.element.querySelector(".e-btn-save").ej2_instances[0].disabled=!1:(r.element.querySelector(".e-btn-save").ej2_instances[0].disabled=!0,r.enableEditMode=!0))}),e.valueEle){if(null!=e.value&&""!==e.value&&" "!==e.value){if(this.pdfViewer.selectedItems.annotations[0]&&"FreeText"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType)this.modifyTextProperty(e.value,e.prevValue,e.valueEle.parentNode.parentNode.parentNode.parentNode.id);else try{this.modifyTextProperty(e.value,e.prevValue,e.valueEle.parentNode.parentNode.parentNode.parentNode.id)}catch(l){this.modifyTextProperty(e.value,e.prevValue)}this.updateModifiedDate(n)}1===e.valueEle.parentElement.parentElement.parentElement.parentElement.childElementCount&&null!=e.value&&""!==e.value&&" "!==e.value&&(i.appendChild(o),setTimeout(function(){t.updateCommentsScrollTop(!0)},50))}else i.appendChild(o),setTimeout(function(){t.updateCommentsScrollTop(!0)},50);r.actionSuccess=this.saveCommentDiv.bind(this,r)},s.prototype.saveCommentDiv=function(e,t){var i,n,o,r;if(t.name&&""!==e.value?(i=e.valueEle.parentElement.parentElement.parentElement,o=e.valueEle.parentElement.parentElement,r=e.value):(o=(i=e).lastChild,r=t),i&&o){i.removeChild(o);var l=(0,a.az)("div",{id:this.pdfViewer.element.id+"_replytextbox"});this.commentsreplyCount=this.commentsreplyCount+1;var d=(0,a.az)("div",{id:this.pdfViewer.element.id+"replyDiv"+this.commentsreplyCount,className:"e-pv-reply-div"});d.id=this.pdfViewer.annotation.createGUID(),n=this.getAuthorName(this.pdfViewer.selectedItems.annotations[0],i),this.createReplyDivTitleContainer(d,null,n),d.addEventListener("mouseover",this.commentDivMouseOver.bind(this)),d.addEventListener("mouseleave",this.commentDivMouseLeave.bind(this)),d.addEventListener("click",this.commentDivOnSelect.bind(this)),l.addEventListener("dblclick",this.openEditorElement.bind(this)),d.style.border="1px",d.style.borderColor="black",d.style.zIndex=1002;var h=new go({mode:"Inline",type:"Text",emptyText:"",editableOn:"EditIconClick",model:{placeholder:this.pdfViewer.localeObj.getConstant("Add a reply")+".."},value:r,saveButton:{content:this.pdfViewer.localeObj.getConstant("Post"),cssClass:"e-outline"},cancelButton:{content:this.pdfViewer.localeObj.getConstant("Cancel"),cssClass:"e-outline"}});h.created=function(){setTimeout(function(){h.element.querySelector(".e-editable-value").innerText=r})},h.beginEdit=function(){h.value=h.valueEle.innerText},h.appendTo(l),h.actionSuccess=this.modifyProperty.bind(this,h),d.appendChild(l),d.style.paddingLeft="24px",i.appendChild(d),l.addEventListener("keydown",function(p){h.element.querySelector(".e-btn-save")&&(h.element.querySelector(".e-btn-save").ej2_instances[0].disabled=""===p.srcElement.value)}),d.addEventListener("click",this.commentsDivClickEvent.bind(this)),d.addEventListener("dblclick",this.commentsDivDoubleClickEvent.bind(this)),this.createCommentDiv(d.parentElement),this.modifyCommentsProperty(r,d.id,i.id)}},s.prototype.renderComments=function(e,t,i,n,o){var r,l=(0,a.az)("div",{id:this.pdfViewer.element.id+"_replytextbox"});this.commentsreplyCount=this.commentsreplyCount+1;var d=(0,a.az)("div",{id:"replyDiv"+this.commentsreplyCount,className:"e-pv-reply-div"});i?(d.id=e.annotName,r=e.author):(d.id=e.AnnotName,r=e.Author),d.style.border="1px",d.style.borderColor="black",r||(r=t.getAttribute("author")),this.createReplyDivTitleContainer(d,i?void 0!==e.modifiedDate?e.modifiedDate:null:e.ModifiedDate,r),d.addEventListener("mouseover",this.commentDivMouseOver.bind(this)),d.addEventListener("mouseleave",this.commentDivMouseLeave.bind(this)),d.addEventListener("click",this.commentDivOnSelect.bind(this)),l.addEventListener("dblclick",this.openEditorElement.bind(this));var h=new go({mode:"Inline",type:"Text",emptyText:"",editableOn:"EditIconClick",model:{placeholder:this.pdfViewer.localeObj.getConstant("Add a reply")+".."},value:"",saveButton:{content:this.pdfViewer.localeObj.getConstant("Post"),cssClass:"e-outline"},cancelButton:{content:this.pdfViewer.localeObj.getConstant("Cancel"),cssClass:"e-outline"}});if(h.value=i?e.note:e.Note,h.created=function(){setTimeout(function(){h.element.querySelector(".e-editable-value").innerText=i?e?e.note:"":e?e.Note:""})},h.beginEdit=function(){h.value=h.valueEle.innerText},h.appendTo(l),d.appendChild(l),i&&(e.State=e.state),e.State){var p=(0,a.az)("div",{id:this.pdfViewer.element.id+"status_container",className:"e-pv-status-container"}),f=(0,a.az)("div",{id:this.pdfViewer.element.id+"status_div",className:"e-pv-status-div"}),c=(0,a.az)("span",{id:this.pdfViewer.element.id+"status_icon"});f.appendChild(c),p.appendChild(f),d.appendChild(p),this.updateStatusContainer(e.State,c,f,p)}if(d.style.paddingLeft="24px",l.addEventListener("keydown",function(m){h.element.querySelector(".e-btn-save")&&(h.element.querySelector(".e-btn-save").ej2_instances[0].disabled=""===m.srcElement.value)}),i)if(o)t.appendChild(d);else{var u=document.getElementById(n);e.position?u.insertBefore(d,u.childNodes[e.position]):u&&(u.childElementCount>1?u.insertBefore(d,u.childNodes[u.childElementCount-1]):t.appendChild(d))}else t.appendChild(d);d.addEventListener("click",this.commentsDivClickEvent.bind(this)),d.addEventListener("dblclick",this.commentsDivDoubleClickEvent.bind(this)),h.actionSuccess=this.modifyProperty.bind(this,h)},s.prototype.createCommentsContainer=function(e,t,i){var n=document.getElementById(this.pdfViewer.element.id+"_accordionContainer"+t);if(!n){var o=document.getElementById(this.pdfViewer.element.id+"_accordionPageContainer"+t);o&&o.parentElement.removeChild(o),(n=this.createPageAccordion(t))&&n.ej2_instances[0].expandItem(!0)}var r=document.getElementById(this.pdfViewer.element.id+"_accordioncontent"+t);this.commentsContainer=(0,a.az)("div",{id:this.pdfViewer.element.id+"commentscontainer"+t+"_"+this.commentsCount,className:"e-pv-comments-container"}),this.commentsContainer.accessKey=t.toString()+"_"+this.commentsCount,e&&(this.commentsContainer.id=e.annotName?e.annotName:e.annotationId),this.commentsContainer.addEventListener("mousedown",this.commentsAnnotationSelect.bind(this));var l=(0,a.az)("div",{id:this.pdfViewer.element.id+"_commentdiv"+t+"_"+this.commentsCount,className:"e-pv-comments-div"});if(this.commentsCount=this.commentsCount+1,this.commentsContainer.appendChild(l),this.updateCommentPanelScrollTop(t),e&&r&&(e.position||0===e.position?r.insertBefore(this.commentsContainer,r.children[e.position]):r.appendChild(this.commentsContainer)),e&&r)if(e.indent)this.commentsContainer.setAttribute("name","shape_measure"),this.createTitleContainer(l,"shape_measure",t,e.subject,e.modifiedDate,e.author);else if("sticky"===e.shapeAnnotationType||"stamp"===e.shapeAnnotationType){var d=this.createTitleContainer(l,e.shapeAnnotationType,t,null,e.modifiedDate,e.author);this.commentsContainer.setAttribute("name",d),"sticky"===d&&(i||this.addStickyNotesAnnotations(t-1,e))}else"textMarkup"===e.shapeAnnotationType?(this.commentsContainer.setAttribute("name","textMarkup"),this.createTitleContainer(l,"textMarkup",t,e.subject,e.modifiedDate,e.author)):"FreeText"===e.shapeAnnotationType?(e.note=e.dynamicText,this.commentsContainer.setAttribute("name","freetext"),this.createTitleContainer(l,"freeText",t,e.subject,e.modifiedDate)):"Ink"===e.shapeAnnotationType?(e.note=e.dynamicText,this.commentsContainer.setAttribute("name","ink"),this.createTitleContainer(l,"ink",t,e.subject,e.modifiedDate)):(this.commentsContainer.setAttribute("name","shape"),this.createTitleContainer(l,"shape",t,"Line"===e.shapeAnnotationType?e.subject:e.shapeAnnotationType,e.modifiedDate,e.author));var h=(0,a.az)("div",{id:this.pdfViewer.element.id+"_commenttextbox",className:"e-pv-comment-textbox"}),p=new go({mode:"Inline",type:"Text",model:{placeholder:this.pdfViewer.localeObj.getConstant("Add a comment")+".."},emptyText:"",editableOn:"EditIconClick",saveButton:{content:this.pdfViewer.localeObj.getConstant("Post"),cssClass:"e-outline",disabled:!0},cancelButton:{content:this.pdfViewer.localeObj.getConstant("Cancel"),cssClass:"e-outline"},submitOnEnter:!0});p.appendTo(h);for(var f=document.querySelectorAll(".e-editable-inline"),c=0;c<f.length;c++)f[c].style.display="none";if(h.addEventListener("keydown",function(v){p.element.querySelector(".e-btn-save")&&(p.element.querySelector(".e-btn-save").ej2_instances[0].disabled=""===v.srcElement.value)}),p.actionSuccess=this.createCommentDiv.bind(this,p),l.appendChild(h),e){if(p.value=e.note,e.state){var u=(0,a.az)("div",{id:this.pdfViewer.element.id+"status_container",className:"e-pv-status-container"}),m=(0,a.az)("div",{id:this.pdfViewer.element.id+"status_div",className:"e-pv-status-div"}),g=(0,a.az)("span",{id:this.pdfViewer.element.id+"status_icon"});m.appendChild(g),u.appendChild(m),l.appendChild(u),this.updateStatusContainer(e.state,g,m,u)}if(e.comments){for(c=0;c<e.comments.length;c++)this.renderComments(e.comments[c],this.commentsContainer,!0,null,!0);e.comments.length>0&&this.createCommentDiv(this.commentsContainer)}}return l.addEventListener("click",this.commentsDivClickEvent.bind(this)),l.addEventListener("mouseover",this.commentDivMouseOver.bind(this)),l.addEventListener("mouseleave",this.commentDivMouseLeave.bind(this)),l.addEventListener("mouseout",this.commentDivMouseLeave.bind(this)),l.addEventListener("focusout",this.commentDivMouseLeave.bind(this)),h.addEventListener("dblclick",this.openEditorElement.bind(this)),this.commentsContainer.id},s.prototype.modifyProperty=function(e){var t=e.element.parentElement.id,i=e.element.parentElement.parentElement.id;this.updateModifiedDate(e.element.previousSibling.firstChild),this.modifyCommentsProperty(e.value,t,i,e.prevValue)},s.prototype.createTitleContainer=function(e,t,i,n,o,r,l){var f,d=this.getAnnotationType(t),h=(0,a.az)("div",{id:this.pdfViewer.element.id+"_commentTitleConatiner_"+i+"_"+this.commentsCount,className:"e-pv-comment-title-container"}),p=(0,a.az)("span",{id:this.pdfViewer.element.id+"_commenttype_icon"+i+"_"+this.commentsCount});p.style.opacity="0.6",this.updateCommentIcon(p,d,n),f=r||this.pdfViewer.annotationModule.updateAnnotationAuthor(d,n),p.style.padding="8px",p.style.cssFloat="left",h.appendChild(p);var c=(0,a.az)("div",{id:this.pdfViewer.element.id+"_commentTitle"+i+"_"+this.commentsCount,className:"e-pv-comment-title"});c.textContent=o?f+" - "+this.convertUTCDateToLocalDate(o):f+" - "+this.setModifiedDate(),h.appendChild(c);var u=(0,a.az)("button",{id:this.pdfViewer.element.id+"_more-options",className:"e-pv-more-options-button e-btn",attrs:{tabindex:"-1"}});u.style.visibility="hidden",u.style.zIndex="1001",u.setAttribute("type","button");var m=(0,a.az)("span",{id:this.pdfViewer.element.id+"_more-options_icon",className:"e-pv-more-icon e-pv-icon"});u.appendChild(m),m.style.opacity="0.87",h.appendChild(u),e.appendChild(h);var g=e.parentElement;if(g){var v=this.pdfViewer.annotationModule.updateAnnotationAuthor(d,n);g.setAttribute("author",v)}return this.isCreateContextMenu||this.createCommentContextMenu(),this.isCreateContextMenu=!0,h.addEventListener("dblclick",this.openTextEditor.bind(this)),u.addEventListener("mouseup",this.moreOptionsClick.bind(this)),d},s.prototype.createReplyDivTitleContainer=function(e,t,i){var n=(0,a.az)("div",{id:this.pdfViewer.element.id+"_replyTitleConatiner",className:"e-pv-reply-title-container"}),o=(0,a.az)("div",{id:this.pdfViewer.element.id+"_replyTitle",className:"e-pv-reply-title"});o.textContent=t?i+" - "+this.setExistingAnnotationModifiedDate(t):i+" - "+this.setModifiedDate(),n.appendChild(o);var r=(0,a.az)("button",{id:this.pdfViewer.element.id+"_more-options",className:"e-pv-more-options-button e-btn",attrs:{tabindex:"-1"}});r.style.visibility="hidden",r.style.zIndex="1001",r.setAttribute("type","button");var l=(0,a.az)("span",{id:this.pdfViewer.element.id+"_more-options_icon",className:"e-pv-more-icon e-pv-icon"});r.appendChild(l),l.style.opacity="0.87",n.appendChild(r),e.appendChild(n),n.addEventListener("dblclick",this.openTextEditor.bind(this)),r.addEventListener("mouseup",this.moreOptionsClick.bind(this))},s.prototype.updateCommentIcon=function(e,t,i){"sticky"===t?e.className="e-pv-comment-icon e-pv-icon":"stamp"===t?e.className="e-pv-stamp-icon e-pv-icon":"shape"===t?e.className="Line"===i?"e-pv-shape-line-icon e-pv-icon":"LineWidthArrowHead"===i||"Arrow"===i?"e-pv-shape-arrow-icon e-pv-icon":"Circle"===i||"Ellipse"===i||"Oval"===i?"e-pv-shape-circle-icon e-pv-icon":"Rectangle"===i||"Square"===i?"e-pv-shape-rectangle-icon e-pv-icon":"Polygon"===i?"e-pv-shape-pentagon-icon e-pv-icon":"e-pv-annotation-shape-icon e-pv-icon":"measure"===t?e.className="Distance"===i||"Distance calculation"===i?"e-pv-calibrate-distance-icon e-pv-icon":"Perimeter"===i||"Perimeter calculation"===i?"e-pv-calibrate-perimeter-icon e-pv-icon":"Radius"===i||"Radius calculation"===i?"e-pv-calibrate-radius-icon e-pv-icon":"Area"===i||"Area calculation"===i?"e-pv-calibrate-area-icon e-pv-icon":"Volume"===i||"Volume calculation"===i?"e-pv-calibrate-volume-icon e-pv-icon":"e-pv-annotation-calibrate-icon e-pv-icon":"textMarkup"===t?e.className="Highlight"===i?"e-pv-highlight-icon e-pv-icon":"Underline"===i?"e-pv-underline-icon e-pv-icon":"Strikethrough"===i?"e-pv-strikethrough-icon e-pv-icon":"e-pv-annotation-icon e-pv-icon":"freeText"===t?e.className="e-pv-freetext-icon e-pv-icon":("ink"===t||"Ink"===i)&&(e.className="e-pv-inkannotation-icon e-pv-icon")},s.prototype.updateStatusContainer=function(e,t,i,n){"Accepted"===e?(i.style.backgroundColor="rgb(24,169,85)",t.className="e-pv-accepted-icon"):"Completed"===e?(i.style.backgroundColor="rgb(0,122,255)",t.className="e-pv-completed-icon"):"Cancelled"===e?(i.style.backgroundColor="rgb(245,103,0)",t.className="e-pv-cancelled-icon"):"Rejected"===e?(i.style.backgroundColor="rgb(255,59,48)",t.className="e-pv-rejected-icon"):(t.className="",n.parentElement.removeChild(n))},s.prototype.updateAccordionContainer=function(e){var t=parseInt(e.accessKey.split("_")[0]),i=document.getElementById(this.pdfViewer.element.id+"_accordionContainer"+t);i&&i.parentElement.removeChild(i);var n=document.getElementById(this.pdfViewer.element.id+"_accordionContentContainer");n&&0===n.childElementCount&&(n.style.display="none",document.getElementById(this.pdfViewer.element.id+"_commentsPanelText")&&(this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant("Export Annotations")],!1),this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant("Export XFDF")],!1),document.getElementById(this.pdfViewer.element.id+"_commentsPanelText").style.display="block",this.updateCommentPanelTextTop()))},s.prototype.createCommentContextMenu=function(){this.commentContextMenu=[{text:this.pdfViewer.localeObj.getConstant("Edit")},{text:this.pdfViewer.localeObj.getConstant("Delete Context")},{text:this.pdfViewer.localeObj.getConstant("Set Status"),items:[{text:this.pdfViewer.localeObj.getConstant("None")},{text:this.pdfViewer.localeObj.getConstant("Accepted")},{text:this.pdfViewer.localeObj.getConstant("Cancelled")},{text:this.pdfViewer.localeObj.getConstant("Completed")},{text:this.pdfViewer.localeObj.getConstant("Rejected")}]}];var e=(0,a.az)("ul",{id:this.pdfViewer.element.id+"_comment_context_menu"});this.pdfViewer.element.appendChild(e),this.commentMenuObj=new re.xV({target:"#"+this.pdfViewer.element.id+"_more-options",items:this.commentContextMenu,beforeOpen:this.contextMenuBeforeOpen.bind(this),select:this.commentMenuItemSelect.bind(this)}),this.pdfViewer.enableRtl&&(this.commentMenuObj.enableRtl=!0),this.commentMenuObj.appendTo(e),this.commentMenuObj.animationSettings.effect=a.AR.isDevice&&!this.pdfViewer.enableDesktopMode?"ZoomIn":"SlideDown"},s.prototype.contextMenuBeforeOpen=function(e){var t,i=document.querySelectorAll("#"+this.pdfViewer.element.id+"_more-options");if(i)for(var n=0;n<i.length;n++)"visible"===i[n].style.visibility&&(t=i[n].parentElement.nextSibling);this.checkIslockProperty(t)?(this.commentMenuObj.enableItems([this.pdfViewer.localeObj.getConstant("Edit")],!1),this.commentMenuObj.enableItems([this.pdfViewer.localeObj.getConstant("Delete Context")],!1)):(this.commentMenuObj.enableItems([this.pdfViewer.localeObj.getConstant("Edit")],!0),this.commentMenuObj.enableItems([this.pdfViewer.localeObj.getConstant("Delete Context")],!0))},s.prototype.commentMenuItemSelect=function(e){var t,i=document.querySelectorAll("#"+this.pdfViewer.element.id+"_more-options");if(i){for(var n=0;n<i.length;n++)"visible"===i[n].style.visibility&&(t=i[n].parentElement.nextSibling);if(e.item)switch(e.item.text){case this.pdfViewer.localeObj.getConstant("Edit"):var o=document.querySelectorAll(".e-pv-new-comments-div");for(n=0;n<o.length;n++)o[n].style.display="none";t.ej2_instances[0].enableEditMode=!0;break;case this.pdfViewer.localeObj.getConstant("Delete Context"):t.parentElement.parentElement.firstChild===t.parentElement?this.pdfViewer.annotationModule.deleteAnnotation():this.modifyCommentDeleteProperty(t.parentElement.parentElement,t.parentElement);break;case this.pdfViewer.localeObj.getConstant("Set Status"):break;case this.pdfViewer.localeObj.getConstant("Accepted"):t.parentElement.lastChild.id===this.pdfViewer.element.id+"status_container"&&t.parentElement.lastChild.remove();var r=(0,a.az)("div",{id:this.pdfViewer.element.id+"status_container",className:"e-pv-status-container"}),l=(0,a.az)("div",{id:this.pdfViewer.element.id+"status_div",className:"e-pv-status-div"}),d=(0,a.az)("span",{id:this.pdfViewer.element.id+"status_icon",className:"e-pv-accepted-icon"});l.style.backgroundColor="rgb(24,169,85)",l.appendChild(d),r.appendChild(l),t.parentElement.appendChild(r),this.modifyStatusProperty("Accepted",t.parentElement);break;case this.pdfViewer.localeObj.getConstant("Completed"):t.parentElement.lastChild.id===this.pdfViewer.element.id+"status_container"&&t.parentElement.lastChild.remove();var h=(0,a.az)("div",{id:this.pdfViewer.element.id+"status_container",className:"e-pv-status-container"}),p=(0,a.az)("div",{id:this.pdfViewer.element.id+"status_div",className:"e-pv-status-div"}),f=(0,a.az)("span",{id:this.pdfViewer.element.id+"status_icon",className:"e-pv-completed-icon"});p.style.backgroundColor="rgb(0,122,255)",p.appendChild(f),h.appendChild(p),t.parentElement.appendChild(h),this.modifyStatusProperty("Completed",t.parentElement);break;case this.pdfViewer.localeObj.getConstant("Cancelled"):t.parentElement.lastChild.id===this.pdfViewer.element.id+"status_container"&&t.parentElement.lastChild.remove();var c=(0,a.az)("div",{id:this.pdfViewer.element.id+"status_container",className:"e-pv-status-container"}),u=(0,a.az)("div",{id:this.pdfViewer.element.id+"status_div",className:"e-pv-status-div"}),m=(0,a.az)("span",{id:this.pdfViewer.element.id+"status_icon",className:"e-pv-cancelled-icon"});u.style.backgroundColor="rgb(245,103,0)",u.appendChild(m),c.appendChild(u),t.parentElement.appendChild(c),this.modifyStatusProperty("Cancelled",t.parentElement);break;case this.pdfViewer.localeObj.getConstant("Rejected"):t.parentElement.lastChild.id===this.pdfViewer.element.id+"status_container"&&t.parentElement.lastChild.remove();var g=(0,a.az)("div",{id:this.pdfViewer.element.id+"status_container",className:"e-pv-status-container"}),v=(0,a.az)("div",{id:this.pdfViewer.element.id+"status_div",className:"e-pv-status-div"}),y=(0,a.az)("span",{id:this.pdfViewer.element.id+"status_icon",className:"e-pv-rejected-icon"});v.style.backgroundColor="rgb(255,59,48)",v.appendChild(y),g.appendChild(v),t.parentElement.appendChild(g),this.modifyStatusProperty("Rejected",t.parentElement);break;case this.pdfViewer.localeObj.getConstant("None"):t.parentElement.lastChild.id===this.pdfViewer.element.id+"status_container"&&t.parentElement.lastChild.remove(),this.modifyStatusProperty("None",t.parentElement)}}},s.prototype.moreOptionsClick=function(e,t){if("block"!==document.getElementById(this.pdfViewer.element.id+"_comment_context_menu").style.display&&("e-pv-more-options-button e-btn"===e.currentTarget.className&&e.currentTarget.parentElement.nextSibling.lastChild.firstChild.click(),this.pdfViewer.annotationModule.checkContextMenuDeleteItem(this.commentMenuObj),this.commentMenuObj.open(e.clientY,e.clientX,e.currentTarget)),this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.inkAnnotationModule){var i=parseInt(this.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber);this.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(i)}},s.prototype.openTextEditor=function(e){for(var t=document.querySelectorAll(".e-pv-new-comments-div"),i=0;i<t.length;i++)t[i].style.display="none";if(this.checkIslockProperty(e.currentTarget.nextSibling))e.currentTarget.nextSibling.ej2_instances[0].enableEditMode=!1;else if(e.currentTarget.parentElement.parentElement){var o=this.checkAnnotationSettings(e.currentTarget.parentElement.parentElement.id);if(o){var r=this.findAnnotationObject(e.currentTarget.parentElement.parentElement.id);this.pdfViewer.annotationModule.checkAllowedInteractions("Select",r)&&(o=!1)}o||(e.currentTarget.nextSibling.ej2_instances[0].enableEditMode=!0)}else e.currentTarget.nextSibling.ej2_instances[0].enableEditMode=!0},s.prototype.checkIslockProperty=function(e){var i,t=this.pdfViewer.annotationCollection;if(e.IsCommentLock)return!0;this.pdfViewer.annotationModule.textMarkupAnnotationModule&&this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation?i=this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation:this.pdfViewer.selectedItems.annotations[0]&&(i=this.pdfViewer.selectedItems.annotations[0]);for(var n=0;n<t.length;n++){if(!0===t[n].isCommentLock&&(e.textContent===(t[n].note?t[n].note:t[n].notes)||t[n].dynamicText===e.textContent))return!0;for(var r=0;r<t[n].comments.length;r++)if(i&&t[n].annotationId===i.annotName&&!0===t[n].comments[r].isLock&&e.textContent===t[n].comments[r].note)return!0}return!1},s.prototype.openEditorElement=function(e){for(var t=document.querySelectorAll(".e-pv-new-comments-div"),i=0;i<t.length;i++)t[i].style.display="none";if(this.checkIslockProperty(e.currentTarget))e.currentTarget.ej2_instances[0].enableEditMode=!1;else if(e.currentTarget.parentElement.parentElement){var o=this.checkAnnotationSettings(e.currentTarget.parentElement.parentElement.id);if(o){var r=this.findAnnotationObject(e.currentTarget.parentElement.parentElement.id);this.pdfViewer.annotationModule.checkAllowedInteractions("Select",r)&&(o=!1)}o||(e.currentTarget.ej2_instances[0].enableEditMode=!this.pdfViewer.selectedItems.annotations[0].isReadonly)}else e.currentTarget.ej2_instances[0].enableEditMode=!0},s.prototype.commentsDivClickEvent=function(e){var t=this.findAnnotationObject(e.currentTarget.parentElement.id),i=this.checkAnnotationSettings(e.currentTarget.parentElement.id);if(i&&this.pdfViewer.annotationModule.checkAllowedInteractions("Select",t)&&(i=!1),!i){var n=!1;if(this.isSetAnnotationType=0===e.clientX&&0===e.clientY,"e-pv-more-icon e-pv-icon"===e.target.className)return null;for(var o=document.querySelectorAll("#"+this.pdfViewer.element.id+"_more-options"),r=0;r<o.length;r++)o[r].style.visibility="hidden";"none"===document.getElementById(this.pdfViewer.element.id+"_commantPanel").style.display&&this.pdfViewer.annotationModule.showCommentsPanel(),e.currentTarget.parentElement.classList.contains("e-pv-comments-border")&&(n=!0),e.currentTarget.firstChild.lastChild.style.visibility="visible";var l=document.querySelectorAll(".e-pv-comments-border");if(l)for(var d=0;d<l.length;d++)l[d].classList.remove("e-pv-comments-border");e.currentTarget.parentElement.classList.add("e-pv-comments-border");var h=document.querySelectorAll(".e-pv-new-comments-div");for(r=0;r<h.length;r++)h[r].style.display="none";var p=e.currentTarget.parentElement.lastChild,f=e.currentTarget.parentElement;if(p){if(p.style.display="block",p.querySelector(".e-editable-inline"))for(this.isEditableElement||(p.querySelector(".e-editable-inline").style.display="block"),r=0;r<f.childElementCount;r++){var u=f.childNodes[r].querySelector(".e-editable-inline");u&&""===u.style.display&&(p.style.display="none",p.querySelector(".e-editable-inline").style.display="none")}this.isSetAnnotationType&&(n||this.updateCommentsScrollTop())}if(1===e.currentTarget.parentElement.childElementCount)if(this.pdfViewer.enableShapeLabel){var m=e.currentTarget.parentElement.getAttribute("name");e.currentTarget.childNodes[1].ej2_instances[0].enableEditMode=!this.isSetAnnotationType||"shape"!==m}else e.currentTarget.childNodes[1].ej2_instances[0].enableEditMode=!0;var g=void 0;e&&e.currentTarget&&e.currentTarget.childNodes[1]&&(g=e.currentTarget.childNodes[1].ej2_instances[0]),e.currentTarget&&e.currentTarget.id&&g&&(t&&t.isCommentLock&&(g.enableEditMode=!1,this.createCommentDiv(e.currentTarget)),this.pdfViewer.fireCommentSelect(e.currentTarget.id,e.currentTarget.childNodes[1].ej2_instances[0].value,t)),this.commentDivOnSelect(e),e.preventDefault()}},s.prototype.commentsDivDoubleClickEvent=function(e){for(var t=document.querySelectorAll(".e-pv-new-comments-div"),i=0;i<t.length;i++)t[i].style.display="none";this.checkIslockProperty(e.currentTarget.children[1])?2===e.currentTarget.childElementCount?e.currentTarget.lastChild.ej2_instances[0].enableEditMode=!1:e.currentTarget.childNodes[1].ej2_instances[0].enableEditMode=!1:e.currentTarget&&(this.checkAnnotationSettings(e.currentTarget.parentElement.id)||(2===e.currentTarget.childElementCount?e.currentTarget.lastChild.ej2_instances[0].enableEditMode=!0:e.currentTarget.childNodes[1].ej2_instances[0].enableEditMode=!0))},s.prototype.commentDivOnSelect=function(e){for(var t=document.querySelectorAll(".e-pv-comments-select"),i=0;i<t.length;i++)t[i].classList.remove("e-pv-comments-select");var n=document.getElementById(e.currentTarget.id);if(n&&(n.classList.remove("e-pv-comments-hover"),n.classList.remove("e-pv-comments-leave"),n.classList.add("e-pv-comments-select"),e.currentTarget.nextSibling&&e.currentTarget.nextSibling.classList.contains("e-pv-new-comments-div"))){var o=document.getElementById(e.currentTarget.nextSibling.id);o.classList.remove("e-pv-comments-hover"),o.classList.remove("e-pv-comments-leave"),o.classList.add("e-pv-comments-select")}},s.prototype.commentDivMouseOver=function(e){var t=document.getElementById(e.currentTarget.id);if(t&&(t.classList.remove("e-pv-comments-select"),t.classList.remove("e-pv-comments-leave"),t.classList.add("e-pv-comments-hover"),e.currentTarget.nextSibling&&e.currentTarget.nextSibling.classList.contains("e-pv-new-comments-div"))){var i=document.getElementById(e.currentTarget.nextSibling.id);i.classList.remove("e-pv-comments-select"),i.classList.remove("e-pv-comments-leave"),i.classList.add("e-pv-comments-hover")}},s.prototype.commentDivMouseLeave=function(e){var t=document.getElementById(e.currentTarget.id);if(t&&(t.classList.remove("e-pv-comments-hover"),t.classList.remove("e-pv-comments-select"),t.classList.add("e-pv-comments-leave"),e.currentTarget.nextSibling&&e.currentTarget.nextSibling.classList.contains("e-pv-new-comments-div"))){var i=document.getElementById(e.currentTarget.nextSibling.id);i.classList.remove("e-pv-comments-hover"),i.classList.remove("e-pv-comments-select"),i.classList.add("e-pv-comments-leave")}},s.prototype.drawIcons=function(e){if(this.pdfViewerBase.isCommentIconAdded){var t=this.pdfViewer.annotation.getEventPageNumber(e),i=this.pdfViewerBase.getElement("_pageDiv_"+t).getBoundingClientRect(),n=this.pdfViewerBase.getZoomFactor();this.pdfViewer.annotation.stickyNotesAnnotationModule.drawStickyNotes((e.clientX-i.left)/n,(e.clientY-i.top)/n,30,30,t,null),this.pdfViewerBase.isCommentIconAdded=!1;var o=document.getElementById(this.pdfViewer.element.id+"_comment");if((0,a.xr)()&&(o=o.children[0]),o&&o.classList.contains("e-pv-select"))o.classList.remove("e-pv-select");else{var r=document.getElementById(this.pdfViewer.element.id+"_commentIcon");r&&(r.className=this.pdfViewer.enableRtl?"e-pv-comment-icon e-pv-icon e-icon-left e-right":"e-pv-comment-icon e-pv-icon e-icon-left")}}},s.prototype.addComments=function(e,t,i){return document.getElementById(this.pdfViewer.element.id+"_accordionContainer"+t)||this.pdfViewer.annotation.stickyNotesAnnotationModule.createPageAccordion(t),this.pdfViewer.annotation.stickyNotesAnnotationModule.createCommentControlPanel(null,t,e,i)},s.prototype.commentsAnnotationSelect=function(e){var t=e.currentTarget,i=this.checkAnnotationSettings(t.id);if(i){var n=this.findAnnotationObject(t.id);this.pdfViewer.annotationModule.checkAllowedInteractions("Select",n)&&(i=!1)}if(!i){if(t.classList.contains("e-pv-comments-border")){for(var o=document.querySelectorAll(".e-pv-comments-div"),r=0;r<o.length;r++)o[r].style.minHeight="60px";1===e.currentTarget.childElementCount&&e.currentTarget.childNodes[0].querySelector(".e-editable-inline")&&(e.currentTarget.childNodes[0].style.minHeight=e.currentTarget.childNodes[0].clientHeight)}if("e-pv-more-icon e-pv-icon"===e.target.className||"e-pv-more-options-button e-btn"===e.target.className)return e.preventDefault(),null;var l=parseInt(t.accessKey.split("_")[0]);if(t.classList.contains("e-pv-comments-border"))this.isSetAnnotationType=!0;else{var d=document.querySelectorAll(".e-pv-comments-border");if(d)for(r=0;r<d.length;r++)d[r].classList.remove("e-pv-comments-border");(o=document.getElementById(t.id))&&o.classList.add("e-pv-comments-border");var h=document.querySelectorAll(".e-pv-new-comments-div");for(r=0;r<h.length;r++)h[r].style.display="none";if(o){var p=o.querySelector(".e-pv-new-comments-div");p&&(p.style.display="block")}var f=t.lastChild;if(this.isEditableElement=!1,f.querySelector(".e-editable-inline")){f.style.display="block",f.querySelector(".e-editable-inline").style.display="block";for(var c=0;c<t.childElementCount;c++){var m=t.childNodes[c].querySelector(".e-editable-inline");m&&""===m.style.display&&f.classList.contains("e-pv-new-comments-div")&&(this.isEditableElement=!0,f.style.display="none",f.querySelector(".e-editable-inline").style.display="none")}}this.isSetAnnotationType=!1,1===e.currentTarget.childElementCount&&(e.currentTarget.childNodes[0].childNodes[1].ej2_instances[0].enableEditMode=!0)}if(!this.isSetAnnotationType){this.pdfViewer.navigation&&this.pdfViewer.navigationModule.goToPage(l);var g=t.getAttribute("name");("null"===g||"Ink"===g)&&(g="ink"),this.isCommentsSelected=!1,this.setAnnotationType(t.id,g,l),this.isCommentsSelected||(this.selectAnnotationObj={id:t.id,annotType:g,pageNumber:l})}}this.isSetAnnotationType=!1},s.prototype.findAnnotationObject=function(e){if(this.pdfViewer.annotationModule.textMarkupAnnotationModule&&this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation)return this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation;if(this.pdfViewer.selectedItems.annotations[0])return this.pdfViewer.selectedItems.annotations[0];var t=this.pdfViewer.annotationCollection;if(t)for(var i=0;i<t.length;i++)if(t[i].annotationId&&t[i].annotationId===e){if("textMarkup"===t[i].shapeAnnotationType)return t[i];t=this.pdfViewer.annotations;for(var n=0;n<t.length;n++)if(t[n].annotName&&t[n].annotName===e)return t[n]}},s.prototype.checkAnnotationSettings=function(e){var t=this.pdfViewer.annotationCollection;if(t){for(var i=0;i<t.length;i++)if(t[i].annotationId&&t[i].annotationId===e)return!(!t[i].annotationSettings||!t[i].annotationSettings.isLock);return!1}return!1},s.prototype.updateCommentsContainerWidth=function(){var e=document.getElementById(this.pdfViewer.element.id+"_accordionContentContainer"),t=document.getElementById(this.pdfViewer.element.id+"_commentscontentcontainer");e.style.width=t.clientWidth+"px"},s.prototype.selectCommentsAnnotation=function(e){this.selectAnnotationObj&&!this.isCommentsSelected&&this.selectAnnotationObj.pageNumber-1===e&&(this.setAnnotationType(this.selectAnnotationObj.id,this.selectAnnotationObj.annotType,this.selectAnnotationObj.pageNumber),this.selectAnnotationObj=null,this.isCommentsSelected=!0)},s.prototype.setAnnotationType=function(e,t,i){var n="measure"===t?"shape_measure":t;"freeText"===n&&(n="freetext");var o=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_"+n);if(this.pdfViewerBase.isStorageExceed&&(o=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_"+n]),o){var r=JSON.parse(o),l=this.pdfViewer.selectedItems.annotations[0],d=this.pdfViewer.annotationModule.getPageCollection(r,i-1);if(r[d])for(var h=r[d].annotations,p=0;p<h.length;p++){var f=h[p].annotationSelectorSettings;if(h[p].annotName===e){if(l&&this.pdfViewer.fireAnnotationUnSelect(l.annotName,l.pageIndex,l),this.pdfViewer.clearSelection(i-1),"textMarkup"===t){this.pdfViewer.annotationModule.textMarkupAnnotationModule.clearCurrentAnnotationSelection(i-1,!0);var c=this.pdfViewerBase.getElement("_annotationCanvas_"+(i-1));this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectAnnotation(h[p],c,i-1),this.pdfViewer.annotation.textMarkupAnnotationModule.currentTextMarkupAnnotation=h[p],this.pdfViewer.annotation.textMarkupAnnotationModule.selectTextMarkupCurrentPage=i-1,this.pdfViewer.annotation.textMarkupAnnotationModule.enableAnnotationPropertiesTool(!0),this.pdfViewer.toolbarModule&&this.pdfViewer.enableAnnotationToolbar&&(this.pdfViewer.toolbarModule.annotationToolbarModule.isToolbarHidden=!0,this.pdfViewer.toolbarModule.annotationToolbarModule.showAnnotationToolbar(this.pdfViewer.toolbarModule.annotationItem))}else"stamp"===t?(this.pdfViewer.select([h[p].randomId],f),this.pdfViewer.annotation.onAnnotationMouseDown()):"sticky"===t?(this.pdfViewer.select([h[p].annotName],f),this.pdfViewer.annotation.onAnnotationMouseDown()):(this.pdfViewer.select([h[p].id],f),this.pdfViewer.annotation.onAnnotationMouseDown());if("textMarkup"===t){if((h[p].rect||h[p].bounds)&&(u=this.pdfViewerBase.pageSize[i-1].top*this.pdfViewerBase.getZoomFactor()+this.pdfViewer.annotationModule.getAnnotationTop(h[p])*this.pdfViewerBase.getZoomFactor())){var m=(u-20).toString();this.pdfViewerBase.viewerContainer.scrollTop=parseInt(m)}}else{var g=h[p].bounds.top;"ink"===t&&(g=h[p].bounds.y);var u,v=((u=this.pdfViewerBase.pageSize[i-1].top*this.pdfViewerBase.getZoomFactor()+g*this.pdfViewerBase.getZoomFactor())-20).toString();this.pdfViewerBase.viewerContainer.scrollTop=parseInt(v)}this.isCommentsSelected=!0}}}},s.prototype.modifyTextProperty=function(e,t,i){var n,o=this.pdfViewer.annotationModule.textMarkupAnnotationModule;if(o&&o.currentTextMarkupAnnotation&&(n=this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation),n?n.annotName!==i&&(n=this.pdfViewer.selectedItems.annotations[0]):n=this.pdfViewer.selectedItems.annotations[0],i&&n.annotName!==i)for(var r=0;r<this.pdfViewer.annotations.length;r++)if(i===this.pdfViewer.annotations[r].annotName){n=this.pdfViewer.annotations[r];break}if(n){var l=document.getElementById(n.annotName);if(l){var d;d=l.accessKey.split("_")[0]?parseInt(l.accessKey.split("_")[0]):this.pdfViewerBase.currentPageNumber;var h=l.getAttribute("name"),p=d-1,f=void 0,c=!1;if("FreeText"===n.shapeAnnotationType||this.pdfViewer.enableShapeLabel&&("shape"===h||"shape_measure"===h)){var u=!1;i&&n.annotName!==i&&(this.pdfViewer.annotation.modifyDynamicTextValue(e,i),u=!0),u||("FreeText"===n.shapeAnnotationType?(n.dynamicText!==e&&this.pdfViewer.annotation.modifyDynamicTextValue(e,n.annotName),n.dynamicText=e):(this.pdfViewer.annotation.modifyDynamicTextValue(e,n.annotName),n.labelContent=e,n.notes=e),this.pdfViewer.nodePropertyChange(n,{}))}if(n.measureType&&""!==n.measureType?(f=this.getAnnotations(p,null,"shape_measure"),c=!0):f=this.getAnnotations(p,null,n.shapeAnnotationType),null!==f&&"FreeText"!==n.shapeAnnotationType)for(r=0;r<f.length;r++)if(f[r].annotName===n.annotName){var m=_(f[r]);if(null!==e&&f[r].note!==e)return this.pdfViewer.annotation.addAction(p,r,f[r],"Text Property Added","",m,f[r]),(n=f[r]).note=e,n.enableShapeLabel&&(n.labelContent=e),n.modifiedDate=this.getDateAndTime(),c?this.updateUndoRedoCollections(n,p,"shape_measure"):this.updateUndoRedoCollections(n,p),t&&""!==t?this.pdfViewer.fireCommentEdit(n.annotName,n.note,n):this.pdfViewer.fireCommentAdd(n.annotName,n.note,n),n}}}},s.prototype.getDateAndTime=function(e){e||(e=new Date),this.globalize=new a.eC;var t={format:this.pdfViewer.dateTimeFormat,type:"dateTime"};return this.globalize.formatDate(new Date(e),t)},s.prototype.modifyCommentsProperty=function(e,t,i,n){var o;if(o=this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation?this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation:this.pdfViewer.selectedItems.annotations[0]){var r=document.getElementById(o.annotName),d=parseInt(r.accessKey.split("_")[0])-1,h=void 0,p=!1,f=this.getAuthorName(o,r);if(o.measureType&&""!==o.measureType?(h=this.getAnnotations(d,null,"shape_measure"),p=!0):h=this.getAnnotations(d,null,o.shapeAnnotationType),null!==h)for(var c=0;c<h.length;c++)h[c].annotName===o.annotName&&(o=h[c]);var u=_(o);if(o.comments.length>0){for(var m=!1,g=0;g<o.comments.length;g++)o.comments[g].annotName===t&&(m=!0,o.comments[g].note=e,o.comments[g].modifiedDate=this.getDateAndTime());var v={annotName:t,parentId:i,subject:"Comments",comments:[],author:f,note:e,shapeAnnotationType:"",state:"",stateModel:"",modifiedDate:this.getDateAndTime(),review:{state:"",stateModel:"",modifiedDate:this.getDateAndTime(),author:f},isLock:!1};m||(o.comments[o.comments.length]=v)}else v={annotName:t,parentId:i,subject:"Comments",comments:[],author:f,note:e,shapeAnnotationType:"",state:"",stateModel:"",modifiedDate:this.getDateAndTime(),review:{state:"",stateModel:"",modifiedDate:this.getDateAndTime(),author:f},isLock:!1},o.comments[o.comments.length]=v;this.pdfViewer.annotation.addAction(d,null,o,"Comments Property Added","",u,o),p?this.updateUndoRedoCollections(o,d,"shape_measure"):this.updateUndoRedoCollections(o,d)}void 0!==n?this.pdfViewer.fireCommentEdit(t,e,o):this.pdfViewer.fireCommentAdd(t,e,o)},s.prototype.modifyStatusProperty=function(e,t){var i;if(i=this.pdfViewer.annotation.textMarkupAnnotationModule.currentTextMarkupAnnotation?this.pdfViewer.annotation.textMarkupAnnotationModule.currentTextMarkupAnnotation:this.pdfViewer.selectedItems.annotations[0]){var n=document.getElementById(i.annotName),r=parseInt(n.accessKey.split("_")[0])-1,l=void 0,d=!1,h=n.getAttribute("author");if(i.measureType&&""!==i.measureType?(l=this.getAnnotations(r,null,"shape_measure"),d=!0):l=this.getAnnotations(r,null,i.shapeAnnotationType),null!==l)for(var p=0;p<l.length;p++)l[p].annotName===i.annotName&&(i=l[p]);var f=_(i);if(t.parentElement.firstChild.id===t.id)i.review={state:e,stateModel:"Review",author:h,modifiedDate:this.getDateAndTime(),annotId:t.id},i.state=e,i.stateModel="Review",this.pdfViewer.annotation.addAction(r,null,i,"Status Property Added","",f,i),this.pdfViewer.fireCommentStatusChanged(t.id,i.note,i,i.state);else for(var c=0;c<i.comments.length;c++)if(i.comments[c].annotName===t.id){var u=_(i.comments[c]);i.comments[c].state=e,i.comments[c].stateModel="Review",i.comments[c].review={state:e,stateModel:"Review",author:h,modifiedDate:this.getDateAndTime(),annotId:t.id},this.pdfViewer.annotation.addAction(r,null,i,"Status Property Added","",u,i.comments[c]),this.pdfViewer.fireCommentStatusChanged(i.comments[c].annotName,i.comments[c].note,i,i.comments[c].state)}d?this.updateUndoRedoCollections(i,r,"shape_measure"):this.updateUndoRedoCollections(i,r)}},s.prototype.modifyCommentDeleteProperty=function(e,t){var i,n,o,r=document.getElementById(e.id);if(r){var d=parseInt(r.accessKey.split("_")[0])-1,h=e.getAttribute("name"),p=this.getAnnotations(d,null,h);if(null!==p)for(var f=0;f<p.length;f++)p[f].annotName===e.id&&(o=p[f]);for(f=1;f<r.childElementCount;f++)if(r.childNodes[f].id===t.id){n=_(o);var c=f-1;o.comments[c].position=f,i=_(o.comments[c]),this.pdfViewer.fireCommentDelete(o.comments[c].annotName,o.comments[c].note,o),o.comments.splice(c,1),t.remove()}this.pdfViewer.annotation.addAction(d,null,n,"Comments Reply Deleted","",i,o),this.updateUndoRedoCollections(o,d)}},s.prototype.updateOpacityValue=function(e){var t=this.getAnnotations(e.pageIndex,null,e.shapeAnnotationType);if(null!==t)for(var i=0;i<t.length;i++)t[i].annotName===e.annotName&&(t[i].opacity=e.opacity,this.updateUndoRedoCollections(t[i],e.pageIndex))},s.prototype.undoAction=function(e,t,i){if("Text Property Added"===t){if(e&&(n=document.getElementById(e.annotName))){var r=parseInt(n.accessKey.split("_")[0])-1,l=_(e);return n.firstChild.firstChild.nextSibling.ej2_instances[0].value=i.note,e.note=i.note,2===n.childElementCount&&(n.lastChild.style.display="block"),this.updateUndoRedoCollections(e,r),l}}else if("Comments Property Added"===t){if(e.comments.length>0){var h=document.getElementById(e.annotName);r=this.pdfViewerBase.currentPageNumber-1,h&&(r=parseInt(h.accessKey.split("_")[0])-1),l=_(e);var f=document.getElementById(e.comments[e.comments.length-1].annotName);return f&&f.remove(),this.updateUndoRedoCollections(e=i,r),l}}else if("Status Property Added"===t){if(e){if(h=document.getElementById(e.annotName),r=this.pdfViewerBase.currentPageNumber-1,h&&(r=parseInt(h.accessKey.split("_")[0])-1),l=_(e),e.annotName===i.annotName)e.review=i.review,e.state=i.state,e.stateModel=i.stateModel,this.pdfViewer.annotation.redoCommentsElement.push(e);else for(var c=0;c<e.comments.length;c++)if(e.comments[c].annotName===i.annotName){e.comments[c].state=i.state,e.comments[c].stateModel=i.stateModel,e.comments[c].review=i.review,this.pdfViewer.annotation.redoCommentsElement.push(e.comments[c]);break}var u=document.getElementById(i.annotName);return u.lastChild.id===this.pdfViewer.element.id+"status_container"?u.lastChild.remove():u.firstChild.lastChild.id===this.pdfViewer.element.id+"status_container"&&u.firstChild.lastChild.remove(),this.updateUndoRedoCollections(e,r),l}}else if("Comments Reply Deleted"===t){if(h=document.getElementById(e.annotName))return r=parseInt(h.accessKey.split("_")[0])-1,this.renderComments(i,h,!0,e.annotName),this.pdfViewer.annotation.redoCommentsElement.push(i),this.updateUndoRedoCollections(e,r),e}else if("dynamicText Change"===t&&e){var n;if(n=document.getElementById(e.annotName))return n.firstChild.firstChild.nextSibling.ej2_instances[0].value=i.dynamicText,e}},s.prototype.redoAction=function(e,t,i){if("Text Property Added"===t){if(n=document.getElementById(e.annotName)){var r=parseInt(n.accessKey.split("_")[0])-1;return n.firstChild.firstChild.nextSibling.ej2_instances[0].value=e.note,n.lastChild.style.display="block",this.updateUndoRedoCollections(e,r),e}}else if("Comments Property Added"===t){var l=e.comments[e.comments.length-1],d=document.getElementById(e.annotName);if(d)return r=parseInt(d.accessKey.split("_")[0])-1,this.renderComments(l,d,!0,e.annotName),this.updateUndoRedoCollections(e,r),e}else{if("Status Property Added"===t){var h=this.pdfViewer.annotation.redoCommentsElement.pop();if(r=this.pdfViewerBase.currentPageNumber-1,h){var p=(0,a.az)("div",{id:this.pdfViewer.element.id+"status_container",className:"e-pv-status-container"}),f=(0,a.az)("div",{id:this.pdfViewer.element.id+"status_div",className:"e-pv-status-div"}),c=(0,a.az)("span",{id:this.pdfViewer.element.id+"status_icon"});if(f.appendChild(c),p.appendChild(f),(u=document.getElementById(e.annotName))&&(r=parseInt(u.accessKey.split("_")[0])-1),e.annotName===h.annotName){this.updateStatusContainer(e.state,c,f,p);for(var m=0;m<u.firstChild.children.length;m++)u.firstChild.children[m].id===this.pdfViewer.element.id+"status_container"&&u.firstChild.children[m].parentElement.removeChild(u.firstChild.children[m]);u.firstChild.appendChild(p)}else for(m=0;m<e.comments.length;m++)if(e.comments[m].annotName===h.annotName){this.updateStatusContainer(e.comments[m].state,c,f,p);for(var g=document.getElementById(h.annotName),v=0;v<g.children.length;v++)g.children[v].id===this.pdfViewer.element.id+"status_container"&&g.children[v].parentElement.removeChild(g.children[v]);g&&g.appendChild(p)}}return this.updateUndoRedoCollections(e,r),e}if("Comments Reply Deleted"===t){var u;r=this.pdfViewerBase.currentPageNumber-1,(u=document.getElementById(e.annotName))&&(r=parseInt(u.accessKey.split("_")[0])-1),h=this.pdfViewer.annotation.redoCommentsElement.pop();var y=_(e);for(m=0;m<e.comments.length;m++)if(e.comments[m].annotName===h.annotName){var b=document.getElementById(h.annotName);e.comments.splice(m,1),b.remove()}return this.updateUndoRedoCollections(e,r),y}var n;if("dynamicText Change"===t&&e&&(n=document.getElementById(e.annotName)))return n.firstChild.firstChild.nextSibling.ej2_instances[0].value=e.dynamicText,e}},s.prototype.updateUndoRedoCollections=function(e,t,i,n){var o=i||e.shapeAnnotationType;e.indent&&""!==e.indent&&(o="shape_measure");var r=this.getAnnotations(t,null,o);if(null!==r){for(var l=0;l<r.length;l++)e.annotName===r[l].annotName&&(r[l]=e,this.pdfViewer.annotationModule.storeAnnotationCollections(r[l],t),n&&(r.splice(l,1),this.deleteStickyNotesAnnotations(r,t)));this.manageAnnotations(r,t,"shape_measure"===o?"shape_measure":e.shapeAnnotationType)}},s.prototype.addAnnotationComments=function(e,t){var i=e+1,n=this.pdfViewer.annotation.undoCommentsElement.pop();n&&(this.createCommentsContainer(n,i),this.updateUndoRedoCollections(n,e,t))},s.prototype.findPosition=function(e,t,i){var n,o=document.getElementById(e.annotName);if(o){for(var l=parseInt(o.accessKey.split("_")[0])-1,d=o.parentElement,h=0;h<d.childElementCount;h++)d.childNodes[h].id===e.annotName&&(n=h);"Stamp"===t||"Image"===t?t="stamp":"FreeText"===t?t="freetext":"StickyNotes"===t||"sticky"===t?t="sticky":"Ink"===t&&(t="ink");var p=this.getAnnotations(l,null,t);if(null!==p)for(h=0;h<p.length;h++)if(p[h].annotName===e.annotName){var f=_(p[h]);p[h].position=n,this.pdfViewer.annotation.undoCommentsElement.push(p[h]),"sticky"===t&&this.updateUndoRedoCollections(f,l,null,i)}}},s.prototype.getAnnotations=function(e,t,i){var n;i="Stamp"===i||"stamp"===i||"Image"===i?"stamp":"StickyNotes"===i||"sticky"===i?"sticky":"textMarkup"===i?"textMarkup":"shape"===i||"Line"===i||"Radius"===i||"Rectangle"===i||"Ellipse"===i||"Polygon"===i||"LineWidthArrowHead"===i||"Square"===i||"Circle"===i?"shape":"FreeText"===i||"freetext"===i||"freeText"===i?"freetext":"ink"===i||"Ink"===i?"ink":"shape_measure";var o=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_"+i);if(this.pdfViewerBase.isStorageExceed&&(o=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_"+i]),o){var r=JSON.parse(o),l=this.pdfViewer.annotationModule.getPageCollection(r,e);n=r[l]?r[l].annotations:t}else n=t;return n},s.prototype.manageAnnotations=function(e,t,i){i="Stamp"===i||"stamp"===i?"stamp":"Sticky"===i||"sticky"===i?"sticky":"textMarkup"===i?"textMarkup":"shape"===i||"Line"===i||"Radius"===i||"Rectangle"===i||"Ellipse"===i||"Polygon"===i||"LineWidthArrowHead"===i||"Square"===i||"Circle"===i?"shape":"FreeText"===i?"freetext":"ink"===i||"Ink"===i?"ink":"shape_measure";var n=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_"+i);if(this.pdfViewerBase.isStorageExceed&&(n=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_"+i]),n){var o=JSON.parse(n);this.pdfViewerBase.isStorageExceed||window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_"+i);var r=this.pdfViewer.annotationModule.getPageCollection(o,t);o[r]&&(o[r].annotations=e);var l=JSON.stringify(o);this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_"+i]=l:window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_annotations_"+i,l)}},s.prototype.updateStickyNotes=function(e,t){var i=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_sticky");if(this.pdfViewerBase.isStorageExceed&&(i=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_sticky"]),i)for(var n=e.bounds,o=JSON.parse(i),r=0;r<o.length;r++)for(var l=o[r],d=0;d<l.annotations.length;d++)if(o[r].annotations[d].annotName===e.annotName){this.pdfViewerBase.isStorageExceed||window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_sticky"),o[this.pdfViewer.annotationModule.getPageCollection(o,0)]&&(o[r].annotations[d].bounds={left:n.x,top:n.y,width:n.width,height:n.height,right:n.right,bottom:n.bottom});var p=JSON.stringify(o);this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_sticky"]=p:window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_annotations_sticky",p);break}},s.prototype.saveStickyAnnotations=function(){var e=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_sticky");this.pdfViewerBase.isStorageExceed&&(e=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_sticky"]);for(var t=new Array,i=0;i<this.pdfViewerBase.pageCount;i++)t[i]=[];if(e&&!this.pdfViewer.annotationSettings.skipDownload)for(var n=JSON.parse(e),o=0;o<n.length;o++){var r=[],l=n[o];if(l){for(var d=0;l.annotations.length>d;d++)this.pdfViewer.annotationModule.updateModifiedDate(l.annotations[d]),l.annotations[d].bounds=JSON.stringify(this.pdfViewer.annotation.getBounds(l.annotations[d].bounds,l.pageIndex));r=l.annotations}t[l.pageIndex]=r}return JSON.stringify(t)},s.prototype.deleteStickyNotesAnnotations=function(e,t){var i=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_sticky");if(this.pdfViewerBase.isStorageExceed&&(i=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_sticky"]),i){var n=JSON.parse(i);this.pdfViewerBase.isStorageExceed||window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_sticky");var o=this.pdfViewer.annotationModule.getPageCollection(n,t);n[o]&&(n[o].annotations=e);var r=JSON.stringify(n);this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_sticky"]=r:window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_annotations_sticky",r)}},s.prototype.addStickyNotesAnnotations=function(e,t){var i=this.getAnnotations(e,null,"sticky");i&&i.push(t),this.manageAnnotations(i,e,"sticky")},s.prototype.addTextToComments=function(e,t){var i=document.getElementById(e);i&&(i.firstChild.firstChild.nextSibling.ej2_instances[0].value=t)},s.prototype.updateAnnotationCollection=function(e,t,i){var n=this.findAnnotationType(t),o=this.getAnnotations(t.pageIndex,null,n);if(i&&(o=this.pdfViewer.annotationModule.removedAnnotationCollection),null!==o)for(var r=0;r<o.length;r++)if(i&&!o[r].annotName&&(o[r].annotName=o[r].annotationId),o[r].annotName===t.annotName){var l=_(o[r]);l.annotName=e.annotName,("shape"===n||"shape_measure"===n||"freetext"===n||"ink"===n)&&(l.id=e.id),"stamp"===n&&(l.randomId=e.id),"ink"===n?(l.bounds.x=e.bounds.x,l.bounds.y=e.bounds.y):(l.bounds.left=e.bounds.x,l.bounds.top=e.bounds.y,l.vertexPoints=e.vertexPoints),l.note=l.note?l.note:"",l.comments=[],l.review={state:"",stateModel:"",modifiedDate:l.ModifiedDate,author:l.author},l.state="",l.stateModel="",l.pageNumber=t.pageIndex,this.pdfViewer.annotationModule.storeAnnotations(t.pageIndex,l,"_annotations_"+n),this.createCommentsContainer(l,t.pageIndex+1,!0),i&&(this.pdfViewer.annotationModule.removedAnnotationCollection=[]);break}},s.prototype.findAnnotationType=function(e){return""!==e.measureType?"shape_measure":"StickyNotes"===e.shapeAnnotationType?"sticky":"Stamp"===e.shapeAnnotationType||"Image"===e.shapeAnnotationType?"stamp":"FreeText"===e.shapeAnnotationType?"freetext":"Ink"===e.shapeAnnotationType?"ink":"shape"},s.prototype.setExistingAnnotationModifiedDate=function(e){return""!==e?this.setModifiedDate(e):this.setModifiedDate()},s.prototype.updateModifiedTime=function(e,t){return e>=12?12===e?e+":"+t+" PM":e-12+":"+t+" PM":e+":"+t+" AM"},s.prototype.setModifiedDate=function(e){var t;t=e?this.getDateAndTime(e):this.getDateAndTime();var n,i=new Date(t),o=i.toString().split(" ").splice(1,2).join(" ");if(2===i.toLocaleTimeString().split(" ").length)n=i.toLocaleTimeString().split(" ")[0].split(":").splice(0,2).join(":")+" "+i.toLocaleTimeString().split(" ")[1];else{var r=parseInt(i.toLocaleTimeString().split(":")[0]),l=i.toLocaleTimeString().split(":")[1];n=this.updateModifiedTime(r,l)}return o+", "+n},s.prototype.convertUTCDateToLocalDate=function(e){var t=new Date(Date.parse(e+" UTC"));this.globalize=new a.eC(this.pdfViewer.locale);var n,i=t.toLocaleTimeString(this.globalize.culture);return n=(0,a.le)(i.split(" ")[1])?i.split(":").splice(0,2).join(":"):i.split(":").splice(0,2).join(":")+" "+i.split(" ")[1],t.toLocaleDateString("default",{month:"short",day:"numeric"})+", "+n},s.prototype.updateModifiedDate=function(e){e.id===this.pdfViewer.element.id+"_commenttype_icon"&&(e=e.nextSibling);var t=e.textContent.split("-")[0];e.textContent=t+" - "+this.setModifiedDate()},s.prototype.updateAnnotationModifiedDate=function(e,t,i){var n;if(e){var o=document.getElementById(e.annotName);if(o){if(t){var l=this.findAnnotationType(e),d=this.getAnnotations(e.pageIndex,null,l);if(null!=d&&e)for(var h=0;h<d.length;h++){if(e.annotName===d[h].annotName&&(e.bounds.x!==d[h].bounds.left||e.bounds.y!==d[h].bounds.top||e.bounds.height!==d[h].bounds.height||e.bounds.width!==d[h].bounds.width)){var r=(n=o.firstChild.firstChild.childNodes[1]).textContent.split("-")[0];n.textContent=r+" - "+this.setModifiedDate()}"sticky"===d[h].shapeAnnotationType&&this.pdfViewer.annotationModule.storeAnnotationCollections(d[h],e.pageIndex)}}else r=(n=o.firstChild.firstChild.childNodes[1]).textContent.split("-")[0],n.textContent=r+" - "+this.setModifiedDate();i&&(n=o.firstChild.firstChild.childNodes[1],void 0!==e.modifiedDate)&&(r=n.textContent.split("-")[0],n.textContent=r+" - "+this.setExistingAnnotationModifiedDate(e.modifiedDate))}}},s.prototype.saveImportedStickyNotesAnnotations=function(e,t){var i;e.Author||(e.Author="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.stickyNotesSettings.author);var n=this.pdfViewer.stickyNotesSettings.isLock?this.pdfViewer.stickyNotesSettings.isLock:this.pdfViewer.annotationSettings.isLock,o=this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(e);i={shapeAnnotationType:"sticky",author:e.Author,allowedInteractions:o,modifiedDate:e.ModifiedDate,subject:e.Subject,note:e.Note,opacity:e.Opacity,state:e.State,stateModel:e.StateModel,pathData:"",comments:this.pdfViewer.annotationModule.getAnnotationComments(e.Comments,e,e.Author),review:{state:e.State,stateModel:e.StateModel,modifiedDate:e.ModifiedDate,author:e.Author},pageNumber:t,bounds:{left:e.Bounds.X,top:e.Bounds.Y,width:e.Bounds.Width,height:e.Bounds.Height,right:e.Bounds.Right,bottom:e.Bounds.Bottom},annotName:e.AnnotName,color:e.color,annotationSelectorSettings:this.getSettings(e),customData:this.pdfViewer.annotation.getCustomData(e),annotationSettings:{isLock:n},isPrint:e.IsPrint,isCommentLock:e.IsCommentLock},this.pdfViewer.annotationModule.storeAnnotations(t,i,"_annotations_sticky")},s.prototype.updateStickyNotesAnnotationCollections=function(e,t){e.Author||(e.Author="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.stickyNotesSettings.author);var n=this.pdfViewer.stickyNotesSettings.isLock?this.pdfViewer.stickyNotesSettings.isLock:this.pdfViewer.annotationSettings.isLock,o=e.AllowedInteraction?e.AllowedInteraction:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(e);return e.IsLock&&(n=e.isLock),{shapeAnnotationType:"sticky",author:e.Author,allowedInteractions:o,modifiedDate:e.ModifiedDate,subject:e.Subject,note:e.Note,opacity:e.Opacity,state:e.State,stateModel:e.StateModel,pathData:"",comments:this.pdfViewer.annotationModule.getAnnotationComments(e.Comments,e,e.Author),review:{state:e.State,stateModel:e.StateModel,modifiedDate:e.ModifiedDate,author:e.Author},bounds:{left:e.Bounds.X,top:e.Bounds.Y,width:e.Bounds.Width,height:e.Bounds.Height,right:e.Bounds.Right,bottom:e.Bounds.Bottom},annotationId:e.AnnotName,color:e.color,pageNumber:t,customData:this.pdfViewer.annotation.getCustomData(e),annotationSettings:{isLock:n},isPrint:e.IsPrint,isCommentLock:e.IsCommentLock}},s.prototype.clear=function(){this.commentsCount=0,this.commentsreplyCount=0,this.isAccordionContainer=!0,this.isEditableElement=!1,this.isCreateContextMenu=!1,this.isPageCommentsRendered=!1,this.isCommentsRendered=!1,this.isAnnotationRendered=!1,this.commentMenuObj&&this.commentMenuObj.destroy();var e=document.querySelectorAll(".e-pv-accordion-page-container");if(e)for(var t=0;t<e.length;t++)e[t].remove();this.commentsRequestHandler&&this.commentsRequestHandler.clear()},s.prototype.getModuleName=function(){return"StickyNotesAnnotation"},s.prototype.updateAddAnnotationDetails=function(e,t){t=e?e.offset?e.offset:{x:1,y:1}:(e={offset:{x:1,y:1},pageNumber:0}).offset;var i=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),n=this.pdfViewer.annotation.createGUID(),o=this.pdfViewer.stickyNotesSettings.annotationSelectorSettings?this.pdfViewer.stickyNotesSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,r=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.stickyNotesSettings),l=this.pdfViewer.stickyNotesSettings.allowedInteractions?this.pdfViewer.stickyNotesSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions;r.isLock=!!e.isLock&&e.isLock;var d=[];return d[0]={AllowedInteractions:e.allowedInteractions?e.allowedInteractions:l,AnnotName:n,AnnotType:"sticky",AnnotationFlags:null,AnnotationSelectorSettings:e.annotationSelectorSettings?e.annotationSelectorSettings:o,AnnotationSettings:r,Author:e.author?e.author:"Guest",Bounds:{X:t.x,Y:t.y,Width:30,Height:30,Left:t.x,Top:t.y,Location:{X:t.x,Y:t.y},Size:{Height:30,IsEmpty:!1,Width:30}},Color:{IsEmpty:!1,B:51,Blue:.2,C:0,G:255},Comments:null,CreatedDate:i,CustomData:e.customData?e.customData:null,ExistingCustomData:null,Icon:"Comment",IsCommentLock:!1,IsLock:!!e.isLock&&e.isLock,IsPrint:!e.isPrint||e.isPrint,ModifiedDate:i,Note:"",Opacity:e.opacity?e.opacity:1,Reference:null,Size:{IsEmpty:!0,Width:0,Height:0},State:"",StateModel:"",StrokeColor:null,SubType:null,Subject:"Sticky Note",Type:null},{stickyNotesAnnotation:d}},s.prototype.getAnnotationType=function(e){var t;return"stamp"===e||"Stamp"===e?t="stamp":"shape"===e||"Line"===e||"Radius"===e||"Rectangle"===e||"Ellipse"===e||"Polygon"===e||"LineWidthArrowHead"===e||"Square"===e||"Circle"===e?t="shape":"textMarkup"===e?t="textMarkup":"freeText"===e||"FreeText"===e?t="freeText":"sticky"===e||"StickyNotes"===e?t="sticky":"measure"===e||"shape_measure"===e?t="measure":("ink"===e||"Ink"===e)&&(t="ink"),t},s.prototype.getAuthorName=function(e,t){var i;if(e){var n=e.shapeAnnotationType,o=this.getAnnotationType(n);i=this.pdfViewer.annotationModule.updateAnnotationAuthor(o,n)}else i=t.getAttribute("author");return i},s}(),zb=function(){function s(e,t){this.newObject=[],this.outputString="",this.inkAnnotationindex=[],this.isAddAnnotationProgramatically=!1,this.currentPageNumber="",this.pdfViewer=e,this.pdfViewerBase=t}return s.prototype.drawInk=function(){this.pdfViewerBase.disableTextSelectionMode(),this.pdfViewer.tool="Ink"},s.prototype.drawInkAnnotation=function(e){if(this.pdfViewerBase.isToolbarInkClicked){this.pdfViewerBase.isInkAdded=!0;var t=isNaN(e)?this.pdfViewerBase.currentPageNumber-1:e;if(this.outputString&&""!==this.outputString){var i=this.addInk(t);this.pdfViewer.renderDrawing(void 0,t),this.pdfViewer.clearSelection(t),this.pdfViewer.select([i.id],i.annotationSelectorSettings),this.pdfViewer.toolbar&&this.pdfViewer.toolbar.annotationToolbarModule&&this.pdfViewer.toolbar.annotationToolbarModule.enableSignaturePropertiesTools(!0),a.AR.isDevice&&!this.pdfViewer.enableDesktopMode&&this.pdfViewer.enableToolbar&&this.pdfViewer.enableAnnotationToolbar&&this.pdfViewer.toolbarModule.annotationToolbarModule.createPropertyTools("Ink")}else this.outputString="",this.newObject=[],this.pdfViewerBase.isToolbarInkClicked=!1,this.pdfViewer.tool="";this.pdfViewerBase.isInkAdded=!1}},s.prototype.storePathData=function(){this.convertToPath(this.newObject),this.newObject=[]},s.prototype.drawInkInCanvas=function(e,t){""!==this.currentPageNumber&&parseInt(this.currentPageNumber)!==t&&(this.drawInkAnnotation(parseInt(this.currentPageNumber)),this.pdfViewerBase.isToolbarInkClicked=!0,this.pdfViewer.tool="Ink");var i=this.pdfViewerBase.getZoomFactor(),n=this.pdfViewerBase.getWindowDevicePixelRatio(),r=document.getElementById(this.pdfViewer.element.id+"_annotationCanvas_"+t).getContext("2d"),l=this.pdfViewer.inkAnnotationSettings.thickness?this.pdfViewer.inkAnnotationSettings.thickness:1,d=this.pdfViewer.inkAnnotationSettings.opacity?this.pdfViewer.inkAnnotationSettings.opacity:1,h=this.pdfViewer.inkAnnotationSettings.strokeColor?this.pdfViewer.inkAnnotationSettings.strokeColor:"#ff0000";(!a.AR.isDevice||a.AR.isDevice&&i<=.7)&&r.setTransform(n,0,0,n,0,0),r.beginPath(),r.lineJoin="round",r.lineCap="round",r.moveTo(e.prevPosition.x,e.prevPosition.y),r.lineTo(e.currentPosition.x,e.currentPosition.y),r.lineWidth=l*i>1?l*i:l,r.strokeStyle=h,r.globalAlpha=d,r.stroke(),r.arc(e.prevPosition.x,e.prevPosition.y,1,0,2*Math.PI,!0),r.closePath(),this.pdfViewerBase.prevPosition=e.currentPosition,this.newObject.push(e.currentPosition.x,e.currentPosition.y),this.currentPageNumber=t.toString()},s.prototype.convertToPath=function(e){this.movePath(e[0],e[1]),this.linePath(e[0],e[1]);for(var t=2;t<e.length;t+=2)this.linePath(e[t],e[t+1])},s.prototype.linePath=function(e,t){!(0,a.le)(e)&&!(0,a.le)(t)&&(this.outputString+="L"+e+","+t+" ")},s.prototype.movePath=function(e,t){!(0,a.le)(e)&&!(0,a.le)(t)&&(this.outputString+="M"+e+","+t+" ")},s.prototype.addInk=function(e){var n,t=this.calculateInkSize();if(this.pdfViewerBase.getZoomFactor(),this.pdfViewerBase.isToolbarInkClicked){var o=this.pdfViewer.annotation.createGUID(),r=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),l=isNaN(e)?this.pdfViewerBase.currentPageNumber-1:e,f=this.pdfViewer.inkAnnotationSettings.isLock?this.pdfViewer.inkAnnotationSettings.isLock:this.pdfViewer.annotationSettings.isLock,c="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.inkAnnotationSettings.author?this.pdfViewer.inkAnnotationSettings.author:"Guest",m=this.pdfViewer.inkAnnotationSettings.isPrint,g=this.pdfViewer.inkAnnotationSettings.allowedInteractions?this.pdfViewer.inkAnnotationSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions,v=this.pdfViewer.inkAnnotationSettings?this.pdfViewer.inkAnnotationSettings:this.pdfViewer.annotationSettings;n={id:"ink"+this.pdfViewerBase.inkCount,bounds:{x:t.x,y:t.y,width:t.width,height:t.height},pageIndex:l,data:this.outputString,customData:this.pdfViewer.inkAnnotationSettings.customData,shapeAnnotationType:"Ink",opacity:this.pdfViewer.inkAnnotationSettings.opacity?this.pdfViewer.inkAnnotationSettings.opacity:1,strokeColor:this.pdfViewer.inkAnnotationSettings.strokeColor?this.pdfViewer.inkAnnotationSettings.strokeColor:"#ff0000",thickness:this.pdfViewer.inkAnnotationSettings.thickness?this.pdfViewer.inkAnnotationSettings.thickness:1,annotName:o,comments:[],author:c,subject:"Ink",notes:"",review:{state:"",stateModel:"",modifiedDate:r,author:c},annotationSelectorSettings:this.getSelector("Ink",""),modifiedDate:r,annotationSettings:v,isPrint:m,allowedInteractions:g,isCommentLock:!1,isLocked:f};var y=this.pdfViewer.add(n),b={left:n.bounds.x,top:n.bounds.y,width:n.bounds.width,height:n.bounds.height},C={opacity:n.opacity,strokeColor:n.strokeColor,thickness:n.thickness,modifiedDate:n.modifiedDate,width:n.bounds.width,height:n.bounds.height,data:this.outputString};this.pdfViewerBase.inkCount++;var S=this.pdfViewer.annotation.stickyNotesAnnotationModule.addComments("ink",n.pageIndex+1,n.shapeAnnotationType);S&&(document.getElementById(S).id=o),n.annotName=o,this.pdfViewer.annotation.addAction(l,null,y,"Addition","",y,y),this.pdfViewer.annotationModule.storeAnnotations(l,n,"_annotations_ink"),this.pdfViewer.fireAnnotationAdd(n.pageIndex,n.annotName,"Ink",b,C),this.pdfViewerBase.isInkAdded&&(this.outputString="",this.newObject=[]),this.pdfViewerBase.isToolbarInkClicked=!1,this.pdfViewer.tool=""}return n},s.prototype.setAnnotationMode=function(){this.pdfViewerBase.isToolbarInkClicked?this.drawInkAnnotation():(this.pdfViewerBase.isToolbarInkClicked=!0,this.drawInk())},s.prototype.saveInkSignature=function(){for(var e=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_ink"),t=new Array,i=0;i<this.pdfViewerBase.pageCount;i++)t[i]=[];if(e)for(var n=JSON.parse(e),o=0;o<n.length;o++){var r=[],l=n[o];if(l){for(var d=0;l.annotations.length>d;d++){this.pdfViewer.annotationModule.updateModifiedDate(l.annotations[d]),l.annotations[d].strokeColor=JSON.stringify(this.pdfViewerBase.signatureModule.getRgbCode(l.annotations[d].strokeColor)),l.annotations[d].bounds=JSON.stringify(this.pdfViewer.annotation.getInkBounds(l.annotations[d].bounds,l.pageIndex));var f=gt(ze(l.annotations[d].data));l.annotations[d].data=JSON.stringify(f)}r=l.annotations}t[l.pageIndex]=r}return JSON.stringify(t)},s.prototype.addInCollection=function(e,t){if(t){var i=this.getAnnotations(e,null);i&&i.push(t),this.manageInkAnnotations(i,e)}},s.prototype.calculateInkSize=function(){for(var e=-1,t=-1,i=-1,n=-1,o=ze(this.outputString),r=this.pdfViewerBase.getZoomFactor(),l=0;l<o.length;l++){var d=o[l];if(-1===e)e=d.x,i=d.x,t=d.y,n=d.y;else{var h=d.x,p=d.y;e>=h&&(e=h),t>=p&&(t=p),i<=h&&(i=h),n<=p&&(n=p)}}return{x:e/r,y:t/r,width:(i-e)/r,height:(n-t)/r}},s.prototype.renderExistingInkSignature=function(e,t,i){var n,o=!1;if(!i)for(var r=0;r<this.inkAnnotationindex.length;r++)if(this.inkAnnotationindex[r]===t){o=!0;break}if(e&&!o){e.length>0&&-1===this.inkAnnotationindex.indexOf(t)&&this.inkAnnotationindex.push(t);for(var l=0;l<e.length;l++){var d=e[l];if(d){var h=d.PathData;i&&h&&("object"==typeof h&&h.length>1?h=Gt(h):d.IsPathData||h.split("command").length<=1||(h=Gt(JSON.parse(h)))),this.outputString=h;var p=this.calculateInkSize();this.outputString="";var f=0,c=1,u=d.Bounds;p&&(p.height<1?(f=u.Height?u.Height:u.height,c=u.Height?u.Height:u.height):p.width<1&&(f=u.Width?u.Width:u.width,c=u.Width?u.Width:u.width));var x,m=(0,a.le)(u.X)?u.x+f/2:u.X+f/2,g=(0,a.le)(u.Y)?u.y+f/2:u.Y+f/2,v=u.Width?u.Width-(c-1):u.width-(c-1),y=u.Height?u.Height-(c-1):u.height-(c-1),b=!!d.AnnotationSettings&&d.AnnotationSettings.isLock,C=d.AnnotationSelectorSettings?d.AnnotationSelectorSettings:this.getSelector(d,"Ink"),S=this.pdfViewer.annotation.getCustomData(d);x=d.AnnotationSettings?d.AnnotationSettings.isPrint:this.pdfViewer.inkAnnotationSettings.isPrint,d.IsLocked&&(b=d.IsLocked),"Highlight"===d.Subject&&1===d.Opacity&&(d.Opacity=d.Opacity/2),d.allowedInteractions=d.AllowedInteractions?d.AllowedInteractions:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(d),n={id:"ink"+this.pdfViewerBase.inkCount,bounds:{x:m,y:g,width:v,height:y},pageIndex:t,data:h,shapeAnnotationType:"Ink",opacity:d.Opacity,strokeColor:d.StrokeColor,thickness:d.Thickness,annotName:d.AnnotName,comments:this.pdfViewer.annotationModule.getAnnotationComments(d.Comments,d,d.Author),author:d.Author,allowedInteractions:d.allowedInteractions,subject:d.Subject,modifiedDate:d.ModifiedDate,review:{state:"",stateModel:"",modifiedDate:d.ModifiedDate,author:d.Author},notes:d.Note,annotationSettings:{isLock:b},annotationSelectorSettings:C,customData:S,isPrint:x,isCommentLock:d.IsCommentLock},this.pdfViewer.add(n);var V=document.getElementById(this.pdfViewer.element.id+"_annotationCanvas_"+d.pageIndex);this.pdfViewer.renderDrawing(V,n.pageIndex),this.pdfViewer.annotationModule.storeAnnotations(n.pageIndex,n,"_annotations_ink"),this.isAddAnnotationProgramatically&&this.pdfViewer.fireAnnotationAdd(n.pageIndex,n.annotName,"Ink",u,{opacity:n.opacity,strokeColor:n.strokeColor,thickness:n.thickness,modifiedDate:n.modifiedDate,width:n.bounds.width,height:n.bounds.height,data:this.outputString}),this.pdfViewerBase.currentSignatureAnnot=null,this.pdfViewerBase.signatureCount++,this.pdfViewerBase.inkCount++,this.pdfViewerBase.navigationPane&&this.pdfViewerBase.navigationPane.annotationMenuObj&&this.pdfViewer.isSignatureEditable&&(this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant("Export Annotations")],!0),this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant("Export XFDF")],!0))}}}},s.prototype.saveImportedInkAnnotation=function(e,t){var n=e.Bounds,o={x:n.X,y:n.Y,width:n.Width,height:n.Height},r=this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(e),l=this.pdfViewer.annotation.getCustomData(e),d=this.pdfViewer.annotationModule.getAnnotationComments(e.Comments,e,e.Author),h={state:e.State,stateModel:e.StateModel,modifiedDate:e.ModifiedDate,author:e.Author},p=e.AnnotationSettings?e.AnnotationSettings:this.pdfViewer.annotationModule.updateAnnotationSettings(e),f=this.getSettings(e),c=e.PathData;"object"==typeof c&&c.length>1?c=Gt(c):e.IsPathData||c.split("command").length<=1||(c=Gt(JSON.parse(c))),this.pdfViewer.annotationModule.storeAnnotations(t,{allowedInteractions:r,annotName:e.AnnotName,annotationSelectorSettings:f,annotationSettings:p,author:e.Author,bounds:o,customData:l,comments:d,data:c,id:"Ink",isCommentLock:e.IsCommentLock,isLocked:e.IsLocked,isPrint:e.IsPrint,modifiedDate:e.ModifiedDate,note:e.Note,opacity:e.Opacity,pageIndex:t,review:h,shapeAnnotationType:e.AnnotationType,strokeColor:e.StrokeColor,subject:e.Subject,thickness:e.Thickness},"_annotations_ink")},s.prototype.getSettings=function(e){return e.AnnotationSelectorSettings?e.AnnotationSelectorSettings:this.getSelector(e.ShapeAnnotationType,e.Subject)},s.prototype.storeInkSignatureData=function(e,t){this.pdfViewer.annotation.addAction(t.pageIndex,null,t,"Addition","",t,t);var i,n=t.bounds.left?t.bounds.left:t.bounds.x,o=t.bounds.top?t.bounds.top:t.bounds.y;t.wrapper&&t.wrapper.bounds&&(n=t.wrapper.bounds.left,o=t.wrapper.bounds.top),i={id:t.id,bounds:{x:n,y:o,width:t.bounds.width,height:t.bounds.height},shapeAnnotationType:"Ink",opacity:t.opacity,thickness:t.thickness,strokeColor:t.strokeColor,pageIndex:t.pageIndex,data:t.data,annotName:t.annotName,comments:t.comments,author:t.author,subject:t.subject,modifiedDate:t.modifiedDate,review:{state:"",stateModel:"",modifiedDate:t.modifiedDate,author:t.author},notes:t.notes,annotationSelectorSettings:this.getSelector(t,"Ink"),isCommentLock:t.isCommentLock};var r=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_ink");if(r){var f=JSON.parse(r);window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_ink");var c=this.pdfViewer.annotationModule.getPageCollection(f,e);if(f[c])f[c].annotations.push(i),f[c].annotations.indexOf(i);else{var u={pageIndex:e,annotations:[]};u.annotations.push(i),u.annotations.indexOf(i),f.push(u)}var p=JSON.stringify(f);window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_annotations_ink",p)}else{var d={pageIndex:e,annotations:[]};d.annotations.push(i),d.annotations.indexOf(i);var h=[];h.push(d),p=JSON.stringify(h),window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_annotations_ink",p)}},s.prototype.getSelector=function(e,t){var i=this.pdfViewer.annotationSelectorSettings;return"Ink"===e&&this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings&&(i=this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings),i},s.prototype.getAnnotations=function(e,t){var i,n=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_ink");if(n){var o=JSON.parse(n),r=this.pdfViewer.annotationModule.getPageCollection(o,e);i=o[r]?o[r].annotations:t}else i=t;return i},s.prototype.modifySignatureInkCollection=function(e,t,i){this.pdfViewerBase.updateDocumentEditedProperty(!0);var n=null,o=this.getAnnotations(t,null);if(null!=o&&i){for(var r=0;r<o.length;r++)if(i.id===o[r].id){if("bounds"===e)o[r].bounds={x:i.wrapper.bounds.left,y:i.wrapper.bounds.top,width:i.bounds.width,height:i.bounds.height};else if("stroke"===e)o[r].strokeColor=i.wrapper.children[0].style.strokeColor;else if("opacity"===e)o[r].opacity=i.wrapper.children[0].style.opacity;else if("thickness"===e)o[r].thickness=i.wrapper.children[0].style.strokeWidth;else if("notes"===e)o[r].notes=i.notes;else if("delete"===e){n=o.splice(r,1)[0];break}o[r].modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),this.pdfViewer.annotationModule.storeAnnotationCollections(o[r],t)}this.manageInkAnnotations(o,t)}return n},s.prototype.manageInkAnnotations=function(e,t){var i=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_ink");if(i){var n=JSON.parse(i);window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_ink");var o=this.pdfViewer.annotationModule.getPageCollection(n,t);n[o]&&(n[o].annotations=e);var r=JSON.stringify(n);window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_annotations_ink",r)}},s.prototype.updateInkCollections=function(e,t,i){if(e){var o=e.Bounds,r=o.X,l=o.Y,d=o.Width,h=o.Height,p=e.customData,f=e.isPrint,c=e.AllowedInteractions?e.AllowedInteractions:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(e),u=e.AnnotationSettings?e.AnnotationSettings:this.pdfViewer.inkAnnotationSettings?this.pdfViewer.inkAnnotationSettings:this.pdfViewer.annotationSettings;e.IsLocked&&(u.isLock=e.IsLocked);var m=e.PathData;return i&&(m=Gt(JSON.parse(e.PathData))),{id:"ink"+this.pdfViewerBase.signatureCount,bounds:{x:r,y:l,width:d,height:h},pageIndex:t,data:m,shapeAnnotationType:"Ink",opacity:e.Opacity,strokeColor:e.StrokeColor,thickness:e.Thickness,annotationId:e.AnnotName,customData:p,comments:this.pdfViewer.annotationModule.getAnnotationComments(e.Comments,e,e.Author),author:e.Author,allowedInteractions:c,subject:e.Subject,modifiedDate:e.ModifiedDate,review:{state:"",stateModel:"",modifiedDate:e.ModifiedDate,author:e.Author},notes:e.Note,isPrint:f,isCommentLock:e.IsCommentLock,annotationSettings:u,isLocked:u.isLock}}},s.prototype.updateAddAnnotationDetails=function(e,t,i){t=e?e.offset?e.offset:{x:10,y:10}:(e={offset:{x:10,y:10},pageNumber:0,width:void 0,height:void 0}).offset;var n=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),o=this.pdfViewer.annotation.createGUID(),r=this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings?this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,l=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.inkAnnotationSettings),d=this.pdfViewer.inkAnnotationSettings.allowedInteractions?this.pdfViewer.inkAnnotationSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions;l.isLock=!!e.isLock&&e.isLock,e.width=e.width?e.width:150,e.height=e.height?e.height:60;var h=e.path?e.path:"";if(!(0,a.le)(h))if("M"===h[0]||"L"===h[0]){var f=gt(ze(h));h=JSON.stringify(f)}else h=Gt(JSON.parse(h));e.path=h;var c=[];return c[0]={AllowedInteractions:e.allowedInteractions?e.allowedInteractions:d,AnnotName:o,AnnotType:"ink",AnnotationFlags:null,AnnotationSelectorSettings:e.annotationSelectorSettings?e.annotationSelectorSettings:r,AnnotationSettings:l,AnnotationType:"Ink",Author:e.author?e.author:"Guest",Bounds:{X:t.x,Y:t.y,Width:e.width,Height:e.height,Left:t.x,Top:t.y,Location:{X:t.x,Y:t.y},Size:{Height:e.height,IsEmpty:!1,Width:e.width}},Comments:null,CreatedDate:n,CustomData:e.customData?e.customData:null,ExistingCustomData:null,IsCommentLock:!1,IsLock:!!e.isLock&&e.isLock,IsPrint:!e.isPrint||e.isPrint,ModifiedDate:n,Note:"",Opacity:e.opacity?e.opacity:1,PathData:e.path,PageNumber:i,State:"",StateModel:"",StrokeColor:e.strokeColor?e.strokeColor:"rgba(255,0,0,1)",SubType:null,Subject:"Ink",Type:null,Thickness:e.thickness?e.thickness:1},{signatureInkAnnotation:c}},s}(),Hb=function(){function s(e,t){var i=this;this.thumbnailWidthMin=200,this.contentContainerScrollWidth=33,this.closeButtonLeft=170,this.isTooltipCreated=!1,this.isThumbnail=!1,this.annotationContextMenu=[],this.isCommentPanelShow=!1,this.commentPanelWidthMin=300,this.isNavigationToolbarVisible=!1,this.isBookmarkListOpen=!1,this.isNavigationPaneResized=!1,this.isBookmarkOpen=!1,this.isThumbnailOpen=!1,this.restrictUpdateZoomValue=!0,this.loadImportAnnotation=function(n){if(null!==n.target.files[0]){var r=n.target.files[0];if(r){i.pdfViewer.fireImportStart(r);var l=r.type;if(r.name.split(".json").length>1&&l.includes("json"))(d=new FileReader).readAsDataURL(r),d.onload=function(p){if(p.currentTarget.result){var f=p.currentTarget.result.split(",")[1],c=atob(f);if(c){var u=JSON.parse(c);i.pdfViewerBase.importAnnotations(u,Lt.Json)}}};else if(r.name.split(".xfdf").length>1&&(l.includes("xfdf")||n.target.accept.includes("xfdf"))){var d;(d=new FileReader).readAsDataURL(r),d.onload=function(f){if(f.currentTarget.result){var c=f.currentTarget.result.split(",")[1];atob(c)&&i.pdfViewerBase.importAnnotations(c,Lt.Xfdf,!0)}}}else i.pdfViewer.fireImportFailed(r,i.pdfViewer.localeObj.getConstant("Import Failed")),(0,a.xr)()?i.pdfViewer._dotnetInstance.invokeMethodAsync("GetLocaleText","PdfViewer_ImportFailed").then(function(p){i.pdfViewerBase.openImportExportNotificationPopup(p)}):i.pdfViewerBase.openImportExportNotificationPopup(i.pdfViewer.localeObj.getConstant("Import Failed"))}n.target.value=""}},this.resizeIconMouseOver=function(n){n.srcElement.style.cursor="e-resize"},this.resizePanelMouseDown=function(n){var o=null;(o=i).offset=[o.sideBarResizer.offsetLeft-n.clientX,o.sideBarResizer.offsetTop-n.clientY,o.sideBarResizer.offsetParent.clientWidth],i.previousX=n.clientX,o.isDown=!0,o.isNavigationPaneResized=!0,o.pdfViewerBase.viewerContainer.style.cursor="e-resize",o.sideBarContentContainer&&(o.sideBarContentContainer.style.cursor="e-resize")},this.resizeViewerMouseLeave=function(n){var o=null;(o=i).isDown=!1,o.isNavigationPaneResized&&o.sideBarContentContainer&&(o.pdfViewerBase.viewerContainer.style.cursor="default",o.sideBarContentContainer.style.cursor="default",o.isNavigationPaneResized=!1),o.commentPanelContainer&&o.isCommentPanelShow&&(i.commentPanelMouseLeave(n),o.isCommentPanelShow=!1)},this.resizePanelMouseMove=function(n){var o=null;if(o=i,!i.pdfViewerBase.getPopupNoteVisibleStatus())if(i.pdfViewerBase.skipPreventDefault(n.target)&&n.preventDefault(),o.isDown&&i.sideBarContentContainer){var d,h;i.pdfViewer.enableRtl?((d=i.previousX-n.clientX+o.offset[2])>(h=Math.floor(i.outerContainerWidth/2))&&(d=h),d<i.thumbnailWidthMin&&(d=i.thumbnailWidthMin),o.sideBarResizer.style.right=d+"px",o.sideBarContentContainer.style.width=d+"px",o.sideBarContent.style.width=d+"px",o.sideBarContentSplitter.style.width=d+"px",o.sideBarTitleContainer.style.width=d+"px",o.pdfViewerBase.viewerContainer.style.right=o.getViewerContainerLeft()+"px",o.pdfViewerBase.viewerContainer.style.left=o.getViewerContainerRight()+"px"):((d=n.clientX+o.offset[0])>(h=Math.floor(i.outerContainerWidth/2))&&(d=h),d<i.thumbnailWidthMin&&(d=i.thumbnailWidthMin),o.sideBarResizer.style.left=d+"px",o.closeDiv.style.left=d-o.contentContainerScrollWidth+"px",o.sideBarContentContainer.style.width=d+"px",o.sideBarContent.style.width=d+"px",o.sideBarContentSplitter.style.width=d+"px",o.sideBarTitleContainer.style.width=d+"px",o.pdfViewerBase.viewerContainer.style.left=o.getViewerContainerLeft()+"px",o.pdfViewerBase.viewerContainer.style.right=o.getViewerContainerRight()+"px");var p=o.pdfViewer.element.clientWidth-o.getViewerContainerLeft()-o.getViewerContainerRight();o.pdfViewerBase.viewerContainer.style.width=p+"px",o.pdfViewerBase.pageContainer.style.width=o.pdfViewerBase.viewerContainer.clientWidth+"px",o.pdfViewer.thumbnailViewModule.gotoThumbnailImage(o.pdfViewerBase.currentPageNumber-1),o.pdfViewerBase.updateZoomValue(),o.bookmarkButton.children[0].classList.contains("e-pv-bookmark-disable-icon")||o.pdfViewer.bookmarkViewModule.setBookmarkContentHeight()}else o.isCommentPanelShow&&i.commentPanelContainer&&i.updateCommentPanelContainer(n)},this.sideToolbarOnClose=function(n){var o=null;(o=i).removeThumbnailSelectionIconTheme(),o.removeBookmarkSelectionIconTheme(),o.updateViewerContainerOnClose()},this.sideToolbarOnClick=function(n){i.sideBarTitle.textContent=i.pdfViewer.localeObj.getConstant("Page Thumbnails"),i.sideBarContent.setAttribute("aria-label","Thumbnail View Panel");var o=null;o=i;var l=(0,a.xr)()?i.pdfViewer.element.querySelector(".e-pv-bookmark-view"):document.getElementById(i.pdfViewer.element.id+"_bookmark_view");if(l&&(o.removeBookmarkSelectionIconTheme(),l.style.display="none"),document.getElementById(i.pdfViewer.element.id+"_thumbnail_view").style.display="flex",o.sideBarContentContainer&&("none"!==o.sideBarContentContainer.style.display?o.isBookmarkOpen?(o.isThumbnailOpen=!0,o.setThumbnailSelectionIconTheme(),i.updateViewerContainerOnExpand()):(o.isThumbnailOpen=!1,o.removeThumbnailSelectionIconTheme(),i.updateViewerContainerOnClose()):(i.sideBarContent.focus(),o.isThumbnailOpen=!0,o.setThumbnailSelectionIconTheme(),i.updateViewerContainerOnExpand())),o.isBookmarkOpen=!1,i.pdfViewer.annotationModule&&i.pdfViewer.annotationModule.inkAnnotationModule){var d=parseInt(i.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber);i.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(d)}},this.openThumbnailPane=function(){var n=null;n=i;var o=document.getElementById(i.pdfViewer.element.id+"_sideBarContent"),r=document.getElementById(i.pdfViewer.element.id+"_sideBarContentContainer"),l=document.getElementById(i.pdfViewer.element.id+"_viewerContainer"),d=document.getElementById(i.pdfViewer.element.id+"_pageViewContainer");if(document.getElementById(i.pdfViewer.element.id+"_thumbnail_view").style.display="block",document.getElementById(i.pdfViewer.element.id+"_sideBarResizer").style.display="none",document.getElementById(i.pdfViewer.element.id+"_sideBarTitleContainer").style.display="none",document.getElementById(i.pdfViewer.element.id+"_sideBarContentSplitter").style.display="none",o.classList.add("e-thumbnail"),r.classList.add("e-thumbnail"),r&&(n.isThumbnail?(r.style.display="none",l.style.width=n.pdfViewer.element.clientWidth+"px",d.style.width=l.clientWidth+"px",l.style.left=r.clientWidth+"px",n.pdfViewerBase.updateZoomValue(),n.isThumbnail=!1):(o.focus(),r.style.display="block",l.style.width=n.pdfViewer.element.clientWidth-r.clientWidth+"px",d.style.width=l.clientWidth+"px",l.style.left=r.clientWidth+"px",n.pdfViewerBase.updateZoomValue(),n.pdfViewer.thumbnailViewModule.gotoThumbnailImage(n.pdfViewerBase.currentPageNumber-1),n.isThumbnail=!0)),i.pdfViewer.annotationModule&&i.pdfViewer.annotationModule.inkAnnotationModule){var h=parseInt(i.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber);i.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(h)}},this.bookmarkButtonOnClick=function(n){i.openBookmarkcontentInitially()},this.commentPanelMouseDown=function(n){var o=null;(o=i).offset=[o.commentPanelResizer.offsetLeft-n.clientX,o.commentPanelResizer.offsetTop-n.clientY,o.getViewerContainerRight()],i.isCommentPanelShow=!0,i.previousX=n.clientX,o.pdfViewerBase.viewerContainer.style.cursor="e-resize",o.commentPanelResizer.style.cursor="e-resize"},this.updateCommentPanelContainer=function(n){var r,l,o=null;o=i,i.pdfViewer.enableRtl?((r=n.clientX+o.offset[0])>(l=Math.floor(i.outerContainerWidth/2))&&(r=l),r<i.commentPanelWidthMin&&(r=i.commentPanelWidthMin),o.commentPanelResizer.style.left=r+"px",o.commentPanelContainer.style.width=r+"px",o.pdfViewerBase.viewerContainer.style.left=o.getViewerContainerRight()+"px",o.pdfViewerBase.viewerContainer.style.right=o.getViewerContainerLeft()+"px"):((r=i.previousX-n.clientX+o.offset[2])>(l=Math.floor(i.outerContainerWidth/2))&&(r=l),r<i.commentPanelWidthMin&&(r=i.commentPanelWidthMin),o.commentPanelResizer.style.right=r+"px",o.commentPanelContainer.style.width=r+"px",o.pdfViewerBase.viewerContainer.style.right=o.getViewerContainerRight()+"px",o.pdfViewerBase.viewerContainer.style.left=o.getViewerContainerLeft()+"px"),i.pdfViewer.annotation.stickyNotesAnnotationModule.updateCommentPanelTextTop();var h=o.pdfViewer.element.clientWidth-o.getViewerContainerLeft()-o.getViewerContainerRight();o.pdfViewerBase.viewerContainer.style.width=h+"px",o.pdfViewerBase.pageContainer.style.width=o.pdfViewerBase.viewerContainer.clientWidth+"px",o.pdfViewerBase.updateZoomValue()},this.commentPanelMouseLeave=function(n){var o=null;(o=i).commentPanelContainer&&(o.pdfViewerBase.viewerContainer.style.cursor="default",o.commentPanelContainer.style.cursor="default")},this.pdfViewer=e,this.pdfViewerBase=t}return s.prototype.initializeNavigationPane=function(){!a.AR.isDevice||this.pdfViewer.enableDesktopMode?this.createNavigationPane():(this.commentPanelContainer=(0,a.az)("div",{id:this.pdfViewer.element.id+"_commantPanel",className:"e-pv-mobile-comments-container"}),this.pdfViewerBase.mainContainer.appendChild(this.commentPanelContainer),this.pdfViewer.enableRtl?this.commentPanelContainer.style.left="0px":this.commentPanelContainer.style.right="0px",this.commentPanelContainer.style.bottom="0px",this.createCommentPanelTitleContainer(),this.commentPanelContainer.style.display="none",this.commentsContentContainer=(0,a.az)("div",{id:this.pdfViewer.element.id+"_commentscontentcontainer",className:"e-pv-comments-content-container"}),this.commentPanelContainer.appendChild(this.commentsContentContainer),this.createFileElement(this.commentPanelContainer),this.createXFdfFileElement(this.commentPanelContainer))},s.prototype.createNavigationPane=function(){(0,a.xr)()?(this.sideBarToolbar=this.pdfViewer.element.querySelector(".e-pv-sidebar-toolbar"),this.sideBarToolbarSplitter=this.pdfViewer.element.querySelector(".e-pv-sidebar-toolbar-splitter"),this.sideBarContentContainer=this.pdfViewer.element.querySelector(".e-pv-sidebar-content-container"),this.sideBarContentSplitter=this.pdfViewer.element.querySelector(".e-pv-sidebar-content-splitter"),this.sideBarContent=this.pdfViewer.element.querySelector(".e-pv-sidebar-content"),this.sideBarTitleContainer=this.pdfViewer.element.querySelector(".e-pv-sidebar-title-container"),this.sideBarTitle=this.pdfViewer.element.querySelector(".e-pv-sidebar-title"),this.sideBarResizer=this.pdfViewer.element.querySelector(".e-pv-sidebar-resizer")):(this.sideBarToolbar=(0,a.az)("div",{id:this.pdfViewer.element.id+"_sideBarToolbar",className:"e-pv-sidebar-toolbar",attrs:{role:"toolbar","aria-orientation":"vertical",tabindex:"-1","aria-label":"Sidebar Toolbar"}}),this.sideBarToolbarSplitter=(0,a.az)("div",{id:this.pdfViewer.element.id+"_sideBarToolbarSplitter",className:"e-pv-sidebar-toolbar-splitter"}),this.sideBarContentContainer=(0,a.az)("div",{id:this.pdfViewer.element.id+"_sideBarContentContainer",className:"e-pv-sidebar-content-container"}),this.sideBarContentSplitter=(0,a.az)("div",{id:this.pdfViewer.element.id+"_sideBarContentSplitter",className:"e-pv-sidebar-content-splitter"}),this.sideBarContent=(0,a.az)("div",{id:this.pdfViewer.element.id+"_sideBarContent",className:"e-pv-sidebar-content",attrs:{tabindex:"0"}}),this.sideBarTitleContainer=(0,a.az)("div",{id:this.pdfViewer.element.id+"_sideBarTitleContainer",className:"e-pv-sidebar-title-container"}),this.sideBarTitle=(0,a.az)("div",{id:this.pdfViewer.element.id+"_sideBarTitle",className:"e-pv-sidebar-title",attrs:{tabindex:"-1"}}),this.sideBarResizer=(0,a.az)("div",{id:this.pdfViewer.element.id+"_sideBarResizer",className:"e-pv-sidebar-resizer"})),this.pdfViewerBase.mainContainer.appendChild(this.sideBarToolbar),this.pdfViewer.enableRtl&&(this.sideBarToolbar.style.cssFloat="right",this.sideBarToolbar.style.right="1px",this.sideBarToolbar.style.position="relative"),this.pdfViewerBase.mainContainer.appendChild(this.sideBarToolbarSplitter),this.sideBarToolbarSplitter.classList.add(this.pdfViewer.enableRtl?"e-right":"e-left"),this.sideBarContentContainer.classList.add(this.pdfViewer.enableRtl?"e-right":"e-left"),this.pdfViewerBase.mainContainer.appendChild(this.sideBarContentContainer),this.pdfViewer.enableRtl&&(this.sideBarContentSplitter.style.right="0px"),this.sideBarContentContainer.appendChild(this.sideBarContentSplitter),this.pdfViewer.enableRtl&&(this.sideBarContent.style.right="0px",this.sideBarContent.style.direction="rtl"),this.sideBarContentContainer.appendChild(this.sideBarContent),this.pdfViewer.enableRtl&&(this.sideBarTitleContainer.style.right="0px"),this.sideBarTitle.classList.add(this.pdfViewer.enableRtl?"e-right":"e-left"),this.sideBarTitleContainer.appendChild(this.sideBarTitle),this.sideBarContentContainer.appendChild(this.sideBarTitleContainer),this.sideBarResizer.addEventListener("mousedown",this.resizePanelMouseDown),this.pdfViewerBase.mainContainer.addEventListener("mousemove",this.resizePanelMouseMove),this.pdfViewerBase.mainContainer.addEventListener("mouseup",this.resizeViewerMouseLeave),this.sideBarResizer.classList.add(this.pdfViewer.enableRtl?"e-right":"e-left"),this.sideBarContentContainer.appendChild(this.sideBarResizer),this.createCommentPanel();var t=this.getViewerContainerLeft(),i=this.getViewerContainerRight();this.pdfViewer.enableRtl||(this.pdfViewerBase.viewerContainer.style.left=t+"px",this.pdfViewerBase.viewerContainer.style.right=i+"px"),this.pdfViewerBase.viewerContainer.style.width=this.pdfViewer.element.clientWidth-t-this.commentPanelContainer.clientWidth+"px",this.sideBarContentContainer.style.display="none",this.createSidebarToolBar(),this.createSidebarTitleCloseButton(),this.createResizeIcon(),this.sideBarToolbar.addEventListener("mouseup",this.sideToolbarOnMouseup.bind(this)),this.sideBarContentContainer.addEventListener("mouseup",this.sideBarTitleOnMouseup.bind(this))},s.prototype.adjustPane=function(){if((0,a.xr)()){var e=this.pdfViewer.element.querySelector(".e-pv-sidebar-toolbar-splitter"),t=this.pdfViewer.element.querySelector(".e-pv-sidebar-toolbar"),i=this.pdfViewer.element.querySelector(".e-pv-sidebar-content-container");0===(o=(n=this.pdfViewer.element.querySelector(".e-pv-toolbar")).getBoundingClientRect().height)&&(o=parseFloat(window.getComputedStyle(n).height)+1),this.pdfViewer.enableToolbar||(o=0),t.style.top=o+"px",i.style.top=o+"px",e.style.top=o+"px",t.style.height=this.getSideToolbarHeight(o),i.style.height=this.getSideToolbarHeight(o),e.style.height=this.getSideToolbarHeight(o),this.pdfViewerBase.viewerContainer.style.height=this.getSideToolbarHeight(o)}else{var n,o;e=this.pdfViewerBase.getElement("_sideBarToolbarSplitter"),0===(o=(n=this.pdfViewerBase.getElement("_toolbarContainer")).getBoundingClientRect().height)&&(o=parseFloat(window.getComputedStyle(n).height)+1),this.sideBarToolbar.style.top=o+"px",this.sideBarContentContainer.style.top=o+"px",e.style.top=o+"px"}},s.prototype.getSideToolbarHeight=function(e){var t=this.pdfViewer.element.getBoundingClientRect().height;return 0!==t?t-e+"px":""},s.prototype.createCommentPanel=function(){this.commentPanelContainer=(0,a.az)("div",{id:this.pdfViewer.element.id+"_commantPanel",className:"e-pv-comment-panel"}),this.pdfViewerBase.mainContainer.appendChild(this.commentPanelContainer),this.pdfViewer.enableRtl?this.commentPanelContainer.style.left="0px":this.commentPanelContainer.style.right="0px",this.commentPanelContainer.style.bottom="0px",this.createCommentPanelTitleContainer(),this.commentPanelContainer.style.display="none",this.commentsContentContainer=(0,a.az)("div",{id:this.pdfViewer.element.id+"_commentscontentcontainer",className:"e-pv-comments-content-container"}),this.commentPanelContainer.appendChild(this.commentsContentContainer),this.commentPanelResizer=(0,a.az)("div",{id:this.pdfViewer.element.id+"_commentPanelResizer",className:"e-pv-comment-panel-resizer"}),this.commentPanelResizer.classList.add(this.pdfViewer.enableRtl?"e-left":"e-right"),this.commentPanelResizer.style.display="none",this.commentPanelResizer.addEventListener("mousedown",this.commentPanelMouseDown),this.pdfViewerBase.mainContainer.appendChild(this.commentPanelResizer),this.createCommentPanelResizeIcon(),this.createFileElement(this.commentPanelContainer),this.createXFdfFileElement(this.commentPanelContainer)},s.prototype.createCommentPanelTitleContainer=function(){var e=(0,a.az)("div",{id:this.pdfViewer.element.id+"_commentPanelTitleContainer",className:"e-pv-comment-panel-title-container"}),t=(0,a.az)("div",{id:this.pdfViewer.element.id+"_commentPanelTitle",className:"e-pv-comment-panel-title",attrs:{tabindex:"-1"}});(0,a.xr)()?this.pdfViewer._dotnetInstance.invokeMethodAsync("GetLocaleText","PdfViewer_Comments").then(function(d){t.innerText=d}):t.innerText=this.pdfViewer.localeObj.getConstant("Comments");var n=(0,a.az)("button",{id:this.pdfViewer.element.id+"_annotations_btn"});n.setAttribute("aria-label","annotation button"),n.setAttribute("type","button"),n.className="e-btn e-pv-tbar-btn e-pv-comment-panel-title-close-div e-btn";var o=(0,a.az)("span",{id:this.pdfViewer.element.id+"_annotation_more_icon",className:"e-pv-more-icon e-pv-icon"});if(n.appendChild(o),a.AR.isDevice&&!(0,a.xr)()){var r=(0,a.az)("button");r.setAttribute("aria-label","annotation button"),r.setAttribute("type","button"),r.style.borderColor="transparent",r.style.paddingTop="11px",r.style.paddingBottom="11px",r.style.backgroundColor="#fafafa",r.addEventListener("click",this.closeCommentPanelContainer.bind(this)),t.style.left="37px";var l=(0,a.az)("span",{className:"e-pv-annotation-tools-close-icon e-pv-icon"});r.appendChild(l),e.appendChild(r)}e.appendChild(t),e.appendChild(n),this.commentPanelContainer.appendChild(e),this.createAnnotationContextMenu(),n.addEventListener("click",this.openAnnotationContextMenu.bind(this))},s.prototype.createCommentPanelResizeIcon=function(){this.commentPanelResizeIcon=(0,a.az)("div",{id:this.pdfViewer.element.id+"_commentPanel_resize",className:"e-pv-resize-icon e-pv-icon"}),this.setCommentPanelResizeIconTop(),this.commentPanelResizeIcon.style.position="absolute",this.commentPanelResizer.appendChild(this.commentPanelResizeIcon)},s.prototype.openAnnotationContextMenu=function(e){this.annotationMenuObj.open(e.clientY,e.clientX,e.currentTarget)},s.prototype.createAnnotationContextMenu=function(){this.annotationContextMenu=[{text:this.pdfViewer.localeObj.getConstant("Export Annotations")},{text:this.pdfViewer.localeObj.getConstant("Import Annotations")},{text:this.pdfViewer.localeObj.getConstant("Export XFDF")},{text:this.pdfViewer.localeObj.getConstant("Import XFDF")}];var e=(0,a.az)("ul",{id:this.pdfViewer.element.id+"_annotation_context_menu"});this.pdfViewer.element.appendChild(e),this.annotationMenuObj=new re.xV({target:"#"+this.pdfViewer.element.id+"_annotations_btn",items:this.annotationContextMenu,select:this.annotationMenuItemSelect.bind(this)}),this.pdfViewer.enableRtl&&(this.annotationMenuObj.enableRtl=!0),this.annotationMenuObj.appendTo(e),this.annotationMenuObj.animationSettings.effect=a.AR.isDevice&&!this.pdfViewer.enableDesktopMode?"ZoomIn":"SlideDown"},s.prototype.annotationMenuItemSelect=function(e){if(this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.inkAnnotationModule){var t=parseInt(this.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber);this.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(t)}if(e.item)switch(e.item.text){case this.pdfViewer.localeObj.getConstant("Export Annotations"):this.pdfViewerBase.exportAnnotations(Lt.Json);break;case this.pdfViewer.localeObj.getConstant("Import Annotations"):this.importAnnotationIconClick(e);break;case this.pdfViewer.localeObj.getConstant("Export XFDF"):this.pdfViewerBase.exportAnnotations(Lt.Xfdf);break;case this.pdfViewer.localeObj.getConstant("Import XFDF"):this.importXFdfAnnotationIconClick(e)}},s.prototype.createFileElement=function(e){this.annotationInputElement=(0,a.az)("input",{id:this.pdfViewer.element.id+"_annotationUploadElement",styles:"position:fixed; left:-100em",attrs:{type:"file","aria-label":"upload elements"}}),this.annotationInputElement.setAttribute("accept",".json"),e.appendChild(this.annotationInputElement),this.annotationInputElement.addEventListener("change",this.loadImportAnnotation)},s.prototype.createXFdfFileElement=function(e){this.annotationXFdfInputElement=(0,a.az)("input",{id:this.pdfViewer.element.id+"_annotationXFdfUploadElement",styles:"position:fixed; left:-100em",attrs:{type:"file","aria-label":"upload elements"}}),this.annotationXFdfInputElement.setAttribute("accept",".xfdf"),e.appendChild(this.annotationXFdfInputElement),this.annotationXFdfInputElement.addEventListener("change",this.loadImportAnnotation)},s.prototype.importAnnotationIconClick=function(e){this.annotationInputElement.click()},s.prototype.importXFdfAnnotationIconClick=function(e){this.annotationXFdfInputElement.click()},s.prototype.closeCommentPanelContainer=function(){var e;e=this;var t=document.getElementById(this.pdfViewer.element.id+"_viewerContainer"),i=document.getElementById(this.pdfViewer.element.id+"_pageViewContainer"),n=document.getElementById(this.pdfViewer.element.id+"_commantPanel");n&&(n.style.display="none",e.commentPanelResizer&&(e.commentPanelResizer.style.display="none"),t&&(this.pdfViewer.enableRtl?t.style.left=e.getViewerContainerRight()+"px":t.style.right=e.getViewerContainerRight()+"px",t.style.width=e.pdfViewer.element.clientWidth-e.getViewerContainerLeft()-e.getViewerContainerRight()+"px",i.style.width=e.pdfViewerBase.viewerContainer.offsetWidth-e.getViewerContainerScrollbarWidth()+"px"),e.pdfViewerBase&&e.pdfViewerBase.updateZoomValue(),this.pdfViewer.annotation&&this.pdfViewer.annotation.textMarkupAnnotationModule&&this.pdfViewer.annotation.textMarkupAnnotationModule.showHideDropletDiv(!0),a.AR.isDevice&&!(0,a.xr)()&&this.pdfViewer.toolbarModule.annotationToolbarModule.toolbar&&(this.pdfViewer.toolbarModule.annotationToolbarModule.toolbar.element.style.display="block",this.pdfViewer.toolbarModule.annotationToolbarModule.propertyToolbar&&(this.pdfViewer.toolbarModule.annotationToolbarModule.propertyToolbar.element.style.display="block")))},s.prototype.createNavigationPaneMobile=function(e){var i,t=this;if(this.isNavigationToolbarVisible=!0,this.toolbarElement=(0,a.az)("div",{id:this.pdfViewer.element.id+"_navigationToolbar",className:"e-pv-nav-toolbar"}),this.pdfViewerBase.viewerMainContainer.insertBefore(this.toolbarElement,this.pdfViewerBase.viewerContainer),"search"===e){var n='<div class="e-input-group e-pv-search-input-mobile" id="'+this.pdfViewer.element.id+'_search_input_container"><input class="e-input" type="text" placeholder="'+this.pdfViewer.localeObj.getConstant("Find in document")+'" id="'+this.pdfViewer.element.id+'_search_input"></input></div>';i=[{prefixIcon:"e-pv-backward-icon e-pv-icon",tooltipText:this.pdfViewer.localeObj.getConstant("Go Back"),id:this.pdfViewer.element.id+"_backward",click:this.goBackToToolbar.bind(this)},{template:n},{prefixIcon:"e-pv-search-icon e-pv-icon",id:this.pdfViewer.element.id+"_search_box-icon",click:function(){var o=t.pdfViewerBase.getElement("_search_box-icon").firstElementChild;o.classList.contains("e-pv-search-close")&&t.enableSearchItems(!1),t.pdfViewer.textSearchModule.searchButtonClick(o,t.searchInput)}},{prefixIcon:"e-pv-prev-search-icon e-pv-icon",id:this.pdfViewer.element.id+"_prev_occurrence",click:function(o){t.pdfViewer.textSearchModule.searchPrevious()}},{prefixIcon:"e-pv-next-search-icon e-pv-icon",id:this.pdfViewer.element.id+"_next_occurrence",click:function(o){t.pdfViewer.textSearchModule.searchNext()}}]}else i=[{prefixIcon:"e-pv-backward-icon e-pv-icon",id:this.pdfViewer.element.id+"_backward",click:this.goBackToToolbar.bind(this)},{text:this.pdfViewer.localeObj.getConstant("Bookmarks")}];this.toolbar=new re.o8({items:i,width:"",height:"",overflowMode:"Popup"}),this.pdfViewer.enableRtl&&(this.toolbar.enableRtl=!0),this.toolbar.isStringTemplate=!0,this.toolbar.appendTo(this.toolbarElement),"search"===e?this.initiateSearchBox():this.initiateBookmarks()},s.prototype.initiateSearchBox=function(){var e=this;this.searchInput=this.pdfViewerBase.getElement("_search_input"),this.pdfViewer.textSearchModule.searchBtn=this.pdfViewerBase.getElement("_search_box-icon").firstElementChild,this.searchInput.addEventListener("keyup",function(t){e.enableSearchItems(!0),13===t.which?e.initiateTextSearch():e.pdfViewer.textSearchModule.resetVariables()}),this.pdfViewer.textSearchModule.searchInput=this.searchInput,this.setSearchInputWidth(),this.enableSearchItems(!1),this.searchInput.focus()},s.prototype.enableSearchItems=function(e){(0,a.xr)()?this.pdfViewer._dotnetInstance.invokeMethodAsync("EnableSearchItems",e):(this.toolbar.enableItems(this.pdfViewerBase.getElement("_prev_occurrence").parentElement,e),this.toolbar.enableItems(this.pdfViewerBase.getElement("_next_occurrence").parentElement,e))},s.prototype.initiateBookmarks=function(){if(a.AR.isDevice&&!this.pdfViewer.enableDesktopMode){this.pdfViewerBase.mobileScrollerContainer.style.display="none";for(var e=document.querySelectorAll(".e-pv-mobile-annotation-toolbar"),t=0;t<e.length;t++)e[t].style.display="none"}var i=(0,a.az)("div",{id:this.pdfViewer.element.id+"_bookmarks_container",className:"e-pv-bookmark-container"});i.style.width="100%",i.style.height=this.pdfViewerBase.viewerContainer.style.height,this.pdfViewerBase.getElement("_viewerMainContainer").appendChild(i),this.pdfViewerBase.viewerContainer.style.display="none",this.isBookmarkListOpen=!0,this.pdfViewer.bookmarkViewModule.renderBookmarkContentMobile()},s.prototype.initiateTextSearch=function(){this.pdfViewer.textSearchModule.initiateSearch(this.searchInput.value)},s.prototype.goBackToToolbar=function(){if(this.isNavigationToolbarVisible=!1,((0,a.xr)()&&(!a.AR.isDevice||this.pdfViewer.enableDesktopMode)||!(0,a.xr)())&&this.pdfViewer.textSearchModule.cancelTextSearch(),this.searchInput=null,0!==this.pdfViewer.bookmarkViewModule.childNavigateCount)this.pdfViewer.bookmarkViewModule.bookmarkList.back(),this.pdfViewer.bookmarkViewModule.childNavigateCount--;else{null!=this.toolbar&&(this.toolbar.destroy(),this.toolbar=null);var e=this.pdfViewerBase.getElement("_bookmarks_container");e&&(e.parentElement.removeChild(e),a.AR.isDevice&&!this.pdfViewer.enableDesktopMode&&(this.pdfViewerBase.mobileScrollerContainer.style.display="")),this.toolbarElement&&null!=this.toolbarElement.parentElement&&this.toolbarElement.parentElement.removeChild(this.toolbarElement),this.pdfViewerBase.viewerContainer.style.display="block",this.isBookmarkListOpen=!1,(0,a.xr)()?this.pdfViewerBase.onWindowResize():this.pdfViewer.toolbar.annotationToolbarModule.isMobileAnnotEnabled||this.pdfViewer.toolbarModule.showToolbar(!0)}},s.prototype.setSearchInputWidth=function(){var e=this.searchInput.parentElement,t=window.getComputedStyle(e.parentElement,null).getPropertyValue("padding-left");(0,a.xr)()&&a.AR.isDevice&&!this.pdfViewer.enableDesktopMode&&(this.toolbarElement=this.pdfViewerBase.getElement("_navigationToolbar"));var i=this.toolbarElement.clientWidth-this.getParentElementSearchBox("_backward").clientWidth-this.getParentElementSearchBox("_search_box-icon").clientWidth-this.getParentElementSearchBox("_prev_occurrence").clientWidth-this.getParentElementSearchBox("_next_occurrence").clientWidth-6;""!==t&&(i-=2*parseFloat(t)),e.style.width=i+"px"},s.prototype.getParentElementSearchBox=function(e){return this.pdfViewerBase.getElement(e).parentElement},s.prototype.createTooltipMobile=function(e){if(this.isTooltipCreated){if(this.toastObject){this.toastObject.title=e;var i=this.pdfViewerBase.getElement("_container_tooltip").firstElementChild;if(i)i.style.width="auto",i.firstElementChild.firstElementChild.textContent=e;else{this.isTooltipCreated=!1;var n=this.pdfViewerBase.getElement("_container_tooltip");this.toastObject&&this.toastObject.destroy(),n.parentElement.removeChild(n),this.toastObject=null,this.createMobileTooltip(e)}}}else this.createMobileTooltip(e)},s.prototype.createMobileTooltip=function(e){var t=(0,a.az)("div",{className:"e-pv-container-tooltip",id:this.pdfViewer.element.id+"_container_tooltip"});this.pdfViewer.element.appendChild(t),this.toastObject=new ku({title:e,target:this.pdfViewer.element,close:this.onTooltipClose.bind(this),position:{X:0,Y:0},animation:{hide:{duration:200,effect:"FadeOut"}}}),this.toastObject.appendTo(t);var i=.65*this.pdfViewer.element.clientHeight,n=(this.pdfViewer.element.clientWidth-t.clientWidth)/2;this.isTooltipCreated=!0,this.toastObject.show({position:{X:n,Y:i}});var o=t.firstElementChild;o&&(o.style.width="auto")},s.prototype.onTooltipClose=function(e){if(this.pdfViewer.textSearchModule){this.isTooltipCreated=!1;var t=this.pdfViewerBase.getElement("_container_tooltip");this.pdfViewer.textSearchModule.isMessagePopupOpened=!1,this.toastObject&&this.toastObject.destroy(),t.parentElement.removeChild(t),this.toastObject=null}},s.prototype.toolbarResize=function(){this.searchInput&&(this.searchInput.style.width="auto",this.setSearchInputWidth())},s.prototype.createSidebarToolBar=function(){if((0,a.xr)())this.thumbnailButton=this.pdfViewer.element.querySelector(".e-pv-thumbnail-view-button"),this.bookmarkButton=this.pdfViewer.element.querySelector(".e-pv-bookmark-button");else{this.thumbnailButton=(0,a.az)("button",{id:this.pdfViewer.element.id+"_thumbnail-view",attrs:{disabled:"disabled","aria-label":"Page Thumbnails",tabindex:"-1"}}),this.thumbnailButton.className="e-pv-tbar-btn e-pv-thumbnail-view-button e-btn",this.thumbnailButton.setAttribute("type","button");var e=(0,a.az)("span",{id:this.pdfViewer.element.id+"_thumbnail-view_icon",className:"e-pv-thumbnail-view-disable-icon e-pv-icon"});this.thumbnailButton.appendChild(e),new j.u({content:this.pdfViewer.localeObj.getConstant("Page Thumbnails"),opensOn:"Hover",beforeOpen:this.onTooltipBeforeOpen.bind(this)}).appendTo(this.thumbnailButton),this.bookmarkButton=(0,a.az)("button",{id:this.pdfViewer.element.id+"_bookmark",attrs:{disabled:"disabled","aria-label":"Bookmarks",tabindex:"-1"}}),this.bookmarkButton.setAttribute("type","button"),this.bookmarkButton.className="e-pv-tbar-btn e-pv-bookmark-button e-btn";var i=(0,a.az)("span",{id:this.pdfViewer.element.id+"_bookmark_icon",className:"e-pv-bookmark-disable-icon e-pv-icon"});this.bookmarkButton.appendChild(i),new j.u({content:this.pdfViewer.localeObj.getConstant("Bookmarks"),opensOn:"Hover",beforeOpen:this.onTooltipBeforeOpen.bind(this)}).appendTo(this.bookmarkButton),this.sideBarToolbar.appendChild(this.thumbnailButton),this.sideBarToolbar.appendChild(this.bookmarkButton)}this.thumbnailButton.addEventListener("click",this.sideToolbarOnClick),this.bookmarkButton.addEventListener("click",this.bookmarkButtonOnClick)},s.prototype.onTooltipBeforeOpen=function(e){this.pdfViewer.toolbarSettings.showTooltip||(e.cancel=!0)},s.prototype.enableThumbnailButton=function(){this.thumbnailButton&&(this.thumbnailButton.removeAttribute("disabled"),this.thumbnailButton.children[0].classList.remove("e-pv-thumbnail-view-disable-icon"),this.thumbnailButton.children[0].classList.add("e-pv-thumbnail-view-icon"))},s.prototype.enableBookmarkButton=function(){this.bookmarkButton&&(this.bookmarkButton.removeAttribute("disabled"),this.bookmarkButton.children[0].classList.remove("e-pv-bookmark-disable-icon"),this.bookmarkButton.children[0].classList.add("e-pv-bookmark-icon"))},s.prototype.createSidebarTitleCloseButton=function(){this.closeDiv=(0,a.az)("button",{id:this.pdfViewer.element.id+"_close_btn"}),this.closeDiv.setAttribute("aria-label","close button"),this.closeDiv.setAttribute("type","button"),this.closeDiv.className="e-btn e-pv-tbar-btn e-pv-title-close-div e-btn",this.closeDiv.style.left=this.pdfViewer.enableRtl?"8px":this.closeButtonLeft+"px";var e=(0,a.az)("span",{id:this.pdfViewer.element.id+"_close_icon",className:"e-pv-title-close-icon e-pv-icon"});this.closeDiv.appendChild(e),this.sideBarTitleContainer.appendChild(this.closeDiv),this.closeDiv.addEventListener("click",this.sideToolbarOnClose)},s.prototype.createResizeIcon=function(){this.resizeIcon=(0,a.az)("div",{id:this.pdfViewer.element.id+"_resize",className:"e-pv-resize-icon e-pv-icon"}),this.setResizeIconTop(),this.resizeIcon.style.position="absolute",this.resizeIcon.addEventListener("click",this.sideToolbarOnClose),this.resizeIcon.addEventListener("mouseover",this.resizeIconMouseOver),this.sideBarResizer.appendChild(this.resizeIcon)},s.prototype.setResizeIconTop=function(){this.sideBarToolbar&&this.sideBarToolbar.clientHeight&&""===this.resizeIcon.style.top&&(this.resizeIcon.style.top=this.sideBarToolbar.clientHeight/2+"px")},s.prototype.setCommentPanelResizeIconTop=function(){this.commentPanelContainer&&this.commentPanelContainer.clientHeight&&this.commentPanelResizeIcon&&""===this.commentPanelResizeIcon.style.top&&(this.commentPanelResizeIcon.style.top=this.commentPanelContainer.clientHeight/2+"px")},Object.defineProperty(s.prototype,"outerContainerWidth",{get:function(){return this.mainContainerWidth||(this.mainContainerWidth=this.pdfViewerBase.mainContainer.clientWidth),this.mainContainerWidth},enumerable:!0,configurable:!0}),s.prototype.getViewerContainerScrollbarWidth=function(){return this.pdfViewerBase.viewerContainer.offsetWidth+this.pdfViewerBase.viewerContainer.offsetLeft-(this.pdfViewerBase.viewerContainer.clientWidth+this.pdfViewerBase.viewerContainer.offsetLeft)},Object.defineProperty(s.prototype,"sideToolbarWidth",{get:function(){return this.sideBarToolbar?this.sideBarToolbar.clientWidth:0},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"sideBarContentContainerWidth",{get:function(){return this.sideBarContentContainer?this.sideBarContentContainer.clientWidth:0},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"commentPanelContainerWidth",{get:function(){return this.commentPanelContainer?this.commentPanelContainer.offsetWidth:0},enumerable:!0,configurable:!0}),s.prototype.updateViewerContainerOnClose=function(){var e;(e=this).sideBarContentContainer&&(e.sideBarContentContainer.style.display="none",this.pdfViewer.enableRtl?e.pdfViewerBase.viewerContainer.style.right=e.sideToolbarWidth+"px":e.pdfViewerBase.viewerContainer.style.left=e.sideToolbarWidth+"px",e.pdfViewerBase.viewerContainer.style.width=e.pdfViewer.element.clientWidth-e.sideToolbarWidth-e.getViewerContainerRight()+"px",e.pdfViewerBase.pageContainer.style.width=e.pdfViewerBase.viewerContainer.offsetWidth-e.getViewerContainerScrollbarWidth()+"px",this.restrictUpdateZoomValue&&e.pdfViewerBase.updateZoomValue())},s.prototype.updateViewerContainerOnExpand=function(){var e;(e=this).sideBarContentContainer&&(e.sideBarContentContainer.style.display="block",this.pdfViewer.enableRtl?e.pdfViewerBase.viewerContainer.style.right=e.getViewerContainerLeft()+"px":e.pdfViewerBase.viewerContainer.style.left=e.getViewerContainerLeft()+"px",e.pdfViewerBase.viewerContainer.style.width=e.pdfViewer.element.clientWidth-this.getViewerContainerLeft()-this.getViewerContainerRight()+"px",e.pdfViewerBase.pageContainer.style.width=e.pdfViewerBase.viewerContainer.clientWidth+"px",e.pdfViewerBase.updateZoomValue(),e.pdfViewer.enableThumbnail&&e.pdfViewer.thumbnailViewModule.gotoThumbnailImage(e.pdfViewerBase.currentPageNumber-1))},s.prototype.getViewerContainerLeft=function(){return this.sideToolbarWidth?this.sideToolbarWidth+this.sideBarContentContainerWidth:0},s.prototype.getViewerContainerRight=function(){return this.commentPanelResizer?this.commentPanelContainerWidth+this.commentPanelResizer.clientWidth:0},s.prototype.getViewerMainContainerWidth=function(){return this.pdfViewer.element.clientWidth-this.sideToolbarWidth},s.prototype.setThumbnailSelectionIconTheme=function(){this.thumbnailButton&&(this.thumbnailButton.children[0].classList.remove("e-pv-thumbnail-view-icon"),this.thumbnailButton.children[0].classList.add("e-pv-thumbnail-view-selection-icon"),this.thumbnailButton.classList.add("e-pv-thumbnail-view-button-selection"))},s.prototype.removeThumbnailSelectionIconTheme=function(){this.thumbnailButton&&this.thumbnailButton.children[0]&&(this.thumbnailButton.children[0].classList.add("e-pv-thumbnail-view-icon"),this.thumbnailButton.children[0].classList.remove("e-pv-thumbnail-view-selection-icon"),this.thumbnailButton.classList.remove("e-pv-thumbnail-view-button-selection"))},s.prototype.resetThumbnailIcon=function(){this.thumbnailButton&&this.thumbnailButton.children[0]&&(this.thumbnailButton.children[0].classList.remove("e-pv-thumbnail-view-icon"),this.thumbnailButton.children[0].classList.add("e-pv-thumbnail-view-disable-icon"))},s.prototype.resetThumbnailView=function(){this.sideBarContentContainer&&(this.sideBarContentContainer.style.display="none",this.pdfViewerBase.viewerContainer.style.left=this.pdfViewer.enableRtl?"1px":this.sideToolbarWidth+"px",this.pdfViewerBase.viewerContainer.style.width=this.pdfViewer.element.clientWidth-this.sideToolbarWidth-this.getViewerContainerRight()+"px",this.pdfViewerBase.pageContainer&&(this.pdfViewerBase.pageContainer.style.width=this.pdfViewerBase.viewerContainer.clientWidth+"px"),this.thumbnailButton.setAttribute("disabled","disabled"),this.removeThumbnailSelectionIconTheme(),this.resetThumbnailIcon())},s.prototype.setBookmarkSelectionIconTheme=function(){this.bookmarkButton&&(this.bookmarkButton.children[0].classList.remove("e-pv-bookmark-icon"),this.bookmarkButton.children[0].classList.add("e-pv-bookmark-selection-icon"),this.bookmarkButton.classList.add("e-pv-bookmark-button-selection"))},s.prototype.removeBookmarkSelectionIconTheme=function(){this.bookmarkButton&&this.bookmarkButton.children[0]&&(this.bookmarkButton.children[0].classList.add("e-pv-bookmark-icon"),this.bookmarkButton.children[0].classList.remove("e-pv-bookmark-selection-icon"),this.bookmarkButton.classList.remove("e-pv-bookmark-button-selection"))},s.prototype.sideToolbarOnMouseup=function(e){e.target===this.sideBarToolbar&&this.pdfViewerBase.focusViewerContainer()},s.prototype.sideBarTitleOnMouseup=function(e){this.pdfViewerBase.focusViewerContainer()},s.prototype.openBookmarkcontentInitially=function(){if(document.getElementById(this.pdfViewer.element.id+"_thumbnail_view")&&(document.getElementById(this.pdfViewer.element.id+"_thumbnail_view").style.display="none"),this.removeThumbnailSelectionIconTheme(),this.sideBarTitle.textContent=this.pdfViewer.localeObj.getConstant("Bookmarks"),this.sideBarContent.setAttribute("aria-label","Bookmark View Panel"),this.pdfViewer.bookmarkViewModule.renderBookmarkcontent(),this.sideBarContentContainer&&("none"!==this.sideBarContentContainer.style.display?this.isThumbnailOpen?(this.setBookmarkSelectionIconTheme(),this.isBookmarkOpen=!0,this.updateViewerContainerOnExpand()):(this.removeBookmarkSelectionIconTheme(),this.isBookmarkOpen=!1,this.updateViewerContainerOnClose()):(this.sideBarContent.focus(),this.setBookmarkSelectionIconTheme(),this.isBookmarkOpen=!0,this.updateViewerContainerOnExpand())),this.isThumbnailOpen=!1,this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.inkAnnotationModule){var t=parseInt(this.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber);this.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(t)}},s.prototype.disableBookmarkButton=function(){this.sideBarContentContainer&&this.bookmarkButton&&this.bookmarkButton.children[0]&&(this.sideBarContentContainer.style.display="none",this.bookmarkButton.setAttribute("disabled","disabled"),this.bookmarkButton.children[0].classList.add("e-pv-bookmark-disable-icon"))},s.prototype.clear=function(){a.AR.isDevice||(this.removeBookmarkSelectionIconTheme(),this.removeThumbnailSelectionIconTheme(),this.closeCommentPanelContainer()),this.commentsContentContainer&&(this.commentsContentContainer.innerHTML="")},s.prototype.destroy=function(){var e=this.bookmarkButton,t=this.thumbnailButton;if(e&&e.ej2_instances&&e.ej2_instances.length>0&&e.ej2_instances[0].destroy(),t&&t.ej2_instances&&t.ej2_instances.length>0&&t.ej2_instances[0].destroy(),this.annotationMenuObj){var i=this.annotationMenuObj.element;i&&i.ej2_instances&&i.ej2_instances.length>0&&this.annotationMenuObj.destroy()}},s.prototype.getModuleName=function(){return"NavigationPane"},s}(),qb=function(){function s(e,t){this.pdfViewer=e,this.pdfViewerBase=t}return s.prototype.createContextMenu=function(){var e=document.getElementsByClassName(this.pdfViewer.element.id+"_context_menu");if(e&&(this.contextMenuElement=e[0],this.contextMenuElement.children&&this.contextMenuElement.children.length>0)){var t=this.contextMenuElement.children[0];t.className=t.className+" e-pv-context-menu"}},s.prototype.open=function(e,t,i){this.pdfViewer._dotnetInstance.invokeMethodAsync("OpenContextMenu",e,t)},s.prototype.close=function(){this.pdfViewer._dotnetInstance.invokeMethodAsync("CloseContextMenu")},s.prototype.destroy=function(){this.previousAction="",this.contextMenuElement=null},s.prototype.OnItemSelected=function(e){this.pdfViewerBase.OnItemSelected("string"==typeof e?e:e[0])},s}(),We={},Ls="e-spin-show",Ns="e-spin-hide",_u="e-spin-material",zu="e-spin-fabric",Xb="e-spin-bootstrap",Hu="e-spin-bootstrap4",qu="e-spin-bootstrap5",Zu="e-spin-tailwind",Wu="e-spin-high-contrast",Fa="e-spinner-pane",Eh="e-spinner-inner",La="e-path-circle",Na="e-spin-template";function Rs(s,e){if(s.target){var t,i=(0,a.le)(e)?a.az:e,n=function(s,e){var t=e("div",{});t.classList.add(Fa);var i=e("div",{});return i.classList.add(Eh),s.appendChild(t),t.appendChild(i),{wrap:t,innerWrap:i}}(s.target,i);if((0,a.le)(s.cssClass)||n.wrap.classList.add(s.cssClass),(0,a.le)(s.template)&&(0,a.le)(null)){var r=(0,a.le)(s.type)?function(s){return window.getComputedStyle(s,":after").getPropertyValue("content").replace(/['"]+/g,"")}(n.wrap):s.type;t=function(s,e){var t;switch(e){case"Material":case"Fabric":default:t=30;break;case"Bootstrap4":t=36}return s=s?parseFloat(s+""):t,"Bootstrap"===e?s:s/2}((0,a.le)(s.width)?void 0:s.width,r),function(s,e,t,i){var n=e.querySelector("."+Eh),o=n.querySelector("svg");switch((0,a.le)(o)||n.removeChild(o),s){case"Material":!function(s,e,t){var i=Ln();We[i]={timeOut:0,type:"Material",radius:e},Ra(s,i,0,_u),Oa(e,s,"Material",_u)}(n,t);break;case"Fabric":!function(s,e,t){var i=Ln();We[i]={timeOut:0,type:"Fabric",radius:e},Yu(s,i,zu),Ju(e,s,zu)}(n,t);break;case"Bootstrap":!function(s,e,t){var i=Ln();We[i]={timeOut:0,type:"Bootstrap",radius:e},function(s,e,t){var i=document.createElementNS("http://www.w3.org/2000/svg","svg"),n=64,o=32,r=2;i.setAttribute("id",e),i.setAttribute("class",Xb),i.setAttribute("viewBox","0 0 "+n+" "+n),s.insertBefore(i,s.firstChild);for(var l=0;l<=7;l++){var d=document.createElementNS("http://www.w3.org/2000/svg","circle");d.setAttribute("class",La+"_"+l),d.setAttribute("r",r+""),d.setAttribute("transform","translate("+o+","+o+")"),i.appendChild(d)}}(s,i),function(s,e){var t=s.querySelector("svg.e-spin-bootstrap");t.style.width=t.style.height=e+"px";for(var i=0,n=0,o=24,r=90,l=0;l<=7;l++){var d=Ph(i,n,o,r),h=t.querySelector("."+La+"_"+l);h.setAttribute("cx",d.x+""),h.setAttribute("cy",d.y+""),r=r>=360?0:r,r+=45}}(s,e)}(n,t);break;case"HighContrast":!function(s,e,t){var i=Ln();We[i]={timeOut:0,type:"HighContrast",radius:e},Yu(s,i,Wu),Ju(e,s,Wu)}(n,t);break;case"Bootstrap4":!function(s,e,t){var i=Ln();We[i]={timeOut:0,type:"Bootstrap4",radius:e},Ra(s,i,0,Hu),Oa(e,s,"Bootstrap4",Hu)}(n,t);break;case"Bootstrap5":!function(s,e,t){var i=Ln();We[i]={timeOut:0,type:"Bootstrap5",radius:e},Ra(s,i,0,qu),Oa(e,s,"Bootstrap5",qu)}(n,t);break;case"Tailwind":!function(s,e,t){var i=Ln();We[i]={timeOut:0,type:"Tailwind",radius:e},Ra(s,i,0,Zu),Oa(e,s,"Tailwind",Zu)}(n,t)}}(r,n.wrap,t),(0,a.le)(s.label)||function(s,e,t){var i=t("div",{});i.classList.add("e-spin-label"),i.textContent=e,s.appendChild(i)}(n.innerWrap,s.label,i)}else{var o=(0,a.le)(s.template)?null:s.template;n.wrap.classList.add(Na),function(s,e,t){(0,a.le)(null)||s.classList.add(null),s.querySelector(".e-spinner-inner").innerHTML=e}(n.wrap,o)}n.wrap.classList.add(Ns),n=null}}function lS(s,e){var t=[],i=s,n=e,o=!1,r=1;return function l(d){t.push(d),(d!==n||1===r)&&(d<=i&&d>1&&!o?d=parseFloat((d-.2).toFixed(2)):1===d?(d=7,d=parseFloat((d+.2).toFixed(2)),o=!0):d<8&&o?8===(d=parseFloat((d+.2).toFixed(2)))&&(o=!1):d<=8&&!o&&(d=parseFloat((d-.2).toFixed(2))),++r,l(d))}(i),t}function Ln(){for(var s="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=0;t<5;t++)s+=e.charAt(Math.floor(Math.random()*e.length));return s}function Yu(s,e,t,i){var n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.setAttribute("id",e),n.setAttribute("class",t);var o=document.createElementNS("http://www.w3.org/2000/svg","path");o.setAttribute("class",La);var r=document.createElementNS("http://www.w3.org/2000/svg","path");r.setAttribute("class","e-path-arc"),s.insertBefore(n,s.firstChild),n.appendChild(o),n.appendChild(r)}function Ra(s,e,t,i){var n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.setAttribute("class",i),n.setAttribute("id",e);var o=document.createElementNS("http://www.w3.org/2000/svg","path");o.setAttribute("class",La),s.insertBefore(n,s.firstChild),n.appendChild(o)}function Xu(s){var t,i,r,l,d,p,f,c;t=vS,i=1333,r=s,l=++r.globalInfo[r.uniqueID].previousId,d=(new Date).getTime(),p=function(s){return parseFloat(s)}(2*r.globalInfo[r.uniqueID].radius+""),f=ju(p),c=-90*(r.globalInfo[r.uniqueID].count||0),function u(g){var v=Math.max(0,Math.min((new Date).getTime()-d,i));(function(g,v){if(!(0,a.le)(v.querySelector("svg.e-spin-material"))&&!(0,a.le)(v.querySelector("svg.e-spin-material").querySelector("path.e-path-circle"))){var b=v.querySelector("svg.e-spin-material").querySelector("path.e-path-circle");b.setAttribute("stroke-dashoffset",Gu(p,f,g,75)+""),b.setAttribute("transform","rotate("+c+" "+p/2+" "+p/2+")")}})(t(v,1,148,i),g.container),l===g.globalInfo[g.uniqueID].previousId&&v<i?We[g.uniqueID].timeOut=setTimeout(u.bind(null,g),1):Xu(g)}(r),s.globalInfo[s.uniqueID].count=++s.globalInfo[s.uniqueID].count%4}function Oa(s,e,t,i){var n=2*s,o=e.querySelector("svg."+i),r=o.querySelector("path.e-path-circle"),l=ju(n),d=n/2+"px";o.setAttribute("viewBox","0 0 "+n+" "+n),o.style.width=o.style.height=n+"px",o.style.transformOrigin=d+" "+d+" "+d,r.setAttribute("d",function(s,e){var t=s/2,i=e/2;return"M"+t+","+i+"A"+(t-i)+","+(t-i)+" 0 1 1 "+i+","+t}(n,l)),"Material"===t&&(r.setAttribute("stroke-width",l+""),r.setAttribute("stroke-dasharray",(n-l)*Math.PI*.75+""),r.setAttribute("stroke-dashoffset",Gu(n,l,1,75)+""))}function ju(s){return.1*s}function Gu(s,e,t,i){return(s-e)*Math.PI*(3*i/100-t/100)}function vS(s,e,t,i){var n=(s/=i)*s,o=n*s;return e+t*(6*o*n+-15*n*n+10*o)}function Ju(s,e,t){var i=s,n=s,o=2*s,d=e.querySelector("."+t),h=d.querySelector(".e-path-circle"),p=d.querySelector(".e-path-arc"),f=o/2+"px";h.setAttribute("d",function(s,e,t){return["M",s,e,"m",-t,0,"a",t,t,0,1,0,2*t,0,"a",t,t,0,1,0,2*-t,0].join(" ")}(i,n,s)),p.setAttribute("d",function(s,e,t,i,n){var o=Ph(s,e,t,45),r=Ph(s,e,t,315);return["M",o.x,o.y,"A",t,t,0,0,0,r.x,r.y].join(" ")}(i,n,s)),d.setAttribute("viewBox","0 0 "+o+" "+o),d.style.transformOrigin=f+" "+f+" "+f,d.style.width=d.style.height=o+"px"}function Ph(s,e,t,i){var n=(i-90)*Math.PI/180;return{x:s+t*Math.cos(n),y:e+t*Math.sin(n)}}function bo(s){Qu(s,!1),s=null}function Qu(s,e){var t;if(s&&(t=s.classList.contains(Fa)?s:s.querySelector("."+Fa)),s&&t){var i=t.querySelector("."+Eh);if(e?!t.classList.contains(Na)&&!t.classList.contains(Ns):!t.classList.contains(Na)&&!t.classList.contains(Ls)){var o=t.querySelector("svg");if((0,a.le)(o))return;var r=o.getAttribute("id");switch(We[r].isAnimate=!e,We[r].type){case"Material":e?clearTimeout(We[r].timeOut):function(s,e,t){var i={};We[e].timeOut=0,i[e]=function(s,e,t,i){return{radius:e,count:0,previousId:0}}(0,t),Xu({uniqueID:e,container:s,globalInfo:i,timeOutVar:0})}(i,r,We[r].radius);break;case"Bootstrap":e?clearTimeout(We[r].timeOut):function(s){for(var t=s.querySelector("svg.e-spin-bootstrap").getAttribute("id"),i=1;i<=8;i++)o(s.getElementsByClassName("e-path-circle_"+(8===i?0:i))[0],i,0,lS(i,i),t);function o(r,l,d,h,p){var f=0;!function c(u){We[p].isAnimate&&(++f,r.setAttribute("r",u+""),f>=h.length&&(f=0),We[p].timeOut=setTimeout(c.bind(null,h[f]),18))}(l)}}(i)}}e?(0,a.s1)(t,[Ns],[Ls]):(0,a.s1)(t,[Ls],[Ns]),s=null}}function Nt(s){Qu(s,!0),s=null}var xS=function(){function s(e,t){this.pdfViewer=null,this.pdfViewerBase=null,this.totalPageElement=null,this.currentPageBoxElementContainer=null,this.currentPageBoxElement=null,this.firstPageElement=null,this.previousPageElement=null,this.nextPageElement=null,this.lastPageElement=null,this.zommOutElement=null,this.zoomInElement=null,this.zoomDropDownElement=null,this.selectToolElement=null,this.handToolElement=null,this.undoElement=null,this.redoElement=null,this.commentElement=null,this.submitFormButton=null,this.searchElement=null,this.annotationElement=null,this.printElement=null,this.downloadElement=null,this.highlightElement=null,this.underlineElement=null,this.strikeThroughElement=null,this.shapeElement=null,this.calibrateElement=null,this.stampElement=null,this.freeTextElement=null,this.signatureElement=null,this.inkElement=null,this.annotationFontSizeInputElement=null,this.annotationFontFamilyInputElement=null,this.annotationColorElement=null,this.annotationStrokeColorElement=null,this.annotationThicknessElement=null,this.annotationOpacityElement=null,this.annotationFontColorElement=null,this.annotationFontFamilyElement=null,this.annotationFontSizeElement=null,this.annotationTextAlignElement=null,this.annotationTextColorElement=null,this.annotationTextPropertiesElement=null,this.annotationDeleteElement=null,this.annotationCloseElement=null,this.annotationCommentPanelElement=null,this.mobileToolbarContainerElement=null,this.mobileSearchPreviousOccurenceElement=null,this.mobileSearchNextOccurenceElement=null,this.cssClass="e-overlay",this.disableClass=" e-overlay",this.editAnnotationButtonElement=null,this.pdfViewer=e,this.pdfViewerBase=t,this.findToolbarElements()}return s.prototype.findToolbarElements=function(){this.totalPageElement=this.pdfViewerBase.getElement("_totalPage").children[0],this.currentPageBoxElementContainer=this.pdfViewerBase.getElement("_currentPageInput"),this.currentPageBoxElement=this.pdfViewerBase.getElement("_currentPageInput").children[0].children[0],this.firstPageElement=this.pdfViewerBase.getElement("_firstPage"),this.previousPageElement=this.pdfViewerBase.getElement("_previousPage"),this.nextPageElement=this.pdfViewerBase.getElement("_nextPage"),this.lastPageElement=this.pdfViewerBase.getElement("_lastPage"),this.zommOutElement=this.pdfViewerBase.getElement("_zoomOut"),this.zoomInElement=this.pdfViewerBase.getElement("_zoomIn"),this.zoomDropDownElement=this.pdfViewerBase.getElement("_zoomDropDown"),this.selectToolElement=this.pdfViewerBase.getElement("_selectTool"),this.handToolElement=this.pdfViewerBase.getElement("_handTool"),this.undoElement=this.pdfViewerBase.getElement("_undo"),this.redoElement=this.pdfViewerBase.getElement("_redo"),this.commentElement=this.pdfViewerBase.getElement("_comment"),this.submitFormButton=this.pdfViewerBase.getElement("_submitFormButton"),this.searchElement=this.pdfViewerBase.getElement("_search"),this.annotationElement=this.pdfViewerBase.getElement("_annotation"),this.editAnnotationButtonElement=this.annotationElement.children[0],this.editAnnotationButtonElement.classList.add("e-pv-tbar-btn"),this.printElement=this.pdfViewerBase.getElement("_print"),this.downloadElement=this.pdfViewerBase.getElement("_download"),this.highlightElement=this.pdfViewerBase.getElement("_highLight"),this.underlineElement=this.pdfViewerBase.getElement("_underline"),this.strikeThroughElement=this.pdfViewerBase.getElement("_strikethrough"),this.shapeElement=this.pdfViewerBase.getElement("_annotation_shapes"),this.calibrateElement=this.pdfViewerBase.getElement("_annotation_calibrate"),this.stampElement=this.pdfViewerBase.getElement("_annotation_stamp"),this.freeTextElement=this.pdfViewerBase.getElement("_annotation_freeTextEdit"),this.signatureElement=this.pdfViewerBase.getElement("_annotation_signature"),this.inkElement=this.pdfViewerBase.getElement("_annotation_ink"),this.annotationFontSizeInputElement=this.pdfViewerBase.getElement("_annotation_fontsize").children[0].children[0],this.annotationFontFamilyInputElement=this.pdfViewerBase.getElement("_annotation_fontname").children[0].children[0],this.annotationColorElement=this.pdfViewerBase.getElement("_annotation_color"),this.annotationStrokeColorElement=this.pdfViewerBase.getElement("_annotation_stroke"),this.annotationThicknessElement=this.pdfViewerBase.getElement("_annotation_thickness"),this.annotationOpacityElement=this.pdfViewerBase.getElement("_annotation_opacity"),this.annotationFontColorElement=this.pdfViewerBase.getElement("_annotation_textcolor"),this.annotationFontFamilyElement=this.pdfViewerBase.getElement("_annotation_fontname"),this.annotationFontSizeElement=this.pdfViewerBase.getElement("_annotation_fontsize"),this.annotationTextAlignElement=this.pdfViewerBase.getElement("_annotation_textalign"),this.annotationTextColorElement=this.pdfViewerBase.getElement("_annotation_textcolor"),this.annotationTextPropertiesElement=this.pdfViewerBase.getElement("_annotation_textproperties"),this.annotationDeleteElement=this.pdfViewerBase.getElement("_annotation_delete"),this.annotationCommentPanelElement=this.pdfViewerBase.getElement("_annotation_commentPanel"),this.annotationCloseElement=this.pdfViewerBase.getElement("_annotation_close"),this.mobileToolbarContainerElement=this.pdfViewerBase.getElement("_mobileToolbarContainer"),this.mobileSearchPreviousOccurenceElement=this.pdfViewerBase.getElement("_prev_occurrence"),this.mobileSearchNextOccurenceElement=this.pdfViewerBase.getElement("_next_occurrence")},s.prototype.updateTotalPage=function(){this.totalPageElement.textContent=this.pdfViewer.localeObj.getConstant("of")+this.pdfViewerBase.pageCount.toString()},s.prototype.updateCurrentPage=function(e){this.currentPageBoxElement.value=e.toString()},s.prototype.loadDocument=function(){this.pdfViewer.enableNavigation&&(this.currentPageBoxElementContainer.classList.remove(this.cssClass),this.currentPageBoxElement.value="1",this.totalPageElement.textContent=this.pdfViewer.localeObj.getConstant("of")+this.pdfViewerBase.pageCount.toString(),this.isEnabled(this.firstPageElement)||(this.firstPageElement.className+=this.disableClass),this.isEnabled(this.previousPageElement)||(this.previousPageElement.className+=this.disableClass),this.nextPageElement.classList.remove(this.cssClass),this.lastPageElement.classList.remove(this.cssClass),1===this.pdfViewerBase.pageCount&&(this.nextPageElement.classList.contains(this.cssClass)||(this.nextPageElement.className+=this.disableClass),this.lastPageElement.classList.contains(this.cssClass)||(this.lastPageElement.className+=this.disableClass))),this.pdfViewer.enableMagnification&&(this.zoomInElement.classList.remove(this.cssClass),this.zommOutElement.classList.remove(this.cssClass),this.zoomDropDownElement.classList.remove(this.cssClass)),this.pdfViewer.enableTextSelection&&(this.selectToolElement.classList.remove(this.cssClass),this.selectItem(this.pdfViewer.toolbar.SelectToolElement)),this.handToolElement.classList.remove(this.cssClass),this.pdfViewer.enableStickyNotesAnnotation&&this.commentElement.classList.remove(this.cssClass),this.pdfViewer.enableTextSearch&&this.searchElement.classList.remove(this.cssClass),this.pdfViewer.isFormFieldDocument&&this.submitFormButton.classList.remove(this.cssClass),this.pdfViewer.enableAnnotation&&this.pdfViewer.enableAnnotationToolbar&&this.annotationElement.classList.remove(this.cssClass),this.pdfViewer.enablePrint&&this.printElement.classList.remove(this.cssClass),this.pdfViewer.enableDownload&&this.downloadElement.classList.remove(this.cssClass),this.pdfViewer.enableAnnotation&&this.pdfViewer.enableTextMarkupAnnotation&&(this.highlightElement.classList.remove(this.cssClass),this.underlineElement.classList.remove(this.cssClass),this.strikeThroughElement.classList.remove(this.cssClass)),this.pdfViewer.enableAnnotation&&this.pdfViewer.enableShapeAnnotation&&this.shapeElement.classList.remove(this.cssClass),this.pdfViewer.enableAnnotation&&this.pdfViewer.enableMeasureAnnotation&&this.calibrateElement.classList.remove(this.cssClass),this.pdfViewer.enableAnnotation&&this.pdfViewer.enableStampAnnotations&&this.stampElement.classList.remove(this.cssClass),this.pdfViewer.enableFreeText&&this.freeTextElement.classList.remove(this.cssClass),this.pdfViewer.enableHandwrittenSignature&&this.signatureElement.classList.remove(this.cssClass),this.pdfViewer.enableInkAnnotation&&this.inkElement.classList.remove(this.cssClass),this.pdfViewer.enableCommentPanel&&this.annotationCommentPanelElement.classList.remove(this.cssClass)},s.prototype.selectItem=function(e){e&&e.classList.add("e-pv-select")},s.prototype.deselectItem=function(e){e&&e.classList.remove("e-pv-select")},s.prototype.showAnnotationToolbar=function(e){this.pdfViewer.toolbar.annotationToolbarModule.adjustViewer(e[0]),e[0]?this.pdfViewer.toolbar.selectItem(this.editAnnotationButtonElement):(this.pdfViewer.toolbar.deSelectItem(this.editAnnotationButtonElement),this.pdfViewerBase.focusViewerContainer())},s.prototype.closeAnnotationToolbar=function(){this.pdfViewer.toolbar.annotationToolbarModule.adjustViewer(!1),this.pdfViewer.toolbar.deSelectItem(this.editAnnotationButtonElement),this.pdfViewerBase.navigationPane.closeCommentPanelContainer()},s.prototype.resetToolbar=function(){this.pdfViewer.enableToolbar&&(this.currentPageBoxElement.value="0",this.totalPageElement.textContent=this.pdfViewer.localeObj.getConstant("of")+"0",this.isEnabled(this.currentPageBoxElementContainer)||(this.currentPageBoxElementContainer.className+=this.disableClass),this.isEnabled(this.firstPageElement)||(this.firstPageElement.className+=this.disableClass),this.isEnabled(this.previousPageElement)||(this.previousPageElement.className+=this.disableClass),this.isEnabled(this.nextPageElement)||(this.nextPageElement.className+=this.disableClass),this.isEnabled(this.lastPageElement)||(this.lastPageElement.className+=this.disableClass),this.isEnabled(this.zoomInElement)||(this.zoomInElement.className+=this.disableClass),this.isEnabled(this.zommOutElement)||(this.zommOutElement.className+=this.disableClass),this.isEnabled(this.zoomDropDownElement)||(this.zoomDropDownElement.className+=this.disableClass),this.isEnabled(this.selectToolElement)||(this.selectToolElement.className+=this.disableClass),this.isEnabled(this.handToolElement)||(this.handToolElement.className+=this.disableClass),this.isEnabled(this.undoElement)||(this.undoElement.className+=this.disableClass),this.isEnabled(this.redoElement)||(this.redoElement.className+=this.disableClass),this.isEnabled(this.commentElement)||(this.commentElement.className+=this.disableClass),this.isEnabled(this.searchElement)||(this.searchElement.className+=this.disableClass),this.isEnabled(this.submitFormButton)||(this.submitFormButton.className+=this.disableClass),this.isEnabled(this.annotationElement)||(this.annotationElement.className+=this.disableClass),this.isEnabled(this.printElement)||(this.printElement.className+=this.disableClass),this.isEnabled(this.downloadElement)||(this.downloadElement.className+=this.disableClass)),this.pdfViewer.enableAnnotationToolbar&&(this.isEnabled(this.highlightElement)||(this.highlightElement.className+=this.disableClass),this.isEnabled(this.underlineElement)||(this.underlineElement.className+=this.disableClass),this.isEnabled(this.strikeThroughElement)||(this.strikeThroughElement.className+=this.disableClass),this.isEnabled(this.shapeElement)||(this.shapeElement.className+=this.disableClass),this.isEnabled(this.calibrateElement)||(this.calibrateElement.className+=this.disableClass),this.isEnabled(this.stampElement)||(this.stampElement.className+=this.disableClass),this.isEnabled(this.freeTextElement)||(this.freeTextElement.className+=this.disableClass),this.isEnabled(this.signatureElement)||(this.signatureElement.className+=this.disableClass),this.isEnabled(this.inkElement)||(this.inkElement.className+=this.disableClass),this.isEnabled(this.annotationFontFamilyElement)||(this.annotationFontFamilyElement.className+=this.disableClass),this.isEnabled(this.annotationFontSizeElement)||(this.annotationFontSizeElement.className+=this.disableClass),this.isEnabled(this.annotationTextColorElement)||(this.annotationTextColorElement.className+=this.disableClass),this.isEnabled(this.annotationTextAlignElement)||(this.annotationTextAlignElement.className+=this.disableClass),this.isEnabled(this.annotationTextPropertiesElement)||(this.annotationTextPropertiesElement.className+=this.disableClass),this.isEnabled(this.annotationColorElement)||(this.annotationColorElement.className+=this.disableClass),this.isEnabled(this.annotationStrokeColorElement)||(this.annotationStrokeColorElement.className+=this.disableClass),this.isEnabled(this.annotationThicknessElement)||(this.annotationThicknessElement.className+=this.disableClass),this.isEnabled(this.annotationOpacityElement)||(this.annotationOpacityElement.className+=this.disableClass),this.isEnabled(this.annotationDeleteElement)||(this.annotationDeleteElement.className+=this.disableClass),this.isEnabled(this.annotationCommentPanelElement)||(this.annotationCommentPanelElement.className+=this.disableClass))},s.prototype.EnableDeleteOption=function(e){null!==this.annotationDeleteElement&&(e?this.annotationDeleteElement.classList.remove(this.cssClass):this.isEnabled(this.annotationDeleteElement)||(this.annotationDeleteElement.className+=this.disableClass))},s.prototype.pageChanged=function(e){this.pdfViewer.enableNavigation&&(this.currentPageBoxElement.value=e.toString()),e===this.pdfViewer.pageCount&&(this.isEnabled(this.nextPageElement)||(this.nextPageElement.className+=this.disableClass),this.previousPageElement.classList.remove(this.cssClass),this.isEnabled(this.lastPageElement)||(this.lastPageElement.className+=this.disableClass),this.firstPageElement.classList.remove(this.cssClass)),e<this.pdfViewer.pageCount&&1!==e&&(this.firstPageElement.classList.remove(this.cssClass),this.previousPageElement.classList.remove(this.cssClass),this.nextPageElement.classList.remove(this.cssClass),this.lastPageElement.classList.remove(this.cssClass)),1===e&&(this.nextPageElement.classList.remove(this.cssClass),this.lastPageElement.classList.remove(this.cssClass),this.isEnabled(this.firstPageElement)||(this.firstPageElement.className+=this.disableClass),this.isEnabled(this.previousPageElement)||(this.previousPageElement.className+=this.disableClass))},s.prototype.updateUndoRedoButton=function(e,t){"undo"===e&&(t?this.undoElement.classList.remove(this.cssClass):this.isEnabled(this.undoElement)||(this.undoElement.className+=this.disableClass)),"redo"===e&&(t?this.redoElement.classList.remove(this.cssClass):this.isEnabled(this.redoElement)||(this.redoElement.className+=this.disableClass))},s.prototype.disableUndoRedoButton=function(){this.isEnabled(this.undoElement)||(this.undoElement.className+=this.disableClass),this.isEnabled(this.redoElement)||(this.redoElement.className+=this.disableClass)},s.prototype.enableTextMarkupAnnotationPropertiesTools=function(e){e?(this.annotationColorElement.classList.remove(this.cssClass),this.annotationOpacityElement.classList.remove(this.cssClass)):(this.isEnabled(this.annotationOpacityElement)||(this.annotationOpacityElement.className+=this.disableClass),this.isEnabled(this.annotationColorElement)||(this.annotationColorElement.className+=this.disableClass)),this.isEnabled(this.annotationFontColorElement)||(this.annotationFontColorElement.className+=this.disableClass),this.isEnabled(this.annotationFontFamilyElement)||(this.annotationFontFamilyElement.className+=this.disableClass),this.isEnabled(this.annotationFontSizeElement)||(this.annotationFontSizeElement.className+=this.disableClass),this.isEnabled(this.annotationTextAlignElement)||(this.annotationTextAlignElement.className+=this.disableClass),this.isEnabled(this.annotationTextPropertiesElement)||(this.annotationTextPropertiesElement.className+=this.disableClass),this.isEnabled(this.annotationStrokeColorElement)||(this.annotationStrokeColorElement.className+=this.disableClass),this.isEnabled(this.annotationThicknessElement)||(this.annotationThicknessElement.className+=this.disableClass)},s.prototype.enableAnnotationPropertiesTool=function(e,t){t&&(e?(this.annotationColorElement.classList.remove(this.cssClass),this.annotationStrokeColorElement.classList.remove(this.cssClass),this.annotationThicknessElement.classList.remove(this.cssClass),this.annotationOpacityElement.classList.remove(this.cssClass),this.pdfViewer.enableShapeLabel&&(this.annotationFontColorElement.classList.remove(this.cssClass),this.annotationFontFamilyElement.classList.remove(this.cssClass),this.annotationFontSizeElement.classList.remove(this.cssClass)),this.isEnabled(this.annotationTextAlignElement)||(this.annotationTextAlignElement.className+=this.disableClass),this.isEnabled(this.annotationTextPropertiesElement)||(this.annotationTextPropertiesElement.className+=this.disableClass)):(this.isEnabled(this.annotationColorElement)||(this.annotationColorElement.className+=this.disableClass),this.isEnabled(this.annotationStrokeColorElement)||(this.annotationStrokeColorElement.className+=this.disableClass),this.isEnabled(this.annotationThicknessElement)||(this.annotationThicknessElement.className+=this.disableClass),this.isEnabled(this.annotationOpacityElement)||(this.annotationOpacityElement.className+=this.disableClass),this.isEnabled(this.annotationDeleteElement)||(this.annotationDeleteElement.className+=this.disableClass)))},s.prototype.enableFreeTextAnnotationPropertiesTools=function(e,t){t&&e&&(this.annotationColorElement.classList.remove(this.cssClass),this.annotationStrokeColorElement.classList.remove(this.cssClass),this.annotationThicknessElement.classList.remove(this.cssClass),this.annotationOpacityElement.classList.remove(this.cssClass),this.annotationFontColorElement.classList.remove(this.cssClass),this.annotationFontFamilyElement.classList.remove(this.cssClass),this.annotationFontSizeElement.classList.remove(this.cssClass),this.annotationTextAlignElement.classList.remove(this.cssClass),this.annotationTextPropertiesElement.classList.remove(this.cssClass),this.annotationDeleteElement.classList.remove(this.cssClass),this.annotationCommentPanelElement.classList.remove(this.cssClass))},s.prototype.enableStampAnnotationPropertiesTools=function(e,t){e?(this.annotationOpacityElement.classList.remove(this.cssClass),this.annotationDeleteElement.classList.remove(this.cssClass),this.annotationCommentPanelElement.classList.remove(this.cssClass)):(this.isEnabled(this.annotationOpacityElement)||(this.annotationOpacityElement.className+=this.disableClass),this.isEnabled(this.annotationDeleteElement)||(this.annotationDeleteElement.className+=this.disableClass),this.isEnabled(this.annotationCommentPanelElement)||(this.annotationCommentPanelElement.className+=this.disableClass)),this.isEnabled(this.annotationColorElement)||(this.annotationColorElement.className+=this.disableClass),this.isEnabled(this.annotationStrokeColorElement)||(this.annotationStrokeColorElement.className+=this.disableClass),this.isEnabled(this.annotationThicknessElement)||(this.annotationThicknessElement.className+=this.disableClass),this.isEnabled(this.annotationOpacityElement)||(this.annotationOpacityElement.className+=this.disableClass),this.isEnabled(this.annotationFontColorElement)||(this.annotationFontColorElement.className+=this.disableClass),this.isEnabled(this.annotationFontFamilyElement)||(this.annotationFontFamilyElement.className+=this.disableClass),this.isEnabled(this.annotationFontSizeElement)||(this.annotationFontSizeElement.className+=this.disableClass),this.isEnabled(this.annotationTextAlignElement)||(this.annotationTextAlignElement.className+=this.disableClass),this.isEnabled(this.annotationTextPropertiesElement)||(this.annotationTextPropertiesElement.className+=this.disableClass)},s.prototype.enableSignaturePropertiesTools=function(e,t){e?(this.annotationStrokeColorElement.classList.remove(this.cssClass),this.annotationThicknessElement.classList.remove(this.cssClass),this.annotationOpacityElement.classList.remove(this.cssClass),this.annotationDeleteElement.classList.remove(this.cssClass),this.annotationCommentPanelElement.classList.remove(this.cssClass)):(this.isEnabled(this.annotationStrokeColorElement)||(this.annotationStrokeColorElement.className+=this.disableClass),this.isEnabled(this.annotationThicknessElement)||(this.annotationThicknessElement.className+=this.disableClass),this.isEnabled(this.annotationOpacityElement)||(this.annotationOpacityElement.className+=this.disableClass),this.isEnabled(this.annotationDeleteElement)||(this.annotationDeleteElement.className+=this.disableClass),this.isEnabled(this.annotationCommentPanelElement)||(this.annotationCommentPanelElement.className+=this.disableClass)),this.isEnabled(this.annotationColorElement)||(this.annotationColorElement.className+=this.disableClass),this.isEnabled(this.annotationFontColorElement)||(this.annotationFontColorElement.className+=this.disableClass),this.isEnabled(this.annotationFontFamilyElement)||(this.annotationFontFamilyElement.className+=this.disableClass),this.isEnabled(this.annotationFontSizeElement)||(this.annotationFontSizeElement.className+=this.disableClass),this.isEnabled(this.annotationTextAlignElement)||(this.annotationTextAlignElement.className+=this.disableClass),this.isEnabled(this.annotationTextPropertiesElement)||(this.annotationTextPropertiesElement.className+=this.disableClass)},s.prototype.annotationAdd=function(){this.isEnabled(this.annotationColorElement)||(this.annotationColorElement.className+=this.disableClass),this.isEnabled(this.annotationStrokeColorElement)||(this.annotationStrokeColorElement.className+=this.disableClass),this.isEnabled(this.annotationThicknessElement)||(this.annotationThicknessElement.className+=this.disableClass),this.isEnabled(this.annotationOpacityElement)||(this.annotationOpacityElement.className+=this.disableClass),this.isEnabled(this.annotationFontColorElement)||(this.annotationFontColorElement.className+=this.disableClass),this.isEnabled(this.annotationFontFamilyElement)||(this.annotationFontFamilyElement.className+=this.disableClass),this.isEnabled(this.annotationFontSizeElement)||(this.annotationFontSizeElement.className+=this.disableClass),this.isEnabled(this.annotationTextAlignElement)||(this.annotationTextAlignElement.className+=this.disableClass),this.isEnabled(this.annotationTextPropertiesElement)||(this.annotationTextPropertiesElement.className+=this.disableClass)},s.prototype.annotationUnSelect=function(){this.isEnabled(this.annotationColorElement)||(this.annotationColorElement.className+=this.disableClass),this.isEnabled(this.annotationStrokeColorElement)||(this.annotationStrokeColorElement.className+=this.disableClass),this.isEnabled(this.annotationThicknessElement)||(this.annotationThicknessElement.className+=this.disableClass),this.isEnabled(this.annotationOpacityElement)||(this.annotationOpacityElement.className+=this.disableClass),this.isEnabled(this.annotationFontColorElement)||(this.annotationFontColorElement.className+=this.disableClass),this.isEnabled(this.annotationFontFamilyElement)||(this.annotationFontFamilyElement.className+=this.disableClass),this.isEnabled(this.annotationFontSizeElement)||(this.annotationFontSizeElement.className+=this.disableClass),this.isEnabled(this.annotationTextAlignElement)||(this.annotationTextAlignElement.className+=this.disableClass),this.isEnabled(this.annotationTextPropertiesElement)||(this.annotationTextPropertiesElement.className+=this.disableClass),this.isEnabled(this.annotationDeleteElement)||(this.annotationDeleteElement.className+=this.disableClass)},s.prototype.annotationSelect=function(e){"FreeText"===e&&(this.annotationColorElement.classList.remove(this.cssClass),this.annotationStrokeColorElement.classList.remove(this.cssClass),this.annotationThicknessElement.classList.remove(this.cssClass),this.annotationOpacityElement.classList.remove(this.cssClass),this.annotationFontColorElement.classList.remove(this.cssClass),this.annotationFontFamilyElement.classList.remove(this.cssClass),this.annotationFontSizeElement.classList.remove(this.cssClass),this.annotationTextAlignElement.classList.remove(this.cssClass),this.annotationTextPropertiesElement.classList.remove(this.cssClass)),("Shape"===e||"Measure"===e)&&(this.annotationColorElement.classList.remove(this.cssClass),this.annotationStrokeColorElement.classList.remove(this.cssClass),this.annotationThicknessElement.classList.remove(this.cssClass),this.annotationOpacityElement.classList.remove(this.cssClass),this.isEnabled(this.annotationFontColorElement)||(this.annotationFontColorElement.className+=this.disableClass),this.isEnabled(this.annotationFontFamilyElement)||(this.annotationFontFamilyElement.className+=this.disableClass),this.isEnabled(this.annotationFontSizeElement)||(this.annotationFontSizeElement.className+=this.disableClass),this.isEnabled(this.annotationTextAlignElement)||(this.annotationTextAlignElement.className+=this.disableClass),this.isEnabled(this.annotationTextPropertiesElement)||(this.annotationTextPropertiesElement.className+=this.disableClass)),"TextMarkup"===e&&(this.annotationColorElement.classList.remove(this.cssClass),this.isEnabled(this.annotationStrokeColorElement)||(this.annotationStrokeColorElement.className+=this.disableClass),this.isEnabled(this.annotationThicknessElement)||(this.annotationThicknessElement.className+=this.disableClass),this.annotationOpacityElement.classList.remove(this.cssClass),this.isEnabled(this.annotationFontColorElement)||(this.annotationFontColorElement.className+=this.disableClass),this.isEnabled(this.annotationFontFamilyElement)||(this.annotationFontFamilyElement.className+=this.disableClass),this.isEnabled(this.annotationFontSizeElement)||(this.annotationFontSizeElement.className+=this.disableClass),this.isEnabled(this.annotationTextAlignElement)||(this.annotationTextAlignElement.className+=this.disableClass),this.isEnabled(this.annotationTextPropertiesElement)||(this.annotationTextPropertiesElement.className+=this.disableClass)),this.annotationDeleteElement.classList.remove(this.cssClass),this.annotationCommentPanelElement.classList.remove(this.cssClass)},s.prototype.updateFontFamilyInIcon=function(e){this.annotationFontFamilyInputElement.value=e},s.prototype.updateFontSizeInIcon=function(e){var t=e.toString()+"px";this.annotationFontSizeInputElement.value=t},s.prototype.enableSearchItems=function(e){e?(this.mobileSearchPreviousOccurenceElement.classList.remove(this.cssClass),this.mobileSearchNextOccurenceElement.classList.remove(this.cssClass)):(this.isEnabled(this.mobileSearchPreviousOccurenceElement)||(this.mobileSearchPreviousOccurenceElement.className+=this.disableClass),this.isEnabled(this.mobileSearchNextOccurenceElement)||(this.mobileSearchNextOccurenceElement.className+=this.disableClass))},s.prototype.tapOnMobileDevice=function(e){null!=this.mobileToolbarContainerElement&&(this.mobileToolbarContainerElement.style.display=e?"none":"block")},s.prototype.isEnabled=function(e){return e.classList.contains(this.cssClass)},s}(),kS=function(){function s(e){var t=this;this.pageSize=[],this.pageCount=0,this.isReRenderRequired=!0,this.currentPageNumber=0,this.activeElements=new Ib,this.mouseDownEvent=null,this.isDocumentLoaded=!1,this.renderedPagesList=[],this.pageGap=8,this.signatureAdded=!1,this.isFreeTextSelected=!1,this.pageLeft=5,this.sessionLimit=1e3,this.pageStopValue=300,this.toolbarHeight=56,this.pageLimit=0,this.previousPage=0,this.isViewerMouseDown=!1,this.isViewerMouseWheel=!1,this.scrollPosition=0,this.sessionStorage=[],this.isLoadedFormFieldAdded=!1,this.pointerCount=0,this.pointersForTouch=[],this.isPasswordAvailable=!1,this.passwordData="",this.reRenderedCount=0,this.mouseX=0,this.mouseY=0,this.mouseLeft=0,this.mouseTop=0,this.touchClientX=0,this.touchClientY=0,this.previousTime=0,this.currentTime=0,this.isTouchScrolled=!1,this.isLongTouchPropagated=!1,this.longTouchTimer=null,this.isViewerContainerDoubleClick=!1,this.dblClickTimer=null,this.pinchZoomStorage=[],this.isTextSelectionDisabled=!1,this.isPanMode=!1,this.dragX=0,this.dragY=0,this.isScrollbarMouseDown=!1,this.scrollX=0,this.scrollY=0,this.ispageMoved=!1,this.isThumb=!1,this.isTapHidden=!1,this.singleTapTimer=null,this.tapCount=0,this.inputTapCount=0,this.isInitialLoaded=!1,this.annotationPageList=[],this.importPageList=[],this.isImportAction=!1,this.isImportedAnnotation=!1,this.isAnnotationCollectionRemoved=!1,this.tool=null,this.action="Select",this.eventArgs=null,this.inAction=!1,this.isMouseDown=!1,this.isStampMouseDown=!1,this.stampAdded=!1,this.customStampCount=0,this.isDynamicStamp=!1,this.isMixedSizeDocument=!1,this.highestWidth=0,this.highestHeight=0,this.customStampCollection=[],this.isAlreadyAdded=!1,this.isWebkitMobile=!1,this.isFreeTextContextMenu=!1,this.isSelection=!1,this.isAddAnnotation=!1,this.annotationComments=null,this.isToolbarSignClicked=!1,this.signatureCount=0,this.isSignatureAdded=!1,this.isNewSignatureAdded=!1,this.isInitialPageMode=!1,this.documentAnnotationCollections=null,this.annotationRenderredList=[],this.annotationStorage={},this.formFieldStorage={},this.isStorageExceed=!1,this.isNewStamp=!1,this.downloadCollections={},this.isAnnotationAdded=!1,this.annotationEvent=null,this.isAnnotationDrawn=!1,this.isAnnotationSelect=!1,this.isAnnotationMouseDown=!1,this.isAnnotationMouseMove=!1,this.validateForm=!1,this.isMinimumZoom=!1,this.documentLoaded=!1,this.tileRenderCount=0,this.tileRequestCount=0,this.isTileImageRendered=!1,this.isDataExits=!1,this.requestLists=[],this.tilerequestLists=[],this.isInkAdded=!1,this.inkCount=0,this.isAddedSignClicked=!1,this.imageCount=0,this.isMousedOver=!1,this.isFormFieldSelect=!1,this.isFormFieldMouseDown=!1,this.isFormFieldMouseMove=!1,this.isFormFieldMousedOver=!1,this.isPassword=!1,this.isDrawnCompletely=!1,this.isAddComment=!1,this.drawSignatureWithTool=!1,this.formFieldCollection=[],this.nonFillableFields={},this.isInitialField=!1,this.isTouchDesignerMode=!1,this.isPrint=!1,this.isJsonImported=!1,this.isJsonExported=!1,this.isPageRotated=!1,this.downloadFileName="",this.isFocusField=!1,this.focusField=[],this.isDeviceiOS=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document,this.clearSessionStorage=function(){var i;i=a.AR.isIE||"edge"===a.AR.info.name?decodeURI(window.sessionStorage.getItem("hashId")):window.sessionStorage.getItem("hashId");var n=window.sessionStorage.getItem("documentLiveCount");if(null!==i){var o={hashId:i,documentLiveCount:n,action:"Unload",elementId:t.pdfViewer.element.id},r=window.sessionStorage.getItem("unload"),l=window.sessionStorage.getItem("serviceURL");if(l&&"undefined"!==l){if("keepalive"in new Request("")){var h=t.setUnloadRequestHeaders();fetch(l+"/"+r,{method:"POST",credentials:t.pdfViewer.ajaxRequestSettings.withCredentials?"include":"omit",headers:h,body:JSON.stringify(o)})}}else(0,a.xr)()&&t.clearCache(r,o,t)}window.sessionStorage.removeItem(t.documentId+"_annotations_textMarkup"),window.sessionStorage.removeItem(t.documentId+"_annotations_shape"),window.sessionStorage.removeItem(t.documentId+"_annotations_shape_measure"),window.sessionStorage.removeItem(t.documentId+"_annotations_stamp"),window.sessionStorage.removeItem(t.documentId+"_annotations_sticky"),window.sessionStorage.removeItem(t.documentId+"_annotations_freetext"),window.sessionStorage.removeItem(t.documentId+"_formfields"),window.sessionStorage.removeItem(t.documentId+"_formDesigner"),window.sessionStorage.removeItem(t.documentId+"_annotations_sign"),window.sessionStorage.removeItem(t.documentId+"_pagedata"),window.sessionStorage.removeItem("hashId"),window.sessionStorage.removeItem("documentLiveCount"),window.sessionStorage.removeItem("currentDocument"),window.sessionStorage.removeItem("serviceURL"),window.sessionStorage.removeItem("unload")},this.onWindowResize=function(i){var n=null;n=t,t.pdfViewer.enableRtl?(n.viewerContainer.style.right=(n.navigationPane.sideBarToolbar?n.navigationPane.getViewerContainerLeft():0)+"px",n.viewerContainer.style.left=(n.navigationPane.commentPanelContainer?n.navigationPane.commentPanelContainer.offsetWidth:0)+"px"):(n.viewerContainer.style.left=(n.navigationPane.sideBarToolbar?n.navigationPane.getViewerContainerLeft():0)+"px",n.viewerContainer.style.right=(n.navigationPane.commentPanelContainer?n.navigationPane.commentPanelContainer.offsetWidth:0)+"px");var r=(n.pdfViewer.element.clientWidth>0?n.pdfViewer.element.clientWidth:n.pdfViewer.element.style.width)-(n.navigationPane.sideBarToolbar?n.navigationPane.getViewerContainerLeft():0)-(n.navigationPane.commentPanelContainer?n.navigationPane.getViewerContainerRight():0);if(n.viewerContainer.style.width=r+"px",n.pdfViewer.toolbarModule){var l=(0,a.xr)()?n.pdfViewer.element.querySelector(".e-pv-toolbar"):n.getElement("_toolbarContainer"),d=0,h=0;if(l&&(d=l.getBoundingClientRect().height),n.isAnnotationToolbarHidden()||a.AR.isDevice&&!t.pdfViewer.enableDesktopMode){if(0===d&&t.navigationPane.isNavigationToolbarVisible&&(d=n.getElement("_navigationToolbar").getBoundingClientRect().height),!n.isFormDesignerToolbarHidded()){var f=n.getElement("_formdesigner_toolbar");h=f?f.getBoundingClientRect().height:0}n.viewerContainer.style.height=n.updatePageHeight(n.pdfViewer.element.getBoundingClientRect().height,d+h)}else{var c=(0,a.xr)()?n.pdfViewer.element.querySelector(".e-pv-annotation-toolbar"):n.getElement("_annotation_toolbar"),u=0;c&&(u=c.getBoundingClientRect().height),n.viewerContainer.style.height=n.updatePageHeight(n.pdfViewer.element.getBoundingClientRect().height,d+u)}}else n.viewerContainer.style.height=n.updatePageHeight(n.pdfViewer.element.getBoundingClientRect().height,0);if(n.pdfViewer.bookmarkViewModule&&a.AR.isDevice&&!t.pdfViewer.enableDesktopMode){var m=n.getElement("_bookmarks_container");m&&(m.style.height=n.updatePageHeight(n.pdfViewer.element.getBoundingClientRect().height,0))}"0px"===n.viewerContainer.style.height&&("auto"===n.pdfViewer.height.toString()?(n.pdfViewer.height=500,n.viewerContainer.style.height=n.pdfViewer.height+"px"):n.viewerContainer.style.height=n.pdfViewer.element.style.height),"0px"===n.viewerContainer.style.width&&("auto"===n.pdfViewer.width.toString()?(n.pdfViewer.width=500,n.viewerContainer.style.width=n.pdfViewer.width+"px"):n.viewerContainer.style.width=n.pdfViewer.element.style.width),n.pageContainer.style.width=n.viewerContainer.clientWidth+"px",0===n.viewerContainer.clientWidth&&(n.pageContainer.style.width=n.pdfViewer.element.style.width),(0,a.xr)()||n.pdfViewer.toolbarModule&&n.pdfViewer.toolbarModule.onToolbarResize(n.navigationPane.sideBarToolbar?n.navigationPane.getViewerMainContainerWidth():n.pdfViewer.element.clientWidth),t.pdfViewer.enableToolbar&&t.pdfViewer.thumbnailViewModule&&n.pdfViewer.thumbnailViewModule.gotoThumbnailImage(n.currentPageNumber-1),n.pdfViewer.textSearchModule&&(!a.AR.isDevice||t.pdfViewer.enableDesktopMode)&&n.pdfViewer.textSearchModule.textSearchBoxOnResize(),0!==r&&(n.navigationPane.isBookmarkListOpen||n.updateZoomValue()),a.AR.isDevice&&!t.pdfViewer.enableDesktopMode?(n.mobileScrollerContainer.style.left=r-parseFloat(n.mobileScrollerContainer.style.width)+"px",n.mobilePageNoContainer.style.left=r/2-parseFloat(n.mobilePageNoContainer.style.width)/2+"px",n.mobilePageNoContainer.style.top=n.pdfViewer.element.clientHeight/2+"px",n.updateMobileScrollerPosition()):(n.navigationPane.setResizeIconTop(),n.navigationPane.setCommentPanelResizeIconTop(),i&&"resize"===i.type&&n.signatureModule.updateCanvasSize()),n.navigationPane.sideBarToolbar&&(n.navigationPane.sideBarToolbar.style.height=n.viewerContainer.style.height)},this.viewerContainerOnMousedown=function(i){t.isFreeTextContextMenu=!1;var n=!1;t.isSelection=!0;var o=i.target;if(0===i.button&&!t.getPopupNoteVisibleStatus()&&!t.isClickedOnScrollBar(i,!1)){t.isViewerMouseDown=!0,1===i.detail&&"e-pdfviewer-formFields"!==o.className&&"free-text-input"!==o.className&&(n=!0,t.focusViewerContainer(!0)),t.scrollPosition=t.viewerContainer.scrollTop/t.getZoomFactor(),t.mouseX=i.clientX,t.mouseY=i.clientY,t.mouseLeft=i.clientX,t.mouseTop=i.clientY;var r=!!document.documentMode;t.pdfViewer.textSelectionModule&&!t.isClickedOnScrollBar(i,!0)&&!t.isTextSelectionDisabled&&(!r&&"e-pdfviewer-formFields"!==o.className&&"e-pdfviewer-ListBox"!==o.className&&"e-pv-formfield-dropdown"!==o.className&&"e-pv-formfield-listbox"!==o.className&&i.preventDefault(),"e-pv-droplet"!==o.className&&t.pdfViewer.textSelectionModule.clearTextSelection())}t.isClickedOnScrollBar(i,!1)&&(t.isViewerMouseDown=!0),t.isPanMode&&(t.dragX=i.pageX,t.dragY=i.pageY,t.viewerContainer.contains(i.target)&&i.target!==t.viewerContainer&&i.target!==t.pageContainer&&t.isPanMode&&(t.viewerContainer.style.cursor="grabbing")),t.isShapeBasedAnnotationsEnabled()&&(t.isAnnotationDrawn||!("e-pv-page-container"===o.className||"foreign-object"===o.className&&isNaN(t.activeElements.activePageID)))&&t.diagramMouseDown(i),t.pdfViewer.annotation&&t.pdfViewer.annotation.stickyNotesAnnotationModule.accordionContainer&&(n||(t.pdfViewer.annotationModule.stickyNotesAnnotationModule.isEditableElement=!1,t.updateCommentPanel(),n=!0)),(0,a.xr)()&&t.mouseDownHandler(i)},this.viewerContainerOnMouseup=function(i){if(!t.getPopupNoteVisibleStatus()){t.isViewerMouseDown&&(t.scrollHoldTimer&&(clearTimeout(t.scrollHoldTimer),t.scrollHoldTimer=null),t.scrollPosition*t.getZoomFactor()!==t.viewerContainer.scrollTop&&t.pageViewScrollChanged(t.currentPageNumber));var n=!1;i.target&&("e-pv-show-designer-name"==i.target.className&&""!=i.target.id.split("_",1)&&(n=document.getElementById(i.target.id.split("_",1)).disabled),"foreign-object"==i.target.className&&i.target.children[0]&&(n=i.target.children[0].disabled)),n&&t.pdfViewer.annotation&&t.pdfViewer.annotation.clearSelection(),t.isShapeBasedAnnotationsEnabled()&&!n&&(t.isAnnotationDrawn||"DrawTool"!==t.action)&&(t.diagramMouseUp(i),t.pdfViewer.annotation&&t.pdfViewer.annotation.onAnnotationMouseUp()),t.pdfViewer.selectedItems.formFields.length>0?!(0,a.le)(t.pdfViewer.toolbar)&&!(0,a.le)(t.pdfViewer.toolbar.formDesignerToolbarModule)&&!a.AR.isDevice&&t.pdfViewer.toolbar.formDesignerToolbarModule.showHideDeleteIcon(!0):!(0,a.le)(t.pdfViewer.toolbar)&&!(0,a.le)(t.pdfViewer.toolbar.formDesignerToolbarModule)&&!a.AR.isDevice&&t.pdfViewer.toolbar.formDesignerToolbarModule.showHideDeleteIcon(!1),t.isSelection=!1;var o=document.getElementById(t.pdfViewer.element.id+"_commantPanel");if(o&&"block"===o.style.display&&t.pdfViewer.selectedItems&&0!==t.pdfViewer.selectedItems.annotations.length){var r=document.getElementById(t.pdfViewer.element.id+"_accordionContainer"+t.pdfViewer.currentPageNumber);r&&r.ej2_instances[0].expandItem(!0);var l=document.getElementById(t.pdfViewer.selectedItems.annotations[0].annotName);l&&(l.classList.contains("e-pv-comments-border")||l.firstChild.click())}if(0===i.button&&!t.isClickedOnScrollBar(i,!1)){var d=i.target,h=i.clientX,p=i.clientY,f=t.getZoomFactor(),c=t.currentPageNumber;if(d){var u=d.id.split("_text_")[1]||d.id.split("_textLayer_")[1]||d.id.split("_annotationCanvas_")[1]||d.id.split("_pageDiv_")[1];c=parseInt(u)}var m=t.getElement("_pageDiv_"+c);if(m){var g=m.getBoundingClientRect();h=(i.clientX-g.left)/f,p=(i.clientY-g.top)/f}d&&d.classList&&!d.classList.contains("e-pv-hyperlink")&&!d.classList.contains("e-pv-page-container")&&(t.pdfViewer.firePageClick(h,p,c+1),t.pdfViewer.formFieldsModule&&!t.pdfViewer.formDesignerModule&&t.pdfViewer.formFieldsModule.removeFocus()),t.isTextMarkupAnnotationModule()&&!t.isToolbarInkClicked&&t.pdfViewer.annotationModule.textMarkupAnnotationModule.onTextMarkupAnnotationMouseUp(i),t.pdfViewer.formDesignerModule&&!t.pdfViewer.annotationModule&&t.pdfViewer.formDesignerModule.updateCanvas(c),t.viewerContainer.contains(i.target)&&i.target!==t.viewerContainer&&i.target!==t.pageContainer&&t.isPanMode&&(t.viewerContainer.style.cursor="move",t.viewerContainer.style.cursor="-webkit-grab",t.viewerContainer.style.cursor="-moz-grab",t.viewerContainer.style.cursor="grab")}t.isViewerMouseDown=!1}},this.viewerContainerOnMouseWheel=function(i){if(t.isViewerMouseWheel=!0,t.getRerenderCanvasCreated()&&i.preventDefault(),i.ctrlKey){var n=25;t.pdfViewer.magnification.zoomFactor<1&&(n=10),t.pdfViewer.magnification.zoomFactor>=2&&(n=50),t.pdfViewer.magnification.zoomTo(i.wheelDelta>0?100*t.pdfViewer.magnification.zoomFactor+n:100*t.pdfViewer.magnification.zoomFactor-n)}t.pdfViewer.magnificationModule&&(t.pdfViewer.magnificationModule.pageRerenderOnMouseWheel(),i.ctrlKey&&i.preventDefault(),t.pdfViewer.magnificationModule.fitPageScrollMouseWheel(i)),t.pdfViewer.textSelectionModule&&!t.isTextSelectionDisabled&&t.isViewerMouseDown&&(i.target.classList.contains("e-pv-text")||t.pdfViewer.textSelectionModule.textSelectionOnMouseWheel(t.currentPageNumber-1))},this.onWindowKeyDown=function(i){var o=!!navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i)&&i.metaKey;if(!(t.isFreeTextAnnotationModule()&&t.pdfViewer.annotationModule&&(!0===t.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus||!0===t.pdfViewer.annotationModule.inputElementModule.isInFocus)||i.ctrlKey&&o))switch(i.keyCode){case 27:if(t.pdfViewer.toolbar){if(t.pdfViewer.toolbar.addInkAnnotation(),t.pdfViewer.toolbar.deSelectCommentAnnotation(),t.pdfViewer.toolbar.updateStampItems(),t.pdfViewer.toolbar.annotationToolbarModule&&((0,a.xr)()?t.pdfViewer.toolbar.annotationToolbarModule.deselectAllItemsInBlazor():t.pdfViewer.toolbar.annotationToolbarModule.deselectAllItems()),t.pdfViewer.isFormDesignerToolbarVisible&&document.getElementById("FormField_helper_html_element")){var r=document.getElementById("FormField_helper_html_element");r&&r.remove()}t.pdfViewer.tool="",t.focusViewerContainer()}break;case 9:if(i.target&&i.target.id&&t.pdfViewer.formFields)for(var l=0;l<t.pdfViewer.formFields.length;l++){var d=t.pdfViewer.formFields[l];i.target.id===d.id&&t.pdfViewer.fireFocusOutFormField({value:d.value,fontFamily:d.fontFamily,fontSize:d.fontSize,fontStyle:d.fontStyle,color:d.color,backgroundColor:d.backgroundColor,alignment:d.alignment,isReadonly:d.isReadonly,visibility:d.visibility,maxLength:d.maxLength,isRequired:d.isRequired,isPrint:d.isPrint,rotation:d.rotateAngle,tooltip:d.tooltip,options:d.options,isChecked:d.isChecked,isSelected:d.isSelected},d.pageIndex)}}},this.viewerContainerOnKeyDown=function(i){var n=!!navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i),o=!!n&&i.metaKey;if(!t.isFreeTextAnnotationModule()||!t.pdfViewer.annotationModule||!0!==t.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus&&!0!==t.pdfViewer.annotationModule.inputElementModule.isInFocus){if(i.ctrlKey||o){if(i.shiftKey&&!n||n&&!i.shiftKey)switch(i.keyCode){case 38:case 33:i.preventDefault(),1!==t.currentPageNumber&&t.updateScrollTop(0);break;case 40:case 34:i.preventDefault(),t.currentPageNumber!==t.pageCount&&t.updateScrollTop(t.pageCount-1)}switch(i.keyCode){case 79:t.pdfViewer.toolbarModule&&t.pdfViewer.enableToolbar&&t.pdfViewer.toolbarModule.openFileDialogBox(i);break;case 67:t.pdfViewer.textSelectionModule&&t.pdfViewer.enableTextSelection&&!t.isTextSelectionDisabled&&(i.preventDefault(),t.pdfViewer.textSelectionModule.copyText()),(t.pdfViewer.selectedItems.annotations.length||t.pdfViewer.selectedItems.formFields.length)&&(t.pdfViewer.copy(),t.contextMenuModule.previousAction="Copy");break;case 70:t.pdfViewer.textSearchModule&&t.pdfViewer.enableTextSearch&&(i.preventDefault(),t.pdfViewer.toolbarModule.textSearchButtonHandler());break;case 80:t.pdfViewer.printModule&&t.pdfViewer.enablePrint&&(i.preventDefault(),t.pdfViewer.print.print());break;case 90:t.pdfViewer.annotationModule&&t.pdfViewer.annotationModule.undo();break;case 88:(t.pdfViewer.selectedItems.annotations.length||t.pdfViewer.selectedItems.formFields.length)&&(t.pdfViewer.cut(),t.contextMenuModule.previousAction="Cut");break;case 89:t.pdfViewer.annotationModule&&t.pdfViewer.annotationModule.redo();break;case 86:if(t.pdfViewer.annotation&&t.pdfViewer.annotation.isShapeCopied||t.pdfViewer.formFields&&t.pdfViewer.formDesigner&&t.pdfViewer.formDesigner.isShapeCopied){var r=void 0,l=document.getElementById(t.pdfViewer.element.id+"_search_box");l&&(r="none"!==l.style.display),!r&&t.pdfViewer.formDesigner&&!t.pdfViewer.formDesigner.isPropertyDialogOpen&&(t.pdfViewer.paste(),t.contextMenuModule.previousAction="Paste")}}}else 46===i.keyCode&&t.DeleteKeyPressed(i);t.pdfViewer.magnificationModule&&t.pdfViewer.magnificationModule.magnifyBehaviorKeyDown(i)}},this.viewerContainerOnMousemove=function(i){t.mouseX=i.clientX,t.mouseY=i.clientY;var n=!!document.documentMode,o=i.target;if("Drag"===t.action&&i.preventDefault(),t.isViewerMouseDown&&"Perimeter"!==t.action&&"Polygon"!==t.action&&"Line"!==t.action&&"DrawTool"!==t.action&&"Distance"!==t.action)if(t.pdfViewer.textSelectionModule&&t.pdfViewer.enableTextSelection&&!t.isTextSelectionDisabled&&!t.getPopupNoteVisibleStatus())if(n){var l=window.getSelection();!l.type&&!l.isCollapsed&&null!==l.anchorNode&&(t.pdfViewer.textSelectionModule.isTextSelection=!0)}else{"e-pdfviewer-formFields"!=i.target.className&&i.preventDefault(),t.mouseX=i.clientX,t.mouseY=i.clientY;var r=t.pdfViewer.annotationModule;r&&r.textMarkupAnnotationModule&&r.textMarkupAnnotationModule.isDropletClicked&&r.textMarkupAnnotationModule.isEnableTextMarkupResizer(r.textMarkupAnnotationModule.currentTextMarkupAddMode)?r.textMarkupAnnotationModule.textSelect(i.target,t.mouseX,t.mouseY):t.pdfViewer.textSelectionModule.textSelectionOnMouseMove(i.target,t.mouseX,t.mouseY)}else t.skipPreventDefault(o)&&i.preventDefault();if(t.isTextMarkupAnnotationModule()&&!t.getPopupNoteVisibleStatus()&&t.pdfViewer.annotationModule.textMarkupAnnotationModule.onTextMarkupAnnotationMouseMove(i),t.isPanMode&&t.panOnMouseMove(i),t.isShapeBasedAnnotationsEnabled()){var d=void 0;if(i.target&&(i.target.id.indexOf("_text")>-1||i.target.parentElement.classList.contains("foreign-object")||i.target.id.indexOf("_annotationCanvas")>-1||i.target.classList.contains("e-pv-hyperlink"))&&t.pdfViewer.annotation||i.target.classList.contains("e-pdfviewer-formFields")){var h=t.pdfViewer.annotation.getEventPageNumber(i);if(p=document.getElementById(t.pdfViewer.element.id+"_annotationCanvas_"+h)){var c=(f=p.getBoundingClientRect()).x?f.x:f.left,u=f.y?f.y:f.top;d=t.pdfViewer.annotationModule.stampAnnotationModule.currentStampAnnotation&&"Image"===t.pdfViewer.annotationModule.stampAnnotationModule.currentStampAnnotation.shapeAnnotationType?new de(c,u,f.width-10,f.height-10):new de(c+1,u+1,f.width-3,f.height-3)}}else if(!t.pdfViewer.annotationModule&&t.pdfViewer.formDesignerModule){var p;if(h=t.pdfViewer.formDesignerModule.getEventPageNumber(i),p=document.getElementById(t.pdfViewer.element.id+"_annotationCanvas_"+h)){var f=p.getBoundingClientRect();d=new de((c=f.x?f.x:f.left)+10,(f.y?f.y:f.top)+10,f.width-10,f.height-10)}}var g=t.pdfViewer.annotationModule?t.pdfViewer.annotationModule.stampAnnotationModule:null;!d||!d.containsPoint({x:t.mouseX,y:t.mouseY})||g&&g.isStampAnnotSelected?(t.diagramMouseLeave(i),t.isAnnotationDrawn&&"Ink"!==t.action&&(t.diagramMouseUp(i),t.isAnnotationAdded=!0)):(t.diagramMouseMove(i),t.annotationEvent=i),t.pdfViewer.enableStampAnnotations&&g&&g.isStampAnnotSelected&&(t.pdfViewer.tool="Stamp",t.tool=new wo(t.pdfViewer,t),t.isMouseDown=!0,g.isStampAnnotSelected=!1,g.isNewStampAnnot=!0),t.isSignatureAdded&&t.pdfViewer.enableHandwrittenSignature&&(t.pdfViewer.tool="Stamp",t.tool=new wo(t.pdfViewer,t),t.isMouseDown=!0,t.isSignatureAdded=!1,t.isNewSignatureAdded=!0)}},this.panOnMouseMove=function(i){var n=!1;if(("Ink"===t.action||"Line"===t.action||"Perimeter"===t.action||"Polygon"===t.action||"DrawTool"===t.action||"Drag"===t.action||-1!==t.action.indexOf("Rotate")||-1!==t.action.indexOf("Resize"))&&(n=!0),t.viewerContainer.contains(i.target)&&i.target!==t.viewerContainer&&i.target!==t.pageContainer&&!n)if(t.isViewerMouseDown){var o=t.dragX-i.pageX;t.viewerContainer.scrollTop=t.viewerContainer.scrollTop+(t.dragY-i.pageY),t.viewerContainer.scrollLeft=t.viewerContainer.scrollLeft+o,t.viewerContainer.style.cursor="move",t.viewerContainer.style.cursor="-webkit-grabbing",t.viewerContainer.style.cursor="-moz-grabbing",t.viewerContainer.style.cursor="grabbing",t.dragX=i.pageX,t.dragY=i.pageY}else t.navigationPane.isNavigationPaneResized||(t.viewerContainer.style.cursor="move",t.viewerContainer.style.cursor="-webkit-grab",t.viewerContainer.style.cursor="-moz-grab",t.viewerContainer.style.cursor="grab");else t.navigationPane.isNavigationPaneResized||(t.viewerContainer.style.cursor="auto")},this.viewerContainerOnMouseLeave=function(i){t.isViewerMouseDown&&t.pdfViewer.textSelectionModule&&!t.isTextSelectionDisabled&&t.pdfViewer.textSelectionModule.textSelectionOnMouseLeave(i),t.pdfViewer.textSelectionModule&&t.pdfViewer.textSelectionModule.isTextSelection&&i.preventDefault()},this.viewerContainerOnMouseEnter=function(i){t.pdfViewer.textSelectionModule&&!t.isTextSelectionDisabled&&t.pdfViewer.textSelectionModule.clear()},this.viewerContainerOnMouseOver=function(i){var n=!!document.documentMode;t.isViewerMouseDown&&(n||i.preventDefault())},this.viewerContainerOnClick=function(i){if("dblclick"===i.type){if(!t.pdfViewer.textSelectionModule||t.isTextSelectionDisabled||t.getCurrentTextMarkupAnnotation())t.getCurrentTextMarkupAnnotation();else if(i.target.classList.contains("e-pv-text")){if(t.isViewerContainerDoubleClick=!0,!t.getTextMarkupAnnotationMode()){var n=parseFloat(i.target.id.split("_")[2]);t.pdfViewer.fireTextSelectionStart(n+1)}t.pdfViewer.textSelectionModule.selectAWord(i.target,i.clientX,i.clientY,!1),"MouseUp"===t.pdfViewer.contextMenuSettings.contextMenuAction&&t.pdfViewer.textSelectionModule.calculateContextMenuPosition(i.clientY,i.clientX),t.getTextMarkupAnnotationMode()?t.isTextMarkupAnnotationModule()&&t.getTextMarkupAnnotationMode()&&t.pdfViewer.annotationModule.textMarkupAnnotationModule.drawTextMarkupAnnotations(t.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode):(t.pdfViewer.textSelectionModule.maintainSelectionOnZoom(!0,!1),t.dblClickTimer=setTimeout(function(){t.applySelection()},100),t.pdfViewer.textSelectionModule.fireTextSelectEnd())}if(t.action&&("Perimeter"===t.action||"Polygon"===t.action)&&t.tool&&(t.eventArgs.position=t.currentPosition,t.getMouseEventArgs(t.currentPosition,t.eventArgs,i,t.eventArgs.source),t.isMetaKey(i),t.eventArgs.info={ctrlKey:i.ctrlKey,shiftKey:i.shiftKey},t.eventArgs.clickCount=i.detail,t.tool.mouseUp(t.eventArgs,!0)),t.pdfViewer.selectedItems||t.pdfViewer.annotation&&t.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation)if(0!==t.pdfViewer.selectedItems.annotations.length){var l=t.pdfViewer.selectedItems.annotations[0];if(t.pdfViewer.annotationModule&&!l.formFieldAnnotationType&&(t.pdfViewer.annotationModule.annotationSelect(l.annotName,l.pageIndex,l,null,!0),!1===t.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus))if(!0===t.isFreeTextAnnotation(t.pdfViewer.selectedItems.annotations))(d={}).x=t.pdfViewer.selectedItems.annotations[0].bounds.x,d.y=t.pdfViewer.selectedItems.annotations[0].bounds.y,t.pdfViewer.annotation.freeTextAnnotationModule.addInuptElemet(d,t.pdfViewer.selectedItems.annotations[0]);else if(!0===t.pdfViewer.selectedItems.annotations[0].enableShapeLabel){var d;(d={}).x=t.pdfViewer.selectedItems.annotations[0].bounds.x,d.y=t.pdfViewer.selectedItems.annotations[0].bounds.y,t.pdfViewer.annotation.inputElementModule.editLabel(d,t.pdfViewer.selectedItems.annotations[0])}else{(h=document.getElementById(t.pdfViewer.element.id+"_accordionContainer"+t.pdfViewer.currentPageNumber))&&h.ej2_instances[0].expandItem(!0);var p=document.getElementById(t.pdfViewer.selectedItems.annotations[0].annotName);p&&(p.classList.contains("e-pv-comments-border")||p.firstChild.click())}}else{var c=t.pdfViewer.annotationModule;if(t.pdfViewer.annotation&&c.textMarkupAnnotationModule&&c.textMarkupAnnotationModule.currentTextMarkupAnnotation){var h,u=t.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation;t.pdfViewer.annotationModule.annotationSelect(u.annotName,t.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage,u,null,!0),(h=document.getElementById(t.pdfViewer.element.id+"_accordionContainer"+t.currentPageNumber))&&h.ej2_instances[0].expandItem(!0);var m=document.getElementById(u.annotName);m&&m.firstChild.click()}}if(t.pdfViewer.designerMode&&t.pdfViewer.selectedItems.formFields.length>0){var g={name:"formFieldDoubleClick",field:t.pdfViewer.selectedItems.formFields[0],cancel:!1};t.pdfViewer.fireFormFieldDoubleClickEvent(g),g.cancel||t.pdfViewer.formDesigner.createPropertiesWindow()}}else 3===i.detail&&(t.isViewerContainerDoubleClick&&(clearTimeout(t.dblClickTimer),t.isViewerContainerDoubleClick=!1),t.pdfViewer.textSelectionModule&&!t.isTextSelectionDisabled&&!t.getTextMarkupAnnotationMode()&&(t.pdfViewer.textSelectionModule.selectEntireLine(i),t.pdfViewer.textSelectionModule.maintainSelectionOnZoom(!0,!1),t.pdfViewer.textSelectionModule.fireTextSelectEnd(),t.applySelection()))},this.viewerContainerOnDragStart=function(i){document.documentMode||i.preventDefault()},this.viewerContainerOnContextMenuClick=function(i){t.isViewerMouseDown=!1},this.onWindowMouseUp=function(i){t.isFreeTextContextMenu=!1,t.isNewStamp=!1,t.signatureAdded=!1;var n=t.pdfViewer.annotationModule;if(n&&n.textMarkupAnnotationModule&&n.textMarkupAnnotationModule.isEnableTextMarkupResizer(n.textMarkupAnnotationModule.currentTextMarkupAddMode)){var o=n.textMarkupAnnotationModule;o.isLeftDropletClicked=!1,o.isDropletClicked=!1,o.isRightDropletClicked=!1,o.currentTextMarkupAnnotation||null!==window.getSelection().anchorNode?!o.currentTextMarkupAnnotation&&""===o.currentTextMarkupAddMode&&(o.isTextMarkupAnnotationMode=!1):o.showHideDropletDiv(!0)}if(!t.getPopupNoteVisibleStatus()){if(0===i.button){if(t.isNewFreeTextAnnotation())if(!t.pdfViewer.textSelectionModule||t.isTextSelectionDisabled||t.getTextMarkupAnnotationMode()){if(t.getTextMarkupAnnotationMode()){var l=t.pdfViewer.element,d=i.target;l&&d&&l.id.split("_")[0]===d.id.split("_")[0]&&t.pdfViewer.annotationModule.textMarkupAnnotationModule.drawTextMarkupAnnotations(t.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode)}}else{1===i.detail&&!t.viewerContainer.contains(i.target)&&!t.contextMenuModule.contextMenuElement.contains(i.target)&&null!==window.getSelection().anchorNode&&t.pdfViewer.textSelectionModule.textSelectionOnMouseup(i);var r=i.target;t.viewerContainer.contains(i.target)&&"e-pdfviewer-formFields"!==r.className&&"e-pv-formfield-input"!==r.className&&(t.isClickedOnScrollBar(i,!0)||t.isScrollbarMouseDown?null!==window.getSelection().anchorNode&&t.pdfViewer.textSelectionModule.applySpanForSelection():t.pdfViewer.textSelectionModule.textSelectionOnMouseup(i))}}else 2===i.button&&t.viewerContainer.contains(i.target)&&t.skipPreventDefault(i.target)&&t.checkIsNormalText()&&window.getSelection().removeAllRanges();return!t.isViewerMouseDown||(t.isViewerMouseDown=!1,t.pdfViewer.textSelectionModule&&!t.isTextSelectionDisabled&&(t.pdfViewer.textSelectionModule.clear(),t.pdfViewer.textSelectionModule.selectionStartPage=null),i.preventDefault(),i.stopPropagation(),!1)}},this.onWindowTouchEnd=function(i){t.signatureAdded=!1,!t.pdfViewer.element.contains(i.target)&&!t.contextMenuModule.contextMenuElement.contains(i.target)&&t.pdfViewer.textSelectionModule&&!t.isTextSelectionDisabled&&t.pdfViewer.textSelectionModule.clearTextSelection()},this.viewerContainerOnTouchStart=function(i){var n=i.touches;t.pdfViewer.magnificationModule&&t.pdfViewer.magnificationModule.setTouchPoints(n[0].clientX,n[0].clientY);var o=i.target;1===n.length&&!o.classList.contains("e-pv-hyperlink")&&t.skipPreventDefault(o)&&t.preventTouchEvent(i),1===i.touches.length&&t.isTextMarkupAnnotationModule()&&!t.getPopupNoteVisibleStatus()&&(t.isToolbarInkClicked||t.pdfViewer.annotationModule.textMarkupAnnotationModule.onTextMarkupAnnotationTouchEnd(i)),t.touchClientX=n[0].clientX,t.touchClientY=n[0].clientY,t.scrollY=n[0].clientY,t.previousTime=(new Date).getTime(),1!==n.length||i.target.classList.contains("e-pv-touch-select-drop")||i.target.classList.contains("e-pv-touch-ellipse")||(a.AR.isDevice&&!t.pdfViewer.enableDesktopMode&&t.pageCount>0&&!t.isThumb&&!i.target.classList.contains("e-pv-hyperlink")&&t.handleTaps(n,i),(!(0,a.xr)()||!a.AR.isDevice||t.pdfViewer.enableDesktopMode)&&t.handleTextBoxTaps(n),t.isDesignerMode(o)?(t.contextMenuModule.close(),t.isLongTouchPropagated||(t.longTouchTimer=setTimeout(function(){t.isMoving||(t.isTouchDesignerMode=!0,t.contextMenuModule.open(t.touchClientY,t.touchClientX,t.viewerContainer))},1e3)),t.isLongTouchPropagated=!0,t.isMoving=!1):t.pdfViewer.textSelectionModule&&!t.isTextSelectionDisabled&&(t.pdfViewer.textSelectionModule.clearTextSelection(),t.contextMenuModule.close(),t.isLongTouchPropagated||(t.longTouchTimer=setTimeout(function(){t.viewerContainerOnLongTouch(i)},1e3)),t.isLongTouchPropagated=!0));var l=t.pdfViewer.toolbarModule?t.pdfViewer.toolbarModule.annotationToolbarModule:"null";o.classList.contains("e-pv-text")&&(!l||!l.textMarkupToolbarElement||0===l.textMarkupToolbarElement.children.length)&&o.classList.add("e-pv-text-selection-none"),t.diagramMouseDown(i),("Perimeter"===t.action||"Polygon"===t.action||"DrawTool"===t.action||"Drag"===t.action||-1!==t.action.indexOf("Rotate")||-1!==t.action.indexOf("Resize"))&&i.preventDefault()},this.viewerContainerOnLongTouch=function(i){if(t.touchClientX=i.touches[0].clientX,t.touchClientY=i.touches[0].clientY,i.preventDefault(),t.pdfViewer.textSelectionModule){var n=i.target;n.classList.contains("e-pv-text-selection-none")&&n.classList.remove("e-pv-text-selection-none"),t.pdfViewer.textSelectionModule.initiateTouchSelection(i,t.touchClientX,t.touchClientY),a.AR.isDevice&&!t.pdfViewer.enableDesktopMode&&(clearTimeout(t.singleTapTimer),t.tapCount=0)}},this.viewerContainerOnPointerDown=function(i){"touch"===i.pointerType&&(t.pointerCount++,t.pointerCount<=2&&(i.preventDefault(),t.pointersForTouch.push(i),2===t.pointerCount&&(t.pointerCount=0),t.pdfViewer.magnificationModule&&t.pdfViewer.magnificationModule.setTouchPoints(i.clientX,i.clientY)))},this.viewerContainerOnTouchMove=function(i){"Drag"===t.action&&(t.isMoving=!0),a.AR.isDevice&&!t.pdfViewer.enableDesktopMode&&(clearTimeout(t.singleTapTimer),t.tapCount=0),t.preventTouchEvent(i),t.isToolbarInkClicked&&i.preventDefault();var o,n=i.touches;if(t.pdfViewer.magnificationModule&&(t.isTouchScrolled=!0,n.length>1&&t.pageCount>0?(a.AR.isDevice&&!t.pdfViewer.enableDesktopMode&&(t.isTouchScrolled=!1),t.pdfViewer.enablePinchZoom&&t.pdfViewer.magnificationModule.initiatePinchMove(n[0].clientX,n[0].clientY,n[1].clientX,n[1].clientY)):1===n.length&&t.getPagesPinchZoomed()&&(a.AR.isDevice&&!t.pdfViewer.enableDesktopMode&&(t.isTouchScrolled=!1),t.pdfViewer.magnificationModule.pinchMoveScroll())),t.mouseX=n[0].clientX,t.mouseY=n[0].clientY,i.target&&(i.target.id.indexOf("_text")>-1||i.target.id.indexOf("_annotationCanvas")>-1||i.target.classList.contains("e-pv-hyperlink"))&&t.pdfViewer.annotation){var r=t.pdfViewer.annotation.getEventPageNumber(i),l=document.getElementById(t.pdfViewer.element.id+"_annotationCanvas_"+r);if(l){var d=l.getBoundingClientRect();o=new de((d.x?d.x:d.left)+10,(d.y?d.y:d.top)+10,d.width-10,d.height-10)}}o&&o.containsPoint({x:t.mouseX,y:t.mouseY})?(t.diagramMouseMove(i),t.annotationEvent=i):(t.diagramMouseLeave(i),t.isAnnotationDrawn&&(t.diagramMouseUp(i),t.isAnnotationAdded=!0)),n=null},this.viewerContainerOnPointerMove=function(i){if("touch"===i.pointerType&&t.pageCount>0&&(i.preventDefault(),2===t.pointersForTouch.length)){for(var n=0;n<t.pointersForTouch.length;n++)if(i.pointerId===t.pointersForTouch[n].pointerId){t.pointersForTouch[n]=i;break}t.pdfViewer.magnificationModule&&t.pdfViewer.enablePinchZoom&&t.pdfViewer.magnificationModule.initiatePinchMove(t.pointersForTouch[0].clientX,t.pointersForTouch[0].clientY,t.pointersForTouch[1].clientX,t.pointersForTouch[1].clientY)}},this.viewerContainerOnTouchEnd=function(i){if(t.pdfViewer.magnificationModule&&t.pdfViewer.magnificationModule.pinchMoveEnd(),i.cancelable&&!i.target.classList.contains("e-pv-touch-ellipse")&&t.pdfViewer.textSelectionModule&&t.pdfViewer.textSelectionModule.isTextSelection&&i.preventDefault(),t.isLongTouchPropagated=!1,clearInterval(t.longTouchTimer),t.longTouchTimer=null,a.AR.isDevice&&!t.pdfViewer.enableDesktopMode&&t.isTouchScrolled){t.currentTime=(new Date).getTime();var n=t.currentTime-t.previousTime,o=t.scrollY-i.changedTouches[0].pageY,r=o/n;if(Math.abs(r)>1.5){var l=o+n*r;l>0&&(t.viewerContainer.scrollTop+=l,t.updateMobileScrollerPosition())}}t.diagramMouseUp(i),t.renderStampAnnotation(i),a.AR.isDevice||t.focusViewerContainer()},this.viewerContainerOnPointerEnd=function(i){"touch"===i.pointerType&&(i.preventDefault(),t.pdfViewer.magnificationModule&&t.pdfViewer.magnificationModule.pinchMoveEnd(),t.pointersForTouch=[],t.pointerCount=0)},this.viewerContainerOnScroll=function(i){var n=null,o=(n=t).pdfViewer.allowServerDataBinding;n.pdfViewer.enableServerDataBinding(!1);var r=0;if(i.touches&&a.AR.isDevice&&!t.pdfViewer.enableDesktopMode){var d=(t.viewerContainer.scrollHeight-t.viewerContainer.clientHeight)/(t.viewerContainer.clientHeight-t.toolbarHeight);if(t.isThumb){t.ispageMoved=!0,i.preventDefault(),t.mobilePageNoContainer.style.display="block",r=i.touches[0].pageX-t.scrollX,t.viewerContainer.scrollTop=(i.touches[0].pageY-t.viewerContainer.offsetTop)*d;var h=i.touches[0].pageY;0!==t.viewerContainer.scrollTop&&h<=t.viewerContainer.clientHeight-(t.pdfViewer.toolbarModule?0:50)&&(t.mobileScrollerContainer.style.top=h+"px")}else"e-pv-touch-ellipse"!==i.touches[0].target.className&&(t.isWebkitMobile&&a.AR.isDevice&&!t.pdfViewer.enableDesktopMode||(t.mobilePageNoContainer.style.display="none",r=t.touchClientX-i.touches[0].pageX,t.viewerContainer.scrollTop=t.viewerContainer.scrollTop+(t.touchClientY-i.touches[0].pageY),t.viewerContainer.scrollLeft=t.viewerContainer.scrollLeft+r),t.updateMobileScrollerPosition(),t.touchClientY=i.touches[0].pageY,t.touchClientX=i.touches[0].pageX)}t.scrollHoldTimer&&clearTimeout(t.scrollHoldTimer);var f=t.currentPageNumber;t.scrollHoldTimer=null,t.contextMenuModule.close();for(var c=t.viewerContainer.scrollTop,u=0;u<t.pageCount;u++)if(null!=t.pageSize[u]){var m=t.getPageHeight(u);if(t.pageStopValue=m<150?75:m>=150&&m<300?125:m>=300&&m<500?200:300,c+t.pageStopValue<=t.getPageTop(u)+m){t.currentPageNumber=u+1,t.pdfViewer.currentPageNumber=u+1;break}}t.pdfViewer.magnificationModule&&"fitToPage"===t.pdfViewer.magnificationModule.fitType&&t.currentPageNumber>0&&t.pageSize[t.currentPageNumber-1]&&!t.isPanMode&&!a.AR.isDevice&&t.pdfViewer.enableDesktopMode&&(t.viewerContainer.scrollTop=t.pageSize[t.currentPageNumber-1].top*t.getZoomFactor()),t.renderElementsVirtualScroll(t.currentPageNumber),(t.isViewerMouseDown||t.getPinchZoomed()||t.getPinchScrolled()||t.getPagesPinchZoomed())&&!t.isViewerMouseWheel?t.showPageLoadingIndicator(t.currentPageNumber-1,!1):(t.pageViewScrollChanged(t.currentPageNumber),t.isViewerMouseWheel=!1),t.pdfViewer.toolbarModule&&((0,a.xr)()||t.pdfViewer.toolbarModule.updateCurrentPage(t.currentPageNumber),t.viewerContainer.setAttribute("aria-labelledby",t.pdfViewer.element.id+"_pageDiv_"+(t.currentPageNumber-1)),(0,a.xr)()||(!a.AR.isDevice||t.pdfViewer.enableDesktopMode)&&t.pdfViewer.toolbarModule.updateNavigationButtons()),a.AR.isDevice&&!t.pdfViewer.enableDesktopMode&&(t.mobileSpanContainer.innerHTML=t.currentPageNumber.toString(),t.mobilecurrentPageContainer.innerHTML=t.currentPageNumber.toString()),f!==t.currentPageNumber&&(n.pdfViewer.thumbnailViewModule&&(!a.AR.isDevice||t.pdfViewer.enableDesktopMode)&&(n.pdfViewer.thumbnailViewModule.gotoThumbnailImage(n.currentPageNumber-1),n.pdfViewer.thumbnailViewModule.isThumbnailClicked=!1),t.pdfViewer.firePageChange(f)),t.pdfViewer.magnificationModule&&!t.isPanMode&&!a.AR.isDevice&&t.pdfViewer.enableDesktopMode&&t.pdfViewer.magnificationModule.updatePagesForFitPage(t.currentPageNumber-1);var g=t.getElement("_pageDiv_"+(t.currentPageNumber-1));g&&(g.style.visibility="visible"),t.isViewerMouseDown&&(t.getRerenderCanvasCreated()&&!t.isPanMode&&t.pdfViewer.magnificationModule.clearIntervalTimer(),t.getStoredData(t.currentPageNumber)?(t.isDataExits=!0,t.initiatePageViewScrollChanged(),t.isDataExits=!1):t.scrollHoldTimer=setTimeout(function(){t.initiatePageViewScrollChanged()},t.pdfViewer.scrollSettings.delayPageRequestTimeOnScroll?t.pdfViewer.scrollSettings.delayPageRequestTimeOnScroll:100)),t.pdfViewer.annotation&&t.navigationPane.commentPanelContainer&&t.pdfViewer.annotation.stickyNotesAnnotationModule.updateCommentPanelScrollTop(t.currentPageNumber),a.AR.isDevice&&!t.pdfViewer.enableDesktopMode&&i.touches&&"e-pv-touch-ellipse"!==i.touches[0].target.className&&setTimeout(function(){t.updateMobileScrollerPosition()},500),n.pdfViewer.enableServerDataBinding(o,!0)},this.pdfViewer=e,this.navigationPane=new Hb(this.pdfViewer,this),this.textLayer=new AS(this.pdfViewer,this),this.signatureModule=new IS(this.pdfViewer,this),this.isWebkitMobile=/Chrome/.test(navigator.userAgent)||/Google Inc/.test(navigator.vendor)||-1!==navigator.userAgent.indexOf("Safari")}return s.prototype.initializeComponent=function(){var e=document.getElementById(this.pdfViewer.element.id);if(e){this.blazorUIAdaptor=(0,a.xr)()?new xS(this.pdfViewer,this):null,a.AR.isDevice&&!this.pdfViewer.enableDesktopMode&&this.pdfViewer.element.classList.add("e-pv-mobile-view");var i=void 0;this.viewerMainContainer=(0,a.xr)()?e.querySelector(".e-pv-viewer-main-container"):(0,a.az)("div",{id:this.pdfViewer.element.id+"_viewerMainContainer",className:"e-pv-viewer-main-container"}),this.viewerContainer=(0,a.xr)()?e.querySelector(".e-pv-viewer-container"):(0,a.az)("div",{id:this.pdfViewer.element.id+"_viewerContainer",className:"e-pv-viewer-container",attrs:{"aria-label":"pdfviewer scroll view"}}),a.AR.isDevice&&!this.pdfViewer.enableDesktopMode&&this.createMobilePageNumberContainer(),this.viewerContainer.tabIndex=0,this.pdfViewer.enableRtl&&(this.viewerContainer.style.direction="rtl"),e.style.touchAction="pan-x pan-y",this.setMaximumHeight(e),this.mainContainer=(0,a.xr)()?e.querySelector(".e-pv-main-container"):(0,a.az)("div",{id:this.pdfViewer.element.id+"_mainContainer",className:"e-pv-main-container"}),this.mainContainer.appendChild(this.viewerMainContainer),e.appendChild(this.mainContainer),this.applyViewerHeight(this.mainContainer),this.pdfViewer.toolbarModule?(this.navigationPane.initializeNavigationPane(),i=this.pdfViewer.toolbarModule.intializeToolbar("100%")):(0,a.xr)()&&(this.navigationPane.initializeNavigationPane(),i=this.pdfViewer.element.querySelector(".e-pv-toolbar"),this.pdfViewer.enableToolbar||(this.toolbarHeight=0,i.style.display="none"),!this.pdfViewer.enableNavigationToolbar&&(a.AR.isDevice&&this.pdfViewer.enableDesktopMode||!a.AR.isDevice)&&(this.navigationPane.sideBarToolbar.style.display="none",this.navigationPane.sideBarToolbarSplitter.style.display="none",(this.navigationPane.isBookmarkOpen||this.navigationPane.isThumbnailOpen)&&this.navigationPane.updateViewerContainerOnClose())),this.viewerContainer.style.height=this.updatePageHeight(this.pdfViewer.element.getBoundingClientRect().height,i?56:0);var n=this.pdfViewer.element.clientWidth;(!a.AR.isDevice||this.pdfViewer.enableDesktopMode)&&(n=n-(this.navigationPane.sideBarToolbar?this.navigationPane.getViewerContainerLeft():0)-(this.navigationPane.commentPanelContainer?this.navigationPane.getViewerContainerRight():0)),this.viewerContainer.style.width=n+"px",this.viewerMainContainer.appendChild(this.viewerContainer),a.AR.isDevice&&!this.pdfViewer.enableDesktopMode&&(this.mobileScrollerContainer.style.left=n-parseFloat(this.mobileScrollerContainer.style.width)+"px",this.mobilePageNoContainer.style.left=n/2-parseFloat(this.mobilePageNoContainer.style.width)/2+"px",this.mobilePageNoContainer.style.top=this.pdfViewer.element.clientHeight/2+"px",this.mobilePageNoContainer.style.display="none",this.mobilePageNoContainer.appendChild(this.mobilecurrentPageContainer),this.mobilePageNoContainer.appendChild(this.mobilenumberContainer),this.mobilePageNoContainer.appendChild(this.mobiletotalPageContainer),this.viewerContainer.appendChild(this.mobilePageNoContainer),this.viewerMainContainer.appendChild(this.mobileScrollerContainer),this.mobileScrollerContainer.appendChild(this.mobileSpanContainer)),this.pageContainer=(0,a.az)("div",{id:this.pdfViewer.element.id+"_pageViewContainer",className:"e-pv-page-container",attrs:{tabindex:"0","aria-label":"pdfviewer Page View"}}),this.pdfViewer.enableRtl&&(this.pageContainer.style.direction="ltr"),this.viewerContainer.appendChild(this.pageContainer),this.pageContainer.style.width=this.viewerContainer.clientWidth+"px",i&&this.pdfViewer.thumbnailViewModule&&(!a.AR.isDevice||this.pdfViewer.enableDesktopMode)&&this.pdfViewer.thumbnailViewModule.createThumbnailContainer(),this.createPrintPopup(),a.AR.isDevice&&!this.pdfViewer.enableDesktopMode&&this.createGoToPagePopup();var o=(0,a.az)("div",{id:this.pdfViewer.element.id+"_loadingIndicator"});if(this.viewerContainer.appendChild(o),Rs({target:o,cssClass:"e-spin-center"}),this.setLoaderProperties(o),(0,a.xr)()){this.contextMenuModule=new qb(this.pdfViewer,this);var r=document.getElementsByClassName(this.pdfViewer.element.id+"_spinner");r&&r[0]&&!r[0].classList.contains("e-spin-hide")&&(r[0].classList.remove("e-spin-show"),r[0].classList.add("e-spin-hide"))}else this.contextMenuModule=new MS(this.pdfViewer,this);this.contextMenuModule.createContextMenu(),this.createFileInputElement(),this.wireEvents(),this.pdfViewer.textSearchModule&&(!a.AR.isDevice||this.pdfViewer.enableDesktopMode)&&this.pdfViewer.textSearchModule.createTextSearchBox(),this.pdfViewer.documentPath&&((0,a.xr)()?this.pdfViewer._dotnetInstance.invokeMethodAsync("LoadDocumentFromClient",this.pdfViewer.documentPath):this.pdfViewer.load(this.pdfViewer.documentPath,null)),this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.initializeCollection()}a.AR.isDevice&&this.pdfViewer.enableDesktopMode&&this.pdfViewer.toolbarModule&&(this.pdfViewer.interactionMode="Pan")},s.prototype.createMobilePageNumberContainer=function(){this.mobilePageNoContainer=(0,a.az)("div",{id:this.pdfViewer.element.id+"_mobilepagenoContainer",className:"e-pv-mobilepagenoscroll-container"}),this.mobilecurrentPageContainer=(0,a.az)("span",{id:this.pdfViewer.element.id+"_mobilecurrentpageContainer",className:"e-pv-mobilecurrentpage-container"}),this.mobilenumberContainer=(0,a.az)("span",{id:this.pdfViewer.element.id+"_mobiledashedlineContainer",className:"e-pv-mobiledashedline-container"}),this.mobiletotalPageContainer=(0,a.az)("span",{id:this.pdfViewer.element.id+"_mobiletotalpageContainer",className:"e-pv-mobiletotalpage-container"}),this.mobileScrollerContainer=(0,a.az)("div",{id:this.pdfViewer.element.id+"_mobilescrollContainer",className:"e-pv-mobilescroll-container"}),this.mobileSpanContainer=(0,a.az)("span",{id:this.pdfViewer.element.id+"_mobilespanContainer",className:"e-pv-mobilespanscroll-container"}),this.mobileSpanContainer.innerHTML="1",this.mobilecurrentPageContainer.innerHTML="1",this.mobilenumberContainer.innerHTML="&#x2015;&#x2015;&#x2015;&#x2015;&#x2015;",this.mobileScrollerContainer.style.cssFloat="right",this.mobileScrollerContainer.style.width="40px",this.mobileScrollerContainer.style.height="32px",this.mobileScrollerContainer.style.zIndex="100",this.mobilePageNoContainer.style.width="120px",this.mobilePageNoContainer.style.height="100px",this.mobilePageNoContainer.style.zIndex="100",this.mobilePageNoContainer.style.position="fixed",this.mobileScrollerContainer.addEventListener("touchstart",this.mobileScrollContainerDown.bind(this)),this.mobileScrollerContainer.addEventListener("touchend",this.mobileScrollContainerEnd.bind(this)),this.mobileScrollerContainer.style.display="none"},s.prototype.initiatePageRender=function(e,t){this.loadedData=e,this.documentId=this.createGUID(),this.viewerContainer&&(this.viewerContainer.scrollTop=0),this.showLoadingIndicator(!0),this.hashId=" ",this.isFileName=!1,this.saveDocumentInfo(),"Pan"===this.pdfViewer.interactionMode&&this.initiatePanning(),e=this.checkDocumentData(e),this.setFileName(),this.downloadFileName=this.pdfViewer.downloadFileName?this.pdfViewer.downloadFileName:this.pdfViewer.fileName;var i=this.constructJsonObject(e,t);this.createAjaxRequest(i,e,t)},s.prototype.initiateLoadDocument=function(e,t,i){e&&(this.documentId=e),this.viewerContainer&&(this.viewerContainer.scrollTop=0),this.showLoadingIndicator(!0),this.hashId=" ",this.isFileName=t,this.saveDocumentInfo(),"Pan"===this.pdfViewer.interactionMode&&this.initiatePanning(),this.setFileName(),null===this.pdfViewer.fileName&&(t&&i?(this.pdfViewer.fileName=i,this.jsonDocumentId=this.pdfViewer.fileName):(this.pdfViewer.fileName="undefined.pdf",this.jsonDocumentId=null)),this.downloadFileName=this.pdfViewer.downloadFileName?this.pdfViewer.downloadFileName:this.pdfViewer.fileName},s.prototype.loadSuccess=function(e,t){var i=e;if(i){if("object"!=typeof i)try{i=JSON.parse(i)}catch(n){this.onControlError(500,i,this.pdfViewer.serverActionSettings.load),i=null}if(i){for(;"object"!=typeof i;)if(i=JSON.parse(i),"number"==typeof parseInt(i)&&!isNaN(parseInt(i))){i=parseInt(i);break}i.StatusText&&"File Does not Exist"===i.StatusText&&this.showLoadingIndicator(!1),(i.uniqueId===this.documentId||"number"==typeof parseInt(i)&&!isNaN(parseInt(i)))&&(this.pdfViewer.fireAjaxRequestSuccess(this.pdfViewer.serverActionSettings.load,i),this.requestSuccess(i,null,t))}}},s.prototype.mobileScrollContainerDown=function(e){if(this.ispageMoved=!1,this.isThumb=!0,this.isTextMarkupAnnotationModule()&&null!=this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage&&a.AR.isDevice&&!this.pdfViewer.enableDesktopMode){var t=this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage;this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage=null,this.pdfViewer.annotationModule.textMarkupAnnotationModule.clearAnnotationSelection(t),this.pdfViewer.toolbar.showToolbar(!0)}this.mobileScrollerContainer.addEventListener("touchmove",this.viewerContainerOnScroll.bind(this),!0)},s.prototype.relativePosition=function(e){var t=this.viewerContainer.getBoundingClientRect();return{x:e.clientX-t.left,y:e.clientY-t.top}},s.prototype.setMaximumHeight=function(e){var t=e.getBoundingClientRect();(!a.AR.isDevice||this.pdfViewer.enableDesktopMode||t&&0===t.height)&&(e.style.minHeight="500px"),this.updateWidth(),this.updateHeight()},s.prototype.applyViewerHeight=function(e){var t=e.getBoundingClientRect();a.AR.isDevice&&!this.pdfViewer.enableDesktopMode&&t&&0===t.height&&(e.style.minHeight="500px")},s.prototype.updateWidth=function(){"auto"!==this.pdfViewer.width.toString()&&(this.pdfViewer.element.style.width=this.pdfViewer.width)},s.prototype.updateHeight=function(){"auto"!==this.pdfViewer.height.toString()&&(this.pdfViewer.element.style.height=this.pdfViewer.height)},s.prototype.updateViewerContainer=function(){var e=this.getElement("_sideBarContentContainer");e&&"none"===e.style.display?this.navigationPane.updateViewerContainerOnClose():e&&"block"===e.style.display?this.navigationPane.updateViewerContainerOnExpand():this.updateViewerContainerSize();var t=this.pdfViewer.toolbarModule;t&&((0,a.xr)()?(this.pdfViewer.enableToolbar||this.pdfViewer.enableAnnotationToolbar)&&this.pdfViewer._dotnetInstance.invokeMethodAsync("RefreshToolbarItems"):(this.pdfViewer.enableToolbar&&t.toolbar.refreshOverflow(),this.pdfViewer.enableAnnotationToolbar&&t.annotationToolbarModule&&t.annotationToolbarModule.toolbar.refreshOverflow()))},s.prototype.updateViewerContainerSize=function(){this.viewerContainer.style.width=this.pdfViewer.element.clientWidth+"px",this.pageContainer.style.width=this.viewerContainer.offsetWidth+"px",this.updateZoomValue()},s.prototype.mobileScrollContainerEnd=function(e){this.ispageMoved||this.goToPagePopup.show(),this.isThumb=!1,this.ispageMoved=!1,this.mobileScrollerContainer.removeEventListener("touchmove",this.viewerContainerOnScroll.bind(this),!0),this.mobilePageNoContainer.style.display="none"},s.prototype.createAjaxRequest=function(e,t,i){var n;n=this,this.pdfViewer.serverActionSettings&&(this.loadRequestHandler=new Ue(this.pdfViewer),this.loadRequestHandler.url=this.pdfViewer.serviceUrl+"/"+this.pdfViewer.serverActionSettings.load,this.loadRequestHandler.responseType="json",this.loadRequestHandler.mode=!0,e.action="Load",e.elementId=this.pdfViewer.element.id,this.loadRequestHandler.send(e),this.loadRequestHandler.onSuccess=function(o){var r=o.data;if(r){if("object"!=typeof r)try{r=JSON.parse(r)}catch(l){n.onControlError(500,r,this.pdfViewer.serverActionSettings.load),r=null}if(r){for(;"object"!=typeof r;)if(r=JSON.parse(r),"number"==typeof parseInt(r)&&!isNaN(parseInt(r))){r=parseInt(r);break}(r.uniqueId===n.documentId||"number"==typeof parseInt(r)&&!isNaN(parseInt(r)))&&(n.updateFormFieldName(r),n.pdfViewer.fireAjaxRequestSuccess(this.pdfViewer.serverActionSettings.load,r),n.requestSuccess(r,t,i))}}else n.showLoadingIndicator(!1),n.openImportExportNotificationPopup(n.pdfViewer.localeObj.getConstant("Import PDF Failed"))},this.loadRequestHandler.onFailure=function(o){"4"===o.status.toString().split("")[0]?n.openNotificationPopup("Client error"):n.openNotificationPopup(),n.showLoadingIndicator(!1),n.pdfViewer.fireAjaxRequestFailed(o.status,o.statusText,n.pdfViewer.serverActionSettings.load)},this.loadRequestHandler.onError=function(o){n.openNotificationPopup(),n.showLoadingIndicator(!1),n.pdfViewer.fireAjaxRequestFailed(o.status,o.statusText,n.pdfViewer.serverActionSettings.load)})},s.prototype.updateFormFieldName=function(e){if(e&&e.PdfRenderedFormFields&&e.PdfRenderedFormFields.length>0)for(var t=void 0,i=0;i<e.PdfRenderedFormFields.length;i++)(t=e.PdfRenderedFormFields[i])&&t.ActualFieldName&&(t.FieldName=t.ActualFieldName)},s.prototype.openNotificationPopup=function(e){var t=this;this.pdfViewer.showNotificationDialog&&("Client error"===e?(0,a.xr)()?this.pdfViewer._dotnetInstance.invokeMethodAsync("GetLocaleText","PdfViewer_Clienterror").then(function(n){t.textLayer.createNotificationPopup(n)}):this.textLayer.createNotificationPopup(this.pdfViewer.localeObj.getConstant("Client error")):(0,a.xr)()?this.pdfViewer._dotnetInstance.invokeMethodAsync("GetLocaleText","PdfViewer_Servererror").then(function(o){t.textLayer.createNotificationPopup(o)}):this.textLayer.createNotificationPopup(this.pdfViewer.localeObj.getConstant("Server error")),this.getElement("_notify")&&this.getElement("_notify").classList.add("e-pv-notification-large-content"))},s.prototype.showNotificationPopup=function(e){!this.pdfViewer.showNotificationDialog&&""!==e&&(this.textLayer.createNotificationPopup(e),this.getElement("_notify")&&this.getElement("_notify").classList.add("e-pv-notification-large-content"))},s.prototype.requestSuccess=function(e,t,i){e&&void 0!==e.pageCount?((0,a.xr)()&&this.isPassword&&(this.isPassword=!1,this.isPasswordAvailable=!1,this.pdfViewer._dotnetInstance.invokeMethodAsync("ClosePasswordDialog")),i&&""!=i&&(this.passwordData=i),this.pdfViewer.allowServerDataBinding=!1,this.pageCount=e.pageCount,this.pdfViewer.pageCount=e.pageCount,this.hashId=e.hashId,this.documentLiveCount=e.documentLiveCount,this.isAnnotationCollectionRemoved=!1,this.saveDocumentHashData(),this.saveFormfieldsData(e),this.pdfViewer.allowServerDataBinding=!0,this.pageRender(e),window.sessionStorage.setItem(this.documentId+"_pagedata",JSON.stringify({pageCount:e.pageCount,pageSizes:e.pageSizes})),a.AR.isDevice&&!this.pdfViewer.enableDesktopMode&&(this.mobileScrollerContainer.style.display="",this.mobileScrollerContainer.style.top=(this.pdfViewer.toolbarModule?this.toolbarHeight:0)+"px"),this.restrictionList=e.RestrictionSummary,this.RestrictionEnabled(this.restrictionList,!1)):(this.pageCount=0,this.currentPageNumber=0,a.AR.isDevice&&!this.pdfViewer.enableDesktopMode&&(this.mobileScrollerContainer.style.display="none"),4===e?(0,a.xr)()||this.renderPasswordPopup(t,i):3===e&&((0,a.xr)()||this.renderCorruptPopup()),this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.updateToolbarItems());var r=this.pdfViewer.annotationModule;r&&r.textMarkupAnnotationModule&&r.textMarkupAnnotationModule.isEnableTextMarkupResizer(r.textMarkupAnnotationModule.currentTextMarkupAddMode)&&r.textMarkupAnnotationModule.createAnnotationSelectElement()},s.prototype.RestrictionEnabled=function(e,t){if(e)for(var i=0;i<e.length;i++)this.EnableRestriction(e[i],t),(0,a.xr)()?this.pdfViewer.toolbarModule&&this.pdfViewer._dotnetInstance.invokeMethodAsync("RestrictToolbarItems",e,t):this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.DisableToolbarItems(e[i],t)},s.prototype.EnableRestriction=function(e,t){switch(e){case"Print":this.pdfViewer.enablePrint=t;break;case"CopyContent":this.pdfViewer.enableTextSelection=t;break;case"FillFields":this.pdfViewer.enableFormFields=t,this.enableFormFieldButton(t);break;case"EditAnnotations":this.pdfViewer.enableAnnotation=t}},s.prototype.pageRender=function(e){this.document=null,this.passwordDialogReset(),this.passwordPopup&&this.passwordPopup.hide(),this.initPageDiv(e),this.currentPageNumber=1,this.pdfViewer.currentPageNumber=1,this.previousZoomValue=this.pdfViewer.zoomValue;var i=!1;if(this.pdfViewer.magnificationModule&&(this.pdfViewer.magnificationModule.isAutoZoom=!0,this.pdfViewer.zoomValue&&this.pdfViewer.zoomValue>0&&(100!==this.pdfViewer.zoomValue&&(i=!0),this.isInitialPageMode=!0,this.pdfViewer.magnification.zoomTo(this.pdfViewer.zoomValue)),"FitToWidth"===this.pdfViewer.zoomMode?(this.isInitialPageMode=!0,this.pdfViewer.magnificationModule.fitToWidth()):"FitToPage"===this.pdfViewer.zoomMode&&(this.isInitialPageMode=!0,this.pdfViewer.magnificationModule.fitToPage()),this.documentLoaded=!0,this.pdfViewer.magnificationModule.isInitialLoading=!0,this.onWindowResize(),this.documentLoaded=!1,this.pdfViewer.magnificationModule.isInitialLoading=!1),this.isDocumentLoaded=!0,-1===this.renderedPagesList.indexOf(0)&&!i){this.createRequestForRender(0);var o=1;if(o<this.pageCount&&(this.createRequestForRender(o),o+=1),this.pageSize[o])for(var r=this.getPageTop(o),l=this.viewerContainer.clientHeight;l>r&&this.pageSize[o];)this.renderPageElement(o),this.createRequestForRender(o),r=this.getPageTop(o),o+=1}this.showLoadingIndicator(!1),(0,a.xr)()||this.pdfViewer.toolbarModule&&(this.pdfViewer.toolbarModule.uploadedDocumentName=null,this.pdfViewer.toolbarModule.updateCurrentPage(this.currentPageNumber),this.pdfViewer.toolbarModule.updateToolbarItems(),this.pdfViewer.toolbar&&this.pdfViewer.toolbar.annotationToolbarModule&&this.pdfViewer.toolbar.annotationToolbarModule.enableAnnotationAddTools(!0),this.viewerContainer.setAttribute("aria-labelledby",this.pdfViewer.element.id+"_pageDiv_"+(this.currentPageNumber-1))),a.AR.isDevice&&!this.pdfViewer.enableDesktopMode&&(this.mobileSpanContainer.innerHTML=this.currentPageNumber.toString(),this.mobilecurrentPageContainer.innerHTML=this.currentPageNumber.toString())},s.prototype.renderPasswordPopup=function(e,t){var i=this;if((0,a.xr)()){var n=document.getElementById(this.pdfViewer.element.id+"_prompt");this.pdfViewer._dotnetInstance.invokeMethodAsync("GetLocaleText","PdfViewer_EnterPassword").then(function(d){n.textContent=d});var r=document.querySelector("#"+this.pdfViewer.element.id+"_password_input");r.addEventListener("keyup",function(){""===r.value&&i.passwordDialogReset()}),r.addEventListener("focus",function(){r.parentElement.classList.add("e-input-focus")}),r.addEventListener("blur",function(){r.parentElement.classList.remove("e-input-focus")}),this.isPasswordAvailable?(this.pdfViewer.fireDocumentLoadFailed(!0,t),n.classList.add("e-pv-password-error"),this.pdfViewer._dotnetInstance.invokeMethodAsync("GetLocaleText","PdfViewer_InvalidPassword").then(function(d){n.textContent=d}),n.focus(),this.document=this.isFileName?e:"data:application/pdf;base64,"+e):(this.document=this.isFileName?e:"data:application/pdf;base64,"+e,this.isPasswordAvailable=!0,this.pdfViewer.fireDocumentLoadFailed(!0,null)),this.pdfViewer._dotnetInstance.invokeMethodAsync("OpenPasswordDialog")}else this.isPasswordAvailable?(this.pdfViewer.fireDocumentLoadFailed(!0,t),this.promptElement.classList.add("e-pv-password-error"),this.promptElement.textContent=this.pdfViewer.localeObj.getConstant("Invalid Password"),this.promptElement.focus(),this.document=this.isFileName?e:"data:application/pdf;base64,"+e,this.passwordPopup.show()):(this.document=this.isFileName?e:"data:application/pdf;base64,"+e,this.isPasswordAvailable=!0,this.createPasswordPopup(),this.pdfViewer.fireDocumentLoadFailed(!0,null),this.passwordPopup.show())},s.prototype.renderCorruptPopup=function(){this.pdfViewer.fireDocumentLoadFailed(!1,null),this.documentId=null,this.pdfViewer.showNotificationDialog&&((0,a.xr)()?this.pdfViewer._dotnetInstance.invokeMethodAsync("OpenCorruptedDialog"):(this.createCorruptedPopup(),this.corruptPopup.show()))},s.prototype.constructJsonObject=function(e,t){var i;return t?(this.isPasswordAvailable=!0,this.passwordData=t,i={document:e,password:t,zoomFactor:"1",isFileName:this.isFileName.toString(),uniqueId:this.documentId}):(this.isPasswordAvailable=!1,this.passwordData="",i={document:e,zoomFactor:"1",isFileName:this.isFileName.toString(),uniqueId:this.documentId}),i},s.prototype.checkDocumentData=function(e){var t=e.split("base64,")[1];if(void 0===t){if(this.isFileName=!0,this.jsonDocumentId=e,null===this.pdfViewer.fileName){var i=-1!==e.indexOf("\\")?e.split("\\"):e.split("/");this.pdfViewer.fileName=i[i.length-1],this.jsonDocumentId=this.pdfViewer.fileName,t=e}}else this.jsonDocumentId=null;return t},s.prototype.setFileName=function(){null===this.pdfViewer.fileName&&(this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.uploadedDocumentName?(this.pdfViewer.fileName=this.pdfViewer.toolbarModule.uploadedDocumentName,this.jsonDocumentId=this.pdfViewer.fileName):(this.pdfViewer.fileName="undefined.pdf",this.jsonDocumentId=null))},s.prototype.saveDocumentInfo=function(){window.sessionStorage.setItem("currentDocument",this.documentId),window.sessionStorage.setItem("serviceURL",this.pdfViewer.serviceUrl),this.pdfViewer.serverActionSettings&&window.sessionStorage.setItem("unload",this.pdfViewer.serverActionSettings.unload)},s.prototype.saveDocumentHashData=function(){var e;e=a.AR.isIE||"edge"===a.AR.info.name?encodeURI(this.hashId):this.hashId,window.sessionStorage.setItem("hashId",e),this.documentLiveCount&&window.sessionStorage.setItem("documentLiveCount",this.documentLiveCount.toString())},s.prototype.saveFormfieldsData=function(e){if(this.pdfViewer.isFormFieldDocument=!1,this.enableFormFieldButton(!1),e&&e.PdfRenderedFormFields&&e.PdfRenderedFormFields.length>0){if(this.formfieldvalue)this.pdfViewer.formFieldsModule&&this.setItemInSessionStorage(this.formfieldvalue,"_formfields"),this.formfieldvalue=null;else if(this.pdfViewer.formFieldsModule){for(var t=0;t<e.PdfRenderedFormFields.length;t++)""==e.PdfRenderedFormFields[t].FieldName&&e.PdfRenderedFormFields.splice(t,1);this.setItemInSessionStorage(e.PdfRenderedFormFields,"_formfields")}this.pdfViewer.enableFormFields&&this.pdfViewer.formFieldsModule&&this.pdfViewer.formFieldsModule.formFieldCollections(),this.pdfViewer.formFieldCollections.length>0&&(this.pdfViewer.isFormFieldDocument=!0,this.enableFormFieldButton(!0))}},s.prototype.enableFormFieldButton=function(e){e&&(this.pdfViewer.isFormFieldDocument=!0),this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.submitItem&&this.pdfViewer.toolbarModule.toolbar.enableItems(this.pdfViewer.toolbarModule.submitItem.parentElement,e)},s.prototype.updateWaitingPopup=function(e){if(null!=this.pageSize[e].top){var t=this.getElement("_pageDiv_"+e).getBoundingClientRect(),i=this.getElement("_pageDiv_"+e).firstChild.firstChild;t.top<0?this.toolbarHeight+this.viewerContainer.clientHeight/2-t.top<t.height?i.style.top=this.viewerContainer.clientHeight/2-t.top-this.toolbarHeight+"px":this.toolbarHeight+t.bottom/2-t.top<t.height&&(i.style.top=t.bottom/2-t.top-this.toolbarHeight+"px"):i.style.top=this.viewerContainer.clientHeight/2+"px",i.style.left=a.AR.isDevice&&!this.pdfViewer.enableDesktopMode&&t.width>this.viewerContainer.clientWidth?this.viewerContainer.clientWidth/2+this.viewerContainer.scrollLeft+"px":this.getZoomFactor()>1.25&&t.width>this.viewerContainer.clientWidth?this.viewerContainer.clientWidth/2+"px":t.width/2+"px"}},s.prototype.getActivePage=function(e){return this.activeElements&&!(0,a.le)(this.activeElements.activePageID)?e?this.activeElements.activePageID+1:this.activeElements.activePageID:e?this.currentPageNumber:this.currentPageNumber-1},s.prototype.createWaitingPopup=function(e){var t=document.getElementById(this.pdfViewer.element.id+"_pageDiv_"+e);t&&(Rs({target:t}),this.setLoaderProperties(t))},s.prototype.showLoadingIndicator=function(e){var t=this.getElement("_loadingIndicator");t&&(e?(t.style.display="block",bo(t)):(t.style.display="none",Nt(t)))},s.prototype.showPageLoadingIndicator=function(e,t){var i=this.getElement("_pageDiv_"+e);null!=i&&(t?bo(i):Nt(i),this.updateWaitingPopup(e))},s.prototype.showPrintLoadingIndicator=function(e){var t=this.getElement("_printLoadingIndicator");null!=t&&(e?(this.printMainContainer.style.display="block",bo(t)):(this.printMainContainer.style.display="none",Nt(t)))},s.prototype.setLoaderProperties=function(e){var t=e.firstChild.firstChild.firstChild;t&&(t.style.height="48px",t.style.width="48px",t.style.transformOrigin="24px 24px 24px")},s.prototype.updateScrollTop=function(e){var t=this;null!=this.pageSize[e]&&(this.renderElementsVirtualScroll(e),this.viewerContainer.scrollTop=this.getPageTop(e),-1===this.renderedPagesList.indexOf(e)&&this.createRequestForRender(e),setTimeout(function(){var i=e+1;i!==t.currentPageNumber&&(t.pdfViewer.currentPageNumber=i,t.currentPageNumber=i,t.pdfViewer.toolbarModule&&t.pdfViewer.toolbarModule.updateCurrentPage(i))},100))},s.prototype.getZoomFactor=function(){return this.pdfViewer.magnificationModule?this.pdfViewer.magnificationModule.zoomFactor:1},s.prototype.getPinchZoomed=function(){return!!this.pdfViewer.magnificationModule&&this.pdfViewer.magnificationModule.isPinchZoomed},s.prototype.getMagnified=function(){return!!this.pdfViewer.magnificationModule&&this.pdfViewer.magnificationModule.isMagnified},s.prototype.getPinchScrolled=function(){return!!this.pdfViewer.magnificationModule&&this.pdfViewer.magnificationModule.isPinchScrolled},s.prototype.getPagesPinchZoomed=function(){return!!this.pdfViewer.magnificationModule&&this.pdfViewer.magnificationModule.isPagePinchZoomed},s.prototype.getPagesZoomed=function(){return!!this.pdfViewer.magnificationModule&&this.pdfViewer.magnificationModule.isPagesZoomed},s.prototype.getRerenderCanvasCreated=function(){return!!this.pdfViewer.magnificationModule&&this.pdfViewer.magnificationModule.isRerenderCanvasCreated},s.prototype.getDocumentId=function(){return this.documentId},s.prototype.download=function(){this.pageCount>0&&this.createRequestForDownload()},s.prototype.saveAsBlob=function(){var e=this;return this.pageCount>0?new Promise(function(t,i){e.saveAsBlobRequest().then(function(n){t(n)})}):null},s.prototype.saveAsBlobRequest=function(){var t,e=this;return t=this,new Promise(function(n,o){var r=t.constructJsonDownload();e.dowonloadRequestHandler=new Ue(e.pdfViewer),e.dowonloadRequestHandler.url=t.pdfViewer.serviceUrl+"/"+t.pdfViewer.serverActionSettings.download,e.dowonloadRequestHandler.responseType="text",e.dowonloadRequestHandler.send(r),e.dowonloadRequestHandler.onSuccess=function(l){var d=l.data;if(d&&("object"==typeof d&&(d=JSON.parse(d)),"object"!=typeof d&&-1===d.indexOf("data:application/pdf")&&(t.onControlError(500,d,t.pdfViewer.serverActionSettings.download),d=null),d)){t.pdfViewer.fireAjaxRequestSuccess(t.pdfViewer.serverActionSettings.download,d);var h=t.createBlobUrl(d.split("base64,")[1],"application/pdf");n(h)}},e.dowonloadRequestHandler.onFailure=function(l){t.pdfViewer.fireAjaxRequestFailed(l.status,l.statusText,t.pdfViewer.serverActionSettings.download)},e.dowonloadRequestHandler.onError=function(l){t.openNotificationPopup(),t.pdfViewer.fireAjaxRequestFailed(l.status,l.statusText,t.pdfViewer.serverActionSettings.download)}})},s.prototype.clear=function(e){var t=this,i=t.pdfViewer,n=i.printModule,o=i.textSearchModule,r=i.bookmarkViewModule,l=i.thumbnailView,d=i.annotation,h=i.magnificationModule,p=i.textSelectionModule,f=i.formFieldsModule,c=t.signatureModule;if(t.isPasswordAvailable=!1,t.isDocumentLoaded=!1,t.isInitialLoaded=!1,t.isImportAction=!1,t.annotationPageList=[],t.annotationComments=null,i.annotationCollection=[],i.signatureCollection=[],i.formFieldCollection=[],t.isAnnotationCollectionRemoved=!1,t.documentAnnotationCollections=null,t.isDrawnCompletely=!1,t.annotationRenderredList=[],t.isImportAction=!1,t.isImportedAnnotation=!1,t.importedAnnotation=[],t.isStorageExceed=!1,t.annotationStorage={},t.formFieldStorage={},t.downloadCollections={},t.annotationEvent=null,t.highestWidth=0,t.highestHeight=0,t.requestLists=[],t.tilerequestLists=[],t.isToolbarInkClicked=!1,i.formFieldCollections=[],t.passwordData="",t.isFocusField=!1,t.focusField=[],t.updateDocumentEditedProperty(!1),i.clipboardData.clipObject={},i.formDesignerModule&&(i.formDesignerModule.formFieldIndex=0,t.activeElements&&i.clearSelection(t.activeElements.activePageID),i.zIndexTable=[]),t.initiateTextSelectMode(),t.RestrictionEnabled(t.restrictionList,!0),t.restrictionList=null,(!a.AR.isDevice||i.enableDesktopMode)&&t.navigationPane.sideBarToolbar&&t.navigationPane.clear(),(!(0,a.xr)()&&a.AR.isDevice||!i.enableDesktopMode)&&t.navigationPane.clear(),l&&l.clear(),r&&r.clear(),h&&(h.isMagnified=!1,h.clearIntervalTimer()),p&&p.clearTextSelection(),o&&o.resetTextSearch(),d&&(d.clear(),d.initializeCollection()),f&&(f.readOnlyCollection=[],f.signatureFieldCollection=[],f.renderedPageList=[],f.currentTarget=null),c&&(c.signaturecollection=[],c.outputcollection=[]),t.pageSize&&(t.pageSize=[]),t.renderedPagesList&&(t.renderedPagesList=[]),t.pageContainer)for(;t.pageContainer.hasChildNodes();)t.pageContainer.removeChild(t.pageContainer.lastChild);t.pageCount>0&&(t.unloadDocument(t),t.textLayer.characterBound=new Array,t.loadRequestHandler&&t.loadRequestHandler.clear(),t.virtualLoadRequestHandler&&t.virtualLoadRequestHandler.clear(),t.pageRequestHandler&&t.pageRequestHandler.clear(),t.dowonloadRequestHandler&&t.dowonloadRequestHandler.clear(),t.importAnnotationRequestHandler&&t.importAnnotationRequestHandler.clear(),t.exportAnnotationRequestHandler&&t.exportAnnotationRequestHandler.clear(),t.importFormFieldsRequestHandler&&t.importFormFieldsRequestHandler.clear(),t.exportFormFieldsRequestHandler&&t.exportFormFieldsRequestHandler.clear(),n&&n.printRequestHandler&&n.printRequestHandler.clear()),t.windowSessionStorageClear(),t.pinchZoomStorage&&(t.pinchZoomStorage=[]),(t.previousZoomValue||0===t.previousZoomValue)&&t.previousZoomValue!==i.zoomValue&&(i.zoomValue=t.previousZoomValue),e&&t.pageCount>0&&i.fireDocumentUnload(this.pdfViewer.fileName),this.pdfViewer.fileName=null},s.prototype.destroy=function(){if(a.AR.isDevice&&!this.pdfViewer.enableDesktopMode&&this.pdfViewer.element.classList.remove("e-pv-mobile-view"),this.unWireEvents(),this.clear(!1),this.pageContainer.parentNode&&this.pageContainer.parentNode.removeChild(this.pageContainer),this.viewerContainer.parentNode&&this.viewerContainer.parentNode.removeChild(this.viewerContainer),this.contextMenuModule){var e=this.contextMenuModule.contextMenuElement;e&&e.ej2_instances&&e.ej2_instances.length>0&&this.contextMenuModule.destroy()}this.pdfViewer.toolbarModule&&this.navigationPane.destroy();var t=document.getElementById("measureElement");t&&(t=void 0)},s.prototype.unloadDocument=function(e){var t;t=a.AR.isIE||"edge"===a.AR.info.name?decodeURI(window.sessionStorage.getItem("hashId")):e.hashId?e.hashId:window.sessionStorage.getItem("hashId");var i=window.sessionStorage.getItem("documentLiveCount");if(null!==t){var n={hashId:t,documentLiveCount:i,action:"Unload",elementId:e.pdfViewer.element.id},o=window.sessionStorage.getItem("unload");if(window.sessionStorage.getItem("serviceURL")&&"undefined"!==window.sessionStorage.getItem("serviceURL"))try{if("keepalive"in new Request("")){var l=this.setUnloadRequestHeaders(),d=this.pdfViewer.ajaxRequestSettings.withCredentials?"include":"omit";fetch(window.sessionStorage.getItem("serviceURL")+"/"+o,{method:"POST",credentials:d,headers:l,body:JSON.stringify(n)})}}catch(h){this.unloadRequestHandler=new Ue(this.pdfViewer),this.unloadRequestHandler.send(n)}else(0,a.xr)()&&this.clearCache(o,n,e)}this.pdfViewer.magnificationModule&&(this.pdfViewer.magnificationModule.zoomFactor=1),this.formFieldCollection=[],window.sessionStorage.removeItem("hashId"),window.sessionStorage.removeItem("documentLiveCount"),this.documentId&&(window.sessionStorage.removeItem(this.documentId+"_formfields"),window.sessionStorage.removeItem(this.documentId+"_formDesigner"),window.sessionStorage.removeItem(this.documentId+"_annotations_shape"),window.sessionStorage.removeItem(this.documentId+"_annotations_shape_measure"),window.sessionStorage.removeItem(this.documentId+"_annotations_stamp"),window.sessionStorage.removeItem(this.documentId+"_annotations_sticky"),window.sessionStorage.removeItem(this.documentId+"_annotations_textMarkup"),window.sessionStorage.removeItem(this.documentId+"_annotations_freetext"),window.sessionStorage.removeItem(this.documentId+"_formfields"),window.sessionStorage.removeItem(this.documentId+"_annotations_sign"),window.sessionStorage.removeItem(this.documentId+"_annotations_ink"))},s.prototype.clearCache=function(e,t,i){this.unloadRequestHandler=new Ue(this.pdfViewer),this.unloadRequestHandler.url=window.sessionStorage.getItem("serviceURL")+"/"+e,this.unloadRequestHandler.mode=!1,this.unloadRequestHandler.responseType=null,this.unloadRequestHandler.send(t),this.unloadRequestHandler.onSuccess=function(n){var o=n.data;o&&("object"!=typeof o&&-1===o.indexOf("Document")&&(i.onControlError(500,o,e),o=null),o&&i.pdfViewer.fireAjaxRequestSuccess(i.pdfViewer.serverActionSettings.unload,o))},this.unloadRequestHandler.onFailure=function(n){i.pdfViewer.fireAjaxRequestFailed(n.status,n.statusText,e)},this.unloadRequestHandler.onError=function(n){i.pdfViewer.fireAjaxRequestFailed(n.status,n.statusText,e)}},s.prototype.setUnloadRequestHeaders=function(){var e=new Headers;e.append("Content-Type","application/json;charset=UTF-8");for(var t=0;t<this.pdfViewer.ajaxRequestSettings.ajaxHeaders.length;t++)e.append(this.pdfViewer.ajaxRequestSettings.ajaxHeaders[t].headerName,this.pdfViewer.ajaxRequestSettings.ajaxHeaders[t].headerValue);return e},s.prototype.windowSessionStorageClear=function(){window.sessionStorage.removeItem("currentDocument"),window.sessionStorage.removeItem("serviceURL"),window.sessionStorage.removeItem("unload");for(var e=0;e<this.sessionStorage.length;e++)window.sessionStorage.removeItem(this.sessionStorage[e])},s.prototype.updateCommentPanel=function(){for(var e=document.querySelectorAll("#"+this.pdfViewer.element.id+"_more-options"),t=0;t<e.length;t++)e[t].style.visibility="hidden";for(var i=document.querySelectorAll(".e-pv-new-comments-div"),n=0;n<i.length;n++)i[n].style.display="none";var o=document.querySelectorAll(".e-pv-comments-border");for(n=0;n<o.length;n++)o[n].classList.remove("e-pv-comments-border");var r=document.querySelectorAll(".e-editable-inline");for(n=0;n<r.length;n++)r[n].style.display="none";for(var l=document.querySelectorAll(".e-pv-comments-select"),d=0;d<l.length;d++)l[d].classList.remove("e-pv-comments-select");var h=document.querySelectorAll(".e-pv-comments-div");for(n=0;n<h.length;n++)h[n].style.minHeight="60px"},s.prototype.focusViewerContainer=function(e){var t=window.scrollX,i=window.scrollY,n=this.getScrollParent(this.viewerContainer),o=0,r=0;null!==n&&(o=n.scrollLeft,r=n.scrollTop),this.viewerContainer.focus(),this.currentPageNumber>0&&this.viewerContainer.setAttribute("aria-labelledby",this.pdfViewer.element.id+"_pageDiv_"+(this.currentPageNumber-1)),this.pdfViewer.annotation&&this.pdfViewer.annotation.stickyNotesAnnotationModule.accordionContainer&&this.updateCommentPanel(),(-1!==navigator.userAgent.indexOf("MSIE")||navigator.appVersion.indexOf("Trident/")>-1||-1!==navigator.userAgent.indexOf("Edge"))&&null!==n?(n.scrollLeft=o,n.scrollTop=r):null!==n&&n.scrollTo(o,r),window.scrollTo(t,i)},s.prototype.getScrollParent=function(e){if(null===e||"HTML"===e.nodeName)return null;var t=getComputedStyle(e);return this.viewerContainer.id===e.id||"scroll"!==t.overflowY&&"auto"!==t.overflowY?this.getScrollParent(e.parentNode):e},s.prototype.createCorruptedPopup=function(){var e=this,t=(0,a.az)("div",{id:this.pdfViewer.element.id+"_corrupted_popup",className:"e-pv-corrupted-popup"});this.pageContainer.appendChild(t),this.corruptPopup=new j.Vq({showCloseIcon:!0,closeOnEscape:!0,isModal:!0,header:'<div class="e-pv-corrupted-popup-header"> '+this.pdfViewer.localeObj.getConstant("File Corrupted")+"</div>",visible:!1,buttons:[{buttonModel:{content:this.pdfViewer.localeObj.getConstant("OK"),isPrimary:!0},click:this.closeCorruptPopup.bind(this)}],target:this.pdfViewer.element,beforeClose:function(){e.corruptPopup.destroy(),e.getElement("_corrupted_popup").remove(),e.corruptPopup=null;var i=e.getElement("_loadingIndicator");null!=i&&Nt(i)}}),this.pdfViewer.enableRtl?(this.corruptPopup.content='<div id="templatertl" class="e-pv-notification-icon-rtl"> <div class="e-pv-corrupted-popup-content-rtl" tabindex="0">'+this.pdfViewer.localeObj.getConstant("File Corrupted Content")+"</div></div>",this.corruptPopup.enableRtl=!0):this.corruptPopup.content='<div id="template" class="e-pv-notification-icon"> <div class="e-pv-corrupted-popup-content" tabindex="0">'+this.pdfViewer.localeObj.getConstant("File Corrupted Content")+"</div></div>",this.corruptPopup.appendTo(t)},s.prototype.hideLoadingIndicator=function(){var e=this.getElement("_loadingIndicator");null!==e&&Nt(e)},s.prototype.closeCorruptPopup=function(){this.corruptPopup.hide();var e=this.getElement("_loadingIndicator");null!==e&&Nt(e)},s.prototype.createPrintPopup=function(){var e=document.getElementById(this.pdfViewer.element.id);this.printMainContainer=(0,a.az)("div",{id:this.pdfViewer.element.id+"_printcontainer",className:"e-pv-print-popup-container"}),e.appendChild(this.printMainContainer),this.printMainContainer.style.display="none";var t=(0,a.az)("div",{id:this.pdfViewer.element.id+"_printLoadingIndicator",className:"e-pv-print-loading-container"});this.printMainContainer.appendChild(t),Rs({target:t,cssClass:"e-spin-center"}),this.setLoaderProperties(t)},s.prototype.createGoToPagePopup=function(){var e=this,t=(0,a.az)("div",{id:this.pdfViewer.element.id+"_goTopage_popup",className:"e-pv-gotopage-popup"});this.goToPageElement=(0,a.az)("span",{id:this.pdfViewer.element.id+"_prompt"}),this.goToPageElement.textContent=this.pdfViewer.localeObj.getConstant("Enter pagenumber"),t.appendChild(this.goToPageElement);var i=(0,a.az)("span",{className:"e-pv-text-input"});this.goToPageInput=(0,a.az)("input",{id:this.pdfViewer.element.id+"_page_input",className:"e-input"}),this.goToPageInput.type="text",this.goToPageInput.style.maxWidth="80%",this.pageNoContainer=(0,a.az)("span",{className:".e-pv-number-ofpages"}),i.appendChild(this.goToPageInput),i.appendChild(this.pageNoContainer),t.appendChild(i),this.pageContainer.appendChild(t),this.goToPagePopup=new j.Vq({showCloseIcon:!0,closeOnEscape:!1,isModal:!0,header:this.pdfViewer.localeObj.getConstant("GoToPage"),visible:!1,buttons:[{buttonModel:{content:this.pdfViewer.localeObj.getConstant("Cancel")},click:this.GoToPageCancelClick.bind(this)},{buttonModel:{content:this.pdfViewer.localeObj.getConstant("Apply"),disabled:!0,cssClass:"e-pv-gotopage-apply-btn",isPrimary:!0},click:this.GoToPageApplyClick.bind(this)}],close:this.closeGoToPagePopUp.bind(this)}),this.pdfViewer.enableRtl&&(this.goToPagePopup.enableRtl=!0),this.goToPagePopup.appendTo(t),(0,a.xr)()||new G.No({format:"##",showSpinButton:!1}).appendTo(this.goToPageInput),this.goToPageInput.addEventListener("keyup",function(){var o=e.goToPageInput.value;""!==o&&parseFloat(o)>0&&e.pdfViewer.pageCount+1>parseFloat(o)?e.EnableApplyButton():e.DisableApplyButton()})},s.prototype.closeGoToPagePopUp=function(){this.goToPageInput.value="",this.DisableApplyButton()},s.prototype.EnableApplyButton=function(){document.getElementsByClassName("e-pv-gotopage-apply-btn")[0].removeAttribute("disabled")},s.prototype.DisableApplyButton=function(){document.getElementsByClassName("e-pv-gotopage-apply-btn")[0].setAttribute("disabled",!0)},s.prototype.GoToPageCancelClick=function(){this.goToPagePopup.hide()},s.prototype.GoToPageApplyClick=function(){this.goToPagePopup.hide(),this.pdfViewer.navigation.goToPage(this.goToPageInput.value),this.updateMobileScrollerPosition()},s.prototype.updateMobileScrollerPosition=function(){a.AR.isDevice&&!this.pdfViewer.enableDesktopMode&&this.mobileScrollerContainer&&(this.mobileScrollerContainer.style.top=(this.pdfViewer.toolbarModule?this.toolbarHeight:0)+this.viewerContainer.scrollTop/((this.viewerContainer.scrollHeight-this.viewerContainer.clientHeight)/(this.viewerContainer.clientHeight-56))+"px")},s.prototype.createPasswordPopup=function(){var e=this,t=(0,a.az)("div",{id:this.pdfViewer.element.id+"_password_popup",className:"e-pv-password-popup",attrs:{tabindex:"-1"}});this.promptElement=(0,a.az)("span",{id:this.pdfViewer.element.id+"_prompt",attrs:{tabindex:"-1"}}),this.promptElement.textContent=this.pdfViewer.localeObj.getConstant("Enter Password"),t.appendChild(this.promptElement);var i=(0,a.az)("span",{className:"e-input-group e-pv-password-input"});this.passwordInput=(0,a.az)("input",{id:this.pdfViewer.element.id+"_password_input",className:"e-input"}),this.passwordInput.type="password",this.passwordInput.name="Required",i.appendChild(this.passwordInput),t.appendChild(i),this.pageContainer.appendChild(t),this.passwordPopup=new j.Vq({showCloseIcon:!0,closeOnEscape:!1,isModal:!0,header:this.pdfViewer.localeObj.getConstant("Password Protected"),visible:!1,close:this.passwordCancel.bind(this),target:this.pdfViewer.element,beforeClose:function(){e.passwordPopup.destroy(),e.getElement("_password_popup").remove(),e.passwordPopup=null;var n=e.getElement("_loadingIndicator");null!=n&&Nt(n)}}),this.passwordPopup.buttons=!a.AR.isDevice||this.pdfViewer.enableDesktopMode?[{buttonModel:{content:this.pdfViewer.localeObj.getConstant("OK"),isPrimary:!0},click:this.applyPassword.bind(this)},{buttonModel:{content:this.pdfViewer.localeObj.getConstant("Cancel")},click:this.passwordCancelClick.bind(this)}]:[{buttonModel:{content:this.pdfViewer.localeObj.getConstant("Cancel")},click:this.passwordCancelClick.bind(this)},{buttonModel:{content:this.pdfViewer.localeObj.getConstant("OK"),isPrimary:!0},click:this.applyPassword.bind(this)}],this.pdfViewer.enableRtl&&(this.passwordPopup.enableRtl=!0),this.passwordPopup.appendTo(t),this.passwordInput.addEventListener("keyup",function(){""===e.passwordInput.value&&e.passwordDialogReset()}),this.passwordInput.addEventListener("focus",function(){e.passwordInput.parentElement.classList.add("e-input-focus")}),this.passwordInput.addEventListener("blur",function(){e.passwordInput.parentElement.classList.remove("e-input-focus")})},s.prototype.passwordCancel=function(e){e.isInteraction&&(this.clear(!1),this.passwordDialogReset(),this.passwordInput.value="");var t=this.getElement("_loadingIndicator");null!==t&&Nt(t)},s.prototype.passwordCancelClick=function(){this.clear(!1),this.passwordDialogReset(),this.passwordPopup.hide();var e=this.getElement("_loadingIndicator");null!==e&&Nt(e)},s.prototype.passwordDialogReset=function(){(0,a.xr)()||this.promptElement&&(this.promptElement.classList.remove("e-pv-password-error"),this.promptElement.textContent=this.pdfViewer.localeObj.getConstant("Enter Password"),this.passwordInput.value="")},s.prototype.applyPassword=function(){if(!(0,a.xr)()){var e=this.passwordInput.value;""!==e&&this.pdfViewer.load(this.document,e)}this.focusViewerContainer()},s.prototype.createFileInputElement=function(){(a.AR.isDevice||!this.pdfViewer.enableDesktopMode)&&(this.pdfViewer.enableAnnotationToolbar&&this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.annotationToolbarModule&&this.pdfViewer.toolbarModule.annotationToolbarModule.createCustomStampElement(),this.signatureModule&&this.signatureModule.createSignatureFileElement())},s.prototype.wireEvents=function(){var e=this;this.viewerContainer.addEventListener("scroll",this.viewerContainerOnScroll,!0),a.AR.isDevice&&!this.pdfViewer.enableDesktopMode&&this.viewerContainer.addEventListener("touchmove",this.viewerContainerOnScroll,!0),this.viewerContainer.addEventListener("mousedown",this.viewerContainerOnMousedown),this.viewerContainer.addEventListener("mouseup",this.viewerContainerOnMouseup),this.viewerContainer.addEventListener("wheel",this.viewerContainerOnMouseWheel),this.viewerContainer.addEventListener("mousemove",this.viewerContainerOnMousemove),this.viewerContainer.addEventListener("mouseleave",this.viewerContainerOnMouseLeave),this.viewerContainer.addEventListener("mouseenter",this.viewerContainerOnMouseEnter),this.viewerContainer.addEventListener("mouseover",this.viewerContainerOnMouseOver),this.viewerContainer.addEventListener("click",this.viewerContainerOnClick),this.viewerContainer.addEventListener("dblclick",this.viewerContainerOnClick),this.viewerContainer.addEventListener("dragstart",this.viewerContainerOnDragStart),this.pdfViewer.element.addEventListener("keydown",this.viewerContainerOnKeyDown),window.addEventListener("keydown",this.onWindowKeyDown),window.addEventListener("mouseup",this.onWindowMouseUp),window.addEventListener("touchend",this.onWindowTouchEnd),this.unload=function(){return e.unloadDocument(e)},window.addEventListener("unload",this.unload),window.addEventListener("beforeunload",this.clearSessionStorage),window.addEventListener("resize",this.onWindowResize),-1!==navigator.userAgent.indexOf("MSIE")||-1!==navigator.userAgent.indexOf("Edge")||-1!==navigator.userAgent.indexOf("Trident")?(this.viewerContainer.addEventListener("pointerdown",this.viewerContainerOnPointerDown),this.viewerContainer.addEventListener("pointermove",this.viewerContainerOnPointerMove),this.viewerContainer.addEventListener("pointerup",this.viewerContainerOnPointerEnd),this.viewerContainer.addEventListener("pointerleave",this.viewerContainerOnPointerEnd)):(this.viewerContainer.addEventListener("touchstart",this.viewerContainerOnTouchStart),this.viewerContainer.addEventListener("touchmove",this.viewerContainerOnTouchMove),this.viewerContainer.addEventListener("touchend",this.viewerContainerOnTouchEnd),this.viewerContainer.addEventListener("touchleave",this.viewerContainerOnTouchEnd),this.viewerContainer.addEventListener("touchcancel",this.viewerContainerOnTouchEnd))},s.prototype.unWireEvents=function(){this.viewerContainer.removeEventListener("scroll",this.viewerContainerOnScroll,!0),a.AR.isDevice&&!this.pdfViewer.enableDesktopMode&&this.viewerContainer.removeEventListener("touchmove",this.viewerContainerOnScroll,!0),this.viewerContainer.removeEventListener("mousedown",this.viewerContainerOnMousedown),this.viewerContainer.removeEventListener("mouseup",this.viewerContainerOnMouseup),this.viewerContainer.removeEventListener("wheel",this.viewerContainerOnMouseWheel),this.viewerContainer.removeEventListener("mousemove",this.viewerContainerOnMousemove),this.viewerContainer.removeEventListener("mouseleave",this.viewerContainerOnMouseLeave),this.viewerContainer.removeEventListener("mouseenter",this.viewerContainerOnMouseEnter),this.viewerContainer.removeEventListener("mouseover",this.viewerContainerOnMouseOver),this.viewerContainer.removeEventListener("click",this.viewerContainerOnClick),this.viewerContainer.removeEventListener("dragstart",this.viewerContainerOnDragStart),this.viewerContainer.removeEventListener("contextmenu",this.viewerContainerOnContextMenuClick),this.pdfViewer.element.removeEventListener("keydown",this.viewerContainerOnKeyDown),window.addEventListener("keydown",this.onWindowKeyDown),window.removeEventListener("mouseup",this.onWindowMouseUp),window.removeEventListener("unload",this.unload),window.removeEventListener("resize",this.onWindowResize),-1!==navigator.userAgent.indexOf("MSIE")||-1!==navigator.userAgent.indexOf("Edge")||-1!==navigator.userAgent.indexOf("Trident")?(this.viewerContainer.removeEventListener("pointerdown",this.viewerContainerOnPointerDown),this.viewerContainer.removeEventListener("pointermove",this.viewerContainerOnPointerMove),this.viewerContainer.removeEventListener("pointerup",this.viewerContainerOnPointerEnd),this.viewerContainer.removeEventListener("pointerleave",this.viewerContainerOnPointerEnd)):(this.viewerContainer.removeEventListener("touchstart",this.viewerContainerOnTouchStart),this.viewerContainer.removeEventListener("touchmove",this.viewerContainerOnTouchMove),this.viewerContainer.removeEventListener("touchend",this.viewerContainerOnTouchEnd),this.viewerContainer.removeEventListener("touchleave",this.viewerContainerOnTouchEnd),this.viewerContainer.removeEventListener("touchcancel",this.viewerContainerOnTouchEnd))},s.prototype.updateZoomValue=function(){this.pdfViewer.magnificationModule&&(this.pdfViewer.magnificationModule.isAutoZoom?this.pdfViewer.magnificationModule.fitToAuto():"FitToWidth"!==this.pdfViewer.zoomMode&&"fitToWidth"===this.pdfViewer.magnificationModule.fitType?this.pdfViewer.magnificationModule.fitToWidth():"fitToPage"===this.pdfViewer.magnificationModule.fitType&&this.pdfViewer.magnificationModule.fitToPage());for(var e=0;e<this.pageCount;e++)this.applyLeftPosition(e)},s.prototype.updateFreeTextProperties=function(e){this.pdfViewer.enableShapeLabel&&(this.pdfViewer.shapeLabelSettings.fillColor&&(e.labelFillColor=this.pdfViewer.shapeLabelSettings.fillColor),this.pdfViewer.shapeLabelSettings.fontColor&&(e.fontColor=this.pdfViewer.shapeLabelSettings.fontColor),this.pdfViewer.shapeLabelSettings.fontSize&&(e.fontSize=this.pdfViewer.shapeLabelSettings.fontSize),this.pdfViewer.shapeLabelSettings.fontFamily&&(e.fontFamily=this.pdfViewer.shapeLabelSettings.fontFamily),this.pdfViewer.shapeLabelSettings.opacity&&(e.labelOpacity=this.pdfViewer.shapeLabelSettings.opacity),this.pdfViewer.shapeLabelSettings.labelContent&&(e.labelContent=this.pdfViewer.shapeLabelSettings.labelContent))},s.prototype.mouseDownHandler=function(e){var i,t=!1,n=[],o=[];if(e&&e.target&&(this.mouseDownEvent=e,this.contextMenuModule.currentTarget=e.target),this.pdfViewer.annotationModule&&(t=this.pdfViewer.annotationModule.isEnableDelete()),t||o.push("DeleteContext"),"None"===this.pdfViewer.contextMenuOption)i=!0;else if(this.pdfViewer.textSelectionModule||this.isShapeBasedAnnotationsEnabled()){if(e){var r=this.isClickWithinSelectionBounds(e);this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.freeTextAnnotationModule&&this.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus?(this.isFreeTextContextMenu=!0,this.pdfViewer.annotation.freeTextAnnotationModule&&!this.pdfViewer.annotation.freeTextAnnotationModule.isTextSelected&&(o.push("Cut"),o.push("Copy")),this.pdfViewer.annotation.freeTextAnnotationModule&&""===this.pdfViewer.annotation.freeTextAnnotationModule.selectedText&&o.push("Paste"),n.push("HighlightContext"),n.push("UnderlineContext"),n.push("StrikethroughContext"),n.push("ScaleRatio"),n.push("Properties"),n.push("Comment"),n.push("DeleteContext")):r&&this.pdfViewer.textSelectionModule?(!e.target.classList.contains("e-pv-maintaincontent")&&e.target.classList.contains("e-pv-text")||e.target.classList.contains("e-pv-text-layer")?this.checkIsNormalText()&&(i=!0):(a.AR.isIE||"edge"===a.AR.info.name)&&e.target.classList.contains("e-pv-page-container")&&(i=!0),n.push("Cut"),n.push("Paste"),n.push("DeleteContext"),n.push("ScaleRatio"),n.push("Comment"),n.push("Properties")):0===this.pdfViewer.selectedItems.annotations.length||"HandWrittenSignature"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&"SignatureText"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&"SignatureImage"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType?0!==this.pdfViewer.selectedItems.annotations.length&&"Path"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType?this.shapeMenuItems(n,o,!0):this.pdfViewer.annotation&&this.pdfViewer.annotation.isShapeCopied&&(e.target.classList.contains("e-pv-text-layer")||e.target.classList.contains("e-pv-text"))&&!this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation?(n.push("Properties"),this.shapeMenuItems(n,o,!1)):this.isCalibrateAnnotationModule()&&this.pdfViewer.annotationModule.measureAnnotationModule.currentAnnotationMode?(n.push("HighlightContext"),n.push("UnderlineContext"),n.push("StrikethroughContext"),n.push("Properties"),o.push("Cut"),o.push("Copy"),o.push("Paste"),o.push("DeleteContext"),o.push("Comment")):this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation?(n.push("HighlightContext"),n.push("UnderlineContext"),n.push("StrikethroughContext"),n.push("Properties"),n.push("Cut"),n.push("Copy"),n.push("Paste"),n.push("ScaleRatio")):i=!0:this.shapeMenuItems(n,o,!1,!0)}else this.pdfViewer.textSelectionModule&&"MouseUp"===this.pdfViewer.contextMenuOption?(n.push("Cut"),n.push("Paste"),n.push("DeleteContext"),n.push("ScaleRatio"),n.push("Comment"),n.push("Properties")):0===this.pdfViewer.selectedItems.annotations.length&&(n.push("Cut"),n.push("Paste"),n.push("DeleteContext"),n.push("ScaleRatio"),n.push("Properties"));this.pdfViewer.enableCommentPanel||o.push("Comment")}else i=!0;this.pdfViewer._dotnetInstance.invokeMethodAsync("MouseDownHandler",{hidenItems:n,disabledItems:o,isCancel:i})},s.prototype.OnItemSelected=function(e){var t=this.contextMenuModule.currentTarget;switch(e){case this.pdfViewer.localeObj.getConstant("Copy"):this.CopyItemSelected();break;case this.pdfViewer.localeObj.getConstant("Highlight context"):this.TextMarkUpSelected("Highlight");break;case this.pdfViewer.localeObj.getConstant("Underline context"):this.TextMarkUpSelected("Underline");break;case this.pdfViewer.localeObj.getConstant("Strikethrough context"):this.TextMarkUpSelected("Strikethrough");break;case this.pdfViewer.localeObj.getConstant("Properties"):this.PropertiesItemSelected();break;case this.pdfViewer.localeObj.getConstant("Cut"):this.CutItemSelected(t);break;case this.pdfViewer.localeObj.getConstant("Paste"):this.pasteItemSelected(t);break;case this.pdfViewer.localeObj.getConstant("Delete Context"):this.DeleteItemSelected();break;case this.pdfViewer.localeObj.getConstant("Scale Ratio"):this.ScaleRatioSelected();break;case this.pdfViewer.localeObj.getConstant("Comment"):this.CommentItemSelected()}},s.prototype.CommentItemSelected=function(){if(this.pdfViewer.annotation&&(this.pdfViewer.annotation.showCommentsPanel(),0!==this.pdfViewer.selectedItems.annotations.length||this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation)){var e;e=this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation?this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation:this.pdfViewer.selectedItems.annotations[0];var t=document.getElementById(this.pdfViewer.element.id+"_accordionContainer"+this.pdfViewer.currentPageNumber);t&&t.ej2_instances[0].expandItem(!0);var i=document.getElementById(e.annotName);i&&(i.classList.contains("e-pv-comments-border")||i.firstChild.click())}},s.prototype.ScaleRatioSelected=function(){this.isCalibrateAnnotationModule()&&this.pdfViewer.annotation.measureAnnotationModule.createScaleRatioWindow()},s.prototype.DeleteItemSelected=function(){this.pdfViewer.formDesignerModule&&0!==this.pdfViewer.selectedItems.formFields.length?this.pdfViewer.formDesignerModule.deleteFormField(this.pdfViewer.selectedItems.formFields[0].id):this.pdfViewer.annotation&&this.pdfViewer.annotation.deleteAnnotation()},s.prototype.pasteItemSelected=function(e){this.isFreeTextContextMenu||this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus&&e&&"free-text-input"===e.className&&"TEXTAREA"===e.tagName?(this.pdfViewer.annotation.freeTextAnnotationModule.pasteSelectedText(e),this.contextMenuModule.close()):(this.pdfViewer.paste(),this.contextMenuModule.previousAction="Paste")},s.prototype.CutItemSelected=function(e){this.isFreeTextContextMenu||this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus&&e&&"free-text-input"===e.className&&"TEXTAREA"===e.tagName?(this.pdfViewer.annotation.freeTextAnnotationModule.cutSelectedText(e),this.contextMenuModule.close()):(1===this.pdfViewer.selectedItems.annotations.length||1===this.pdfViewer.selectedItems.formFields.length)&&(this.pdfViewer.cut(),this.contextMenuModule.previousAction="Cut")},s.prototype.CopyItemSelected=function(){var e=!1;this.isFreeTextContextMenu||this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus?(this.pdfViewer.annotation.freeTextAnnotationModule.copySelectedText(),this.contextMenuModule.close(),e=!0):this.pdfViewer.textSelectionModule&&(this.pdfViewer.textSelectionModule.copyText(),this.contextMenuModule.close()),(this.pdfViewer.selectedItems.annotations.length&&!e||this.pdfViewer.selectedItems.formFields.length>0)&&(this.pdfViewer.copy(),this.contextMenuModule.previousAction="Copy")},s.prototype.PropertiesItemSelected=function(){0===this.pdfViewer.selectedItems.annotations.length||"Line"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&"LineWidthArrowHead"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&"Distance"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType?0!==this.pdfViewer.selectedItems.formFields.length&&this.pdfViewer.selectedItems.formFields[0].formFieldAnnotationType&&this.pdfViewer.formDesigner.createPropertiesWindow():this.pdfViewer.annotation.createPropertiesWindow()},s.prototype.TextMarkUpSelected=function(e){this.pdfViewer.annotation&&this.pdfViewer.annotation.textMarkupAnnotationModule&&(this.pdfViewer.annotation.textMarkupAnnotationModule.isSelectionMaintained=!1,this.pdfViewer.annotation.textMarkupAnnotationModule.drawTextMarkupAnnotations(e),this.pdfViewer.annotation.textMarkupAnnotationModule.isTextMarkupAnnotationMode=!1,this.pdfViewer.annotation.textMarkupAnnotationModule.currentTextMarkupAddMode="",this.pdfViewer.annotation.textMarkupAnnotationModule.isSelectionMaintained=!0)},s.prototype.shapeMenuItems=function(e,t,i,n){this.pdfViewer.annotation&&!this.pdfViewer.annotation.isShapeCopied&&t.push("Paste"),e.push("HighlightContext"),e.push("UnderlineContext"),e.push("StrikethroughContext"),e.push("ScaleRatio"),i?"Line"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType||"LineWidthArrowHead"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType||"Distance"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType||e.push("Properties"):n?(e.push("Properties"),e.push("Comment")):(e.push("Cut"),e.push("Copy"),e.push("DeleteContext"),e.push("Comment"))},s.prototype.checkIsRtlText=function(e){return new RegExp("^[^A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02B8\\u0300-\\u0590\\u0800-\\u1FFF\\u2C00-\\uFB1C\\uFDFE-\\uFE6F\\uFEFD-\\uFFFF]*[\\u0591-\\u07FF\\uFB1D-\\uFDFD\\uFE70-\\uFEFC]").test(e)},s.prototype.isClickWithinSelectionBounds=function(e){var t,i=!1,r=this.currentPageNumber-5>this.pageCount?this.pageCount:this.currentPageNumber+5;if(this.pdfViewer.textSelectionModule){for(var l=this.currentPageNumber-5<0?0:this.currentPageNumber-5;l<r;l++)if(l>=0&&(t=this.pdfViewer.textSelectionModule.getCurrentSelectionBounds(l))){var d=t;if(this.getHorizontalValue(d.left,l)<e.clientX&&this.getHorizontalValue(d.right,l)>e.clientX&&this.getVerticalValue(d.top,l)<e.clientY&&this.getVerticalValue(d.bottom,l)>e.clientY){i=!0;break}}(a.AR.isIE||"edge"===a.AR.info.name)&&t&&(i=!0)}return i},s.prototype.getHorizontalClientValue=function(e){return e-this.getElement("_pageDiv_"+(this.currentPageNumber-1)).getBoundingClientRect().left},s.prototype.getVerticalClientValue=function(e){return e-this.getElement("_pageDiv_"+(this.currentPageNumber-1)).getBoundingClientRect().top},s.prototype.getHorizontalValue=function(e,t){var n=this.getElement("_pageDiv_"+(t||this.currentPageNumber-1)).getBoundingClientRect();return e*this.getZoomFactor()+n.left},s.prototype.getVerticalValue=function(e,t){var n=this.getElement("_pageDiv_"+(t||this.currentPageNumber-1)).getBoundingClientRect();return e*this.getZoomFactor()+n.top},s.prototype.checkIsNormalText=function(){var e=!0,t="",i=this.pdfViewer.textSelectionModule;return i&&i.selectionRangeArray&&1===i.selectionRangeArray.length?t=i.selectionRangeArray[0].textContent:window.getSelection()&&window.getSelection().anchorNode&&(t=window.getSelection().toString()),""!==t&&this.checkIsRtlText(t)&&(e=!1),e},s.prototype.DeleteKeyPressed=function(e){var t,i=document.getElementById(this.pdfViewer.element.id+"_search_box");if(i&&(t="none"!==i.style.display),this.pdfViewer.formDesignerModule&&!this.pdfViewer.formDesigner.isPropertyDialogOpen&&this.pdfViewer.designerMode&&0!==this.pdfViewer.selectedItems.formFields.length&&!t)this.pdfViewer.formDesignerModule.deleteFormField(this.pdfViewer.selectedItems.formFields[0].id);else if(this.pdfViewer.annotation&&!this.pdfViewer.designerMode&&(this.isTextMarkupAnnotationModule()&&!this.getPopupNoteVisibleStatus()&&!t&&this.pdfViewer.annotationModule.deleteAnnotation(),this.pdfViewer.selectedItems.annotations.length>0)){var n=this.pdfViewer.selectedItems.annotations[0],o=!0,r=n.shapeAnnotationType;if("Path"===r||"SignatureField"===n.formFieldAnnotationType||"InitialField"===n.formFieldAnnotationType||"HandWrittenSignature"===r||"SignatureText"===r||"SignatureImage"===r){var l=document.getElementById(n.id);l&&l.disabled&&(o=!0)}o||(n.annotationSettings&&n.annotationSettings.isLock?this.pdfViewer.annotationModule.checkAllowedInteractions("Delete",n)&&(this.pdfViewer.remove(n),this.pdfViewer.renderSelector(this.pdfViewer.annotation.getEventPageNumber(e))):(this.pdfViewer.remove(n),this.pdfViewer.renderSelector(this.pdfViewer.annotation.getEventPageNumber(e))))}},s.prototype.initiatePanning=function(){this.isPanMode=!0,this.textLayer.modifyTextCursor(!1),this.disableTextSelectionMode(),this.pdfViewer.toolbar&&this.pdfViewer.toolbar.annotationToolbarModule&&this.pdfViewer.toolbar.annotationToolbarModule.deselectAllItems()},s.prototype.initiateTextSelectMode=function(){this.isPanMode=!1,this.viewerContainer&&(this.viewerContainer.style.cursor="auto",this.pdfViewer.textSelectionModule&&(this.textLayer.modifyTextCursor(!0),this.pdfViewer.textSelectionModule.enableTextSelectionMode()),(!a.AR.isDevice||this.pdfViewer.enableDesktopMode)&&!(0,a.xr)()&&this.enableAnnotationAddTools(!0))},s.prototype.initiateTextSelection=function(){this.pdfViewer.toolbar&&!this.pdfViewer.toolbar.isSelectionToolDisabled&&(this.initiateTextSelectMode(),this.pdfViewer.toolbar.updateInteractionTools(!0))},s.prototype.enableAnnotationAddTools=function(e){this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.annotationToolbarModule&&this.pdfViewer.toolbarModule.annotationToolbarModule.enableAnnotationAddTools(e)},s.prototype.applySelection=function(){null!==window.getSelection().anchorNode&&this.pdfViewer.textSelectionModule.applySpanForSelection(),this.isViewerContainerDoubleClick=!1},s.prototype.isDesignerMode=function(e){var t=!1;return(0!==this.pdfViewer.selectedItems.annotations.length&&("HandWrittenSignature"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType||"SignatureText"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType||"SignatureImage"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType)||0!==this.pdfViewer.selectedItems.annotations.length&&"Path"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType||0!==this.pdfViewer.selectedItems.formFields.length&&this.pdfViewer.selectedItems.formFields[0].formFieldAnnotationType&&this.pdfViewer.designerMode||this.pdfViewer.annotation&&this.pdfViewer.annotation.isShapeCopied&&(e.classList.contains("e-pv-text-layer")||e.classList.contains("e-pv-text"))&&!this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation||this.pdfViewer.formDesigner&&this.pdfViewer.formDesigner.isShapeCopied&&(e.classList.contains("e-pv-text-layer")||e.classList.contains("e-pv-text")))&&(t=!0),this.designerModetarget=e,t},s.prototype.handleTaps=function(e,t){var i=this;if(this.isDeviceiOS){var n=ft(t,this,this.pdfViewer),o=!this.pdfViewer.annotation.freeTextAnnotationModule.isNewFreeTextAnnot&&(!n||!this.pdfViewer.selectedItems.annotations[0]||n.id!==this.pdfViewer.selectedItems.annotations[0].id)&&document.activeElement.classList.contains("free-text-input")&&this.isFreeTextAnnotation(this.pdfViewer.selectedItems.annotations);this.singleTapTimer?this.pdfViewer.enablePinchZoom&&(this.tapCount++,clearTimeout(this.singleTapTimer),this.singleTapTimer=null,this.onDoubleTap(e)):(this.singleTapTimer=setTimeout(function(){o&&(i.pdfViewer.clearSelection(i.pdfViewer.selectedItems.annotations[0].pageIndex),i.focusViewerContainer(!0)),i.onSingleTap(e)},300),this.tapCount++)}else this.singleTapTimer?this.pdfViewer.enablePinchZoom&&(this.tapCount++,clearTimeout(this.singleTapTimer),this.singleTapTimer=null,this.onDoubleTap(e)):(this.singleTapTimer=setTimeout(function(){i.onSingleTap(e)},300),this.tapCount++)},s.prototype.handleTextBoxTaps=function(e){var t=this;setTimeout(function(){t.inputTapCount=0},300),this.inputTapCount++,this.isDeviceiOS?this.onTextBoxDoubleTap(e):setTimeout(function(){t.onTextBoxDoubleTap(e)},200),this.inputTapCount>2&&(this.inputTapCount=0)},s.prototype.onTextBoxDoubleTap=function(e){if(2===this.inputTapCount&&0!==this.pdfViewer.selectedItems.annotations.length){if(this.pdfViewer.annotationModule){var i=this.pdfViewer.selectedItems.annotations[0];this.isDeviceiOS&&document.activeElement.classList.contains("free-text-input")&&this.isFreeTextAnnotation(this.pdfViewer.selectedItems.annotations)&&this.focusViewerContainer(!0),this.pdfViewer.annotationModule.annotationSelect(i.annotName,i.pageIndex,i,null,!0)}if(!0===this.isFreeTextAnnotation(this.pdfViewer.selectedItems.annotations))(n={}).x=this.pdfViewer.selectedItems.annotations[0].bounds.x,n.y=this.pdfViewer.selectedItems.annotations[0].bounds.y,this.pdfViewer.annotation.freeTextAnnotationModule.addInuptElemet(n,this.pdfViewer.selectedItems.annotations[0]);else if(this.pdfViewer.selectedItems.annotations[0]&&!0===this.pdfViewer.selectedItems.annotations[0].enableShapeLabel){var n;(n={}).x=this.pdfViewer.selectedItems.annotations[0].bounds.x,n.y=this.pdfViewer.selectedItems.annotations[0].bounds.y,this.pdfViewer.annotation.inputElementModule.editLabel(n,this.pdfViewer.selectedItems.annotations[0])}}},s.prototype.onSingleTap=function(e){var t=e[0].target,i=!1;if(this.singleTapTimer=null,t&&(t.classList.contains("e-pdfviewer-formFields")||t.classList.contains("e-pdfviewer-ListBox")||t.classList.contains("e-pdfviewer-signatureformfields"))&&(i=!0),!this.isLongTouchPropagated&&!this.navigationPane.isNavigationToolbarVisible&&!i&&this.pdfViewer.toolbarModule){if(this.touchClientX>=e[0].clientX-10&&this.touchClientX<=e[0].clientX+10&&this.touchClientY>=e[0].clientY-10&&this.touchClientY<=e[0].clientY+10){if(this.isTapHidden)(0,a.xr)()&&(this.viewerContainer.scrollTop+=this.pdfViewer.element.querySelector(".e-pv-mobile-toolbar").clientHeight*this.getZoomFactor());else if((0,a.xr)()&&(this.viewerContainer.scrollTop-=this.pdfViewer.element.querySelector(".e-pv-mobile-toolbar").clientHeight*this.getZoomFactor()),this.pdfViewer.toolbar.moreDropDown){var n=this.getElement("_more_option-popup");n.firstElementChild&&(n.classList.remove("e-popup-open"),n.classList.add("e-popup-close"),n.removeChild(n.firstElementChild))}this.isTapHidden&&a.AR.isDevice&&!this.pdfViewer.enableDesktopMode?(this.mobileScrollerContainer.style.display="",this.updateMobileScrollerPosition()):a.AR.isDevice&&!this.pdfViewer.enableDesktopMode&&null==this.getSelectTextMarkupCurrentPage()&&(this.mobileScrollerContainer.style.display="none"),null==this.getSelectTextMarkupCurrentPage()&&((0,a.xr)()?this.blazorUIAdaptor.tapOnMobileDevice(this.isTapHidden):this.pdfViewer.enableToolbar&&this.pdfViewer.toolbarModule.showToolbar(!0),this.isTapHidden=!this.isTapHidden)}this.tapCount=0}},s.prototype.onDoubleTap=function(e){var t=e[0].target,i=!1;t&&(t.classList.contains("e-pdfviewer-formFields")||t.classList.contains("e-pdfviewer-ListBox")||t.classList.contains("e-pdfviewer-signatureformfields"))&&(i=!0),2===this.tapCount&&!i&&(this.tapCount=0,this.touchClientX>=parseInt((e[0].clientX-10).toString())&&this.touchClientX<=e[0].clientX+10&&this.touchClientY>=e[0].clientY-10&&this.touchClientY<=e[0].clientY+30&&(this.pdfViewer.magnification&&1!==this.pdfViewer.selectedItems.annotations.length&&this.pdfViewer.magnification.onDoubleTapMagnification(),this.viewerContainer.style.height=this.updatePageHeight(this.pdfViewer.element.getBoundingClientRect().height,this.toolbarHeight),this.isTapHidden=!1,clearTimeout(this.singleTapTimer)))},s.prototype.preventTouchEvent=function(e){this.pdfViewer.textSelectionModule&&!this.isPanMode&&this.pdfViewer.enableTextSelection&&!this.isTextSelectionDisabled&&null==this.getSelectTextMarkupCurrentPage()&&(this.isWebkitMobile&&a.AR.isDevice&&!this.pdfViewer.enableDesktopMode||(e.preventDefault(),e.stopPropagation()))},s.prototype.renderStampAnnotation=function(e){if(this.pdfViewer.annotation){var t=this.getZoomFactor(),i=this.pdfViewer.annotation.getEventPageNumber(e),n=this.getElement("_pageDiv_"+i);if(this.pdfViewer.enableStampAnnotations){var o=this.pdfViewer.annotationModule.stampAnnotationModule;if(o&&o.isStampAnnotSelected&&n){var r=n.getBoundingClientRect();if("touchend"===e.type&&"Image"===this.pdfViewer.annotationModule.stampAnnotationModule.currentStampAnnotation.shapeAnnotationType){var l=this.pdfViewer.annotationModule.stampAnnotationModule.currentStampAnnotation;l.pageIndex=i,l.bounds.x=(e.changedTouches[0].clientX-r.left)/t,l.bounds.y=(e.changedTouches[0].clientY-r.top)/t,o.updateDeleteItems(i,l,l.opacity),this.pdfViewer.add(l);var d=document.getElementById(this.pdfViewer.element.id+"_annotationCanvas_"+i);this.pdfViewer.renderDrawing(d,i)}else o.renderStamp((e.changedTouches[0].clientX-r.left)/t,(e.changedTouches[0].clientY-r.top)/t,null,null,i,null,null,null,null);o.isStampAnnotSelected=!1}this.pdfViewer.annotation.onAnnotationMouseDown()}this.pdfViewer.enableHandwrittenSignature&&this.isSignatureAdded&&n&&(r=n.getBoundingClientRect(),this.currentSignatureAnnot.pageIndex=i,this.signatureModule.renderSignature((e.changedTouches[0].clientX-r.left)/t,(e.changedTouches[0].clientY-r.top)/t),this.isSignatureAdded=!1),1===e.touches.length&&this.isTextMarkupAnnotationModule()&&!this.getPopupNoteVisibleStatus()&&this.pdfViewer.annotationModule.textMarkupAnnotationModule.onTextMarkupAnnotationTouchEnd(e)}},s.prototype.initPageDiv=function(e){if((0,a.xr)()||this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.updateTotalPage(),a.AR.isDevice&&!this.pdfViewer.enableDesktopMode&&this.mobiletotalPageContainer&&(this.mobiletotalPageContainer.innerHTML=this.pageCount.toString(),this.pageNoContainer.innerHTML="(1-"+this.pageCount.toString()+")"),this.pageCount>0){var t=0,i=0;this.isMixedSizeDocument=!1,this.pageCount>100?this.pageLimit=i=100:i=this.pageCount;for(var n=!1,o=!1,r=!1,l=0;l<i;l++){if("object"!=typeof e.pageSizes[l]){var d=e.pageSizes[l].split(",");if(null!==e.pageSizes[l-1]&&0!==l){var h=e.pageSizes[l-1].split(",");t=this.pageGap+parseFloat(h[1])+t}else t=this.pageGap;var p={width:parseFloat(d[0]),height:parseFloat(d[1]),top:t};this.pageSize.push(p)}else null!==e.pageSizes[l-1]&&0!==l?(h=e.pageSizes[l-1],t=this.pageGap+parseFloat(h.Height)+t):t=this.pageGap,this.pageSize.push(p={width:e.pageSizes[l].Width,height:e.pageSizes[l].Height,top:t});this.pageSize[l].height>this.pageSize[l].width&&(n=!0),this.pageSize[l].width>this.pageSize[l].height&&(o=!0),l>0&&this.pageSize[l].width!==this.pageSize[l-1].width&&(r=!0);var f=this.pageSize[l].width;f>this.highestWidth&&(this.highestWidth=f);var c=this.pageSize[l].height;c>this.highestHeight&&(this.highestHeight=c)}(n&&o||r)&&(this.isMixedSizeDocument=!0);var u=this.pageCount<10?this.pageCount:10;for(l=0;l<u;l++)this.renderPageContainer(l,this.getPageWidth(l),this.getPageHeight(l),this.getPageTop(l));this.pageContainer.style.height=this.getPageTop(this.pageSize.length-1)+this.getPageHeight(this.pageSize.length-1)+"px",this.pageContainer.style.position="relative",100===this.pageLimit&&null===this.getElement("_pageDiv_"+this.pageLimit)&&this.pageLimit<this.pageCount&&Promise.all([this.renderPagesVirtually()])}},s.prototype.renderElementsVirtualScroll=function(e){var i=e+(this.pageStopValue<=200?4:2);i>this.pageCount&&(i=this.pageCount);for(var n=e-1;n<=i;n++)-1!==n&&this.renderPageElement(n);var o=e-3;for(o<0&&(o=0),n=e-1;n>=o;n--)-1!==n&&this.renderPageElement(n);for(var r=0;r<this.pageCount;r++)if(!(o<=r&&r<=i)){var p,l=this.getElement("_pageDiv_"+r),d=this.getElement("_pageCanvas_"+r),h=this.getElement("_textLayer_"+r);d&&(d.parentNode.removeChild(d),h&&(this.pdfViewer.textSelectionModule&&0!==h.childNodes.length&&!this.isTextSelectionDisabled&&this.pdfViewer.textSelectionModule.maintainSelectionOnScroll(r,!0),h.parentNode.removeChild(h)),-1!==(p=this.renderedPagesList.indexOf(r))&&this.renderedPagesList.splice(p,1)),l&&(l.parentNode.removeChild(l),-1!==(p=this.renderedPagesList.indexOf(r))&&this.renderedPagesList.splice(p,1))}(0,a.xr)()&&this.pdfViewer._dotnetInstance.invokeMethodAsync("UpdateCurrentPageNumber",this.currentPageNumber)},s.prototype.renderPageElement=function(e){var t=this.getElement("_pageDiv_"+e);null==this.getElement("_pageCanvas_"+e)&&null==t&&e<this.pageSize.length&&this.renderPageContainer(e,this.getPageWidth(e),this.getPageHeight(e),this.getPageTop(e))},s.prototype.renderPagesVirtually=function(){return function(s,e,t,i){return new(t||(t=Promise))(function(n,o){function r(h){try{d(i.next(h))}catch(p){o(p)}}function l(h){try{d(i.throw(h))}catch(p){o(p)}}function d(h){h.done?n(h.value):new t(function(p){p(h.value)}).then(r,l)}d((i=i.apply(s,[])).next())})}(this,0,void 0,function(){var e,t=this;return function(s,e){var i,n,o,r,t={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(h){return function(p){return function(h){if(i)throw new TypeError("Generator is already executing.");for(;t;)try{if(i=1,n&&(o=2&h[0]?n.return:h[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,h[1])).done)return o;switch(n=0,o&&(h=[2&h[0],o.value]),h[0]){case 0:case 1:o=h;break;case 4:return t.label++,{value:h[1],done:!1};case 5:t.label++,n=h[1],h=[0];continue;case 7:h=t.ops.pop(),t.trys.pop();continue;default:if(!(o=(o=t.trys).length>0&&o[o.length-1])&&(6===h[0]||2===h[0])){t=0;continue}if(3===h[0]&&(!o||h[1]>o[0]&&h[1]<o[3])){t.label=h[1];break}if(6===h[0]&&t.label<o[1]){t.label=o[1],o=h;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(h);break}o[2]&&t.ops.pop(),t.trys.pop();continue}h=e.call(s,t)}catch(p){h=[6,p],n=0}finally{i=o=0}if(5&h[0])throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}([h,p])}}}(this,function(i){return e=this,setTimeout(function(){t.initiateRenderPagesVirtually(e)},500),[2]})})},s.prototype.initiateRenderPagesVirtually=function(e){var t={hashId:e.hashId,isCompletePageSizeNotReceived:!0,action:"VirtualLoad",elementId:e.pdfViewer.element.id,uniqueId:e.documentId,password:e.passwordData};e.jsonDocumentId&&(t.documentId=e.jsonDocumentId),this.virtualLoadRequestHandler=new Ue(this.pdfViewer),this.virtualLoadRequestHandler.url=e.pdfViewer.serviceUrl+"/"+e.pdfViewer.serverActionSettings.load,this.virtualLoadRequestHandler.responseType="json",this.virtualLoadRequestHandler.mode=!0,this.virtualLoadRequestHandler.send(t),this.virtualLoadRequestHandler.onSuccess=function(i){var n=i.data;if(n&&"object"!=typeof n)try{n=JSON.parse(n)}catch(u){e.onControlError(500,n,"VirtualLoad")}if(n){for(;"object"!=typeof n;)n=JSON.parse(n);if(e.documentId===n.uniqueId){e.pdfViewer.fireAjaxRequestSuccess("VirtualLoad",n);var o=n;if(e.pageSize[e.pageLimit-1]){for(var r=e.pageSize[e.pageLimit-1].top,l=e.pageLimit;l<e.pageCount;l++)if("object"!=typeof o.pageSizes[l]){var d=o.pageSizes[l].split(",");if(null!==e.pageSize[l-1]&&0!==l){var h=e.pageSize[l-1].height;r=e.pageGap+parseFloat(h)+r}var p={width:parseFloat(d[0]),height:parseFloat(d[1]),top:r};e.pageSize.push(p)}else null!==e.pageSize[l-1]&&0!==l&&(h=e.pageSize[l-1].height,r=e.pageGap+parseFloat(h)+r),p={width:parseFloat(o.pageSizes[l].Width),height:parseFloat(o.pageSizes[l].Height),top:r},e.pageSize.push(p);e.pageContainer.style.height=e.getPageTop(e.pageSize.length-1)+e.getPageHeight(e.pageSize.length-1)+"px";var f=window.sessionStorage.getItem(e.documentId+"_pagedata");if(e.pageCount>100){e.pdfViewer.fireDocumentLoad(f);var c=e.pdfViewer.linkAnnotationModule;c&&c.linkAnnotation&&c.linkAnnotation.length>0&&c.linkPage.length>0&&c.renderDocumentLink(c.linkAnnotation,c.linkPage,c.annotationY,e.currentPageNumber-1)}}}}},this.virtualLoadRequestHandler.onFailure=function(i){e.pdfViewer.fireAjaxRequestFailed(i.status,i.statusText)},this.virtualLoadRequestHandler.onError=function(i){e.openNotificationPopup(),e.pdfViewer.fireAjaxRequestFailed(i.status,i.statusText)}},s.prototype.tileRenderPage=function(e,t){var n,i=this;if(n=this,e&&this.pageSize[t]){var o=this.getPageWidth(t),r=this.getPageHeight(t),l=this.getElement("_pageCanvas_"+t),d=this.getElement("_pageDiv_"+t),h=e.tileX?e.tileX:0,p=e.tileY?e.tileY:0;d&&(d.style.width=o+"px",d.style.height=r+"px",d.style.background="#fff",d.style.top=this.getPageTop(t)+"px",this.pdfViewer.enableRtl?d.style.right=this.updateLeftPosition(t)+"px":d.style.left=this.updateLeftPosition(t)+"px"),l&&(l.style.background="#fff");var f=e.image,c=this.retrieveCurrentZoomFactor();if(this.isReRenderRequired){e.zoomFactor&&(c=e.zoomFactor),this.tilerequestLists.push(this.documentId+"_"+t+"_"+c+"_"+e.tileX+"_"+e.tileY);var m=e.transformationMatrix,g=e.width;if(f){var v=e.tileX?e.tileX:0,y=e.tileY?e.tileY:0,b=(0,a.le)(e.scaleFactor)?1.5:e.scaleFactor,C=document.getElementById(this.pdfViewer.element.id+"_tileimg_"+t+"_"+this.getZoomFactor()+"_"+v+"_"+y);C||((C=new Image).id=this.pdfViewer.element.id+"_tileimg_"+t+"_"+this.getZoomFactor()+"_"+v+"_"+y,d&&d.append(C)),C.src=f,C.onload=function(){if(n.showPageLoadingIndicator(t,!1),n.tileRenderCount=n.tileRenderCount+1,0===v&&0===y&&0===t&&i.isDocumentLoaded){n.renderPDFInformations(),n.isInitialLoaded=!0;var O=window.sessionStorage.getItem(n.documentId+"_pagedata");n.pageCount<=100&&n.pdfViewer.fireDocumentLoad(O),n.isDocumentLoaded=!1,n.pdfViewer.textSearch&&n.pdfViewer.isExtractText&&n.pdfViewer.textSearchModule.getPDFDocumentTexts()}if(n.tileRenderCount===n.tileRequestCount){n.isTextMarkupAnnotationModule()&&n.pdfViewer.annotationModule.textMarkupAnnotationModule.rerenderAnnotations(t),l&&(l.style.display="none",l.src="#");for(var H=document.querySelectorAll('img[id*="'+n.pdfViewer.element.id+'_oldCanvas"]'),$=0;$<H.length;$++)d.removeChild(H[$]);n.isTileImageRendered=!1,n.tileRenderCount=0,n.pdfViewer.magnificationModule&&n.pdfViewer.magnificationModule.rerenderCountIncrement(),n.isDrawnCompletely=!0}};var S=g*this.getZoomFactor()/c/b,x=m.Elements?m.Elements:m.Values,V=x[5]*this.getZoomFactor()/c/b,T=x[4]*this.getZoomFactor()/c/b;C.width=S,C.style.width=S+"px",C.style.top=V+"px",C.style.left=T+"px",C.style.position="absolute"}0===h&&0===p&&this.onPageRender(e,t,d)}else{for(var k=document.querySelectorAll('img[id*="'+n.pdfViewer.element.id+"_tileimg_"+t+'_"]'),A=0;A<k.length;A++){var M=k[A].id.split("_"),I=n.retrieveCurrentZoomFactor(),B=JSON.parse(n.getWindowSessionStorageTile(t,parseFloat(M[M.length-2]),parseFloat(M[M.length-1]),I));if(B&&B.zoomFactor&&(I=B.zoomFactor),parseFloat(M[M.length-4])===t){var N=k[A];N.nodeType==Node.ELEMENT_NODE&&(N.onload=function(){if(n.showPageLoadingIndicator(t,!1),n.tileRenderCount=n.tileRenderCount+1,0===D&&0===Z&&0===t&&i.isDocumentLoaded){i.renderPDFInformations(),i.isInitialLoaded=!0;var O=window.sessionStorage.getItem(n.documentId+"_pagedata");n.pageCount<=100&&n.pdfViewer.fireDocumentLoad(O),n.isDocumentLoaded=!1,n.pdfViewer.textSearch&&n.pdfViewer.isExtractText&&n.pdfViewer.textSearchModule.getPDFDocumentTexts()}if(n.tileRenderCount===n.tileRequestCount){l.style.display="none",l.src="#",n.isTextMarkupAnnotationModule()&&n.pdfViewer.annotationModule.textMarkupAnnotationModule.rerenderAnnotations(t);for(var H=document.querySelectorAll('img[id*="'+n.pdfViewer.element.id+'_oldCanvas"]'),$=0;$<H.length;$++)d.removeChild(H[$]);n.isTileImageRendered=!1,n.tileRenderCount=0,n.pdfViewer.magnificationModule&&n.pdfViewer.magnificationModule.rerenderCountIncrement(),n.isDrawnCompletely=!0}},B&&(N.src=B.image))}}var D=e.tileX?e.tileX:0,Z=e.tileY?e.tileY:0;0===D&&0===Z&&this.onPageRender(e,t,d)}}},s.prototype.renderTileCanvas=function(e,t,i,n,o,r){var l=this.getElement("_pageTileCanvas_"+i);return l||((l=(0,a.az)("canvas",{id:this.pdfViewer.element.id+"_pageTileCanvas_"+i,className:"e-pv-pageTile-canvas"})).style.width=e+"px",l.style.height=t+"px",l.style.display="none",l.style.backgroundColor="#fff",this.isMixedSizeDocument&&this.highestWidth>0&&(l.style.marginLeft="auto",l.style.marginRight="auto"),n.appendChild(l)),l},s.prototype.calculateImageWidth=function(e,t,i,n){var o=e/this.getZoomFactor()*t*i;return parseInt(n.toString())===parseInt(o.toString())&&(n=o),n*this.getZoomFactor()/t},s.prototype.renderPage=function(e,t){var i=this,n=this;if(e&&this.pageSize[t]){var o=this.getPageWidth(t),r=this.getPageHeight(t),l=this.getElement("_pageCanvas_"+t),d=this.getElement("_pageDiv_"+t);if(d&&(d.style.width=o+"px",d.style.height=r+"px",d.style.top=this.getPageTop(t)+"px",this.pdfViewer.enableRtl?d.style.right=this.updateLeftPosition(t)+"px":d.style.left=this.updateLeftPosition(t)+"px"),l){l.style.background="#fff",l.style.display="block",l.style.width=o+"px",l.style.height=r+"px",o<parseFloat(d.style.width)&&(d.style.boxShadow="none");var h=e.image;h&&(l.onload=function(){for(var p=document.querySelectorAll('img[id*="'+n.pdfViewer.element.id+"_tileimg_"+t+'_"]'),f=n.getElement("_pageDiv_"+t),c=0;c<p.length;c++){var u=p[c].id.split("_");parseFloat(u[u.length-3])!=n.getZoomFactor()&&f.removeChild(p[c])}var m=document.querySelectorAll('img[id*="'+n.pdfViewer.element.id+'_oldCanvas"]');for(c=0;c<m.length;c++)d.removeChild(m[c]);if(i.pdfViewer.magnificationModule&&i.pdfViewer.magnificationModule.rerenderCountIncrement(),i.showPageLoadingIndicator(t,!1),0===t&&i.isDocumentLoaded){i.renderPDFInformations(),i.isInitialLoaded=!0;var g=window.sessionStorage.getItem(i.documentId+"_pagedata");i.pageCount<=100&&i.pdfViewer.fireDocumentLoad(g),i.isDocumentLoaded=!1,i.pdfViewer.textSearch&&i.pdfViewer.isExtractText&&i.pdfViewer.textSearchModule.getPDFDocumentTexts()}i.pdfViewer.magnificationModule&&i.pdfViewer.magnificationModule.pushImageObjects(l)},l.src=h),this.onPageRender(e,t,d)}}},s.prototype.onPageRender=function(e,t,i){var n=i&&i.getElementsByTagName("a"),o=!1;if(n&&0!==n.length)for(var r=n.length-1;r>=0;r--)n[r].parentNode.removeChild(n[r]);if((this.pdfViewer.textSearchModule||this.pdfViewer.textSelectionModule||this.pdfViewer.annotationModule)&&this.renderTextContent(e,t),this.pdfViewer.formFieldsModule&&!this.pdfViewer.magnificationModule.isFormFieldPageZoomed&&this.pdfViewer.formFieldsModule.renderFormFields(t),this.pdfViewer.formDesignerModule&&!this.isDocumentLoaded&&this.pdfViewer.formDesignerModule.rerenderFormFields(t),this.pdfViewer.formFieldsModule&&!this.isDocumentLoaded&&!this.pdfViewer.formDesignerModule&&this.pdfViewer.formFieldsModule.renderFormFields(t),this.pdfViewer.formDesignerModule&&this.isDocumentLoaded&&this.pdfViewer.magnificationModule.isFormFieldPageZoomed&&(this.pdfViewer.formFieldsModule.renderFormFields(t),this.pdfViewer.magnificationModule.isFormFieldPageZoomed=!1),this.pdfViewer.enableHyperlink&&this.pdfViewer.linkAnnotationModule&&this.pdfViewer.linkAnnotationModule.renderHyperlinkContent(e,t),this.pdfViewer.textSelectionModule&&!this.isTextSelectionDisabled&&this.pdfViewer.textSelectionModule.applySelectionRangeOnScroll(t),this.documentAnnotationCollections){for(var l=!1,d=0;d<this.annotationRenderredList.length;d++)this.annotationRenderredList[d]===t&&(l=!0);var h;(h=this.documentAnnotationCollections[t])&&!l&&(e.shapeAnnotation=h.shapeAnnotation,e.measureShapeAnnotation=h.measureShapeAnnotation,e.textMarkupAnnotation=h.textMarkupAnnotation,e.freeTextAnnotation=h.freeTextAnnotation,e.stampAnnotations=h.stampAnnotations,e.stickyNotesAnnotation=h.stickyNotesAnnotation,e.signatureInkAnnotation=h.signatureInkAnnotation,this.annotationRenderredList.push(t))}if(this.isImportAction&&(h=this.checkDocumentCollectionData(t))&&(e.shapeAnnotation=h.shapeAnnotation,e.measureShapeAnnotation=h.measureShapeAnnotation,e.textMarkupAnnotation=h.textMarkupAnnotation,e.freeTextAnnotation=h.freeTextAnnotation,e.stampAnnotations=h.stampAnnotations,e.stickyNotesAnnotation=h.stickyNotesAnnotation,e.signatureInkAnnotation=h.signatureInkAnnotation,o=!0),this.pdfViewer.annotationModule&&(this.isTextMarkupAnnotationModule()||this.isShapeBasedAnnotationsEnabled())){if(this.isStampAnnotationModule()){var p=e.stampAnnotations;o?this.pdfViewer.annotationModule.stampAnnotationModule.renderStampAnnotations(p,t,null,!0):this.pdfViewer.annotationModule.stampAnnotationModule.renderStampAnnotations(p,t)}o?this.pdfViewer.annotationModule.renderAnnotations(t,e.shapeAnnotation,e.measureShapeAnnotation,e.textMarkupAnnotation,null,!0):this.pdfViewer.annotationModule.renderAnnotations(t,e.shapeAnnotation,e.measureShapeAnnotation,e.textMarkupAnnotation),this.pdfViewer.annotationModule.stickyNotesAnnotationModule.renderStickyNotesAnnotations(e.stickyNotesAnnotation,t)}if(this.pdfViewer.formDesignerModule&&!this.pdfViewer.annotationModule&&this.pdfViewer.formDesignerModule.updateCanvas(t),this.pdfViewer.textSearchModule&&this.pdfViewer.textSearchModule.isTextSearch&&this.pdfViewer.textSearchModule.highlightOtherOccurrences(t),this.isShapeBasedAnnotationsEnabled()){var f=this.getElement("_annotationCanvas_"+t);f&&(kh(f.getBoundingClientRect(),"position:absolute;top:0px;left:0px;overflow:hidden;pointer-events:none;z-index:1000",f,t,this.pdfViewer),this.pdfViewer.renderSelector(t,this.pdfViewer.annotationSelectorSettings))}this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.stickyNotesAnnotationModule.selectCommentsAnnotation(t),this.isFreeTextAnnotationModule()&&e.freeTextAnnotation&&this.pdfViewer.annotationModule.freeTextAnnotationModule.renderFreeTextAnnotations(e.freeTextAnnotation,t),this.isInkAnnotationModule()&&e&&e.signatureInkAnnotation&&this.pdfViewer.annotationModule.inkAnnotationModule.renderExistingInkSignature(e.signatureInkAnnotation,t,o),this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.isAnnotationSelected&&this.pdfViewer.annotationModule.annotationPageIndex===t&&this.pdfViewer.annotationModule.selectAnnotationFromCodeBehind(),this.isLoadedFormFieldAdded=!1},s.prototype.renderAnnotations=function(e,t){var i={};if(this.documentAnnotationCollections){for(var n=!1,o=0;o<this.annotationRenderredList.length;o++)this.annotationRenderredList[o]===e&&(n=!0);var r=this.documentAnnotationCollections[e];r&&!n&&(i.shapeAnnotation=r.shapeAnnotation,i.measureShapeAnnotation=r.measureShapeAnnotation,i.textMarkupAnnotation=r.textMarkupAnnotation,i.freeTextAnnotation=r.freeTextAnnotation,i.stampAnnotations=r.stampAnnotations,i.stickyNotesAnnotation=r.stickyNotesAnnotation,i.signatureAnnotation=r.signatureAnnotation,i.signatureInkAnnotation=r.signatureInkAnnotation,this.annotationRenderredList.push(e))}if(this.isAnnotationCollectionRemoved&&(i.shapeAnnotation=[],i.measureShapeAnnotation=[],i.textMarkupAnnotation=[],i.freeTextAnnotation=[],i.stampAnnotations=[],i.stickyNotesAnnotation=[],i.signatureInkAnnotation=[]),(this.isTextMarkupAnnotationModule()||this.isShapeBasedAnnotationsEnabled())&&(this.isStampAnnotationModule()&&this.pdfViewer.annotationModule.stampAnnotationModule.renderStampAnnotations(i.stampAnnotations,e),this.pdfViewer.annotationModule.renderAnnotations(e,i.shapeAnnotation,i.measureShapeAnnotation,i.textMarkupAnnotation),this.pdfViewer.annotationModule.stickyNotesAnnotationModule.renderStickyNotesAnnotations(i.stickyNotesAnnotation,e)),this.pdfViewer.textSearchModule&&this.pdfViewer.textSearchModule.isTextSearch&&this.pdfViewer.textSearchModule.highlightOtherOccurrences(e),this.isImportAction){for(n=!1,o=0;o<this.annotationPageList.length;o++)this.annotationPageList[o]===e&&(n=!0);n||this.importedAnnotation&&(this.drawPageAnnotations(this.importedAnnotation,e,!0),this.annotationPageList[this.annotationPageList.length]=e)}if(this.isShapeBasedAnnotationsEnabled()){var d=this.getElement("_annotationCanvas_"+e);d&&(kh(d.getBoundingClientRect(),"position:absolute;top:0px;left:0px;overflow:hidden;pointer-events:none;z-index:1000",d,e,this.pdfViewer),this.pdfViewer.renderSelector(e))}this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.stickyNotesAnnotationModule.selectCommentsAnnotation(e),this.isFreeTextAnnotationModule()&&i.freeTextAnnotation&&this.pdfViewer.annotationModule.freeTextAnnotationModule.renderFreeTextAnnotations(i.freeTextAnnotation,e,void 0),i&&i.signatureAnnotation&&this.signatureModule.renderExistingSignature(i.signatureAnnotation,e,!1),this.isInkAnnotationModule()&&i&&i.signatureInkAnnotation&&this.pdfViewer.annotationModule.inkAnnotationModule.renderExistingInkSignature(i.signatureInkAnnotation,e,!1),this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.isAnnotationSelected&&this.pdfViewer.annotationModule.selectAnnotationFromCodeBehind()},s.prototype.renderTextContent=function(e,t){var i=e.textContent,n=e.textBounds,o=e.rotation,r=this.getElement("_textLayer_"+t);r||(r=this.textLayer.addTextLayer(t,this.getPageWidth(t),this.getPageHeight(t),this.getElement("_pageDiv_"+t))),r&&i&&n&&(r.style.display="block",0===r.childNodes.length?this.textLayer.renderTextContents(t,i,n,o):this.textLayer.resizeTextContents(t,i,n,o,!0))},s.prototype.renderPageContainer=function(e,t,i,n){var o=(0,a.az)("div",{id:this.pdfViewer.element.id+"_pageDiv_"+e,className:"e-pv-page-div",attrs:{tabindex:"-1"}});o.style.width=t+"px",o.style.height=i+"px",this.pdfViewer.enableRtl?o.style.right=this.updateLeftPosition(e)+"px":o.style.left=this.updateLeftPosition(e)+"px",o.style.top=n+"px",this.pageContainer.appendChild(o),this.pageContainer.style.width=this.viewerContainer.clientWidth+"px",this.createWaitingPopup(e),this.orderPageDivElements(o,e),this.renderPageCanvas(o,t,i,e,"block"),a.AR.isDevice&&!this.pdfViewer.enableDesktopMode&&!this.isThumb&&this.updateMobileScrollerPosition()},s.prototype.renderPDFInformations=function(){this.pdfViewer.thumbnailViewModule&&(!a.AR.isDevice||this.pdfViewer.enableDesktopMode)&&this.pdfViewer.thumbnailViewModule.createRequestForThumbnails(),this.pdfViewer.bookmarkViewModule&&this.pdfViewer.bookmarkViewModule.createRequestForBookmarks(),this.pdfViewer.annotationModule&&(this.pdfViewer.toolbarModule&&this.pdfViewer.annotationModule.stickyNotesAnnotationModule.initializeAcccordionContainer(),this.pdfViewer.isCommandPanelOpen&&this.pdfViewer.annotation.showCommentsPanel(),this.pdfViewer.annotationModule.stickyNotesAnnotationModule.createRequestForComments())},s.prototype.orderPageDivElements=function(e,t){var i=this.getElement("_pageDiv_"+(t+1));i?this.pageContainer.insertBefore(e,i):this.pageContainer.appendChild(e)},s.prototype.renderPageCanvas=function(e,t,i,n,o){if(e){var r=this.getElement("_pageCanvas_"+n);return r?(r.width=t,r.height=i,r.style.display="block",this.isMixedSizeDocument&&this.highestWidth>0&&(r.style.marginLeft="auto",r.style.marginRight="auto")):((r=(0,a.az)("img",{id:this.pdfViewer.element.id+"_pageCanvas_"+n,className:"e-pv-page-canvas"})).width=t,r.height=i,r.style.display=o,this.isMixedSizeDocument&&this.highestWidth>0&&(r.style.marginLeft="auto",r.style.marginRight="auto"),e.appendChild(r)),this.pdfViewer.annotationModule&&this.pdfViewer.annotation&&this.pdfViewer.annotationModule.createAnnotationLayer(e,t,i,n,o),(this.pdfViewer.textSearchModule||this.pdfViewer.textSelectionModule||this.pdfViewer.annotationModule)&&this.textLayer.addTextLayer(n,t,i,e),this.pdfViewer.formDesignerModule&&!this.pdfViewer.annotationModule&&this.pdfViewer.formDesignerModule.createAnnotationLayer(e,t,i,n,o),r}},s.prototype.applyElementStyles=function(e,t){if(this.isMixedSizeDocument&&e){var i=document.getElementById(this.pdfViewer.element.id+"_pageCanvas_"+t),n=document.getElementById(this.pdfViewer.element.id+"_oldCanvas_"+t);e&&i&&i.offsetLeft>0?(e.style.marginLeft=i.offsetLeft+"px",e.style.marginRight=i.offsetLeft+"px"):n&&n.offsetLeft>0?(e.style.marginLeft=n.offsetLeft+"px",e.style.marginRight=n.offsetLeft+"px"):(e.style.marginLeft="auto",e.style.marginRight="auto")}},s.prototype.updateLeftPosition=function(e){var t,i=this.viewerContainer.getBoundingClientRect().width;if(0===i&&(i=parseFloat(this.pdfViewer.width.toString())),this.isMixedSizeDocument&&this.highestWidth>0){t=this.viewerContainer.clientWidth>0?(this.viewerContainer.clientWidth-this.highestWidth*this.getZoomFactor())/2:(i-this.highestWidth*this.getZoomFactor())/2;var n=(this.highestWidth*this.getZoomFactor()-this.getPageWidth(e))/2;t>0?t+=n:t=n}else t=this.viewerContainer.clientWidth>0?(this.viewerContainer.clientWidth-this.getPageWidth(e))/2:(i-this.getPageWidth(e))/2;if(t<0||this.pdfViewer.magnificationModule&&(this.pdfViewer.magnificationModule.isAutoZoom&&this.getZoomFactor()<1||"fitToWidth"===this.pdfViewer.magnificationModule.fitType)){var o=t;(t=t>0&&a.AR.isDevice&&!this.pdfViewer.enableDesktopMode?o:this.pageLeft)>0&&this.isMixedSizeDocument&&o>0&&(t=o)}return t},s.prototype.applyLeftPosition=function(e){var t;if(this.pageSize[e]){if(this.isMixedSizeDocument&&this.highestWidth>0){t=this.viewerContainer.clientWidth>0?(this.viewerContainer.clientWidth-this.highestWidth*this.getZoomFactor())/2:(this.viewerContainer.getBoundingClientRect().width-this.highestWidth*this.getZoomFactor())/2;var i=(this.highestWidth*this.getZoomFactor()-this.getPageWidth(e))/2;t>0?t+=i:t=i}else t=this.viewerContainer.clientWidth>0?(this.viewerContainer.clientWidth-this.pageSize[e].width*this.getZoomFactor())/2:(this.viewerContainer.getBoundingClientRect().width-this.pageSize[e].width*this.getZoomFactor())/2;if(t<0||this.pdfViewer.magnificationModule&&(this.pdfViewer.magnificationModule.isAutoZoom&&this.getZoomFactor()<1||"fitToWidth"===this.pdfViewer.magnificationModule.fitType)){var n=t;t=this.pageLeft,n>0&&this.isMixedSizeDocument&&(t=n)}var o=document.getElementById(this.pdfViewer.element.id+"_pageDiv_"+e);o&&(this.pdfViewer.enableRtl?o.style.right=t+"px":o.style.left=t+"px")}},s.prototype.updatePageHeight=function(e,t){return(e-t)/e*100+"%"},s.prototype.getPageNumberFromClientPoint=function(e){for(var t=e.x+this.viewerContainer.scrollLeft,i=e.y+this.viewerContainer.scrollTop,n=0;n<this.pageCount;n++){var o=this.pageSize[n].height+this.viewerContainer.scrollTop;if(i<this.pageSize[n].top+o){var d,r=this.getElement("_pageViewContainer").getBoundingClientRect(),l=(r.width-this.pageSize[n].width)/2+r.x;if((d=i>this.pageSize[n].top?i-this.pageSize[n].top:this.pageSize[n].top-i)>0&&null!=this.pageSize[n]){if(this.getPageHeight(n),l>=0&&(t<l||t>l+this.pageSize[n].width))return-1;if(d<=this.getPageTop(n)+o)return n+1}}}return-1},s.prototype.convertClientPointToPagePoint=function(e,t){if(-1!==t){var i=this.getElement("_pageViewContainer").getBoundingClientRect();return{x:e.x+this.viewerContainer.scrollLeft-((i.width-this.pageSize[t-1].width)/2+i.x),y:e.y+this.viewerContainer.scrollTop-this.pageSize[t-1].top}}return null},s.prototype.convertPagePointToClientPoint=function(e,t){if(-1!==t){var i=this.getElement("_pageViewContainer").getBoundingClientRect();return{x:e.x+((i.width-this.pageSize[t-1].width)/2+i.x),y:e.y+this.pageSize[t-1].top}}return null},s.prototype.convertPagePointToScrollingPoint=function(e,t){return-1!==t?{x:e.x+this.viewerContainer.scrollLeft,y:e.y+this.viewerContainer.scrollTop}:null},s.prototype.initiatePageViewScrollChanged=function(){this.scrollHoldTimer&&clearTimeout(this.scrollHoldTimer),this.scrollHoldTimer=null,this.scrollPosition*this.getZoomFactor()!==this.viewerContainer.scrollTop&&(this.scrollPosition=this.viewerContainer.scrollTop,this.pageViewScrollChanged(this.currentPageNumber))},s.prototype.renderCountIncrement=function(){this.pdfViewer.magnificationModule&&this.pdfViewer.magnificationModule.renderCountIncrement()},s.prototype.pageViewScrollChanged=function(e){this.isPanMode?-1===this.renderedPagesList.indexOf(e-1)&&(this.reRenderedCount=0):this.reRenderedCount=0;var t=e-1;if(e!==this.previousPage&&e<=this.pageCount){var i=!1;this.isDataExits&&!this.getStoredData(t)&&(i=!0),-1===this.renderedPagesList.indexOf(t)&&!this.getMagnified()&&!i&&(this.renderCountIncrement(),this.createRequestForRender(t))}if(!this.getMagnified()&&!this.getPagesPinchZoomed()){var n=t-1,o=(i=!1,this.getElement("_pageCanvas_"+n));this.isDataExits&&!this.getStoredData(n)&&(i=!0),null!==o&&!i&&-1===this.renderedPagesList.indexOf(n)&&!this.getMagnified()&&(this.renderCountIncrement(),this.createRequestForRender(n)),this.isMinimumZoom&&this.renderPreviousPagesInScroll(n);var r=t+1,l=0;if(r<this.pageCount&&(l=this.getPageHeight(r),-1===this.renderedPagesList.indexOf(r)&&!this.getMagnified()&&l))for(this.createRequestForRender(r),this.renderCountIncrement();this.viewerContainer.clientHeight>l&&(r+=1)<this.pageCount;)this.renderPageElement(r),this.createRequestForRender(r),l+=this.getPageHeight(r),this.renderCountIncrement()}},s.prototype.renderPreviousPagesInScroll=function(e){var t=e-1,i=t-1;t>0&&(-1===this.renderedPagesList.indexOf(t)&&!this.getMagnified()&&(this.createRequestForRender(t),this.renderCountIncrement()),i>0&&-1===this.renderedPagesList.indexOf(i)&&!this.getMagnified()&&(this.createRequestForRender(i),this.renderCountIncrement()))},s.prototype.downloadDocument=function(e){e=(URL||webkitURL).createObjectURL(e);var i=(0,a.az)("a");if(i.click)i.href=e,i.target="_parent","download"in i&&(i.download=this.downloadFileName),(document.body||document.documentElement).appendChild(i),i.click(),i.parentNode.removeChild(i);else{if(window.top===window&&e.split("#")[0]===window.location.href.split("#")[0]){var n=-1===e.indexOf("?")?"?":"&";e=e.replace(/#|$/,n+"$&")}window.open(e,"_parent")}},s.prototype.downloadExportAnnotationJson=function(e,t){e=(URL||webkitURL).createObjectURL(e);var n=(0,a.az)("a");if(n.click)n.href=e,n.target="_parent","download"in n&&(n.download=null!==this.pdfViewer.exportAnnotationFileName?this.pdfViewer.exportAnnotationFileName.split(".")[0]+".json":this.pdfViewer.fileName.split(".")[0]+".json"),(document.body||document.documentElement).appendChild(n),n.click(),n.parentNode.removeChild(n),t?this.pdfViewer.fireFormExportSuccess(e,n.download):this.pdfViewer.fireExportSuccess(e,n.download);else{if(window.top===window&&e.split("#")[0]===window.location.href.split("#")[0]){var o=-1===e.indexOf("?")?"?":"&";e=e.replace(/#|$/,o+"$&")}window.open(e,"_parent"),t?this.pdfViewer.fireFormExportSuccess(e,this.pdfViewer.fileName.split(".")[0]+".json"):this.pdfViewer.fireExportSuccess(e,this.pdfViewer.fileName.split(".")[0]+".json")}},s.prototype.downloadExportedXFdfAnnotation=function(e){e=(URL||webkitURL).createObjectURL(e);var i=(0,a.az)("a");i.click&&(i.href=e,i.target="_parent","download"in i&&(i.download=null!==this.pdfViewer.exportAnnotationFileName?this.pdfViewer.exportAnnotationFileName.split(".")[0]+".xfdf":this.pdfViewer.fileName.split(".")[0]+".xfdf"),(document.body||document.documentElement).appendChild(i),i.click(),i.parentNode.removeChild(i),this.pdfViewer.fireExportSuccess(e,i.download))},s.prototype.exportFormFields=function(e){this.createRequestForExportFormfields(!1,e)},s.prototype.importFormFields=function(e){this.createRequestForImportingFormfields(e)},s.prototype.createRequestForExportFormfields=function(e,t){var n,i=this;n=this;var o=new Promise(function(r,l){var d=n.createFormfieldsJsonData();n.pdfViewer.fireFormExportStarted(d.pdfAnnotation),d.action="ExportFormFields",d.hashId=n.hashId,d.fileName=n.pdfViewer.fileName,t&&""!==t&&!e&&(d.filePath=t),d.elementId=i.pdfViewer.element.id,n.jsonDocumentId&&(d.document=n.jsonDocumentId);var h=i.getFormFieldsPageList();d.formFieldsPageList=JSON.stringify(h);var p=n.pdfViewer.serviceUrl+"/"+n.pdfViewer.serverActionSettings.exportFormFields;n.exportFormFieldsRequestHandler=new Ue(i.pdfViewer),n.exportFormFieldsRequestHandler.url=p,n.exportFormFieldsRequestHandler.mode=!0,n.exportFormFieldsRequestHandler.responseType="text",n.exportFormFieldsRequestHandler.send(d),n.exportFormFieldsRequestHandler.onSuccess=function(f){var c=f.data;if(c&&c)if(n.pdfViewer.fireAjaxRequestSuccess(n.pdfViewer.serverActionSettings.exportFormFields,c),e){var u=decodeURIComponent(escape(atob(c.split(",")[1])));r(u),n.pdfViewer.fireFormExportSuccess(u,n.pdfViewer.fileName)}else if(c.split("base64,")[1]){var m=n.createBlobUrl(c.split("base64,")[1],"application/json");a.AR.isIE||"edge"===a.AR.info.name?window.navigator.msSaveOrOpenBlob(m,n.pdfViewer.fileName.split(".")[0]+".json"):n.downloadExportAnnotationJson(m,!0)}},n.exportFormFieldsRequestHandler.onFailure=function(f){n.pdfViewer.fireFormExportFailed(d.pdfAnnotation,f.statusText)},n.exportFormFieldsRequestHandler.onError=function(f){n.pdfViewer.fireFormExportFailed(d.pdfAnnotation,f.statusText)}});return!e||o},s.prototype.createRequestForImportingFormfields=function(e){var t;t=this;var i={};"object"==typeof e?i.data=JSON.stringify(e):(i.data=e,"json"===e.split(".")[1]&&(i.fileName=t.pdfViewer.fileName)),t.pdfViewer.fireFormImportStarted(e),i.action="ImportFormFields",i.hashId=t.hashId,i.elementId=this.pdfViewer.element.id,t.jsonDocumentId&&(i.document=t.jsonDocumentId);var n=t.pdfViewer.serviceUrl+"/"+t.pdfViewer.serverActionSettings.importFormFields;t.importFormFieldsRequestHandler=new Ue(this.pdfViewer),t.importFormFieldsRequestHandler.url=n,t.importFormFieldsRequestHandler.mode=!0,t.importFormFieldsRequestHandler.responseType="text",t.importFormFieldsRequestHandler.send(i),t.importFormFieldsRequestHandler.onSuccess=function(o){var r=o.data;if(r&&"null"!==r){if("object"!=typeof r)try{"object"!=typeof(r=JSON.parse(r))&&(t.onControlError(500,r,t.pdfViewer.serverActionSettings.importFormFields),t.pdfViewer.fireFormImportFailed(e,o.statusText),r=null)}catch(h){t.pdfViewer.fireFormImportFailed(e,t.pdfViewer.localeObj.getConstant("File not found")),(0,a.xr)()?this.pdfViewer._dotnetInstance.invokeMethodAsync("GetLocaleText","PdfViewer_FileNotFound").then(function(p){t.openImportExportNotificationPopup(p)}):t.openImportExportNotificationPopup(t.pdfViewer.localeObj.getConstant("File not found")),t.onControlError(500,r,t.pdfViewer.serverActionSettings.importFormFields),r=null}t.pdfViewer.fireAjaxRequestSuccess(t.pdfViewer.serverActionSettings.importFormFields,r),t.pdfViewer.fireFormImportSuccess(e),window.sessionStorage.removeItem(this.documentId+"_formfields"),this.pdfViewer.formFieldsModule.removeExistingFormFields(),window.sessionStorage.removeItem(this.documentId+"_formDesigner"),t.saveFormfieldsData(r);for(var d=0;d<t.renderedPagesList.length;d++)this.pdfViewer.formFieldsModule.renderFormFields(t.renderedPagesList[d])}else t.pdfViewer.fireFormImportFailed(e,o.statusText),(0,a.xr)()?this.pdfViewer._dotnetInstance.invokeMethodAsync("GetLocaleText","PdfViewer_FileNotFound").then(function(p){t.openImportExportNotificationPopup(p)}):t.openImportExportNotificationPopup(t.pdfViewer.localeObj.getConstant("File not found"))},t.importFormFieldsRequestHandler.onFailure=function(o){t.pdfViewer.fireFormImportFailed(e,o.statusText)},t.importFormFieldsRequestHandler.onError=function(o){t.pdfViewer.fireFormImportFailed(e,o.statusText)}},s.prototype.createFormfieldsJsonData=function(){var e={};if(this.pdfViewer.formDesignerModule){var t=this.pdfViewer.formDesignerModule.downloadFormDesigner();e.formDesigner=t}else this.pdfViewer.formFieldsModule&&(t=this.pdfViewer.formFieldsModule.downloadFormFieldsData(),e.fieldsData=t);return e},s.prototype.constructJsonDownload=function(){var e={hashId:this.hashId};if(this.jsonDocumentId&&(e.documentId=this.jsonDocumentId),e.uniqueId=this.documentId,this.importPageList=[],this.pdfViewer.annotationModule&&this.saveImportedAnnotations(),this.isTextMarkupAnnotationModule()){this.isJsonExported=!1;var t=this.pdfViewer.annotationModule.textMarkupAnnotationModule.saveTextMarkupAnnotations();e.textMarkupAnnotations=t}if(this.isShapeAnnotationModule()){this.isJsonExported=!1;var i=this.pdfViewer.annotationModule.shapeAnnotationModule.saveShapeAnnotations();e.shapeAnnotations=i}if(this.isCalibrateAnnotationModule()){this.isJsonExported=!1;var n=this.pdfViewer.annotationModule.measureAnnotationModule.saveMeasureShapeAnnotations();e.measureShapeAnnotations=n}if(this.isStampAnnotationModule()){var o=this.pdfViewer.annotationModule.stampAnnotationModule.saveStampAnnotations();e.stampAnnotations=o}if(this.isCommentAnnotationModule()){var r=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.saveStickyAnnotations();e.stickyNotesAnnotation=r}if(this.isImportAction){var l=JSON.stringify(this.importPageList);e.importPageList=l}if(this.pdfViewer.formDesignerModule){var d=this.pdfViewer.formDesignerModule.downloadFormDesigner();e.formDesigner=d}else this.pdfViewer.formFieldsModule&&(d=this.pdfViewer.formFieldsModule.downloadFormFieldsData(),e.fieldsData=d);var h=this.signatureModule.saveSignature();if(e.signatureData=h,this.pdfViewer.isSignatureEditable&&(e.isSignatureEdited=this.pdfViewer.isSignatureEditable),this.isFreeTextAnnotationModule()){var p=this.pdfViewer.annotationModule.freeTextAnnotationModule.saveFreeTextAnnotations();e.freeTextAnnotation=p}if(this.isInkAnnotationModule()){var f=this.pdfViewer.annotationModule.inkAnnotationModule.saveInkSignature();e.inkSignatureData=f}if(e.action="Download",e.elementId=this.pdfViewer.element.id,this.pdfViewer.annotationModule){var c=this.getAnnotationsPageList();e.isAnnotationsExist=this.isAnnotationsExist(e.textMarkupAnnotations)||this.isAnnotationsExist(e.shapeAnnotations)||this.isAnnotationsExist(e.measureShapeAnnotations)||this.isAnnotationsExist(e.stampAnnotations)||this.isAnnotationsExist(e.stickyNotesAnnotation)||this.isAnnotationsExist(e.signatureData)||this.isAnnotationsExist(e.freeTextAnnotation)||this.isAnnotationsExist(e.inkSignatureData)||c.length>0,e.annotationsPageList=JSON.stringify(c)}if(this.pdfViewer.formDesignerModule||this.pdfViewer.formFieldsModule){var u=this.getFormFieldsPageList();e.isFormFieldAnnotationsExist=this.isAnnotationsExist(e.formDesigner)||this.isFieldsDataExist(e.fieldsData)||u.length>0,e.formFieldsPageList=JSON.stringify(u)}return e},s.prototype.isAnnotationsExist=function(e){return!(0,a.le)(e)&&JSON.parse(e).flat(1).length>0},s.prototype.isFieldsDataExist=function(e){return!(0,a.le)(e)&&0!==Object.entries(JSON.parse(e)).length},s.prototype.getAnnotationsPageList=function(){var e=this.pdfViewer.annotationCollection.map(function(n){return n.pageNumber}),t=this.pdfViewer.annotationModule.actionCollection.filter(function(n,o,r){return"formFields"!==n.annotation.propName&&null==n.annotation.formFieldAnnotationType}).map(function(n){return n.pageIndex});return e.concat(t).filter(function(n,o,r){return r.indexOf(n)===o&&void 0!==n})},s.prototype.getFormFieldsPageList=function(){var e=this.pdfViewer.formFieldCollection.map(function(n){return(0,a.le)(n.properties)?n.pageNumber+1:n.properties.pageNumber}),t=(0,a.le)(this.pdfViewer.annotationModule)?[]:this.pdfViewer.annotationModule.actionCollection.filter(function(n,o,r){return"formFields"==n.annotation.propName||null!=n.annotation.formFieldAnnotationType}).map(function(n){return n.pageIndex});return e.concat(t).filter(function(n,o,r){return r.indexOf(n)===o&&void 0!==n})},s.prototype.checkFormFieldCollection=function(e){var i,t=!1;if(i=this.getItemFromSessionStorage("_formDesigner"))for(var n=JSON.parse(i),o=0;o<n.length;o++)if("RadioButton"===n[o].FormField.formFieldAnnotationType){for(var r=0;r<n[o].FormField.radiobuttonItem.length;r++)if(e===n[o].FormField.radiobuttonItem[r].id.split("_")[0]){t=!0;break}}else if(n[o].Key.split("_")[0]===e){t=!0;break}return t},s.prototype.isFreeTextAnnotationModule=function(){return!!this.pdfViewer.annotation&&!(!this.pdfViewer.annotation||!this.pdfViewer.annotation.freeTextAnnotationModule)},s.prototype.createRequestForDownload=function(){var e;(e=this).pdfViewer.fireDownloadStart(e.downloadFileName);var t=this.constructJsonDownload();this.dowonloadRequestHandler=new Ue(this.pdfViewer),this.dowonloadRequestHandler.url=e.pdfViewer.serviceUrl+"/"+e.pdfViewer.serverActionSettings.download,this.dowonloadRequestHandler.responseType="text",this.validateForm&&this.pdfViewer.enableFormFieldsValidation?(this.pdfViewer.fireValidatedFailed(e.pdfViewer.serverActionSettings.download),this.validateForm=!1):this.dowonloadRequestHandler.send(t),this.dowonloadRequestHandler.onSuccess=function(i){var n=i.data;if(n){if("object"!=typeof n&&-1===n.indexOf("data:application/pdf")&&(e.onControlError(500,n,e.pdfViewer.serverActionSettings.download),n=null),"object"==typeof n&&(n=JSON.parse(n)),n){e.pdfViewer.downloadFileName&&e.pdfViewer.downloadFileName!==e.downloadFileName&&(e.downloadFileName=e.pdfViewer.downloadFileName),e.pdfViewer.fireAjaxRequestSuccess(e.pdfViewer.serverActionSettings.download,n);var o=e.createBlobUrl(n.split("base64,")[1],"application/pdf");a.AR.isIE||"edge"===a.AR.info.name?window.navigator.msSaveOrOpenBlob(o,e.downloadFileName):e.downloadDocument(o),e.pdfViewer.fireDownloadEnd(e.downloadFileName,n)}e.updateDocumentAnnotationCollections()}else e.pdfViewer.fireDownloadEnd(e.downloadFileName,"PDF Document saved in server side successfully")},this.dowonloadRequestHandler.onFailure=function(i){e.pdfViewer.fireAjaxRequestFailed(i.status,i.statusText,e.pdfViewer.serverActionSettings.download)},this.dowonloadRequestHandler.onError=function(i){e.openNotificationPopup(),e.pdfViewer.fireAjaxRequestFailed(i.status,i.statusText,e.pdfViewer.serverActionSettings.download)}},s.prototype.getTileCount=function(e){if(e&&"number"==typeof e){var i=1;i=this.getZoomFactor()>2&&e<=1200?2:e/816;var n=parseInt(i.toFixed());return n<=0?1:this.pdfViewer.tileRenderingSettings.enableTileRendering?n:1}return 1},s.prototype.createRequestForRender=function(e){var t,i=(t=this).getElement("_pageCanvas_"+e),n=t.getElement("_oldCanvas_"+e);if(this.pageSize&&this.pageSize[e]){var o=this.pageSize[e].width,d=(this.getElement("_pageCanvas_"+e),1200),h=t.pdfViewer.element.clientHeight>0?t.pdfViewer.element.clientHeight:t.pdfViewer.element.style.height;d=parseInt(d),h=parseInt(h)?parseInt(h):500;var p=void 0,f=void 0,c=this.getTileCount(o);if(i){(!isNaN(parseFloat(i.style.width))||n)&&t.isInitialLoaded&&t.showPageLoadingIndicator(e,!1);var u=t.getStoredData(e);p=f=c;var m=t.pdfViewer.tileRenderingSettings;m.enableTileRendering&&m.x>0&&m.y>0&&(d<o||this.getZoomFactor()>2)&&(p=m.x,f=m.y),t.tileRequestCount=p*f;var g=this.retrieveCurrentZoomFactor(),v=void 0;if(1===c)u=t.getStoredData(e),v=t.pageRequestSent(e,0,0);else{var y=JSON.parse(t.getWindowSessionStorageTile(e,0,0,g));y&&(u=y)}if(u&&u.uniqueId===t.documentId){if(i.style.backgroundColor="#fff",t.pdfViewer.magnification&&t.pdfViewer.magnification.isPinchZoomed||!this.pageSize[e])return;var b=this.retrieveCurrentZoomFactor();if(d=b>2&&o<=1200?700:1200,t.pdfViewer.tileRenderingSettings.enableTileRendering||(d=1200),d>=o||!t.pdfViewer.tileRenderingSettings.enableTileRendering)t.renderPage(u,e);else{t.isTileImageRendered=!0,t.tileRenderCount=0,t.tileRenderPage(u,e);for(var C=0;C<p;C++)for(var S=0;S<f;S++)0===C&&0===S||(u=JSON.parse(this.getWindowSessionStorageTile(e,C,S,b)))&&t.tileRenderPage(u,e)}u=null}else if(null===u||!v){if(this.getPagesPinchZoomed()?t.showPageLoadingIndicator(e,!1):t.showPageLoadingIndicator(e,!0),t.getPagesZoomed()&&t.isInitialLoaded&&t.showPageLoadingIndicator(e,!1),t.pdfViewer.magnification&&t.pdfViewer.magnification.isPinchZoomed)return;t.pdfViewer.tileRenderingSettings.enableTileRendering||(p=1,f=1),t.tileRenderCount=0,t.isTileImageRendered=!0;for(var x=0;x<p;x++)for(var V=0;V<f;V++){var T=null,k=this.retrieveCurrentZoomFactor();d=k>2&&o<=1200?700:1200,t.pdfViewer.tileRenderingSettings.enableTileRendering||(d=1200),T={xCoordinate:x.toString(),yCoordinate:V.toString(),viewPortWidth:d.toString(),viewPortHeight:h.toString(),pageNumber:e.toString(),hashId:t.hashId,tilecount:c.toString(),tileXCount:p.toString(),tileYCount:f.toString(),zoomFactor:k.toString(),action:"RenderPdfPages",uniqueId:this.documentId,elementId:t.pdfViewer.element.id},this.jsonDocumentId&&(T.documentId=this.jsonDocumentId),t.pageRequestHandler=new Ue(this.pdfViewer),t.pageRequestHandler.url=t.pdfViewer.serviceUrl+"/"+t.pdfViewer.serverActionSettings.renderPages,t.pageRequestHandler.responseType="json",t.pageRequestHandler.send(T),t.requestLists.push(t.documentId+"_"+e+"_"+x+"_"+V+"_"+k),t.pageRequestHandler.onSuccess=function(A){if(!(t.pdfViewer.magnification&&t.pdfViewer.magnification.isPinchZoomed||!t.pageSize[e])){var M=A.data;if(M&&"object"!=typeof M)try{M=JSON.parse(M)}catch(N){t.onControlError(500,M,t.pdfViewer.serverActionSettings.renderPages),M=null}if(M){for(;"object"!=typeof M;)M=JSON.parse(M);if(M.image&&M.uniqueId===t.documentId){var I=M.pageWidth&&M.pageWidth>0?M.pageWidth:o;t.pdfViewer.fireAjaxRequestSuccess(t.pdfViewer.serverActionSettings.renderPages,M);var B=void 0!==M.pageNumber?M.pageNumber:e;d>=I||!t.pdfViewer.tileRenderingSettings.enableTileRendering?t.storeWinData(M,B):t.storeWinData(M,B,M.tileX,M.tileY),d>=I||!t.pdfViewer.tileRenderingSettings.enableTileRendering?t.renderPage(M,B):t.tileRenderPage(M,B)}}}},this.pageRequestHandler.onFailure=function(A){t.pdfViewer.fireAjaxRequestFailed(A.status,A.statusText,t.pdfViewer.serverActionSettings.renderPages)},this.pageRequestHandler.onError=function(A){t.openNotificationPopup(),t.pdfViewer.fireAjaxRequestFailed(A.status,A.statusText,t.pdfViewer.serverActionSettings.renderPages)}}}t.renderedPagesList.push(e)}}},s.prototype.pageRequestSent=function(e,t,i){var n=this.retrieveCurrentZoomFactor();return!!(this.requestLists&&this.requestLists.indexOf(this.documentId+"_"+e+"_"+t+"_"+i+"_"+n)>-1)},s.prototype.onControlError=function(e,t,i){this.openNotificationPopup(),this.pdfViewer.fireAjaxRequestFailed(e,t,i)},s.prototype.getStoredData=function(e,t){var i=this.retrieveCurrentZoomFactor();this.pdfViewer.restrictZoomRequest&&!this.pdfViewer.tileRenderingSettings.enableTileRendering&&(i=1);var n=this.getWindowSessionStorage(e,i)?this.getWindowSessionStorage(e,i):this.getPinchZoomPage(e);if(!n&&t){var o=this.getWindowSessionStorageTile(e,0,0,i);o&&(n=o)}var r=null;return n&&(r=n,this.isPinchZoomStorage||(r=JSON.parse(n)),this.isPinchZoomStorage=!1),r},s.prototype.storeWinData=function(e,t,i,n){var d,o=this.createBlobUrl(e.image.split("base64,")[1],"image/png"),l=(URL||webkitURL).createObjectURL(o);isNaN(i)&&isNaN(n)||0===i&&0===n?(d={image:l,transformationMatrix:e.transformationMatrix,hyperlinks:e.hyperlinks,hyperlinkBounds:e.hyperlinkBounds,linkAnnotation:e.linkAnnotation,linkPage:e.linkPage,annotationLocation:e.annotationLocation,textContent:e.textContent,width:e.width,textBounds:e.textBounds,pageText:e.pageText,rotation:e.rotation,scaleFactor:e.scaleFactor,uniqueId:e.uniqueId,zoomFactor:e.zoomFactor,tileX:i,tileY:n},this.pageSize[t]&&(this.pageSize[t].rotation=parseFloat(e.rotation)),this.textLayer.characterBound[t]=e.characterBounds):d={image:l,transformationMatrix:e.transformationMatrix,tileX:i,tileY:n,width:e.width,zoomFactor:e.zoomFactor},this.manageSessionStorage(t,d,i,n)},s.prototype.setCustomAjaxHeaders=function(e){for(var t=0;t<this.pdfViewer.ajaxRequestSettings.ajaxHeaders.length;t++)e.setRequestHeader(this.pdfViewer.ajaxRequestSettings.ajaxHeaders[t].headerName,this.pdfViewer.ajaxRequestSettings.ajaxHeaders[t].headerValue)},s.prototype.getPinchZoomPage=function(e){for(var t in this.pinchZoomStorage)if(this.pinchZoomStorage.hasOwnProperty(t)&&this.pinchZoomStorage[t].index===e)return this.isPinchZoomStorage=!0,this.pinchZoomStorage[t].pinchZoomStorage;return null},s.prototype.getWindowSessionStorage=function(e,t){return window.sessionStorage.getItem(this.documentId+"_"+e+"_"+t)},s.prototype.getWindowSessionStorageTile=function(e,t,i,n){return window.sessionStorage.getItem(this.documentId+"_"+e+"_"+t+"_"+i+"_"+n)},s.prototype.retrieveCurrentZoomFactor=function(){var e=this.getZoomFactor();return this.pdfViewer.enableZoomOptimization?(e<=1?e=1:e>1&&e<=2?e=2:e>2&&e<=3?e=3:e>3&&e<=4&&(e=4),e):(e<=0&&(e=1),e)},s.prototype.manageSessionStorage=function(e,t,i,n){var o=Math.round(JSON.stringify(window.sessionStorage).length/1024);if(o>=5e3){if(!this.isStorageExceed){for(var l=[],d=0;d<window.sessionStorage.length;d++)window.sessionStorage.key(d)&&window.sessionStorage.key(d).split("_")[3]&&"annotations"===window.sessionStorage.key(d).split("_")[3]&&(this.annotationStorage[window.sessionStorage.key(d)]=window.sessionStorage.getItem(window.sessionStorage.key(d)),l.push(window.sessionStorage.key(d)));if(l)for(d=0;d<l.length;d++)window.sessionStorage.removeItem(l[d])}if(this.isStorageExceed=!0,(o=Math.round(JSON.stringify(window.sessionStorage).length/1024))>=5e3){var h=window.sessionStorage.length;for(h>200&&(h=200),d=0;d<h;d++)window.sessionStorage.key(d)&&window.sessionStorage.key(d).split("_")[3]&&"annotations"!==window.sessionStorage.key(d).split("_")[3]&&window.sessionStorage.removeItem(window.sessionStorage.key(d))}}var p=this.retrieveCurrentZoomFactor();isNaN(i)&&isNaN(n)?(window.sessionStorage.setItem(this.documentId+"_"+e+"_"+p,JSON.stringify(t)),this.sessionStorage.push(this.documentId+"_"+e+"_"+p)):(this.sessionStorage.push(this.documentId+"_"+e+"_"+i+"_"+n+"_"+p),window.sessionStorage.setItem(this.documentId+"_"+e+"_"+i+"_"+n+"_"+p,JSON.stringify(t)))},s.prototype.createBlobUrl=function(e,t){for(var n=atob(e),o=[],r=0;r<n.length;r+=512){for(var l=n.slice(r,r+512),d=new Array(l.length),h=0;h<l.length;h++)d[h]=l.charCodeAt(h);var p=new Uint8Array(d);o.push(p)}return new Blob(o,{type:t})},s.prototype.getRandomNumber=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){return(16*Math.random()|0).toString(16)})},s.prototype.createGUID=function(){return"Sync_PdfViewer_"+this.getRandomNumber()},s.prototype.isClickedOnScrollBar=function(e,t){var i=!1;return t&&this.setScrollDownValue(e.type,!1),this.viewerContainer.clientWidth+this.viewerContainer.offsetLeft<e.clientX&&e.clientX<this.viewerContainer.offsetWidth+this.viewerContainer.offsetLeft&&(i=!0,t&&this.setScrollDownValue(e.type,!0)),this.viewerContainer.clientHeight+this.viewerContainer.offsetTop<e.clientY&&e.clientY<this.viewerContainer.offsetHeight+this.viewerContainer.offsetTop&&(i=!0,t&&this.setScrollDownValue(e.type,!0)),i},s.prototype.setScrollDownValue=function(e,t){"mousedown"===e&&(this.isScrollbarMouseDown=t)},s.prototype.disableTextSelectionMode=function(){this.isTextSelectionDisabled=!0,this.viewerContainer.classList.remove("e-enable-text-selection"),this.pdfViewer.textSelectionModule&&this.pdfViewer.textSelectionModule.clearTextSelection(),this.viewerContainer.classList.add("e-disable-text-selection"),this.viewerContainer.addEventListener("selectstart",function(){return!1})},s.prototype.getElement=function(e){return document.getElementById(this.pdfViewer.element.id+e)},s.prototype.getPageWidth=function(e){return this.pageSize[e]?this.pageSize[e].width*this.getZoomFactor():0},s.prototype.getPageHeight=function(e){return this.pageSize[e]?this.pageSize[e].height*this.getZoomFactor():0},s.prototype.getPageTop=function(e){return this.pageSize[e]?this.pageSize[e].top*this.getZoomFactor():0},s.prototype.isAnnotationToolbarHidden=function(){return!this.pdfViewer.toolbarModule.annotationToolbarModule||this.pdfViewer.toolbarModule.annotationToolbarModule.isToolbarHidden},s.prototype.isFormDesignerToolbarHidded=function(){var e=this.pdfViewer.toolbarModule.formDesignerToolbarModule;return!e||e.isToolbarHidden},s.prototype.getTextMarkupAnnotationMode=function(){return!!this.isTextMarkupAnnotationModule()&&this.pdfViewer.annotationModule.textMarkupAnnotationModule.isTextMarkupAnnotationMode},s.prototype.isNewFreeTextAnnotation=function(){return!this.pdfViewer.annotationModule||!this.pdfViewer.annotationModule.freeTextAnnotationModule||!this.pdfViewer.annotationModule.freeTextAnnotationModule.isNewFreeTextAnnot},s.prototype.getCurrentTextMarkupAnnotation=function(){return!!this.isTextMarkupAnnotationModule()&&!!this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation},s.prototype.getSelectTextMarkupCurrentPage=function(){return this.isTextMarkupAnnotationModule()?this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage:null},s.prototype.getAnnotationToolStatus=function(){return!!this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.annotationToolbarModule.isAnnotationButtonsEnabled()},s.prototype.getPopupNoteVisibleStatus=function(){return!!this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.isPopupNoteVisible},s.prototype.isTextMarkupAnnotationModule=function(){return this.pdfViewer.annotationModule?this.pdfViewer.annotationModule.textMarkupAnnotationModule:null},s.prototype.isShapeAnnotationModule=function(){return!!this.pdfViewer.annotation&&!(!this.pdfViewer.annotation||!this.pdfViewer.annotation.shapeAnnotationModule)},s.prototype.isFormDesignerModule=function(){return!!this.pdfViewer.formDesignerModule},s.prototype.isCalibrateAnnotationModule=function(){return!!this.pdfViewer.annotation&&!(!this.pdfViewer.annotation||!this.pdfViewer.annotation.measureAnnotationModule)},s.prototype.isStampAnnotationModule=function(){return!!this.pdfViewer.annotation&&!(!this.pdfViewer.annotation||!this.pdfViewer.annotation.stampAnnotationModule)},s.prototype.isInkAnnotationModule=function(){return!!this.pdfViewer.annotation&&!(!this.pdfViewer.annotation||!this.pdfViewer.annotation.inkAnnotationModule)},s.prototype.isCommentAnnotationModule=function(){return!!this.pdfViewer.annotation&&!(!this.pdfViewer.annotation||!this.pdfViewer.annotation.stickyNotesAnnotationModule)},s.prototype.isShapeBasedAnnotationsEnabled=function(){return!!(this.isShapeAnnotationModule()||this.isCalibrateAnnotationModule()||this.isStampAnnotationModule()||this.isCommentAnnotationModule()||this.isFormDesignerModule())},s.prototype.getMousePosition=function(e){var t,i,n,o=e.target.parentElement;if(-1!==e.type.indexOf("touch")){if(t=e,this.pdfViewer.annotation){var r=this.getElement("_pageDiv_"+this.pdfViewer.annotation.getEventPageNumber(e));if(r){var l=r.getBoundingClientRect();i=t.changedTouches[0].clientX-l.left,n=t.changedTouches[0].clientY-l.top}}}else if(e.target.classList.contains("e-pv-hyperlink"))i=e.offsetX+e.target.offsetLeft,n=e.offsetY+e.target.offsetTop;else if(e.target.classList.contains("e-pv-text")&&o){var d=o.getBoundingClientRect();i=e.clientX-d.left,n=e.clientY-d.top}else if(e.target&&e&&e.path&&o&&(o.classList.contains("foreign-object")||o.parentElement.classList.contains("foreign-object"))){if(d=void 0,"e-pv-page-div"===e.path[4].className)d=e.path[4].getBoundingClientRect();else for(var h=0;h<e.path.length;h++)if("e-pv-page-div"===e.path[h].className){d=e.path[h].getBoundingClientRect();break}i=e.clientX-d.left,n=e.clientY-d.top}else e.target&&o&&o.classList.contains("foreign-object")?(d=e.target.offsetParent.offsetParent.offsetParent.getBoundingClientRect(),i=e.clientX-d.left,n=e.clientY-d.top):(i=e.offsetX,n=e.offsetY);return{x:i,y:n}},s.prototype.getMouseEventArgs=function(e,t,i,n){var o,r;return t.position=e,n?o=ft(i,this,this.pdfViewer):"Drag"===this.action||"ConnectorSourceEnd"===this.action||"SegmentEnd"===this.action||"OrthoThumb"===this.action||"BezierSourceThumb"===this.action||"BezierTargetThumb"===this.action||"ConnectorTargetEnd"===this.action||-1!==this.action.indexOf("Rotate")||-1!==this.action.indexOf("Resize")?(o=this.pdfViewer.selectedItems,("Drag"===this.action&&o&&this.pdfViewer.selectedItems.annotations.length>0||"Drag"===this.action&&o&&this.pdfViewer.selectedItems.formFields.length>0)&&(o=ft(i,this,this.pdfViewer))):o=ft(i,this,this.pdfViewer),o&&(r=o.wrapper),n?(t.target=o,t.targetWrapper=r):(t.source=o,t.sourceWrapper=r),t.actualObject=this.eventArgs.actualObject,t},s.prototype.findToolToActivate=function(e,t){t={x:t.x/this.getZoomFactor(),y:t.y/this.getZoomFactor()};var i=this.pdfViewer.selectedItems.wrapper;if(i&&e){var n=i.bounds,o=new de(n.x,n.y,n.width,n.height);if("Line"===e.shapeAnnotationType||"LineWidthArrowHead"===e.shapeAnnotationType||"Distance"===e.shapeAnnotationType||"Polygon"===e.shapeAnnotationType){var r=this.pdfViewer.selectedItems.annotations[0];if(r)for(var l=0;l<r.vertexPoints.length;l++)if(kt(t,r.vertexPoints[l],10)&&0!==r.leaderHeight)return"ConnectorSegmentPoint_"+l}if("Distance"===e.shapeAnnotationType){var d=0,h=void 0;if(e&&e.wrapper)for(l=0;l<e.wrapper.children.length;l++){var p=se.findAngle(e.sourcePoint,e.targetPoint);if(e.wrapper.children[l].id.indexOf("leader")>-1){var c=e.wrapper.children[0].bounds.center;0===d?(h={x:e.sourcePoint.x,y:e.sourcePoint.y-e.leaderHeight},c=e.sourcePoint):(h={x:e.targetPoint.x,y:e.targetPoint.y-e.leaderHeight},c=e.targetPoint);var u=he();if(pe(u,p,c.x,c.y),kt(t,R(u,{x:h.x,y:h.y}),10))return"Leader"+d;d++}}}var g=this.pdfViewer.touchPadding/this.getZoomFactor(),v=he();pe(v,e.rotateAngle+i.parentTransform,i.offsetX,i.offsetY);var y=i.offsetX-i.pivot.x*i.actualSize.width,b=i.offsetY-i.pivot.y*i.actualSize.height,C={x:y+(.5===i.pivot.x?2*i.pivot.x:i.pivot.x)*i.actualSize.width/2,y:b-30/this.getZoomFactor()};if(C=R(v,C),"Stamp"===e.shapeAnnotationType&&kt(t,C,g))return"Rotate";if((o=this.inflate(g,o)).containsPoint(t,0)){var S=this.checkResizeHandles(this.pdfViewer,i,t,v,y,b);if(S)return S}return this.pdfViewer.selectedItems.annotations.indexOf(e)>-1||this.pdfViewer.selectedItems.formFields.indexOf(e)>-1&&this.pdfViewer.designerMode?"Drag":"Select"}return this.pdfViewer.tool||"Select"},s.prototype.inflate=function(e,t){return t.x-=e,t.y-=e,t.width+=2*e,t.height+=2*e,t},s.prototype.checkResizeHandles=function(e,t,i,n,o,r){var l;return l||(l=this.checkForResizeHandles(e,t,i,n,o,r)),l||null},s.prototype.checkForResizeHandles=function(e,t,i,n,o,r){var d=this.pdfViewer.touchPadding/1;(t.actualSize.width<40||t.actualSize.height<40)&&(d=d/2*this.getZoomFactor()/1);var p=!1,f=!1,c=!1,u=!1,m=this.pdfViewer.annotationSelectorSettings.resizerLocation;if((m<1||m>3)&&(m=3),this.pdfViewer.selectedItems.annotations[0]&&("Stamp"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType||"FreeText"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType||"Image"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType||"HandWrittenSignature"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType||"SignatureText"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType||"SignatureImage"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType)&&(p=!0),this.pdfViewer.selectedItems.annotations[0]&&"StickyNotes"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&(f=!0),this.pdfViewer.selectedItems.annotations[0]&&"Ink"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&(u=!0),this.pdfViewer.selectedItems.annotations[0]&&("Ellipse"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType||"Radius"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType||"Rectangle"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType)&&(c=!0),!f){if(u||p||this.pdfViewer.selectedItems.annotations[0]&&("HandWrittenSignature"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType||"SignatureText"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType||"SignatureImage"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType)||t.actualSize.width>=40&&t.actualSize.height>=40&&c&&(1===m||3===m)){if(kt(i,R(n,{x:o+t.actualSize.width,y:r+t.actualSize.height}),d))return"ResizeSouthEast";if(kt(i,R(n,{x:o,y:r+t.actualSize.height}),d))return"ResizeSouthWest";if(kt(i,R(n,{x:o+t.actualSize.width,y:r}),d))return"ResizeNorthEast";if(kt(i,R(n,{x:o,y:r}),d))return"ResizeNorthWest"}if(u||!c||c&&(2===m||3===m||!(t.actualSize.width>=40&&t.actualSize.height>=40)&&1===m)){if(kt(i,R(n,{x:o+t.actualSize.width,y:r+t.actualSize.height/2}),d)&&!p)return"ResizeEast";if(kt(i,R(n,{x:o,y:r+t.actualSize.height/2}),d)&&!p)return"ResizeWest";if(kt(i,R(n,{x:o+t.actualSize.width/2,y:r+t.actualSize.height}),d)&&!p)return"ResizeSouth";if(kt(i,R(n,{x:o+t.actualSize.width/2,y:r}),d)&&!p)return"ResizeNorth"}}return null},s.prototype.checkSignatureFormField=function(e){var t=!1;this.pdfViewer.formDesignerModule&&(e=e.split("_")[0]);var i=this.pdfViewer.nameTable[e];return i&&("SignatureField"===i.formFieldAnnotationType||"InitialField"===i.formFieldAnnotationType||"SignatureField"===i.annotName)&&(t=!0),t},s.prototype.diagramMouseMove=function(e){var t=this.pdfViewer.allowServerDataBinding;this.pdfViewer.enableServerDataBinding(!1),this.currentPosition=this.getMousePosition(e),this.pdfViewer.firePageMouseover(this.currentPosition.x,this.currentPosition.y),this.pdfViewer.annotation?this.activeElements.activePageID=this.pdfViewer.annotation.getEventPageNumber(e):this.pdfViewer.formDesignerModule&&(this.activeElements.activePageID=this.pdfViewer.formDesignerModule.getEventPageNumber(e));var i=ft(e,this,this.pdfViewer);(this.tool instanceof Fi||this.tool instanceof Ze)&&(i=this.pdfViewer.drawingObject);var n,o=this.pdfViewer.selectedItems.annotations.length>0&&this.checkSignatureFormField(this.pdfViewer.selectedItems.annotations[0].id);if(!1===se.equals(this.currentPosition,this.prevPosition)||this.inAction){if(!1===this.isMouseDown){this.eventArgs={},i&&(this.tool=this.getTool(this.action),i.wrapper&&i.wrapper.children[0]&&(n=i));var l=e.target;this.action=this.findToolToActivate(i,this.currentPosition),i&&i.annotationSettings&&i.annotationSettings.isLock&&("Select"===this.action&&(this.pdfViewer.annotationModule.checkAllowedInteractions("Select",i)||(this.action="")),"Drag"===this.action&&(this.pdfViewer.annotationModule.checkAllowedInteractions("Move",i)||(this.action="Select")),("ResizeSouthEast"===this.action||"ResizeNorthEast"===this.action||"ResizeNorthWest"===this.action||"ResizeSouthWest"===this.action||"ResizeNorth"===this.action||"ResizeWest"===this.action||"ResizeEast"===this.action||"ResizeSouth"===this.action||this.action.includes("ConnectorSegmentPoint")||this.action.includes("Leader"))&&(this.pdfViewer.annotationModule.checkAllowedInteractions("Resize",i)||(this.action="Select"))),!this.pdfViewer.designerMode&&(!(0,a.le)(n)&&!(0,a.le)(n.formFieldAnnotationType)||o)&&("ResizeSouthEast"===this.action||"ResizeNorthEast"===this.action||"ResizeNorthWest"===this.action||"ResizeSouthWest"===this.action||"ResizeNorth"===this.action||"Drag"===this.action||"ResizeWest"===this.action||"ResizeEast"===this.action||"ResizeSouth"===this.action||this.action.includes("ConnectorSegmentPoint")||this.action.includes("Leader"))&&(this.action=""),this.tool=this.getTool(this.action),this.setCursor(l,e),this.pdfViewer.linkAnnotationModule&&this.pdfViewer.linkAnnotationModule.disableHyperlinkNavigationUnderObjects(l,e,this)}else!this.tool&&this.action&&"Rotate"===this.action&&(this.tool=this.getTool(this.action),e.target&&this.setCursor(e.target,e)),!this.pdfViewer.designerMode&&(!(0,a.le)(n)&&!(0,a.le)(n.formFieldAnnotationType)||o)&&("ResizeSouthEast"===this.action||"ResizeNorthEast"===this.action||"ResizeNorthWest"===this.action||"ResizeSouthWest"===this.action||"ResizeNorth"===this.action||"Drag"===this.action||"ResizeWest"===this.action||"ResizeEast"===this.action||"ResizeSouth"===this.action||this.action.includes("ConnectorSegmentPoint")||this.action.includes("Leader"))&&(this.action="",this.tool=null),this.eventArgs&&this.eventArgs.source?this.updateDefaultCursor(this.eventArgs.source,l=e.target,e):this.setCursor(e.target,e),this.diagramMouseActionHelper(e),this.tool&&(i&&"FreeText"===i.shapeAnnotationType&&this.pdfViewer.freeTextSettings.allowEditTextOnly&&"Ink"!==this.action&&this.eventArgs.source&&"FreeText"===this.eventArgs.source.shapeAnnotationType&&((l=event.target).style.cursor="default",this.tool=null),null!=this.tool&&(this.eventArgs.info={ctrlKey:e.ctrlKey,shiftKey:e.shiftKey},this.tool.mouseMove(this.eventArgs)));if(this.pdfViewer.drawingObject&&this.pdfViewer.drawingObject.formFieldAnnotationType&&"Drag"!==this.action&&!(this.tool instanceof Bs)&&(this.tool=this.getTool(this.action),this.tool instanceof Fi)){var p=this.pdfViewer.drawingObject,f=this.pdfViewer.formDesignerModule.updateFormFieldInitialSize(p,p.formFieldAnnotationType),c=this.pageContainer.firstElementChild.clientWidth-f.width,u=this.pageContainer.firstElementChild.clientHeight-f.height;if(this.pdfViewer.formDesignerModule&&p.formFieldAnnotationType&&this.currentPosition.x<c&&this.currentPosition.y<u)if(m=document.getElementById("FormField_helper_html_element")){if(m){var g=m.parentElement.id.split("_text_")[1]||m.parentElement.id.split("_textLayer_")[1]||m.parentElement.id.split("_annotationCanvas_")[1]||m.parentElement.id.split("_pageDiv_")[1];if(parseInt(g)!==this.activeElements.activePageID)m.remove("FormField_helper_html_element");else{var v=this.getMousePosition(event);"Checkbox"===p.formFieldAnnotationType?m.firstElementChild.firstElementChild.lastElementChild.style.visibility="visible":"SignatureField"===p.formFieldAnnotationType||"InitialField"===p.formFieldAnnotationType?(m.firstElementChild.firstElementChild.style.visibility="visible",m.firstElementChild.lastElementChild.style.visibility="visible"):m.firstElementChild.firstElementChild.style.visibility="visible",m.setAttribute("style","height:"+f.height+"px; width:"+f.width+"px;left:"+v.x+"px; top:"+v.y+"px;position:absolute;opacity: 0.5;")}}}else this.pdfViewer.formDesignerModule.drawHelper(p.formFieldAnnotationType,p,e);else if(this.currentPosition.x>c||this.currentPosition.y>u){var m;(m=document.getElementById("FormField_helper_html_element"))?m&&(v=this.getMousePosition(event),m.setAttribute("style","height:"+f.height+"px; width:"+f.width+"px;left:"+v.x+"px; top:"+v.y+"px;position:absolute;opacity: 0.5;"),"Checkbox"===p.formFieldAnnotationType?m.firstElementChild.firstElementChild.lastElementChild.style.visibility="hidden":"SignatureField"===p.formFieldAnnotationType||"InitialField"===p.formFieldAnnotationType?(m.firstElementChild.firstElementChild.style.visibility="hidden",m.firstElementChild.lastElementChild.style.visibility="hidden"):m.firstElementChild.firstElementChild.style.visibility="hidden"):this.pdfViewer.formDesignerModule.drawHelper(p.formFieldAnnotationType,p,e)}}this.prevPosition=this.currentPosition}this.pdfViewer.enableServerDataBinding(t,!0)},s.prototype.updateDefaultCursor=function(e,t,i){e&&void 0!==e.pageIndex&&e.pageIndex!==this.activeElements.activePageID&&t?t.style.cursor=this.isPanMode?"grab":"default":this.setCursor(t,i)},s.prototype.diagramMouseLeave=function(e){this.currentPosition=this.getMousePosition(e),this.pdfViewer.annotation&&(this.activeElements.activePageID=this.pdfViewer.annotation.getEventPageNumber(e));var t=ft(e,this,this.pdfViewer),i=!1;(!1===se.equals(this.currentPosition,this.prevPosition)||this.inAction)&&(!1===this.isMouseDown||i?(this.eventArgs={},t&&(i=!1)):(this.diagramMouseActionHelper(e),this.tool&&"Drag"!==this.action&&"Stamp"!==this.pdfViewer.tool&&this.tool.currentElement&&"Stamp"!==this.tool.currentElement.shapeAnnotationType&&(this.tool.mouseLeave(this.eventArgs),this.tool=null,this.pdfViewer.annotation&&this.pdfViewer.annotationModule.renderAnnotations(this.previousPage,null,null,null))),this.prevPosition=this.currentPosition)},s.prototype.diagramMouseActionHelper=function(e){this.eventArgs.position=this.currentPosition,"Drag"===this.action&&this.eventArgs.source instanceof an&&this.getMouseEventArgs(this.currentPosition,this.eventArgs,e),this.getMouseEventArgs(this.currentPosition,this.eventArgs,e,this.eventArgs.source),this.inAction=!0,this.initialEventArgs=null},s.prototype.setCursor=function(e,t){var n,i=this.pdfViewer.annotationModule?this.pdfViewer.annotationModule.freeTextAnnotationModule:null;if(this.tool instanceof Bs)"ResizeNorthWest"===this.tool.corner?(n=this.setResizerCursorType(),e.style.cursor=(0,a.le)(n)?"nw-resize":n):"ResizeNorthEast"===this.tool.corner?(n=this.setResizerCursorType(),e.style.cursor=(0,a.le)(n)?"ne-resize":n):"ResizeSouthWest"===this.tool.corner?(n=this.setResizerCursorType(),e.style.cursor=(0,a.le)(n)?"sw-resize":n):"ResizeSouthEast"===this.tool.corner?(n=this.setResizerCursorType(),e.style.cursor=(0,a.le)(n)?"se-resize":n):"ResizeNorth"===this.tool.corner?(n=this.setResizerCursorType(),e.style.cursor=(0,a.le)(n)?"n-resize":n):"ResizeWest"===this.tool.corner?(n=this.setResizerCursorType(),e.style.cursor=(0,a.le)(n)?"w-resize":n):"ResizeEast"===this.tool.corner?(n=this.setResizerCursorType(),e.style.cursor=(0,a.le)(n)?"e-resize":n):"ResizeSouth"===this.tool.corner&&(n=this.setResizerCursorType(),e.style.cursor=(0,a.le)(n)?"s-resize":n);else if(this.isCommentIconAdded&&this.isAddComment)e.style.cursor="crosshair";else if(this.pdfViewer.enableHandwrittenSignature&&this.isNewSignatureAdded&&this.tool instanceof wo)e.style.cursor="crosshair";else if(this.tool instanceof yo)e.style.cursor="move";else if(this.tool instanceof Fi||this.tool instanceof Ze||this.tool instanceof Xt||i&&i.isNewAddedAnnot||this.tool instanceof Ru)e.style.cursor="crosshair";else if(this.tool instanceof Da)this.tool.endPoint&&this.tool.endPoint.indexOf("Leader0")?(n=this.setResizerCursorType(),e.style.cursor=(0,a.le)(n)?"nw-resize":n):this.tool.endPoint&&this.tool.endPoint.indexOf("Leader1")?(n=this.setResizerCursorType(),e.style.cursor=(0,a.le)(n)?"ne-resize":n):this.tool.endPoint&&this.tool.endPoint.indexOf("ConnectorSegmentPoint")&&(e.style.cursor="sw-resize");else if(e.classList.contains("e-pv-text"))e.style.cursor="text";else if(e.classList.contains("e-pv-hyperlink"))e.style.cursor="pointer";else if(this.isPanMode){if(this.isViewerMouseDown&&"mousemove"===t.type)e.style.cursor="grabbing";else if((o=ft(t,this,this.pdfViewer))&&"mousemove"===t.type){e.style.cursor="pointer";var r=o,l=this.getMousePosition(t),h={left:(d=this.relativePosition(t)).x,top:d.y},p={left:l.x,top:l.y},f={opacity:r.opacity,fillColor:r.fillColor,strokeColor:r.strokeColor,thicknes:r.thickness,author:r.author,subject:r.subject,modifiedDate:r.modifiedDate};this.isMousedOver=!0;var c=this.checkSignatureFormField(r.id);r.formFieldAnnotationType?(this.isFormFieldMousedOver=!0,this.pdfViewer.fireFormFieldMouseoverEvent("formFieldMouseover",{value:r.value,fontFamily:r.fontFamily,fontSize:r.fontSize,fontStyle:r.fontStyle,color:r.color,backgroundColor:r.backgroundColor,borderColor:r.borderColor,thickness:r.thickness,alignment:r.alignment,isReadonly:r.isReadonly,visibility:r.visibility,maxLength:r.maxLength,isRequired:r.isRequired,isPrint:r.isPrint,rotation:r.rotateAngle,tooltip:r.tooltip,options:r.options,isChecked:r.isChecked,isSelected:r.isSelected},r.pageIndex,d.x,d.y,l.x,l.y)):c||this.pdfViewer.fireAnnotationMouseover(r.annotName,r.pageIndex,r.shapeAnnotationType,r.bounds,f,p,h)}else if(e.style.cursor="grab",this.isMousedOver){var m=void 0;m=this.pdfViewer.formDesignerModule?this.pdfViewer.formDesignerModule.getEventPageNumber(t):this.pdfViewer.annotation.getEventPageNumber(t),this.isFormFieldMousedOver?this.pdfViewer.fireFormFieldMouseLeaveEvent("formFieldMouseLeave",null,m):this.pdfViewer.fireAnnotationMouseLeave(m),this.isMousedOver=!1,this.isFormFieldMousedOver=!1}}else{var o;if((o=ft(t,this,this.pdfViewer))&&0===this.pdfViewer.selectedItems.annotations.length&&"mousemove"===t.type){var g=this.pdfViewer.nameTable[(r=o).id];if("HandWrittenSignature"!==g.shapeAnnotationType&&"Ink"!==g.shapeAnnotationType&&g.annotationSettings&&void 0!==g.annotationSettings.isLock&&(g.annotationSettings.isLock=JSON.parse(g.annotationSettings.isLock)),e.style.cursor=g.annotationSettings&&g.annotationSettings.isLock?"default":"pointer",l=this.getMousePosition(t),h={left:(d=this.relativePosition(t)).x,top:d.y},p={left:l.x,top:l.y},f={opacity:r.opacity,fillColor:r.fillColor,strokeColor:r.strokeColor,thicknes:r.thickness,author:r.author,subject:r.subject,modifiedDate:r.modifiedDate},this.isMousedOver=!0,c=this.checkSignatureFormField(r.id),r.formFieldAnnotationType){this.isFormFieldMousedOver=!0;var v={value:r.value,fontFamily:r.fontFamily,fontSize:r.fontSize,fontStyle:r.fontStyle,color:r.color,backgroundColor:r.backgroundColor,borderColor:r.borderColor,thickness:r.thickness,alignment:r.alignment,isReadonly:r.isReadonly,visibility:r.visibility,maxLength:r.maxLength,isRequired:r.isRequired,isPrint:r.isPrint,rotation:r.rotateAngle,tooltip:r.tooltip,options:r.options,isChecked:r.isChecked,isSelected:r.isSelected};this.fromTarget=r,this.pdfViewer.fireFormFieldMouseoverEvent("formFieldMouseover",v,r.pageIndex,d.x,d.y,l.x,l.y)}else c||this.pdfViewer.fireAnnotationMouseover(r.annotName,r.pageIndex,r.shapeAnnotationType,r.bounds,f,p,h)}else if(!this.pdfViewer.formDesignerModule&&t.target.classList.contains("e-pdfviewer-formFields")){m=this.pdfViewer.annotation.getEventPageNumber(t),l=this.getMousePosition(t),h={left:(d=this.relativePosition(t)).x,top:d.y},p={left:l.x,top:l.y};for(var d,y=this.getItemFromSessionStorage("_formfields"),b=JSON.parse(y),C=0;C<b.length;C++)if(b[C].FieldName===t.target.name)var S={name:b[C].FieldName};this.isMousedOver=!0,this.isFormFieldMousedOver=!0,this.pdfViewer.fireFormFieldMouseoverEvent("formFieldMouseover",S,m,d.x,d.y,l.x,l.y)}else this.isMousedOver&&(m=void 0,m=this.pdfViewer.formDesignerModule?this.pdfViewer.formDesignerModule.getEventPageNumber(t):this.pdfViewer.annotation.getEventPageNumber(t),this.isFormFieldMousedOver?this.pdfViewer.fireFormFieldMouseLeaveEvent("formFieldMouseLeave",this.fromTarget?{name:this.fromTarget.name,id:this.fromTarget.id,value:this.fromTarget.value,fontFamily:this.fromTarget.fontFamily,fontSize:this.fromTarget.fontSize,fontStyle:this.fromTarget.fontStyle,color:this.fromTarget.color,backgroundColor:this.fromTarget.backgroundColor,borderColor:this.fromTarget.borderColor,thickness:this.fromTarget.thickness,alignment:this.fromTarget.alignment,isReadonly:this.fromTarget.isReadonly,visibility:this.fromTarget.visibility,maxLength:this.fromTarget.maxLength,isRequired:this.fromTarget.isRequired,isPrint:this.fromTarget.isPrint,rotation:this.fromTarget.rotateAngle,tooltip:this.fromTarget.tooltip,options:this.fromTarget.options,isChecked:this.fromTarget.isChecked,isSelected:this.fromTarget.isSelected}:null,m):this.pdfViewer.fireAnnotationMouseLeave(m),this.isMousedOver=!1,this.isFormFieldMousedOver=!1,e.style.cursor="default"),e.style.cursor=o&&1===this.pdfViewer.selectedItems.annotations.length&&"mousemove"===t.type?"pointer":"default"}},s.prototype.setResizerCursorType=function(){var e;return this.pdfViewer.selectedItems.annotations[0]&&(0,a.le)(this.pdfViewer.selectedItems.annotations[0].annotationSelectorSettings.resizerCursorType)?"FreeText"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType?e=(0,a.le)(this.pdfViewer.freeTextSettings.annotationSelectorSettings)?null:this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerCursorType:"Stamp"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType?e=(0,a.le)(this.pdfViewer.stampSettings.annotationSelectorSettings)?null:this.pdfViewer.stampSettings.annotationSelectorSettings.resizerCursorType:"HandWrittenSignature"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType||"SignatureText"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType||"SignatureImage"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType?e=(0,a.le)(this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings)?null:this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerCursorType:"Ink"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType?e=(0,a.le)(this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings)?null:this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerCursorType:this.pdfViewer.selectedItems.annotations[0].measureType?this.pdfViewer.selectedItems.annotations[0].measureType&&("Distance calculation"===this.pdfViewer.selectedItems.annotations[0].subject?e=(0,a.le)(this.pdfViewer.distanceSettings.annotationSelectorSettings)?null:this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerCursorType:"Perimeter calculation"===this.pdfViewer.selectedItems.annotations[0].subject?e=(0,a.le)(this.pdfViewer.perimeterSettings.annotationSelectorSettings)?null:this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerCursorType:"Area calculation"===this.pdfViewer.selectedItems.annotations[0].subject?e=(0,a.le)(this.pdfViewer.areaSettings.annotationSelectorSettings)?null:this.pdfViewer.areaSettings.annotationSelectorSettings.resizerCursorType:"Radius calculation"===this.pdfViewer.selectedItems.annotations[0].subject?e=(0,a.le)(this.pdfViewer.radiusSettings.annotationSelectorSettings)?null:this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerCursorType:"Volume calculation"===this.pdfViewer.selectedItems.annotations[0].subject&&(e=(0,a.le)(this.pdfViewer.volumeSettings.annotationSelectorSettings)?null:this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerCursorType)):"Line"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType?e=(0,a.le)(this.pdfViewer.lineSettings.annotationSelectorSettings)?null:this.pdfViewer.lineSettings.annotationSelectorSettings.resizerCursorType:"LineWidthArrowHead"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType?e=(0,a.le)(this.pdfViewer.arrowSettings.annotationSelectorSettings)?null:this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerCursorType:"Rectangle"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType?e=(0,a.le)(this.pdfViewer.rectangleSettings.annotationSelectorSettings)?null:this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerCursorType:"Ellipse"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType?e=(0,a.le)(this.pdfViewer.circleSettings.annotationSelectorSettings)?null:this.pdfViewer.circleSettings.annotationSelectorSettings.resizerCursorType:"Polygon"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&(e=(0,a.le)(this.pdfViewer.polygonSettings.annotationSelectorSettings)?null:this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerCursorType):this.pdfViewer.selectedItems.annotations[0]&&(e=this.pdfViewer.selectedItems.annotations[0].annotationSelectorSettings.resizerCursorType),e||(e=this.pdfViewer.annotationSelectorSettings.resizerCursorType),e},s.prototype.getTool=function(e){switch(e){case"Select":return new Cb(this.pdfViewer,this);case"Drag":return new yo(this.pdfViewer,this);case"ResizeSouthEast":case"ResizeSouthWest":case"ResizeNorthEast":case"ResizeNorthWest":case"ResizeSouth":case"ResizeNorth":case"ResizeWest":case"ResizeEast":return new Bs(this.pdfViewer,this,e);case"ConnectorSourceEnd":case"ConnectorTargetEnd":case"Leader":case"ConnectorSegmentPoint":return new Da(this.pdfViewer,this,e);case"DrawTool":return new Fi(this.pdfViewer,this,this.pdfViewer.drawingObject);case"Polygon":return new Xt(this.pdfViewer,this,"Polygon");case"Distance":return new Ze(this.pdfViewer,this,"Leader1",void 0);case"Line":return new Ze(this.pdfViewer,this,"ConnectorSegmentPoint_1",this.pdfViewer.drawingObject);case"Perimeter":return new Xt(this.pdfViewer,this,"Perimeter");case"Rotate":return new xb(this.pdfViewer,this);case"Stamp":return new wo(this.pdfViewer,this);case"Ink":return new Ru(this.pdfViewer,this,this.pdfViewer.drawingObject)}return e.indexOf("ConnectorSegmentPoint")>-1||e.indexOf("Leader")>-1?new Da(this.pdfViewer,this,e):null},s.prototype.diagramMouseUp=function(e){var t=this.pdfViewer.allowServerDataBinding;this.pdfViewer.enableServerDataBinding(!1);var n=this.action.toLowerCase().includes("resize"),o="Drag"===this.action||n||(this.tool instanceof Fi||this.tool instanceof Ze||this.tool instanceof Xt)&&this.tool.dragging&&this.tool.drawingObject;if(this.tool){if(!this.inAction&&3!==e.which&&"Drag"===this.action){this.action="Select";var r=ft(e,this,this.pdfViewer)}this.tool instanceof Xt||this.tool instanceof Ze||this.tool instanceof Fi||(this.inAction=!1,this.isMouseDown=!1),this.currentPosition=this.getMousePosition(e),this.tool&&(this.eventArgs.position=this.currentPosition,this.getMouseEventArgs(this.currentPosition,this.eventArgs,e,this.eventArgs.source),this.isMetaKey(e),this.eventArgs.info={ctrlKey:e.ctrlKey,shiftKey:e.shiftKey},this.eventArgs.clickCount=e.detail,this.tool.mouseUp(this.eventArgs),this.isAnnotationMouseDown=!1,this.isFormFieldMouseDown=!1,(this.tool instanceof Fi||this.tool instanceof Ze||this.tool instanceof Xt)&&!this.tool.dragging&&(this.inAction=!1,this.isMouseDown=!1),o&&(r=ft(e,this,this.pdfViewer),this.isShapeAnnotationModule()&&this.isCalibrateAnnotationModule()&&this.pdfViewer.annotation.onShapesMouseup(r,e)),this.isAnnotationDrawn=!1)}e.cancelable&&this.skipPreventDefault(e.target)&&(!a.AR.isDevice||this.pdfViewer.enableDesktopMode)&&e.preventDefault(),this.eventArgs={},this.pdfViewer.enableServerDataBinding(t,!0)},s.prototype.skipPreventDefault=function(e){var t=!1,i=!1;return this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.freeTextAnnotationModule&&this.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus&&(i=!0),e.parentElement&&"foreign-object"!==e.parentElement.className&&!e.classList.contains("e-pv-radio-btn")&&!e.classList.contains("e-pv-radiobtn-span")&&!e.classList.contains("e-pv-checkbox-div")&&!e.classList.contains("e-pdfviewer-formFields")&&!e.classList.contains("e-pdfviewer-ListBox")&&!e.classList.contains("e-pdfviewer-signatureformfields")&&!("free-text-input"===e.className&&"TEXTAREA"===e.tagName)&&!i&&"e-pv-hyperlink"!==e.className&&(t=!0),t},s.prototype.isMetaKey=function(e){return navigator.platform.match("Mac")?e.metaKey:e.ctrlKey},s.prototype.diagramMouseDown=function(e){var t=this;this.tool instanceof yo&&!(this.tool instanceof wo)&&this.tool.inAction&&(this.diagramMouseUp(e),1===e.which&&(this.preventContextmenu=!0,setTimeout(function(){t.preventContextmenu=!1},200)));var n,i=this.pdfViewer.allowServerDataBinding;this.pdfViewer.enableServerDataBinding(!1),n=e.touches,this.isMouseDown=!0,this.isAnnotationAdded=!1,this.currentPosition=this.prevPosition=this.getMousePosition(e),this.eventArgs={};var o=!1;"Stamp"===this.pdfViewer.tool&&(this.pdfViewer.tool="",o=!0),a.AR.isDevice&&this.pdfViewer.annotation&&(this.activeElements.activePageID=this.pdfViewer.annotation.getEventPageNumber(e));var r=ft(e,this,this.pdfViewer);if(a.AR.isDevice&&!this.pdfViewer.enableDesktopMode&&r&&!(r instanceof Aa)&&e.preventDefault(),this.pdfViewer.annotation&&this.pdfViewer.enableStampAnnotations){var l=this.pdfViewer.annotationModule.stampAnnotationModule;if(l&&l.isNewStampAnnot){var d=r;if(!d&&this.pdfViewer.selectedItems.annotations[0]&&(d=this.pdfViewer.selectedItems.annotations[0]),d){if(this.isViewerMouseDown=!1,d.opacity=this.pdfViewer.stampSettings.opacity,this.isNewStamp=!0,this.pdfViewer.nodePropertyChange(d,{opacity:"Image"===d.shapeAnnotationType?this.pdfViewer.customStampSettings.opacity:this.pdfViewer.stampSettings.opacity}),this.pdfViewer.annotation.stampAnnotationModule.isStampAddMode=!1,"Image"===d.shapeAnnotationType&&!this.isAlreadyAdded){this.stampAdded=!0;var p=d.id;l.currentStampAnnotation&&l.currentStampAnnotation.signatureName&&(p=l.currentStampAnnotation.signatureName);for(var f=!1,c=0;c<this.customStampCollection.length;c++)if(this.customStampCollection[c].customStampName===p){f=!0;break}f&&(p=d.id),this.customStampCollection.push({customStampName:p=l.customStampName?l.customStampName:l.currentStampAnnotation.signatureName,customStampImageSource:d.data}),(0,a.xr)()&&this.pdfViewer._dotnetInstance.invokeMethodAsync("UpdateCustomStampCollection",p,d.data)}this.pdfViewer.customStampSettings.enableCustomStamp&&this.pdfViewer.customStampSettings.isAddToMenu&&(this.stampAdded=!0),this.isAlreadyAdded=!1,l.updateDeleteItems(d.pageIndex,d,d.opacity),l.resetAnnotation(),l.isNewStampAnnot=!1}}}if(this.isNewSignatureAdded){this.signatureCount++,this.currentSignatureAnnot=null;var u=r;(0,a.le)(u)&&this.pdfViewer.selectedItems.annotations[0]&&(u=this.pdfViewer.selectedItems.annotations[0]),u&&(this.signatureAdded=!0,this.signatureModule.storeSignatureData(u.pageIndex,u),this.pdfViewer.fireSignatureAdd(u.pageIndex,u.signatureName,u.shapeAnnotationType,{left:u.bounds.x,top:u.bounds.y,width:u.bounds.width,height:u.bounds.height},u.opacity,u.strokeColor,u.thickness,this.signatureModule.saveImageString)),this.isNewSignatureAdded=!1}if(this.pdfViewer.annotationModule){var g=this.pdfViewer.annotationModule.freeTextAnnotationModule;if(!0===g.isNewFreeTextAnnot){var b=void 0;if(e.target&&(e.target.id.indexOf("_text")>-1||e.target.id.indexOf("_annotationCanvas")>-1||e.target.classList.contains("e-pv-hyperlink"))&&this.pdfViewer.annotation){var C=this.pdfViewer.annotation.getEventPageNumber(e),S=document.getElementById(this.pdfViewer.element.id+"_annotationCanvas_"+C);if(S){var x=S.getBoundingClientRect();b=new de((x.x?x.x:x.left)+5,(x.y?x.y:x.top)+5,x.width-10,x.height-10)}}if(n&&(this.mouseX=n[0].clientX,this.mouseY=n[0].clientY),b&&b.containsPoint({x:this.mouseX,y:this.mouseY})&&g.isNewAddedAnnot){if(C=this.pdfViewer.annotation.getEventPageNumber(e),!this.pdfViewer.freeTextSettings.enableAutoFit){var k=this.getZoomFactor(),A=this.currentPosition.x+g.defautWidth*k,M=this.getPageWidth(C);A>=M&&(this.currentPosition.x=M-g.defautWidth*k,this.currentPosition.x<=0&&(this.currentPosition.x=5),g.defautWidth=g.defautWidth*k>=M?M-10:g.defautWidth)}if(g.addInuptElemet(this.currentPosition,null,C),this.pdfViewer.toolbar&&this.pdfViewer.toolbar.annotationToolbarModule){var I=this.pdfViewer.toolbar.annotationToolbarModule;(0,a.xr)()||I.primaryToolbar.deSelectItem(I.freeTextEditItem)}e.preventDefault(),g.isNewAddedAnnot=!1}}}(!this.tool||this.tool&&!this.tool.drawingObject)&&(o?(this.action="Select",this.tool=this.getTool(this.action)):(this.action=this.findToolToActivate(r,this.currentPosition),r&&r.annotationSettings&&r.annotationSettings.isLock&&("Select"===this.action&&(this.pdfViewer.annotationModule.checkAllowedInteractions("Select",r)||(this.action="")),"Drag"===this.action&&(this.pdfViewer.annotationModule.checkAllowedInteractions("Move",r)||(this.action="Select")),"Rotate"===this.action&&(this.action="Select"),("ResizeSouthEast"===this.action||"ResizeNorthEast"===this.action||"ResizeNorthWest"===this.action||"ResizeSouthWest"===this.action||"ResizeSouth"===this.action||"ResizeNorth"===this.action||"ResizeWest"===this.action||"ResizeEast"===this.action||this.action.includes("ConnectorSegmentPoint")||this.action.includes("Leader"))&&(this.pdfViewer.annotationModule.checkAllowedInteractions("Resize",r)||(this.action="Select"))),this.tool=this.getTool(this.action),this.tool||(this.action=this.pdfViewer.tool||"Select",this.tool=this.getTool(this.action)))),this.getMouseEventArgs(this.currentPosition,this.eventArgs,e),this.eventArgs.position=this.currentPosition,this.tool&&(this.isAnnotationMouseDown=!1,this.isFormFieldMouseDown=!1,this.isAnnotationMouseMove=!1,this.isFormFieldMouseMove=!1,this.tool.mouseDown(this.eventArgs),this.isAnnotationDrawn=!0,this.signatureAdded=!0),this.pdfViewer.annotation&&this.pdfViewer.annotation.onAnnotationMouseDown(),this.pdfViewer.selectedItems&&1===this.pdfViewer.selectedItems.formFields.length&&!(0,a.le)(this.pdfViewer.toolbar)&&!(0,a.le)(this.pdfViewer.toolbar.formDesignerToolbarModule)&&this.pdfViewer.toolbar.formDesignerToolbarModule.showHideDeleteIcon(!0);var N=1===this.pdfViewer.selectedItems.annotations.length?this.pdfViewer.nameTable[this.pdfViewer.selectedItems.annotations[0].id.split("_")[0]+"_content"]:null;if(N||(N=1===this.pdfViewer.selectedItems.annotations.length?this.pdfViewer.nameTable[this.pdfViewer.selectedItems.annotations[0].id]:null),this.eventArgs&&this.eventArgs.source&&(this.eventArgs.source.formFieldAnnotationType||N)&&!this.pdfViewer.designerMode){var D=void 0;if((D=N?this.pdfViewer.nameTable[this.pdfViewer.selectedItems.annotations[0].id.split("_")[0]]:this.eventArgs.source)||(D=this.pdfViewer.formFieldCollections[this.pdfViewer.formFieldCollections.findIndex(function(H){return H.id===N.id})]),D){var Z={name:D.name,id:D.id,fontFamily:D.fontFamily,fontSize:D.fontSize,fontStyle:D.fontStyle,color:D.color,value:D.value,type:D.formFieldAnnotationType?D.formFieldAnnotationType:D.type,backgroundColor:D.backgroundColor,alignment:D.alignment},O=document.getElementById(D.id);(O=O||(document.getElementById(D.id+"_content_html_element")?document.getElementById(D.id+"_content_html_element").children[0].children[0]:null))&&(this.currentTarget=O,this.pdfViewer.fireFormFieldClickEvent("formFieldClicked",Z,!1,0===e.button))}}this.initialEventArgs={source:this.eventArgs.source,sourceWrapper:this.eventArgs.sourceWrapper},this.initialEventArgs.position=this.currentPosition,this.initialEventArgs.info=this.eventArgs.info,this.pdfViewer.enableServerDataBinding(i,!0)},s.prototype.exportAnnotationsAsObject=function(){var e=this;if(this.pdfViewer.annotationModule&&this.updateExportItem())return new Promise(function(i,n){e.createRequestForExportAnnotations(!0,Lt.Json).then(function(o){i(o)})})},s.prototype.getItemFromSessionStorage=function(e){return this.isStorageExceed?this.formFieldStorage[this.documentId+e]:window.sessionStorage.getItem(this.documentId+e)},s.prototype.setStyleToTextDiv=function(e,t,i,n,o,r,l){var d=this.getZoomFactor();l&&(d=1,e.style.position="absolute"),e.style.left=t*d+"px",e.style.top=i*d+"px",e.style.height=r*d+"px",e.style.width=o*d+"px",e.style.margin="0px",n>0&&(e.style.fontSize=n*d+"px")},s.prototype.ConvertPointToPixel=function(e){return e*(96/72)},s.prototype.setItemInSessionStorage=function(e,t){Math.round(JSON.stringify(e).length/1024)>4500&&(this.isStorageExceed=!0,this.pdfViewer.formFieldsModule&&this.pdfViewer.formFieldsModule.clearFormFieldStorage()),this.isStorageExceed?this.formFieldStorage[this.documentId+t]=JSON.stringify(e):window.sessionStorage.setItem(this.documentId+t,JSON.stringify(e))},s.prototype.exportFormFieldsAsObject=function(){var e=this;if(this.pdfViewer.formFieldsModule)return new Promise(function(t,i){e.createRequestForExportFormfields(!0).then(function(n){t(n)})})},s.prototype.importAnnotations=function(e,t,i){this.pdfViewer.annotationModule&&this.createRequestForImportAnnotations(e,t,i)},s.prototype.exportAnnotations=function(e){this.pdfViewer.annotationModule&&this.updateExportItem()&&this.createRequestForExportAnnotations(!1,e)},s.prototype.createRequestForExportAnnotations=function(e,t,i){var o,n=this;o=this;var r=new Promise(function(l,d){var h;"Json"===t?(h={hashId:o.hashId,action:"ExportAnnotations",pdfAnnotation:o.createAnnotationJsonData(),elementId:o.pdfViewer.element.id,annotationDataFormat:t,uniqueId:o.documentId},o.pdfViewer.fireExportStart(h.pdfAnnotation)):((h=n.constructJsonDownload()).annotationDataFormat=t,h.action="ExportAnnotations",o.pdfViewer.fireExportStart(h)),o.jsonDocumentId&&(h.document=o.jsonDocumentId);var p=o.pdfViewer.serviceUrl+"/"+o.pdfViewer.serverActionSettings.exportAnnotations;o.exportAnnotationRequestHandler=new Ue(n.pdfViewer),o.exportAnnotationRequestHandler.url=p,o.exportAnnotationRequestHandler.mode=!0,o.exportAnnotationRequestHandler.responseType="text",o.exportAnnotationRequestHandler.send(h),o.exportAnnotationRequestHandler.onSuccess=function(f){var c=f.data;if(c){if("object"==typeof c&&(c=JSON.parse(c)),c){var u=o.pdfViewer.fireAjaxRequestSuccess(o.pdfViewer.serverActionSettings.exportAnnotations,c);if(e||i&&!(0,a.xr)())if(c.split("base64,")[1]){var m=c,g=atob(c.split(",")[1]);e&&(m="Json"===h.annotationDataFormat?JSON.parse(g):g),o.pdfViewer.fireExportSuccess(m,null!==o.pdfViewer.exportAnnotationFileName?o.pdfViewer.exportAnnotationFileName:o.pdfViewer.fileName),o.updateDocumentAnnotationCollections(),l(i?c:g)}else o.pdfViewer.fireExportFailed(h.pdfAnnotation,o.pdfViewer.localeObj.getConstant("Export Failed"));else if("Json"===t)if(c.split("base64,")[1]){if(u)return c;var v=o.createBlobUrl(c.split("base64,")[1],"application/json");a.AR.isIE||"edge"===a.AR.info.name?null!==o.pdfViewer.exportAnnotationFileName?window.navigator.msSaveOrOpenBlob(v,o.pdfViewer.exportAnnotationFileName.split(".")[0]+".json"):window.navigator.msSaveOrOpenBlob(v,o.pdfViewer.fileName.split(".")[0]+".json"):o.downloadExportAnnotationJson(v),o.updateDocumentAnnotationCollections()}else(0,a.xr)()?this.pdfViewer._dotnetInstance.invokeMethodAsync("GetLocaleText","PdfViewer_ExportFailed").then(function(S){o.openImportExportNotificationPopup(S)}):o.openImportExportNotificationPopup(o.pdfViewer.localeObj.getConstant("Export Failed")),o.pdfViewer.fireExportFailed(h.pdfAnnotation,o.pdfViewer.localeObj.getConstant("Export Failed"));else if(c.split("base64,")[1]){if(u)return c;v=o.createBlobUrl(c.split("base64,")[1],"application/vnd.adobe.xfdf"),a.AR.isIE||"edge"===a.AR.info.name?window.navigator.msSaveOrOpenBlob(v,o.pdfViewer.fileName.split(".")[0]+".xfdf"):o.downloadExportedXFdfAnnotation(v)}else(0,a.xr)()?this.pdfViewer._dotnetInstance.invokeMethodAsync("GetLocaleText","PdfViewer_ExportFailed").then(function(S){o.openImportExportNotificationPopup(S)}):o.openImportExportNotificationPopup(o.pdfViewer.localeObj.getConstant("Export Failed")),o.pdfViewer.fireExportFailed(h,o.pdfViewer.localeObj.getConstant("Export Failed"))}if("string"!=typeof c)try{"string"==typeof c&&(o.onControlError(500,c,o.pdfViewer.serverActionSettings.exportAnnotations),c=null)}catch(S){o.pdfViewer.fireExportFailed(h.pdfAnnotation,o.pdfViewer.localeObj.getConstant("Export Failed")),o.onControlError(500,c,o.pdfViewer.serverActionSettings.exportAnnotations),c=null}}else o.pdfViewer.fireExportSuccess("Exported data saved in server side successfully",null!==o.pdfViewer.exportAnnotationFileName?o.pdfViewer.exportAnnotationFileName:o.pdfViewer.fileName)},o.exportAnnotationRequestHandler.onFailure=function(f){o.pdfViewer.fireExportFailed(h.pdfAnnotation,f.statusText)},o.exportAnnotationRequestHandler.onError=function(f){o.pdfViewer.fireExportFailed(h.pdfAnnotation,f.statusText)}});return!e&&!i||r},s.prototype.createRequestForImportAnnotations=function(e,t,i){var n,o;if(o=this,"string"==typeof e&&"Json"===t&&-1===e.indexOf(".json")&&(e=e.split(",")[1]?e.split(",")[1]:e.split(",")[0],e=JSON.parse(decodeURIComponent(escape(atob(e))))),"object"==typeof e)this.isJsonImported=!i,o.reRenderAnnotations(e.pdfAnnotation),o.isImportedAnnotation=!0,o.updateDocumentEditedProperty(!0),this.isAddAnnotation||o.pdfViewer.fireImportSuccess(e.pdfAnnotation);else{o.pdfViewer.fireImportStart(e),"Json"===t?n={fileName:e,action:"ImportAnnotations",elementId:o.pdfViewer.element.id,hashId:o.hashId,uniqueId:o.documentId}:(i||(e=btoa(e)),n={importedData:e=e.split(",")[1]?e.split(",")[1]:e.split(",")[0],action:"ImportAnnotations",elementId:o.pdfViewer.element.id,hashId:o.hashId,uniqueId:o.documentId}),o.jsonDocumentId&&(n.document=o.jsonDocumentId);var r=o.pdfViewer.serviceUrl+"/"+o.pdfViewer.serverActionSettings.importAnnotations;o.importAnnotationRequestHandler=new Ue(o.pdfViewer),o.importAnnotationRequestHandler.url=r,o.importAnnotationRequestHandler.mode=!0,o.importAnnotationRequestHandler.responseType="text",o.importAnnotationRequestHandler.send(n),o.importAnnotationRequestHandler.onSuccess=function(l){var d=l.data;if(d){if("object"!=typeof d)try{"object"!=typeof(d=JSON.parse(d))&&(o.onControlError(500,d,o.pdfViewer.serverActionSettings.importAnnotations),d=null)}catch(p){o.pdfViewer.fireImportFailed(e,o.pdfViewer.localeObj.getConstant("File not found")),(0,a.xr)()?this.pdfViewer._dotnetInstance.invokeMethodAsync("GetLocaleText","PdfViewer_FileNotFound").then(function(f){o.openImportExportNotificationPopup(f)}):o.openImportExportNotificationPopup(o.pdfViewer.localeObj.getConstant("File not found")),o.onControlError(500,d,o.pdfViewer.serverActionSettings.importAnnotations),d=null}d&&(o.pdfViewer.fireAjaxRequestSuccess(o.pdfViewer.serverActionSettings.importAnnotations,d),d.pdfAnnotation&&(o.reRenderAnnotations(d.pdfAnnotation),o.isImportedAnnotation=!0,o.updateDocumentEditedProperty(!0),o.pdfViewer.fireImportSuccess(d.pdfAnnotation)))}},o.importAnnotationRequestHandler.onFailure=function(l){o.pdfViewer.fireImportFailed(e,l.statusText)},o.importAnnotationRequestHandler.onError=function(l){o.pdfViewer.fireImportFailed(e,l.statusText)}}},s.prototype.openImportExportNotificationPopup=function(e){this.pdfViewer.showNotificationDialog&&this.textLayer.createNotificationPopup(e)},s.prototype.reRenderAnnotations=function(e){if(e){this.isImportAction=!0;var t=void 0;this.isImportedAnnotation?this.importedAnnotation=this.combineImportedData(this.importedAnnotation,e):this.pageCount>0&&(this.importedAnnotation=e),this.isImportedAnnotation||(t=0);for(var i=0;i<this.pageCount;i++)if(e[i]){var n=[],o=window.sessionStorage.getItem(this.documentId+"_annotations_textMarkup"),r=window.sessionStorage.getItem(this.documentId+"_annotations_shape"),l=window.sessionStorage.getItem(this.documentId+"_annotations_shape_measure"),d=window.sessionStorage.getItem(this.documentId+"_annotations_stamp"),h=window.sessionStorage.getItem(this.documentId+"_annotations_sticky"),p=window.sessionStorage.getItem(this.documentId+"_annotations_freetext"),f=window.sessionStorage.getItem(this.documentId+"_annotations_sign"),c=window.sessionStorage.getItem(this.documentId+"_annotations_ink");if(this.isStorageExceed&&(o=this.annotationStorage[this.documentId+"_annotations_textMarkup"],r=this.annotationStorage[this.documentId+"_annotations_shape"],l=this.annotationStorage[this.documentId+"_annotations_shape_measure"],d=this.annotationStorage[this.documentId+"_annotations_stamp"],h=this.annotationStorage[this.documentId+"_annotations_sticky"],p=this.annotationStorage[this.documentId+"_annotations_freetext"],c=this.annotationStorage[this.documentId+"_annotations_ink"]),this.getElement("_annotationCanvas_"+i))if(this.drawPageAnnotations(e[i],i),this.isImportedAnnotation){for(var m=!1,g=0;g<this.annotationPageList.length;g++)this.annotationPageList[g]===i&&(m=!0);m&&(this.annotationPageList[t]=i,t+=1)}else this.annotationPageList[t]=i,t+=1;if(e[i].textMarkupAnnotation&&0!==e[i].textMarkupAnnotation.length){if(o){var v=JSON.parse(o);e[i].textMarkupAnnotation=this.checkAnnotationCollections(v,e[i].textMarkupAnnotation,i)}if(e[i].textMarkupAnnotation=this.checkAnnotationCommentsCollections(e[i].textMarkupAnnotation,i),n.textMarkupAnnotation=e[i].textMarkupAnnotation,0!==e[i].textMarkupAnnotation.length)for(this.pdfViewer.annotationModule.stickyNotesAnnotationModule.renderAnnotationComments(e[i].textMarkupAnnotation,i),g=0;g<e[i].textMarkupAnnotation.length;g++)this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateCollections(this.pdfViewer.annotationModule.textMarkupAnnotationModule.updateTextMarkupAnnotationCollections(e[i].textMarkupAnnotation[g],i))}if(e[i].shapeAnnotation&&0!==e[i].shapeAnnotation.length&&(r&&(v=JSON.parse(r),e[i].shapeAnnotation=this.checkAnnotationCollections(v,e[i].shapeAnnotation,i)),e[i].shapeAnnotation=this.checkAnnotationCommentsCollections(e[i].shapeAnnotation,i),n.shapeAnnotation=e[i].shapeAnnotation,0!==e[i].shapeAnnotation.length))for(this.pdfViewer.annotationModule.stickyNotesAnnotationModule.renderAnnotationComments(e[i].shapeAnnotation,i),g=0;g<e[i].shapeAnnotation.length;g++)this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateCollections(this.pdfViewer.annotationModule.shapeAnnotationModule.updateShapeAnnotationCollections(e[i].shapeAnnotation[g],i));if(e[i].measureShapeAnnotation&&0!==e[i].measureShapeAnnotation.length&&(l&&(v=JSON.parse(l),e[i].measureShapeAnnotation=this.checkAnnotationCollections(v,e[i].measureShapeAnnotation,i)),e[i].measureShapeAnnotation=this.checkAnnotationCommentsCollections(e[i].measureShapeAnnotation,i),n.measureShapeAnnotation=e[i].measureShapeAnnotation,0!==e[i].measureShapeAnnotation.length))for(this.pdfViewer.annotationModule.stickyNotesAnnotationModule.renderAnnotationComments(e[i].measureShapeAnnotation,i),g=0;g<e[i].measureShapeAnnotation.length;g++)this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateCollections(this.pdfViewer.annotationModule.measureAnnotationModule.updateMeasureAnnotationCollections(e[i].measureShapeAnnotation[g],i));if(e[i].stampAnnotations&&0!==e[i].stampAnnotations.length&&(d&&(v=JSON.parse(d),e[i].stampAnnotations=this.checkAnnotationCollections(v,e[i].stampAnnotations,i)),e[i].stampAnnotations=this.checkAnnotationCommentsCollections(e[i].stampAnnotations,i),n.stampAnnotations=e[i].stampAnnotations,0!==e[i].stampAnnotations.length))for(this.pdfViewer.annotationModule.stickyNotesAnnotationModule.renderAnnotationComments(e[i].stampAnnotations,i),g=0;g<e[i].stampAnnotations.length;g++)this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateCollections(this.pdfViewer.annotationModule.stampAnnotationModule.updateStampAnnotationCollections(e[i].stampAnnotations[g],i));if(e[i].stickyNotesAnnotation&&0!==e[i].stickyNotesAnnotation.length&&(h&&(v=JSON.parse(h),e[i].stickyNotesAnnotation=this.checkAnnotationCollections(v,e[i].stickyNotesAnnotation,i)),e[i].stickyNotesAnnotation=this.checkAnnotationCommentsCollections(e[i].stickyNotesAnnotation,i),n.stickyNotesAnnotation=e[i].stickyNotesAnnotation,0!==e[i].stickyNotesAnnotation.length))for(this.pdfViewer.annotationModule.stickyNotesAnnotationModule.renderAnnotationComments(e[i].stickyNotesAnnotation,i),g=0;g<e[i].stickyNotesAnnotation.length;g++)this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateCollections(this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateStickyNotesAnnotationCollections(e[i].stickyNotesAnnotation[g],i));if(e[i].freeTextAnnotation&&0!==e[i].freeTextAnnotation.length&&(p&&(v=JSON.parse(p),e[i].freeTextAnnotation=this.checkAnnotationCollections(v,e[i].freeTextAnnotation,i)),e[i].freeTextAnnotation=this.checkAnnotationCommentsCollections(e[i].freeTextAnnotation,i),n.freeTextAnnotation=e[i].freeTextAnnotation,0!==e[i].freeTextAnnotation.length))for(this.pdfViewer.annotationModule.stickyNotesAnnotationModule.renderAnnotationComments(e[i].freeTextAnnotation,i),g=0;g<e[i].freeTextAnnotation.length;g++)this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateCollections(this.pdfViewer.annotationModule.freeTextAnnotationModule.updateFreeTextAnnotationCollections(e[i].freeTextAnnotation[g],i));if(e[i].signatureAnnotation&&0!==e[i].signatureAnnotation.length&&(f&&(v=JSON.parse(f),e[i].signatureAnnotation=this.checkSignatureCollections(v,e[i].signatureAnnotation,i)),n.signatureAnnotation=e[i].signatureAnnotation,0!==e[i].signatureAnnotation.length))for(g=0;g<e[i].signatureAnnotation.length;g++)this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateCollections(this.signatureModule.updateSignatureCollections(e[i].signatureAnnotation[g],i),!0);if(e[i].signatureInkAnnotation&&0!==e[i].signatureInkAnnotation.length&&(c&&(v=JSON.parse(c),e[i].signatureInkAnnotation=this.checkAnnotationCollections(v,e[i].signatureInkAnnotation,i)),e[i].signatureInkAnnotation=this.checkAnnotationCommentsCollections(e[i].signatureInkAnnotation,i),n.signatureInkAnnotation=e[i].signatureInkAnnotation,0!==e[i].signatureInkAnnotation.length))for(this.pdfViewer.annotationModule.stickyNotesAnnotationModule.renderAnnotationComments(e[i].signatureInkAnnotation,i),g=0;g<e[i].signatureInkAnnotation.length;g++)this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateCollections(this.pdfViewer.annotationModule.inkAnnotationModule.updateInkCollections(e[i].signatureInkAnnotation[g],i));this.updateImportedAnnotationsInDocumentCollections(n,i)}if(this.pageCount>0&&this.pdfViewer.annotationModule.stickyNotesAnnotationModule&&!this.pdfViewer.annotationModule.stickyNotesAnnotationModule.isAnnotationRendered){var y=this.createAnnotationsCollection();y&&(this.documentAnnotationCollections=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateAnnotationsInDocumentCollections(this.importedAnnotation,y))}}},s.prototype.updateImportedAnnotationsInDocumentCollections=function(e,t){if(this.documentAnnotationCollections){var n=this.documentAnnotationCollections[t];if(n){if(e.textMarkupAnnotation&&0!==e.textMarkupAnnotation.length)for(var o=0;o<e.textMarkupAnnotation.length;o++)n.textMarkupAnnotation.push(e.textMarkupAnnotation[o]);if(e.shapeAnnotation&&0!==e.shapeAnnotation.length)for(o=0;o<e.shapeAnnotation.length;o++)n.shapeAnnotation.push(e.shapeAnnotation[o]);if(e.measureShapeAnnotation&&0!==e.measureShapeAnnotation.length)for(o=0;o<e.measureShapeAnnotation.length;o++)n.measureShapeAnnotation.push(e.measureShapeAnnotation[o]);if(e.stampAnnotations&&0!==e.stampAnnotations.length)for(o=0;o<e.stampAnnotations.length;o++)n.stampAnnotations.push(e.stampAnnotations[o]);if(e.stickyNotesAnnotation&&0!==e.stickyNotesAnnotation.length)for(o=0;o<e.stickyNotesAnnotation.length;o++)n.stickyNotesAnnotation.push(e.stickyNotesAnnotation[o]);if(e.freeTextAnnotation&&0!==e.freeTextAnnotation.length)for(o=0;o<e.freeTextAnnotation.length;o++)n.freeTextAnnotation.push(e.freeTextAnnotation[o]);if(e.signatureAnnotation&&0!==e.signatureAnnotation.length)for(o=0;o<e.signatureAnnotation.length;o++)n.signatureAnnotation.push(e.signatureAnnotation[o]);if(e.signatureInkAnnotation&&0!==e.signatureInkAnnotation.length)for(o=0;o<e.signatureInkAnnotation.length;o++)n.signatureInkAnnotation.push(e.signatureInkAnnotation[o]);this.documentAnnotationCollections[t]=n}}},s.prototype.checkDocumentCollectionData=function(e,t){var i;if(t)i=t;else if(this.documentAnnotationCollections){var n=this.documentAnnotationCollections[e];n&&(i=_(n))}if(i){var u,o=window.sessionStorage.getItem(this.documentId+"_annotations_textMarkup"),r=window.sessionStorage.getItem(this.documentId+"_annotations_shape"),l=window.sessionStorage.getItem(this.documentId+"_annotations_shape_measure"),d=window.sessionStorage.getItem(this.documentId+"_annotations_stamp"),h=window.sessionStorage.getItem(this.documentId+"_annotations_sticky"),p=window.sessionStorage.getItem(this.documentId+"_annotations_freetext"),f=window.sessionStorage.getItem(this.documentId+"_annotations_ink"),c=window.sessionStorage.getItem(this.documentId+"_annotations_sign");return this.isStorageExceed&&(o=this.annotationStorage[this.documentId+"_annotations_textMarkup"],r=this.annotationStorage[this.documentId+"_annotations_shape"],l=this.annotationStorage[this.documentId+"_annotations_shape_measure"],d=this.annotationStorage[this.documentId+"_annotations_stamp"],h=this.annotationStorage[this.documentId+"_annotations_sticky"],p=this.annotationStorage[this.documentId+"_annotations_freetext"],f=this.annotationStorage[this.documentId+"_annotations_ink"],c=this.annotationStorage[this.documentId+"_annotations_sign"]),i.textMarkupAnnotation&&0!==i.textMarkupAnnotation.length&&o&&(u=JSON.parse(o))&&(i.textMarkupAnnotation=this.findImportedAnnotations(u,i.textMarkupAnnotation,e)),i.shapeAnnotation&&0!==i.shapeAnnotation.length&&r&&(u=JSON.parse(r))&&(i.shapeAnnotation=this.findImportedAnnotations(u,i.shapeAnnotation,e)),i.measureShapeAnnotation&&0!==i.measureShapeAnnotation.length&&l&&(u=JSON.parse(l))&&(i.measureShapeAnnotation=this.findImportedAnnotations(u,i.measureShapeAnnotation,e)),i.stampAnnotations&&0!==i.stampAnnotations.length&&d&&(u=JSON.parse(d))&&(i.stampAnnotations=this.findImportedAnnotations(u,i.stampAnnotations,e)),i.stickyNotesAnnotation&&0!==i.stickyNotesAnnotation.length&&h&&(u=JSON.parse(h))&&(i.stickyNotesAnnotation=this.findImportedAnnotations(u,i.stickyNotesAnnotation,e)),i.freeTextAnnotation&&0!==i.freeTextAnnotation.length&&p&&(u=JSON.parse(p))&&(i.freeTextAnnotation=this.findImportedAnnotations(u,i.freeTextAnnotation,e)),i.signatureInkAnnotation&&0!==i.signatureInkAnnotation.length&&f&&(u=JSON.parse(f))&&(i.signatureInkAnnotation=this.findImportedAnnotations(u,i.signatureInkAnnotation,e)),i.signatureAnnotation&&0!==i.signatureAnnotation.length&&c&&(u=JSON.parse(f))&&(i.signatureAnnotation=this.findImportedAnnotations(u,i.signatureAnnotation,e)),i}},s.prototype.findImportedAnnotations=function(e,t,i){for(var n=null,o=0;o<e.length;o++)e[o].pageIndex===i&&(n=e[o].annotations);if(n)for(var r=0;r<n.length;r++)for(var l=0;l<t.length;l++)n[r].annotName===t[l].AnnotName&&(t.splice(l,1),l-=1);return n=null,t},s.prototype.drawPageAnnotations=function(e,t,i){if(i&&(e=e[t]),e){if(e.textMarkupAnnotation&&0!==e.textMarkupAnnotation.length){var n=window.sessionStorage.getItem(this.documentId+"_annotations_textMarkup");this.isStorageExceed&&(n=this.annotationStorage[this.documentId+"_annotations_textMarkup"]),n&&(o=JSON.parse(n))&&(e.textMarkupAnnotation=this.checkAnnotationCollections(o,e.textMarkupAnnotation,t)),e.textMarkupAnnotation=this.checkAnnotationCommentsCollections(e.textMarkupAnnotation,t),0!==e.textMarkupAnnotation.length&&this.pdfViewer.annotationModule.renderAnnotations(t,null,null,e.textMarkupAnnotation,null,!0)}if(e.shapeAnnotation&&0!==e.shapeAnnotation.length){if(n=window.sessionStorage.getItem(this.documentId+"_annotations_shape"),this.isStorageExceed&&(n=this.annotationStorage[this.documentId+"_annotations_shape"]),n){var o=JSON.parse(n);e.shapeAnnotation=this.checkAnnotationCollections(o,e.shapeAnnotation,t)}e.shapeAnnotation=this.checkAnnotationCommentsCollections(e.shapeAnnotation,t),0!==e.shapeAnnotation.length&&this.pdfViewer.annotationModule.renderAnnotations(t,e.shapeAnnotation,null,null,null,!0)}e.measureShapeAnnotation&&0!==e.measureShapeAnnotation.length&&(n=window.sessionStorage.getItem(this.documentId+"_annotations_shape_measure"),this.isStorageExceed&&(n=this.annotationStorage[this.documentId+"_annotations_shape_measure"]),n&&(o=JSON.parse(n),e.measureShapeAnnotation=this.checkAnnotationCollections(o,e.measureShapeAnnotation,t)),e.measureShapeAnnotation=this.checkAnnotationCommentsCollections(e.measureShapeAnnotation,t),0!==e.measureShapeAnnotation.length&&this.pdfViewer.annotationModule.renderAnnotations(t,null,e.measureShapeAnnotation,null,null,!0)),e.stampAnnotations&&0!==e.stampAnnotations.length&&(n=window.sessionStorage.getItem(this.documentId+"_annotations_stamp"),this.isStorageExceed&&(n=this.annotationStorage[this.documentId+"_annotations_stamp"]),n&&(o=JSON.parse(n),e.stampAnnotations=this.checkAnnotationCollections(o,e.stampAnnotations,t)),e.stampAnnotations=this.checkAnnotationCommentsCollections(e.stampAnnotations,t),0!==e.stampAnnotations.length&&this.pdfViewer.annotationModule.stampAnnotationModule.renderStampAnnotations(e.stampAnnotations,t,null,!0)),e.stickyNotesAnnotation&&0!==e.stickyNotesAnnotation.length&&(n=window.sessionStorage.getItem(this.documentId+"_annotations_sticky"),this.isStorageExceed&&(n=this.annotationStorage[this.documentId+"_annotations_sticky"]),n&&(o=JSON.parse(n),e.stickyNotesAnnotation=this.checkAnnotationCollections(o,e.stickyNotesAnnotation,t)),e.stickyNotesAnnotation=this.checkAnnotationCommentsCollections(e.stickyNotesAnnotation,t),0!==e.stickyNotesAnnotation.length&&this.pdfViewer.annotationModule.stickyNotesAnnotationModule.renderStickyNotesAnnotations(e.stickyNotesAnnotation,t)),e.freeTextAnnotation&&0!==e.freeTextAnnotation.length&&(n=window.sessionStorage.getItem(this.documentId+"_annotations_freetext"),this.isStorageExceed&&(n=this.annotationStorage[this.documentId+"_annotations_freetext"]),n&&(o=JSON.parse(n),e.freeTextAnnotation=this.checkAnnotationCollections(o,e.freeTextAnnotation,t)),e.freeTextAnnotation=this.checkAnnotationCommentsCollections(e.freeTextAnnotation,t),0!==e.freeTextAnnotation.length&&this.pdfViewer.annotationModule.freeTextAnnotationModule.renderFreeTextAnnotations(e.freeTextAnnotation,t,!0)),e.signatureAnnotation&&0!==e.signatureAnnotation.length&&(n=window.sessionStorage.getItem(this.documentId+"_annotations_sign"),(o=JSON.parse(n))&&(e.signatureAnnotation=this.checkSignatureCollections(o,e.signatureAnnotation,t)),this.signatureModule.renderExistingSignature(e.signatureAnnotation,t,!0)),e.signatureInkAnnotation&&0!==e.signatureInkAnnotation.length&&(n=window.sessionStorage.getItem(this.documentId+"_annotations_ink"),this.isStorageExceed&&(n=this.annotationStorage[this.documentId+"_annotations_ink"]),n&&(o=JSON.parse(n),e.signatureInkAnnotation=this.checkAnnotationCollections(o,e.signatureInkAnnotation,t)),e.signatureInkAnnotation=this.checkAnnotationCommentsCollections(e.signatureInkAnnotation,t),0!==e.signatureInkAnnotation.length&&this.pdfViewer.annotationModule.inkAnnotationModule.renderExistingInkSignature(e.signatureInkAnnotation,t,!0))}},s.prototype.checkSignatureCollections=function(e,t,i){for(var n=null,o=0;o<e.length;o++)e[o].pageIndex===i&&(n=e[o].annotations);if(n)for(var r=0;r<n.length;r++)for(var l=0;l<t.length;l++)n[r].signatureName===t[l].SignatureName&&(t.splice(l,1),l-=1);return n=null,t},s.prototype.checkAnnotationCollections=function(e,t,i){for(var n=null,o=0;o<e.length;o++)e[o].pageIndex===i&&(n=e[o].annotations);if(n)for(var r=0;r<n.length;r++)for(var l=0;l<t.length;l++)n[r].annotName===t[l].AnnotName&&(t.splice(l,1),l-=1);return n=null,t},s.prototype.checkAnnotationCommentsCollections=function(e,t){if(this.annotationComments){var i=this.annotationComments[t];if(i=this.selectAnnotationCollections(i))for(var n=0;n<i.length;n++)for(var o=0;o<e.length;o++)i[n].AnnotName===e[o].AnnotName&&(e.splice(o,1),o-=1);i=null}return e},s.prototype.selectAnnotationCollections=function(e){var t=[];if(e){if(e.textMarkupAnnotation&&0!==e.textMarkupAnnotation.length)for(var i=0;i<e.textMarkupAnnotation.length;i++)t.push(e.textMarkupAnnotation[i]);if(e.shapeAnnotation&&0!==e.shapeAnnotation.length)for(i=0;i<e.shapeAnnotation.length;i++)t.push(e.shapeAnnotation[i]);if(e.measureShapeAnnotation&&0!==e.measureShapeAnnotation.length)for(i=0;i<e.measureShapeAnnotation.length;i++)t.push(e.measureShapeAnnotation[i]);if(e.stampAnnotations&&0!==e.stampAnnotations.length)for(i=0;i<e.stampAnnotations.length;i++)t.push(e.stampAnnotations[i]);if(e.stickyNotesAnnotation&&0!==e.stickyNotesAnnotation.length)for(i=0;i<e.stickyNotesAnnotation.length;i++)t.push(e.stickyNotesAnnotation[i]);if(e.freeTextAnnotation&&0!==e.freeTextAnnotation.length)for(i=0;i<e.freeTextAnnotation.length;i++)t.push(e.freeTextAnnotation[i]);if(e.signatureInkAnnotation&&0!==e.signatureInkAnnotation.length)for(i=0;i<e.signatureInkAnnotation.length;i++)t.push(e.signatureInkAnnotation[i])}return t},s.prototype.saveImportedAnnotations=function(){var e=window.sessionStorage.getItem(this.documentId+"_annotations_textMarkup"),t=window.sessionStorage.getItem(this.documentId+"_annotations_shape"),i=window.sessionStorage.getItem(this.documentId+"_annotations_shape_measure"),n=window.sessionStorage.getItem(this.documentId+"_annotations_stamp"),o=window.sessionStorage.getItem(this.documentId+"_annotations_sticky"),r=window.sessionStorage.getItem(this.documentId+"_annotations_freetext"),l=window.sessionStorage.getItem(this.documentId+"_annotations_ink"),d=window.sessionStorage.getItem(this.documentId+"_annotations_sign");if(this.isStorageExceed&&(e=this.annotationStorage[this.documentId+"_annotations_textMarkup"],t=this.annotationStorage[this.documentId+"_annotations_shape"],i=this.annotationStorage[this.documentId+"_annotations_shape_measure"],n=this.annotationStorage[this.documentId+"_annotations_stamp"],o=this.annotationStorage[this.documentId+"_annotations_sticky"],r=this.annotationStorage[this.documentId+"_annotations_freetext"],l=this.annotationStorage[this.documentId+"_annotations_ink"],d=this.annotationStorage[this.documentId+"_annotations_sign"]),this.downloadCollections={textMarkupObject:e,shapeObject:t,measureShapeObject:i,stampObject:n,stickyObject:o,freeTextObject:r,inkObject:l,signatureObject:d},this.documentAnnotationCollections)for(var h=0;h<this.pageCount;h++)if(this.documentAnnotationCollections[h]){var p=_(this.documentAnnotationCollections[h]);p=this.checkDocumentCollectionData(h,p),this.savePageAnnotations(p,h)}},s.prototype.savePageAnnotations=function(e,t){if(0!==e.textMarkupAnnotation.length)for(var i=0;i<e.textMarkupAnnotation.length;i++)this.pdfViewer.annotationModule.textMarkupAnnotationModule.saveImportedTextMarkupAnnotations(e.textMarkupAnnotation[i],t);if(0!==e.shapeAnnotation.length)for(i=0;i<e.shapeAnnotation.length;i++)this.pdfViewer.annotationModule.shapeAnnotationModule.saveImportedShapeAnnotations(e.shapeAnnotation[i],t);if(0!==e.measureShapeAnnotation.length)for(i=0;i<e.measureShapeAnnotation.length;i++)this.pdfViewer.annotationModule.measureAnnotationModule.saveImportedMeasureAnnotations(e.measureShapeAnnotation[i],t);if(0!==e.stampAnnotations.length)for(i=0;i<e.stampAnnotations.length;i++)this.pdfViewer.annotationModule.stampAnnotationModule.saveImportedStampAnnotations(e.stampAnnotations[i],t);if(0!==e.stickyNotesAnnotation.length)for(i=0;i<e.stickyNotesAnnotation.length;i++)this.pdfViewer.annotationModule.stickyNotesAnnotationModule.saveImportedStickyNotesAnnotations(e.stickyNotesAnnotation[i],t);if(0!==e.freeTextAnnotation.length)for(i=0;i<e.freeTextAnnotation.length;i++)this.pdfViewer.annotationModule.freeTextAnnotationModule.saveImportedFreeTextAnnotations(e.freeTextAnnotation[i],t);if(0!==e.signatureInkAnnotation.length)for(i=0;i<e.signatureInkAnnotation.length;i++)this.pdfViewer.annotationModule.inkAnnotationModule.saveImportedInkAnnotation(e.signatureInkAnnotation[i],t)},s.prototype.updateDocumentAnnotationCollections=function(){window.sessionStorage.removeItem(this.documentId+"_annotations_textMarkup"),window.sessionStorage.removeItem(this.documentId+"_annotations_shape"),window.sessionStorage.removeItem(this.documentId+"_annotations_shape_measure"),window.sessionStorage.removeItem(this.documentId+"_annotations_stamp"),window.sessionStorage.removeItem(this.documentId+"_annotations_sticky"),window.sessionStorage.removeItem(this.documentId+"_annotations_freetext"),window.sessionStorage.removeItem(this.documentId+"_annotations_ink"),this.downloadCollections&&(this.isStorageExceed?(this.annotationStorage[this.documentId+"_annotations_textMarkup"]=this.downloadCollections.textMarkupObject,this.annotationStorage[this.documentId+"_annotations_shape"]=this.downloadCollections.shapeObject,this.annotationStorage[this.documentId+"_annotations_shape_measure"]=this.downloadCollections.measureShapeObject,this.annotationStorage[this.documentId+"_annotations_stamp"]=this.downloadCollections.stampObject,this.annotationStorage[this.documentId+"_annotations_sticky"]=this.downloadCollections.stickyObject,this.annotationStorage[this.documentId+"_annotations_freetext"]=this.downloadCollections.freeTextObject,this.annotationStorage[this.documentId+"_annotations_ink"]=this.downloadCollections.inkObject):(this.downloadCollections.textMarkupObject&&window.sessionStorage.setItem(this.documentId+"_annotations_textMarkup",this.downloadCollections.textMarkupObject),this.downloadCollections.shapeObject&&window.sessionStorage.setItem(this.documentId+"_annotations_shape",this.downloadCollections.shapeObject),this.downloadCollections.measureShapeObject&&window.sessionStorage.setItem(this.documentId+"_annotations_shape_measure",this.downloadCollections.measureShapeObject),this.downloadCollections.stampObject&&window.sessionStorage.setItem(this.documentId+"_annotations_stamp",this.downloadCollections.stampObject),this.downloadCollections.stickyObject&&window.sessionStorage.setItem(this.documentId+"_annotations_sticky",this.downloadCollections.stickyObject),this.downloadCollections.freeTextObject&&window.sessionStorage.setItem(this.documentId+"_annotations_freetext",this.downloadCollections.freeTextObject),this.downloadCollections.inkObject&&window.sessionStorage.setItem(this.documentId+"_annotations_ink",this.downloadCollections.inkObject)))},s.prototype.createAnnotationJsonData=function(){var t,i,n,o,r,l,d,h,e={};if(this.saveImportedAnnotations(),this.isTextMarkupAnnotationModule()&&(this.isJsonExported=!0,t=this.pdfViewer.annotationModule.textMarkupAnnotationModule.saveTextMarkupAnnotations()),this.isShapeAnnotationModule()&&(this.isJsonExported=!0,i=this.pdfViewer.annotationModule.shapeAnnotationModule.saveShapeAnnotations()),this.isCalibrateAnnotationModule()&&(this.isJsonExported=!0,n=this.pdfViewer.annotationModule.measureAnnotationModule.saveMeasureShapeAnnotations()),this.isStampAnnotationModule()&&(o=this.pdfViewer.annotationModule.stampAnnotationModule.saveStampAnnotations()),this.isCommentAnnotationModule()&&(r=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.saveStickyAnnotations()),this.isFreeTextAnnotationModule()&&(l=this.pdfViewer.annotationModule.freeTextAnnotationModule.saveFreeTextAnnotations()),this.isInkAnnotationModule()&&(h=this.pdfViewer.annotationModule.inkAnnotationModule.saveInkSignature()),this.pdfViewer.isSignatureEditable)d=this.signatureModule.saveSignature();else{for(var p=new Array,f=0;f<this.pageCount;f++)p[f]=[];d=JSON.stringify(p)}for(var c=0;c<this.pageCount;c++){var u={textMarkupAnnotation:JSON.parse(t)[c],shapeAnnotation:JSON.parse(i)[c],measureShapeAnnotation:JSON.parse(n)[c],stampAnnotations:JSON.parse(o)[c],stickyNotesAnnotation:JSON.parse(r)[c],freeTextAnnotation:JSON.parse(l)[c],signatureAnnotation:JSON.parse(d)[c],signatureInkAnnotation:JSON.parse(h)[c]};e[c]=u}return JSON.stringify(e)},s.prototype.combineImportedData=function(e,t){for(var i=0;i<this.pageCount;i++)t[i]&&(e[i]?(t[i].textMarkupAnnotation&&0!==t[i].textMarkupAnnotation.length&&(e[i].textMarkupAnnotation?(t[i].textMarkupAnnotation=this.checkImportedData(e[i].textMarkupAnnotation,t[i].textMarkupAnnotation,i),0!==t[i].textMarkupAnnotation.length&&(e[i].textMarkupAnnotation=e[i].textMarkupAnnotation.concat(t[i].textMarkupAnnotation))):e[i].textMarkupAnnotation=t[i].textMarkupAnnotation),t[i].shapeAnnotation&&0!==t[i].shapeAnnotation.length&&(e[i].shapeAnnotation?(t[i].shapeAnnotation=this.checkImportedData(e[i].shapeAnnotation,t[i].shapeAnnotation,i),0!==t[i].shapeAnnotation.length&&(e[i].shapeAnnotation=e[i].shapeAnnotation.concat(t[i].shapeAnnotation))):e[i].shapeAnnotation=t[i].shapeAnnotation),t[i].measureShapeAnnotation&&0!==t[i].measureShapeAnnotation.length&&(e[i].measureShapeAnnotation?(t[i].measureShapeAnnotation=this.checkImportedData(e[i].measureShapeAnnotation,t[i].measureShapeAnnotation,i),0!==t[i].measureShapeAnnotation.length&&(e[i].measureShapeAnnotation=e[i].measureShapeAnnotation.concat(t[i].measureShapeAnnotation))):e[i].measureShapeAnnotation=t[i].measureShapeAnnotation),t[i].stampAnnotations&&0!==t[i].stampAnnotations.length&&(e[i].stampAnnotations?(t[i].stampAnnotations=this.checkImportedData(e[i].stampAnnotations,t[i].stampAnnotations,i),0!==t[i].stampAnnotations.length&&(e[i].stampAnnotations=e[i].stampAnnotations.concat(t[i].stampAnnotations))):e[i].stampAnnotations=t[i].stampAnnotations),t[i].stickyNotesAnnotation&&0!==t[i].stickyNotesAnnotation.length&&(e[i].stickyNotesAnnotation?(t[i].stickyNotesAnnotation=this.checkImportedData(e[i].stickyNotesAnnotation,t[i].stickyNotesAnnotation,i),0!==t[i].stickyNotesAnnotation.length&&(e[i].stickyNotesAnnotation=e[i].stickyNotesAnnotation.concat(t[i].stickyNotesAnnotation))):e[i].stickyNotesAnnotation=t[i].stickyNotesAnnotation),t[i].freeTextAnnotation&&0!==t[i].freeTextAnnotation.length&&(e[i].freeTextAnnotation?(t[i].freeTextAnnotation=this.checkImportedData(e[i].freeTextAnnotation,t[i].freeTextAnnotation,i),0!==t[i].freeTextAnnotation.length&&(e[i].freeTextAnnotation=e[i].freeTextAnnotation.concat(t[i].freeTextAnnotation))):e[i].freeTextAnnotation=t[i].freeTextAnnotation),t[i].signatureInkAnnotation&&0!==t[i].signatureInkAnnotation.length&&(e[i].signatureInkAnnotation?(t[i].signatureInkAnnotation=this.checkImportedData(e[i].signatureInkAnnotation,t[i].signatureInkAnnotation,i),0!==t[i].signatureInkAnnotation.length&&(e[i].signatureInkAnnotation=e[i].signatureInkAnnotation.concat(t[i].signatureInkAnnotation))):e[i].signatureInkAnnotation=t[i].signatureInkAnnotation)):e[i]={textMarkupAnnotation:t[i].textMarkupAnnotation,shapeAnnotation:t[i].shapeAnnotation,measureShapeAnnotation:t[i].measureShapeAnnotation,stampAnnotations:t[i].stampAnnotations,stickyNotesAnnotation:t[i].stickyNotesAnnotation,freeTextAnnotation:t[i].freeTextAnnotation,signatureInkAnnotation:t[i].signatureInkAnnotation});return e},s.prototype.updateExportItem=function(){var e=window.sessionStorage.getItem(this.documentId+"_annotations_shape"),t=window.sessionStorage.getItem(this.documentId+"_annotations_shape_measure"),i=window.sessionStorage.getItem(this.documentId+"_annotations_stamp"),n=window.sessionStorage.getItem(this.documentId+"_annotations_sticky"),o=window.sessionStorage.getItem(this.documentId+"_annotations_textMarkup"),r=window.sessionStorage.getItem(this.documentId+"_annotations_freetext"),l=!1,d=window.sessionStorage.getItem(this.documentId+"_annotations_ink");return this.pdfViewer.isSignatureEditable&&window.sessionStorage.getItem(this.documentId+"_annotations_sign")&&(l=!0),!!(e||t||i||n||o||r||this.isImportAction||this.isStorageExceed||l||d)},s.prototype.isFreeTextAnnotation=function(e){var t=!1;return e&&e.length>0&&(t=e.some(function(i){return"FreeText"===i.shapeAnnotationType&&"Text Box"===i.subject})),t},s.prototype.checkImportedData=function(e,t,i){for(var n=0;n<e.length;n++)for(var o=0;o<t.length;o++)if(e[n].AnnotName===t[o].AnnotName){for(var r=this.pdfViewer.annotationCollection.length,l=0;l<r;l++)if(this.pdfViewer.annotationCollection[l].annotationId===t[o].AnnotName){this.pdfViewer.annotationCollection[l].comments=this.pdfViewer.annotationModule.getAnnotationComments(t[o].Comments,t[o],t[o].Author),this.pdfViewer.annotationCollection[l].review={state:t[o].State,stateModel:t[o].StateModel,modifiedDate:t[o].ModifiedDate,author:t[o].Author},this.pdfViewer.annotationCollection[l].note=t[o].Note;var d=this.pdfViewer.annotationCollection[l];"shape"===e[n].AnnotType&&this.pdfViewer.annotationModule.shapeAnnotationModule?(this.documentAnnotationCollections[i].shapeAnnotation[n]=t[o],this.updateAnnotationsInSessionStorage(t[o],d,"_annotations_shape")):"textMarkup"===e[n].AnnotType&&this.pdfViewer.annotationModule.textMarkupAnnotationModule?(this.documentAnnotationCollections[i].textMarkupAnnotation[n]=t[o],this.updateAnnotationsInSessionStorage(t[o],d,"_annotations_textMarkup")):"shape_measure"===e[n].AnnotType&&this.pdfViewer.annotationModule.measureAnnotationModule?(this.documentAnnotationCollections[i].measureShapeAnnotation[n]=t[o],this.updateAnnotationsInSessionStorage(t[o],d,"_annotations_shape_measure")):"stamp"===e[n].AnnotType&&this.pdfViewer.annotationModule.stampAnnotationModule?(this.documentAnnotationCollections[i].stampAnnotations[n]=t[o],this.updateAnnotationsInSessionStorage(t[o],d,"_annotations_stamp")):"freeText"===e[n].AnnotType&&this.pdfViewer.annotationModule.freeTextAnnotationModule?(this.documentAnnotationCollections[i].freeTextAnnotation[n]=t[o],this.updateAnnotationsInSessionStorage(t[o],d,"_annotations_freetext")):"ink"===e[n].AnnotType&&this.pdfViewer.annotationModule.inkAnnotationModule?(this.documentAnnotationCollections[i].signatureInkAnnotation[n]=t[o],this.updateAnnotationsInSessionStorage(t[o],d,"_annotations_ink")):"sticky"===e[n].AnnotType&&(this.documentAnnotationCollections[i].stickyNotesAnnotation[n]=t[o],this.updateAnnotationsInSessionStorage(t[o],d,"_annotations_sticky"));break}this.pdfViewer.annotationModule.stickyNotesAnnotationModule.createCommentControlPanel(t[o],i+1,null,null,!0),t.splice(o,1),o-=1}if(this.annotationComments){var h=this.annotationComments[i];if(h=this.selectAnnotationCollections(h))for(n=0;n<h.length;n++)for(o=0;o<t.length;o++)h[n].AnnotName===t[o].AnnotName&&(t.splice(o,1),o-=1)}return t},s.prototype.updateAnnotationsInSessionStorage=function(e,t,i){var n=window.sessionStorage.getItem(this.documentId+i),o=JSON.parse(n);if(o){for(var r=0;r<o.length;r++)if(o[r].annotations)for(var l=0;l<o[r].annotations.length;l++)if(o[r].annotations[l].annotName===e.AnnotName){o[r].annotations[l].comments=t.comments,o[r].annotations[l].review=t.review,o[r].annotations[l].note=t.note;break}window.sessionStorage.setItem(this.documentId+i,JSON.stringify(o))}},s.prototype.checkAnnotationWidth=function(e){for(var n,o,r,l,d=0;d<e.length;d++)n?(n>e[d].x?n=e[d].x:o<e[d].x&&(o=e[d].x),r>e[d].y?r=e[d].y:l<e[d].y&&(l=e[d].y)):(n=e[d].x,o=e[d].x,r=e[d].y,l=e[d].y);return{width:o-n,height:l-r}},s.prototype.deleteAnnotations=function(){if(this.pdfViewer.annotationModule){this.pdfViewer.annotations=[],this.pdfViewer.zIndexTable=[],this.pdfViewer.annotationCollection=[],this.pdfViewer.signatureCollection=[];var e=this.createAnnotationsCollection();this.annotationComments=e,this.documentAnnotationCollections=e,this.annotationRenderredList=[],window.sessionStorage.removeItem(this.documentId+"_annotations_shape"),window.sessionStorage.removeItem(this.documentId+"_annotations_shape_measure"),window.sessionStorage.removeItem(this.documentId+"_annotations_stamp"),window.sessionStorage.removeItem(this.documentId+"_annotations_sticky"),window.sessionStorage.removeItem(this.documentId+"_annotations_textMarkup"),window.sessionStorage.removeItem(this.documentId+"_annotations_freetext"),window.sessionStorage.removeItem(this.documentId+"_annotations_sign"),window.sessionStorage.removeItem(this.documentId+"_annotations_ink");for(var t=0;t<this.pageCount;t++){this.pdfViewer.annotationModule.renderAnnotations(t,null,null,null),this.pdfViewer.renderDrawing(void 0,t),this.pdfViewer.clearSelection(t);var i=document.getElementById(this.pdfViewer.element.id+"_accordionContainer"+(t+1));i&&i.remove();var n=document.getElementById(this.pdfViewer.element.id+"_accordionContentContainer");n&&0===n.childElementCount&&(n.style.display="none",document.getElementById(this.pdfViewer.element.id+"_commentsPanelText")&&(this.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant("Export Annotations")],!1),document.getElementById(this.pdfViewer.element.id+"_commentsPanelText").style.display="block"))}this.isImportedAnnotation=!1,this.isImportAction=!1,this.importedAnnotation=[],this.annotationPageList=[],this.pdfViewer.annotationModule.freeTextAnnotationModule.freeTextPageNumbers=[],this.pdfViewer.annotationModule.stampAnnotationModule.stampPageNumber=[],this.pdfViewer.annotation.inkAnnotationModule.inkAnnotationindex=[],this.isAnnotationCollectionRemoved=!0}},s.prototype.createAnnotationsCollection=function(e,t){var i=[];if(t)(i={})[e]={textMarkupAnnotation:[],shapeAnnotation:[],measureShapeAnnotation:[],stampAnnotations:[],stickyNotesAnnotation:[],freeTextAnnotation:[],signatureAnnotation:[],signatureInkAnnotation:[]};else for(var n=0;n<this.pageCount;n++)i.push({textMarkupAnnotation:[],shapeAnnotation:[],measureShapeAnnotation:[],stampAnnotations:[],stickyNotesAnnotation:[],freeTextAnnotation:[],signatureAnnotation:[],signatureInkAnnotation:[]});return i},s.prototype.addAnnotation=function(e){var i,t={};if(e){var n=!1,o=1;e.shapeAnnotationType||e.author?(n=!0,i=this.createAnnotationsCollection(e.pageNumber,!0)):e.length?(o=e.length,i=this.createAnnotationsCollection()):(n=!0,i=this.createAnnotationsCollection(e.pageNumber,!0));for(var r=0;r<o;r++){var l,d={};if(d.ShapeAnnotationType=(l=n?e:e[r]).shapeAnnotationType,d.AnnotationAddMode=l.annotationAddMode,d.Author=l.author,d.AnnotationSelectorSettings=l.annotationSelectorSettings,d.AnnotationSettings=l.annotationSettings,d.PageNumber=l.pageNumber,d.ModifiedDate=l.modifiedDate,d.Subject=l.subject,d.Note=l.note,d.AnnotName=l.annotationId,d.IsCommentLock=l.isCommentLock,d.Comments=l.comments,l.comments&&l.comments.length>0){for(var h=[],p=0;p<l.comments.length;p++)h.push(this.updateComments(l,l.comments[p]));d.Comments=h}if(l.review&&(d.State=l.review.state,d.StateModel=l.review.stateModel),d.CustomData=l.customData,d.Opacity=l.opacity,"textMarkup"===l.shapeAnnotationType){if(d.AnnotType="textMarkup",d.Color=l.color,d.IsMultiSelect=l.isMultiSelect,d.TextMarkupAnnotationType=l.textMarkupAnnotationType,d.TextMarkupContent=l.textMarkupContent,d.TextMarkupStartIndex=l.textMarkupStartIndex,d.TextMarkupEndIndex=l.textMarkupEndIndex,l.rect&&(d.Rect=this.convertBounds(l.rect,!0)),l.bounds&&l.bounds.length>=1){var f=new Array;for(p=0;p<l.bounds.length;p++)f.push(this.convertBounds(l.bounds[p]));d.Bounds=f}i[l.pageNumber].textMarkupAnnotation.push(d)}else if("sticky"===l.shapeAnnotationType)d.AnnotType="sticky",d.Icon="Comment",d.Bounds=this.convertBounds(l.bounds),d.StrokeColor=l.strokeColor,d.Color=l.color,i[l.pageNumber].stickyNotesAnnotation.push(d);else if("FreeText"===l.shapeAnnotationType)d.AnnotType="freeText",d.Name=l.annotationId,d.MarkupText=l.dynamicText,d.Text=l.dynamicText,d.Note=l.dynamicText,d.TextAlign=l.textAlign,d.Thickness=l.thicknes,d.StrokeColor=l.strokeColor,d.FillColor=l.fillColor,d.FontColor=l.fontColor,d.FontSize=l.fontSize,d.FontFamily=l.fontFamily,d.Rotate=l.rotateAngle,d.Bounds=this.convertBounds(l.bounds),d.Font={Name:l.fontFamily,Size:l.fontSize,Bold:l.font.isBold,Italic:l.font.isItalic,Strikeout:l.font.isStrikeout,Underline:l.font.isUnderline},i[l.pageNumber].freeTextAnnotation.push(d);else if("stamp"===l.shapeAnnotationType){var c;d.AnnotType="stamp",d.Icon=l.icon,d.isDynamic=!1,d.Rect=this.convertBounds(l.bounds,!1,!0),d.RotateAngle=l.rotateAngle,d.FillColor=l.fillColor,d.StrokeColor=l.strokeColor,d.StampAnnotationType=l.stampAnnotationType,d.CreationDate=l.creationDate,"image"===l.stampAnnotationType&&((c=[]).push({imagedata:l.stampAnnotationPath}),d.Apperarance=c),l.isDynamicStamp&&(d.IsDynamic=!0,d.StrokeColor=l.stampFillcolor,(c=[]).push({type:"string",text:l.dynamicText,currentFontname:"95b303ab-d397-438a-83af-e2ff8a9900f1",baseFontName:"Helvetica-BoldOblique",fontSize:10,isImport:!0}),d.Apperarance=c),i[l.pageNumber].stampAnnotations.push(d)}else if("Ink"===l.shapeAnnotationType||"Signature"===l.shapeAnnotationType)d.StrokeColor=l.strokeColor,d.FillColor=l.fillColor,d.Thickness=l.thickness,d.Bounds=this.convertBounds(l.bounds),d.PathData=l.data,d.pageIndex=l.pageNumber,"Ink"===l.shapeAnnotationType&&(d.AnnotType="Ink",d.IsPathData=!0,i[l.pageNumber].signatureInkAnnotation.push(d)),"Signature"===l.shapeAnnotationType&&(d.AnnotType="Signature",d.SignatureName=l.annotationId,d.IsSignature=!0,i[l.pageNumber].signatureAnnotation.push(d));else if("Line"===l.shapeAnnotationType||"LineWidthArrowHead"===l.shapeAnnotationType||"Polyline"===l.shapeAnnotationType||"Polygon"===l.shapeAnnotationType||"Polyline"===l.shapeAnnotationType||"Circle"===l.shapeAnnotationType||"Oval"===l.shapeAnnotationType||"Rectangle"===l.shapeAnnotationType||"Square"===l.shapeAnnotationType||"Ellipse"===l.shapeAnnotationType){if(d.AnnotType="shape",d.StrokeColor=l.strokeColor,d.FillColor=l.fillColor,d.Thickness=l.thickness,d.BorderStyle=l.borderStyle,d.BorderDashArray=l.borderDashArray,d.RotateAngle=l.rotateAngle,d.IsCloudShape=l.isCloudShape,d.CloudIntensity=l.cloudIntensity,d.RectangleDifference=l.rectangleDifference,d.LineHeadStart=l.lineHeadStart,d.LineHeadEnd=l.lineHeadEnd,d.IsLocked=l.isLocked,d.EnableShapeLabel=l.enableShapeLabel,d.LabelContent=l.labelContent,d.LabelFillColor=l.labelFillColor,d.LabelBorderColor=l.labelBorderColor,d.FontColor=l.fontColor,d.FontSize=l.fontSize,d.LabelBounds=this.convertBounds(l.labelBounds),d.LabelSettings=l.labelSettings,d.Bounds=this.convertBounds(l.bounds),d.LeaderLength=l.leaderLength,d.LeaderLineExtenstion=l.leaderLineExtension,l.vertexPoints&&l.vertexPoints.length>=1){var m=new Array;for(p=0;p<l.vertexPoints.length;p++)m.push(this.convertVertexPoints(l.vertexPoints[p]));d.VertexPoints=m}if(d.EnableShapeLabel=l.enableShapeLabel,"Distance calculation"===l.subject||"Perimeter calculation"===l.subject||"Area calculation"===l.subject||"Radius calculation"===l.subject||"Volume calculation"===l.subject){d.AnnotType="shape_measure";var g=l.calibrate;g&&(d.Calibrate={Ratio:g.ratio,X:[{Unit:g.x[0].unit,ConversionFactor:g.x[0].conversionFactor,FractionalType:g.x[0].fractionalType,Denominator:g.x[0].denominator,FormatDenominator:g.x[0].formatDenominator}],Distance:[{Unit:g.distance[0].unit,ConversionFactor:g.distance[0].conversionFactor,FractionalType:g.distance[0].fractionalType,Denominator:g.distance[0].denominator,FormatDenominator:g.distance[0].formatDenominator}],Area:[{Unit:g.area[0].unit,ConversionFactor:g.area[0].conversionFactor,FractionalType:g.area[0].fractionalType,Denominator:g.area[0].denominator,FormatDenominator:g.area[0].formatDenominator}],Angle:null,Volume:null,TargetUnitConversion:g.targetUnitConversion,Depth:g.depth}),d.Indent=l.indent,d.Caption=l.caption,d.CaptionPosition=l.captionPosition,d.LeaderLineExtension=l.leaderLineExtension,d.LeaderLength=l.leaderLength,d.LeaderLineOffset=l.leaderLineOffset,i[l.pageNumber].measureShapeAnnotation.push(d)}else i[l.pageNumber].shapeAnnotation.push(d)}}t.pdfAnnotation=i,this.pdfViewer.importAnnotation(t)}},s.prototype.convertBounds=function(e,t,i){if(e){if(t)return{left:e.left?e.left:e.Left?e.Left:0,right:e.right?e.right:e.Right?e.Right:0,bottom:e.bottom?e.bottom:e.Bottom?e.Bottom:0,top:e.top?e.top:e.Top?e.Top:0};var d=e.x?e.x:e.left?e.left:e.Left?e.Left:0,h=e.y?e.y:e.top?e.top:e.Top?e.Top:0,p=e.width?e.width:e.Width?e.Width:0,f=e.height?e.height:e.Height?e.Height:0;return i?{X:this.ConvertPixelToPoint(d),Y:this.ConvertPixelToPoint(h),Left:this.ConvertPixelToPoint(d),Top:this.ConvertPixelToPoint(h),Height:this.ConvertPixelToPoint(f),Width:this.ConvertPixelToPoint(p)}:{X:d,Y:h,Left:d,Top:h,Height:f,Width:p}}},s.prototype.ConvertPixelToPoint=function(e){return.75*e},s.prototype.convertVertexPoints=function(e){if(e){var t=e.x?e.x:e.X?e.X:0,i=e.y?e.y:e.Y?e.Y:0;return{X:t,Y:i,Left:t,Top:i}}},s.prototype.updateComments=function(e,t){if(e&&t){var i={};return i.ShapeAnnotationType=e.shapeAnnotationType,i.Author=t.author,i.AnnotationSelectorSettings=e.annotationSelectorSettings,i.AnnotationSettings=e.annotationSettings,i.PageNumber=e.pageNumber,i.ModifiedDate=t.modifiedDate,i.Subject=e.subject,i.Note=t.note,i.AnnotName=t.annotName,i.Comments=t.comments,i.State=t.review.state,i.StateModel=t.review.stateModel,i.CustomData=e.customData,i.IsLock=t.isLock,i}},s.prototype.removeFocus=function(){if((0,a.xr)()){var e=this.pdfViewer.element.querySelector("#"+this.pdfViewer.element.id+"_totalPage");e&&e.firstElementChild&&e.firstElementChild.firstElementChild&&e.firstElementChild.firstElementChild.blur()}},s.prototype.updateDocumentEditedProperty=function(e){this.pdfViewer.allowServerDataBinding=!0,this.pdfViewer.isDocumentEdited=e,this.pdfViewer.allowServerDataBinding=!1},s.prototype.getWindowDevicePixelRatio=function(){var e=window.devicePixelRatio;return a.AR.isDevice?e=2:e},s.prototype.getZoomRatio=function(e){var t=this.getZoomFactor(),i=e||1,o=this.getWindowDevicePixelRatio();return!a.AR.isDevice||a.AR.isDevice&&t<=.7?i*o:i},s.prototype.importJsonForRotatedDocuments=function(e,t,i,n){var o=Math.abs(e),r=this.pageSize[t];return n!==r.rotation?(o=this.getRotationAngle(n,t),this.isPageRotated=!0):(o=0,this.isPageRotated=!1),1===o?{X:r.width-i.Y-i.Height,Y:i.X,Height:i.Width,Width:i.Height}:2===o?{X:r.width-i.X-i.Width,Y:r.height-i.Y-i.Height,Height:i.Height,Width:i.Width}:3===o?{X:i.Y,Y:r.height-i.X-i.Width,Height:i.Width,Width:i.Height}:i},s.prototype.getRotationAngle=function(e,t){var i=this.pageSize[t];if(0===(e=Math.abs(e)))return i.rotation;if(1===e||90===e){if(0==i.rotation)return 3;if(2===i.rotation)return 1;if(3===i.rotation)return 2}else if(2===e||180===e){if(0==i.rotation)return 2;if(1===i.rotation)return 3;if(3===i.rotation)return 1}else if(3===e||270===e){if(0==i.rotation)return 1;if(2===i.rotation)return 3;if(1===i.rotation)return 2}},s.prototype.calculateVertexPoints=function(e,t,i,n){var o=Math.abs(e),r=[],l=this.pageSize[t];o=n!==l.rotation?this.getRotationAngle(n,t):0;for(var f=0;f<i.length;f++)r.push(1===o?{x:i[f].Y?l.width-i[f].Y:l.width-i[f].y,y:i[f].X?i[f].X:i[f].x}:2===o?{x:i[f].X?l.width-i[f].X:l.width-i[f].x,y:i[f].Y?l.height-i[f].Y:l.height-i[f].y}:3==o?{x:i[f].Y?i[f].Y:i[f].y,y:i[f].X?l.height-i[f].X:l.height-i[f].x}:{x:i[f].X?i[f].X:i[f].x,y:i[f].Y?i[f].Y:i[f].y});return r},s}(),AS=function(){function s(e,t){var i=this;this.textBoundsArray=[],this.characterBound=[],this.closeNotification=function(){i.notifyDialog.hide()},this.pdfViewer=e,this.pdfViewerBase=t}return s.prototype.addTextLayer=function(e,t,i,n){var r;return document.getElementById(this.pdfViewer.element.id+"_textLayer_"+e)||((r=(0,a.az)("div",{id:this.pdfViewer.element.id+"_textLayer_"+e,className:"e-pv-text-layer"})).style.width=t+"px",r.style.height=i+"px",n&&n.appendChild(r)),this.pdfViewerBase.applyElementStyles(r,e),r},s.prototype.renderTextContents=function(e,t,i,n){var o=document.getElementById(this.pdfViewer.element.id+"_textLayer_"+e),r=(0,a.az)("canvas");if(r&&o&&0===o.childNodes.length)for(var l=0;l<t.length;l++){var d=i[l],h=(0,a.az)("div",{id:this.pdfViewer.element.id+"_text_"+e+"_"+l,className:"e-pv-text",attrs:{tabindex:"-1"}});h.textContent=t[l].replace(/&nbsp;/g," ")," "!==t[l].replace(/  +/g," ")&&(h.style.whiteSpace="pre"),d&&this.setStyleToTextDiv(h,d.X,d.Y,d.Bottom,d.Width,d.Height),this.setTextElementProperties(h);var c=r.getContext("2d");c.font=h.style.fontSize+" "+h.style.fontFamily;var u=c.measureText(t[l].replace(/(\r\n|\n|\r)/gm,"")).width;if(d){var m=d.Width*this.pdfViewerBase.getZoomFactor()/u;this.applyTextRotation(m,h,n,d.Rotation)}o.appendChild(h),this.resizeExcessDiv(o,h),this.pdfViewer.textSelectionModule&&this.pdfViewer.enableTextSelection&&!this.pdfViewerBase.isTextSelectionDisabled&&"e-pdfviewer-formFields"!==h.className&&"e-pdfviewer-signatureformfields"!==h.className&&"e-pdfviewer-signatureformfields-signature"!==h.className&&h.classList.add("e-pv-cursor")}},s.prototype.resizeTextContents=function(e,t,i,n,o){var r=this.pdfViewerBase.getElement("_textLayer_"+e),l=(0,a.az)("canvas");if(l)for(var d=0;d<r.childNodes.length;d++){var h=void 0,p=this.pdfViewerBase.getElement("_text_"+e+"_"+d);if((0,a.le)(p))break;i&&(h=i[d])&&this.setStyleToTextDiv(p,h.X,h.Y,h.Bottom,h.Width,h.Height),this.setTextElementProperties(p);var f=l.getContext("2d");f.font=p.style.fontSize+" "+p.style.fontFamily;var c=void 0;if(t){var u=t[d];u&&(c=f.measureText(u.replace(/(\r\n|\n|\r)/gm,"")).width)}else c=f.measureText(p.textContent.replace(/(\r\n|\n|\r)/gm,"")).width;if(h){var m=h.Width*this.pdfViewerBase.getZoomFactor()/c;this.applyTextRotation(m,p,n,h.Rotation)}this.resizeExcessDiv(r,p)}else r.parentElement.removeChild(r);this.pdfViewer.textSearch&&(o||this.pdfViewer.textSearch.resizeSearchElements(e))},s.prototype.applyTextRotation=function(e,t,i,n){var o="scaleX("+e+")";0===i?t.style.transform=n>=0&&n<=90?o:"rotate("+n+"deg) "+o:1===i?t.style.transform=0===n?"rotate(90deg) "+o:-90===n?o:"rotate("+n+"deg) "+o:2===i?t.style.transform=0===n?"rotate(180deg) "+o:180===n?o:"rotate("+n+"deg) "+o:3===i&&(t.style.transform=0===n?"rotate(-90deg) "+o:90===n?o:"rotate("+n+"deg) "+o)},s.prototype.setTextElementProperties=function(e){e.style.fontFamily="serif",e.style.transformOrigin="0%"},s.prototype.resizeTextContentsOnZoom=function(e){var o,t=window.sessionStorage.getItem(this.pdfViewerBase.getDocumentId()+"_"+e+"_"+this.getPreviousZoomFactor()),i=[],n=[];if(t){var r=JSON.parse(t);i=r.textBounds,n=r.textContent,o=r.rotation}if(0!==i.length)this.textBoundsArray.push({pageNumber:e,textBounds:i}),this.resizeTextContents(e,n,i,o);else{var l=this.textBoundsArray.filter(function(d){return d.pageNumber===e});l&&0!==l.length&&this.resizeTextContents(e,null,i=l[0].textBounds,o)}},s.prototype.resizeExcessDiv=function(e,t){var i=e.getBoundingClientRect(),n=t.getBoundingClientRect();(n.width+n.left>=i.width+i.left||n.width>i.width)&&(t.style.width="auto",t.style.width=t.clientWidth+"px")},s.prototype.clearTextLayers=function(e){var t=this.pdfViewerBase.currentPageNumber-3;t=t>0?t:0;var i=this.pdfViewerBase.currentPageNumber+1;i=i<this.pdfViewerBase.pageCount?i:this.pdfViewerBase.pageCount-1;for(var n=document.querySelectorAll('div[id*="'+this.pdfViewer.element.id+'_textLayer_"]'),o=0;o<n.length;o++)if(n[o].style.display="block",this.pdfViewerBase.getMagnified()&&(this.getTextSelectionStatus()||this.getTextSearchStatus())){var r=parseInt(n[o].id.split("_textLayer_")[1]);t+1<=r&&r<=i-1||this.removeElement(n[o],e)}else this.pdfViewerBase.getPinchZoomed(),this.removeElement(n[o],e)},s.prototype.removeElement=function(e,t){t?this.removeForeignObjects(e):a.AR.isIE?e.parentElement?e.parentElement.removeChild(e):e.parentNode&&e.parentNode.removeChild(e):e.remove()},s.prototype.removeForeignObjects=function(e){var t=e.getElementsByClassName("foreign-object");if(t)for(var i=0;i<t.length;i++)if(a.AR.isDevice||this.pdfViewer.enableDesktopMode){if("e-pv-text-layer"===t[i].parentElement.className&&"e-pv-checkbox-outer-div"!==t[0].parentElement.className)e.removeChild(t[0]);else if("e-pv-checkbox-outer-div"===t[i].parentElement.className){var n=document.getElementById(t[0].parentElement.id);n&&n.parentElement.remove()}}else"e-pv-text-layer"===t[i].parentElement.className&&e.removeChild(t[0])},s.prototype.convertToSpan=function(e,t,i,n,o,r){var l=this.pdfViewerBase.getElement("_text_"+e+"_"+t),d=o.substring(i,n),h=document.createTextNode(d);if(r){var p=(0,a.az)("span");p.className=r+" e-pv-text",p.appendChild(h),l.appendChild(p)}else l.appendChild(h)},s.prototype.applySpanForSelection=function(e,t,i,n,o,r){if(this.pdfViewer.textSelectionModule)for(var l=e;l<=t;l++){var d=void 0,h=void 0,p=this.pdfViewerBase.getElement("_textLayer_"+l).childNodes;l===e?(d=i,h=p.length-1):l===t?(d=0,h=n):(d=0,h=p.length-1),e===t&&(d=i,h=n);for(var f=d;f<=h;f++){var c=this.pdfViewerBase.getElement("_text_"+l+"_"+f),u=void 0,m=void 0,g=void 0;if(c&&c.textContent){g=c.textContent.length;var v=c.textContent;c.textContent="",f===d?(m=g,this.convertToSpan(l,f,0,u=l===e?o:0,v,null)):f===h&&l===t?(u=0,m=r):(u=0,m=g),d===h&&e===t&&(u=o,m=r),this.convertToSpan(l,f,u,m,v,"e-pv-maintaincontent"),f===h&&l===t&&this.convertToSpan(l,f,m,v.length,v,null)}}}},s.prototype.clearDivSelection=function(){for(var e=document.querySelectorAll('div[id*="'+this.pdfViewer.element.id+'_textLayer_"]'),t=0;t<e.length;t++)for(var i=e[t].childNodes,n=0;n<i.length;n++){var o=i[n];if("e-pdfviewer-formFields"!==o.className&&"e-pdfviewer-signatureformfields"!==o.className&&"e-pdfviewer-signatureformfields-signature"!==o.className){var r=o.textContent;(o.childNodes.length>1||1===o.childNodes.length&&"SPAN"===o.childNodes[0].tagName)&&(o.textContent="",o.textContent=r)}}},s.prototype.setStyleToTextDiv=function(e,t,i,n,o,r){e.style.left=t*this.pdfViewerBase.getZoomFactor()+"px",e.style.top=i*this.pdfViewerBase.getZoomFactor()+"px";var l=r*this.pdfViewerBase.getZoomFactor();e.style.height=l+"px",e.style.fontSize=r*this.pdfViewerBase.getZoomFactor()+"px"},s.prototype.getTextSelectionStatus=function(){return!!this.pdfViewer.textSelectionModule&&this.pdfViewer.textSelectionModule.isTextSelection},s.prototype.modifyTextCursor=function(e){for(var t=document.querySelectorAll('div[id*="'+this.pdfViewer.element.id+'_textLayer_"]'),i=0;i<t.length;i++)for(var n=t[i].childNodes,o=0;o<n.length;o++){var r=n[o];e&&"e-pdfviewer-formFields"!==r.className&&"e-pdfviewer-signatureformfields"!==r.className&&"e-pdfviewer-signatureformfields-signature"!==r.className?r.classList.add("e-pv-cursor"):r.classList.remove("e-pv-cursor")}},s.prototype.isBackWardSelection=function(e){var t=e.anchorNode.compareDocumentPosition(e.focusNode),i=!1;return(!t&&e.anchorOffset>e.focusOffset||t===Node.DOCUMENT_POSITION_PRECEDING)&&(i=!0),i},s.prototype.getPageIndex=function(e){var i=e.parentElement;return i||(i=e.parentNode),"e-pv-text-layer"===i.className?parseInt(e.id.split("_text_")[1]):parseInt(i.id.split("_text_")[1])},s.prototype.getTextIndex=function(e,t){var n=e.parentElement;return n||(n=e.parentNode),"e-pv-text-layer"===n.className?parseInt(e.id.split("_text_"+t+"_")[1]):parseInt(n.id.split("_text_"+t+"_")[1])},s.prototype.getPreviousZoomFactor=function(){return this.pdfViewer.magnificationModule?this.pdfViewer.magnificationModule.previousZoomFactor:1},s.prototype.getTextSearchStatus=function(){return!!this.pdfViewer.textSearchModule&&this.pdfViewer.textSearchModule.isTextSearch},s.prototype.createNotificationPopup=function(e){var t=this;if(!this.isMessageBoxOpen)if((0,a.xr)()){var n=document.getElementById(this.pdfViewer.element.id+"_notification_popup_content");n&&(n.textContent=e,n.innerHTML=e),this.pdfViewer.textSearchModule&&(this.pdfViewer.textSearch.isMessagePopupOpened=!1),this.pdfViewer._dotnetInstance.invokeMethodAsync("OpenNotificationPopup",e)}else{var i=(0,a.az)("div",{id:this.pdfViewer.element.id+"_notify",className:"e-pv-notification-popup"});this.pdfViewerBase.viewerContainer.appendChild(i),this.notifyDialog=new j.Vq({showCloseIcon:!0,closeOnEscape:!1,isModal:!0,header:this.pdfViewer.localeObj.getConstant("PdfViewer"),buttons:[{buttonModel:{content:this.pdfViewer.localeObj.getConstant("OK"),isPrimary:!0},click:this.closeNotification.bind(this)}],content:'<div class="e-pv-notification-popup-content" tabindex = "0">'+e+"</div>",target:this.pdfViewer.element,beforeClose:function(){if(t.notifyDialog.destroy(),t.pdfViewer.element)try{t.pdfViewer.element.removeChild(i)}catch(o){i.parentElement.removeChild(i)}t.pdfViewer.textSearchModule&&(t.pdfViewer.textSearch.isMessagePopupOpened=!1),t.isMessageBoxOpen=!1}}),this.pdfViewer.enableRtl&&(this.notifyDialog.enableRtl=!0),this.notifyDialog.appendTo(i),this.isMessageBoxOpen=!0}},s}(),MS=function(){function s(e,t){this.copyContextMenu=[],this.contextMenuList=[],this.pdfViewer=e,this.pdfViewerBase=t,this.copyContextMenu=[{text:this.pdfViewer.localeObj.getConstant("Cut"),iconCss:"e-pv-cut-icon"},{text:this.pdfViewer.localeObj.getConstant("Copy"),iconCss:"e-pv-copy-icon"},{text:this.pdfViewer.localeObj.getConstant("Highlight context"),iconCss:"e-pv-highlight-icon"},{text:this.pdfViewer.localeObj.getConstant("Underline context"),iconCss:"e-pv-underline-icon"},{text:this.pdfViewer.localeObj.getConstant("Strikethrough context"),iconCss:"e-pv-strikethrough-icon"},{text:this.pdfViewer.localeObj.getConstant("Paste"),iconCss:"e-pv-paste-icon"},{text:this.pdfViewer.localeObj.getConstant("Delete Context"),iconCss:"e-pv-delete-icon"},{text:this.pdfViewer.localeObj.getConstant("Scale Ratio"),iconCss:"e-pv-scale-ratio-icon"},{separator:!0,id:e.element.id+"_context_menu_comment_separator"},{text:this.pdfViewer.localeObj.getConstant("Comment"),iconCss:"e-pv-comment-icon"},{separator:!0,id:e.element.id+"_context_menu_separator"},{text:this.pdfViewer.localeObj.getConstant("Properties"),iconCss:"e-pv-property-icon"}]}return s.prototype.createContextMenu=function(){this.contextMenuElement=(0,a.az)("ul",{id:this.pdfViewer.element.id+"_context_menu",className:"e-pv-context-menu"}),this.pdfViewer.element.appendChild(this.contextMenuElement),this.contextMenuObj=new re.xV({target:"#"+this.pdfViewerBase.viewerContainer.id,items:this.copyContextMenu,beforeOpen:this.contextMenuOnBeforeOpen.bind(this),select:this.onMenuItemSelect.bind(this),created:this.contextMenuOnCreated.bind(this)}),this.pdfViewer.enableRtl&&(this.contextMenuObj.enableRtl=!0),this.contextMenuObj.appendTo(this.contextMenuElement),this.contextMenuObj.animationSettings.effect=a.AR.isDevice&&!this.pdfViewer.enableDesktopMode?"ZoomIn":"SlideDown"},s.prototype.contextMenuOnCreated=function(e){var t=[this.pdfViewer.localeObj.getConstant("Highlight context"),this.pdfViewer.localeObj.getConstant("Underline context"),this.pdfViewer.localeObj.getConstant("Strikethrough context")];this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.textMarkupAnnotationModule||this.contextMenuObj.enableItems(t,!1)},s.prototype.setTarget=function(e){var t=null;return e.event&&e.event.target&&(this.currentTarget=t=e.event.target),t},s.prototype.contextMenuOnBeforeOpen=function(e){this.pdfViewerBase.preventContextmenu&&(e.cancel=!0);var t=this.setTarget(e),i=0!==this.pdfViewer.selectedItems.annotations.length?this.pdfViewer.selectedItems.annotations[0].annotationSettings:null;if(this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.freeTextAnnotationModule&&this.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus&&t&&"free-text-input"===t.className&&"TEXTAREA"===t.tagName&&(this.pdfViewerBase.isFreeTextContextMenu=!0),this.contextMenuObj.showItems([this.pdfViewer.localeObj.getConstant("Cut"),this.pdfViewer.localeObj.getConstant("Copy"),this.pdfViewer.localeObj.getConstant("Paste"),this.pdfViewer.localeObj.getConstant("Highlight context"),this.pdfViewer.localeObj.getConstant("Underline context"),this.pdfViewer.localeObj.getConstant("Strikethrough context"),this.pdfViewer.localeObj.getConstant("Delete Context"),this.pdfViewer.localeObj.getConstant("Scale Ratio"),this.pdfViewer.localeObj.getConstant("Comment"),this.pdfViewer.localeObj.getConstant("Properties")]),this.pdfViewerBase.getElement("_context_menu_separator").classList.remove("e-menu-hide"),this.pdfViewerBase.getElement("_context_menu_comment_separator").classList.remove("e-menu-hide"),this.contextMenuObj.enableItems([this.pdfViewer.localeObj.getConstant("Cut"),this.pdfViewer.localeObj.getConstant("Copy"),this.pdfViewer.localeObj.getConstant("Paste"),this.pdfViewer.localeObj.getConstant("Delete Context")],!0),this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.checkContextMenuDeleteItem(this.contextMenuObj),this.pdfViewer.textSelectionModule||this.pdfViewerBase.isShapeBasedAnnotationsEnabled()){if(e.event||this.pdfViewerBase.isTouchDesignerMode){var n=this.pdfViewerBase.isClickWithinSelectionBounds(e.event);if(this.pdfViewerBase.isFreeTextContextMenu)this.contextMenuObj.hideItems([this.pdfViewer.localeObj.getConstant("Highlight context"),this.pdfViewer.localeObj.getConstant("Underline context"),this.pdfViewer.localeObj.getConstant("Strikethrough context"),this.pdfViewer.localeObj.getConstant("Properties"),this.pdfViewer.localeObj.getConstant("Comment"),this.pdfViewer.localeObj.getConstant("Scale Ratio"),this.pdfViewer.localeObj.getConstant("Delete Context")]),this.pdfViewerBase.getElement("_context_menu_separator").classList.add("e-menu-hide"),this.pdfViewerBase.getElement("_context_menu_comment_separator").classList.add("e-menu-hide"),this.pdfViewer.annotation.freeTextAnnotationModule&&this.pdfViewer.annotation.freeTextAnnotationModule.isTextSelected?(this.contextMenuObj.enableItems([this.pdfViewer.localeObj.getConstant("Copy")],!0),this.contextMenuObj.enableItems([this.pdfViewer.localeObj.getConstant("Cut")],!0)):(this.contextMenuObj.enableItems([this.pdfViewer.localeObj.getConstant("Copy")],!1),this.contextMenuObj.enableItems([this.pdfViewer.localeObj.getConstant("Cut")],!1),window.getSelection().removeAllRanges()),this.contextMenuObj.enableItems([this.pdfViewer.localeObj.getConstant("Paste")],!(!this.pdfViewer.annotation.freeTextAnnotationModule||""===this.pdfViewer.annotation.freeTextAnnotationModule.selectedText));else if(n&&this.pdfViewer.textSelectionModule)!e.event.target.classList.contains("e-pv-maintaincontent")&&e.event.target.classList.contains("e-pv-text")||e.event.target.classList.contains("e-pv-text-layer")?this.pdfViewerBase.checkIsNormalText()&&(e.cancel=!0):(a.AR.isIE||"edge"===a.AR.info.name)&&e.event.target.classList.contains("e-pv-page-container")&&(e.cancel=!0),this.contextMenuObj.hideItems([this.pdfViewer.localeObj.getConstant("Cut"),this.pdfViewer.localeObj.getConstant("Paste"),this.pdfViewer.localeObj.getConstant("Delete Context"),this.pdfViewer.localeObj.getConstant("Scale Ratio"),this.pdfViewer.localeObj.getConstant("Comment"),this.pdfViewer.localeObj.getConstant("Properties")]),this.pdfViewerBase.getElement("_context_menu_separator").classList.add("e-menu-hide"),this.pdfViewerBase.getElement("_context_menu_comment_separator").classList.add("e-menu-hide");else if(0===this.pdfViewer.selectedItems.annotations.length||"HandWrittenSignature"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&"SignatureText"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&"SignatureImage"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType)if(0===this.pdfViewer.selectedItems.annotations.length||"Path"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType||i.isLock)if(0!==this.pdfViewer.selectedItems.formFields.length&&this.pdfViewer.selectedItems.formFields[0].formFieldAnnotationType&&this.pdfViewer.designerMode)this.onOpeningForShape(!0),!(0,a.le)(this.pdfViewer.toolbar)&&!(0,a.le)(this.pdfViewer.toolbar.formDesignerToolbarModule)&&this.pdfViewer.toolbar.formDesignerToolbarModule.showHideDeleteIcon(!0);else{var o=this.pdfViewerBase.designerModetarget,r=this.pdfViewer.annotationModule;e.event&&e.event.target&&(o=e.event.target),this.pdfViewer.annotation&&this.pdfViewer.annotation.isShapeCopied&&(o.classList.contains("e-pv-text-layer")||o.classList.contains("e-pv-text"))&&!this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation||this.pdfViewer.formDesigner&&this.pdfViewer.formDesigner.isShapeCopied&&(o.classList.contains("e-pv-text-layer")||o.classList.contains("e-pv-text"))?this.onOpeningForShape(!1):this.pdfViewerBase.isCalibrateAnnotationModule()&&this.pdfViewer.annotationModule.measureAnnotationModule.currentAnnotationMode&&!i?(this.contextMenuObj.hideItems([this.pdfViewer.localeObj.getConstant("Highlight context"),this.pdfViewer.localeObj.getConstant("Underline context"),this.pdfViewer.localeObj.getConstant("Strikethrough context"),this.pdfViewer.localeObj.getConstant("Properties")]),this.pdfViewerBase.getElement("_context_menu_separator").classList.add("e-menu-hide"),this.pdfViewerBase.getElement("_context_menu_comment_separator").classList.remove("e-menu-hide"),this.contextMenuObj.enableItems([this.pdfViewer.localeObj.getConstant("Cut"),this.pdfViewer.localeObj.getConstant("Copy"),this.pdfViewer.localeObj.getConstant("Paste"),this.pdfViewer.localeObj.getConstant("Delete Context"),this.pdfViewer.localeObj.getConstant("Comment")],!1)):r&&r.textMarkupAnnotationModule&&r.textMarkupAnnotationModule.currentTextMarkupAnnotation&&!r.textMarkupAnnotationModule.currentTextMarkupAnnotation.annotationSettings.isLock?(this.contextMenuObj.hideItems([this.pdfViewer.localeObj.getConstant("Highlight context"),this.pdfViewer.localeObj.getConstant("Underline context"),this.pdfViewer.localeObj.getConstant("Strikethrough context"),this.pdfViewer.localeObj.getConstant("Properties"),this.pdfViewer.localeObj.getConstant("Cut"),this.pdfViewer.localeObj.getConstant("Copy"),this.pdfViewer.localeObj.getConstant("Paste"),this.pdfViewer.localeObj.getConstant("Scale Ratio")]),this.pdfViewerBase.getElement("_context_menu_separator").classList.add("e-menu-hide"),this.pdfViewerBase.getElement("_context_menu_comment_separator").classList.remove("e-menu-hide"),this.contextMenuObj.showItems([this.pdfViewer.localeObj.getConstant("Delete Context"),this.pdfViewer.localeObj.getConstant("Comment")],!1)):e.cancel=!0}else this.onOpeningForShape(!0);else this.onOpeningForShape(!1,!0)}else this.pdfViewer.textSelectionModule&&"MouseUp"===this.pdfViewer.contextMenuOption?(this.contextMenuObj.hideItems([this.pdfViewer.localeObj.getConstant("Cut"),this.pdfViewer.localeObj.getConstant("Paste"),this.pdfViewer.localeObj.getConstant("Delete Context"),this.pdfViewer.localeObj.getConstant("Scale Ratio"),this.pdfViewer.localeObj.getConstant("Comment"),this.pdfViewer.localeObj.getConstant("Properties")]),this.pdfViewerBase.getElement("_context_menu_separator").classList.add("e-menu-hide"),this.pdfViewerBase.getElement("_context_menu_comment_separator").classList.add("e-menu-hide")):this.hideContextItems();this.enableCommentPanelItem()}else e.cancel=!0;"None"===this.pdfViewer.contextMenuOption?e.cancel=!0:this.contextMenuItems(e),this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.restrictContextMenu()&&(e.cancel=!0),this.pdfViewerBase.isTouchDesignerMode=!1},s.prototype.contextMenuItems=function(e){if(this.pdfViewer.contextMenuSettings.contextMenuItems.length){for(var t=[],n=(this.contextMenuCollection(),this.contextMenuObj.getRootElement()),o=0;o<this.pdfViewer.contextMenuSettings.contextMenuItems.length;o++)for(var r=0;r<this.contextMenuList.length;r++){var l=this.contextMenuList[r].text;switch(l){case"Highlight":l="Highlight context";break;case"Underline":l="Underline context";break;case"Strikethrough":l="Strikethrough context";break;case"Delete":l="Delete Context";break;case"Scale Ratio":l="Scale Ratio";break;case"Comment":this.pdfViewerBase.getElement("_context_menu_comment_separator").classList.add("e-menu-hide");break;case"Properties":this.pdfViewerBase.getElement("_context_menu_separator").classList.add("e-menu-hide")}var d=this.contextMenuList[r].text;if(0===o&&d!==$e[this.pdfViewer.contextMenuSettings.contextMenuItems[o]]&&t.push(d),o>0&&d===$e[this.pdfViewer.contextMenuSettings.contextMenuItems[o]])for(var h=0;h<t.length;h++)if(t[h]===d)if(this.pdfViewer.disableContextMenuItems&&this.pdfViewer.disableContextMenuItems.length>0){for(var p=!1,f=0;f<this.pdfViewer.disableContextMenuItems.length;f++)t[h]===$e[this.pdfViewer.disableContextMenuItems[f]]&&(p=!0);p||t.splice(h,1)}else t.splice(h,1)}var c=this.processLocaleContent(t);this.contextMenuObj.hideItems(c),0===this.getEnabledItemCount(n)&&(e.cancel=!0)}},s.prototype.processLocaleContent=function(e){var t=[];if(e.length>0)for(var i=0;i<e.length;i++){var n=e[i];switch(n){case"Highlight":n="Highlight context";break;case"Underline":n="Underline context";break;case"Strikethrough":n="Strikethrough context";break;case"Delete":n="Delete Context";break;case"ScaleRatio":n="Scale Ratio"}t.push(this.pdfViewer.localeObj.getConstant(n))}return t},s.prototype.contextMenuCollection=function(){return this.contextMenuList=[{text:"Cut"},{text:"Copy"},{text:"Highlight"},{text:"Underline"},{text:"Strikethrough"},{text:"Paste"},{text:"Delete"},{text:"ScaleRatio"},{text:"Comment"},{text:"Properties"}]},s.prototype.getEnabledItemCount=function(e){for(var t=this.copyContextMenu.length,i=e.children,n=0;n<i.length;n++){var o=i[n];(o.classList.contains("e-menu-hide")||o.classList.contains("e-disabled"))&&(t-=1)}return t},s.prototype.hideContextItems=function(){0===this.pdfViewer.selectedItems.annotations.length&&(this.contextMenuObj.hideItems([this.pdfViewer.localeObj.getConstant("Cut"),this.pdfViewer.localeObj.getConstant("Paste"),this.pdfViewer.localeObj.getConstant("Delete Context"),this.pdfViewer.localeObj.getConstant("Scale Ratio"),this.pdfViewer.localeObj.getConstant("Properties")]),this.pdfViewerBase.getElement("_context_menu_separator").classList.add("e-menu-hide"))},s.prototype.enableCommentPanelItem=function(){this.contextMenuObj.enableItems([this.pdfViewer.localeObj.getConstant("Comment")],!!this.pdfViewer.enableCommentPanel),0!==this.pdfViewer.selectedItems.formFields.length&&this.contextMenuObj.enableItems([this.pdfViewer.localeObj.getConstant("Comment")],!1)},s.prototype.onOpeningForShape=function(e,t){this.contextMenuObj.enableItems([this.pdfViewer.localeObj.getConstant("Paste")],!(!this.pdfViewer.annotation||!this.pdfViewer.annotation.isShapeCopied)||!(!this.pdfViewer.formDesigner||!this.pdfViewer.formDesigner.isShapeCopied)),this.contextMenuObj.hideItems([this.pdfViewer.localeObj.getConstant("Highlight context"),this.pdfViewer.localeObj.getConstant("Underline context"),this.pdfViewer.localeObj.getConstant("Strikethrough context"),this.pdfViewer.localeObj.getConstant("Scale Ratio")]),e?0===this.pdfViewer.selectedItems.annotations.length||"Line"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&"LineWidthArrowHead"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&"Distance"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType?0!==this.pdfViewer.selectedItems.formFields.length&&this.pdfViewer.selectedItems.formFields[0].formFieldAnnotationType?(this.contextMenuObj.hideItems([this.pdfViewer.localeObj.getConstant("Comment")]),this.pdfViewerBase.getElement("_context_menu_separator").classList.add("e-menu-hide"),this.contextMenuObj.showItems([this.pdfViewer.localeObj.getConstant("Properties")])):(this.contextMenuObj.hideItems([this.pdfViewer.localeObj.getConstant("Properties")]),this.pdfViewerBase.getElement("_context_menu_separator").classList.add("e-menu-hide")):this.contextMenuObj.showItems([this.pdfViewer.localeObj.getConstant("Properties")]):t?(this.contextMenuObj.hideItems([this.pdfViewer.localeObj.getConstant("Properties"),this.pdfViewer.localeObj.getConstant("Comment")]),this.pdfViewerBase.getElement("_context_menu_separator").classList.add("e-menu-hide"),this.pdfViewerBase.getElement("_context_menu_comment_separator").classList.add("e-menu-hide")):(this.contextMenuObj.hideItems([this.pdfViewer.localeObj.getConstant("Cut"),this.pdfViewer.localeObj.getConstant("Copy"),this.pdfViewer.localeObj.getConstant("Delete Context"),this.pdfViewer.localeObj.getConstant("Properties"),this.pdfViewer.localeObj.getConstant("Comment")]),this.pdfViewerBase.getElement("_context_menu_separator").classList.add("e-menu-hide"),this.pdfViewerBase.getElement("_context_menu_comment_separator").classList.add("e-menu-hide"))},s.prototype.OnItemSelected=function(e){this.pdfViewerBase.OnItemSelected(e)},s.prototype.onMenuItemSelect=function(e){this.pdfViewerBase.OnItemSelected(e.item.text)},s.prototype.destroy=function(){this.contextMenuObj&&(this.previousAction="",this.contextMenuObj.destroy())},s.prototype.close=function(){this.contextMenuObj.close()},s.prototype.open=function(e,t,i){this.contextMenuObj.open(e,t,i)},s}(),Ue=function(){function s(e){this.type="POST",this.mode=!0,this.contentType="application/json;charset=UTF-8",this.pdfViewer=e,this.retryCount=e.retryCount}return s.prototype.send=function(e){var t=this;this.httpRequest=new XMLHttpRequest,this.mode?this.sendRequest(e):setTimeout(function(){t.sendRequest(e)}),this.httpRequest.onreadystatechange=function(){var i=!1,n=t.pdfViewer.viewerBase;n&&n.isPasswordAvailable&&""===n.passwordData&&(i=!0,t.retryCount=0),t.retryCount>0&&(i=t.resendRequest(t,e)),i||t.stateChange(t)},this.httpRequest.onerror=function(){t.error(t)}},s.prototype.clear=function(){this.httpRequest&&this.httpRequest.abort(),this.onSuccess=null,this.onFailure=null,this.onError=null},s.prototype.resendRequest=function(e,t){var i=!1,n=e.httpRequest.status,o=n.toString().split("")[0];if(4===e.httpRequest.readyState&&200===n){var r=void 0;if((r=null!==this.responseType?e.httpRequest.response:e.httpRequest.responseText)&&"object"!=typeof r)try{r=JSON.parse(r)}catch(l){("Document stream does not exist in the cache"===r||"Document Reference pointer does not exist in the cache"===r)&&(i=!0)}}return("5"===o||i)&&(i=!0,this.retryCount--,e.pdfViewer.fireAjaxRequestFailed(n,e.httpRequest.statusText,t.action,!0),e.send(t)),i},s.prototype.sendRequest=function(e){this.httpRequest.open(this.type,this.url,this.mode),this.httpRequest.withCredentials=this.pdfViewer.ajaxRequestSettings.withCredentials,this.httpRequest.setRequestHeader("Content-Type",this.contentType),e=this.addExtraData(e),this.setCustomAjaxHeaders(),null!==this.responseType&&(this.httpRequest.responseType=this.responseType),this.httpRequest.send(JSON.stringify(e))},s.prototype.addExtraData=function(e){return this.pdfViewer.viewerBase.ajaxData="",this.pdfViewer.fireAjaxRequestInitiate(e),this.pdfViewer.viewerBase.ajaxData&&""!==this.pdfViewer.viewerBase.ajaxData&&(e=this.pdfViewer.viewerBase.ajaxData),e},s.prototype.stateChange=function(e){var t=e.httpRequest.status,i=t.toString().split("")[0];4===e.httpRequest.readyState&&200===t?e.successHandler({name:"onSuccess",data:null!==this.responseType?e.httpRequest.response:e.httpRequest.responseText,readyState:e.httpRequest.readyState,status:e.httpRequest.status}):4!==e.httpRequest.readyState||"4"!==i&&"5"!==i||e.failureHandler({name:"onFailure",status:e.httpRequest.status,statusText:e.httpRequest.statusText})},s.prototype.error=function(e){e.errorHandler({name:"onError",status:this.httpRequest.status,statusText:this.httpRequest.statusText})},s.prototype.successHandler=function(e){return this.onSuccess&&this.onSuccess(e),e},s.prototype.failureHandler=function(e){return this.onFailure&&this.onFailure(e),e},s.prototype.errorHandler=function(e){return this.onError&&this.onError(e),e},s.prototype.setCustomAjaxHeaders=function(){for(var e=0;e<this.pdfViewer.ajaxRequestSettings.ajaxHeaders.length;e++)this.httpRequest.setRequestHeader(this.pdfViewer.ajaxRequestSettings.ajaxHeaders[e].headerName,this.pdfViewer.ajaxRequestSettings.ajaxHeaders[e].headerValue)},s}(),IS=function(){function s(e,t){var i=this;this.mouseMoving=!0,this.canvasTouched=!1,this.newObject=[],this.outputString="",this.drawOutputString="",this.imageOutputString="",this.signaturecollection=[],this.outputcollection=[],this.signAnnotationIndex=[],this.fontsign=[],this.signfontStyle=[],this.isSaveSignature=!1,this.isSaveInitial=!1,this.isInitialFiledSaveSignature=!1,this.isSignatureFieldsSaveSignature=!1,this.saveSignatureString="",this.saveInitialString="",this.saveImageString="",this.signatureImageString="",this.initialImageString="",this.maxSaveLimit=5,this.select=function(n){this.canvasTouched&&(this.mouseMoving=!0,this.canvasTouched=!1),n.isSwiped&&"Draw"==this.signaturetype&&this.mouseMoving&&(n.cancel=!0,this.mouseMoving=!1)},this.addStampImage=function(n){if(null!==n.target.files[0]){var r=n.target.files[0];if("image"===r.type.split("/")[0]){var l=new FileReader;l.onload=function(d){var h=document.getElementById(i.pdfViewer.element.id+"_signatureuploadCanvas_"),p=h.getContext("2d"),f=new Image,c=i;f.onload=function(){document.getElementById(i.pdfViewer.element.id+"_e-pv-upload-button").style.visibility="hidden",p.drawImage(f,0,0,h.width,h.height),c.enableCreateButton(!1),c.outputString=f.src,c.signatureImageHeight=f.naturalHeight,c.signatureImageWidth=f.naturalWidth},f.src=d.currentTarget.result,c.outputString=d.currentTarget.result},l.readAsDataURL(r)}}n.target.value="",n.currentTarget.value=""},this.pdfViewer=e,this.pdfViewerBase=t}return s.prototype.createSignaturePanel=function(){var e=this;if((0,a.xr)()){var f=document.getElementById(this.pdfViewer.element.id+"_signatureCanvas_");f&&(this.pdfViewerBase.pageContainer.querySelector(".e-pv-signature-window")||((n=(0,a.az)("div",{id:this.pdfViewer.element.id+"_signature_window",className:"e-pv-signature-window"})).style.display="block",this.pdfViewerBase.pageContainer.appendChild(n)),f.addEventListener("mousedown",this.signaturePanelMouseDown.bind(this)),f.addEventListener("mousemove",this.signaturePanelMouseMove.bind(this)),f.addEventListener("mouseup",this.signaturePanelMouseUp.bind(this)),f.addEventListener("mouseleave",this.signaturePanelMouseUp.bind(this)),f.addEventListener("touchstart",this.signaturePanelMouseDown.bind(this)),f.addEventListener("touchmove",this.signaturePanelMouseMove.bind(this)),f.addEventListener("touchend",this.signaturePanelMouseUp.bind(this)),this.clearSignatureCanvas()),this.pdfViewer._dotnetInstance.invokeMethodAsync("OpenSignaturePanel",this.pdfViewerBase.isToolbarSignClicked)}else{var n;(n=(0,a.az)("div",{id:this.pdfViewer.element.id+"_signature_window",className:"e-pv-signature-window"})).style.display="block",this.pdfViewerBase.pageContainer.appendChild(n);var r,o=this.createSignatureCanvas();r=this.pdfViewer.localeObj.getConstant(this.pdfViewerBase.isToolbarSignClicked?this.pdfViewerBase.isInitialField?"InitialFieldDialogHeaderText":"SignatureFieldDialogHeaderText":this.pdfViewerBase.isInitialField?"HandwrittenInitialDialogHeaderText":"HandwrittenSignatureDialogHeaderText"),this.signatureDialog?this.signatureDialog.content=o:(this.signatureDialog=new j.Vq({showCloseIcon:!0,closeOnEscape:!1,isModal:!0,header:r,cssClass:"e-pv-signature-dialog-height",target:this.pdfViewer.element,content:o,width:"750px",visible:!0,allowDragging:!0,beforeClose:function(){e.clearSignatureCanvas(),e.signatureDialog.destroy(),e.signatureDialog=null,e.tabObj&&e.tabObj.destroy();var c=document.getElementById(e.pdfViewer.element.id+"_signature_window");c&&(c.parentNode?c.parentNode.removeChild(c):c.parentElement.removeChild(c)),!e.pdfViewerBase.isToolbarSignClicked&&!e.pdfViewerBase.drawSignatureWithTool&&!(0,a.le)(e.pdfViewer.formFieldsModule.currentTarget)&&e.pdfViewer.fireFocusOutFormField(e.pdfViewer.formFieldsModule.currentTarget.name,""),e.pdfViewerBase.isToolbarSignClicked=!1,e.pdfViewer.formFieldsModule.setFocus()}}),this.signatureDialog.buttons=[{buttonModel:{content:this.pdfViewer.localeObj.getConstant("Clear"),disabled:!0,cssClass:"e-pv-clearbtn"},click:this.clearSignatureCanvas.bind(this)},{buttonModel:{content:this.pdfViewer.localeObj.getConstant("Cancel"),cssClass:"e-pv-cancelbtn"},click:this.closeSignaturePanel.bind(this)},{buttonModel:{content:this.pdfViewer.localeObj.getConstant("Create"),isPrimary:!0,disabled:!0,cssClass:"e-pv-createbtn"},click:this.addSignatureInPage.bind(this)}],this.signatureDialog.appendTo(n)),this.pdfViewer.element.offsetWidth<750&&this.updateCanvasSize(),this.pdfViewer.enableRtl&&(this.signatureDialog.enableRtl=this.pdfViewer.enableRtl);var l=this.signatureDialog.content.ej2_instances[0].items[0];if("DRAW"===l.header.label){var d=document.getElementById("checkbox");this.hideSignatureCheckbox(d)}else if("TYPE"===l.header.label){var h=document.getElementById("checkbox1");this.hideSignatureCheckbox(h)}else{var p=document.getElementById("checkbox2");this.hideSignatureCheckbox(p)}}this.drawSavedSignature()},s.prototype.drawSavedSignature=function(){if(!this.pdfViewerBase.isToolbarSignClicked&&(this.isSaveSignature||this.isSaveInitial)){!this.pdfViewerBase.isInitialField&&this.isSaveSignature?this.outputString=this.saveSignatureString:this.pdfViewerBase.isInitialField&&this.isSaveInitial&&(this.outputString=this.saveInitialString);var t=document.getElementById(this.pdfViewer.element.id+"_signatureCanvas_").getContext("2d"),i=new Image;i.onload=function(){t.drawImage(i,0,0)},!this.pdfViewerBase.isInitialField&&this.isSaveSignature?i.src=this.signatureImageString:this.pdfViewerBase.isInitialField&&this.isSaveInitial&&(i.src=this.initialImageString);var n=document.getElementById(this.pdfViewer.element.id+"_signatureCheckBox");n&&(n.checked=!0),this.enableCreateButton(!1),this.enableClearbutton(!1)}},s.prototype.hideSignatureCheckbox=function(e){this.pdfViewerBase.isToolbarSignClicked?this.pdfViewerBase.isInitialField?this.pdfViewer.handWrittenSignatureSettings.initialDialogSettings.hideSaveSignature&&this.hideCheckboxParent(e):this.pdfViewer.handWrittenSignatureSettings.signatureDialogSettings.hideSaveSignature&&this.hideCheckboxParent(e):this.pdfViewerBase.isInitialField?this.pdfViewer.initialFieldSettings.initialDialogSettings.hideSaveSignature&&this.hideCheckboxParent(e):this.pdfViewer.signatureFieldSettings.signatureDialogSettings.hideSaveSignature&&this.hideCheckboxParent(e)},s.prototype.saveSignatureCheckbox=function(){return!this.pdfViewerBase.isToolbarSignClicked&&(this.pdfViewerBase.isInitialField?!this.pdfViewer.initialFieldSettings.initialDialogSettings.hideSaveSignature&&this.isInitialFiledSaveSignature:!this.pdfViewer.signatureFieldSettings.signatureDialogSettings.hideSaveSignature&&this.isSignatureFieldsSaveSignature)},s.prototype.hideCheckboxParent=function(e){e&&(e.parentElement.style.display="none")},s.prototype.saveSignatureImage=function(){var e=document.getElementById(this.pdfViewer.element.id+"_signatureCheckBox");if(e&&e.checked){if(""!==this.outputString){this.pdfViewerBase.isInitialField?(this.isSaveInitial=!0,this.saveInitialString=this.outputString):(this.isSaveSignature=!0,this.saveSignatureString=this.outputString);var t=document.getElementById(this.pdfViewer.element.id+"_signatureCanvas_");this.saveImageString=t.toDataURL(),this.pdfViewerBase.isInitialField?this.initialImageString=this.saveImageString:this.signatureImageString=this.saveImageString}}else this.isSaveSignature&&!this.pdfViewerBase.isInitialField?(this.isSaveSignature=!1,this.saveSignatureString="",this.saveImageString="",this.signatureImageString=""):this.isSaveInitial&&this.pdfViewerBase.isInitialField&&(this.isSaveInitial=!1,this.saveInitialString="",this.saveImageString="",this.initialImageString=""),this.clearSignatureCanvas()},s.prototype.addSignature=function(e){if(this.pdfViewerBase.isToolbarSignClicked){var i=this.pdfViewer.annotation.createGUID();this.pdfViewerBase.currentSignatureAnnot=null,this.pdfViewerBase.isSignatureAdded=!0;var n=this.pdfViewerBase.currentPageNumber-1,o=this.pdfViewer.handWrittenSignatureSettings.thickness?this.pdfViewer.handWrittenSignatureSettings.thickness:1,r=this.pdfViewer.handWrittenSignatureSettings.opacity?this.pdfViewer.handWrittenSignatureSettings.opacity:1,l=this.pdfViewer.handWrittenSignatureSettings.strokeColor?this.pdfViewer.handWrittenSignatureSettings.strokeColor:"#000000",p=this.pdfViewer.formFieldsModule.updateSignatureAspectRatio(this.outputString,!0),f=document.getElementById(this.pdfViewer.element.id+"_signatureCanvas_");this.saveImageString=f.toDataURL(),this.pdfViewerBase.isInitialField?this.initialImageString=this.saveImageString:this.signatureImageString=this.saveImageString,this.pdfViewerBase.currentSignatureAnnot={id:"sign"+this.pdfViewerBase.signatureCount,bounds:p,pageIndex:n,data:this.outputString,fontFamily:"Helvetica",fontSize:16,shapeAnnotationType:"HandWrittenSignature",opacity:r,strokeColor:l,thickness:o,signatureName:i};var c=void 0;(c=(0,a.xr)()?document.getElementById(this.pdfViewer.element.id+"_signatureCheckBox"):document.getElementById("checkbox"))&&c.checked&&this.addSignatureCollection(),this.hideSignaturePanel(),this.pdfViewerBase.isToolbarSignClicked=!1}else{c=void 0,c=(0,a.xr)()?document.getElementById(this.pdfViewer.element.id+"_signatureCheckBox"):document.getElementById("checkbox");var u=!1;(0,a.xr)()&&e&&("Image"===e[0]?(this.imageAddSignature(),u=!0,this.outputString=""):"Type"===e[0]&&(this.typeAddSignature(),u=!0,this.outputString="")),u||(f=document.getElementById(this.pdfViewer.element.id+"_signatureCanvas_"),this.saveImageString=f.toDataURL(),c&&c.checked?(this.pdfViewerBase.isInitialField?(this.isSaveInitial=!0,this.initialImageString=this.saveImageString,this.saveInitialString=this.outputString):(this.isSaveSignature=!0,this.signatureImageString=this.saveImageString,this.saveSignatureString=this.outputString),this.checkSaveFiledSign(this.pdfViewerBase.isInitialField,!0)):(this.pdfViewerBase.isInitialField?(this.isSaveInitial=!1,this.saveInitialString=""):(this.isSaveSignature=!1,this.saveSignatureString=""),this.checkSaveFiledSign(this.pdfViewerBase.isInitialField,!1)),this.pdfViewerBase.isInitialField?this.initialImageString=this.saveImageString:this.signatureImageString=this.saveImageString,this.pdfViewer.formFieldsModule.drawSignature(null,null,this.pdfViewerBase.currentTarget,null),u=!0)}},s.prototype.checkSaveFiledSign=function(e,t){e?this.isInitialFiledSaveSignature=t:this.isSignatureFieldsSaveSignature=t},s.prototype.addSignatureInPage=function(){"Draw"===this.signaturetype?this.addSignature():"Type"===this.signaturetype?this.typeAddSignature():this.imageAddSignature(),this.drawOutputString="",this.imageOutputString=""},s.prototype.typeAddSignature=function(){if(this.pdfViewerBase.isToolbarSignClicked){var e=this.pdfViewerBase.getZoomFactor(),i=this.pdfViewer.annotation.createGUID();this.pdfViewerBase.currentSignatureAnnot=null,this.pdfViewerBase.isSignatureAdded=!0;var p,f,n=this.pdfViewerBase.currentPageNumber-1,o=document.getElementById(this.pdfViewer.element.id+"_pageDiv_"+n),r=this.pdfViewer.handWrittenSignatureSettings.thickness?this.pdfViewer.handWrittenSignatureSettings.thickness:1,l=this.pdfViewer.handWrittenSignatureSettings.opacity?this.pdfViewer.handWrittenSignatureSettings.opacity:1,d=this.pdfViewer.handWrittenSignatureSettings.strokeColor?this.pdfViewer.handWrittenSignatureSettings.strokeColor:"#000000";p=(parseFloat(o.style.width)/2-100)/e,f=(parseFloat(o.style.height)/2-32.5)/e;var m=this.pdfViewerBase.getZoomFactor();this.signtypevalue||this.updateSignatureTypeValue(!0),this.pdfViewerBase.currentSignatureAnnot={id:"Typesign"+this.pdfViewerBase.signatureCount,bounds:{left:p/m,top:f/m,x:p/m,y:f/m,width:200,height:65},pageIndex:n,dynamicText:this.signtypevalue,data:this.pdfViewerBase.signatureModule.outputString,shapeAnnotationType:"SignatureText",opacity:l,strokeColor:d,thickness:r,fontSize:16,fontFamily:this.fontName,signatureName:i};var v;(v=(0,a.xr)()?document.getElementById(this.pdfViewer.element.id+"_signatureCheckBox"):document.getElementById("checkbox1"))&&v.checked&&this.addSignatureCollection(),this.signtypevalue="",this.hideSignaturePanel(),this.pdfViewerBase.isToolbarSignClicked=!1}else""===this.outputString&&this.updateSignatureTypeValue(),this.pdfViewer.formFieldsModule.drawSignature("Type","",this.pdfViewerBase.currentTarget),this.hideSignaturePanel()},s.prototype.imageAddSignature=function(){if(this.pdfViewerBase.isToolbarSignClicked){var e=this.pdfViewerBase.getZoomFactor(),i=this.pdfViewer.annotation.createGUID();this.pdfViewerBase.currentSignatureAnnot=null,this.pdfViewerBase.isSignatureAdded=!0;var p,f,n=this.pdfViewerBase.currentPageNumber-1,o=document.getElementById(this.pdfViewer.element.id+"_pageDiv_"+n),r=this.pdfViewer.handWrittenSignatureSettings.thickness?this.pdfViewer.handWrittenSignatureSettings.thickness:1,l=this.pdfViewer.handWrittenSignatureSettings.opacity?this.pdfViewer.handWrittenSignatureSettings.opacity:1,d=this.pdfViewer.handWrittenSignatureSettings.strokeColor?this.pdfViewer.handWrittenSignatureSettings.strokeColor:"#000000",c=100,u=0,m=0;this.signatureImageHeight>=this.signatureImageWidth?(u=this.signatureImageHeight/this.signatureImageHeight*c,m=this.signatureImageWidth/this.signatureImageHeight*c):(u=this.signatureImageHeight/this.signatureImageWidth*c,m=this.signatureImageWidth/this.signatureImageWidth*c),p=(parseFloat(o.style.width)/2-m/2)/e,f=(parseFloat(o.style.height)/2-u/2)/e;var g=this.pdfViewerBase.getZoomFactor();this.pdfViewerBase.currentSignatureAnnot={id:"Typesign"+this.pdfViewerBase.signatureCount,bounds:{left:p/g,top:f/g,x:p/g,y:f/g,width:m,height:u},pageIndex:n,dynamicText:this.signtypevalue,data:this.pdfViewerBase.signatureModule.outputString,shapeAnnotationType:"SignatureImage",opacity:l,strokeColor:d,thickness:r,fontSize:16,fontFamily:this.fontName,signatureName:i};var y;(y=(0,a.xr)()?document.getElementById(this.pdfViewer.element.id+"_signatureCheckBox"):document.getElementById("checkbox2"))&&y.checked&&this.addSignatureCollection(),this.hideSignaturePanel(),this.pdfViewerBase.isToolbarSignClicked=!1}else this.pdfViewer.formFieldsModule.drawSignature("Image","",this.pdfViewerBase.currentTarget),this.hideSignaturePanel()},s.prototype.updateSignatureTypeValue=function(e){var t=document.querySelectorAll(".e-pv-font-sign");if(t)for(var i=0;i<t.length;i++)if(t[i]&&"red"===t[i].style.borderColor){e?(this.signtypevalue=t[i].textContent,this.outputString=t[i].textContent):this.outputString=t[i].textContent;try{this.fontName=JSON.parse(t[i].style.fontFamily)}catch(n){this.fontName=t[i].style.fontFamily}}},s.prototype.hideSignaturePanel=function(){this.signatureDialog&&this.signatureDialog.hide()},s.prototype.bindTypeSignatureClickEvent=function(){if((0,a.xr)())for(var e=0;e<4;e++){var t=document.querySelector("#"+this.pdfViewer.element.id+"_font_signature"+e);t&&t.addEventListener("click",this.typeSignatureclicked.bind(this))}},s.prototype.bindDrawSignatureClickEvent=function(){var e=document.getElementById(this.pdfViewer.element.id+"_signatureCanvas_");e&&(e.addEventListener("mousedown",this.signaturePanelMouseDown.bind(this)),e.addEventListener("mousemove",this.signaturePanelMouseMove.bind(this)),e.addEventListener("mouseup",this.signaturePanelMouseUp.bind(this)),e.addEventListener("mouseleave",this.signaturePanelMouseUp.bind(this)),e.addEventListener("touchstart",this.signaturePanelMouseDown.bind(this)),e.addEventListener("touchmove",this.signaturePanelMouseMove.bind(this)),e.addEventListener("touchend",this.signaturePanelMouseUp.bind(this)))},s.prototype.typeSignatureclicked=function(e){var t=e.target;if(t){for(var i=0;i<4;i++){var n=document.querySelector("#"+this.pdfViewer.element.id+"_font_signature"+i);n&&(n.style.borderColor="")}t.style.borderColor="red",this.outputString=t.textContent;try{this.fontName=JSON.parse(t.style.fontFamily)}catch(o){this.fontName=t.style.fontFamily}this.enableCreateButton(!1)}},s.prototype.createSignatureCanvas=function(){var e=document.getElementById(this.pdfViewer.element.id+"_signatureCanvas_"),t=document.getElementById(this.pdfViewer.element.id+"Signature_appearance");e&&e.remove(),t&&t.remove();var o,r,l,i=(0,a.az)("div",{id:this.pdfViewer.element.id+"Signature_appearance",className:"e-pv-signature-apperance",styles:"margin-top:30px"}),n=(0,a.az)("canvas",{id:this.pdfViewer.element.id+"_signatureCanvas_",className:"e-pv-signature-canvas"});n.width=this.pdfViewer.element.offsetWidth>750?714:this.pdfViewer.element.offsetWidth-35,n.classList.add("e-pv-canvas-signature"),n.height=305,n.style.height="305px",n.style.border="1px dotted #bdbdbd",n.style.backgroundColor="white",n.style.boxSizing="border-box",n.style.borderRadius="2px",n.addEventListener("mousedown",this.signaturePanelMouseDown.bind(this)),n.addEventListener("mousemove",this.signaturePanelMouseMove.bind(this)),n.addEventListener("mouseup",this.signaturePanelMouseUp.bind(this)),n.addEventListener("mouseleave",this.signaturePanelMouseLeave.bind(this)),n.addEventListener("touchstart",this.signaturePanelMouseDown.bind(this)),n.addEventListener("touchmove",this.signaturePanelMouseMove.bind(this)),n.addEventListener("touchend",this.signaturePanelMouseUp.bind(this)),i.appendChild(n),l=this.pdfViewer.localeObj.getConstant(this.pdfViewerBase.isToolbarSignClicked&&!this.pdfViewerBase.isInitialField?"Save Signature":this.pdfViewerBase.isInitialField?"Save Initial":"Save Signature"),this.pdfViewer.hideSaveSignature||((r=document.createElement("input")).type="checkbox",r.id="checkbox",i.appendChild(r),(o=new le.Jg({label:l,disabled:!1,checked:!1})).appendTo(r)),this.pdfViewerBase.isInitialField?this.isSaveInitial=this.saveSignatureCheckbox():this.isSaveSignature=this.saveSignatureCheckbox(),(this.isSaveSignature&&!this.pdfViewerBase.isInitialField||this.isSaveInitial&&this.pdfViewerBase.isInitialField)&&(o.checked=!0);var d=(0,a.az)("div",{id:this.pdfViewer.element.id+"type_appearance",className:"e-pv-signature-apperance",styles:"margin-top:6px"}),h=document.createElement("input");h.type="text",h.id=this.pdfViewer.element.id+"_e-pv-Signtext-box",d.appendChild(h);var p=new G.zC({placeholder:this.pdfViewer.localeObj.getConstant("Enter Signature as Name"),floatLabelType:"Auto"});p.appendTo(h);var f=(0,a.az)("div",{id:this.pdfViewer.element.id+"_font_appearance",className:"e-pv-font-appearance-style"});f.classList.add("e-pv-canvas-signature"),f.style.height="270px",f.style.border="1px dotted #bdbdbd",f.style.boxSizing="border-box",f.style.borderRadius="2px",f.style.backgroundColor="white",f.style.color="black",f.style.marginTop="8px",d.appendChild(f),(r=document.createElement("input")).type="checkbox",r.id="checkbox1",d.appendChild(r),(o=new le.Jg({label:l,disabled:!1,checked:!1})).appendTo(r),p.addEventListener("input",this.renderSignatureText.bind(this)),this.enableCreateButton(!0);var c=(0,a.az)("div",{id:this.pdfViewer.element.id+"Signature_tab"}),u=(0,a.az)("div",{id:this.pdfViewer.element.id+"upload_appearance",className:"e-pv-signature-apperance",styles:"padding-top:30px"}),m=document.createElement("div");m.id=this.pdfViewer.element.id+"_e-pv-upload-button",u.appendChild(m);var g=new le.zx({cssClass:"e-pv-sign-upload",content:this.pdfViewer.localeObj.getConstant("Browse Signature Image")});g.appendTo(m),g.element.style.position="absolute";var v=(0,a.az)("canvas",{id:this.pdfViewer.element.id+"_signatureuploadCanvas_",className:"e-pv-signature-uploadcanvas"});v.width=this.pdfViewer.element.offsetWidth>750?714:this.pdfViewer.element.offsetWidth-35,v.classList.add("e-pv-canvas-signature"),v.height=305,v.style.height="305px",g.element.style.left=v.width/2-50+"px",g.element.style.top=parseFloat(v.style.height)/2+20+"px",v.style.border="1px dotted #bdbdbd",v.style.backgroundColor="white",v.style.boxSizing="border-box",v.style.borderRadius="2px",v.style.zIndex="0",u.appendChild(v),(r=document.createElement("input")).type="checkbox",r.id="checkbox2",u.appendChild(r),(o=new le.Jg({label:l,disabled:!1,checked:!1})).appendTo(r),m.addEventListener("click",this.uploadSignatureImage.bind(this)),this.signfontStyle=[{FontName:"Helvetica"},{FontName:"Times New Roman"},{FontName:"Courier"},{FontName:"Symbol"}];var y=[];if(this.pdfViewerBase.isToolbarSignClicked&&!(0,a.le)(this.pdfViewer.handWrittenSignatureSettings.typeSignatureFonts))for(var b=0;b<4;b++)(0,a.le)(this.pdfViewer.handWrittenSignatureSettings.typeSignatureFonts[b])||(this.signfontStyle[b].FontName=this.pdfViewer.handWrittenSignatureSettings.typeSignatureFonts[b]);for(var C=0;C<this.signfontStyle.length;C++)y[C]=document.createElement("div"),y[C].id="_font_signature"+C,y[C].classList.add("e-pv-font-sign");this.fontsign=y;var x,S=this;return x=this.showHideSignatureTab(this.pdfViewerBase.isToolbarSignClicked?this.pdfViewerBase.isInitialField?this.pdfViewer.handWrittenSignatureSettings.initialDialogSettings.displayMode:this.pdfViewer.handWrittenSignatureSettings.signatureDialogSettings.displayMode:this.pdfViewerBase.isInitialField?this.pdfViewer.initialFieldSettings.initialDialogSettings.displayMode:this.pdfViewer.signatureFieldSettings.signatureDialogSettings.displayMode,i,d,u),this.tabObj=new re.OK({selected:function(V){S.handleSelectEvent(V)},selecting:function(V){S.select(V)},items:x}),this.tabObj.appendTo(c),c&&c.lastElementChild&&(c.lastElementChild.style.overflow="hidden"),this.signaturetype="DRAW"===x[0].header.label?"Draw":"TYPE"===x[0].header.label?"Type":"Image",c},s.prototype.handleSelectEvent=function(e){var t="",n=document.getElementById(this.pdfViewer.element.id+"Signature_tab").ej2_instances[0];if(n&&n.items.length>0)for(var o=0;o<n.items.length;o++)n.items[o].header.text===e.selectedItem.textContent&&(t=n.items[o].header.label);var l=document.getElementById("checkbox");if(l&&l.checked){if(0===e.previousIndex&&""!==this.outputString){this.pdfViewerBase.isInitialField?(this.isSaveInitial=!0,this.saveInitialString=this.outputString):(this.isSaveSignature=!0,this.saveSignatureString=this.outputString);var d=document.getElementById(this.pdfViewer.element.id+"_signatureCanvas_");this.saveImageString=d.toDataURL(),this.pdfViewerBase.isInitialField?this.initialImageString=this.saveImageString:this.signatureImageString=this.saveImageString}}else this.isSaveSignature&&!this.pdfViewerBase.isInitialField?(this.isSaveSignature=!1,this.saveSignatureString="",this.saveImageString="",this.signatureImageString=""):this.isSaveInitial&&this.pdfViewerBase.isInitialField&&(this.isSaveInitial=!1,this.saveInitialString="",this.saveImageString="",this.initialImageString="");if(this.clearSignatureCanvas(e),"draw"===t.toLocaleLowerCase()){this.signaturetype="Draw",this.enableCreateSignatureButton();var h=document.getElementById("checkbox");this.hideSignatureCheckbox(h)}else if("type"===t.toLocaleLowerCase()){this.updateSignatureTypeValue(),this.signaturetype="Type",this.enableCreateSignatureButton();var p=document.getElementById("checkbox1");this.hideSignatureCheckbox(p)}else if("upload"===t.toLocaleLowerCase()){this.signaturetype="Image",this.enableCreateSignatureButton();var f=document.getElementById("checkbox2");this.hideSignatureCheckbox(f)}this.pdfViewer.element.offsetWidth<750&&this.updateCanvasSize()},s.prototype.enableCreateSignatureButton=function(){this.enableCreateButton(""===this.outputString)},s.prototype.showHideSignatureTab=function(e,t,i,n){var o=[];return e&ae.Draw&&o.push({header:{text:this.pdfViewer.localeObj.getConstant("Draw-hand Signature"),label:"DRAW"},content:t}),e&ae.Text&&o.push({header:{text:this.pdfViewer.localeObj.getConstant("Type Signature"),label:"TYPE"},content:i}),e&ae.Upload&&o.push({header:{text:this.pdfViewer.localeObj.getConstant("Upload Signature"),label:"UPLOAD"},content:n}),o},s.prototype.createSignatureFileElement=function(){var e=(0,a.az)("input",{id:this.pdfViewer.element.id+"_signElement",attrs:{type:"file"}});e.setAttribute("accept",".jpg,.jpeg,.png"),e.style.position="absolute",e.style.left="0px",e.style.top="0px",e.style.visibility="hidden",document.body.appendChild(e),e.addEventListener("change",this.addStampImage)},s.prototype.uploadSignatureImage=function(){var e=document.getElementById(this.pdfViewer.element.id+"_signElement");e&&e.click()},s.prototype.renderSignatureText=function(){for(var t=document.getElementById(this.pdfViewer.element.id+"_font_appearance"),i=document.getElementById(this.pdfViewer.element.id+"_e-pv-Signtext-box"),n=0;n<this.signfontStyle.length;n++)this.fontsign[n].innerHTML=i.value,this.fontsign[n].style.fontFamily=this.signfontStyle[n].FontName,"Helvetica"===this.signfontStyle[n].FontName&&(this.fontsign[n].style.borderColor="red"),t.appendChild(this.fontsign[n]);for(n=0;n<this.signfontStyle.length;n++)document.getElementById("_font_signature"+n).addEventListener("click",this.typeSignatureclick.bind(this));this.enableCreateButton(!1),this.enableClearbutton(!1),this.pdfViewer.element.offsetWidth<750&&this.updateCanvasSize()},s.prototype.typeSignatureclick=function(){var e=event.target;document.getElementsByClassName("e-pv-createbtn")[0].disabled=!1;for(var i=0;i<4;i++){var n=document.getElementById("_font_signature"+i);n&&(n.style.borderColor="")}e.style.borderColor="red",this.outputString=e.textContent;try{this.fontName=JSON.parse(e.style.fontFamily)}catch(o){this.fontName=e.style.fontFamily}},s.prototype.addSignatureCollection=function(e,t){var p,i=-1,n=-1,o=-1,r=-1,l=ze(this.outputString),d=document.createElement("canvas"),h=d.getContext("2d"),f=this.pdfViewerBase.currentSignatureAnnot.shapeAnnotationType;if("HandWrittenSignature"===f){if(0!==l.length){for(var c=0;c<l.length;c++){var u=l[c];-1===i?(i=u.x,o=u.x,n=u.y,r=u.y):(i>=(m=u.x)&&(i=m),n>=(g=u.y)&&(n=g),o<=m&&(o=m),r<=g&&(r=g))}var v=o-i,y=r-n,b=v/100,C=y/100,S=0,x=0;e?(d.width=t.currentWidth,d.height=t.currentHeight,b=v/e.width,C=y/e.height,S=e.x-t.currentLeft,x=e.y-t.currentTop):(d.width=100,d.height=100),h.beginPath();for(var V=0;V<l.length;V++){var m=((u=l[V]).x-i)/b+S,g=(u.y-n)/C+x;"M"===u.command?h.moveTo(m,g):"L"===u.command&&h.lineTo(m,g)}h.stroke(),h.closePath(),p=d.toDataURL()}}else p=this.outputString;if(e)this.saveImageString=p;else{var T={};T["sign_"+this.pdfViewerBase.imageCount]=this.outputString,this.outputcollection.push(T);var k=[];k.push({id:"sign_"+this.pdfViewerBase.imageCount,imageData:p,signatureType:f,fontFamily:this.pdfViewerBase.currentSignatureAnnot.fontFamily}),this.signaturecollection.push({image:k,isInitial:this.pdfViewerBase.isInitialField}),this.pdfViewerBase.imageCount++}},s.prototype.getSaveLimit=function(e){return e>this.maxSaveLimit?e=this.maxSaveLimit:e<1&&(e=1),e},s.prototype.RenderSavedSignature=function(){this.pdfViewerBase.signatureCount++;var e=this.pdfViewerBase.getZoomFactor();if(this.pdfViewerBase.isAddedSignClicked){var i=this.pdfViewer.annotation.createGUID();this.pdfViewerBase.currentSignatureAnnot=null,this.pdfViewerBase.isSignatureAdded=!0;var r,l,n=this.pdfViewerBase.currentPageNumber-1,o=document.getElementById(this.pdfViewer.element.id+"_pageDiv_"+n),d=this.pdfViewer.handWrittenSignatureSettings.width?this.pdfViewer.handWrittenSignatureSettings.width:100,h=this.pdfViewer.handWrittenSignatureSettings.height?this.pdfViewer.handWrittenSignatureSettings.height:100,p=this.pdfViewer.handWrittenSignatureSettings.thickness?this.pdfViewer.handWrittenSignatureSettings.thickness:1,f=this.pdfViewer.handWrittenSignatureSettings.opacity?this.pdfViewer.handWrittenSignatureSettings.opacity:1,c=this.pdfViewer.handWrittenSignatureSettings.strokeColor?this.pdfViewer.handWrittenSignatureSettings.strokeColor:"#000000";r=(parseFloat(o.style.width)/2-d/2)/e,l=(parseFloat(o.style.height)/2-h/2)/e;for(var u="",m=void 0,g=void 0,v=0;v<this.outputcollection.length;v++)if((b=event.target)&&b.id==="sign_"+v||b&&b.id==="sign_border"+v){u=this.outputcollection[v]["sign_"+v];break}for(var C=0;C<this.signaturecollection.length;C++){var b=event.target,S=this.signaturecollection[C].image[0].id.split("_")[1];if(b&&b.id==="sign_"+S||b&&b.id==="sign_border"+S){m=this.signaturecollection[C].image[0].signatureType,g=this.signaturecollection[C].image[0].fontFamily;break}}if("HandWrittenSignature"===m){var x=this.pdfViewer.formFieldsModule.updateSignatureAspectRatio(u,!0);d=x.width?x.width:d,h=x.height?x.height:h}else d=150===d?200:this.pdfViewer.handWrittenSignatureSettings.width,h=100===h?65:this.pdfViewer.handWrittenSignatureSettings.height;this.pdfViewerBase.currentSignatureAnnot={id:"sign"+this.pdfViewerBase.signatureCount,bounds:{x:r,y:l,width:d,height:h},pageIndex:n,data:u,shapeAnnotationType:m,opacity:f,fontFamily:g,strokeColor:c,thickness:p,signatureName:i},this.pdfViewerBase.isAddedSignClicked=!1}else this.pdfViewer.formFieldsModule.drawSignature()},s.prototype.updateCanvasSize=function(){var e=document.getElementById(this.pdfViewer.element.id+"_signatureCanvas_");this.setTabItemWidth(e);var t=document.getElementById(this.pdfViewer.element.id+"_signatureuploadCanvas_");this.setTabItemWidth(t);var i=document.getElementById(this.pdfViewer.element.id+"_font_appearance");this.setTabItemWidth(i)},s.prototype.setTabItemWidth=function(e){var t=2,r=document.querySelector(".e-dlg-content");if(r){var l=getComputedStyle(r);t=t+parseInt(l.paddingLeft,10)+parseInt(l.paddingRight,10)}e&&this.signatureDialog&&this.signatureDialog.visible&&(this.pdfViewer.element.offsetWidth>750?(e.width=714,e.style.width="714px"):(e.width=this.pdfViewer.element.offsetWidth-t,e.style.width=e.width+"px"));var d=document.getElementsByClassName("e-pv-font-sign");if(e&&d&&d.length>0)for(var h=0;h<d.length;h++)d[h].style.width=e.width/2-50+"px"},s.prototype.signaturePanelMouseDown=function(e){"contextmenu"!==e.type&&(e.preventDefault(),this.findMousePosition(e),this.mouseDetection=!0,this.oldX=this.mouseX,this.oldY=this.mouseY,this.newObject=[],this.drawMousePosition(e),this.mouseMoving=!0)},s.prototype.enableCreateButton=function(e){var t=document.getElementsByClassName("e-pv-createbtn")[0];t&&(t.disabled=e),this.enableClearbutton(e)},s.prototype.enableClearbutton=function(e){var t=document.getElementsByClassName("e-pv-clearbtn")[0];t&&(t.disabled=e)},s.prototype.signaturePanelMouseMove=function(e){this.mouseDetection&&"Draw"===this.signaturetype&&(this.findMousePosition(e),this.enableCreateButton(!1),this.drawMousePosition(e))},s.prototype.findMousePosition=function(e){if(-1!==e.type.indexOf("touch")){var i=e.target.getBoundingClientRect();this.mouseX=e.changedTouches[0].clientX-i.left,this.mouseY=e.changedTouches[0].clientY-i.top}else this.mouseX=e.offsetX,this.mouseY=e.offsetY},s.prototype.drawMousePosition=function(e){this.mouseDetection&&(this.drawSignatureInCanvas(),this.oldX=this.mouseX,this.oldY=this.mouseY)},s.prototype.drawSignatureInCanvas=function(){var t=document.getElementById(this.pdfViewer.element.id+"_signatureCanvas_").getContext("2d");t.beginPath(),t.moveTo(this.oldX,this.oldY),t.lineTo(this.mouseX,this.mouseY),t.stroke(),t.lineWidth=2,t.arc(this.oldX,this.oldY,1,0,2*Math.PI,!0),t.closePath(),this.newObject.push(this.mouseX,this.mouseY)},s.prototype.signaturePanelMouseUp=function(){this.mouseDetection&&this.convertToPath(this.newObject),this.mouseDetection=!1,"touchend"==event.type&&(this.canvasTouched=!0)},s.prototype.signaturePanelMouseLeave=function(){this.mouseDetection&&this.convertToPath(this.newObject),this.mouseDetection=!1,this.mouseMoving=!1},s.prototype.convertToPath=function(e){this.movePath(e[0],e[1]),this.linePath(e[0],e[1]);for(var t=2;t<e.length;t+=2)this.linePath(e[t],e[t+1])},s.prototype.linePath=function(e,t){this.outputString+="L"+e+","+t+" "},s.prototype.movePath=function(e,t){this.outputString+="M"+e+","+t+" "},s.prototype.clearSignatureCanvas=function(e){var t=!0,i=[];!e||(0,a.le)(e.previousIndex)||(0,a.le)(e.selectedIndex)?(this.outputString="",this.newObject=[]):(t=!1,0===e.previousIndex?(this.drawOutputString=this.outputString,i=this.newObject):2===e.previousIndex&&(this.imageOutputString=this.outputString),this.outputString="",this.newObject=[],0===e.selectedIndex?(this.outputString=this.drawOutputString,this.newObject=i):2===e.selectedIndex&&(this.outputString=this.imageOutputString));var n=!1,o=!1,r=!1;e&&e.currentTarget&&e.currentTarget.classList.contains("e-pv-clearbtn")&&(t=!1,"Draw"===this.signaturetype?n=!0:"Type"===this.signaturetype?o=!0:r=!0);var l=document.getElementById(this.pdfViewer.element.id+"_signatureCanvas_");(l&&t||n)&&l.getContext("2d").clearRect(0,0,l.width,l.height);var h=document.getElementById(this.pdfViewer.element.id+"_signatureuploadCanvas_");if(h&&t||r){h.getContext("2d").clearRect(0,0,h.width,h.height);var p=document.getElementById(this.pdfViewer.element.id+"_e-pv-upload-button");p&&(p.style.visibility="")}var f=document.getElementById(this.pdfViewer.element.id+"_font_appearance"),c=document.getElementById(this.pdfViewer.element.id+"_e-pv-Signtext-box");(f&&c&&t||o)&&(c.value="",(0,a.xr)()||(f.innerHTML="")),this.enableCreateButton(!0)},s.prototype.closeSignaturePanel=function(){this.pdfViewerBase.currentTarget&&(this.pdfViewerBase.drawSignatureWithTool=!0),this.clearSignatureCanvas(),(0,a.xr)()||this.signatureDialog.hide(),this.pdfViewerBase.isToolbarSignClicked=!1,this.pdfViewerBase.drawSignatureWithTool=!1,this.drawOutputString="",this.imageOutputString=""},s.prototype.saveSignature=function(){var e;e=this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_sign"]:window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_sign");for(var t=new Array,i=0;i<this.pdfViewerBase.pageCount;i++)t[i]=[];if(e)for(var n=JSON.parse(e),o=0;o<n.length;o++){var r=[],l=n[o];if(l){for(var d=0;l.annotations.length>d;d++)if(l.annotations[d].strokeColor=JSON.stringify(this.getRgbCode(l.annotations[d].strokeColor?l.annotations[d].strokeColor:"black")),l.annotations[d].bounds=JSON.stringify(this.pdfViewer.annotation.getBounds(l.annotations[d].bounds,l.pageIndex)),"HandWrittenSignature"===l.annotations[d].shapeAnnotationType){var f=gt(ze(l.annotations[d].data));l.annotations[d].data=JSON.stringify(f)}else if("SignatureText"!==l.annotations[d].shapeAnnotationType||this.checkDefaultFont(l.annotations[d].fontFamily))l.annotations[d].data=JSON.stringify(l.annotations[d].data);else{var c=(0,a.az)("canvas"),u=JSON.parse(l.annotations[d].bounds);c.width=u&&u.width||150,c.height=u&&u.height||2*l.annotations[d].fontSize;var m=c.getContext("2d"),g=c.width/2,v=c.height/2+l.annotations[d].fontSize/2-10;m.textAlign="center",m.font=l.annotations[d].fontSize+"px "+l.annotations[d].fontFamily,m.fillText(l.annotations[d].data,g,v),l.annotations[d].data=JSON.stringify(c.toDataURL("image/png")),l.annotations[d].shapeAnnotationType="SignatureImage"}r=l.annotations}t[l.pageIndex]=r}return JSON.stringify(t)},s.prototype.checkDefaultFont=function(e){return"Helvetica"===e||"Times New Roman"===e||"Courier"===e||"Symbol"===e},s.prototype.getRgbCode=function(e){!e.match(/#([a-z0-9]+)/gi)&&!e.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/)&&(e=this.pdfViewer.annotationModule.nameToHash(e));var t=e.split(",");return(0,a.le)(t[1])&&(t=(e=this.pdfViewer.annotationModule.getValue(e,"rgba")).split(",")),{r:parseInt(t[0].split("(")[1]),g:parseInt(t[1]),b:parseInt(t[2]),a:parseInt(t[3])}},s.prototype.renderSignature=function(e,t){var i,n=this.pdfViewerBase.currentSignatureAnnot,o=this.pdfViewer.annotation.createGUID();if(n){"HandWrittenSignature"===this.pdfViewerBase.currentSignatureAnnot.shapeAnnotationType&&(i={id:n.id,bounds:{x:e,y:t,width:n.bounds.width,height:n.bounds.height},pageIndex:n.pageIndex,data:n.data,shapeAnnotationType:"HandWrittenSignature",opacity:n.opacity,fontFamily:n.fontFamily,fontSize:n.fontSize,strokeColor:n.strokeColor,thickness:n.thickness,signatureName:o}),"SignatureText"===this.pdfViewerBase.currentSignatureAnnot.shapeAnnotationType?i={id:n.id,bounds:{x:e,y:t,width:n.bounds.width,height:n.bounds.height},pageIndex:n.pageIndex,data:n.data,shapeAnnotationType:"SignatureText",opacity:n.opacity,fontFamily:n.fontFamily,fontSize:n.fontSize,strokeColor:n.strokeColor,thickness:n.thickness,signatureName:o}:"SignatureImage"===this.pdfViewerBase.currentSignatureAnnot.shapeAnnotationType&&(i={id:n.id,bounds:{x:e,y:t,width:n.bounds.width,height:n.bounds.height},pageIndex:n.pageIndex,data:n.data,shapeAnnotationType:"SignatureImage",opacity:n.opacity,fontFamily:n.fontFamily,fontSize:n.fontSize,strokeColor:n.strokeColor,thickness:n.thickness,signatureName:o}),this.pdfViewer.add(i);var r=document.getElementById(this.pdfViewer.element.id+"_annotationCanvas_"+n.pageIndex);this.pdfViewer.renderDrawing(r,n.pageIndex),this.pdfViewerBase.signatureAdded=!0,this.storeSignatureData(n.pageIndex,i),this.pdfViewer.fireSignatureAdd(n.pageIndex,n.signatureName,n.shapeAnnotationType,n.bounds,n.opacity,n.strokeColor,n.thickness),this.pdfViewerBase.currentSignatureAnnot=null,this.pdfViewerBase.signatureCount++}},s.prototype.renderExistingSignature=function(e,t,i){var n,o=!1;if(!i)for(var r=0;r<this.signAnnotationIndex.length;r++)if(this.signAnnotationIndex[r]===t){o=!0;break}if(e&&!o){e.length>0&&-1===this.signAnnotationIndex.indexOf(t)&&this.signAnnotationIndex.push(t);for(var l=0;l<e.length;l++){var d=e[l];if(d){var h=d.PathData;i&&(h=d.IsSignature?d.PathData:"SignatureImage"===d.AnnotationType||"SignatureText"===d.AnnotationType?JSON.parse(JSON.stringify(d.PathData)):h.includes("command")?Gt(JSON.parse(d.PathData)):d.PathData),this.outputString=h,this.outputString="";var c=d.Bounds,u=(0,a.le)(c.X)?c.x+0:c.X+0,m=(0,a.le)(c.Y)?c.y+0:c.Y+0,g=c.Width?c.Width-0:c.width-0,v=c.Height?c.Height-0:c.height-0;n="SignatureText"===d.AnnotationType?{id:"sign"+this.pdfViewerBase.signatureCount,bounds:{x:u,y:m,width:g,height:v},pageIndex:t,data:h,fontFamily:d.FontFamily,fontSize:d.FontSize,shapeAnnotationType:"SignatureText",opacity:d.Opacity,strokeColor:d.StrokeColor,thickness:d.Thickness,signatureName:d.SignatureName}:"SignatureImage"===d.AnnotationType?{id:"sign"+this.pdfViewerBase.signatureCount,bounds:{x:u,y:m,width:g,height:v},pageIndex:t,data:h,shapeAnnotationType:"SignatureImage",opacity:d.Opacity,strokeColor:d.StrokeColor,thickness:d.Thickness,signatureName:d.SignatureName}:{id:"sign"+this.pdfViewerBase.signatureCount,bounds:{x:u,y:m,width:g,height:v},pageIndex:t,data:h,shapeAnnotationType:"HandWrittenSignature",opacity:d.Opacity,strokeColor:d.StrokeColor,thickness:d.Thickness,signatureName:d.SignatureName}}this.pdfViewer.add(n);var y=document.getElementById(this.pdfViewer.element.id+"_annotationCanvas_"+d.pageIndex);this.pdfViewer.renderDrawing(y,n.pageIndex),this.storeSignatureData(n.pageIndex,n),this.pdfViewerBase.currentSignatureAnnot=null,this.pdfViewerBase.signatureCount++,this.pdfViewerBase.navigationPane&&this.pdfViewerBase.navigationPane.annotationMenuObj&&this.pdfViewer.isSignatureEditable&&(this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant("Export Annotations")],!0),this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant("Export XFDF")],!0))}}},s.prototype.storeSignatureData=function(e,t){this.pdfViewer.annotation.addAction(t.pageIndex,null,t,"Addition","",t,t);var i,n=t.bounds.left?t.bounds.left:t.bounds.x,o=t.bounds.top?t.bounds.top:t.bounds.y;t.wrapper&&t.wrapper.bounds&&(n=t.wrapper.bounds.left,o=t.wrapper.bounds.top),i={id:t.id,bounds:{left:n,top:o,width:t.bounds.width,height:t.bounds.height},shapeAnnotationType:t.shapeAnnotationType,opacity:t.opacity,thickness:t.thickness,strokeColor:t.strokeColor,pageIndex:t.pageIndex,data:t.data,fontSize:t.fontSize,fontFamily:t.fontFamily,signatureName:t.signatureName},Math.round(JSON.stringify(window.sessionStorage).length/1024)+Math.round(JSON.stringify(i).length/1024)>4500&&(this.pdfViewerBase.isStorageExceed=!0,this.pdfViewer.annotationModule.clearAnnotationStorage());var d=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_sign");if(d){this.storeSignatureCollections(i,e);var u=JSON.parse(d);window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_sign");var m=this.pdfViewer.annotationModule.getPageCollection(u,e);if(u[m])u[m].annotations.push(i),u[m].annotations.indexOf(i);else{var g={pageIndex:e,annotations:[]};g.annotations.push(i),g.annotations.indexOf(i),u.push(g)}var c=JSON.stringify(u);this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_sign"]=c:window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_annotations_sign",c)}else{this.storeSignatureCollections(i,e);var p={pageIndex:e,annotations:[]};p.annotations.push(i),p.annotations.indexOf(i);var f=[];f.push(p),c=JSON.stringify(f),this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_sign"]=c:window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_annotations_sign",c)}},s.prototype.modifySignatureCollection=function(e,t,i,n){this.pdfViewerBase.updateDocumentEditedProperty(!0);var o=null,r=this.getAnnotations(t,null);if(null!=r&&i){for(var l=0;l<r.length;l++)if(i.id===r[l].id){if("bounds"===e)r[l].bounds={left:i.wrapper.bounds.left,top:i.wrapper.bounds.top,width:i.bounds.width,height:i.bounds.height},r[l].fontSize=i.fontSize;else if("stroke"===e)r[l].strokeColor=i.wrapper.children[0].style.strokeColor;else if("opacity"===e)r[l].opacity=i.wrapper.children[0].style.opacity;else if("thickness"===e)r[l].thickness=i.wrapper.children[0].style.strokeWidth;else if("delete"===e){this.updateSignatureCollection(r[l]),o=r.splice(l,1)[0];break}if(e&&"delete"!==e&&this.storeSignatureCollections(r[l],t),n){r[l].opacity=i.wrapper.children[0].style.opacity,r[l].strokeColor=i.wrapper.children[0].style.strokeColor,r[l].thickness=i.wrapper.children[0].style.strokeWidth,this.storeSignatureCollections(r[l],t);break}}this.manageAnnotations(r,t)}return o},s.prototype.storeSignatureCollections=function(e,t){var i=this.checkSignatureCollection(e),n=_(e);n.annotationId=e.signatureName,n.pageNumber=t,delete n.annotName,e.id&&(n.uniqueKey=e.id,delete n.id),i.isExisting?this.pdfViewer.signatureCollection.splice(i.position,0,n):this.pdfViewer.signatureCollection.push(n)},s.prototype.checkSignatureCollection=function(e){var t=this.pdfViewer.signatureCollection;if(t&&e)for(var i=0;i<t.length;i++)if(t[i].annotationId===e.signatureName)return this.pdfViewer.signatureCollection.splice(i,1),{isExisting:!0,position:i};return{isExisting:!1,position:null}},s.prototype.updateSignatureCollection=function(e){var t=this.pdfViewer.signatureCollection;if(t&&e)for(var i=0;i<t.length;i++)if(t[i].annotationId===e.signatureName){this.pdfViewer.signatureCollection.splice(i,1);break}},s.prototype.addInCollection=function(e,t){if(t){this.storeSignatureCollections(t,e);var i=this.getAnnotations(e,null);i&&i.push(t),this.manageAnnotations(i,e)}},s.prototype.getAnnotations=function(e,t){var i,n;if(n=this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_sign"]:window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_sign")){var o=JSON.parse(n),r=this.pdfViewer.annotationModule.getPageCollection(o,e);i=o[r]?o[r].annotations:t}else i=t;return i},s.prototype.manageAnnotations=function(e,t){var i;if(i=this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_sign"]:window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_sign")){var n=JSON.parse(i);window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_sign");var o=this.pdfViewer.annotationModule.getPageCollection(n,t);n[o]&&(n[o].annotations=e);var r=JSON.stringify(n);this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_sign"]=r:window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_annotations_sign",r)}},s.prototype.showSignatureDialog=function(e){e&&this.createSignaturePanel()},s.prototype.setAnnotationMode=function(){this.pdfViewerBase.isToolbarSignClicked=!0,this.showSignatureDialog(!0)},s.prototype.setInitialMode=function(){this.pdfViewerBase.isToolbarSignClicked=!0,this.pdfViewerBase.isInitialField=!0,this.showSignatureDialog(!0)},s.prototype.ConvertPointToPixel=function(e){return e*(96/72)},s.prototype.updateSignatureCollections=function(e,t,i){if(e){var o=e.Bounds,r=o.X,l=o.Y,d=o.Width,h=o.Height,p=e.PathData;return i&&(p=Gt(JSON.parse(e.PathData))),{id:"sign"+e.SignatureName,bounds:{x:r,y:l,width:d,height:h},pageIndex:t,data:p,shapeAnnotationType:"HandWrittenSignature",opacity:e.Opacity,strokeColor:e.StrokeColor,thickness:e.Thickness,signatureName:e.SignatureName}}},s.prototype.destroy=function(){window.sessionStorage.removeItem("_annotations_sign");var e=document.getElementById(this.pdfViewer.element.id+"_signElement");e&&(e.removeEventListener("change",this.addStampImage),e.parentElement&&e.parentElement.removeChild(e)),this.signatureDialog&&this.signatureDialog.destroy()},s}(),ES=function(){function s(e,t){this.zoomFactor=1,this.previousZoomFactor=1,this.scrollWidth=25,this.zoomPercentages=[10,25,50,75,100,125,150,200,400],this.isNotPredefinedZoom=!1,this.pinchStep=0,this.reRenderPageNumber=0,this.magnifyPageRerenderTimer=null,this.rerenderOnScrollTimer=null,this.rerenderInterval=null,this.touchCenterX=0,this.touchCenterY=0,this.pageRerenderCount=0,this.imageObjects=[],this.topValue=0,this.isTapToFitZoom=!1,this.fitType=null,this.isPinchZoomed=!1,this.isPagePinchZoomed=!1,this.isRerenderCanvasCreated=!1,this.isMagnified=!1,this.isPagesZoomed=!1,this.isPinchScrolled=!1,this.isAutoZoom=!1,this.isFormFieldPageZoomed=!1,this.isWebkitMobile=!1,this.isFitToPageMode=!0,this.pdfViewer=e,this.pdfViewerBase=t,this.zoomLevel=2,this.isWebkitMobile=/Chrome/.test(navigator.userAgent)||/Google Inc/.test(navigator.vendor)||-1!==navigator.userAgent.indexOf("Safari")}return s.prototype.zoomTo=function(e){e<10?e=10:e>400&&(e=400),this.fitType=null,this.isNotPredefinedZoom=!1,this.isAutoZoom&&this.isInitialLoading?this.pdfViewerBase.onWindowResize():(this.isAutoZoom=!1,this.onZoomChanged(e)),this.isInitialLoading=!1},s.prototype.zoomIn=function(){(this.fitType||this.isNotPredefinedZoom)&&(this.zoomLevel=this.lowerZoomLevel,this.fitType=null),this.isNotPredefinedZoom=!1,this.zoomLevel>=8?this.zoomLevel=8:this.zoomLevel++,this.isAutoZoom=!1,this.onZoomChanged(this.zoomPercentages[this.zoomLevel])},s.prototype.zoomOut=function(){(this.fitType||this.isNotPredefinedZoom)&&(this.zoomLevel=this.higherZoomLevel,this.fitType=null),this.isNotPredefinedZoom=!1,this.zoomLevel<=0?this.zoomLevel=0:this.zoomLevel--,this.isAutoZoom=!1,this.onZoomChanged(this.zoomPercentages[this.zoomLevel])},s.prototype.fitToWidth=function(){this.isAutoZoom=!1;var e=this.calculateFitZoomFactor("fitToWidth");this.onZoomChanged(e)},s.prototype.fitToAuto=function(){this.isAutoZoom=!0;var e=this.calculateFitZoomFactor("fitToWidth");this.onZoomChanged(e)},s.prototype.fitToPage=function(){var e=this.calculateFitZoomFactor("fitToPage");null!==e&&(this.isAutoZoom=!1,this.onZoomChanged(e),this.pdfViewerBase.viewerContainer.style.overflowY=a.AR.isDevice&&!this.pdfViewer.enableDesktopMode?this.isWebkitMobile?"auto":"hidden":"auto",this.pdfViewerBase.pageSize[this.pdfViewerBase.currentPageNumber-1]&&(this.pdfViewerBase.viewerContainer.scrollTop=this.pdfViewerBase.pageSize[this.pdfViewerBase.currentPageNumber-1].top*this.zoomFactor))},s.prototype.calculateFitZoomFactor=function(e){var t=this.pdfViewerBase.viewerContainer.getBoundingClientRect().width,i=this.pdfViewerBase.viewerContainer.getBoundingClientRect().height;if(0===t&&0===i&&(t=parseFloat(this.pdfViewer.width.toString()),i=parseFloat(this.pdfViewer.height.toString())),isNaN(i)||isNaN(t))return null;if(this.fitType=e,"fitToWidth"===this.fitType){var n=(t-this.scrollWidth)/this.pdfViewerBase.highestWidth;return this.isAutoZoom&&(this.fitType=null,1===(n=Math.min(1,n))&&(this.zoomLevel=2)),parseInt((100*n).toString())}this.isFitToPageMode=!0;var r=i/this.pdfViewerBase.highestHeight;return r>(n=(t-this.scrollWidth-10)/this.pdfViewerBase.highestWidth)&&(r=n,this.isFitToPageMode=!1),parseInt((100*r).toString())},s.prototype.pinchIn=function(){this.fitType=null;var e=this.zoomFactor-this.pinchStep;if(e<4&&e>2&&(e=this.zoomFactor-this.pinchStep),e<.1&&(e=.1),this.isPinchZoomed=!0,this.onZoomChanged(100*e),this.isTapToFitZoom=!0,a.AR.isDevice&&!this.pdfViewer.enableDesktopMode&&100*this.zoomFactor==50){var t=this.calculateFitZoomFactor("fitToWidth");this.fitType=null,t<=50&&this.fitToWidth()}},s.prototype.pinchOut=function(){this.fitType=null;var e=this.zoomFactor+this.pinchStep;a.AR.isDevice&&!this.pdfViewer.enableDesktopMode?e>2&&(e=2):(e>2&&(e+=this.pinchStep),e>4&&(e=4)),this.isTapToFitZoom=!0,this.isPinchZoomed=!0,this.onZoomChanged(100*e)},s.prototype.getZoomLevel=function(e){for(var t=0,i=this.zoomPercentages.length-1;t<=i&&(0!==t||0!==i);){var n=Math.round((t+i)/2);this.zoomPercentages[n]<=e?t=n+1:this.zoomPercentages[n]>=e&&(i=n-1)}return this.higherZoomLevel=t,this.lowerZoomLevel=i,i},s.prototype.checkZoomFactor=function(){return this.zoomPercentages.indexOf(100*this.zoomFactor)>-1},s.prototype.onZoomChanged=function(e){if(e&&(this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.closePopupMenu(),this.previousZoomFactor=this.zoomFactor,this.zoomLevel=this.getZoomLevel(e),this.zoomFactor=this.getZoomFactor(e),this.pdfViewerBase.isMinimumZoom=this.zoomFactor<=.25,this.pdfViewerBase.viewerContainer.style.overflowY=a.AR.isDevice&&!this.pdfViewer.enableDesktopMode?this.isWebkitMobile?"auto":"hidden":"auto",this.pdfViewerBase.pageCount>0&&(this.previousZoomFactor!==this.zoomFactor&&(this.isPinchZoomed?(a.AR.isDevice&&!this.pdfViewer.enableDesktopMode&&(this.pdfViewerBase.mobilePageNoContainer.style.left=this.pdfViewer.element.clientWidth/2-parseFloat(this.pdfViewerBase.mobilePageNoContainer.style.width)/2+"px"),this.responsivePages()):this.magnifyPages()),(0,a.xr)()||this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.updateZoomButtons(),this.isInitialLoading||this.previousZoomFactor!==this.zoomFactor&&(this.pdfViewer.zoomValue=parseInt((100*this.zoomFactor).toString()),this.pdfViewer.fireZoomChange())),this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.updateZoomPercentage(this.zoomFactor),this.isInitialLoading||this.previousZoomFactor!==this.zoomFactor&&(this.pdfViewer.zoomValue=parseInt((100*this.zoomFactor).toString()),this.pdfViewer.fireZoomChange()),a.AR.isDevice&&!this.pdfViewer.enableDesktopMode&&this.isPinchZoomed)){var t=parseInt((100*this.zoomFactor).toString())+"%";this.pdfViewerBase.navigationPane.createTooltipMobile(t)}},s.prototype.setTouchPoints=function(e,t){this.touchCenterX=e,this.touchCenterY=t},s.prototype.initiatePinchMove=function(e,t,i,n){this.isPinchScrolled=!1,this.isMagnified=!1,this.reRenderPageNumber=this.pdfViewerBase.currentPageNumber,this.touchCenterX=(e+i)/2,this.touchCenterY=(t+n)/2,this.zoomOverPages(e,t,i,n)},s.prototype.magnifyPages=function(){this.clearRerenderTimer(),this.isPagesZoomed||(this.reRenderPageNumber=this.pdfViewerBase.currentPageNumber),!this.pdfViewerBase.documentLoaded&&!this.pdfViewerBase.isInitialPageMode&&(this.isPagesZoomed=!0);var e=this.getMagnifiedValue(this.pdfViewerBase.viewerContainer.scrollTop);this.pdfViewer.textSelectionModule&&this.pdfViewer.textSelectionModule.maintainSelectionOnZoom(!1,!0),this.pdfViewer.formDesignerModule&&!this.pdfViewerBase.documentLoaded&&!this.pdfViewerBase.isDocumentLoaded&&(this.isFormFieldPageZoomed=!0),this.isInitialLoading||(this.isMagnified=!0),this.updatePageLocation(),this.resizeCanvas(this.reRenderPageNumber),this.pdfViewer.textSelectionModule&&this.pdfViewer.textSelectionModule.resizeTouchElements();var t=this.pdfViewer.annotationModule;if(t&&t.textMarkupAnnotationModule&&this.pdfViewer.annotationModule.textMarkupAnnotationModule.updateCurrentResizerPosition(),this.pdfViewerBase.pageSize.length>0){this.pdfViewerBase.pageContainer.style.height=this.topValue+this.pdfViewerBase.getPageHeight(this.pdfViewerBase.pageSize.length-1)+"px";var i=this;this.pdfViewerBase.renderedPagesList=[],this.pdfViewerBase.pinchZoomStorage=[],this.pdfViewerBase.viewerContainer.scrollTop=e,this.pdfViewerBase.documentLoaded||(this.magnifyPageRerenderTimer=setTimeout(function(){i.rerenderMagnifiedPages()},800))}},s.prototype.updatePageLocation=function(){this.topValue=0;for(var e=1;e<this.pdfViewerBase.pageSize.length;e++)this.topValue+=(this.pdfViewerBase.pageSize[e].height+this.pdfViewerBase.pageGap)*this.zoomFactor;var t=this.pdfViewerBase.pageCount<10?this.pdfViewerBase.pageCount:10;for(e=0;e<t;e++)this.updatePageContainer(e,this.pdfViewerBase.getPageWidth(e),this.pdfViewerBase.getPageHeight(e),this.pdfViewerBase.getPageTop(e),!0)},s.prototype.updatePageContainer=function(e,t,i,n,o){var r=this.pdfViewerBase.getElement("_pageDiv_"+e);if(r){r.style.width=t+"px",r.style.height=i+"px";var l=this.pdfViewerBase.getElement("_textLayer_"+e);l&&(l.style.width=t+"px",l.style.height=i+"px"),r.style.width=t+"px",r.style.height=i+"px",this.pdfViewer.enableRtl?r.style.right=this.pdfViewerBase.updateLeftPosition(e)+"px":r.style.left=this.pdfViewerBase.updateLeftPosition(e)+"px",r.style.top=n+"px",this.pdfViewerBase.pageContainer.style.width=this.pdfViewerBase.viewerContainer.clientWidth+"px",this.pdfViewerBase.renderPageCanvas(r,t,i,e,"block")}},s.prototype.clearRerenderTimer=function(){clearTimeout(this.rerenderOnScrollTimer),clearTimeout(this.magnifyPageRerenderTimer),this.clearIntervalTimer(),this.isPinchScrolled=!1},s.prototype.clearIntervalTimer=function(){clearInterval(this.rerenderInterval),this.rerenderInterval=null,this.clearRendering();for(var e=document.querySelectorAll('canvas[id*="'+this.pdfViewer.element.id+'_oldCanvas_"]'),t=0;t<e.length;t++){var i=parseInt(e[t].id.split("_oldCanvas_")[1]),n=this.pdfViewerBase.getElement("_pageCanvas_"+i);n?(e[t].id=n.id,n.parentElement.removeChild(n)):e[t].id=this.pdfViewer.element.id+"_pageCanvas_"+i,this.pdfViewerBase.isTextMarkupAnnotationModule()&&this.pdfViewer.annotationModule.textMarkupAnnotationModule.rerenderAnnotationsPinch(t)}this.isRerenderCanvasCreated=!1},s.prototype.pushImageObjects=function(e){(0,a.le)(this.imageObjects)||this.imageObjects&&this.imageObjects.push(e)},s.prototype.clearRendering=function(){if(this.imageObjects){for(var e=0;e<this.imageObjects.length;e++)this.imageObjects[e]&&(this.imageObjects[e].onload=null);this.imageObjects=[]}},s.prototype.rerenderMagnifiedPages=function(){!this.pdfViewerBase.isInitialLoaded&&!this.pdfViewerBase.isDocumentLoaded||this.pdfViewerBase.isInitialPageMode?this.pdfViewerBase.isInitialPageMode&&(this.pageRerenderCount=0,this.pdfViewerBase.renderedPagesList=[],this.pdfViewerBase.pinchZoomStorage=[],this.isMagnified=!1,this.pdfViewerBase.pageViewScrollChanged(this.reRenderPageNumber),this.pdfViewerBase.isInitialPageMode=!1):(this.renderInSeparateThread(this.reRenderPageNumber),this.isPagesZoomed=!1)},s.prototype.renderInSeparateThread=function(e){var t=this;this.designNewCanvas(e),this.pageRerenderCount=0,this.pdfViewerBase.renderedPagesList=[],this.pdfViewerBase.pinchZoomStorage=[],this.isMagnified=!1,this.pdfViewerBase.pageViewScrollChanged(this.reRenderPageNumber);var i=this;this.rerenderInterval=setInterval(function(){t.initiateRerender(i)},1)},s.prototype.responsivePages=function(){this.isPagesZoomed=!0,this.clearRerenderTimer(),this.pdfViewer.textSelectionModule&&this.pdfViewer.textSelectionModule.clearTextSelection(),this.pdfViewer.textSearchModule&&this.pdfViewer.textSearchModule.clearAllOccurrences();var e=this.pdfViewerBase.viewerContainer.scrollTop;if(this.isAutoZoom=!1,this.updatePageLocation(),this.pdfViewerBase.pageContainer.style.height=this.topValue+this.pdfViewerBase.pageSize[this.pdfViewerBase.pageSize.length-1].height*this.zoomFactor+"px",this.resizeCanvas(this.pdfViewerBase.currentPageNumber),this.pdfViewerBase.textLayer&&this.pdfViewer.formDesignerModule&&this.pdfViewerBase.textLayer.clearTextLayers(!0),this.isPinchZoomed&&this.calculateScrollValues(e),this.pdfViewerBase.renderedPagesList=[],this.pdfViewerBase.pinchZoomStorage=[],this.pdfViewer.formFieldsModule&&!this.pdfViewer.formDesignerModule){var t=this;this.pdfViewerBase.documentLoaded||(this.magnifyPageRerenderTimer=setTimeout(function(){t.rerenderMagnifiedPages()},800))}},s.prototype.calculateScrollValues=function(e){var i=this.pdfViewerBase.getElement("_pageDiv_"+(this.pdfViewerBase.currentPageNumber-1));if(i){var n=i.getBoundingClientRect(),o=n.top*this.previousZoomFactor,r=e+this.touchCenterY;this.pdfViewerBase.viewerContainer.scrollTop=n.top*this.zoomFactor+(r-o<0?r-o:this.zoomFactor/this.previousZoomFactor*(r-o))-this.touchCenterY,this.pdfViewerBase.viewerContainer.scrollLeft+=(this.touchCenterX-n.left)*(this.zoomFactor/(n.width*this.previousZoomFactor/n.width)-1)}},s.prototype.rerenderOnScroll=function(){var e=this;if(this.isPinchZoomed=!1,this.isPinchScrolled){this.rerenderOnScrollTimer=null,this.isPinchScrolled=!1,this.reRenderPageNumber=this.pdfViewerBase.currentPageNumber,this.pdfViewerBase.renderedPagesList=[],this.pdfViewerBase.pinchZoomStorage=[];for(var t=document.querySelectorAll('img[id*="'+this.pdfViewer.element.id+'_pageCanvas_"]'),n=0;n<t.length;n++){var o=parseInt(t[n].id.split("_pageCanvas_")[1]),r=this.pdfViewerBase.pageSize[o].width;816<r&&this.pdfViewer.tileRenderingSettings.enableTileRendering&&(t[n].style.width=r*this.pdfViewerBase.getZoomFactor()+"px",t[n].style.height=this.pdfViewerBase.pageSize[o].height*this.pdfViewerBase.getZoomFactor()+"px")}if(this.pdfViewerBase.textLayer){var l=document.querySelectorAll('div[id*="'+this.pdfViewer.element.id+'_textLayer_"]');for(n=0;n<l.length;n++)l[n].style.display="block"}if(this.pdfViewerBase.isTextMarkupAnnotationModule())for(var d=document.querySelectorAll('canvas[id*="'+this.pdfViewer.element.id+'_annotationCanvas_"]'),h=0;h<d.length;h++)o=d[h].id.split("_annotationCanvas_")[1],this.pdfViewer.annotationModule.textMarkupAnnotationModule.rerenderAnnotationsPinch(parseInt(o));this.pdfViewerBase.pageViewScrollChanged(this.reRenderPageNumber),this.isPagePinchZoomed=!1,this.rerenderOnScrollTimer=setTimeout(function(){e.pdfViewerBase.pageViewScrollChanged(e.reRenderPageNumber)},300)}},s.prototype.pinchMoveScroll=function(){var e=this;this.isRerenderCanvasCreated&&this.clearIntervalTimer(),(this.isPagesZoomed||!this.isRerenderCanvasCreated&&this.isPagePinchZoomed)&&(this.clearRendering(),this.isPagesZoomed=!1,clearTimeout(this.magnifyPageRerenderTimer),this.isPinchScrolled=!0,this.isFormFieldPageZoomed=!0,this.rerenderOnScrollTimer=setTimeout(function(){e.rerenderOnScroll()},100))},s.prototype.initiateRerender=function(e){var t=!1;(this.previousZoomFactor<.4||this.pdfViewerBase.isMinimumZoom)&&(t=!0),(e.pageRerenderCount===e.pdfViewerBase.reRenderedCount||t)&&0!==e.pageRerenderCount&&0!==e.pdfViewerBase.reRenderedCount&&(e.reRenderAfterPinch(this.reRenderPageNumber),e.isFormFieldPageZoomed=!1)},s.prototype.reRenderAfterPinch=function(e){this.pageRerenderCount=0;var t=e-3,i=e+1;this.pdfViewerBase.isMinimumZoom&&(t=e-4,i=e+4),i=i<this.pdfViewerBase.pageCount?i:this.pdfViewerBase.pageCount-1;for(var n=t=t>0?t:0;n<=i;n++){var o=this.pdfViewerBase.getElement("_pageDiv_"+n),l=(this.pdfViewerBase.getElement("_pageCanvas_"+n),this.pdfViewerBase.getElement("_oldCanvas_"+n));l&&l.parentNode.removeChild(l),this.pdfViewerBase.isTextMarkupAnnotationModule()?this.pdfViewer.annotationModule.textMarkupAnnotationModule.rerenderAnnotations(n):this.pdfViewer.formDesignerModule&&(this.rerenderAnnotations(n),this.pdfViewer.renderDrawing(void 0,e)),o&&(o.style.visibility="visible")}this.isRerenderCanvasCreated=!1,this.isPagePinchZoomed=!1,0!==this.pdfViewerBase.reRenderedCount&&(this.pdfViewerBase.reRenderedCount=0,this.pageRerenderCount=0,clearInterval(this.rerenderInterval),this.rerenderInterval=null),this.imageObjects=[]},s.prototype.rerenderAnnotations=function(e){for(var t=document.querySelectorAll("#"+this.pdfViewer.element.id+"_old_annotationCanvas_"+e),i=0;i<t.length;i++)t[i]&&t[i].parentElement.removeChild(t[i]);var n=this.pdfViewerBase.getElement("_annotationCanvas_"+e);n&&(n.style.display="block")},s.prototype.designNewCanvas=function(e){this.pdfViewerBase.textLayer&&this.pdfViewerBase.textLayer.clearTextLayers();var t=e-3,i=e+1;this.pdfViewerBase.isMinimumZoom&&(t=e-4,i=e+4),i=i<this.pdfViewerBase.pageCount?i:this.pdfViewerBase.pageCount-1;for(var n=t=t>0?t:0;n<=i;n++){var o=this.pdfViewerBase.getElement("_pageCanvas_"+n),r=this.pdfViewerBase.pageSize[n].width*this.zoomFactor,l=this.pdfViewerBase.pageSize[n].height*this.zoomFactor;o&&!this.pdfViewer.restrictZoomRequest?this.pdfViewerBase.renderPageCanvas(this.pdfViewerBase.getElement("_pageDiv_"+n),r,l,n,"none"):this.pdfViewer.restrictZoomRequest||this.pdfViewerBase.renderPageCanvas(this.pdfViewerBase.getElement("_pageDiv_"+n),r,l,n,"none")}this.isRerenderCanvasCreated=!0},s.prototype.pageRerenderOnMouseWheel=function(){var e=this;this.isRerenderCanvasCreated&&(this.clearIntervalTimer(),clearTimeout(this.magnifyPageRerenderTimer),this.isPinchScrolled||(this.isPinchScrolled=!0,this.rerenderOnScrollTimer=setTimeout(function(){e.rerenderOnScroll()},100)))},s.prototype.renderCountIncrement=function(){this.isRerenderCanvasCreated&&this.pageRerenderCount++},s.prototype.rerenderCountIncrement=function(){this.pageRerenderCount>0&&this.pdfViewerBase.reRenderedCount++},s.prototype.resizeCanvas=function(e){var t=this.pdfViewer.annotationModule;if(t&&t.inkAnnotationModule){var i=parseInt(t.inkAnnotationModule.currentPageNumber);t.inkAnnotationModule.drawInkAnnotation(i)}t&&t.freeTextAnnotationModule&&t.freeTextAnnotationModule.addInputInZoom({x:t.freeTextAnnotationModule.currentPosition[0],y:t.freeTextAnnotationModule.currentPosition[1],width:t.freeTextAnnotationModule.currentPosition[2],height:t.freeTextAnnotationModule.currentPosition[3]});var o=e-3,r=e+3;this.pdfViewerBase.isMinimumZoom&&(o=e-4,r=e+4),r=r<this.pdfViewerBase.pageCount?r:this.pdfViewerBase.pageCount-1;for(var l=o=o>0?o:0;l<=r;l++){var d=this.pdfViewerBase.getElement("_pageDiv_"+l),h=document.getElementById(this.pdfViewer.element.id+"_textLayer_"+l);if(d&&o<=l&&l<=r){var p=!1;if(this.pdfViewer.textSelectionModule&&(p=this.pdfViewer.textSelectionModule.isSelectionAvailableOnScroll(l)),null!=this.pdfViewerBase.pageSize[l]){var f=this.pdfViewerBase.pageSize[l].width*this.zoomFactor,c=this.pdfViewerBase.pageSize[l].height*this.zoomFactor;d.style.width=f+"px",d.style.height=c+"px",d.style.top=this.pdfViewerBase.pageSize[l].top*this.zoomFactor+"px",this.pdfViewer.enableRtl?d.style.right=this.pdfViewerBase.updateLeftPosition(l)+"px":d.style.left=this.pdfViewerBase.updateLeftPosition(l)+"px";var u=this.pdfViewerBase.getElement("_pageCanvas_"+l);u&&(u.style.width=f+"px",u.style.height=c+"px",this.pdfViewer.annotation?this.pdfViewer.annotationModule.resizeAnnotations(f,c,l):this.pdfViewer.formDesignerModule&&this.pdfViewer.formDesignerModule.resizeAnnotations(f,c,l));var m=this.pdfViewerBase.retrieveCurrentZoomFactor(),v=void 0,y=void 0;v=y=this.pdfViewerBase.getTileCount(this.pdfViewerBase.pageSize[l].width);var b=this.pdfViewer.tileRenderingSettings;if(b.enableTileRendering&&b.x>0&&b.y>0&&(1200<this.pdfViewerBase.pageSize[l].width||this.pdfViewerBase.getZoomFactor()>2)&&(v=b.x,y=b.y),1==v*y){var S=this.pdfViewerBase.getWindowSessionStorage(l,m)?this.pdfViewerBase.getWindowSessionStorage(l,m):this.pdfViewerBase.getPinchZoomPage(l);if(S){if(x=(S=JSON.parse(S)).image){u.src=x,u.style.display="block";for(var V=document.querySelectorAll('img[id*="'+this.pdfViewer.element.id+"_tileimg_"+l+'_"]'),T=this.pdfViewerBase.getElement("_pageDiv_"+l),k=0;k<V.length;k++){var A=V[k].id.split("_");parseFloat(A[A.length-3])!=this.pdfViewerBase.getZoomFactor()&&T.removeChild(V[k])}for(var M=document.querySelectorAll('img[id*="'+this.pdfViewer.element.id+'_oldCanvas"]'),I=0;I<M.length;I++)d.removeChild(M[I])}this.pdfViewerBase.isReRenderRequired=!1}else this.pdfViewerBase.isReRenderRequired=!0}else{V=document.querySelectorAll('img[id*="'+this.pdfViewer.element.id+"_tileimg_"+l+'_"]');for(var B=0;B<V.length;B++){A=V[B].id.split("_");var N=parseFloat(A[A.length-2]),D=parseFloat(A[A.length-1]),Z=JSON.parse(this.pdfViewerBase.getWindowSessionStorageTile(l,N,D,m));if(Z&&Z.zoomFactor&&(m=Z.zoomFactor),parseFloat(A[A.length-4])===l){u.style.display="none";var O=V[B];if(O.nodeType==Node.ELEMENT_NODE){var H=1.5;(0,a.le)(Z)||(H=(0,a.le)(Z.scaleFactor)?1.5:Z.scaleFactor);var x,Te=this.pdfViewerBase.pageSize[l].width*m*H/v,ke=this.pdfViewerBase.pageSize[l].height*m*H/y,rt=Te,Rt=parseFloat(A[A.length-2])*Te,fi=parseFloat(A[A.length-1])*ke;O.width=rt*this.pdfViewerBase.getZoomFactor()/m/H,O.style.width=rt*this.pdfViewerBase.getZoomFactor()/m/H+"px",O.style.left=Rt*this.pdfViewerBase.getZoomFactor()/m/H+"px",O.style.top=fi*this.pdfViewerBase.getZoomFactor()/m/H+"px",O.id=this.pdfViewer.element.id+"_tileimg_"+l+"_"+this.pdfViewerBase.getZoomFactor()+"_"+N+"_"+D,Z?((x=Z.image)&&(O.src=x),this.pdfViewerBase.isReRenderRequired=!1):this.pdfViewerBase.isReRenderRequired=!0}}}0===V.length&&(this.pdfViewerBase.isReRenderRequired=!0)}var Nn=d.getElementsByTagName("a");if(0!==Nn.length)for(var Ni=Nn.length-1;Ni>=0;Ni--)Nn[Ni].parentNode.removeChild(Nn[Ni]);h&&(h.style.width=f+"px",h.style.height=c+"px",this.pdfViewer.textSelectionModule&&(this.isPinchZoomed?h.style.display="none":this.isMagnified?(e-2==0?0:e-2)<=l&&l<=(e===this.pdfViewerBase.pageCount?this.pdfViewerBase.pageCount-1:e+1)&&(this.pdfViewer.textSelectionModule.isTextSelection&&p||this.pdfViewerBase.textLayer.getTextSearchStatus()||this.pdfViewerBase.isInitialPageMode)?(this.pdfViewerBase.textLayer.resizeTextContentsOnZoom(l),this.pdfViewer.textSelectionModule.isTextSelection&&p&&this.pdfViewer.textSelectionModule.applySelectionRangeOnScroll(l)):h.style.display="none":h.style.display="block"),this.pdfViewerBase.applyElementStyles(h,l));var Fh=ln(this.pdfViewer.element.id+"_textLayer_"+l);if(Fh){var Lh=ln(this.pdfViewer.element.id+l+"_diagramAdorner_svg");Lh&&(Lh.style.width=f+"px",Lh.style.height=c+"px");var qa=ln(this.pdfViewer.element.id+l+"_diagramAdornerLayer");qa&&(qa.style.width=f+"px",qa.style.height=c+"px"),Fh.style.width=f+"px",Fh.style.height=c+"px",this.pdfViewer.renderSelector(l,this.pdfViewer.annotationSelectorSettings),this.pdfViewerBase.applyElementStyles(qa,l)}}}}},s.prototype.zoomOverPages=function(e,t,i,n){var o=Math.sqrt(Math.pow(e-i,2)+Math.pow(t-n,2));this.previousTouchDifference>-1&&(o>this.previousTouchDifference?(this.pinchStep=this.getPinchStep(o,this.previousTouchDifference),this.pinchOut()):o<this.previousTouchDifference&&(this.pinchStep=this.getPinchStep(this.previousTouchDifference,o),this.pinchIn())),this.previousTouchDifference=o},s.prototype.pinchMoveEnd=function(){this.touchCenterX=0,this.touchCenterY=0,this.previousTouchDifference=-1,this.isPinchZoomed&&(this.isPinchScrolled=!1,this.isPagePinchZoomed=!0,this.pinchMoveScroll())},s.prototype.fitPageScrollMouseWheel=function(e){"fitToPage"===this.fitType&&(this.isMagnified=!1,e.preventDefault(),e.deltaY>0?this.downwardScrollFitPage(this.pdfViewerBase.currentPageNumber-1):this.upwardScrollFitPage(this.pdfViewerBase.currentPageNumber-1))},s.prototype.magnifyBehaviorKeyDown=function(e){var i=!!navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i)&&e.metaKey;switch(e.keyCode){case 38:case 37:case 33:"fitToPage"===this.fitType&&(!e.ctrlKey&&!i||!e.shiftKey)&&(e.preventDefault(),this.upwardScrollFitPage(this.pdfViewerBase.currentPageNumber-1));break;case 40:case 39:case 34:"fitToPage"===this.fitType&&(!e.ctrlKey&&!i||!e.shiftKey)&&(e.preventDefault(),this.downwardScrollFitPage(this.pdfViewerBase.currentPageNumber-1));break;case 187:(e.ctrlKey||i)&&(e.preventDefault(),this.zoomIn());break;case 189:(e.ctrlKey||i)&&(e.preventDefault(),this.zoomOut());break;case 48:(e.ctrlKey||i)&&!e.shiftKey&&(e.preventDefault(),this.fitToPage());break;case 49:(e.ctrlKey||i)&&!e.shiftKey&&(e.preventDefault(),this.zoomTo(100))}},s.prototype.upwardScrollFitPage=function(e){e>0&&(this.pdfViewerBase.getElement("_pageDiv_"+(e-1)).style.visibility="visible",this.pdfViewerBase.viewerContainer.scrollTop=this.pdfViewerBase.pageSize[e-1].top*this.zoomFactor,this.isFitToPageMode&&(this.pdfViewerBase.getElement("_pageDiv_"+e).style.visibility="hidden"))},s.prototype.updatePagesForFitPage=function(e){"fitToPage"===this.fitType&&this.isFitToPageMode&&(e>0&&this.pdfViewerBase.getElement("_pageDiv_"+(e-1))&&(this.pdfViewerBase.getElement("_pageDiv_"+(e-1)).style.visibility="hidden"),e<this.pdfViewerBase.pageCount-1&&this.pdfViewerBase.getElement("_pageDiv_"+(e+1))&&(this.pdfViewerBase.getElement("_pageDiv_"+(e+1)).style.visibility="hidden"))},s.prototype.onDoubleTapMagnification=function(){this.pdfViewer.toolbarModule&&(0,a.xr)()&&this.pdfViewer.toolbarModule.showToolbar(!0);var e=this.pdfViewerBase.viewerContainer.scrollTop;if(this.pdfViewer.selectedItems.annotations[0]){if((0,a.xr)()&&this.pdfViewer.selectedItems.annotations[0]&&"FreeText"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType){var t={};t.x=this.pdfViewer.selectedItems.annotations[0].bounds.x,t.y=this.pdfViewer.selectedItems.annotations[0].bounds.y,this.pdfViewer.annotation.freeTextAnnotationModule.addInuptElemet(t,this.pdfViewer.selectedItems.annotations[0])}}else this.isTapToFitZoom?this.fitToWidth():this.zoomFactor<2?this.zoomTo(200):this.fitToWidth(),this.calculateScrollValues(e),this.isTapToFitZoom=!this.isTapToFitZoom},s.prototype.downwardScrollFitPage=function(e){e!==this.pdfViewerBase.pageCount-1&&(this.pdfViewerBase.getElement("_pageDiv_"+(e+1)).style.visibility="visible",this.pdfViewerBase.viewerContainer.scrollTop=this.pdfViewerBase.pageSize[e+1].top*this.zoomFactor,this.isFitToPageMode&&(e+1===this.pdfViewerBase.pageCount-1?this.pdfViewerBase.getElement("_pageDiv_"+e).style.visibility="hidden":this.pdfViewerBase.getElement("_pageDiv_"+(e+2)).style.visibility="hidden"))},s.prototype.getMagnifiedValue=function(e){return e/this.previousZoomFactor*this.zoomFactor},s.prototype.destroy=function(){this.imageObjects=void 0},s.prototype.getZoomFactor=function(e){return e/100},s.prototype.getModuleName=function(){return"Magnification"},s.prototype.getPinchStep=function(e,t){var o=(e-t)/100;return o<.02?o=.02:o>1&&(o=.1),o},s.prototype.zoomToRect=function(e){var t,i=this.pdfViewerBase,n=i.viewerContainer,o=this.pdfViewer;if(e.width>0&&e.height>0){var l=o.getPageNumberFromClientPoint({x:e.x,y:e.y});if(l>0){var d=n.getBoundingClientRect().width/e.width,h=n.getBoundingClientRect().height/e.height;t=d<h?d:h;var f=100*i.getZoomFactor(),c=n.scrollTop,u=n.scrollLeft;this.zoomTo(f*t),n.scrollTop=c,n.scrollLeft=u;var m=i.getZoomFactor(),g={x:e.x,y:e.y};g=o.convertClientPointToPagePoint(g,l),i.updateScrollTop(l-1),n.scrollLeft=(g.x-u)*m,n.scrollTop=(g.y+i.pageSize[l-1].top-c)*m}}},s}(),PS=function(){function s(e,t){this.pdfViewer=e,this.pdfViewerBase=t}return s.prototype.goToNextPage=function(){this.pageNumber=this.pdfViewerBase.currentPageNumber,this.pageNumber++,this.pageNumber<=this.pdfViewerBase.pageCount&&this.pdfViewerBase.updateScrollTop(this.pageNumber-1)},s.prototype.goToPreviousPage=function(){this.pageNumber=this.pdfViewerBase.currentPageNumber,this.pageNumber--,this.pageNumber>0&&this.pdfViewerBase.updateScrollTop(this.pageNumber-1)},s.prototype.goToPage=function(e){e>0&&e<=this.pdfViewerBase.pageCount&&this.pdfViewerBase.currentPageNumber!==e&&this.pdfViewerBase.updateScrollTop(e-1),this.pdfViewer.magnificationModule.resizeCanvas(e);var t=document.getElementById(this.pdfViewer.element.id+"_textLayer_"+(e-1));t&&(t.style.display="block")},s.prototype.goToFirstPage=function(){this.pageNumber=0,this.pdfViewerBase.updateScrollTop(this.pageNumber)},s.prototype.goToLastPage=function(){this.pageNumber=this.pdfViewerBase.pageCount-1,this.pdfViewerBase.updateScrollTop(this.pageNumber)},s.prototype.destroy=function(){this.pageNumber=0},s.prototype.getModuleName=function(){return"Navigation"},s}(),DS=function(){function s(e,t){var i=this;this.thumbnailLimit=30,this.thumbnailThreshold=50,this.thumbnailTopMargin=10,this.isThumbnailClicked=!1,this.thumbnailClick=function(n){var o=i,r=o.getPageNumberFromID(n.srcElement.id);if(o.previousElement&&(o.previousElement.classList.remove("e-pv-thumbnail-selection"),o.previousElement.classList.remove("e-pv-thumbnail-focus"),o.previousElement.classList.add("e-pv-thumbnail-selection-ring")),n.srcElement.parentElement.id===o.pdfViewer.element.id+"_thumbnail_Selection_Ring_"+r?(o.setSelectionStyle(n.srcElement.parentElement),o.previousElement=n.srcElement.parentElement):n.srcElement.id===o.pdfViewer.element.id+"_thumbnail_Selection_Ring_"+r&&(o.setSelectionStyle(n.srcElement),o.previousElement=n.srcElement),o.pdfViewer.fireThumbnailClick(r+1),o.isThumbnailClicked=!0,o.goToThumbnailPage(r+1),o.pdfViewerBase.focusViewerContainer(),i.pdfViewer.annotationModule&&i.pdfViewer.annotationModule.inkAnnotationModule){var l=parseInt(i.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber);i.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(l)}},this.thumbnailMouseOver=function(n){var o=i,r=o.getPageNumberFromID(n.srcElement.id);n.srcElement.id===o.pdfViewer.element.id+"_thumbnail_Selection_Ring_"+r?o.setMouseOverStyle(n.srcElement):n.srcElement.id===o.pdfViewer.element.id+"_thumbnail_image_"+r&&o.setMouseOverStyle(n.srcElement.parentElement)},this.thumbnailMouseLeave=function(n){var o=i,r=o.getPageNumberFromID(n.srcElement.id);n.srcElement.parentElement.id===o.pdfViewer.element.id+"_thumbnail_view"?o.setMouseLeaveStyle(n.srcElement.children[0].children[0]):n.srcElement.parentElement.id===o.pdfViewer.element.id+"_thumbnail_"+r&&o.setMouseLeaveStyle(n.srcElement.parentElement.children[0])},this.pdfViewer=e,this.pdfViewerBase=t}return s.prototype.createThumbnailContainer=function(){this.thumbnailView=(0,a.az)("div",{id:this.pdfViewer.element.id+"_thumbnail_view",className:"e-pv-thumbnail-view e-pv-thumbnail-row"}),this.pdfViewerBase.navigationPane.sideBarContent.appendChild(this.thumbnailView)},s.prototype.openThumbnailPane=function(){this.pdfViewerBase.navigationPane&&this.pdfViewerBase.navigationPane.openThumbnailPane()},s.prototype.createRequestForThumbnails=function(){var e=this;return document.documentMode?(this.requestCreation(e),null):new Promise(function(i,n){e.requestCreation(e)})},s.prototype.requestCreation=function(e){e.startIndex=e.thumbnailLimit,e.thumbnailLimit=e.startIndex+e.thumbnailThreshold<e.pdfViewer.pageCount?e.startIndex+e.thumbnailThreshold:e.pdfViewer.pageCount;var t={startPage:e.startIndex.toString(),endPage:e.thumbnailLimit.toString(),sizeX:"99.7",sizeY:"141",hashId:e.pdfViewerBase.hashId,action:"RenderThumbnailImages",elementId:e.pdfViewer.element.id,uniqueId:e.pdfViewerBase.documentId};this.pdfViewerBase.jsonDocumentId&&(t.documentId=this.pdfViewerBase.jsonDocumentId),this.thumbnailRequestHandler=new Ue(this.pdfViewer),this.thumbnailRequestHandler.url=e.pdfViewer.serviceUrl+"/"+e.pdfViewer.serverActionSettings.renderThumbnail,this.thumbnailRequestHandler.responseType="json",this.thumbnailRequestHandler.send(t),this.thumbnailRequestHandler.onSuccess=function(i){var n=i.data;if(n){if("object"!=typeof n)try{n=JSON.parse(n)}catch(r){e.pdfViewerBase.onControlError(500,n,e.pdfViewer.serverActionSettings.renderThumbnail),n=null}if(n&&n.uniqueId===e.pdfViewerBase.documentId&&(e.pdfViewer.fireAjaxRequestSuccess(e.pdfViewer.serverActionSettings.renderThumbnail,n),e.renderThumbnailImage(n),e.pdfViewer.isThumbnailViewOpen)){e.pdfViewerBase.navigationPane.isThumbnailOpen=!0,e.pdfViewerBase.navigationPane.sideBarTitle.textContent=e.pdfViewer.localeObj.getConstant("Page Thumbnails"),document.getElementById(e.pdfViewer.element.id+"_thumbnail_view").style.display="flex";var o=e.pdfViewer.element.querySelector(".e-pv-bookmark-view");o&&(o.style.display="none"),e.pdfViewerBase.navigationPane.setThumbnailSelectionIconTheme(),e.pdfViewerBase.navigationPane.updateViewerContainerOnExpand(),e.pdfViewerBase.navigationPane.isBookmarkOpen=!1}}},this.thumbnailRequestHandler.onFailure=function(i){e.pdfViewer.fireAjaxRequestFailed(i.status,i.statusText,e.pdfViewer.serverActionSettings.renderThumbnail)},this.thumbnailRequestHandler.onError=function(i){e.pdfViewerBase.openNotificationPopup(),e.pdfViewer.fireAjaxRequestFailed(i.status,i.statusText,e.pdfViewer.serverActionSettings.renderThumbnail)}},s.prototype.gotoThumbnailImage=function(e){var t=this.checkThumbnailScroll(e);if(this.thumbnailView){var i=this.thumbnailView.children[e];if(i){var n=i.children[0];t&&(this.pdfViewerBase.navigationPane.sideBarContent.scrollTop=n.offsetTop+n.clientTop-this.thumbnailTopMargin),this.isThumbnailClicked||(this.previousElement&&(this.previousElement.classList.remove("e-pv-thumbnail-selection"),this.previousElement.classList.remove("e-pv-thumbnail-focus"),this.previousElement.classList.remove("e-pv-thumbnail-hover"),this.previousElement.classList.add("e-pv-thumbnail-selection-ring")),this.setFocusStyle(n,e)),this.previousElement=n.children[0]}}},s.prototype.checkThumbnailScroll=function(e){var t=!1;if(this.thumbnailView){var i=this.getVisibleThumbs(),n=i.views.length;if(n>0){var o=this.getPageNumberFromID(i.first.id),r=n>1?this.getPageNumberFromID(i.last.id):o;e<=o||e>=r?t=!0:i.views.some(function(l){var d=l.id.split("_");return parseInt(d[d.length-1])===e&&(t=l.percent<100,!0)})}}return t},s.prototype.getPageNumberFromID=function(e){var t=e.split("_");return parseInt(t[t.length-1])},s.prototype.setFocusStyle=function(e,t){e.children[0].id===this.pdfViewer.element.id+"_thumbnail_Selection_Ring_"+t&&this.setMouseFocusStyle(e.children[0])},s.prototype.renderThumbnailImage=function(e){if(this.thumbnailView)for(var t=e&&isNaN(e.startPage)?e.startPage:this.startIndex,i=e&&isNaN(e.endPage)?e.endPage:this.thumbnailLimit,n=t;n<i;n++){var o=(0,a.az)("a",{id:"page_"+n,attrs:{"aria-label":"Thumbnail of Page"+(n+1),tabindex:"-1",role:"link"},className:"e-pv-thumbnail-anchor-node"}),r=(0,a.az)("div",{id:this.pdfViewer.element.id+"_thumbnail_"+n,className:"e-pv-thumbnail e-pv-thumbnail-column"});this.thumbnailSelectionRing=(0,a.az)("div",{id:this.pdfViewer.element.id+"_thumbnail_Selection_Ring_"+n,className:"e-pv-thumbnail-selection-ring"}),r.appendChild(this.thumbnailSelectionRing);var l=(0,a.az)("div",{id:this.pdfViewer.element.id+"_thumbnail_pagenumber_"+n,className:"e-pv-thumbnail-number"});l.textContent=(n+1).toString(),r.appendChild(l),this.thumbnailImage=(0,a.az)("img",{id:this.pdfViewer.element.id+"_thumbnail_image_"+n,className:"e-pv-thumbnail-image"}),this.thumbnailImage.src=e.thumbnailImage[n],this.thumbnailImage.alt=this.pdfViewer.element.id+"_thumbnail_page_"+n,this.pdfViewerBase.pageSize[n]&&this.pdfViewerBase.pageSize[n].height<this.pdfViewerBase.pageSize[n].width&&(this.thumbnailImage.style.height="86px",this.thumbnailImage.style.width="126px",r.style.height="100px",r.style.width="140px",o.style.left="-25px",o.style.position="relative",l.style.left="18px",l.style.position="relative"),this.thumbnailSelectionRing.appendChild(this.thumbnailImage),o.appendChild(r),this.thumbnailView.appendChild(o),this.wireUpEvents(),0===n&&this.setMouseFocusToFirstPage()}this.pdfViewerBase.navigationPane.enableThumbnailButton(),this.thumbnailLimit!==this.pdfViewerBase.pageCount&&this.thumbnailView&&(document.documentMode?this.createRequestForThumbnails():Promise.all([this.createRequestForThumbnails()]))},s.prototype.wireUpEvents=function(){this.thumbnailSelectionRing&&(this.thumbnailSelectionRing.addEventListener("click",this.thumbnailClick),this.thumbnailSelectionRing.addEventListener("mouseover",this.thumbnailMouseOver),this.thumbnailSelectionRing.addEventListener("mouseleave",this.thumbnailMouseLeave))},s.prototype.unwireUpEvents=function(){this.thumbnailSelectionRing&&this.thumbnailImage&&(this.thumbnailSelectionRing.removeEventListener("click",this.thumbnailClick),this.thumbnailSelectionRing.removeEventListener("mouseover",this.thumbnailMouseOver),this.thumbnailSelectionRing.removeEventListener("mouseleave",this.thumbnailMouseLeave))},s.prototype.goToThumbnailPage=function(e){e>0&&e<=this.pdfViewerBase.pageCount&&this.pdfViewerBase.currentPageNumber!==e?this.pdfViewerBase.updateScrollTop(e-1):this.isThumbnailClicked=!1},s.prototype.setSelectionStyle=function(e){e.classList.remove("e-pv-thumbnail-selection-ring"),e.classList.remove("e-pv-thumbnail-hover"),e.classList.remove("e-pv-thumbnail-focus"),e.classList.add("e-pv-thumbnail-selection")},s.prototype.setMouseOverStyle=function(e){e.classList.contains("e-pv-thumbnail-selection")||(e.classList.remove("e-pv-thumbnail-selection-ring"),e.classList.contains("e-pv-thumbnail-focus")||e.classList.add("e-pv-thumbnail-hover"))},s.prototype.setMouseLeaveStyle=function(e){e.classList.contains("e-pv-thumbnail-selection")?e.classList.contains("e-pv-thumbnail-selection")||(e.classList.remove("e-pv-thumbnail-selection"),e.classList.add("e-pv-thumbnail-focus")):(e.classList.contains("e-pv-thumbnail-focus")||e.classList.add("e-pv-thumbnail-selection-ring"),e.classList.remove("e-pv-thumbnail-hover"))},s.prototype.setMouseFocusStyle=function(e){e.classList.remove("e-pv-thumbnail-selection"),e.classList.remove("e-pv-thumbnail-hover"),e.classList.add("e-pv-thumbnail-focus")},s.prototype.setMouseFocusToFirstPage=function(){var e=this.thumbnailView.children[0];if(e){var t=e.children[0].children[0];this.setMouseFocusStyle(t),this.previousElement=t}},s.prototype.clear=function(){if(this.startIndex=0,this.thumbnailLimit=0,this.pdfViewerBase.navigationPane&&this.pdfViewerBase.navigationPane.sideBarContentContainer&&(this.pdfViewerBase.navigationPane.sideBarContentContainer.style.display="block",this.pdfViewerBase.navigationPane.sideBarContent.scrollTop=0,this.pdfViewerBase.navigationPane.sideBarContentContainer.style.display="none"),this.thumbnailView)for(;this.thumbnailView.hasChildNodes();)this.thumbnailView.removeChild(this.thumbnailView.lastChild);this.pdfViewerBase.navigationPane&&this.pdfViewerBase.navigationPane.resetThumbnailView(),this.thumbnailRequestHandler&&this.thumbnailRequestHandler.clear(),this.unwireUpEvents()},s.prototype.getVisibleThumbs=function(){return this.getVisibleElements(this.pdfViewerBase.navigationPane.sideBarContent,this.thumbnailView.children)},s.prototype.getVisibleElements=function(e,t){var h,p,f,c,u,m,g,v,y,b,i=e.scrollTop,n=i+e.clientHeight,o=e.scrollLeft,r=o+e.clientWidth,d=[],S=0===t.length?0:this.binarySearchFirstItem(t,function(M){return M.offsetTop+M.clientTop+M.clientHeight>i});t.length>0&&(S=this.backtrackBeforeAllVisibleElements(S,t,i));for(var x=-1,V=S,T=t.length;V<T;V++){if(y=(g=(p=h=this.getThumbnailElement(V)).offsetLeft+p.clientLeft)+(v=p.clientWidth),u=(f=p.offsetTop+p.clientTop)+(c=p.clientHeight),-1===x)u>=n&&(x=u);else if(f>x)break;u<=i||f>=n||y<=o||g>=r||(m=Math.max(0,i-f)+Math.max(0,u-n),b=Math.max(0,o-g)+Math.max(0,y-r),d.push({id:h.id,x:g,y:f,view:h,percent:(c-m)*(v-b)*100/c/v|0}))}return{first:d[0],last:d[d.length-1],views:d}},s.prototype.binarySearchFirstItem=function(e,t){var i=0,n=e.length-1;if(0===e.length||!t(this.getThumbnailElement(n)))return e.length-1;if(t(this.getThumbnailElement(i)))return i;for(;i<n;){var o=i+n>>1;t(this.getThumbnailElement(o))?n=o:i=o+1}return i},s.prototype.backtrackBeforeAllVisibleElements=function(e,t,i){if(e<2)return e;var n=this.getThumbnailElement(e),o=n.offsetTop+n.clientTop;o>=i&&(o=(n=this.getThumbnailElement(e-1)).offsetTop+n.clientTop);for(var r=e-2;r>=0&&!((n=this.getThumbnailElement(r)).offsetTop+n.clientTop+n.clientHeight<=o);--r)e=r;return e},s.prototype.getThumbnailElement=function(e){return this.thumbnailView.children[e].children[0]},s.prototype.destroy=function(){this.clear()},s.prototype.getModuleName=function(){return"ThumbnailView"},s}(),BS=function(){function s(e,t,i){this.isToolbarHidden=!1,this.isTextboxBtnVisible=!0,this.isPasswordBtnVisible=!0,this.isCheckboxBtnVisible=!0,this.isRadiobuttonBtnVisible=!0,this.isDropdownBtnVisible=!0,this.isListboxBtnVisible=!0,this.isSignatureBtnVisible=!0,this.isDeleteBtnVisible=!0,this.toolbarBorderHeight=1,this.pdfViewer=e,this.pdfViewerBase=t,this.primaryToolbar=i}return s.prototype.initializeFormDesignerToolbar=function(){var e=this;this.toolbarElement=(0,a.az)("div",{id:this.pdfViewer.element.id+"_formdesigner_toolbar",className:"e-pv-formdesigner-toolbar"}),this.pdfViewerBase.viewerMainContainer.appendChild(this.toolbarElement),this.toolbar=new re.o8({width:"",height:"",overflowMode:"Popup",items:this.createToolbarItems(),clicked:this.onToolbarClicked.bind(this),created:function(){e.createDropDowns()}}),this.pdfViewer.enableRtl&&(this.toolbar.enableRtl=!0),this.toolbar.appendTo(this.toolbarElement),this.afterToolbarCreation(),this.createSignContainer(),this.applyFormDesignerToolbarSettings(),this.showFormDesignerToolbar(null,!0)},s.prototype.resetFormDesignerToolbar=function(){this.adjustViewer(!1),this.pdfViewer.isFormDesignerToolbarVisible?(this.toolbarElement.style.display="",this.isToolbarHidden=!1,this.adjustViewer(!0),this.pdfViewer.isFormDesignerToolbarVisible=!0):(this.toolbarElement.style.display="none",this.isToolbarHidden=!0,this.pdfViewer.isFormDesignerToolbarVisible=!1)},s.prototype.showFormDesignerToolbar=function(e,t){if(this.isToolbarHidden){var n=this.toolbarElement.style.display;this.toolbarElement.style.display="block",this.pdfViewer.designerMode=!0,this.pdfViewer.formDesignerModule.setMode("designer"),t||(this.pdfViewer.isFormDesignerToolbarVisible=!0),e?this.primaryToolbar.selectItem(e):this.pdfViewer.enableToolbar&&this.primaryToolbar.selectItem(this.primaryToolbar.formDesignerItem),"none"===n&&this.adjustViewer(!0)}else e?this.primaryToolbar.deSelectItem(e):this.pdfViewer.enableToolbar&&this.primaryToolbar.deSelectItem(this.primaryToolbar.formDesignerItem),this.adjustViewer(!1),this.toolbarElement.style.display="none",this.pdfViewer.formDesignerModule.setMode("edit"),this.pdfViewer.designerMode=!1,t||(this.pdfViewer.isFormDesignerToolbarVisible=!1);this.pdfViewer.magnification&&"fitToPage"===this.pdfViewer.magnification.fitType&&this.pdfViewer.magnification.fitToPage(),this.isToolbarHidden=!this.isToolbarHidden},s.prototype.adjustViewer=function(e){var t,i,n;if((0,a.xr)()){t=this.pdfViewer.element.querySelector(".e-pv-sidebar-toolbar-splitter"),i=this.pdfViewer.element.querySelector(".e-pv-toolbar");var o=this.pdfViewer.element.querySelector(".e-pv-formDesigner-toolbar");n=this.getToolbarHeight(o)}else t=this.pdfViewerBase.getElement("_sideBarToolbarSplitter"),i=this.pdfViewerBase.getElement("_toolbarContainer"),n=this.getToolbarHeight(this.toolbarElement);var r=this.getToolbarHeight(i),l=this.pdfViewerBase.navigationPane.sideBarToolbar,d=this.pdfViewerBase.navigationPane.sideBarContentContainer,h=this.pdfViewerBase.navigationPane.commentPanelContainer,p=this.pdfViewerBase.navigationPane.commentPanelResizer;e?(this.pdfViewer.enableToolbar?(l.style.top=r+n+"px",d.style.top=r+n+"px",t.style.top=r+n+"px",h.style.top=r+n+"px",p.style.top=r+n+"px"):(l.style.top=n+"px",d.style.top=n+"px",t.style.top=n+"px",h.style.top=n+"px",p.style.top=r+n+"px"),this.pdfViewer.enableToolbar||(r=0),this.pdfViewerBase.viewerContainer.style.height=this.updateViewerHeight(this.getElementHeight(this.pdfViewerBase.viewerContainer),n+r)+"px",l.style.height=this.getNavigationToolbarHeight(n+r)+"px",t.style.height=this.getNavigationToolbarHeight(n+r)+"px"):(this.pdfViewer.enableToolbar?(l.style.top=r+"px",d.style.top=r+"px",t.style.top=r+"px",h.style.top=r+"px",p.style.top=r+"px"):(l.style.top="1px",l.style.height="100%",d.style.top="1px",d.style.height="100%",t.style.top="1px",t.style.height="100%",h.style.top="1px",h.style.height="100%",p.style.top="1px",p.style.height="100%"),this.pdfViewer.enableToolbar||(r=0),this.pdfViewerBase.viewerContainer.style.height=this.resetViewerHeight(this.getElementHeight(this.pdfViewerBase.viewerContainer),n)+"px",l.style.height=this.getNavigationToolbarHeight(r),t.style.height=this.getNavigationToolbarHeight(r),"0px"===this.pdfViewerBase.viewerContainer.style.height&&(this.pdfViewerBase.viewerContainer.style.height=parseInt(this.pdfViewer.element.style.height)-parseInt(l.style.top)+"px")),(0,a.xr)()?this.updateContentContainerHeight(e,!0):this.updateContentContainerHeight(e)},s.prototype.getElementHeight=function(e){try{return e.getBoundingClientRect().height}catch(t){return 0}},s.prototype.updateViewerHeight=function(e,t){return this.getElementHeight(this.pdfViewer.element)-t},s.prototype.resetViewerHeight=function(e,t){return e+t},s.prototype.getNavigationToolbarHeight=function(e){var t=this.pdfViewer.element.getBoundingClientRect().height;return 0!==t?t-e+"px":""},s.prototype.updateContentContainerHeight=function(e,t){var i;if(t){var n=this.pdfViewer.element.querySelector(".e-pv-formDesigner-toolbar");i=this.getToolbarHeight(n)}else i=this.getToolbarHeight(this.toolbarElement);var o=this.pdfViewerBase.navigationPane.sideBarContentContainer.getBoundingClientRect();0!==o.height&&(this.pdfViewerBase.navigationPane.sideBarContentContainer.style.height=e?o.height-i+"px":o.height+i+"px")},s.prototype.getToolbarHeight=function(e){var t=e.getBoundingClientRect().height;return 0===t&&e===this.pdfViewerBase.getElement("_toolbarContainer")&&(t=parseFloat(window.getComputedStyle(e).height)+this.toolbarBorderHeight),t},s.prototype.createToolbarItems=function(){var e=this.getTemplate("span","_formfield_signature","e-pv-annotation-handwritten-container"),t=[];return t.push({prefixIcon:"e-pv-textbox-icon e-pv-icon",className:"e-pv-annotation-shapes-container",id:this.pdfViewer.element.id+"_formdesigner_textbox",align:"Left"}),t.push({prefixIcon:"e-pv-password-icon e-pv-icon",className:"e-pv-annotation-shapes-container",id:this.pdfViewer.element.id+"_formdesigner_passwordfield",align:"Left"}),t.push({prefixIcon:"e-pv-checkbox-icon e-pv-icon",className:"e-pv-annotation-shapes-container",id:this.pdfViewer.element.id+"_formdesigner_checkbox",align:"Left"}),t.push({prefixIcon:"e-pv-radiobutton-icon e-pv-icon",className:"e-pv-annotation-shapes-container",id:this.pdfViewer.element.id+"_formdesigner_radiobutton",align:"Left"}),t.push({prefixIcon:"e-pv-dropdown-icon e-pv-icon",className:"e-pv-annotation-shapes-container",id:this.pdfViewer.element.id+"_formdesigner_dropdown",align:"Left"}),t.push({prefixIcon:"e-pv-listbox-icon e-pv-icon",className:"e-pv-annotation-shapes-container",id:this.pdfViewer.element.id+"_formdesigner_listbox",align:"Left"}),t.push({template:e,align:"Left"}),t.push({type:"Separator",align:"Left"}),t.push({prefixIcon:"e-pv-annotation-delete-icon e-pv-icon",className:"e-pv-annotation-delete-container",id:this.pdfViewer.element.id+"_formdesigner_delete",align:"Left"}),t.push({prefixIcon:"e-pv-annotation-tools-close-icon e-pv-icon",className:"e-pv-annotation-tools-close-container",id:this.pdfViewer.element.id+"_formdesigner_close",align:"Right"}),t},s.prototype.createSignContainer=function(){var e=this;this.handWrittenSignatureItem=this.pdfViewerBase.getElement("_formfield_signature"),this.primaryToolbar.createTooltip(this.pdfViewerBase.getElement("_formfield_signature"),this.pdfViewer.localeObj.getConstant("HandwrittenSignatureDialogHeaderText"));var n=new Le.uw({items:[{text:"ADD SIGNATURE"},{separator:!0},{text:"ADD INITIAL"}],iconCss:"e-pv-handwritten-icon e-pv-icon",cssClass:"e-pv-handwritten-popup",beforeItemRender:function(o){var r;e.pdfViewer.clearSelection(e.pdfViewerBase.currentPageNumber-1),o.element&&-1!==o.element.className.indexOf("e-separator")&&(o.element.style.margin="8px 0"),"ADD SIGNATURE"===o.item.text&&(o.element.innerHTML="",(r=(0,a.az)("button")).classList.add("e-control","e-btn","e-lib","e-outline","e-primary"),r.textContent=e.pdfViewer.localeObj.getConstant("SignatureFieldDialogHeaderText"),r.style.width="en-US"===e.pdfViewer.locale?"130px":"auto",r.style.height="36px",r.addEventListener("click",e.clickSignature.bind(e)),o.element.appendChild(r),o.element.addEventListener("mouseover",e.hoverInitialBtn.bind(e)),o.element.style.width="206px",o.element.style.display="flex",o.element.style.flexDirection="column",o.element.style.height="auto",o.element.style.alignItems="center"),"ADD INITIAL"===o.item.text&&(o.element.innerHTML="",(r=(0,a.az)("button")).classList.add("e-control","e-btn","e-lib","e-outline","e-primary"),r.textContent=e.pdfViewer.localeObj.getConstant("InitialFieldDialogHeaderText"),r.style.width="en-US"===e.pdfViewer.locale?"130px":"auto",r.style.height="36px",r.addEventListener("click",e.clickInitial.bind(e)),o.element.appendChild(r),o.element.addEventListener("mouseover",e.hoverInitialBtn.bind(e)),o.element.style.width="206px",o.element.style.display="flex",o.element.style.flexDirection="column",o.element.style.height="auto",o.element.style.alignItems="center")}});this.pdfViewer.enableRtl&&(n.enableRtl=this.pdfViewer.enableRtl),n.appendTo(this.handWrittenSignatureItem)},s.prototype.hoverInitialBtn=function(e){var t=e.target,i=(0,a.le)(e.path)?e.composedPath()[0].id:e.path[0].id;if(i!=="sign_"+i.split("_")[1]&&i!=="delete_"+i.split("_")[1]){var n=document.getElementById(t.id);(0,a.le)(n)&&(n=document.getElementById(t.parentElement.id)),null==n||t.id==="sign_"+t.id.split("_")[1]&&t.id==="sign_border_"+t.id.split("_")[2]?null!=n.parentElement&&(t.id!=="sign_"+t.id.split("_")[1]||t.id!=="sign_border_"+t.id.split("_")[2])&&(n.parentElement.style.background="transparent",n.parentElement.style.cursor="default"):(n.style.background="transparent",n.style.cursor="default")}},s.prototype.getTemplate=function(e,t,i){var n=(0,a.az)(e,{id:this.pdfViewer.element.id+t});return i&&(n.className=i),n.outerHTML},s.prototype.onToolbarClicked=function(e){e&&e.item&&(-1!==e.item.id.indexOf("textbox")?this.pdfViewer.formDesignerModule.setFormFieldMode("Textbox"):-1!==e.item.id.indexOf("passwordfield")?this.pdfViewer.formDesignerModule.setFormFieldMode("Password"):-1!==e.item.id.indexOf("checkbox")?this.pdfViewer.formDesignerModule.setFormFieldMode("CheckBox"):-1!==e.item.id.indexOf("radiobutton")?this.pdfViewer.formDesignerModule.setFormFieldMode("RadioButton"):-1!==e.item.id.indexOf("dropdown")?this.pdfViewer.formDesignerModule.setFormFieldMode("DropDown"):-1!==e.item.id.indexOf("listbox")?this.pdfViewer.formDesignerModule.setFormFieldMode("ListBox"):-1!==e.item.id.indexOf("signature")?this.pdfViewer.formDesignerModule.setFormFieldMode("SignatureField"):-1!==e.item.id.indexOf("close")?this.pdfViewer.toolbarModule.formDesignerToolbarModule.showFormDesignerToolbar(this.pdfViewer.toolbarModule.formDesignerItem):-1!==e.item.id.indexOf("delete")&&(this.pdfViewer.formDesignerModule.deleteFormField(this.pdfViewer.selectedItems.formFields[0]),this.showHideDeleteIcon(!1)),this.pdfViewer.selectedItems.formFields.length>0&&this.pdfViewer.clearSelection(this.pdfViewer.selectedItems.formFields[0].pageIndex))},s.prototype.clickSignature=function(e){this.pdfViewer.formDesignerModule.setFormFieldMode("SignatureField")},s.prototype.clickInitial=function(e){this.pdfViewer.isInitialFieldToolbarSelection=!0,this.pdfViewer.formDesignerModule.setFormFieldMode("InitialField"),this.pdfViewer.isInitialFieldToolbarSelection=!1},s.prototype.afterToolbarCreation=function(){this.textboxItem=this.primaryToolbar.addClassToolbarItem("_formdesigner_textbox","e-pv-formdesigner-textbox",this.pdfViewer.localeObj.getConstant("Textbox")),this.passwordItem=this.primaryToolbar.addClassToolbarItem("_formdesigner_passwordfield","e-pv-formdesigner-passwordfield",this.pdfViewer.localeObj.getConstant("Password")),this.checkboxItem=this.primaryToolbar.addClassToolbarItem("_formdesigner_checkbox","e-pv-formdesigner-checkbox",this.pdfViewer.localeObj.getConstant("Check Box")),this.radioButtonItem=this.primaryToolbar.addClassToolbarItem("_formdesigner_radiobutton","e-pv-formdesigner-radiobutton",this.pdfViewer.localeObj.getConstant("Radio Button")),this.dropdownItem=this.primaryToolbar.addClassToolbarItem("_formdesigner_dropdown","e-pv-formdesigner-dropdown",this.pdfViewer.localeObj.getConstant("Dropdown")),this.listboxItem=this.primaryToolbar.addClassToolbarItem("_formdesigner_listbox","e-pv-formdesigner-listbox",this.pdfViewer.localeObj.getConstant("List Box")),this.deleteItem=this.primaryToolbar.addClassToolbarItem("_formdesigner_delete","e-pv-formdesigner-delete",this.pdfViewer.localeObj.getConstant("Delete FormField")),this.closeItem=this.primaryToolbar.addClassToolbarItem("_formdesigner_close","e-pv-annotation-tools-close",null),this.showHideDeleteIcon(!1)},s.prototype.showHideDeleteIcon=function(e){this.toolbar&&this.toolbar.enableItems(this.deleteItem.parentElement,e)},s.prototype.applyFormDesignerToolbarSettings=function(){this.pdfViewer.toolbarSettings.formDesignerToolbarItems&&(-1!==this.pdfViewer.toolbarSettings.formDesignerToolbarItems.indexOf("TextboxTool")?this.showTextboxTool(!0):this.showTextboxTool(!1),-1!==this.pdfViewer.toolbarSettings.formDesignerToolbarItems.indexOf("PasswordTool")?this.showPasswordTool(!0):this.showPasswordTool(!1),-1!==this.pdfViewer.toolbarSettings.formDesignerToolbarItems.indexOf("CheckBoxTool")?this.showCheckboxTool(!0):this.showCheckboxTool(!1),-1!==this.pdfViewer.toolbarSettings.formDesignerToolbarItems.indexOf("RadioButtonTool")?this.showRadioButtonTool(!0):this.showRadioButtonTool(!1),-1!==this.pdfViewer.toolbarSettings.formDesignerToolbarItems.indexOf("DropdownTool")?this.showDropdownTool(!0):this.showDropdownTool(!1),-1!==this.pdfViewer.toolbarSettings.formDesignerToolbarItems.indexOf("ListboxTool")?this.showListboxTool(!0):this.showListboxTool(!1),-1!==this.pdfViewer.toolbarSettings.formDesignerToolbarItems.indexOf("DrawSignatureTool")?this.showDrawSignatureTool(!0):this.showDrawSignatureTool(!1),-1!==this.pdfViewer.toolbarSettings.formDesignerToolbarItems.indexOf("DeleteTool")?this.showDeleteTool(!0):this.showDeleteTool(!1),this.showSeparator())},s.prototype.showTextboxTool=function(e){this.isTextboxBtnVisible=e,this.applyHideToToolbar(e,0,0)},s.prototype.showPasswordTool=function(e){this.isPasswordBtnVisible=e,this.applyHideToToolbar(e,1,1)},s.prototype.showCheckboxTool=function(e){this.isCheckboxBtnVisible=e,this.applyHideToToolbar(e,2,2)},s.prototype.showRadioButtonTool=function(e){this.isRadiobuttonBtnVisible=e,this.applyHideToToolbar(e,3,3)},s.prototype.showDropdownTool=function(e){this.isDropdownBtnVisible=e,this.applyHideToToolbar(e,4,4)},s.prototype.showListboxTool=function(e){this.isListboxBtnVisible=e,this.applyHideToToolbar(e,5,5)},s.prototype.showDrawSignatureTool=function(e){this.isSignatureBtnVisible=e,this.applyHideToToolbar(e,6,6)},s.prototype.showDeleteTool=function(e){this.isDeleteBtnVisible=e,this.applyHideToToolbar(e,8,8)},s.prototype.showSeparator=function(){!this.isSignatureBtnVisible&&!this.isDeleteBtnVisible&&this.applyHideToToolbar(!1,7,7)},s.prototype.applyHideToToolbar=function(e,t,i){for(var n=!e,o=t;o<=i;o++)this.toolbar.hideItem(o,n)},s.prototype.createDropDowns=function(){},s.prototype.destroy=function(){for(var e=[this.textboxItem,this.passwordItem,this.checkboxItem,this.radioButtonItem,this.listboxItem,this.dropdownItem,this.handWrittenSignatureItem,this.deleteItem],t=0;t<e.length;t++)e[t]&&this.destroyDependentComponent(e[t])},s.prototype.destroyDependentComponent=function(e){if(e.ej2_instances)for(var t=e.ej2_instances.length-1;t>=0;t--)e.ej2_instances[t].destroy()},s}(),FS=function(){function s(e,t){var i=this;this.isPageNavigationToolDisabled=!1,this.isMagnificationToolDisabled=!1,this.isSelectionToolDisabled=!1,this.isScrollingToolDisabled=!1,this.isOpenBtnVisible=!0,this.isNavigationToolVisible=!0,this.isMagnificationToolVisible=!0,this.isSelectionBtnVisible=!0,this.isScrollingBtnVisible=!0,this.isDownloadBtnVisible=!0,this.isPrintBtnVisible=!0,this.isSearchBtnVisible=!0,this.isTextSearchBoxDisplayed=!1,this.isUndoRedoBtnsVisible=!0,this.isAnnotationEditBtnVisible=!0,this.isFormDesignerEditBtnVisible=!0,this.isCommentBtnVisible=!0,this.isSubmitbtnvisible=!0,this.onToolbarKeydown=function(n){var o=n.target.id;o===i.pdfViewer.element.id+"_currentPageInput"||o===i.pdfViewer.element.id+"_zoomDropDown"||(n.preventDefault(),n.stopPropagation())},this.toolbarClickHandler=function(n){if(!a.AR.isDevice||i.pdfViewer.enableDesktopMode)if(n.originalEvent.target===i.zoomDropdownItem.parentElement.childNodes[1]||n.originalEvent.target===i.zoomDropdownItem.parentElement.childNodes[2])n.cancel=!0;else if(n.originalEvent.target.id===i.pdfViewer.element.id+"_openIcon"){var o=n.originalEvent.target.parentElement.dataset;if(o&&o.tooltipId){var r=document.getElementById(o.tooltipId);r&&(r.style.display="none")}}i.handleToolbarBtnClick(n);var l=n.originalEvent.target;!a.AR.isDevice||i.pdfViewer.enableDesktopMode?n.originalEvent.target===i.zoomDropdownItem.parentElement.childNodes[1]||n.originalEvent.target===i.zoomDropdownItem.parentElement.childNodes[2]||n.originalEvent.target===i.currentPageBoxElement||n.originalEvent.target===i.textSearchItem.childNodes[0]||l.parentElement.id!==i.pdfViewer.element.id+"_toolbarContainer_nav"&&l.id!==i.pdfViewer.element.id+"_toolbarContainer_nav"&&(n.originalEvent.target.blur(),i.pdfViewerBase.focusViewerContainer()):(n.originalEvent.target.blur(),i.pdfViewerBase.focusViewerContainer())},this.loadDocument=function(n){if(null!==n.target.files[0]){var r=n.target.files[0];if(r){i.uploadedDocumentName=r.name;var l=new FileReader;l.readAsDataURL(r),l.onload=function(d){var h=d.currentTarget.result;(0,a.xr)()?i.pdfViewer._dotnetInstance.invokeMethodAsync("LoadDocumentFromClient",h):i.pdfViewer.load(h,null)}}}},this.navigateToPage=function(n){if(13===n.which){var o=parseInt(i.currentPageBoxElement.value);null!==o&&o>0&&o<=i.pdfViewerBase.pageCount?i.pdfViewer.navigationModule&&i.pdfViewer.navigationModule.goToPage(o):i.updateCurrentPage(i.pdfViewerBase.currentPageNumber),i.currentPageBoxElement.blur(),i.pdfViewerBase.focusViewerContainer()}},this.textBoxFocusOut=function(){(null===i.currentPageBox.value||i.currentPageBox.value>=i.pdfViewerBase.pageCount||i.currentPageBox.value!==i.pdfViewerBase.currentPageNumber)&&i.updateCurrentPage(i.pdfViewerBase.currentPageNumber)},this.pdfViewer=e,this.pdfViewerBase=t}return s.prototype.intializeToolbar=function(e){var t;return(0,a.xr)()?(!a.AR.isDevice||this.pdfViewer.enableDesktopMode)&&(t=this.pdfViewer.element.querySelector(".e-pv-toolbar"),this.toolbarElement=t):t=this.createToolbar(e),!!document.documentMode&&((0,a.xr)()?this.pdfViewerBase.blazorUIAdaptor.totalPageElement.classList.add("e-pv-total-page-ms"):a.AR.isDevice||this.totalPageItem.classList.add("e-pv-total-page-ms")),this.createFileElement(t),this.wireEvent(),(0,a.xr)()?((!a.AR.isDevice||this.pdfViewer.enableDesktopMode)&&(this.initialEnableItems(),this.pdfViewerBase.navigationPane.adjustPane(),this.pdfViewer.enableToolbar&&this.bindOpenIconEvent()),this.PanElement=document.getElementById(this.pdfViewer.element.id+"_handTool").children[0],this.PanElement.classList.add("e-pv-tbar-btn"),this.SelectToolElement=document.getElementById(this.pdfViewer.element.id+"_selectTool").children[0],this.SelectToolElement.classList.add("e-pv-tbar-btn"),this.CommentElement=document.getElementById(this.pdfViewer.element.id+"_comment").children[0],this.CommentElement.classList.add("e-pv-tbar-btn"),this.annotationToolbarModule=new Ku(this.pdfViewer,this.pdfViewerBase,this),(this.pdfViewer.enableToolbar&&this.pdfViewer.enableAnnotationToolbar||this.pdfViewer.enableDesktopMode&&a.AR.isDevice)&&this.annotationToolbarModule.afterAnnotationToolbarCreationInBlazor()):(this.updateToolbarItems(),!a.AR.isDevice||this.pdfViewer.enableDesktopMode?(this.applyToolbarSettings(),this.initialEnableItems(),this.pdfViewerBase.navigationPane.adjustPane()):this.initialEnableItems(),this.pdfViewer.annotationModule&&(this.annotationToolbarModule=new Ku(this.pdfViewer,this.pdfViewerBase,this),(!a.AR.isDevice||this.pdfViewer.enableDesktopMode)&&this.annotationToolbarModule.initializeAnnotationToolbar()),this.pdfViewer.formDesignerModule&&(this.formDesignerToolbarModule=new BS(this.pdfViewer,this.pdfViewerBase,this),(!a.AR.isDevice||this.pdfViewer.enableDesktopMode)&&this.formDesignerToolbarModule.initializeFormDesignerToolbar())),t},s.prototype.bindOpenIconEvent=function(){var e=document.getElementById(this.pdfViewer.element.id+"_open");e&&e.addEventListener("click",this.openFileDialogBox.bind(this))},s.prototype.InitializeMobileToolbarInBlazor=function(){var e;e=this.pdfViewer.element.querySelector(".e-pv-mobile-toolbar"),this.createFileElement(e),this.wireEvent()},s.prototype.showToolbar=function(e){var t=this.toolbarElement;e?(t.style.display="block",a.AR.isDevice&&!this.pdfViewer.enableDesktopMode&&this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.annotationToolbarModule&&this.pdfViewer.toolbarModule.annotationToolbarModule.hideMobileAnnotationToolbar()):(this.pdfViewerBase.toolbarHeight=0,e&&(a.AR.isDevice&&this.pdfViewer.toolbarModule.annotationToolbarModule.toolbar&&(this.annotationToolbarModule.toolbarCreated=!1,this.annotationToolbarModule.adjustMobileViewer(),this.pdfViewer.toolbarModule.annotationToolbarModule.toolbar.element.style.display="none"),a.AR.isDevice&&this.annotationToolbarModule.propertyToolbar&&(this.annotationToolbarModule.propertyToolbar.element.style.display="none")),t.style.display="none")},s.prototype.showNavigationToolbar=function(e){if(!a.AR.isDevice||this.pdfViewer.enableDesktopMode){var t=this.pdfViewerBase.navigationPane.sideBarToolbar,i=this.pdfViewerBase.navigationPane.sideBarToolbarSplitter;e?(t.style.display="block",i.style.display="block",(this.pdfViewerBase.navigationPane.isBookmarkOpen||this.pdfViewerBase.navigationPane.isThumbnailOpen)&&this.pdfViewerBase.navigationPane.clear()):(t.style.display="none",i.style.display="none",(this.pdfViewerBase.navigationPane.isBookmarkOpen||this.pdfViewerBase.navigationPane.isThumbnailOpen)&&this.pdfViewerBase.navigationPane.updateViewerContainerOnClose())}},s.prototype.showAnnotationToolbar=function(e){e?(this.annotationToolbarModule.isToolbarHidden=!0,this.annotationToolbarModule.showAnnotationToolbar()):(this.annotationToolbarModule.isToolbarHidden=!1,this.annotationToolbarModule.showAnnotationToolbar())},s.prototype.showToolbarItem=function(e,t){for(var i=0;i<e.length;i++)switch(e[i]){case"OpenOption":this.showOpenOption(t);break;case"PageNavigationTool":this.showPageNavigationTool(t);break;case"MagnificationTool":this.showMagnificationTool(t);break;case"SelectionTool":this.showSelectionTool(t);break;case"PanTool":this.showScrollingTool(t);break;case"DownloadOption":this.showDownloadOption(t);break;case"PrintOption":this.showPrintOption(t);break;case"SearchOption":this.showSearchOption(t);break;case"UndoRedoTool":this.showUndoRedoTool(t);break;case"AnnotationEditTool":this.showAnnotationEditTool(t);break;case"FormDesignerEditTool":this.showFormDesignerEditTool(t);break;case"CommentTool":this.showCommentOption(t);break;case"SubmitForm":this.showSubmitForm(t)}this.applyHideToToolbar(!0,1,1),this.applyHideToToolbar(!0,8,8),this.applyHideToToolbar(!0,12,12),this.applyHideToToolbar(!0,15,15),this.showSeparator(e)},s.prototype.enableToolbarItem=function(e,t){for(var i=0;i<e.length;i++)switch(e[i]){case"OpenOption":this.enableOpenOption(t);break;case"PageNavigationTool":this.isPageNavigationToolDisabled=t,this.enablePageNavigationTool(t);break;case"MagnificationTool":this.isMagnificationToolDisabled=t,this.enableMagnificationTool(t);break;case"SelectionTool":this.isSelectionToolDisabled=t,this.enableSelectionTool(t);break;case"PanTool":this.isScrollingToolDisabled=t,this.enableScrollingTool(t);break;case"DownloadOption":this.enableDownloadOption(t);break;case"PrintOption":this.enablePrintOption(t);break;case"SearchOption":this.enableSearchOption(t);break;case"UndoRedoTool":this.enableUndoRedoTool(t);break;case"AnnotationEditTool":this.enableAnnotationEditTool(t);break;case"FormDesignerEditTool":this.enableFormDesignerEditTool(t);break;case"CommentTool":this.enableCommentsTool(t)}},s.prototype.DisableToolbarItems=function(e,t){switch(e){case"Print":this.enablePrintOption(t);break;case"CopyContent":this.isSelectionToolDisabled=t,this.enableSelectionTool(t),t?(this.pdfViewerBase.initiateTextSelectMode(),this.updateInteractionTools(t)):(this.pdfViewerBase.initiatePanning(),this.updateInteractionTools(t));break;case"EditAnnotations":this.enableAnnotationEditTool(t),this.annotationToolbarModule.isToolbarHidden||this.annotationToolbarModule.showAnnotationToolbar()}},s.prototype.showOpenOption=function(e){this.isOpenBtnVisible=e,this.applyHideToToolbar(e,0,0)},s.prototype.showPageNavigationTool=function(e){this.isNavigationToolVisible=e,this.applyHideToToolbar(e,2,7)},s.prototype.showMagnificationTool=function(e){this.isMagnificationToolVisible=e,this.applyHideToToolbar(e,9,11)},s.prototype.showSelectionTool=function(e){this.isSelectionBtnVisible=e,this.applyHideToToolbar(e,13,13)},s.prototype.showScrollingTool=function(e){this.isScrollingBtnVisible=e,this.applyHideToToolbar(e,14,14)},s.prototype.showDownloadOption=function(e){this.isDownloadBtnVisible=e,!a.AR.isDevice||this.pdfViewer.enableDesktopMode?this.applyHideToToolbar(e,26,26):this.applyHideToToolbar(e,5,5)},s.prototype.showPrintOption=function(e){this.isPrintBtnVisible=e,this.applyHideToToolbar(e,25,25)},s.prototype.showSearchOption=function(e){this.isSearchBtnVisible=e,!a.AR.isDevice||this.pdfViewer.enableDesktopMode?this.applyHideToToolbar(e,22,22):this.applyHideToToolbar(e,5,5)},s.prototype.showUndoRedoTool=function(e){this.isUndoRedoBtnsVisible=e,!a.AR.isDevice||this.pdfViewer.enableDesktopMode?this.applyHideToToolbar(e,16,17):this.applyHideToToolbar(e,2,3)},s.prototype.showCommentOption=function(e){this.pdfViewer.enableStickyNotesAnnotation?(this.isCommentBtnVisible=e,this.applyHideToToolbar(e,18,19)):(this.isCommentBtnVisible=e,this.applyHideToToolbar(this.pdfViewer.enableStickyNotesAnnotation,18,19))},s.prototype.showAnnotationEditTool=function(e){this.isAnnotationEditBtnVisible=e,!a.AR.isDevice||this.pdfViewer.enableDesktopMode?this.applyHideToToolbar(e,23,23):this.applyHideToToolbar(e,4,4)},s.prototype.showFormDesignerEditTool=function(e){this.isFormDesignerEditBtnVisible=e,this.applyHideToToolbar(e,24,24)},s.prototype.showSubmitForm=function(e){this.isSubmitbtnvisible=e,this.applyHideToToolbar(e,20,21)},s.prototype.enableOpenOption=function(e){this.toolbar.enableItems(this.openDocumentItem.parentElement,e)},s.prototype.enablePageNavigationTool=function(e){this.toolbar.enableItems(this.firstPageItem.parentElement,e),this.toolbar.enableItems(this.previousPageItem.parentElement,e),this.toolbar.enableItems(this.nextPageItem.parentElement,e),this.toolbar.enableItems(this.lastPageItem.parentElement,e),this.currentPageBox.readonly=!e},s.prototype.enableMagnificationTool=function(e){this.toolbar.enableItems(this.zoomInItem.parentElement,e),this.toolbar.enableItems(this.zoomOutItem.parentElement,e),this.zoomDropDown.readonly=!e},s.prototype.enableSelectionTool=function(e){this.textSelectItem&&this.textSelectItem.parentElement&&this.toolbar.enableItems(this.textSelectItem.parentElement,e)},s.prototype.enableScrollingTool=function(e){this.toolbar.enableItems(this.panItem.parentElement,e)},s.prototype.enableDownloadOption=function(e){this.toolbar.enableItems(this.downloadItem.parentElement,e)},s.prototype.enablePrintOption=function(e){this.toolbar.enableItems(this.printItem.parentElement,e)},s.prototype.enableSearchOption=function(e){this.toolbar.enableItems(this.textSearchItem.parentElement,e)},s.prototype.enableUndoRedoTool=function(e){this.toolbar.enableItems(this.undoItem.parentElement,e),this.toolbar.enableItems(this.redoItem.parentElement,e)},s.prototype.enableAnnotationEditTool=function(e){this.toolbar.enableItems(this.annotationItem.parentElement,e)},s.prototype.enableFormDesignerEditTool=function(e){this.toolbar.enableItems(this.formDesignerItem.parentElement,e)},s.prototype.enableCommentsTool=function(e){this.pdfViewer.enableStickyNotesAnnotation&&this.toolbar.enableItems(this.annotationItem.parentElement,e)},s.prototype.resetToolbar=function(){if(!a.AR.isDevice||this.pdfViewer.enableDesktopMode)if(this.currentPageBox.min=0,this.currentPageBox.value=0,this.updateTotalPage(),this.updateToolbarItems(),this.annotationToolbarModule)this.annotationToolbarModule.clear();else if(this.annotationToolbarModule){this.annotationToolbarModule.propertyToolbar&&this.annotationToolbarModule.propertyToolbar.destroy();var e=document.getElementById(this.pdfViewer.element.id+"_commentscontentcontainer");e&&(e.innerHTML="")}},s.prototype.updateToolbarItems=function(){!a.AR.isDevice||this.pdfViewer.enableDesktopMode?this.toolbar&&(0===this.pdfViewerBase.pageCount?(this.toolbar.enableItems(this.downloadItem.parentElement,!1),this.toolbar.enableItems(this.printItem.parentElement,!1),this.toolbar.enableItems(this.commentItem.parentElement,!1),this.updateUndoRedoButtons(),this.updateNavigationButtons(),this.toolbar.enableItems(this.zoomInItem.parentElement,!1),this.toolbar.enableItems(this.zoomOutItem.parentElement,!1),this.pdfViewer.magnificationModule&&(this.zoomDropDown.readonly=!0),this.toolbar.enableItems(this.submitItem.parentElement,!1),this.toolbar.enableItems(this.pdfViewerBase.getElement("_currentPageInputContainer"),!1),this.toolbar.enableItems(this.pdfViewerBase.getElement("_zoomDropDownContainer"),!1),this.toolbar.enableItems(this.textSelectItem.parentElement,!1),this.toolbar.enableItems(this.annotationItem.parentElement,!1),this.toolbar.enableItems(this.formDesignerItem.parentElement,!1),this.toolbar.enableItems(this.panItem.parentElement,!1),this.toolbar.enableItems(this.textSearchItem.parentElement,!1),this.deSelectItem(this.annotationItem),this.annotationToolbarModule&&this.annotationToolbarModule.resetToolbar(),this.deSelectItem(this.formDesignerItem),this.formDesignerToolbarModule&&this.formDesignerToolbarModule.resetFormDesignerToolbar()):this.pdfViewerBase.pageCount>0&&this.pdfViewerBase.getElement("_currentPageInputContainer")&&(this.toolbar.enableItems(this.downloadItem.parentElement,!0),this.toolbar.enableItems(this.printItem.parentElement,!0),this.toolbar.enableItems(this.pdfViewerBase.getElement("_currentPageInputContainer"),!0),this.toolbar.enableItems(this.pdfViewerBase.getElement("_zoomDropDownContainer"),!0),this.updateUndoRedoButtons(),this.updateNavigationButtons(),this.updateZoomButtons(),this.pdfViewer.magnificationModule&&(this.zoomDropDown.readonly=!1),this.updateInteractionItems(),this.pdfViewer.annotationModule&&this.pdfViewer.enableAnnotation&&this.toolbar.enableItems(this.annotationItem.parentElement,!0),this.pdfViewer.formDesignerModule&&this.pdfViewer.enableFormDesigner&&this.toolbar.enableItems(this.formDesignerItem.parentElement,!0),this.pdfViewer.textSearchModule&&this.pdfViewer.enableTextSearch&&this.toolbar.enableItems(this.textSearchItem.parentElement,!0),this.pdfViewer.annotationModule&&this.pdfViewer.enableStickyNotesAnnotation&&this.toolbar.enableItems(this.commentItem.parentElement,!0)),this.pdfViewer.toolbarSettings.annotationToolbarItems&&(0===this.pdfViewer.toolbarSettings.annotationToolbarItems.length||!this.pdfViewer.annotationModule||!this.pdfViewer.enableAnnotationToolbar)&&this.enableToolbarItem(["AnnotationEditTool"],!1),this.pdfViewer.toolbarSettings.formDesignerToolbarItems&&(0===this.pdfViewer.toolbarSettings.formDesignerToolbarItems.length||!this.pdfViewer.formDesignerModule||!this.pdfViewer.enableFormDesignerToolbar)&&this.enableToolbarItem(["FormDesignerEditTool"],!1),this.pdfViewer.enableDownload||this.enableDownloadOption(!1),this.pdfViewer.enablePrint||this.enablePrintOption(!1)):0===this.pdfViewerBase.pageCount?(this.toolbar.enableItems(this.textSearchItem.parentElement,!1),this.toolbar.enableItems(this.moreOptionItem.parentElement,!1),this.toolbar.enableItems(this.annotationItem.parentElement,!1)):this.pdfViewerBase.pageCount>0&&(this.toolbar.enableItems(this.textSearchItem.parentElement,!0),this.toolbar.enableItems(this.moreOptionItem.parentElement,!0),this.pdfViewer.annotationModule&&this.pdfViewer.enableAnnotation&&this.toolbar.enableItems(this.annotationItem.parentElement,!0),(!this.pdfViewer.annotationModule||!this.pdfViewer.enableAnnotationToolbar)&&this.enableToolbarItem(["AnnotationEditTool"],!1),this.updateUndoRedoButtons())},s.prototype.updateNavigationButtons=function(){this.pdfViewer.navigationModule&&!this.isPageNavigationToolDisabled?0===this.pdfViewerBase.pageCount||1===this.pdfViewerBase.currentPageNumber&&1===this.pdfViewerBase.pageCount?(this.toolbar.enableItems(this.firstPageItem.parentElement,!1),this.toolbar.enableItems(this.previousPageItem.parentElement,!1),this.toolbar.enableItems(this.nextPageItem.parentElement,!1),this.toolbar.enableItems(this.lastPageItem.parentElement,!1)):1===this.pdfViewerBase.currentPageNumber&&this.pdfViewerBase.pageCount>0?(this.toolbar.enableItems(this.firstPageItem.parentElement,!1),this.toolbar.enableItems(this.previousPageItem.parentElement,!1),this.toolbar.enableItems(this.nextPageItem.parentElement,!0),this.toolbar.enableItems(this.lastPageItem.parentElement,!0)):this.pdfViewerBase.currentPageNumber===this.pdfViewerBase.pageCount&&this.pdfViewerBase.pageCount>0?(this.toolbar.enableItems(this.firstPageItem.parentElement,!0),this.toolbar.enableItems(this.previousPageItem.parentElement,!0),this.toolbar.enableItems(this.nextPageItem.parentElement,!1),this.toolbar.enableItems(this.lastPageItem.parentElement,!1)):this.pdfViewerBase.currentPageNumber>1&&this.pdfViewerBase.currentPageNumber<this.pdfViewerBase.pageCount&&(this.toolbar.enableItems(this.firstPageItem.parentElement,!0),this.toolbar.enableItems(this.previousPageItem.parentElement,!0),this.toolbar.enableItems(this.nextPageItem.parentElement,!0),this.toolbar.enableItems(this.lastPageItem.parentElement,!0)):(this.toolbar.enableItems(this.firstPageItem.parentElement,!1),this.toolbar.enableItems(this.previousPageItem.parentElement,!1),this.toolbar.enableItems(this.nextPageItem.parentElement,!1),this.toolbar.enableItems(this.lastPageItem.parentElement,!1),this.currentPageBox.readonly=!0)},s.prototype.updateZoomButtons=function(){this.pdfViewer.magnificationModule&&!this.isMagnificationToolDisabled&&(!a.AR.isDevice||this.pdfViewer.enableDesktopMode)&&(this.pdfViewer.magnificationModule.zoomFactor<=.1?(this.toolbar.enableItems(this.zoomInItem.parentElement,!0),this.toolbar.enableItems(this.zoomOutItem.parentElement,!1)):this.pdfViewer.magnificationModule.zoomFactor>=4?(this.toolbar.enableItems(this.zoomInItem.parentElement,!1),this.toolbar.enableItems(this.zoomOutItem.parentElement,!0)):(this.toolbar.enableItems(this.zoomInItem.parentElement,!0),this.toolbar.enableItems(this.zoomOutItem.parentElement,!0)))},s.prototype.updateUndoRedoButtons=function(){this.pdfViewer.annotationModule&&this.pdfViewerBase.pageCount>0?(0,a.xr)()?(this.enableCollectionAvailableInBlazor(this.pdfViewer.annotationModule.actionCollection,"undo"),this.enableCollectionAvailableInBlazor(this.pdfViewer.annotationModule.redoCollection,"redo")):(this.enableCollectionAvailable(this.pdfViewer.annotationModule.actionCollection,this.undoItem.parentElement),this.enableCollectionAvailable(this.pdfViewer.annotationModule.redoCollection,this.redoItem.parentElement)):(0,a.xr)()?this.pdfViewerBase.blazorUIAdaptor.disableUndoRedoButton():this.disableUndoRedoButtons()},s.prototype.enableCollectionAvailable=function(e,t){this.toolbar.enableItems(t,e.length>0)},s.prototype.enableCollectionAvailableInBlazor=function(e,t){this.pdfViewerBase.blazorUIAdaptor.updateUndoRedoButton(t,e.length>0)},s.prototype.disableUndoRedoButtons=function(){this.toolbar.enableItems(this.undoItem.parentElement,!1),this.toolbar.enableItems(this.redoItem.parentElement,!1)},s.prototype.destroy=function(){(0,a.xr)()||(this.unWireEvent(),this.destroyComponent(),this.moreDropDown&&this.moreDropDown.destroy(),this.annotationToolbarModule&&this.annotationToolbarModule.destroy(),this.formDesignerToolbarModule&&this.formDesignerToolbarModule.destroy(),this.toolbar.destroy(),this.toolbarElement.parentElement.removeChild(this.toolbarElement))},s.prototype.destroyComponent=function(){for(var e=[this.openDocumentItem,this.firstPageItem,this.previousPageItem,this.nextPageItem,this.lastPageItem,this.currentPageBoxElement,this.zoomOutItem,this.zoomInItem,this.zoomDropdownItem,this.textSelectItem,this.panItem,this.submitItem,this.undoItem,this.redoItem,this.commentItem,this.textSearchItem,this.annotationItem,this.formDesignerItem,this.printItem,this.downloadItem],t=0;t<e.length;t++)e[t]&&this.destroyDependentComponent(e[t])},s.prototype.destroyDependentComponent=function(e){if(e.ej2_instances)for(var t=e.ej2_instances.length-1;t>=0;t--)e.ej2_instances[t].destroy()},s.prototype.updateCurrentPage=function(e){!a.AR.isDevice||this.pdfViewer.enableDesktopMode?((0,a.xr)()?this.pdfViewerBase.blazorUIAdaptor.pageChanged(e):(this.currentPageBox.value===e&&(this.currentPageBoxElement.value=e.toString()),this.currentPageBox.value=e),this.pdfViewerBase.currentPageNumber=e,this.pdfViewer.currentPageNumber=e):(this.pdfViewerBase.mobileSpanContainer.innerHTML=e.toString(),this.pdfViewerBase.mobilecurrentPageContainer.innerHTML=e.toString())},s.prototype.updateTotalPage=function(){(!a.AR.isDevice||this.pdfViewer.enableDesktopMode)&&(this.pdfViewerBase.pageCount>0&&((0,a.le)(this.currentPageBox)||(this.currentPageBox.min=1)),(0,a.le)(this.totalPageItem)||(this.totalPageItem.textContent=this.pdfViewer.localeObj.getConstant("of")+this.pdfViewerBase.pageCount.toString()))},s.prototype.openFileDialogBox=function(e){e.preventDefault(),this.fileInputElement.click()},s.prototype.createToolbar=function(e){var t=this;return this.toolbarElement=(0,a.az)("div",{id:this.pdfViewer.element.id+"_toolbarContainer",className:"e-pv-toolbar"}),this.pdfViewerBase.viewerMainContainer.appendChild(this.toolbarElement),!a.AR.isDevice||this.pdfViewer.enableDesktopMode?(this.toolbar=new re.o8({clicked:this.toolbarClickHandler,width:"",height:"",overflowMode:"Popup",cssClass:"e-pv-toolbar-scroll",items:this.createToolbarItems(),created:function(){t.createZoomDropdown(),t.createNumericTextBox(),t.toolbar.refreshOverflow()}}),this.toolbar.isStringTemplate=!0,this.pdfViewer.enableRtl&&(this.toolbar.enableRtl=!0),this.toolbar.appendTo(this.toolbarElement),this.applyToolbarSettings(),this.afterToolbarCreation(),this.updateTotalPage(),this.toolbarElement.addEventListener("keydown",this.onToolbarKeydown),this.toolbarElement.setAttribute("aria-label","Toolbar")):(this.createToolbarItemsForMobile(),this.afterToolbarCreationInMobile(),this.pdfViewer.enableRtl&&(this.toolbar.enableRtl=!0),this.applyToolbarSettingsForMobile(),this.disableUndoRedoButtons()),this.toolbarElement},s.prototype.createToolbarItems=function(){var e=this.createCurrentPageInputTemplate(),t=this.createTotalPageTemplate(),i=this.createZoomDropdownElement(),n=[],o='<button id="'+this.pdfViewer.element.id+'_submitForm" class="e-tbar-btn" style="font-size:15px"><span id="'+this.pdfViewer.element.id+'_submitFormSpan" class="e-tbar-btn-text e-pv-submitform-text">'+this.pdfViewer.localeObj.getConstant("SubmitForm")+"</span></button>";return n.push({prefixIcon:"e-pv-open-document-icon e-pv-icon",cssClass:"e-pv-open-document-container",id:this.pdfViewer.element.id+"_open",text:this.pdfViewer.localeObj.getConstant("Open text"),align:"Left"}),n.push({type:"Separator",align:"Left",cssClass:"e-pv-open-separator-container"}),this.pdfViewer.enableRtl?(n.push({prefixIcon:"e-pv-last-page-navigation-icon e-pv-icon",cssClass:"e-pv-last-page-navigation-container",id:this.pdfViewer.element.id+"_firstPage",text:this.pdfViewer.localeObj.getConstant("First text"),align:"Left"}),n.push({prefixIcon:"e-pv-next-page-navigation-icon e-pv-icon",cssClass:"e-pv-next-page-navigation-container",id:this.pdfViewer.element.id+"_previousPage",text:this.pdfViewer.localeObj.getConstant("Previous text"),align:"Left"}),n.push({prefixIcon:"e-pv-previous-page-navigation-icon e-pv-icon",cssClass:"e-pv-previous-page-navigation-container",id:this.pdfViewer.element.id+"_nextPage",text:this.pdfViewer.localeObj.getConstant("Next text"),align:"Left"}),n.push({prefixIcon:"e-pv-first-page-navigation-icon e-pv-icon",cssClass:"e-pv-first-page-navigation-container",id:this.pdfViewer.element.id+"_lastPage",text:this.pdfViewer.localeObj.getConstant("Last text"),align:"Left"}),n.push({template:t,align:"Left",cssClass:"e-pv-total-page-container"}),n.push({template:e,align:"Left",cssClass:"e-pv-current-page-container"})):(n.push({prefixIcon:"e-pv-first-page-navigation-icon e-pv-icon",cssClass:"e-pv-first-page-navigation-container",id:this.pdfViewer.element.id+"_firstPage",text:this.pdfViewer.localeObj.getConstant("First text"),align:"Left"}),n.push({prefixIcon:"e-pv-previous-page-navigation-icon e-pv-icon",cssClass:"e-pv-previous-page-navigation-container",id:this.pdfViewer.element.id+"_previousPage",text:this.pdfViewer.localeObj.getConstant("Previous text"),align:"Left"}),n.push({prefixIcon:"e-pv-next-page-navigation-icon e-pv-icon",cssClass:"e-pv-next-page-navigation-container",id:this.pdfViewer.element.id+"_nextPage",text:this.pdfViewer.localeObj.getConstant("Next text"),align:"Left"}),n.push({prefixIcon:"e-pv-last-page-navigation-icon e-pv-icon",cssClass:"e-pv-last-page-navigation-container",id:this.pdfViewer.element.id+"_lastPage",text:this.pdfViewer.localeObj.getConstant("Last text"),align:"Left"}),n.push({template:e,align:"Left",cssClass:"e-pv-current-page-container"}),n.push({template:t,align:"Left",cssClass:"e-pv-total-page-container"})),n.push({type:"Separator",align:"Left",cssClass:"e-pv-navigation-separator-container"}),n.push({prefixIcon:"e-pv-zoom-out-icon e-pv-icon",cssClass:"e-pv-zoom-out-container",id:this.pdfViewer.element.id+"_zoomOut",text:this.pdfViewer.localeObj.getConstant("Zoom out text"),align:"Left"}),n.push({prefixIcon:"e-pv-zoom-in-icon e-pv-icon",cssClass:"e-pv-zoom-in-container",id:this.pdfViewer.element.id+"_zoomIn",text:this.pdfViewer.localeObj.getConstant("Zoom in text"),align:"Left"}),n.push({template:i,cssClass:"e-pv-zoom-drop-down-container",align:"Left"}),n.push({type:"Separator",align:"Left",cssClass:"e-pv-magnification-separator-container"}),n.push({prefixIcon:"e-pv-text-select-tool-icon e-pv-icon",cssClass:"e-pv-text-select-tool-container",id:this.pdfViewer.element.id+"_selectTool",text:this.pdfViewer.localeObj.getConstant("Selection text")}),n.push({prefixIcon:"e-pv-pan-tool-icon e-pv-icon",cssClass:"e-pv-pan-tool-container",id:this.pdfViewer.element.id+"_handTool",text:this.pdfViewer.localeObj.getConstant("Pan text")}),n.push({type:"Separator",align:"Left",cssClass:"e-pv-pan-separator-container"}),n.push({prefixIcon:"e-pv-undo-icon e-pv-icon",cssClass:"e-pv-undo-container",id:this.pdfViewer.element.id+"_undo",text:this.pdfViewer.localeObj.getConstant("Undo"),align:"Left"}),n.push({prefixIcon:"e-pv-redo-icon e-pv-icon",cssClass:"e-pv-redo-container",id:this.pdfViewer.element.id+"_redo",text:this.pdfViewer.localeObj.getConstant("Redo"),align:"Left"}),n.push({type:"Separator",align:"Left",cssClass:"e-pv-undo-separator-container"}),n.push({prefixIcon:"e-pv-comment-icon e-pv-icon",cssClass:"e-pv-comment-container",id:this.pdfViewer.element.id+"_comment",text:this.pdfViewer.localeObj.getConstant("Add Comments"),align:"Left"}),n.push({type:"Separator",align:"Left",cssClass:"e-pv-comment-separator-container"}),n.push({template:o,cssClass:"e-pv-submit",align:"Left"}),n.push({prefixIcon:"e-pv-text-search-icon e-pv-icon",cssClass:"e-pv-text-search-container",id:this.pdfViewer.element.id+"_search",text:this.pdfViewer.localeObj.getConstant("Search text"),align:"Right"}),n.push({prefixIcon:"e-pv-annotation-icon e-pv-icon",cssClass:"e-pv-annotation-container",id:this.pdfViewer.element.id+"_annotation",text:this.pdfViewer.localeObj.getConstant("Annotation Edit text"),align:"Right"}),n.push({prefixIcon:"e-pv-formdesigner-icon e-pv-icon",cssClass:"e-pv-formdesigner-container",id:this.pdfViewer.element.id+"_formdesigner",text:this.pdfViewer.localeObj.getConstant("FormDesigner Edit text"),align:"Right"}),n.push({prefixIcon:"e-pv-print-document-icon e-pv-icon",cssClass:"e-pv-print-document-container",id:this.pdfViewer.element.id+"_print",text:this.pdfViewer.localeObj.getConstant("Print text"),align:"Right"}),n.push({prefixIcon:"e-pv-download-document-icon e-pv-icon",cssClass:"e-pv-download-document-container",id:this.pdfViewer.element.id+"_download",text:this.pdfViewer.localeObj.getConstant("Download"),align:"Right"}),n},s.prototype.afterToolbarCreationInMobile=function(){this.itemsContainer=this.toolbar.element.childNodes[0],this.itemsContainer.id=this.pdfViewer.element.id+"_toolbarItemsContainer",this.openDocumentItem=this.addClassToolbarItem("_open","e-pv-open-document",this.pdfViewer.localeObj.getConstant("Open")),this.undoItem=this.addClassToolbarItem("_undo","e-pv-undo",this.pdfViewer.localeObj.getConstant("Undo")),this.redoItem=this.addClassToolbarItem("_redo","e-pv-redo",this.pdfViewer.localeObj.getConstant("Redo")),this.annotationItem=this.addClassToolbarItem("_annotation","e-pv-annotation",this.pdfViewer.localeObj.getConstant("Annotation")),this.textSearchItem=this.addClassToolbarItem("_search","e-pv-text-search",this.pdfViewer.localeObj.getConstant("Text Search"))},s.prototype.afterToolbarCreation=function(){this.itemsContainer=this.toolbar.element.childNodes[0],this.itemsContainer.id=this.pdfViewer.element.id+"_toolbarItemsContainer",this.openDocumentItem=this.addClassToolbarItem("_open","e-pv-open-document",this.pdfViewer.localeObj.getConstant("Open")),this.undoItem=this.addClassToolbarItem("_undo","e-pv-undo",this.pdfViewer.localeObj.getConstant("Undo")),this.redoItem=this.addClassToolbarItem("_redo","e-pv-redo",this.pdfViewer.localeObj.getConstant("Redo")),this.pdfViewer.enableRtl?(this.firstPageItem=this.addClassToolbarItem("_firstPage","e-pv-last-page-navigation",this.pdfViewer.localeObj.getConstant("Go To First Page")),this.previousPageItem=this.addClassToolbarItem("_previousPage","e-pv-next-page-navigation",this.pdfViewer.localeObj.getConstant("Previous Page")),this.nextPageItem=this.addClassToolbarItem("_nextPage","e-pv-previous-page-navigation",this.pdfViewer.localeObj.getConstant("Next Page")),this.lastPageItem=this.addClassToolbarItem("_lastPage","e-pv-first-page-navigation",this.pdfViewer.localeObj.getConstant("Go To Last Page"))):(this.firstPageItem=this.addClassToolbarItem("_firstPage","e-pv-first-page-navigation",this.pdfViewer.localeObj.getConstant("Go To First Page")),this.previousPageItem=this.addClassToolbarItem("_previousPage","e-pv-previous-page-navigation",this.pdfViewer.localeObj.getConstant("Previous Page")),this.nextPageItem=this.addClassToolbarItem("_nextPage","e-pv-next-page-navigation",this.pdfViewer.localeObj.getConstant("Next Page")),this.lastPageItem=this.addClassToolbarItem("_lastPage","e-pv-last-page-navigation",this.pdfViewer.localeObj.getConstant("Go To Last Page"))),this.zoomOutItem=this.addClassToolbarItem("_zoomOut","e-pv-zoom-out",this.pdfViewer.localeObj.getConstant("Zoom Out")),this.zoomInItem=this.addClassToolbarItem("_zoomIn","e-pv-zoom-in",this.pdfViewer.localeObj.getConstant("Zoom In")),this.textSelectItem=this.addClassToolbarItem("_selectTool","e-pv-text-select-tool",this.pdfViewer.localeObj.getConstant("Text Selection")),this.panItem=this.addClassToolbarItem("_handTool","e-pv-pan-tool",this.pdfViewer.localeObj.getConstant("Panning")),this.commentItem=this.addClassToolbarItem("_comment","e-pv-comment",this.pdfViewer.localeObj.getConstant("Add Comments")),this.textSearchItem=this.addClassToolbarItem("_search","e-pv-text-search",this.pdfViewer.localeObj.getConstant("Text Search")),this.textSearchItem.setAttribute("aria-label",this.pdfViewer.localeObj.getConstant("Search text")),this.annotationItem=this.addClassToolbarItem("_annotation","e-pv-annotation",this.pdfViewer.localeObj.getConstant("Annotation")),this.annotationItem.setAttribute("aria-label",this.pdfViewer.localeObj.getConstant("Annotation Edit text")),this.formDesignerItem=this.addClassToolbarItem("_formdesigner","e-pv-formdesigner",this.pdfViewer.localeObj.getConstant("FormDesigner")),this.printItem=this.addClassToolbarItem("_print","e-pv-print-document",this.pdfViewer.localeObj.getConstant("Print")),this.downloadItem=this.addClassToolbarItem("_download","e-pv-download-document",this.pdfViewer.localeObj.getConstant("Download file")),this.zoomDropdownItem=this.pdfViewerBase.getElement("_zoomDropDown"),this.createTooltip(this.zoomDropdownItem,this.pdfViewer.localeObj.getConstant("Zoom")),this.zoomDropdownItem.setAttribute("aria-label",this.pdfViewer.localeObj.getConstant("Zoom")),this.addPropertiesToolItemContainer(this.zoomDropdownItem.parentElement.parentElement,null,"_zoomDropDownContainer"),this.pdfViewerBase.getElement("_zoomDropDownContainer").style.minWidth="",this.createTooltip(this.currentPageBoxElement,this.pdfViewer.localeObj.getConstant("Page Number")),this.currentPageBoxElement.setAttribute("aria-label",this.pdfViewer.localeObj.getConstant("Page Number")),this.submitItem=this.pdfViewerBase.getElement("_submitForm"),this.addPropertiesToolItemContainer(this.submitItem.parentElement,"e-pv-submit","_submitFormContainer"),this.createTooltip(this.submitItem,this.pdfViewer.localeObj.getConstant("SubmitForm")),this.addPropertiesToolItemContainer(this.currentPageBoxElement.parentElement.parentElement,"e-pv-current-page-container","_currentPageInputContainer"),this.pdfViewerBase.getElement("_currentPageInputContainer").style.minWidth="20px",this.totalPageItem=this.pdfViewerBase.getElement("_totalPage"),this.addPropertiesToolItemContainer(this.totalPageItem.parentElement,"e-pv-total-page-container","_totalPageContainer")},s.prototype.addClassToolbarItem=function(e,t,i){var n=this.pdfViewerBase.getElement(e);if(n.classList.add(t),n.classList.add("e-pv-tbar-btn"),n.setAttribute("aria-label",i),n.parentElement.classList.add(t+"-container"),n.parentElement.classList.add("e-popup-text"),n.parentElement.id=this.pdfViewer.element.id+e+"Container",n.childNodes.length>0){var o=n.childNodes[0];o.id=this.pdfViewer.element.id+e+"Icon",o.classList.remove("e-icons"),o.classList.remove("e-btn-icon"),this.pdfViewer.enableRtl&&o.classList.add("e-right");var r=n.childNodes[1];r&&r.classList.contains("e-tbar-btn-text")&&(r.id=this.pdfViewer.element.id+e+"Text")}return n.style.width="",this.createTooltip(n,i),n},s.prototype.addPropertiesToolItemContainer=function(e,t,i){null!==t&&e.classList.add(t),e.classList.add("e-popup-text"),e.id=this.pdfViewer.element.id+i},s.prototype.createZoomDropdownElement=function(){return this.createToolbarItem("input",this.pdfViewer.element.id+"_zoomDropDown",null).outerHTML},s.prototype.createZoomDropdown=function(){var e=[{percent:"10%",id:"0"},{percent:"25%",id:"1"},{percent:"50%",id:"2"},{percent:"75%",id:"3"},{percent:"100%",id:"4"},{percent:"125%",id:"5"},{percent:"150%",id:"6"},{percent:"200%",id:"7"},{percent:"400%",id:"8"},{percent:this.pdfViewer.localeObj.getConstant("Fit Page"),id:"9"},{percent:this.pdfViewer.localeObj.getConstant("Fit Width"),id:"10"},{percent:this.pdfViewer.localeObj.getConstant("Automatic"),id:"11"}];this.zoomDropDown=new vt.Ct(this.pdfViewer.enableRtl?{dataSource:e,text:"100%",enableRtl:!0,fields:{text:"percent",value:"id"},readonly:!0,cssClass:"e-pv-zoom-drop-down-rtl",popupHeight:"450px",showClearButton:!1,open:this.openZoomDropdown.bind(this),select:function(t){"keydown"==t.e.type&&t.itemData.text!==this.zoomDropDown.element.value&&(t.cancel=!0)}}:{dataSource:e,text:"100%",fields:{text:"percent",value:"id"},readonly:!0,cssClass:"e-pv-zoom-drop-down",popupHeight:"450px",showClearButton:!1,open:this.openZoomDropdown.bind(this),select:function(t){"keydown"==t.e.type&&t.itemData.text!==this.zoomDropDown.element.value&&(t.cancel=!0)}}),this.zoomDropDown.appendTo(this.pdfViewerBase.getElement("_zoomDropDown"))},s.prototype.createCurrentPageInputTemplate=function(){return this.createToolbarItem("input",this.pdfViewer.element.id+"_currentPageInput",null).outerHTML},s.prototype.createTotalPageTemplate=function(){return this.createToolbarItem("span",this.pdfViewer.element.id+"_totalPage","e-pv-total-page").outerHTML},s.prototype.createNumericTextBox=function(){this.currentPageBox=new G.No({value:0,format:"##",cssClass:"e-pv-current-page-box",showSpinButton:!1}),this.currentPageBoxElement=this.pdfViewerBase.getElement("_currentPageInput"),this.currentPageBox.appendTo(this.currentPageBoxElement)},s.prototype.createToolbarItemsForMobile=function(){this.toolbarElement.classList.add("e-pv-mobile-toolbar");var e='<button id="'+this.pdfViewer.element.id+'_more_option" class="e-tbar-btn"></button>';this.toolbar=new re.o8({items:[{prefixIcon:"e-pv-open-document-icon e-pv-icon",tooltipText:this.pdfViewer.localeObj.getConstant("Open"),id:this.pdfViewer.element.id+"_open"},{type:"Separator",align:"Left"},{prefixIcon:"e-pv-undo-icon e-pv-icon",tooltipText:this.pdfViewer.localeObj.getConstant("Undo"),id:this.pdfViewer.element.id+"_undo"},{prefixIcon:"e-pv-redo-icon e-pv-icon",tooltipText:this.pdfViewer.localeObj.getConstant("Redo"),id:this.pdfViewer.element.id+"_redo"},{prefixIcon:"e-pv-annotation-icon e-pv-icon",cssClass:"e-pv-annotation-container",tooltipText:this.pdfViewer.localeObj.getConstant("Annotation"),id:this.pdfViewer.element.id+"_annotation",align:"Right"},{prefixIcon:"e-pv-text-search-icon e-pv-icon",tooltipText:this.pdfViewer.localeObj.getConstant("Text Search"),id:this.pdfViewer.element.id+"_search",align:"Right"},{template:e,align:"Right"}],clicked:this.toolbarClickHandler,width:"",height:"",overflowMode:"Popup"}),this.toolbar.isStringTemplate=!0,this.toolbar.appendTo(this.toolbarElement),this.openDocumentItem=this.pdfViewerBase.getElement("_open"),this.openDocumentItem.classList.add("e-pv-open-document"),this.openDocumentItem.firstElementChild.id=this.pdfViewer.element.id+"_openIcon",this.annotationItem=this.pdfViewerBase.getElement("_annotation"),this.annotationItem.classList.add("e-pv-annotation"),this.annotationItem.firstElementChild.id=this.pdfViewer.element.id+"_annotationIcon",this.textSearchItem=this.pdfViewerBase.getElement("_search"),this.textSearchItem.classList.add("e-pv-text-search"),this.textSearchItem.firstElementChild.id=this.pdfViewer.element.id+"_searchIcon",this.undoItem=this.pdfViewerBase.getElement("_undo"),this.undoItem.classList.add("e-pv-undo"),this.redoItem=this.pdfViewerBase.getElement("_redo"),this.redoItem.classList.add("e-pv-redo"),this.redoItem.firstElementChild.id=this.pdfViewer.element.id+"_redoIcon",this.undoItem.firstElementChild.id=this.pdfViewer.element.id+"_undoIcon",this.createMoreOption(this.pdfViewer.element.id+"_more_option")},s.prototype.createMoreOption=function(e){var t=this;this.moreOptionItem=document.getElementById(e);var i=[{text:this.pdfViewer.localeObj.getConstant("Download"),id:this.pdfViewer.element.id+"_menu_download",iconCss:"e-icons e-pv-download-document-icon e-pv-icon"},{text:this.pdfViewer.localeObj.getConstant("Bookmarks"),id:this.pdfViewer.element.id+"_menu_bookmarks",iconCss:"e-icons e-pv-bookmark-icon e-pv-icon"}];this.moreDropDown=new Le.uw({items:i,iconCss:"e-pv-more-icon e-pv-icon",cssClass:"e-caret-hide",open:function(n){var o=t.moreDropDown.element.getBoundingClientRect();t.pdfViewer.enableRtl||(n.element.parentElement.style.left=o.left+o.width-n.element.parentElement.offsetWidth+"px")},select:function(n){switch(n.item.id){case t.pdfViewer.element.id+"_menu_download":t.pdfViewerBase.download();break;case t.pdfViewer.element.id+"_menu_bookmarks":t.showToolbar(!1),t.pdfViewerBase.navigationPane.createNavigationPaneMobile("bookmarks")}},beforeItemRender:function(n){n.item.id===t.pdfViewer.element.id+"_menu_bookmarks"&&(t.pdfViewer.bookmarkViewModule&&t.pdfViewer.bookmarkViewModule.bookmarks?n.element.classList.remove("e-disabled"):n.element.classList.add("e-disabled"))},close:function(n){t.moreOptionItem.blur(),t.pdfViewerBase.focusViewerContainer()}}),this.moreDropDown.appendTo("#"+e)},s.prototype.createToolbarItem=function(e,t,i){var n=(0,a.az)(e,{id:t});return null!==i&&(n.className=i),"input"===e&&t!==this.pdfViewer.element.id+"_zoomDropDown"&&(n.type="text"),n},s.prototype.createTooltip=function(e,t){null!==t&&new j.u({content:t,opensOn:"Hover",beforeOpen:this.onTooltipBeforeOpen.bind(this)}).appendTo(e)},s.prototype.onTooltipBeforeOpen=function(e){!this.pdfViewer.toolbarSettings.showTooltip&&this.toolbarElement.contains(e.target)&&(e.cancel=!0),this.annotationToolbarModule&&!this.pdfViewer.toolbarSettings.showTooltip&&(this.annotationToolbarModule.toolbarElement&&this.annotationToolbarModule.toolbarElement.contains(e.target)||this.annotationToolbarModule.shapeToolbarElement&&this.annotationToolbarModule.shapeToolbarElement.contains(e.target))&&(e.cancel=!0),this.formDesignerToolbarModule&&!this.pdfViewer.toolbarSettings.showTooltip&&this.formDesignerToolbarModule.toolbarElement&&this.formDesignerToolbarModule.toolbarElement.contains(e.target)&&(e.cancel=!0)},s.prototype.createFileElement=function(e){e&&((0,a.xr)()?this.fileInputElement=this.pdfViewer.element.querySelector(".e-pv-fileupload-element"):(this.fileInputElement=(0,a.az)("input",{id:this.pdfViewer.element.id+"_fileUploadElement",styles:"position:fixed; left:-100em",attrs:{type:"file"}}),this.fileInputElement.setAttribute("accept",".pdf"),this.fileInputElement.setAttribute("aria-label","file upload element")),e&&e.appendChild(this.fileInputElement))},s.prototype.wireEvent=function(){this.fileInputElement&&this.fileInputElement.addEventListener("change",this.loadDocument),(0,a.xr)()||(!a.AR.isDevice||this.pdfViewer.enableDesktopMode)&&(this.toolbarElement.addEventListener("mouseup",this.toolbarOnMouseup.bind(this)),this.currentPageBoxElement.addEventListener("focusout",this.textBoxFocusOut),this.currentPageBoxElement.addEventListener("keypress",this.navigateToPage),this.zoomDropDown.change=this.zoomPercentSelect.bind(this),this.zoomDropDown.element.addEventListener("keypress",this.onZoomDropDownInput.bind(this)),this.zoomDropDown.element.addEventListener("click",this.onZoomDropDownInputClick.bind(this)))},s.prototype.unWireEvent=function(){this.fileInputElement&&this.fileInputElement.removeEventListener("change",this.loadDocument),(!a.AR.isDevice||this.pdfViewer.enableDesktopMode)&&!(0,a.xr)()&&(this.toolbarElement.removeEventListener("mouseup",this.toolbarOnMouseup.bind(this)),this.currentPageBoxElement.removeEventListener("focusout",this.textBoxFocusOut),this.currentPageBoxElement.removeEventListener("keypress",this.navigateToPage),this.zoomDropDown.removeEventListener("change",this.zoomPercentSelect),this.zoomDropDown.element.removeEventListener("keypress",this.onZoomDropDownInput),this.zoomDropDown.element.removeEventListener("click",this.onZoomDropDownInputClick))},s.prototype.onToolbarResize=function(e){a.AR.isDevice&&!this.pdfViewer.enableDesktopMode?this.pdfViewerBase.navigationPane.toolbarResize():this.toolbar.refreshOverflow()},s.prototype.toolbarOnMouseup=function(e){(e.target===this.itemsContainer||e.target===this.toolbarElement)&&this.pdfViewerBase.focusViewerContainer()},s.prototype.applyHideToToolbar=function(e,t,i){for(var n=!e,o=t;o<=i;o++)if(this.toolbar.items[o]){var r=this.toolbar.items[o].cssClass;if(r&&""!==r){var l=this.toolbar.element.querySelector("."+r);l&&this.toolbar.hideItem(l,n)}else this.toolbar.hideItem(o,n)}},s.prototype.handleOpenIconClick=function(e){this.fileInputElement.click(),a.AR.isDevice&&!this.pdfViewer.enableDesktopMode&&((0,a.xr)()||e.originalEvent.target.blur(),this.pdfViewerBase.focusViewerContainer())},s.prototype.handleToolbarBtnClick=function(e){switch(this.addInkAnnotation(),this.deSelectCommentAnnotation(),e.originalEvent.target.id){case this.pdfViewer.element.id+"_open":case this.pdfViewer.element.id+"_openIcon":case this.pdfViewer.element.id+"_openText":this.handleOpenIconClick(e);break;case this.pdfViewer.element.id+"_download":case this.pdfViewer.element.id+"_downloadIcon":case this.pdfViewer.element.id+"_downloadText":this.pdfViewerBase.download();break;case this.pdfViewer.element.id+"_print":case this.pdfViewer.element.id+"_printIcon":case this.pdfViewer.element.id+"_printText":this.pdfViewer.printModule&&this.pdfViewer.firePrintStart();break;case this.pdfViewer.element.id+"_undo":case this.pdfViewer.element.id+"_undoIcon":case this.pdfViewer.element.id+"_undoText":this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.undo();break;case this.pdfViewer.element.id+"_redo":case this.pdfViewer.element.id+"_redoIcon":case this.pdfViewer.element.id+"_redoText":this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.redo();break;case this.pdfViewer.element.id+"_firstPage":case this.pdfViewer.element.id+"_firstPageIcon":case this.pdfViewer.element.id+"_firstPageText":this.pdfViewer.navigationModule&&this.pdfViewer.navigationModule.goToFirstPage();break;case this.pdfViewer.element.id+"_previousPage":case this.pdfViewer.element.id+"_previousPageIcon":case this.pdfViewer.element.id+"_previousPageText":this.pdfViewer.navigationModule&&this.pdfViewer.navigationModule.goToPreviousPage();break;case this.pdfViewer.element.id+"_nextPage":case this.pdfViewer.element.id+"_nextPageIcon":case this.pdfViewer.element.id+"_nextPageText":this.pdfViewer.navigationModule&&this.pdfViewer.navigationModule.goToNextPage();break;case this.pdfViewer.element.id+"_lastPage":case this.pdfViewer.element.id+"_lastPageIcon":case this.pdfViewer.element.id+"_lastPageText":this.pdfViewer.navigationModule&&this.pdfViewer.navigationModule.goToLastPage();break;case this.pdfViewer.element.id+"_zoomIn":case this.pdfViewer.element.id+"_zoomInIcon":case this.pdfViewer.element.id+"_zoomInText":this.pdfViewer.magnificationModule.zoomIn();break;case this.pdfViewer.element.id+"_zoomOut":case this.pdfViewer.element.id+"_zoomOutIcon":case this.pdfViewer.element.id+"_zoomOutText":this.pdfViewer.magnificationModule.zoomOut();break;case this.pdfViewer.element.id+"_selectTool":case this.pdfViewer.element.id+"_selectToolIcon":case this.pdfViewer.element.id+"_selectToolText":this.isSelectionToolDisabled||(this.pdfViewerBase.initiateTextSelectMode(),this.updateInteractionTools(!0));break;case this.pdfViewer.element.id+"_handTool":case this.pdfViewer.element.id+"_handToolIcon":case this.pdfViewer.element.id+"_handToolText":this.isScrollingToolDisabled||this.getStampMode()||(this.pdfViewerBase.initiatePanning(),this.updateInteractionTools(!1));break;case this.pdfViewer.element.id+"_search":case this.pdfViewer.element.id+"_searchIcon":case this.pdfViewer.element.id+"_searchText":this.textSearchButtonHandler();break;case this.pdfViewer.element.id+"_annotation":case this.pdfViewer.element.id+"_annotationIcon":case this.pdfViewer.element.id+"_annotationText":this.initiateAnnotationMode(e.originalEvent.target.id);break;case this.pdfViewer.element.id+"_formdesigner":case this.pdfViewer.element.id+"_formdesignerIcon":case this.pdfViewer.element.id+"_formdesignerText":this.initiateFormDesignerMode(),this.formDesignerToolbarModule.showHideDeleteIcon(!1);break;case this.pdfViewer.element.id+"_comment":case this.pdfViewer.element.id+"_commentIcon":this.pdfViewerBase.isAddComment=!0,this.pdfViewerBase.isCommentIconAdded=!0,this.annotationToolbarModule.deselectAllItems(),this.pdfViewer.annotation.triggerAnnotationUnselectEvent(),this.addComments(e.originalEvent.target);break;case this.pdfViewer.element.id+"_submitForm":case this.pdfViewer.element.id+"_submitFormSpan":this.pdfViewerBase.exportFormFields()}},s.prototype.addInkAnnotation=function(){if(this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.inkAnnotationModule){var e=parseInt(this.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber);this.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(e)}this.annotationToolbarModule&&(this.pdfViewer.toolbar.annotationToolbarModule.deselectInkAnnotation(),this.annotationToolbarModule.inkAnnotationSelected=!1)},s.prototype.deSelectCommentAnnotation=function(){(0,a.xr)()?this.pdfViewer.toolbar.deSelectItem(this.CommentElement):this.pdfViewer.toolbar.deSelectItem(this.commentItem),this.pdfViewerBase.isCommentIconAdded=!1},s.prototype.addComments=function(e){(0,a.xr)()?(this.pdfViewerBase.isCommentIconAdded=!0,this.pdfViewerBase.isAddComment=!0,this.annotationToolbarModule.deselectAllItemsInBlazor(),this.CommentElement.classList.add("e-pv-select")):e.id===this.pdfViewer.element.id+"_comment"||e.id===this.pdfViewer.element.id+"_commentIcon"?e.id===this.pdfViewer.element.id+"_commentIcon"&&e.parentElement?e.parentElement.classList.add("e-pv-select"):e.classList.add("e-pv-select"):e.className=this.pdfViewer.enableRtl?"e-pv-comment-selection-icon e-pv-icon e-icon-left e-right":"e-pv-comment-selection-icon e-pv-icon e-icon-left",this.updateStampItems(),document.getElementById(this.pdfViewer.element.id+"_pageDiv_"+(this.pdfViewerBase.currentPageNumber-1)).addEventListener("mousedown",this.pdfViewer.annotationModule.stickyNotesAnnotationModule.drawIcons.bind(this))},s.prototype.openZoomDropdown=function(){var e=this;if(document.fullscreen)if((0,a.xr)()){var t=document.fullscreenElement;t&&"BODY"!==t.tagName&&"HTML"!==t.tagName&&setTimeout(function(){var o=document.getElementById(e.pdfViewer.element.id+"_zoomCombo_popup"),r=document.getElementById(e.toolbarElement.id);o&&r&&o.ej2_instances&&(r.appendChild(o),o.ej2_instances[0].refreshPosition())},100)}else{var i=document.getElementById(this.pdfViewer.element.id+"_zoomDropDown_popup"),n=document.getElementById(this.toolbarElement.id);i&&n.appendChild(i)}},s.prototype.onZoomDropDownInput=function(e){return(e.which<48||e.which>57)&&8!==e.which&&13!==e.which?(e.preventDefault(),!1):(13===e.which&&(e.preventDefault(),this.zoomDropDownChange(this.zoomDropDown.element.value)),!0)},s.prototype.onZoomDropDownInputClick=function(){this.zoomDropDown.element.select()},s.prototype.zoomPercentSelect=function(e){this.pdfViewerBase.pageCount>0&&(e.isInteracted?e.itemData&&this.zoomDropDownChange(e.itemData.percent):this.updateZoomPercentage(this.pdfViewer.magnificationModule.zoomFactor))},s.prototype.zoomDropDownChange=function(e){e!==this.pdfViewer.localeObj.getConstant("Fit Width")&&e!==this.pdfViewer.localeObj.getConstant("Fit Page")&&e!==this.pdfViewer.localeObj.getConstant("Automatic")?(this.pdfViewer.magnificationModule.isAutoZoom=!1,this.pdfViewer.magnificationModule.zoomTo(parseFloat(e)),this.updateZoomPercentage(this.pdfViewer.magnificationModule.zoomFactor),this.zoomDropDown.focusOut()):e===this.pdfViewer.localeObj.getConstant("Fit Width")?(this.pdfViewer.magnificationModule.isAutoZoom=!1,this.pdfViewer.magnificationModule.fitToWidth(),this.zoomDropDown.focusOut()):e===this.pdfViewer.localeObj.getConstant("Fit Page")?(this.pdfViewer.magnificationModule.fitToPage(),this.zoomDropDown.focusOut()):e===this.pdfViewer.localeObj.getConstant("Automatic")&&(this.pdfViewer.magnificationModule.isAutoZoom=!0,this.pdfViewer.magnificationModule.fitToAuto(),this.zoomDropDown.focusOut())},s.prototype.updateZoomPercentage=function(e){if(!a.AR.isDevice||this.pdfViewer.enableDesktopMode){var t=parseInt((100*e).toString())+"%";if((0,a.xr)()){var i=this.pdfViewerBase.getElement("_zoomDropDown");i&&i.children.length>0&&(i.children[0].children[0].value=t)}else this.zoomDropDown.text===t&&(this.zoomDropDown.element.value=t),11===this.zoomDropDown.index&&(this.zoomDropDown.value=4),this.pdfViewerBase.isMinimumZoom=e<=.25,this.zoomDropDown.text=t}},s.prototype.updateInteractionItems=function(){this.toolbar.enableItems(this.textSelectItem.parentElement,!!this.pdfViewer.textSelectionModule&&!!this.pdfViewer.enableTextSelection),this.toolbar.enableItems(this.panItem.parentElement,!0),"TextSelection"===this.pdfViewer.interactionMode&&this.pdfViewer.enableTextSelection?(this.selectItem(this.textSelectItem),this.deSelectItem(this.panItem)):(this.selectItem(this.panItem),this.deSelectItem(this.textSelectItem),this.pdfViewerBase.initiatePanning())},s.prototype.textSearchButtonHandler=function(){if(!a.AR.isDevice||this.pdfViewer.enableDesktopMode){if(this.pdfViewer.textSearchModule&&this.pdfViewerBase.pageCount>0)if(this.isTextSearchBoxDisplayed=!this.isTextSearchBoxDisplayed,this.pdfViewer.textSearchModule.showSearchBox(this.isTextSearchBoxDisplayed),this.isTextSearchBoxDisplayed){(0,a.xr)()||this.selectItem(this.textSearchItem);var e=document.getElementById(this.pdfViewer.element.id+"_search_input");e.select(),e.focus()}else(0,a.xr)()?this.pdfViewerBase.getElement("_search").firstElementChild.blur():(this.deSelectItem(this.textSearchItem),this.textSearchItem.blur())}else this.showToolbar(!1),this.pdfViewerBase.navigationPane.createNavigationPaneMobile("search")},s.prototype.initiateAnnotationMode=function(e){!a.AR.isDevice||this.pdfViewer.enableDesktopMode?this.annotationToolbarModule&&this.pdfViewer.enableAnnotationToolbar&&(this.annotationToolbarModule.showAnnotationToolbar(this.annotationItem),this.pdfViewer.toolbarModule.annotationToolbarModule.toolbar.refreshOverflow(),this.pdfViewer.isAnnotationToolbarVisible&&this.pdfViewer.isFormDesignerToolbarVisible)&&(document.getElementById(this.pdfViewer.element.id+"_formdesigner_toolbar").style.display="none",this.formDesignerToolbarModule.isToolbarHidden=!1,this.formDesignerToolbarModule.showFormDesignerToolbar(this.formDesignerItem),this.annotationToolbarModule.adjustViewer(!0)):(0,a.xr)()||(e===this.pdfViewer.element.id+"_annotation"&&(e=this.pdfViewer.element.id+"_annotationIcon"),this.annotationToolbarModule.createAnnotationToolbarForMobile(e))},s.prototype.initiateFormDesignerMode=function(){this.formDesignerToolbarModule&&this.pdfViewer.enableFormDesignerToolbar&&(this.formDesignerToolbarModule.showFormDesignerToolbar(this.formDesignerItem),this.pdfViewer.isAnnotationToolbarVisible&&this.pdfViewer.isFormDesignerToolbarVisible)&&(document.getElementById(this.pdfViewer.element.id+"_annotation_toolbar").style.display="none",this.annotationToolbarModule.isToolbarHidden=!1,this.annotationToolbarModule.showAnnotationToolbar(this.annotationItem),this.formDesignerToolbarModule.adjustViewer(!0))},s.prototype.DisableInteractionTools=function(){this.deSelectItem(this.textSelectItem),this.deSelectItem(this.panItem)},s.prototype.selectItem=function(e){e&&e.classList.add("e-pv-select")},s.prototype.deSelectItem=function(e){e&&e.classList.remove("e-pv-select")},s.prototype.updateInteractionTools=function(e){var t=(0,a.xr)();e?t?(this.selectItem(this.SelectToolElement),this.deSelectItem(this.PanElement)):(this.selectItem(this.textSelectItem),this.deSelectItem(this.panItem)):t?(this.selectItem(this.PanElement),this.deSelectItem(this.SelectToolElement)):(this.selectItem(this.panItem),this.deSelectItem(this.textSelectItem))},s.prototype.initialEnableItems=function(){this.showToolbar(!!this.pdfViewer.enableToolbar),this.showNavigationToolbar(!!this.pdfViewer.enableNavigationToolbar),(0,a.xr)()||(this.showPrintOption(!!this.isPrintBtnVisible),this.showDownloadOption(!!this.isDownloadBtnVisible),this.showSearchOption(!!this.isSearchBtnVisible),this.showCommentOption(!!this.isCommentBtnVisible))},s.prototype.showSeparator=function(e){(!this.isOpenBtnVisible||!this.isNavigationToolVisible&&!this.isMagnificationToolVisible&&!this.isSelectionBtnVisible&&!this.isScrollingBtnVisible&&!this.isUndoRedoBtnsVisible)&&this.applyHideToToolbar(!1,1,1),(!this.isNavigationToolVisible&&!this.isMagnificationToolVisible&&!this.isOpenBtnVisible||this.isOpenBtnVisible&&!this.isNavigationToolVisible||!this.isOpenBtnVisible&&!this.isNavigationToolVisible||!this.isMagnificationToolVisible&&!this.isScrollingBtnVisible&&!this.isSelectionBtnVisible)&&this.applyHideToToolbar(!1,8,8),(!this.isMagnificationToolVisible&&!this.isSelectionBtnVisible&&!this.isScrollingBtnVisible||this.isMagnificationToolVisible&&!this.isSelectionBtnVisible&&!this.isScrollingBtnVisible||!this.isMagnificationToolVisible&&(this.isSelectionBtnVisible||this.isScrollingBtnVisible))&&this.applyHideToToolbar(!1,12,12),(!this.isMagnificationToolVisible&&!this.isNavigationToolVisible&&!this.isScrollingBtnVisible&&!this.isSelectionBtnVisible&&this.isUndoRedoBtnsVisible||!this.isUndoRedoBtnsVisible)&&this.applyHideToToolbar(!1,15,15)},s.prototype.applyToolbarSettings=function(){var e=this.pdfViewer.toolbarSettings.toolbarItems;e&&(-1!==e.indexOf("OpenOption")?this.showOpenOption(!0):this.showOpenOption(!1),-1!==e.indexOf("PageNavigationTool")?this.showPageNavigationTool(!0):this.showPageNavigationTool(!1),-1!==e.indexOf("MagnificationTool")?this.showMagnificationTool(!0):this.showMagnificationTool(!1),-1!==e.indexOf("SelectionTool")?this.showSelectionTool(!0):this.showSelectionTool(!1),-1!==e.indexOf("PanTool")?this.showScrollingTool(!0):this.showScrollingTool(!1),-1!==e.indexOf("PrintOption")?this.showPrintOption(!0):this.showPrintOption(!1),-1!==e.indexOf("DownloadOption")?this.showDownloadOption(!0):this.showDownloadOption(!1),-1!==e.indexOf("SearchOption")?this.showSearchOption(!0):this.showSearchOption(!1),-1!==e.indexOf("UndoRedoTool")?this.showUndoRedoTool(!0):this.showUndoRedoTool(!1),-1!==e.indexOf("AnnotationEditTool")?this.showAnnotationEditTool(!0):this.showAnnotationEditTool(!1),-1!==e.indexOf("FormDesignerEditTool")?this.showFormDesignerEditTool(!0):this.showFormDesignerEditTool(!1),-1!==e.indexOf("CommentTool")?this.showCommentOption(!0):this.showCommentOption(!1),-1!==e.indexOf("SubmitForm")?this.showSubmitForm(!0):this.showSubmitForm(!1),this.showSeparator(e))},s.prototype.applyToolbarSettingsForMobile=function(){var e=this.pdfViewer.toolbarSettings.toolbarItems;e&&(-1!==e.indexOf("OpenOption")?this.showOpenOption(!0):this.showOpenOption(!1),-1!==e.indexOf("UndoRedoTool")?this.showUndoRedoTool(!0):this.showUndoRedoTool(!1),-1!==e.indexOf("AnnotationEditTool")?this.showAnnotationEditTool(!0):this.showAnnotationEditTool(!1),-1!==e.indexOf("SearchOption")?this.showSearchOption(!0):this.showSearchOption(!1))},s.prototype.getStampMode=function(){return!(!this.pdfViewer.annotation||!this.pdfViewer.annotation.stampAnnotationModule)&&this.pdfViewer.annotation.stampAnnotationModule.isStampAddMode},s.prototype.stampBeforeOpen=function(e){if(this.annotationToolbarModule.resetFreeTextAnnot(),""===e.ParentItem.Text&&this.pdfViewer.customStampSettings.isAddToMenu&&e.Items.length>0){for(var t=null,i=0;i<e.Items.length;i++)if("Custom Stamp"===e.Items[i].Text){e.Items[i].Items=[],t=e.Items[i];break}var n=this.pdfViewerBase.customStampCollection,o=this.pdfViewer.customStampSettings.customStamps;if(0===n.length&&o&&o.length>0)for(var r=0;r<o.length;r++)n.push({customStampName:o[r].customStampName,customStampImageSource:o[r].customStampImageSource});for(var l=0;l<n.length;l++)null!=t&&t.Items.push({text:n[l].customStampName})}},s.prototype.stampBeforeClose=function(e,t){},s.prototype.updateStampItems=function(){this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.stampAnnotationModule&&this.pdfViewer.annotationModule.stampAnnotationModule.isNewStampAnnot&&(this.pdfViewer.selectedItems.annotations[0]&&(this.pdfViewer.remove(this.pdfViewer.selectedItems.annotations[0]),this.pdfViewer.clearSelection(this.pdfViewer.currentPageNumber-1),this.pdfViewer.renderDrawing(),this.pdfViewerBase.tool=null),this.pdfViewerBase.isAlreadyAdded=!1,this.pdfViewer.annotationModule.stampAnnotationModule.isNewStampAnnot=!1)},s.prototype.stampSelect=function(e,t){if(this.pdfViewerBase.isAlreadyAdded=!1,this.updateStampItems(),"Custom Stamp"===e.Item.Text){this.annotationToolbarModule.checkStampAnnotations(),this.pdfViewer.annotation.stampAnnotationModule.isStampAddMode=!0;var i=(0,a.az)("input",{id:this.pdfViewer.element.id+"_stampElement",attrs:{type:"file"}});i.setAttribute("accept",".jpg,.jpeg,.png"),i.style.position="absolute",i.style.left="0px",i.style.top="0px",i.style.visibility="hidden",document.body.appendChild(i),i.click(),i.addEventListener("change",this.annotationToolbarModule.addStampImage),document.body.removeChild(i)}else if("Custom Stamp"===t&&""!==e.Item.Text)for(var n=this.pdfViewerBase.customStampCollection,o=0;o<n.length;o++)n[o].customStampName===e.Item.Text&&(this.pdfViewer.annotationModule.stampAnnotationModule.customStampName=e.Item.Text,this.annotationToolbarModule.checkStampAnnotations(),this.pdfViewer.annotation.stampAnnotationModule.isStampAddMode=!0,this.pdfViewer.annotationModule.stampAnnotationModule.isStampAnnotSelected=!0,this.pdfViewerBase.stampAdded=!0,this.pdfViewerBase.isAlreadyAdded=!0,this.pdfViewer.annotationModule.stampAnnotationModule.createCustomStampAnnotation(n[o].customStampImageSource),this.pdfViewerBase.stampAdded=!1);else"Dynamic"!==e.Item.Text&&""!==e.Item.Text&&"Standard Business"!==e.Item.Text&&("Sign Here"===t||"Sign Here"!==e.Item.Text)&&(this.annotationToolbarModule.checkStampAnnotations(),this.pdfViewer.annotation.stampAnnotationModule.isStampAddMode=!0,this.pdfViewer.annotationModule.stampAnnotationModule.isStampAnnotSelected=!0,this.pdfViewerBase.stampAdded=!0,"Dynamic"===t?(this.pdfViewerBase.isDynamicStamp=!0,this.pdfViewer.annotationModule.stampAnnotationModule.retrieveDynamicStampAnnotation(e.Item.Text)):(this.pdfViewerBase.isDynamicStamp=!1,this.pdfViewer.annotationModule.stampAnnotationModule.retrievestampAnnotation(e.Item.Text)))},s.prototype.getModuleName=function(){return"Toolbar"},s}(),Ku=function(){function s(e,t,i){var n=this;this.toolbarBorderHeight=1,this.isToolbarHidden=!1,this.isMobileAnnotEnabled=!1,this.isHighlightEnabled=!1,this.isUnderlineEnabled=!1,this.isStrikethroughEnabled=!1,this.isHighlightBtnVisible=!0,this.isCommentBtnVisible=!0,this.isUnderlineBtnVisible=!0,this.isStrikethroughBtnVisible=!0,this.isColorToolVisible=!0,this.isOpacityToolVisible=!0,this.isDeleteAnnotationToolVisible=!0,this.isCurrentAnnotationOpacitySet=!1,this.isStampBtnVisible=!1,this.isShapeBtnVisible=!1,this.isSignatureBtnVisible=!1,this.isInkBtnVisible=!1,this.isFontFamilyToolVisible=!1,this.isFontSizeToolVisible=!1,this.isFontAlignToolVisible=!1,this.isFontColorToolVisible=!1,this.isFontStylesToolVisible=!1,this.isCommentPanelBtnVisible=!1,this.isFreeTextBtnVisible=!1,this.isCalibrateBtnVisible=!1,this.isStrokeColorToolVisible=!1,this.isThicknessToolVisible=!1,this.stampMenu=[],this.stampParentID="",this.inkAnnotationSelected=!1,this.openSignaturePopup=!1,this.isSavedSignatureClicked=!1,this.saveSignatureCount=0,this.saveInitialCount=0,this.isToolbarCreated=!1,this.addStampImage=function(o){var r=n;if(null!==o.target.files[0]){var d=o.target.files[0];if(n.pdfViewer.annotationModule.stampAnnotationModule.customStampName=d.name.split(".")[0],"image"===d.type.split("/")[0]){var h=new FileReader;h.onload=function(p){var f=p.currentTarget.result;r.pdfViewer.annotation.stampAnnotationModule.isStampAddMode=!0,r.pdfViewer.annotationModule.stampAnnotationModule.isStampAnnotSelected=!0,r.pdfViewerBase.stampAdded=!0,n.pdfViewer.annotationModule.stampAnnotationModule.createCustomStampAnnotation(f),r.pdfViewerBase.stampAdded=!1},h.readAsDataURL(d)}}o.target.value="",o.currentTarget.value=""},this.onShapeToolbarClicked=function(o){var r=n.pdfViewer.element.id,l=n.pdfViewer.annotation.shapeAnnotationModule;switch(a.AR.isDevice?n.pdfViewer.toolbarModule.selectItem(o.originalEvent.target.parentElement):(n.deselectAllItems(),n.resetFreeTextAnnot()),o.originalEvent.target.id){case r+"_shape_line":case r+"_shape_lineIcon":l.setAnnotationType("Line"),n.onShapeDrawSelection(!0),n.updateColorInIcon(n.colorDropDownElement,l.lineFillColor),n.updateColorInIcon(n.strokeDropDownElement,l.lineStrokeColor),n.handleShapeTool(r+"_shape_line");break;case r+"_shape_arrow":case r+"_shape_arrowIcon":l.setAnnotationType("Arrow"),n.onShapeDrawSelection(!0),n.updateColorInIcon(n.colorDropDownElement,l.arrowFillColor),n.updateColorInIcon(n.strokeDropDownElement,l.arrowStrokeColor),n.handleShapeTool(r+"_shape_arrow");break;case r+"_shape_rectangle":case r+"_shape_rectangleIcon":l.setAnnotationType("Rectangle"),n.onShapeDrawSelection(!0),n.updateColorInIcon(n.colorDropDownElement,l.rectangleFillColor),n.updateColorInIcon(n.strokeDropDownElement,l.rectangleStrokeColor),n.handleShapeTool(r+"_shape_rectangle");break;case r+"_shape_circle":case r+"_shape_circleIcon":l.setAnnotationType("Circle"),n.onShapeDrawSelection(!0),n.updateColorInIcon(n.colorDropDownElement,l.circleFillColor),n.updateColorInIcon(n.strokeDropDownElement,l.circleStrokeColor),n.handleShapeTool(r+"_shape_circle");break;case r+"_shape_pentagon":case r+"_shape_pentagonIcon":l.setAnnotationType("Polygon"),n.onShapeDrawSelection(!0),n.updateColorInIcon(n.colorDropDownElement,l.polygonFillColor),n.updateColorInIcon(n.strokeDropDownElement,l.polygonStrokeColor),n.handleShapeTool(r+"_shape_pentagon")}},this.pdfViewer=e,this.pdfViewerBase=t,this.primaryToolbar=i}return s.prototype.initializeAnnotationToolbar=function(){var e=this;this.toolbarElement=(0,a.az)("div",{id:this.pdfViewer.element.id+"_annotation_toolbar",className:"e-pv-annotation-toolbar"}),this.pdfViewerBase.viewerMainContainer.appendChild(this.toolbarElement),this.toolbar=new re.o8({width:"",height:"",overflowMode:"Popup",cssClass:"e-pv-toolbar-scroll",items:this.createToolbarItems(),clicked:this.onToolbarClicked.bind(this),created:function(){e.createDropDowns()}}),this.toolbar.isStringTemplate=!0,this.pdfViewer.enableRtl&&(this.toolbar.enableRtl=!0),this.toolbar.appendTo(this.toolbarElement),this.afterToolbarCreation(),this.createStampContainer(),this.createSignContainer(),this.applyAnnotationToolbarSettings(),this.updateToolbarItems(),this.showAnnotationToolbar(null,!0),this.toolbarElement.setAttribute("aria-label","Annotation Toolbar")},s.prototype.createMobileAnnotationToolbar=function(e,t){var i=this;a.AR.isDevice&&!this.pdfViewer.enableDesktopMode?null==this.toolbarElement&&e?(this.isMobileAnnotEnabled=!0,this.toolbarElement=(0,a.az)("div",{id:this.pdfViewer.element.id+"_annotation_toolbar",className:"e-pv-annotation-toolbar"}),this.pdfViewerBase.viewerMainContainer.insertBefore(this.toolbarElement,this.pdfViewerBase.viewerContainer),this.toolbar=new re.o8({width:"",height:"",overflowMode:"Popup",items:this.createMobileToolbarItems(t),clicked:this.onToolbarClicked.bind(this),created:function(){i.createDropDowns(t)}}),this.toolbar.isStringTemplate=!0,this.pdfViewer.enableRtl&&(this.toolbar.enableRtl=!0),this.pdfViewerBase.navigationPane.goBackToToolbar(),this.pdfViewer.toolbarModule.showToolbar(!1),this.toolbar.appendTo(this.toolbarElement),this.deleteItem=this.pdfViewerBase.getElement("_annotation_delete"),this.deleteItem.firstElementChild.id=this.pdfViewer.element.id+"_annotation_delete"):null!=this.toolbarElement&&(e?(this.isMobileAnnotEnabled=!0,this.pdfViewerBase.navigationPane.goBackToToolbar(),this.pdfViewer.toolbarModule.showToolbar(!1),this.toolbarElement.style.display="block"):e||(this.isMobileAnnotEnabled=!1,this.pdfViewer.toolbarModule.showToolbar(!0),this.hideMobileAnnotationToolbar())):this.isMobileAnnotEnabled=!0},s.prototype.hideMobileAnnotationToolbar=function(){if(null!=this.toolbarElement){if(this.pdfViewer.selectedItems.annotations.length>0||this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation)this.propertyToolbar&&this.propertyToolbar.element.children.length>0&&(this.propertyToolbar.element.style.display="block",this.toolbarCreated=!0);else if(this.toolbarCreated=this.toolbar.element.children.length>0,this.propertyToolbar&&"none"!==this.propertyToolbar.element.style.display&&(this.propertyToolbar.element.style.display="none",!this.toolbarCreated)){var e=document.getElementById(this.pdfViewer.element.id+"_annotationIcon");e&&e.parentElement.classList.contains("e-pv-select")&&this.createAnnotationToolbarForMobile()}this.toolbarElement.children.length>0&&(this.toolbarElement.style.display="block"),this.adjustMobileViewer()}else this.toolbarCreated&&this.propertyToolbar&&this.propertyToolbar.element.children.length>0&&(this.propertyToolbar.element.style.display="none",this.adjustMobileViewer(),this.toolbarCreated=!1)},s.prototype.FreeTextForMobile=function(){var e=this;this.hideExistingTool(),this.freetextToolbarElement=(0,a.az)("div",{id:this.pdfViewer.element.id+"_freeTextToolbar",className:"e-pv-mobile-annotation-toolbar",styles:"bottom: 0px; position: absolute; width: 100%; float: left"}),this.pdfViewerBase.viewerMainContainer.appendChild(this.freetextToolbarElement);var f,t=this.pdfViewer.toolbarModule.annotationToolbarModule.getTemplate("span","_annotation_color","e-pv-annotation-color-container"),i=this.pdfViewer.toolbarModule.annotationToolbarModule.getTemplate("span","_annotation_stroke","e-pv-annotation-stroke-container"),n=this.getTemplate("span","_annotation_thickness","e-pv-annotation-thickness-container"),o=this.getTemplate("span","_annotation_opacity","e-pv-annotation-opacity-container"),r=this.getTemplate("input","_annotation_fontname","e-pv-annotation-fontname-container"),l=this.getTemplate("input","_annotation_fontsize","e-pv-annotation-fontsize-container"),d=this.getTemplate("span","_annotation_textcolor","e-pv-annotation-textcolor-container"),h=this.getTemplate("span","_annotation_textalign","e-pv-annotation-textalign-container"),p=this.getTemplate("span","_annotation_textproperties","e-pv-annotation-textprop-container");f=[{prefixIcon:"e-pv-backward-icon e-pv-icon",tooltipText:this.pdfViewer.localeObj.getConstant("Go Back"),id:this.pdfViewer.element.id+"_backward",click:this.goBackToToolbar.bind(this)},{type:"Separator",align:"Left",cssClass:"e-pv-hightlight-separator-container"},{template:r},{template:l},{template:d},{template:h},{template:p},{template:t},{template:i},{template:n},{template:o}],this.toolbar=new re.o8({items:f,width:"",height:"",overflowMode:"Scrollable",created:function(){e.pdfViewer.toolbarModule.annotationToolbarModule.mobileColorpicker(e.pdfViewer.element.id+"_annotation_freeTextEdit")}}),this.toolbar.appendTo(this.freetextToolbarElement),this.showFreeTextPropertiesTool()},s.prototype.createPropertyTools=function(e){var t=this;if(""!==e){this.propertyToolbar&&this.propertyToolbar.destroy(),this.toolbar&&this.toolbar.destroy();var i=void 0;(i=document.getElementById(this.pdfViewer.element.id+"_propertyToolbar"))&&i.parentElement.removeChild(i),i=(0,a.az)("div",{id:this.pdfViewer.element.id+"_propertyToolbar",className:"e-pv-mobile-annotation-toolbar",styles:"bottom: 0px; position: absolute; width: 100%; float: left"}),this.pdfViewerBase.viewerMainContainer.appendChild(i);var n,o=new re.o8({items:this.createPropertyToolbarForMobile(e),width:"",height:"",overflowMode:"Scrollable",created:function(){t.pdfViewer.toolbarModule.annotationToolbarModule.mobileColorpicker(n=t.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation?t.pdfViewer.element.id+"_underlineIcon":"FreeText"===t.pdfViewer.selectedItems.annotations[0].shapeAnnotationType?t.pdfViewer.element.id+"_annotation_freeTextEdit":"Stamp"===t.pdfViewer.selectedItems.annotations[0].shapeAnnotationType||"StickyNotes"===t.pdfViewer.selectedItems.annotations[0].shapeAnnotationType||"Image"===t.pdfViewer.selectedItems.annotations[0].shapeAnnotationType?t.pdfViewer.element.id+"_annotation_stamp":"HandWrittenSignature"===t.pdfViewer.selectedItems.annotations[0].shapeAnnotationType||"SignatureText"===t.pdfViewer.selectedItems.annotations[0].shapeAnnotationType?t.pdfViewer.element.id+"_annotation_handwrittenSign":"SignatureImage"===t.pdfViewer.selectedItems.annotations[0].shapeAnnotationType?t.pdfViewer.element.id+"_annotation_handwrittenImage":"Ink"===t.pdfViewer.selectedItems.annotations[0].shapeAnnotationType||"Path"===t.pdfViewer.selectedItems.annotations[0].shapeAnnotationType?t.pdfViewer.element.id+"_annotation_inkIcon":"Highlight"===e||"Underline"===e||"Strikethrough"===e?t.pdfViewer.element.id+"_highlightIcon":t.pdfViewer.element.id+"_annotation_shapesIcon")}});if(o.isStringTemplate=!0,o.appendTo(i),!this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation&&("Line"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&this.toolbar.enableItems(this.colorDropDownElement.parentElement,!1),"HandWrittenSignature"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType)){var r=document.getElementById(this.pdfViewer.element.id+"_annotation_commentPanel");this.toolbar.enableItems(r.parentElement,!1)}this.showPropertyTool(o,n)}},s.prototype.showPropertyTool=function(e,t){if(this.toolbar&&this.toolbar.destroy(),this.propertyToolbar=e,this.applyProperiesToolSettings(t),this.pdfViewer.selectedItems.annotations[0]){var i=this.pdfViewer.selectedItems.annotations[0];"SignatureText"!==i.shapeAnnotationType&&"HandWrittenSignature"!==i.shapeAnnotationType&&"Stamp"!==i.shapeAnnotationType&&"Image"!==i.shapeAnnotationType&&"Ink"!==i.shapeAnnotationType&&"Path"!==i.shapeAnnotationType&&"StickyNotes"!==i.shapeAnnotationType?(this.updateColorInIcon(this.colorDropDownElement,this.pdfViewer.selectedItems.annotations[0].fillColor),this.updateColorInIcon(this.strokeDropDownElement,this.pdfViewer.selectedItems.annotations[0].strokeColor),"FreeText"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&(this.fontFamilyElement.ej2_instances[0].value=this.pdfViewer.selectedItems.annotations[0].fontFamily,this.fontColorElement.children[0].style.borderBottomColor=this.pdfViewer.selectedItems.annotations[0].fontColor,this.pdfViewer.annotation.modifyTextAlignment(this.pdfViewer.selectedItems.annotations[0].textAlign),this.updateTextAlignInIcon(this.pdfViewer.selectedItems.annotations[0].textAlign))):this.strokeDropDownElement&&this.updateColorInIcon(this.strokeDropDownElement,this.pdfViewer.selectedItems.annotations[0].strokeColor)}this.toolbarCreated=!0,this.adjustMobileViewer()},s.prototype.stampToolMobileForMobile=function(e){var t=this;this.hideExistingTool(),this.stampToolbarElement&&this.stampToolbarElement.parentElement.removeChild(this.stampToolbarElement),this.stampToolbarElement=(0,a.az)("div",{id:this.pdfViewer.element.id+"_stampToolbar",className:"e-pv-mobile-annotation-toolbar",styles:"bottom: 0px; position: absolute; width: 100%; float: left"}),this.pdfViewerBase.viewerMainContainer.appendChild(this.stampToolbarElement),this.toolbar=new re.o8({items:this.createStampToolbarItemsForMobile(),width:"",height:"",overflowMode:"Scrollable",clicked:this.onShapeToolbarClicked.bind(this),created:function(){t.pdfViewer.toolbarModule.annotationToolbarModule.mobileColorpicker(e)}}),this.toolbar.isStringTemplate=!0,this.toolbar.appendTo(this.stampToolbarElement),this.showStampPropertiesTool()},s.prototype.shapeToolMobile=function(e){var t=this;this.hideExistingTool(),this.shapeToolbarElement&&this.shapeToolbarElement.parentElement.removeChild(this.shapeToolbarElement),this.shapeToolbarElement=(0,a.az)("div",{id:this.pdfViewer.element.id+"_shapeToolbar",className:"e-pv-mobile-annotation-toolbar",styles:"bottom: 0px; position: absolute; width: 100%; float: left"}),this.pdfViewerBase.viewerMainContainer.appendChild(this.shapeToolbarElement),this.toolbar=new re.o8({items:this.createShapeToolbarItemsForMobile(),width:"",height:"",overflowMode:"Scrollable",clicked:this.onShapeToolbarClicked.bind(this),created:function(){t.pdfViewer.toolbarModule.annotationToolbarModule.mobileColorpicker(e.originalEvent.target.id)}}),this.toolbar.isStringTemplate=!0,this.toolbar.appendTo(this.shapeToolbarElement),this.afterShapeToolbarCreationForMobile(),this.showShapeTool()},s.prototype.calibrateToolMobile=function(e){var t=this;this.hideExistingTool(),this.calibrateToolbarElement&&this.calibrateToolbarElement.parentElement.removeChild(this.calibrateToolbarElement),this.calibrateToolbarElement=(0,a.az)("div",{id:this.pdfViewer.element.id+"_calibrateToolbar",className:"e-pv-mobile-annotation-toolbar",styles:"bottom: 0px; position: absolute; width: 100%; float: left"}),this.pdfViewerBase.viewerMainContainer.appendChild(this.calibrateToolbarElement),this.toolbar=new re.o8({items:this.createCalibrateToolbarItemsForMobile(),width:"",height:"",overflowMode:"Scrollable",clicked:this.onCalibrateToolbarClicked.bind(this),created:function(){t.pdfViewer.toolbarModule.annotationToolbarModule.mobileColorpicker(e.originalEvent.target.id)}}),this.toolbar.isStringTemplate=!0,this.toolbar.appendTo(this.calibrateToolbarElement),this.afterCalibrateToolbarCreationForMobile(),this.showShapeTool()},s.prototype.textMarkupForMobile=function(e){var t=this;this.hideExistingTool(),this.textMarkupToolbarElement&&this.textMarkupToolbarElement.parentElement.removeChild(this.textMarkupToolbarElement),this.textMarkupToolbarElement=(0,a.az)("div",{id:this.pdfViewer.element.id+"_mobileAnnotationToolbar",className:"e-pv-mobile-annotation-toolbar",styles:"bottom: 0px; position: absolute; width: 100%; float: left"}),this.pdfViewerBase.viewerMainContainer.appendChild(this.textMarkupToolbarElement);var o,i=this.pdfViewer.toolbarModule.annotationToolbarModule.getTemplate("span","_annotation_color","e-pv-annotation-color-container"),n=this.getTemplate("span","_annotation_opacity","e-pv-annotation-opacity-container");o=[{prefixIcon:"e-pv-backward-icon e-pv-icon",tooltipText:this.pdfViewer.localeObj.getConstant("Go Back"),id:this.pdfViewer.element.id+"_backward",click:this.goBackToToolbar.bind(this)},{type:"Separator",align:"Left",cssClass:"e-pv-hightlight-separator-container"},{template:i,align:"left"},{template:n,align:"left"}],this.propertyToolbar=new re.o8({items:o,width:"",height:"",overflowMode:"Scrollable",created:function(){t.pdfViewer.toolbarModule.annotationToolbarModule.mobileColorpicker(e.originalEvent.target.id)}}),this.propertyToolbar.isStringTemplate=!0,this.propertyToolbar.appendTo(this.textMarkupToolbarElement),this.showTextMarkupPropertiesTool()},s.prototype.showShapeTool=function(){var e=this.pdfViewer.toolbarSettings.annotationToolbarItems;e&&(-1!==e.indexOf("ColorEditTool")?this.showColorEditTool(!0,7,7):this.showColorEditTool(!1,7,7),-1!==e.indexOf("StrokeColorEditTool")?this.showStrokeColorEditTool(!0,8,8):this.showStrokeColorEditTool(!1,8,8),-1!==e.indexOf("ThicknessEditTool")?this.showThicknessEditTool(!0,9,9):this.showThicknessEditTool(!1,9,9),-1!==e.indexOf("OpacityEditTool")?this.showOpacityEditTool(!0,10,10):this.showOpacityEditTool(!1,10,10))},s.prototype.signatureInkForMobile=function(){var e=this;this.hideExistingTool(),this.signatureInkToolbarElement&&this.signatureInkToolbarElement.parentElement.removeChild(this.signatureInkToolbarElement),this.signatureInkToolbarElement=(0,a.az)("div",{id:this.pdfViewer.element.id+"_mobileAnnotationToolbar",className:"e-pv-mobile-annotation-toolbar",styles:"bottom: 0px; position: absolute; width: 100%; float: left"}),this.pdfViewerBase.viewerMainContainer.appendChild(this.signatureInkToolbarElement);var o,t=this.getTemplate("span","_annotation_opacity","e-pv-annotation-opacity-container"),i=this.pdfViewer.toolbarModule.annotationToolbarModule.getTemplate("span","_annotation_stroke","e-pv-annotation-stroke-container"),n=this.getTemplate("span","_annotation_thickness","e-pv-annotation-thickness-container");o=[{prefixIcon:"e-pv-backward-icon e-pv-icon",tooltipText:this.pdfViewer.localeObj.getConstant("Go Back"),id:this.pdfViewer.element.id+"_backward",click:this.goBackToToolbar.bind(this)},{template:t,align:"left"},{template:i,aign:"left"},{template:n,align:"left"}],this.toolbar=new re.o8({items:o,width:"",height:"",overflowMode:"Scrollable",created:function(){e.pdfViewer.toolbarModule.annotationToolbarModule.mobileColorpicker(e.pdfViewer.element.id+"_annotation_inkIcon")}}),this.toolbar.isStringTemplate=!0,this.toolbar.appendTo(this.signatureInkToolbarElement)},s.prototype.hideExistingTool=function(){this.toolbar&&!this.pdfViewer.enableDesktopMode&&this.toolbar.destroy(),this.propertyToolbar&&!this.pdfViewer.enableDesktopMode&&this.propertyToolbar.destroy();var e=document.getElementById(this.pdfViewer.element.id+"_mobileAnnotationToolbar");e&&(e.style.display="none")},s.prototype.applyProperiesToolSettings=function(e){switch(e){case this.pdfViewer.element.id+"_highlightIcon":this.showTextMarkupPropertiesTool();break;case this.pdfViewer.element.id+"_annotation_freeTextEdit":this.showFreeTextPropertiesTool();break;case this.pdfViewer.element.id+"_annotation_shapesIcon":this.shapePropertiesTool();break;case"stampTool":case this.pdfViewer.element.id+"_annotation_stamp":this.showStampPropertiesTool();break;case this.pdfViewer.element.id+"_annotation_handwrittenSign":case this.pdfViewer.element.id+"_annotation_inkIcon":this.showInkPropertiesTool()}},s.prototype.showFreeTextPropertiesTool=function(){var e=this.pdfViewer.toolbarSettings.annotationToolbarItems;e&&(-1!==e.indexOf("FontFamilyAnnotationTool")?this.showFontFamilyAnnotationTool(!0,2,2):this.showFontFamilyAnnotationTool(!1,2,2),-1!==e.indexOf("FontSizeAnnotationTool")?this.showFontSizeAnnotationTool(!0,3,3):this.showFontSizeAnnotationTool(!1,3,3),-1!==e.indexOf("FontColorAnnotationTool")?this.showFontColorAnnotationTool(!0,4,4):this.showFontColorAnnotationTool(!1,4,4),-1!==e.indexOf("FontAlignAnnotationTool")?this.showFontAlignAnnotationTool(!0,5,5):this.showFontAlignAnnotationTool(!1,5,5),-1!==e.indexOf("FontStylesAnnotationTool")?this.showFontStylesAnnotationTool(!0,6,6):this.showFontStylesAnnotationTool(!1,6,6),-1!==e.indexOf("ColorEditTool")?this.showColorEditTool(!0,7,7):this.showColorEditTool(!1,7,7),-1!==e.indexOf("StrokeColorEditTool")?this.showStrokeColorEditTool(!0,8,8):this.showStrokeColorEditTool(!1,8,8),-1!==e.indexOf("ThicknessEditTool")?this.showThicknessEditTool(!0,9,9):this.showThicknessEditTool(!1,9,9),-1!==e.indexOf("OpacityEditTool")?this.showOpacityEditTool(!0,10,10):this.showOpacityEditTool(!1,10,10),-1!==e.indexOf("CommentPanelTool")?this.showCommentPanelTool(!0,11,11):this.showCommentPanelTool(!1,11,11),-1!==e.indexOf("AnnotationDeleteTool")?this.showAnnotationDeleteTool(!0,12,12):this.showAnnotationDeleteTool(!1,12,12))},s.prototype.shapePropertiesTool=function(){var e=this.pdfViewer.toolbarSettings.annotationToolbarItems;e&&(-1!==e.indexOf("ColorEditTool")?this.showColorEditTool(!0,2,2):this.showColorEditTool(!1,2,2),-1!==e.indexOf("StrokeColorEditTool")?this.showStrokeColorEditTool(!0,3,3):this.showStrokeColorEditTool(!1,3,3),-1!==e.indexOf("ThicknessEditTool")?this.showThicknessEditTool(!0,4,4):this.showThicknessEditTool(!1,4,4),-1!==e.indexOf("OpacityEditTool")?this.showOpacityEditTool(!0,5,5):this.showOpacityEditTool(!1,5,5),-1!==e.indexOf("CommentPanelTool")?this.showCommentPanelTool(!0,6,6):this.showCommentPanelTool(!1,6,6),-1!==e.indexOf("AnnotationDeleteTool")?this.showAnnotationDeleteTool(!0,7,7):this.showAnnotationDeleteTool(!1,7,7))},s.prototype.showStampPropertiesTool=function(){var e=this.pdfViewer.toolbarSettings.annotationToolbarItems;e&&(-1!==e.indexOf("OpacityEditTool")?this.showOpacityEditTool(!0,2,2):this.showOpacityEditTool(!1,2,2),-1!==e.indexOf("CommentPanelTool")?this.showCommentPanelTool(!0,3,3):this.showCommentPanelTool(!1,3,3),-1!==e.indexOf("AnnotationDeleteTool")?this.showAnnotationDeleteTool(!0,4,4):this.showAnnotationDeleteTool(!1,4,4))},s.prototype.showTextMarkupPropertiesTool=function(){var e=this.pdfViewer.toolbarSettings.annotationToolbarItems;e&&(-1!==e.indexOf("ColorEditTool")?this.showColorEditTool(!0,2,2):this.showColorEditTool(!1,2,2),-1!==e.indexOf("OpacityEditTool")?this.showOpacityEditTool(!0,3,3):this.showOpacityEditTool(!1,3,3),-1!==e.indexOf("CommentPanelTool")?this.showCommentPanelTool(!0,4,4):this.showCommentPanelTool(!1,4,4),-1!==e.indexOf("AnnotationDeleteTool")?this.showAnnotationDeleteTool(!0,5,5):this.showAnnotationDeleteTool(!1,5,5))},s.prototype.showInkPropertiesTool=function(){var e=this.pdfViewer.toolbarSettings.annotationToolbarItems;e&&(-1!==e.indexOf("StrokeColorEditTool")?this.showStrokeColorEditTool(!0,2,2):this.showStrokeColorEditTool(!1,2,2),-1!==e.indexOf("ThicknessEditTool")?this.showThicknessEditTool(!0,3,3):this.showThicknessEditTool(!1,3,3),-1!==e.indexOf("OpacityEditTool")?this.showOpacityEditTool(!0,4,4):this.showOpacityEditTool(!1,4,4),-1!==e.indexOf("CommentPanelTool")?this.showCommentPanelTool(!0,5,5):this.showCommentPanelTool(!1,5,5),-1!==e.indexOf("AnnotationDeleteTool")?this.showAnnotationDeleteTool(!0,6,6):this.showAnnotationDeleteTool(!1,6,6))},s.prototype.createAnnotationToolbarForMobile=function(e){var t;if(e){var i=document.getElementById(e);i.parentElement.classList.contains("e-pv-select")?(t=!0,i.parentElement.classList.remove("e-pv-select")):(t=!1,this.pdfViewer.toolbarModule.selectItem(i.parentElement))}if(t){this.toolbarCreated=!1,this.adjustMobileViewer(),this.toolbar&&this.toolbar.destroy(),this.propertyToolbar&&this.propertyToolbar.destroy();var n=document.getElementById(this.pdfViewer.element.id+"_mobileAnnotationToolbar");return n&&(n.style.display="none"),[]}this.isToolbarCreated=!0,this.propertyToolbar&&this.propertyToolbar.destroy(),this.toolbarElement&&this.toolbarElement.parentElement.removeChild(this.toolbarElement),this.toolbarElement=(0,a.az)("div",{id:this.pdfViewer.element.id+"_mobileAnnotationToolbar",className:"e-pv-mobile-annotation-toolbar",styles:"bottom: 0px; position: absolute; width: 100%; float: left;"}),this.pdfViewerBase.viewerMainContainer.appendChild(this.toolbarElement);var l,o=this.getTemplate("span","_annotation_stamp","e-pv-annotation-stamp-container"),r=this.getTemplate("span","_annotation_signature","e-pv-annotation-handwritten-container");return l=[{prefixIcon:"e-pv-comment-icon e-pv-icon",className:"e-pv-comment-container",id:this.pdfViewer.element.id+"_comment"},{type:"Separator",align:"Left"},{prefixIcon:"e-pv-highlight-icon e-pv-icon",className:"e-pv-highlight-container",id:this.pdfViewer.element.id+"_highlight"},{prefixIcon:"e-pv-underline-icon e-pv-icon",className:"e-pv-underline-container",id:this.pdfViewer.element.id+"_underline"},{prefixIcon:"e-pv-strikethrough-icon e-pv-icon",className:"e-pv-strikethrough-container",id:this.pdfViewer.element.id+"_strikethrough"},{type:"Separator",align:"Left"},{prefixIcon:"e-pv-annotation-shape-icon e-pv-icon",className:"e-pv-annotation-shapes-container",id:this.pdfViewer.element.id+"_annotation_shapes"},{type:"Separator",align:"Left"},{prefixIcon:"e-pv-annotation-calibrate-icon e-pv-icon",className:"e-pv-annotation-calibrate-container",id:this.pdfViewer.element.id+"_annotation_calibrate"},{type:"Separator",align:"Left"},{prefixIcon:"e-pv-freetext-icon e-pv-icon",className:"e-pv-annotation-freetextedit-container",id:this.pdfViewer.element.id+"_annotation_freeTextEdit"},{type:"Separator",align:"Left"},{template:o},{type:"Separator",align:"Left"},{template:r,align:"Left"},{type:"Separator",align:"Left"},{prefixIcon:"e-pv-inkannotation-icon e-pv-icon",className:"e-pv-annotation-ink-container",id:this.pdfViewer.element.id+"_annotation_ink",align:"Left"},{type:"Separator",align:"Left"},{prefixIcon:"e-pv-comment-panel-icon e-pv-icon",className:"e-pv-comment-panel-icon-container",id:this.pdfViewer.element.id+"_annotation_commentPanel",align:"Right"}],this.toolbarCreated&&this.toolbar?(this.toolbar.destroy(),this.toolbarCreated=!1,this.adjustMobileViewer()):(this.toolbar=new re.o8({items:l,width:"",height:"",overflowMode:"Scrollable",clicked:this.onToolbarClicked.bind(this)}),this.pdfViewer.enableRtl&&(this.toolbar.enableRtl=!0),this.toolbar.isStringTemplate=!0,this.toolbar.appendTo(this.toolbarElement),this.afterMobileToolbarCreation(),this.createStampContainer(),this.createSignContainer(),this.applyMobileAnnotationToolbarSettings(),this.toolbarCreated=!0,this.adjustMobileViewer()),l},s.prototype.adjustMobileViewer=function(){var e;this.toolbarElement&&(e=this.toolbarElement.clientHeight);var t=!1;this.toolbarElement&&0===this.toolbarElement.children.length&&this.propertyToolbar&&this.propertyToolbar.element.children.length>0?(e=this.propertyToolbar.element.clientHeight,"none"===this.pdfViewer.toolbarModule.toolbarElement.style.display&&(this.pdfViewer.toolbarModule.toolbarElement.style.display="block")):this.freetextToolbarElement&&this.freetextToolbarElement.children.length>0?e=this.freetextToolbarElement.clientHeight:0===e&&this.pdfViewer.toolbarModule.toolbar?(e=this.pdfViewer.toolbarModule.toolbarElement.clientHeight,t=!0):!e&&this.propertyToolbar&&this.propertyToolbar.element.children.length>0&&(e=this.propertyToolbar.element.clientHeight),this.pdfViewer.enableToolbar&&this.toolbarCreated?this.pdfViewerBase.viewerContainer.style.height=this.updateViewerHeight(this.getElementHeight(this.pdfViewerBase.viewerContainer),e+e)+"px":t||(this.pdfViewerBase.viewerContainer.style.height=this.pdfViewerBase.viewerContainer.style.height.split("%").length>1?this.resetViewerHeight(this.getElementHeight(this.pdfViewerBase.viewerContainer),-e)+"px":this.resetViewerHeight(this.getElementHeight(this.pdfViewerBase.viewerContainer),e)+"px")},s.prototype.showToolbar=function(e){var t=this.toolbarElement;e?(t.style.display="block",a.AR.isDevice&&this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.annotationToolbarModule&&this.pdfViewer.toolbarModule.annotationToolbarModule.hideMobileAnnotationToolbar()):t.style.display="none"},s.prototype.createMobileToolbarItems=function(e){var t=this.getTemplate("span","_annotation_color","e-pv-annotation-color-container"),i=this.getTemplate("span","_annotation_opacity","e-pv-annotation-opacity-container"),n=[];return n.push({prefixIcon:"e-pv-backward-icon e-pv-icon",tooltipText:this.pdfViewer.localeObj.getConstant("Go Back"),id:this.pdfViewer.element.id+"_backward",click:this.goBackToToolbar.bind(this)}),e||(n.push({template:t,align:"right"}),n.push({template:i,align:"right"}),n.push({type:"Separator",align:"right"})),n.push({prefixIcon:"e-pv-annotation-delete-icon e-pv-icon",className:"e-pv-annotation-delete-container",id:this.pdfViewer.element.id+"_annotation_delete",align:"right"}),n},s.prototype.goBackToToolbar=function(){this.isMobileAnnotEnabled=!1,this.toolbarElement.children.length>0?this.toolbarElement.style.display="block":(this.toolbarCreated=!1,this.toolbar.destroy(),this.createAnnotationToolbarForMobile());var e=this.pdfViewerBase.getSelectTextMarkupCurrentPage();e&&(this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage=null,this.pdfViewer.annotationModule.textMarkupAnnotationModule.clearAnnotationSelection(e))},s.prototype.createToolbarItems=function(){var e=this.getTemplate("button","_annotation_color","e-pv-annotation-color-container"),t=this.getTemplate("button","_annotation_stroke","e-pv-annotation-stroke-container"),i=this.getTemplate("button","_annotation_thickness","e-pv-annotation-thickness-container"),n=this.getTemplate("button","_annotation_opacity","e-pv-annotation-opacity-container"),o=this.getTemplate("button","_annotation_shapes","e-pv-annotation-shapes-container"),r=this.getTemplate("button","_annotation_calibrate","e-pv-annotation-calibrate-container"),l=this.getTemplate("span","_annotation_stamp","e-pv-annotation-stamp-container"),d=this.getTemplate("input","_annotation_fontname","e-pv-annotation-fontname-container"),h=this.getTemplate("input","_annotation_fontsize","e-pv-annotation-fontsize-container"),p=this.getTemplate("button","_annotation_textcolor","e-pv-annotation-textcolor-container"),f=this.getTemplate("button","_annotation_textalign","e-pv-annotation-textalign-container"),c=this.getTemplate("button","_annotation_textproperties","e-pv-annotation-textprop-container"),u=this.getTemplate("button","_annotation_signature","e-pv-annotation-handwritten-container"),m=[];return m.push({prefixIcon:"e-pv-highlight-icon e-pv-icon",className:"e-pv-highlight-container",id:this.pdfViewer.element.id+"_highlight",align:"Left"}),m.push({prefixIcon:"e-pv-underline-icon e-pv-icon",className:"e-pv-underline-container",id:this.pdfViewer.element.id+"_underline",align:"Left"}),m.push({prefixIcon:"e-pv-strikethrough-icon e-pv-icon",className:"e-pv-strikethrough-container",id:this.pdfViewer.element.id+"_strikethrough",align:"Left"}),m.push({type:"Separator",align:"Left",cssClass:"e-pv-hightlight-separator-container"}),m.push({template:o,align:"Left",cssClass:"e-pv-shape-template-container"}),m.push({type:"Separator",align:"Left",cssClass:"e-pv-shape-separator-container"}),m.push({template:r,align:"Left",cssClass:"e-pv-calibrate-template-container"}),m.push({type:"Separator",align:"Left",cssClass:"e-pv-calibrate-separator-container"}),m.push({prefixIcon:"e-pv-freetext-icon e-pv-icon",className:"e-pv-annotation-freetextedit-container",id:this.pdfViewer.element.id+"_annotation_freeTextEdit",align:"Left"}),m.push({type:"Separator",align:"Left",cssClass:"e-pv-freetext-separator-container"}),m.push({template:l,align:"Left",cssClass:"e-pv-stamp-template-container"}),m.push({type:"Separator",align:"Left",cssClass:"e-pv-stamp-separator-container"}),m.push({template:u,align:"Left",cssClass:"e-pv-sign-template-container"}),m.push({type:"Separator",align:"Left",cssClass:"e-pv-sign-separator-container"}),m.push({prefixIcon:"e-pv-inkannotation-icon e-pv-icon",className:"e-pv-annotation-ink-container",id:this.pdfViewer.element.id+"_annotation_ink",align:"Left"}),m.push({type:"Separator",align:"Left",cssClass:"e-pv-ink-separator-container"}),m.push({template:d,align:"Left",cssClass:"e-pv-fontfamily-container"}),m.push({template:h,align:"Left",cssClass:"e-pv-fontsize-container"}),m.push({template:p,align:"Left",cssClass:"e-pv-text-color-container"}),m.push({template:f,align:"Left",cssClass:"e-pv-alignment-container"}),m.push({template:c,align:"Left",cssClass:"e-pv-text-properties-container"}),m.push({type:"Separator",align:"Left",cssClass:"e-pv-text-separator-container"}),m.push({template:e,align:"Left",cssClass:"e-pv-color-template-container"}),m.push({template:t,align:"Left",cssClass:"e-pv-stroke-template-container"}),m.push({template:i,align:"Left",cssClass:"e-pv-thickness-template-container"}),m.push({template:n,align:"Left",cssClass:"e-pv-opacity-template-container"}),m.push({type:"Separator",align:"Left",cssClass:"e-pv-opacity-separator-container"}),m.push({prefixIcon:"e-pv-annotation-delete-icon e-pv-icon",className:"e-pv-annotation-delete-container",id:this.pdfViewer.element.id+"_annotation_delete",align:"Left"}),m.push({prefixIcon:"e-pv-comment-panel-icon e-pv-icon",className:"e-pv-comment-panel-icon-container",id:this.pdfViewer.element.id+"_annotation_commentPanel",align:"Right"}),m.push({prefixIcon:"e-pv-annotation-tools-close-icon e-pv-icon",className:"e-pv-annotation-tools-close-container",id:this.pdfViewer.element.id+"_annotation_close",align:"Right"}),m},s.prototype.createSignContainer=function(){var e=this;this.handWrittenSignatureItem=this.pdfViewerBase.getElement("_annotation_signature"),this.primaryToolbar.createTooltip(this.pdfViewerBase.getElement("_annotation_signature"),this.pdfViewer.localeObj.getConstant("SignatureFieldDialogHeaderText"));var t=this,o=new Le.uw({items:0===this.pdfViewer.handWrittenSignatureSettings.signatureItem.length||2==this.pdfViewer.handWrittenSignatureSettings.signatureItem.length?[{text:"ADD SIGNATURE"},{separator:!0},{text:"ADD INITIAL"}]:"Signature"===this.pdfViewer.handWrittenSignatureSettings.signatureItem[0]?[{text:"ADD SIGNATURE"}]:[{text:"ADD INITIAL"}],iconCss:"e-pv-handwritten-icon e-pv-icon",cssClass:"e-pv-handwritten-popup",open:function(r){t.openSignature()},beforeItemRender:function(r){if(e.pdfViewer.clearSelection(e.pdfViewerBase.currentPageNumber-1),r.element&&-1!==r.element.className.indexOf("e-separator")&&(r.element.style.margin="8px 0"),"ADD SIGNATURE"===r.item.text){r.element.innerHTML="",e.saveSignatureCount=0;for(var l=e.pdfViewerBase.signatureModule.signaturecollection.length;l>0;l--)if(e.saveSignatureCount<e.pdfViewerBase.signatureModule.getSaveLimit(e.pdfViewer.handWrittenSignatureSettings.saveSignatureLimit)){r.element.style.display="block";var h=(d=e.pdfViewerBase.signatureModule.signaturecollection[l-1]).image[0].imageData,p=d.image[0].id.split("_")[1];if(!d.isInitial&&""!==h){(f=(0,a.az)("div")).id="s"+p,f.style.display="block",f.style.paddingBottom="10px",(c=(0,a.az)("span")).id="sign_border_"+p,c.classList.add("e-pv-align-border");var u=void 0;"SignatureText"===d.image[0].signatureType?((u=(0,a.az)("div")).classList.add("e-pv-align-border-div"),u.innerText=h,u.style.fontFamily=d.image[0].fontFamily,u.style.fontSize="15px",u.style.display="inline-flex",u.style.alignItems="center",u.style.position="relative",u.id="sign_"+p,u.style.width="80px",u.style.height="53px",u.style.overflow="hidden",u.style.textOverflow="ellipsis",u.style.paddingLeft="11px"):((u=(0,a.az)("img")).id="sign_"+p,u.src=h,u.width=80,u.height=32,u.classList.add("e-pv-signatureimage"),u.style.paddingLeft="20px",u.style.paddingRight="18px",u.style.paddingTop="12px",u.style.paddingBottom="12px",u.style.boxSizing="content-box"),u.addEventListener("mouseover",e.hoverSignatureImage.bind(e)),u.addEventListener("mouseleave",e.leaveSignatureImage.bind(e)),(m=(0,a.az)("span")).id="delete_"+p,m.classList.add("e-pv-delete"),m.classList.add("e-pv-align"),c.append(u),c.append(m),f.append(c),r.element.appendChild(f),r.element.style.pointerEvents="auto",r.element.style.background="none",e.pdfViewerBase.getElement("_annotation_signature-popup").style.width="206px",e.saveSignatureCount++}}(g=(0,a.az)("button")).classList.add("e-control","e-btn","e-lib","e-outline","e-primary"),g.textContent=e.pdfViewer.localeObj.getConstant("HandwrittenSignatureDialogHeaderText"),g.style.width="en-US"===e.pdfViewer.locale?"130px":"auto",g.style.height="36px",g.addEventListener("click",e.clickSignature.bind(e)),r.element.appendChild(g),r.element.addEventListener("mouseover",e.hoverInitialBtn.bind(e)),r.element.style.width="206px",r.element.style.display="flex",r.element.style.flexDirection="column",r.element.style.height="auto",r.element.style.alignItems="center"}if("ADD INITIAL"===r.item.text){for(e.saveInitialCount=0,r.element.innerHTML="",l=e.pdfViewerBase.signatureModule.signaturecollection.length;l>0;l--)if(e.saveInitialCount<e.pdfViewerBase.signatureModule.getSaveLimit(e.pdfViewer.handWrittenSignatureSettings.saveInitialLimit)){var d,f,c,m;if(h=(d=e.pdfViewerBase.signatureModule.signaturecollection[l-1]).image[0].imageData,p=d.image[0].id.split("_")[1],d.isInitial&&""!==h)(f=(0,a.az)("div")).id="s"+p,f.style.display="block",f.style.paddingBottom="10px",(c=(0,a.az)("span")).id="sign_border_"+p,c.classList.add("e-pv-align-border"),u=void 0,"SignatureText"===d.image[0].signatureType?((u=(0,a.az)("div")).classList.add("e-pv-align-border-div"),u.innerText=h,u.style.fontFamily=d.image[0].fontFamily,u.style.fontSize="15px",u.style.display="inline-flex",u.style.alignItems="center",u.style.position="relative",u.id="sign_"+p,u.style.width="80px",u.style.height="53px",u.style.overflow="hidden",u.style.textOverflow="ellipsis",u.style.paddingLeft="11px"):((u=(0,a.az)("img")).id="sign_"+p,u.src=h,u.width=80,u.height=32,u.classList.add("e-pv-signatureimage"),u.style.paddingLeft="20px",u.style.paddingRight="18px",u.style.paddingTop="12px",u.style.paddingBottom="12px",u.style.boxSizing="content-box"),u.addEventListener("mouseover",e.hoverSignatureImage.bind(e)),u.addEventListener("mouseleave",e.leaveSignatureImage.bind(e)),u.width=80,u.height=32,(m=(0,a.az)("span")).id="delete_"+p,m.classList.add("e-pv-delete"),m.classList.add("e-pv-align"),c.append(u),c.append(m),f.append(c),r.element.appendChild(f),r.element.style.pointerEvents="auto",r.element.style.background="none",e.pdfViewerBase.getElement("_annotation_signature-popup").style.width="206px",e.saveInitialCount++}var g;e.isSignatureIteam=!1,(g=(0,a.az)("button")).classList.add("e-control","e-btn","e-lib","e-outline","e-primary"),g.textContent=e.pdfViewer.localeObj.getConstant("HandwrittenInitialDialogHeaderText"),g.style.width="en-US"===e.pdfViewer.locale?"130px":"auto",g.style.height="36px",g.addEventListener("click",e.clickInitial.bind(e)),r.element.appendChild(g),r.element.addEventListener("mouseover",e.hoverInitialBtn.bind(e)),r.element.style.width="206px",r.element.style.display="flex",r.element.style.flexDirection="column",r.element.style.height="auto",r.element.style.alignItems="center"}},select:function(r){e.pdfViewer.clearSelection(e.pdfViewerBase.currentPageNumber-1)}});this.pdfViewer.enableRtl&&(o.enableRtl=this.pdfViewer.enableRtl),o.appendTo(this.handWrittenSignatureItem)},s.prototype.updateSignatureCount=function(){this.openSignaturePopup=!1;for(var e=this.pdfViewerBase.signatureModule.signaturecollection,t=0;t<e.length;t++);},s.prototype.openSignature=function(){this.saveInitialCount=0,this.saveSignatureCount=0;for(var e=this.pdfViewerBase.signatureModule.signaturecollection.length;e>0;e--)if(this.saveSignatureCount<this.pdfViewerBase.signatureModule.getSaveLimit(this.pdfViewer.handWrittenSignatureSettings.saveSignatureLimit)&&""!==(t=this.pdfViewerBase.signatureModule.signaturecollection[e-1]).image[0].imageData&&!t.isInitial){this.saveSignatureCount++;var i=document.getElementById("sign_border_"+t.image[0].id.split("_")[1]);(n=document.getElementById("delete_"+t.image[0].id.split("_")[1])).style.backgroundClip="content-box",i.addEventListener("click",this.renderAddedSignature.bind(this)),n.addEventListener("click",this.deleteSavedSign.bind(this)),n.addEventListener("mouseover",this.hoverSignatureDelete.bind(this)),n.addEventListener("mouseleave",this.leaveSignatureDelete.bind(this)),i.addEventListener("mouseover",this.hoverSignatureDelete.bind(this)),i.addEventListener("mouseleave",this.leaveSignatureDelete.bind(this))}for(e=this.pdfViewerBase.signatureModule.signaturecollection.length;e>0;e--)if(this.saveInitialCount<this.pdfViewerBase.signatureModule.getSaveLimit(this.pdfViewer.handWrittenSignatureSettings.saveInitialLimit)){var t,n;if(""!==(t=this.pdfViewerBase.signatureModule.signaturecollection[e-1]).image[0].imageData&&t.isInitial)this.saveInitialCount++,i=document.getElementById("sign_border_"+t.image[0].id.split("_")[1]),(n=document.getElementById("delete_"+t.image[0].id.split("_")[1])).style.backgroundClip="content-box",i.addEventListener("click",this.renderAddedSignature.bind(this)),n.addEventListener("click",this.deleteSavedSign.bind(this)),n.addEventListener("mouseover",this.hoverSignatureDelete.bind(this)),n.addEventListener("mouseleave",this.leaveSignatureDelete.bind(this)),i.addEventListener("mouseover",this.hoverSignatureDelete.bind(this)),i.addEventListener("mouseleave",this.leaveSignatureDelete.bind(this))}},s.prototype.hoverSignatureDelete=function(){var e=event.target;(e.id==="sign_"+e.id.split("_")[1]||e.classList.contains("e-pv-delete"))&&(e.classList.add("e-pv-signaturehover"),e.style.cursor="pointer")},s.prototype.hoverInitialBtn=function(e){var t=e.target,i="";if((i=-1!==navigator.userAgent.indexOf("MSIE")||-1!==navigator.userAgent.indexOf("Trident")?t.id:(0,a.le)(e.path)?e.composedPath()[0].id:e.path[0].id)!=="sign_"+i.split("_")[1]&&i!=="delete_"+i.split("_")[1]){var n=document.getElementById(t.id);(0,a.le)(n)&&(n=document.getElementById(t.parentElement.id)),null==n||t.id==="sign_"+t.id.split("_")[1]&&t.id==="sign_border_"+t.id.split("_")[2]?null!=n.parentElement&&(t.id!=="sign_"+t.id.split("_")[1]||t.id!=="sign_border_"+t.id.split("_")[2])&&(n.parentElement.style.background="transparent",n.parentElement.style.cursor="default"):(n.style.background="transparent",n.style.cursor="default")}},s.prototype.hoverSignatureImage=function(){var e=event.target;(e.id==="sign_"+e.id.split("_")[1]||e.classList.contains("e-pv-delete"))&&(e.classList.add("e-pv-signaturehover"),e.classList.remove("e-pv-signatureimage"),e.style.cursor="pointer")},s.prototype.leaveSignatureDelete=function(){var e=event.target;(e.id==="sign_"+e.id.split("_")[1]||e.classList.contains("e-pv-delete"))&&(e.classList.remove("e-pv-signaturehover"),e.children[0]&&"IMG"===e.children[0].tagName&&e.children[0].classList.remove("e-pv-signaturehover"),e.style.cursor="default")},s.prototype.clickSignature=function(){this.pdfViewerBase.isInitialField=!1,this.addSignature()},s.prototype.clickInitial=function(){this.pdfViewerBase.isInitialField=!0,this.addSignature()},s.prototype.leaveSignatureImage=function(){var e=event.target;(e.id==="sign_"+e.id.split("_")[1]||e.classList.contains("e-pv-delete"))&&(e.classList.remove("e-pv-signaturehover"),"IMG"===e.tagName&&e.classList.add("e-pv-signatureimage"),e.children[0]&&"IMG"===e.children[0].tagName&&(e.children[0].classList.remove("e-pv-signaturehover"),e.children[0].classList.add("e-pv-signatureimage")),e.style.cursor="default")},s.prototype.addSignature=function(){this.deselectAllItems(),this.showSignaturepanel()},s.prototype.renderAddedSignature=function(){this.pdfViewerBase.isAddedSignClicked=!0,this.isSavedSignatureClicked=!0,this.pdfViewerBase.signatureModule.RenderSavedSignature()},s.prototype.deleteSavedSign=function(e){e.stopPropagation();for(var t=this.pdfViewerBase.signatureModule.signaturecollection,i=t.length;i>0;i--)if(e.target.parentElement.children[0].id==="sign_"+t[i-1].image[0].id.split("_")[1]){t[i-1].image[0].imageData="",this.pdfViewerBase.signatureModule.signaturecollection.splice(i-1,1);break}e.target.parentElement.remove()},s.prototype.getTemplate=function(e,t,i){var n=(0,a.az)(e,{id:this.pdfViewer.element.id+t});return i&&(n.className=i),n.outerHTML},s.prototype.createStampContainer=function(){var e=this;this.stampElement=this.pdfViewerBase.getElement("_annotation_stamp"),this.primaryToolbar.createTooltip(this.pdfViewerBase.getElement("_annotation_stamp"),this.pdfViewer.localeObj.getConstant("Add Stamp"));var t=(0,a.az)("ul",{id:this.pdfViewer.element.id+"contextMenuElement"});this.pdfViewerBase.getElement("_annotation_stamp").appendChild(t);var i=[];if(this.pdfViewer.stampSettings.dynamicStamps&&this.pdfViewer.stampSettings.dynamicStamps.length>0){var n=[];i.push({text:this.pdfViewer.localeObj.getConstant("Dynamic"),label:"Dynamic",items:n}),this.pdfViewer.stampSettings.dynamicStamps.forEach(function(d,h){var p=Ft[d];"NotApproved"===p&&(p="Not Approved"),n.push({text:e.pdfViewer.localeObj.getConstant(p),label:p})})}if(this.pdfViewer.stampSettings.signStamps&&this.pdfViewer.stampSettings.signStamps.length>0){var o=[];i.push({text:this.pdfViewer.localeObj.getConstant("Sign Here"),label:"Sign Here",items:o}),this.pdfViewer.stampSettings.signStamps.forEach(function(d,h){var p=st[d];switch(p){case"InitialHere":p="Initial Here";break;case"SignHere":p="Sign Here"}o.push({text:e.pdfViewer.localeObj.getConstant(p),label:p})})}if(this.pdfViewer.stampSettings.standardBusinessStamps&&this.pdfViewer.stampSettings.standardBusinessStamps.length>0){var r=[];i.push({text:this.pdfViewer.localeObj.getConstant("Standard Business"),label:"Standard Business",items:r}),this.pdfViewer.stampSettings.standardBusinessStamps.forEach(function(d,h){var p=Be[d];switch(p){case"NotApproved":p="Not Approved";break;case"ForPublicRelease":p="For Public Release";break;case"NotForPublicRelease":p="Not For Public Release";break;case"ForComment":p="For Comment";break;case"PreliminaryResults":p="Preliminary Results";break;case"InformationOnly":p="Information Only"}r.push({text:e.pdfViewer.localeObj.getConstant(p),label:p})})}return this.pdfViewer.customStampSettings.enableCustomStamp&&!a.AR.isDevice&&(i.length>0&&i.push({separator:!0}),i.push({text:this.pdfViewer.localeObj.getConstant("Custom Stamp"),label:"Custom Stamp",items:[]})),this.stampMenu=[{iconCss:"e-pv-stamp-icon e-pv-icon",items:i}],this.menuItems=new re.v2({items:this.stampMenu,cssClass:"e-custom-scroll",showItemOnClick:!0,enableScrolling:!0,beforeOpen:function(d){if(e.resetFreeTextAnnot(),""===d.parentItem.text&&e.pdfViewer.customStampSettings.isAddToMenu&&d.items.length>0){for(var h=null,p=0;p<d.items.length;p++)if(d.items[p].text===e.pdfViewer.localeObj.getConstant("Custom Stamp")){d.items[p].items=[],h=d.items[p];break}var f=e.pdfViewerBase.customStampCollection,c=e.pdfViewer.customStampSettings.customStamps;if(0===f.length&&c&&c.length>0)for(var u=0;u<c.length;u++)f.push({customStampName:c[u].customStampName,customStampImageSource:c[u].customStampImageSource});for(var m=0;m<f.length;m++)if(null!=h)for(h.items.push({text:f[m].customStampName}),p=0;p<d.items.length;p++)if(d.items[p].text===e.pdfViewer.localeObj.getConstant("Custom Stamp")){var g=d.element.children[p];if(g&&!g.childElementCount){var v=document.createElement("span");v.className="e-icons e-caret e-menu-caret-icon",g.appendChild(v),g.setAttribute("aria-haspopup","true"),g.setAttribute("aria-expanded","false")}}}d.parentItem.text===e.pdfViewer.localeObj.getConstant("Custom Stamp")&&(c=e.pdfViewer.customStampSettings.customStamps)&&c.length>10&&((0,a.oq)(d.element,".e-menu-wrapper").style.height="350px"),e.stampParentID=d.parentItem.text,e.menuItems.showItemOnClick=!1},beforeClose:function(d){(d.parentItem&&d.parentItem.text!==e.pdfViewer.localeObj.getConstant("Custom Stamp")&&"Standard Business"!==d.parentItem.text&&"Dynamic"!==d.parentItem.text&&"Sign Here"!==d.parentItem.text||!d.parentItem)&&(e.menuItems.showItemOnClick=!0)},select:function(d){if(e.pdfViewerBase.isAlreadyAdded=!1,d.item.text===e.pdfViewer.localeObj.getConstant("Custom Stamp")){e.updateInteractionTools(),e.checkStampAnnotations(),e.pdfViewer.annotation.stampAnnotationModule.isStampAddMode=!0;var h=document.getElementById(e.pdfViewer.element.id+"_stampElement");h&&h.click(),e.pdfViewer.annotation.triggerAnnotationUnselectEvent()}else if(e.stampParentID===e.pdfViewer.localeObj.getConstant("Custom Stamp")&&""!==d.item.text)for(var p=e.pdfViewerBase.customStampCollection,f=0;f<p.length;f++)p[f].customStampName===d.item.text&&(e.pdfViewer.annotationModule.stampAnnotationModule.customStampName=d.item.text,e.checkStampAnnotations(),e.pdfViewer.annotation.stampAnnotationModule.isStampAddMode=!0,e.pdfViewer.annotationModule.stampAnnotationModule.isStampAnnotSelected=!0,e.pdfViewerBase.stampAdded=!0,e.pdfViewerBase.isAlreadyAdded=!0,e.pdfViewer.annotationModule.stampAnnotationModule.createCustomStampAnnotation(p[f].customStampImageSource),e.pdfViewerBase.stampAdded=!1);else d.item.text!==e.pdfViewer.localeObj.getConstant("Dynamic")&&""!==d.item.text&&"Standard Business"!==d.item.text&&("Sign Here"===e.stampParentID||"Sign Here"!==d.item.text)&&(e.updateInteractionTools(),e.checkStampAnnotations(),e.pdfViewer.annotation.stampAnnotationModule.isStampAddMode=!0,e.pdfViewer.annotationModule.stampAnnotationModule.isStampAnnotSelected=!0,e.pdfViewerBase.stampAdded=!0,e.pdfViewer.annotation.triggerAnnotationUnselectEvent(),e.stampParentID===e.pdfViewer.localeObj.getConstant("Dynamic")?(e.pdfViewerBase.isDynamicStamp=!0,e.pdfViewer.annotationModule.stampAnnotationModule.retrieveDynamicStampAnnotation(d.item.label)):(e.pdfViewerBase.isDynamicStamp=!1,e.pdfViewer.annotationModule.stampAnnotationModule.retrievestampAnnotation(d.item.label)),a.AR.isDevice&&e.stampToolMobileForMobile(e.pdfViewer.element.id+"_annotation_stamp"))}},"#"+this.pdfViewer.element.id+"contextMenuElement"),t.parentElement.classList.add("e-pv-stamp"),this.pdfViewer.enableRtl&&(this.menuItems.enableRtl=!0),t},s.prototype.createCustomStampElement=function(){var e=(0,a.az)("input",{id:this.pdfViewer.element.id+"_stampElement",attrs:{type:"file"}});e.setAttribute("accept",".jpg,.jpeg,.png"),e.style.position="absolute",e.style.left="0px",e.style.top="0px",e.style.visibility="hidden",document.body.appendChild(e),e.addEventListener("change",this.addStampImage)},s.prototype.checkStampAnnotations=function(){if(this.pdfViewer.annotation.stampAnnotationModule.isStampAddMode&&this.pdfViewer.selectedItems&&this.pdfViewer.selectedItems.annotations)for(var e=0;e<this.pdfViewer.selectedItems.annotations.length;e++){var t=this.pdfViewer.selectedItems.annotations[e];t&&!t.annotName&&!t.author&&("Shape"!==t.shapeAnnotationType||"Image"!==t.shapeAnnotationType)&&(this.pdfViewer.remove(t),this.pdfViewer.annotation.renderAnnotations(t.pageIndex,null,null,null),this.pdfViewer.clearSelection(t.pageIndex))}},s.prototype.createDropDowns=function(e){var t=this;if(!a.AR.isDevice||this.pdfViewer.enableDesktopMode){this.shapeElement=this.pdfViewerBase.getElement("_annotation_shapes");var i=this.createShapeOptions(this.shapeElement.id,!0);this.shapeDropDown=this.createDropDownButton(this.shapeElement,"e-pv-annotation-shape-icon",i.element,this.pdfViewer.localeObj.getConstant("Add Shapes")),this.calibrateElement=this.pdfViewerBase.getElement("_annotation_calibrate");var n=this.createShapeOptions(this.calibrateElement.id,!1);this.calibrateDropDown=this.createDropDownButton(this.calibrateElement,"e-pv-annotation-calibrate-icon",n.element,this.pdfViewer.localeObj.getConstant("Calibrate"))}if(e||(this.colorDropDownElement=this.pdfViewerBase.getElement("_annotation_color"),this.colorPalette=this.createColorPicker(this.colorDropDownElement.id),this.colorPalette.change=this.onColorPickerChange.bind(this),this.colorDropDown=this.createDropDownButton(this.colorDropDownElement,"e-pv-annotation-color-icon",this.colorPalette.element.parentElement,this.pdfViewer.localeObj.getConstant("Color edit")),this.colorDropDown.beforeOpen=this.colorDropDownBeforeOpen.bind(this),this.colorDropDown.open=this.colorDropDownOpen.bind(this),this.pdfViewerBase.getElement("_annotation_color-popup").addEventListener("click",this.onColorPickerCancelClick.bind(this))),!a.AR.isDevice||this.pdfViewer.enableDesktopMode){this.strokeDropDownElement=this.pdfViewerBase.getElement("_annotation_stroke"),this.strokeColorPicker=this.createColorPicker(this.strokeDropDownElement.id),this.strokeColorPicker.change=this.onStrokePickerChange.bind(this),this.strokeDropDown=this.createDropDownButton(this.strokeDropDownElement,"e-pv-annotation-stroke-icon",this.strokeColorPicker.element.parentElement,this.pdfViewer.localeObj.getConstant("Stroke edit")),this.strokeDropDown.beforeOpen=this.strokeDropDownBeforeOpen.bind(this),this.strokeDropDown.open=this.strokeDropDownOpen.bind(this),this.pdfViewerBase.getElement("_annotation_stroke-popup").addEventListener("click",this.onStrokePickerCancelClick.bind(this)),this.thicknessElement=this.pdfViewerBase.getElement("_annotation_thickness");var o=this.createThicknessSlider(this.thicknessElement.id);this.thicknessDropDown=this.createDropDownButton(this.thicknessElement,"e-pv-annotation-thickness-icon",o,this.pdfViewer.localeObj.getConstant("Change thickness")),this.thicknessDropDown.beforeOpen=this.thicknessDropDownBeforeOpen.bind(this),this.thicknessSlider.change=this.thicknessChange.bind(this),this.thicknessSlider.changed=this.thicknessChange.bind(this),this.thicknessDropDown.open=this.thicknessDropDownOpen.bind(this)}if(!e){this.opacityDropDownElement=this.pdfViewerBase.getElement("_annotation_opacity");var r=this.createSlider(this.opacityDropDownElement.id);this.opacityDropDown=this.createDropDownButton(this.opacityDropDownElement,"e-pv-annotation-opacity-icon",r,this.pdfViewer.localeObj.getConstant("Opacity edit")),this.opacityDropDown.beforeOpen=this.opacityDropDownBeforeOpen.bind(this),this.opacitySlider.change=this.opacityChange.bind(this),this.opacitySlider.changed=this.opacityChange.bind(this),this.opacityDropDown.open=this.opacityDropDownOpen.bind(this)}(!a.AR.isDevice||this.pdfViewer.enableDesktopMode)&&(this.fontFamilyElement=this.pdfViewerBase.getElement("_annotation_fontname"),this.createDropDownListForFamily(this.fontFamilyElement),this.fontFamilyElement.addEventListener("change",function(){t.onFontFamilyChange.bind(t)}),this.fontSizeElement=this.pdfViewerBase.getElement("_annotation_fontsize"),this.createDropDownListForSize(this.fontSizeElement),this.fontColorElement=this.pdfViewerBase.getElement("_annotation_textcolor"),this.fontColorPalette=this.createColorPicker(this.fontColorElement.id),this.fontColorPalette.change=this.onFontColorChange.bind(this),this.fontColorDropDown=this.createDropDownButton(this.fontColorElement,"e-pv-annotation-textcolor-icon",this.fontColorPalette.element.parentElement,this.pdfViewer.localeObj.getConstant("Font color")),this.textAlignElement=this.pdfViewerBase.getElement("_annotation_textalign"),this.alignmentToolbar=this.createShapeOptions(this.textAlignElement.id,void 0,!0),this.textAlignDropDown=this.createDropDownButton(this.textAlignElement,"e-pv-annotation-textalign-icon",this.alignmentToolbar.element,this.pdfViewer.localeObj.getConstant("Text Align")),this.textAlignDropDown.beforeOpen=this.textAlignDropDownBeforeOpen.bind(this),this.textPropElement=this.pdfViewerBase.getElement("_annotation_textproperties"),this.propertiesToolbar=this.createShapeOptions(this.textPropElement.id,void 0,!1,!0),this.textPropertiesDropDown=this.createPropDropDownButton(this.textPropElement,"e-pv-annotation-textprop-icon",this.propertiesToolbar.element,this.pdfViewer.localeObj.getConstant("Text Properties")),this.textPropertiesDropDown.beforeOpen=this.textPropertiesDropDownBeforeOpen.bind(this))},s.prototype.mobileColorpicker=function(e){var t=this;this.opacityDropDownElement=this.pdfViewerBase.getElement("_annotation_opacity");var i=this.createSlider(this.opacityDropDownElement.id);if(this.opacityDropDown=this.createDropDownButton(this.opacityDropDownElement,"e-pv-annotation-opacity-icon",i,this.pdfViewer.localeObj.getConstant("Opacity edit")),this.opacityDropDown.beforeOpen=this.opacityDropDownBeforeOpen.bind(this),this.opacitySlider.change=this.opacityChange.bind(this),this.opacitySlider.changed=this.opacityChange.bind(this),this.opacityDropDown.open=this.opacityDropDownOpen.bind(this),e===this.pdfViewer.element.id+"_annotation_shapes"?e=this.pdfViewer.element.id+"_annotation_shapesIcon":e===this.pdfViewer.element.id+"_annotation_calibrate"?e=this.pdfViewer.element.id+"_annotation_calibrateIcon":e===this.pdfViewer.element.id+"_highlight"?e=this.pdfViewer.element.id+"_highlightIcon":e===this.pdfViewer.element.id+"_underline"?e=this.pdfViewer.element.id+"_underlineIcon":e===this.pdfViewer.element.id+"_strikethrough"&&(e=this.pdfViewer.element.id+"_strikethroughIcon"),(e===this.pdfViewer.element.id+"_annotation_shapesIcon"||e===this.pdfViewer.element.id+"_annotation_calibrateIcon"||e===this.pdfViewer.element.id+"_annotation_freeTextEdit"||e===this.pdfViewer.element.id+"_highlightIcon"||e===this.pdfViewer.element.id+"_underlineIcon"||e===this.pdfViewer.element.id+"_strikethroughIcon"||e===this.pdfViewer.element.id+"_annotation_inkIcon"||e===this.pdfViewer.element.id+"_annotation_handwrittenSign")&&(e!==this.pdfViewer.element.id+"_annotation_handwrittenSign"&&e!==this.pdfViewer.element.id+"_annotation_inkIcon"&&(this.colorDropDownElement=this.pdfViewerBase.getElement("_annotation_color"),this.colorPalette=this.createColorPicker(this.colorDropDownElement.id),this.colorPalette.change=this.onColorPickerChange.bind(this),this.colorDropDown=this.createDropDownButton(this.colorDropDownElement,"e-pv-annotation-color-icon",this.colorPalette.element.parentElement,this.pdfViewer.localeObj.getConstant("Color edit")),this.colorDropDown.beforeOpen=this.colorDropDownBeforeOpen.bind(this),this.colorDropDown.open=this.colorDropDownOpen.bind(this),this.pdfViewerBase.getElement("_annotation_color-popup").addEventListener("click",this.onColorPickerCancelClick.bind(this))),e===this.pdfViewer.element.id+"_annotation_freeTextEdit"&&(this.fontFamilyElement=this.pdfViewerBase.getElement("_annotation_fontname"),this.createDropDownListForFamily(this.fontFamilyElement),this.fontFamilyElement.style.textAlign="left",this.fontFamilyElement.addEventListener("change",function(){t.onFontFamilyChange.bind(t)}),this.fontSizeElement=this.pdfViewerBase.getElement("_annotation_fontsize"),this.createDropDownListForSize(this.fontSizeElement),this.fontColorElement=this.pdfViewerBase.getElement("_annotation_textcolor"),this.fontColorPalette=this.createColorPicker(this.fontColorElement.id),this.fontColorPalette.change=this.onFontColorChange.bind(this),this.fontColorDropDown=this.createDropDownButton(this.fontColorElement,"e-pv-annotation-textcolor-icon",this.fontColorPalette.element.parentElement,this.pdfViewer.localeObj.getConstant("Font color")),this.textAlignElement=this.pdfViewerBase.getElement("_annotation_textalign"),this.alignmentToolbar=this.createShapeOptions(this.textAlignElement.id,void 0,!0),this.textAlignDropDown=this.createDropDownButton(this.textAlignElement,"e-pv-annotation-textalign-icon",this.alignmentToolbar.element,this.pdfViewer.localeObj.getConstant("Text Align")),this.textAlignDropDown.beforeOpen=this.textAlignDropDownBeforeOpen.bind(this),this.textPropElement=this.pdfViewerBase.getElement("_annotation_textproperties"),this.propertiesToolbar=this.createShapeOptions(this.textPropElement.id,void 0,!1,!0),this.textPropertiesDropDown=this.createPropDropDownButton(this.textPropElement,"e-pv-annotation-textprop-icon",this.propertiesToolbar.element,this.pdfViewer.localeObj.getConstant("Text Properties")),this.textPropertiesDropDown.beforeOpen=this.textPropertiesDropDownBeforeOpen.bind(this)),e===this.pdfViewer.element.id+"_annotation_shapesIcon"||e===this.pdfViewer.element.id+"_annotation_calibrateIcon"||e===this.pdfViewer.element.id+"_annotation_freeTextEdit"||e===this.pdfViewer.element.id+"_annotation_inkIcon"||e===this.pdfViewer.element.id+"_annotation_handwrittenSign")){this.thicknessElement=this.pdfViewerBase.getElement("_annotation_thickness");var n=this.createThicknessSlider(this.thicknessElement.id);this.thicknessDropDown=this.createDropDownButton(this.thicknessElement,"e-pv-annotation-thickness-icon",n,this.pdfViewer.localeObj.getConstant("Change thickness")),this.thicknessDropDown.beforeOpen=this.thicknessDropDownBeforeOpen.bind(this),this.thicknessSlider.change=this.thicknessChange.bind(this),this.thicknessSlider.changed=this.thicknessChange.bind(this),this.thicknessDropDown.open=this.thicknessDropDownOpen.bind(this),this.strokeDropDownElement=this.pdfViewerBase.getElement("_annotation_stroke"),this.strokeColorPicker=this.createColorPicker(this.strokeDropDownElement.id),this.strokeColorPicker.change=this.onStrokePickerChange.bind(this),this.strokeDropDown=this.createDropDownButton(this.strokeDropDownElement,"e-pv-annotation-stroke-icon",this.strokeColorPicker.element.parentElement,this.pdfViewer.localeObj.getConstant("Stroke edit")),this.strokeDropDown.beforeOpen=this.strokeDropDownBeforeOpen.bind(this),this.strokeDropDown.open=this.strokeDropDownOpen.bind(this),this.pdfViewerBase.getElement("_annotation_stroke-popup").addEventListener("click",this.onStrokePickerCancelClick.bind(this))}},s.prototype.opacityDropDownOpen=function(e){a.AR.isDevice&&!this.pdfViewer.enableDesktopMode?(e.element.parentElement.style.left="0px",e.element.parentElement.style.top=this.pdfViewerBase.viewerContainer.clientHeight+"px"):this.calculateToolbarPosition(e)},s.prototype.onColorPickerCancelClick=function(e){e.target.classList.contains("e-cancel")&&this.colorDropDown.toggle()},s.prototype.onStrokePickerCancelClick=function(e){e.target.classList.contains("e-cancel")&&this.strokeDropDown.toggle()},s.prototype.colorDropDownBeforeOpen=function(e){this.colorPalette.noColor=!1,this.pdfViewer.annotationModule.textMarkupAnnotationModule&&(this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation?this.colorPalette.value=this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation.color:this.setCurrentColorInPicker()),1===this.pdfViewer.selectedItems.annotations.length?(this.colorPalette.value=this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.fill,this.colorPalette.noColor=!0):this.setCurrentColorInPicker(),this.colorPalette.refresh(),this.updateColorInIcon(this.colorDropDownElement,this.colorPalette.value)},s.prototype.setCurrentColorInPicker=function(){if(!(0,a.xr)()){if(this.pdfViewer.annotationModule.textMarkupAnnotationModule)switch(this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode){case"Highlight":this.setColorInPicker(this.colorPalette,this.pdfViewer.annotationModule.textMarkupAnnotationModule.highlightColor);break;case"Underline":this.setColorInPicker(this.colorPalette,this.pdfViewer.annotationModule.textMarkupAnnotationModule.underlineColor);break;case"Strikethrough":this.setColorInPicker(this.colorPalette,this.pdfViewer.annotationModule.textMarkupAnnotationModule.strikethroughColor)}if(this.pdfViewer.annotation.shapeAnnotationModule)switch(this.pdfViewer.annotationModule.shapeAnnotationModule.currentAnnotationMode){case"Line":this.setColorInPicker(this.colorPalette,this.pdfViewer.annotationModule.shapeAnnotationModule.lineFillColor);break;case"Arrow":this.setColorInPicker(this.colorPalette,this.pdfViewer.annotationModule.shapeAnnotationModule.arrowFillColor);break;case"Rectangle":this.setColorInPicker(this.colorPalette,this.pdfViewer.annotationModule.shapeAnnotationModule.rectangleFillColor);break;case"Circle":this.setColorInPicker(this.colorPalette,this.pdfViewer.annotationModule.shapeAnnotationModule.circleFillColor);break;case"Polygon":this.setColorInPicker(this.colorPalette,this.pdfViewer.annotationModule.shapeAnnotationModule.polygonFillColor)}this.colorDropDownElement&&this.updateColorInIcon(this.colorDropDownElement,this.colorPalette.value)}},s.prototype.colorDropDownOpen=function(e){a.AR.isDevice&&!this.pdfViewer.enableDesktopMode&&(e.element.parentElement.style.top=this.pdfViewerBase.viewerContainer.clientHeight/2+"px"),this.colorPalette.refresh()},s.prototype.strokeDropDownBeforeOpen=function(e){1===this.pdfViewer.selectedItems.annotations.length?this.strokeColorPicker.value=this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeColor:this.setCurrentStrokeColorInPicker(),this.strokeColorPicker.refresh(),this.updateColorInIcon(this.strokeDropDownElement,this.strokeColorPicker.value),this.updateInkannotationItems()},s.prototype.setCurrentStrokeColorInPicker=function(){if(!(0,a.xr)()&&this.pdfViewer.annotation.shapeAnnotationModule)switch(this.pdfViewer.annotationModule.shapeAnnotationModule.currentAnnotationMode){case"Line":this.setColorInPicker(this.strokeColorPicker,this.pdfViewer.annotationModule.shapeAnnotationModule.lineStrokeColor);break;case"Arrow":this.setColorInPicker(this.strokeColorPicker,this.pdfViewer.annotationModule.shapeAnnotationModule.arrowStrokeColor);break;case"Rectangle":this.setColorInPicker(this.strokeColorPicker,this.pdfViewer.annotationModule.shapeAnnotationModule.rectangleStrokeColor);break;case"Circle":this.setColorInPicker(this.strokeColorPicker,this.pdfViewer.annotationModule.shapeAnnotationModule.circleStrokeColor);break;case"Polygon":this.setColorInPicker(this.strokeColorPicker,this.pdfViewer.annotationModule.shapeAnnotationModule.polygonStrokeColor)}},s.prototype.strokeDropDownOpen=function(e){a.AR.isDevice&&!this.pdfViewer.enableDesktopMode&&(e.element.parentElement.style.top=this.pdfViewerBase.viewerContainer.clientHeight/2+"px"),this.strokeColorPicker.refresh()},s.prototype.onFontColorChange=function(e){var t;t=(0,a.xr)()?e[0]:""===e.currentValue.hex?"#ffffff00":e.currentValue.hex,1===this.pdfViewer.selectedItems.annotations.length?this.pdfViewer.annotation.modifyFontColor(t):(this.pdfViewer.freeTextSettings.fontColor=t,this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties()),(0,a.xr)()?(this.fontColorElementInBlazor=this.pdfViewer.element.querySelector(".e-pv-annotation-textcolor-container"),this.updateColorInIcon(this.fontColorElementInBlazor,t)):(this.updateColorInIcon(this.fontColorElement,t),this.fontColorDropDown.toggle())},s.prototype.onFontFamilyChange=function(e){var t;t=(0,a.xr)()?e:e&&e.fontFamily&&e.fontFamily.value?e.fontFamily.value:"",1===this.pdfViewer.selectedItems.annotations.length&&t?this.pdfViewer.annotation.modifyFontFamily(t):(this.pdfViewer.freeTextSettings.fontFamily=t,this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties())},s.prototype.onFontSizeChange=function(e){var t;t=(0,a.xr)()?e:e&&e.fontSize&&e.fontSize.value?e.fontSize.value:"";var i=parseFloat(t);1===this.pdfViewer.selectedItems.annotations.length&&t?this.pdfViewer.annotation.modifyFontSize(i):(this.pdfViewer.freeTextSettings.fontSize=i,this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties())},s.prototype.textAlignDropDownBeforeOpen=function(e){if(1===this.pdfViewer.selectedItems.annotations.length&&e.element.getElementsByTagName("button")&&e.element.getElementsByTagName("button").length>0)for(var t=e.element.getElementsByTagName("button"),i=this.pdfViewer.selectedItems.annotations[0],n=0;n<t.length;n++)t[n]&&(t[n].classList.remove("textprop-option-active"),t[n].id===this.pdfViewer.element.id+"_left_align"&&"Left"===i.textAlign&&t[n].classList.add("textprop-option-active"),t[n].id===this.pdfViewer.element.id+"_right_align"&&"Right"===i.textAlign&&t[n].classList.add("textprop-option-active"),t[n].id===this.pdfViewer.element.id+"_center_align"&&"Center"===i.textAlign&&t[n].classList.add("textprop-option-active"),t[n].id===this.pdfViewer.element.id+"_justify_align"&&"Justify"===i.textAlign&&t[n].classList.add("textprop-option-active"))},s.prototype.textPropertiesDropDownBeforeOpen=function(e){if(1===this.pdfViewer.selectedItems.annotations.length&&e.element.getElementsByTagName("button")&&e.element.getElementsByTagName("button").length>0)for(var t=e.element.getElementsByTagName("button"),i=this.pdfViewer.selectedItems.annotations[0],n=0;n<t.length;n++)t[n]&&(t[n].classList.remove("textprop-option-active"),t[n].id===this.pdfViewer.element.id+"_bold"&&i.font.isBold&&t[n].classList.add("textprop-option-active"),t[n].id===this.pdfViewer.element.id+"_italic"&&i.font.isItalic&&t[n].classList.add("textprop-option-active"),t[n].id===this.pdfViewer.element.id+"_strikeout"&&i.font.isStrikeout&&t[n].classList.add("textprop-option-active"),t[n].id===this.pdfViewer.element.id+"_underline_textinput"&&i.font.isUnderline&&t[n].classList.add("textprop-option-active"))},s.prototype.onClickTextAlignment=function(e){var t;t=(0,a.xr)()?e[0]:e&&e.item&&e.item.value?e.item.value:"",1===this.pdfViewer.selectedItems.annotations.length&&t?this.pdfViewer.annotation.modifyTextAlignment(t):(this.pdfViewer.freeTextSettings.textAlignment=e.item.value,this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties()),this.updateTextAlignInIcon(t)},s.prototype.onClickTextProperties=function(e){var t;if(t=(0,a.xr)()?e[0]:e&&e.item&&e.item.value?e.item.value:"",1===this.pdfViewer.selectedItems.annotations.length&&t){var i={isBold:void 0,isItalic:void 0,isStrikeout:void 0,isUnderline:void 0};"bold"===t?i.isBold=!this.pdfViewer.selectedItems.annotations[0].font.isBold:"italic"===t?i.isItalic=!this.pdfViewer.selectedItems.annotations[0].font.isItalic:"underline"===t?i.isUnderline=!this.pdfViewer.selectedItems.annotations[0].font.isUnderline:"strikeout"===t&&(i.isStrikeout=!this.pdfViewer.selectedItems.annotations[0].font.isStrikeout),this.pdfViewer.annotation.modifyTextProperties(i,t)}else"bold"===t?this.pdfViewer.annotationModule.freeTextAnnotationModule.isBold?this.pdfViewer.annotationModule.freeTextAnnotationModule.isBold=!1:(this.pdfViewer.freeTextSettings.fontStyle=1,this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties()):"italic"===t?this.pdfViewer.annotationModule.freeTextAnnotationModule.isItalic?this.pdfViewer.annotationModule.freeTextAnnotationModule.isItalic=!1:(this.pdfViewer.freeTextSettings.fontStyle=2,this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties()):"underline"===t?this.pdfViewer.annotationModule.freeTextAnnotationModule.isUnderline?this.pdfViewer.annotationModule.freeTextAnnotationModule.isUnderline=!1:(this.pdfViewer.freeTextSettings.fontStyle=4,this.pdfViewer.annotationModule.freeTextAnnotationModule.isStrikethrough=!1,this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties()):"strikeout"===t&&(this.pdfViewer.annotationModule.freeTextAnnotationModule.isStrikethrough?this.pdfViewer.annotationModule.freeTextAnnotationModule.isStrikethrough=!1:(this.pdfViewer.freeTextSettings.fontStyle=8,this.pdfViewer.annotationModule.freeTextAnnotationModule.isUnderline=!1,this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties()));this.updateTextPropertySelection(t)},s.prototype.opacityChange=function(e){var t;if(t=e&&1===e.length?e[0]:e.value,this.pdfViewer.annotationModule.textMarkupAnnotationModule)if(this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation)(0,a.xr)()?this.pdfViewer.annotationModule.textMarkupAnnotationModule.modifyOpacityProperty(null,t):this.isCurrentAnnotationOpacitySet&&"changed"===e.name?this.isCurrentAnnotationOpacitySet=!1:this.pdfViewer.annotationModule.textMarkupAnnotationModule.modifyOpacityProperty(e);else switch(this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode){case"Highlight":this.pdfViewer.annotationModule.textMarkupAnnotationModule.highlightOpacity=t/100;break;case"Underline":this.pdfViewer.annotationModule.textMarkupAnnotationModule.underlineOpacity=t/100;break;case"Strikethrough":this.pdfViewer.annotationModule.textMarkupAnnotationModule.strikethroughOpacity=t/100}if(1===this.pdfViewer.selectedItems.annotations.length){var i=this.pdfViewer.selectedItems.annotations[0];if(null==i||"Stamp"!==i.shapeAnnotationType&&"Image"!==i.shapeAnnotationType)(0,a.xr)()?this.pdfViewer.annotation.modifyOpacity(t,!0):"changed"===e.name&&e.value!==e.previousValue&&this.pdfViewer.annotation.modifyOpacity(e);else{var n=_(i),o=_(i);o.opacity=t/100,this.pdfViewer.nodePropertyChange(i,{opacity:t/100}),this.pdfViewer.annotation.triggerAnnotationPropChange(i,!1,!1,!1,!0),this.pdfViewer.annotation.addAction(this.pdfViewer.selectedItems.annotations[0].pageIndex,null,this.pdfViewer.selectedItems.annotations[0],"stampOpacity","",n,o),this.pdfViewer.annotation.stampAnnotationModule.updateSessionStorage(this.pdfViewer.selectedItems.annotations[0],null,"opacity")}}else{if(this.pdfViewer.annotation.shapeAnnotationModule)switch(this.pdfViewer.annotation.shapeAnnotationModule.currentAnnotationMode){case"Line":this.pdfViewer.annotation.shapeAnnotationModule.lineOpacity=t/100;break;case"Arrow":this.pdfViewer.annotation.shapeAnnotationModule.arrowOpacity=t/100;break;case"Rectangle":this.pdfViewer.annotation.shapeAnnotationModule.rectangleOpacity=t/100;break;case"Circle":this.pdfViewer.annotation.shapeAnnotationModule.circleOpacity=t/100;break;case"Polygon":this.pdfViewer.annotation.shapeAnnotationModule.polygonOpacity=t/100}var r=this.pdfViewer.annotation;r&&r.inkAnnotationModule&&(this.pdfViewer.inkAnnotationSettings.opacity=t/100),this.pdfViewer.drawingObject&&(this.pdfViewer.drawingObject.opacity=t/100,"FreeText"===this.pdfViewer.drawingObject.shapeAnnotationType&&(this.pdfViewer.freeTextSettings.opacity=t/100,this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties()))}(0,a.xr)()||this.updateOpacityIndicator()},s.prototype.opacityDropDownBeforeOpen=function(e){if(this.pdfViewer.annotationModule.textMarkupAnnotationModule)if(this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation)this.isCurrentAnnotationOpacitySet=!0,this.opacitySlider.value=100*this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation.opacity;else switch(this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode){case"Highlight":this.opacitySlider.value=100*this.pdfViewer.annotationModule.textMarkupAnnotationModule.highlightOpacity;break;case"Underline":this.opacitySlider.value=100*this.pdfViewer.annotationModule.textMarkupAnnotationModule.underlineOpacity;break;case"Strikethrough":this.opacitySlider.value=100*this.pdfViewer.annotationModule.textMarkupAnnotationModule.strikethroughOpacity}if(1===this.pdfViewer.selectedItems.annotations.length)this.opacitySlider.value=100*this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.opacity;else if(this.pdfViewer.annotation.shapeAnnotationModule)switch(this.pdfViewer.annotation.shapeAnnotationModule.currentAnnotationMode){case"Line":this.opacitySlider.value=100*this.pdfViewer.annotation.shapeAnnotationModule.lineOpacity;break;case"Arrow":this.opacitySlider.value=100*this.pdfViewer.annotation.shapeAnnotationModule.arrowOpacity;break;case"Rectangle":this.opacitySlider.value=100*this.pdfViewer.annotation.shapeAnnotationModule.rectangleOpacity;break;case"Circle":this.opacitySlider.value=100*this.pdfViewer.annotation.shapeAnnotationModule.circleOpacity;break;case"Polygon":this.opacitySlider.value=100*this.pdfViewer.annotation.shapeAnnotationModule.polygonOpacity}this.updateOpacityIndicator(),this.updateInkannotationItems()},s.prototype.thicknessDropDownBeforeOpen=function(){if(1===this.pdfViewer.selectedItems.annotations.length)this.thicknessSlider.value=this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeWidth;else if(this.pdfViewer.annotation.shapeAnnotationModule)switch(this.pdfViewer.annotation.shapeAnnotationModule.currentAnnotationMode){case"Line":this.thicknessSlider.value=this.pdfViewer.annotation.shapeAnnotationModule.lineThickness;break;case"Arrow":this.thicknessSlider.value=this.pdfViewer.annotation.shapeAnnotationModule.arrowThickness;break;case"Rectangle":this.thicknessSlider.value=this.pdfViewer.annotation.shapeAnnotationModule.rectangleThickness;break;case"Circle":this.thicknessSlider.value=this.pdfViewer.annotation.shapeAnnotationModule.circleThickness;break;case"Polygon":this.thicknessSlider.value=this.pdfViewer.annotation.shapeAnnotationModule.polygonThickness}this.updateThicknessIndicator(),this.updateInkannotationItems()},s.prototype.thicknessDropDownOpen=function(e){a.AR.isDevice&&!this.pdfViewer.enableDesktopMode?(e.element.parentElement.style.left="0px",e.element.parentElement.style.top=this.pdfViewerBase.viewerContainer.clientHeight+"px"):this.calculateToolbarPosition(e)},s.prototype.calculateToolbarPosition=function(e){if(e.element&&e.element.parentElement){var t=parseFloat(e.element.parentElement.style.left),i=e.element.parentElement.offsetWidth;t+i<this.pdfViewer.element.offsetWidth+10&&(e.element.parentElement.style.left=t-i+"px")}},s.prototype.thicknessChangeInBlazor=function(e){1===this.pdfViewer.selectedItems.annotations.length?this.pdfViewer.annotation.modifyThickness(e[0]):this.ShapeThickness(e[0])},s.prototype.thicknessChange=function(e){if(1===this.pdfViewer.selectedItems.annotations.length){if("changed"===e.name){this.pdfViewer.annotation.modifyThickness(e.value),(0,a.xr)()||this.updateThicknessIndicator();var t=this.pdfViewer.annotation,i=this.pdfViewer.selectedItems.annotations[0];t&&t.inkAnnotationModule&&i&&"Ink"===i.shapeAnnotationType&&(this.pdfViewer.inkAnnotationSettings.thickness=e.value)}}else this.ShapeThickness(e.value)},s.prototype.ShapeThickness=function(e){if(this.pdfViewer.annotation.shapeAnnotationModule){switch(this.pdfViewer.annotation.shapeAnnotationModule.currentAnnotationMode){case"Line":this.pdfViewer.annotation.shapeAnnotationModule.lineThickness=e;break;case"Arrow":this.pdfViewer.annotation.shapeAnnotationModule.arrowThickness=e;break;case"Rectangle":this.pdfViewer.annotation.shapeAnnotationModule.rectangleThickness=e;break;case"Circle":this.pdfViewer.annotation.shapeAnnotationModule.circleThickness=e;break;case"Polygon":this.pdfViewer.annotation.shapeAnnotationModule.polygonThickness=e}var t=this.pdfViewer.annotation;t&&t.inkAnnotationModule&&(this.pdfViewer.inkAnnotationSettings.thickness=e.value),this.pdfViewer.drawingObject&&(this.pdfViewer.drawingObject.thickness=e.value),this.pdfViewer.drawingObject&&"FreeText"===this.pdfViewer.drawingObject.shapeAnnotationType&&(this.pdfViewer.freeTextSettings.borderWidth=e.value,this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties())}var i=this.pdfViewer.annotation;i&&i.inkAnnotationModule&&(this.pdfViewer.inkAnnotationSettings.thickness=e),this.pdfViewer.drawingObject&&(this.pdfViewer.drawingObject.thickness=e),this.pdfViewer.drawingObject&&"FreeText"===this.pdfViewer.drawingObject.shapeAnnotationType&&(this.pdfViewer.freeTextSettings.borderWidth=e,this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties()),(0,a.xr)()||this.updateThicknessIndicator()},s.prototype.createDropDownButton=function(e,t,i,n){var o=new Le.uw({iconCss:t+" e-pv-icon",target:i});return this.pdfViewer.enableRtl&&(o.enableRtl=!0),o.appendTo(e),this.primaryToolbar.createTooltip(e,n),o},s.prototype.createShapeOptions=function(e,t,i,n){var r,o=(0,a.az)("div",{id:e+"_target",className:"e-pv-shapes-toolbar"});return document.body.appendChild(o),i?((r=new re.o8({items:this.textAlignmentToolbarItems(),overflowMode:"MultiRow"},o)).isStringTemplate=!0,this.afterAlignmentToolbarCreation()):n?((r=new re.o8({items:this.textPropertiesToolbarItems(),overflowMode:"MultiRow"},o)).isStringTemplate=!0,this.afterPropertiesToolbarCreation()):t?!a.AR.isDevice||this.pdfViewer.enableDesktopMode?((r=new re.o8({items:this.createShapeToolbarItems(),overflowMode:"MultiRow",clicked:this.onShapeToolbarClicked.bind(this)},o)).isStringTemplate=!0,this.afterShapeToolbarCreation()):(this.toolbarElement=(0,a.az)("div",{id:e+"_target",className:"e-pv-mobile-annotation-toolbar",styles:"bottom: 0px; position: absolute; width: 100%; float: left"}),this.pdfViewerBase.viewerMainContainer.appendChild(this.toolbarElement),(r=new re.o8({items:this.createShapeToolbarItemsForMobile(),overflowMode:"Scrollable",clicked:this.onShapeToolbarClicked.bind(this)},this.toolbarElement)).isStringTemplate=!0,this.afterShapeToolbarCreationForMobile()):((r=new re.o8({items:this.createCalibrateToolbarItems(),overflowMode:"MultiRow",clicked:this.onCalibrateToolbarClicked.bind(this)},o)).isStringTemplate=!0,this.afterCalibrateToolbarCreation()),r},s.prototype.createPropertyToolbarForMobile=function(e){var t=this,i=this.pdfViewer.toolbarModule.annotationToolbarModule.getTemplate("span","_annotation_color","e-pv-annotation-color-container"),n=this.pdfViewer.toolbarModule.annotationToolbarModule.getTemplate("span","_annotation_stroke","e-pv-annotation-stroke-container"),o=this.getTemplate("span","_annotation_thickness","e-pv-annotation-thickness-container"),r=this.getTemplate("span","_annotation_opacity","e-pv-annotation-opacity-container"),l=this.getTemplate("input","_annotation_fontname","e-pv-annotation-fontname-container"),d=this.getTemplate("input","_annotation_fontsize","e-pv-annotation-fontsize-container"),h=this.getTemplate("span","_annotation_textcolor","e-pv-annotation-textcolor-container"),p=this.getTemplate("span","_annotation_textalign","e-pv-annotation-textalign-container"),f=this.getTemplate("span","_annotation_textproperties","e-pv-annotation-textprop-container"),c=[];return"Polygon"===e||"Rectangle"===e||"Ellipse"===e||"Line"===e||"LineWidthArrowHead"===e||"Distance"===e||"Perimeter"===e||"Radius"===e||"FreeText"===e?("FreeText"===e&&(c.push({prefixIcon:"e-pv-freetext-icon e-pv-icon",className:"e-pv-annotation-freetextedit-container"}),c.push({type:"Separator",align:"Left"}),c.push({template:l}),c.push({template:d}),c.push({template:h}),c.push({template:p}),c.push({template:f})),"Polygon"===e?"Area"===this.pdfViewer.selectedItems.annotations[0].measureType?(c.push({prefixIcon:"e-pv-calibrate-area-icon e-pv-icon"}),c.push({type:"Separator",align:"Left"})):"Volume"===this.pdfViewer.selectedItems.annotations[0].measureType?(c.push({prefixIcon:"e-pv-calibrate-volume-icon e-pv-icon"}),c.push({type:"Separator",align:"Left"})):(c.push({prefixIcon:"e-pv-shape-pentagon-icon e-pv-icon"}),c.push({type:"Separator",align:"Left"})):"Rectangle"===e?(c.push({prefixIcon:"e-pv-shape-rectangle-icon e-pv-icon"}),c.push({type:"Separator",align:"Left"})):"Ellipse"===e?(c.push({prefixIcon:"e-pv-shape-circle-icon e-pv-icon"}),c.push({type:"Separator",align:"Left"})):"Line"===e?"Perimeter"===this.pdfViewer.selectedItems.annotations[0].measureType?(c.push({prefixIcon:"e-pv-calibrate-perimeter-icon e-pv-icon"}),c.push({type:"Separator",align:"Left"})):(c.push({prefixIcon:"e-pv-shape-line-icon e-pv-icon"}),c.push({type:"Separator",align:"Left"})):"LineWidthArrowHead"===e?(c.push({prefixIcon:"e-pv-shape-arrow-icon e-pv-icon"}),c.push({type:"Separator",align:"Left"})):"Distance"===e?(c.push({prefixIcon:"e-pv-calibrate-distance-icon e-pv-icon"}),c.push({type:"Separator",align:"Left"})):"Perimeter"===e?(c.push({prefixIcon:"e-pv-calibrate-perimeter-icon e-pv-icon"}),c.push({type:"Separator",align:"Left"})):"Radius"===e&&(c.push({prefixIcon:"e-pv-calibrate-radius-icon e-pv-icon"}),c.push({type:"Separator",align:"Left"})),c.push({template:i}),c.push({template:n}),c.push({template:o})):"Path"===e||"Ink"===e||"HandWrittenSignature"===e||"SignatureText"===e?("Path"===e||"Ink"===e?(c.push({prefixIcon:"e-pv-inkannotation-icon e-pv-icon"}),c.push({type:"Separator",align:"Left"})):("HandWrittenSignature"===e||"SignatureText"===e)&&(c.push({prefixIcon:"e-pv-handwritten-icon e-pv-icon"}),c.push({type:"Separator",align:"Left"})),c.push({template:n}),c.push({template:o})):"Underline"===e||"Highlight"===e||"Strikethrough"===e?("Highlight"===e?(c.push({prefixIcon:"e-pv-highlight-icon e-pv-icon"}),c.push({type:"Separator",align:"Left"})):"Underline"===e?(c.push({prefixIcon:"e-pv-underline-icon e-pv-icon"}),c.push({type:"Separator",align:"Left"})):"Strikethrough"===e&&(c.push({prefixIcon:"e-pv-strikethrough-icon e-pv-icon"}),c.push({type:"Separator",align:"Left"})),c.push({template:i})):"Stamp"===e||"Image"===e?(c.push({prefixIcon:"e-pv-stamp-icon e-pv-icon"}),c.push({type:"Separator",align:"Left"})):"StickyNotes"===e&&(c.push({prefixIcon:"e-pv-comment-icon e-pv-icon"}),c.push({type:"Separator",align:"Left"})),c.push({template:r}),c.push({prefixIcon:"e-pv-comment-panel-icon e-pv-icon",className:"e-pv-comment-panel-icon-container",id:this.pdfViewer.element.id+"_annotation_commentPanel",align:"Right",click:function(u){t.pdfViewer.annotationModule.showCommentsPanel()}}),c.push({prefixIcon:"e-pv-annotation-delete-icon e-pv-icon",className:"e-pv-annotation-delete-container",id:this.pdfViewer.element.id+"_annotation_delete",align:"Right",click:function(u){t.pdfViewer.annotationModule.deleteAnnotation(),t.propertyToolbar.destroy(),t.toolbarCreated=!1,t.createAnnotationToolbarForMobile(),t.adjustMobileViewer()}}),c},s.prototype.createStampToolbarItemsForMobile=function(){var e=this.getTemplate("span","_annotation_opacity","e-pv-annotation-opacity-container"),t=[];return t.push({prefixIcon:"e-pv-backward-icon e-pv-icon",tooltipText:this.pdfViewer.localeObj.getConstant("Go Back"),id:this.pdfViewer.element.id+"_backward",click:this.goBackToToolbar.bind(this)}),t.push({type:"Separator",align:"Left"}),t.push({template:e}),t},s.prototype.createShapeToolbarItemsForMobile=function(){var e=this.pdfViewer.toolbarModule.annotationToolbarModule.getTemplate("span","_annotation_color","e-pv-annotation-color-container"),t=this.pdfViewer.toolbarModule.annotationToolbarModule.getTemplate("span","_annotation_stroke","e-pv-annotation-stroke-container"),i=this.getTemplate("span","_annotation_thickness","e-pv-annotation-thickness-container"),n=this.getTemplate("span","_annotation_opacity","e-pv-annotation-opacity-container"),o=[];return o.push({prefixIcon:"e-pv-backward-icon e-pv-icon",tooltipText:this.pdfViewer.localeObj.getConstant("Go Back"),id:this.pdfViewer.element.id+"_backward",click:this.goBackToToolbar.bind(this)}),o.push({prefixIcon:"e-pv-shape-line-icon e-pv-icon",cssClass:"",id:this.pdfViewer.element.id+"_shape_line",text:this.pdfViewer.localeObj.getConstant("Line Shape"),align:"Left"}),o.push({prefixIcon:"e-pv-shape-arrow-icon e-pv-icon",cssClass:"",id:this.pdfViewer.element.id+"_shape_arrow",text:this.pdfViewer.localeObj.getConstant("Arrow Shape"),align:"Left"}),o.push({prefixIcon:"e-pv-shape-rectangle-icon e-pv-icon",cssClass:"",id:this.pdfViewer.element.id+"_shape_rectangle",text:this.pdfViewer.localeObj.getConstant("Rectangle Shape"),align:"Left"}),o.push({prefixIcon:"e-pv-shape-circle-icon e-pv-icon",cssClass:"",id:this.pdfViewer.element.id+"_shape_circle",text:this.pdfViewer.localeObj.getConstant("Circle Shape"),align:"Left"}),o.push({prefixIcon:"e-pv-shape-pentagon-icon e-pv-icon",cssClass:"",id:this.pdfViewer.element.id+"_shape_pentagon",text:this.pdfViewer.localeObj.getConstant("Pentagon Shape"),align:"Left"}),o.push({type:"Separator",align:"Left"}),o.push({template:e}),o.push({template:t}),o.push({template:i}),o.push({template:n}),o},s.prototype.createCalibrateToolbarItemsForMobile=function(){var e=this.pdfViewer.toolbarModule.annotationToolbarModule.getTemplate("span","_annotation_color","e-pv-annotation-color-container"),t=this.pdfViewer.toolbarModule.annotationToolbarModule.getTemplate("span","_annotation_stroke","e-pv-annotation-stroke-container"),i=this.getTemplate("span","_annotation_thickness","e-pv-annotation-thickness-container"),n=this.getTemplate("span","_annotation_opacity","e-pv-annotation-opacity-container"),o=[];return o.push({prefixIcon:"e-pv-backward-icon e-pv-icon",tooltipText:this.pdfViewer.localeObj.getConstant("Go Back"),id:this.pdfViewer.element.id+"_backward",click:this.goBackToToolbar.bind(this)}),o.push({prefixIcon:"e-pv-calibrate-distance-icon e-pv-icon",cssClass:"",id:this.pdfViewer.element.id+"_calibrate_distance",text:this.pdfViewer.localeObj.getConstant(""),align:"Left"}),o.push({prefixIcon:"e-pv-calibrate-perimeter-icon e-pv-icon",cssClass:"",id:this.pdfViewer.element.id+"_calibrate_perimeter",text:this.pdfViewer.localeObj.getConstant(""),align:"Left"}),o.push({prefixIcon:"e-pv-calibrate-area-icon e-pv-icon",cssClass:"",id:this.pdfViewer.element.id+"_calibrate_area",text:this.pdfViewer.localeObj.getConstant(""),align:"Left"}),o.push({prefixIcon:"e-pv-calibrate-radius-icon e-pv-icon",cssClass:"",id:this.pdfViewer.element.id+"_calibrate_radius",text:this.pdfViewer.localeObj.getConstant(""),align:"Left"}),o.push({prefixIcon:"e-pv-calibrate-volume-icon e-pv-icon",cssClass:"",id:this.pdfViewer.element.id+"_calibrate_volume",text:this.pdfViewer.localeObj.getConstant(""),align:"Left"}),o.push({type:"Separator",align:"Left"}),o.push({template:e}),o.push({template:t}),o.push({template:i}),o.push({template:n}),o},s.prototype.handleShapeTool=function(e){if(!(0,a.xr)()&&a.AR.isDevice)for(var t=document.querySelectorAll(".e-pv-select"),i=0;i<t.length;i++)t[i].id!==e&&t[i].id!==this.pdfViewer.element.id+"_annotation"&&t[i].classList.remove("e-pv-select")},s.prototype.createPropDropDownButton=function(e,t,i,n){var o=new Le.uw({iconCss:t+" e-pv-icon",target:i,cssClass:"e-caret-hide"});return this.pdfViewer.enableRtl&&(o.enableRtl=!0),o.appendTo(e),this.primaryToolbar.createTooltip(e,n),o},s.prototype.textAlignmentToolbarItems=function(){var e=[];return e.push({prefixIcon:"e-pv-left-align-icon e-pv-icon",cssClass:"",id:this.pdfViewer.element.id+"_left_align",align:"Left",value:"Left",click:this.onClickTextAlignment.bind(this)}),e.push({prefixIcon:"e-pv-center-align-icon e-pv-icon",cssClass:"",id:this.pdfViewer.element.id+"_center_align",align:"Left",value:"Center",click:this.onClickTextAlignment.bind(this)}),e.push({prefixIcon:"e-pv-right-align-icon e-pv-icon",cssClass:"",id:this.pdfViewer.element.id+"_right_align",align:"Left",value:"Right",click:this.onClickTextAlignment.bind(this)}),e.push({prefixIcon:"e-pv-justfiy-align-icon e-pv-icon",cssClass:"",id:this.pdfViewer.element.id+"_justify_align",align:"Left",value:"Justify",click:this.onClickTextAlignment.bind(this)}),e},s.prototype.afterAlignmentToolbarCreation=function(){this.alignLeftElement=this.primaryToolbar.addClassToolbarItem("_left_align","e-pv-left-align",this.pdfViewer.localeObj.getConstant("Align left")),this.alignRightElement=this.primaryToolbar.addClassToolbarItem("_right_align","e-pv-right-align",this.pdfViewer.localeObj.getConstant("Align right")),this.alignCenterElement=this.primaryToolbar.addClassToolbarItem("_center_align","e-pv-center-align",this.pdfViewer.localeObj.getConstant("Center")),this.alignJustifyElement=this.primaryToolbar.addClassToolbarItem("_justify_align","e-pv-justfiy-align",this.pdfViewer.localeObj.getConstant("Justify"))},s.prototype.afterPropertiesToolbarCreation=function(){this.boldElement=this.primaryToolbar.addClassToolbarItem("_bold","e-pv-bold",this.pdfViewer.localeObj.getConstant("Bold")),this.italicElement=this.primaryToolbar.addClassToolbarItem("_italic","e-pv-italic",this.pdfViewer.localeObj.getConstant("Italic")),this.fontStyleStrikethroughItem=this.primaryToolbar.addClassToolbarItem("_strikeout","e-pv-strikeout",this.pdfViewer.localeObj.getConstant("Strikethroughs")),this.fontStyleUnderlineItem=this.primaryToolbar.addClassToolbarItem("_underline_textinput","e-pv-underlinetext",this.pdfViewer.localeObj.getConstant("Underlines"))},s.prototype.createDropDownListForSize=function(e){var t=this,i=["8px","9px","10px","11px","12px","14px","16px","18px","20px","22px","24px","26px","28px","36px","48px","72px","96px"];this.fontSize=new vt.Ct(this.pdfViewer.enableRtl?{dataSource:i,cssClass:"e-pv-prop-dropdown-rtl",allowCustom:!0,showClearButton:!1,width:"80px",popupWidth:"100px",enableRtl:!0}:{dataSource:i,cssClass:"e-pv-prop-dropdown",allowCustom:!0,showClearButton:!1,width:"80px",popupWidth:"100px"}),this.fontSize.value="16px",this.fontSize.appendTo(e),this.primaryToolbar.createTooltip(e,this.pdfViewer.localeObj.getConstant("Font size")),this.fontSize.addEventListener("change",function(){t.onFontSizeChange(t)})},s.prototype.createDropDownListForFamily=function(e){var t=this,i=[{FontName:"Helvetica"},{FontName:"Courier"},{FontName:"Symbol"},{FontName:"Times New Roman"}];this.fontFamily=new vt.Ct(this.pdfViewer.enableRtl?{dataSource:i,query:(new z.AE).select(["FontName"]),fields:{text:"FontName",value:"FontName"},cssClass:"e-pv-prop-dropdown-rtl",itemTemplate:'<span style="font-family: ${FontName};">${FontName}</span>',allowCustom:!0,showClearButton:!1,width:"110px",popupWidth:"190px",enableRtl:!0}:{dataSource:i,query:(new z.AE).select(["FontName"]),fields:{text:"FontName",value:"FontName"},cssClass:"e-pv-prop-dropdown",itemTemplate:'<span style="font-family: ${FontName};">${FontName}</span>',allowCustom:!0,showClearButton:!1,width:"110px",popupWidth:"190px"}),this.fontFamily.isStringTemplate=!0,this.fontFamily.value="Helvetica",this.fontFamily.appendTo(e),this.primaryToolbar.createTooltip(e,this.pdfViewer.localeObj.getConstant("Font family")),this.fontFamily.addEventListener("change",function(){t.onFontFamilyChange(t)})},s.prototype.textPropertiesToolbarItems=function(){var e=[];return e.push({prefixIcon:"e-pv-bold-icon e-pv-icon",cssClass:"",id:this.pdfViewer.element.id+"_bold",align:"Left",value:"bold",click:this.onClickTextProperties.bind(this)}),e.push({prefixIcon:"e-pv-italic-icon e-pv-icon",cssClass:"",id:this.pdfViewer.element.id+"_italic",align:"Left",value:"italic",click:this.onClickTextProperties.bind(this)}),e.push({prefixIcon:"e-pv-strikeout-icon e-pv-icon",cssClass:"",id:this.pdfViewer.element.id+"_strikeout",align:"Left",value:"strikeout",click:this.onClickTextProperties.bind(this)}),e.push({prefixIcon:"e-pv-underlinetext-icon e-pv-icon",cssClass:"",id:this.pdfViewer.element.id+"_underline_textinput",align:"Left",value:"underline",click:this.onClickTextProperties.bind(this)}),e},s.prototype.createShapeToolbarItems=function(){var e=[];return e.push({prefixIcon:"e-pv-shape-line-icon e-pv-icon",cssClass:"",id:this.pdfViewer.element.id+"_shape_line",text:this.pdfViewer.localeObj.getConstant("Line Shape"),align:"Left"}),e.push({prefixIcon:"e-pv-shape-arrow-icon e-pv-icon",cssClass:"",id:this.pdfViewer.element.id+"_shape_arrow",text:this.pdfViewer.localeObj.getConstant("Arrow Shape"),align:"Left"}),e.push({prefixIcon:"e-pv-shape-rectangle-icon e-pv-icon",cssClass:"",id:this.pdfViewer.element.id+"_shape_rectangle",text:this.pdfViewer.localeObj.getConstant("Rectangle Shape"),align:"Left"}),e.push({prefixIcon:"e-pv-shape-circle-icon e-pv-icon",cssClass:"",id:this.pdfViewer.element.id+"_shape_circle",text:this.pdfViewer.localeObj.getConstant("Circle Shape"),align:"Left"}),e.push({prefixIcon:"e-pv-shape-pentagon-icon e-pv-icon",cssClass:"",id:this.pdfViewer.element.id+"_shape_pentagon",text:this.pdfViewer.localeObj.getConstant("Pentagon Shape"),align:"Left"}),e},s.prototype.createCalibrateToolbarItems=function(){var e=[];return e.push({prefixIcon:"e-pv-calibrate-distance-icon e-pv-icon",cssClass:"",id:this.pdfViewer.element.id+"_calibrate_distance",text:this.pdfViewer.localeObj.getConstant(""),align:"Left"}),e.push({prefixIcon:"e-pv-calibrate-perimeter-icon e-pv-icon",cssClass:"",id:this.pdfViewer.element.id+"_calibrate_perimeter",text:this.pdfViewer.localeObj.getConstant(""),align:"Left"}),e.push({prefixIcon:"e-pv-calibrate-area-icon e-pv-icon",cssClass:"",id:this.pdfViewer.element.id+"_calibrate_area",text:this.pdfViewer.localeObj.getConstant(""),align:"Left"}),e.push({prefixIcon:"e-pv-calibrate-radius-icon e-pv-icon",cssClass:"",id:this.pdfViewer.element.id+"_calibrate_radius",text:this.pdfViewer.localeObj.getConstant(""),align:"Left"}),e.push({prefixIcon:"e-pv-calibrate-volume-icon e-pv-icon",cssClass:"",id:this.pdfViewer.element.id+"_calibrate_volume",text:this.pdfViewer.localeObj.getConstant(""),align:"Left"}),e},s.prototype.onCalibrateToolbarClicked=function(e){var t=this.pdfViewer.element.id,i=this.pdfViewer.annotation.measureAnnotationModule;switch(this.deselectAllItems(),this.resetFreeTextAnnot(),a.AR.isDevice&&!(0,a.xr)()&&this.pdfViewer.toolbarModule.selectItem(e.originalEvent.target.parentElement),e.originalEvent.target.id){case t+"_calibrate_distance":case t+"_calibrate_distanceIcon":i.setAnnotationType("Distance"),this.onShapeDrawSelection(!1),this.updateColorInIcon(this.colorDropDownElement,i.distanceFillColor),this.updateColorInIcon(this.strokeDropDownElement,i.distanceStrokeColor),this.handleShapeTool(t+"_calibrate_distance");break;case t+"_calibrate_perimeter":case t+"_calibrate_perimeterIcon":i.setAnnotationType("Perimeter"),this.onShapeDrawSelection(!1),this.updateColorInIcon(this.colorDropDownElement,i.perimeterFillColor),this.updateColorInIcon(this.strokeDropDownElement,i.perimeterStrokeColor),this.handleShapeTool(t+"_calibrate_perimeter");break;case t+"_calibrate_area":case t+"_calibrate_areaIcon":i.setAnnotationType("Area"),this.onShapeDrawSelection(!1),this.updateColorInIcon(this.colorDropDownElement,i.areaFillColor),this.updateColorInIcon(this.strokeDropDownElement,i.areaStrokeColor),this.handleShapeTool(t+"_calibrate_area");break;case t+"_calibrate_radius":case t+"_calibrate_radiusIcon":i.setAnnotationType("Radius"),this.onShapeDrawSelection(!1),this.updateColorInIcon(this.colorDropDownElement,i.radiusFillColor),this.updateColorInIcon(this.strokeDropDownElement,i.radiusStrokeColor),this.handleShapeTool(t+"_calibrate_radius");break;case t+"_calibrate_volume":case t+"_calibrate_volumeIcon":i.setAnnotationType("Volume"),this.onShapeDrawSelection(!1),this.updateColorInIcon(this.colorDropDownElement,i.volumeFillColor),this.updateColorInIcon(this.strokeDropDownElement,i.volumeStrokeColor),this.handleShapeTool(t+"_calibrate_volume")}},s.prototype.onShapeDrawSelection=function(e){a.AR.isDevice||(this.updateInteractionTools(),this.enableAnnotationPropertiesTools(!0),e?this.shapeDropDown.toggle():this.calibrateDropDown.toggle()),this.pdfViewer.annotation.triggerAnnotationUnselectEvent()},s.prototype.afterCalibrateToolbarCreationForMobile=function(){this.primaryToolbar.addClassToolbarItem("_calibrate_distance","e-pv-calibrate-distance",this.pdfViewer.localeObj.getConstant("Calibrate Distance")),this.primaryToolbar.addClassToolbarItem("_calibrate_perimeter","e-pv-calibrate-perimeter",this.pdfViewer.localeObj.getConstant("Calibrate Perimeter")),this.primaryToolbar.addClassToolbarItem("_calibrate_area","e-pv-calibrate-area",this.pdfViewer.localeObj.getConstant("Calibrate Area")),this.primaryToolbar.addClassToolbarItem("_calibrate_radius","e-pv-calibrate-radius",this.pdfViewer.localeObj.getConstant("Calibrate Radius")),this.primaryToolbar.addClassToolbarItem("_calibrate_volume","e-pv-calibrate-volume",this.pdfViewer.localeObj.getConstant("Calibrate Volume"))},s.prototype.afterShapeToolbarCreationForMobile=function(){this.primaryToolbar.addClassToolbarItem("_annotation_color","e-pv-annotation-color-container",this.pdfViewer.localeObj.getConstant("Change Color")),this.primaryToolbar.addClassToolbarItem("_annotation_stroke","e-pv-annotation-stroke-container",this.pdfViewer.localeObj.getConstant("Change Stroke Color")),this.primaryToolbar.addClassToolbarItem("_annotation_thickness","e-pv-annotation-thickness-container",this.pdfViewer.localeObj.getConstant("Chnage Border Thickness")),this.primaryToolbar.addClassToolbarItem("_annotation_opacity","e-annotation-opacity-container",this.pdfViewer.localeObj.getConstant("Change Opacity")),this.primaryToolbar.addClassToolbarItem("_shape_line","e-pv-shape-line",this.pdfViewer.localeObj.getConstant("Add line")),this.primaryToolbar.addClassToolbarItem("_shape_arrow","e-pv-shape-arrow",this.pdfViewer.localeObj.getConstant("Add arrow")),this.primaryToolbar.addClassToolbarItem("_shape_rectangle","e-pv-shape-rectangle",this.pdfViewer.localeObj.getConstant("Add rectangle")),this.primaryToolbar.addClassToolbarItem("_shape_circle","e-pv-shape-circle",this.pdfViewer.localeObj.getConstant("Add circle")),this.primaryToolbar.addClassToolbarItem("_shape_pentagon","e-pv-shape-pentagon",this.pdfViewer.localeObj.getConstant("Add polygon"))},s.prototype.afterShapeToolbarCreation=function(){this.lineElement=this.primaryToolbar.addClassToolbarItem("_shape_line","e-pv-shape-line",this.pdfViewer.localeObj.getConstant("Add line")),this.arrowElement=this.primaryToolbar.addClassToolbarItem("_shape_arrow","e-pv-shape-arrow",this.pdfViewer.localeObj.getConstant("Add arrow")),this.rectangleElement=this.primaryToolbar.addClassToolbarItem("_shape_rectangle","e-pv-shape-rectangle",this.pdfViewer.localeObj.getConstant("Add rectangle")),this.circleElement=this.primaryToolbar.addClassToolbarItem("_shape_circle","e-pv-shape-circle",this.pdfViewer.localeObj.getConstant("Add circle")),this.polygonElement=this.primaryToolbar.addClassToolbarItem("_shape_pentagon","e-pv-shape-pentagon",this.pdfViewer.localeObj.getConstant("Add polygon"))},s.prototype.afterCalibrateToolbarCreation=function(){this.calibrateDistance=this.primaryToolbar.addClassToolbarItem("_calibrate_distance","e-pv-calibrate-distance",this.pdfViewer.localeObj.getConstant("Calibrate Distance")),this.calibratePerimeter=this.primaryToolbar.addClassToolbarItem("_calibrate_perimeter","e-pv-calibrate-perimeter",this.pdfViewer.localeObj.getConstant("Calibrate Perimeter")),this.calibrateArea=this.primaryToolbar.addClassToolbarItem("_calibrate_area","e-pv-calibrate-area",this.pdfViewer.localeObj.getConstant("Calibrate Area")),this.calibrateRadius=this.primaryToolbar.addClassToolbarItem("_calibrate_radius","e-pv-calibrate-radius",this.pdfViewer.localeObj.getConstant("Calibrate Radius")),this.calibrateVolume=this.primaryToolbar.addClassToolbarItem("_calibrate_volume","e-pv-calibrate-volume",this.pdfViewer.localeObj.getConstant("Calibrate Volume"))},s.prototype.afterMobileToolbarCreation=function(){this.highlightItem=this.primaryToolbar.addClassToolbarItem("_highlight","e-pv-highlight",this.pdfViewer.localeObj.getConstant("Highlight")),this.underlineItem=this.primaryToolbar.addClassToolbarItem("_underline","e-pv-underline",this.pdfViewer.localeObj.getConstant("Underline")),this.strikethroughItem=this.primaryToolbar.addClassToolbarItem("_strikethrough","e-pv-strikethrough",this.pdfViewer.localeObj.getConstant("Strikethrough")),this.shapesItem=this.primaryToolbar.addClassToolbarItem("_annotation_shapes","e-pv-annotation-shapes",this.pdfViewer.localeObj.getConstant("Add Shapes")),this.calibrateItem=this.primaryToolbar.addClassToolbarItem("_annotation_calibrate","e-pv-annotation-calibrate",this.pdfViewer.localeObj.getConstant("Calibrate")),this.freeTextEditItem=this.primaryToolbar.addClassToolbarItem("_annotation_freeTextEdit","e-pv-annotation-freeTextEdit",this.pdfViewer.localeObj.getConstant("Free Text")),this.commentItem=this.primaryToolbar.addClassToolbarItem("_comment","e-pv-comment",this.pdfViewer.localeObj.getConstant("Add Comments")),this.commentItem=this.primaryToolbar.addClassToolbarItem("_annotation_commentPanel","e-pv-annotation-comment-panel",this.pdfViewer.localeObj.getConstant("Comment Panel")),this.inkAnnotationItem=this.primaryToolbar.addClassToolbarItem("_annotation_ink","e-pv-annotation-ink",this.pdfViewer.localeObj.getConstant("Draw Ink")),this.selectAnnotationDeleteItem(!1),this.enableCommentPanelTool(this.pdfViewer.enableCommentPanel)},s.prototype.createColorPicker=function(e){var t;t=document.getElementById(e+"_target")||(0,a.az)("input",{id:e+"_target"}),document.body.appendChild(t);var n=new G.zH({inline:!0,mode:"Palette",cssClass:"e-show-value",enableOpacity:!1,value:"#000000",showButtons:!1,modeSwitcher:!1});return this.pdfViewer.enableRtl&&(n.enableRtl=!0),n.appendTo(t),n},s.prototype.onColorPickerChange=function(e){var t;if(t=(0,a.xr)()?e[0]:""===e.currentValue.hex?"#ffffff00":e.currentValue.hex,this.pdfViewer.annotationModule.textMarkupAnnotationModule)if(this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation)this.pdfViewer.annotationModule.textMarkupAnnotationModule.modifyColorProperty(t);else switch(this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode){case"Highlight":this.pdfViewer.annotationModule.textMarkupAnnotationModule.highlightColor=t;break;case"Underline":this.pdfViewer.annotationModule.textMarkupAnnotationModule.underlineColor=t;break;case"Strikethrough":this.pdfViewer.annotationModule.textMarkupAnnotationModule.strikethroughColor=t}if(1===this.pdfViewer.selectedItems.annotations.length)(0,a.xr)()?e[0]!==e[1]&&this.pdfViewer.annotation.modifyFillColor(t):e.currentValue.hex!==e.previousValue.hex&&this.pdfViewer.annotation.modifyFillColor(t);else{if(this.pdfViewer.annotation.shapeAnnotationModule)switch(this.pdfViewer.annotation.shapeAnnotationModule.currentAnnotationMode){case"Line":this.pdfViewer.annotation.shapeAnnotationModule.lineFillColor=t;break;case"Arrow":this.pdfViewer.annotation.shapeAnnotationModule.arrowFillColor=t;break;case"Rectangle":this.pdfViewer.annotation.shapeAnnotationModule.rectangleFillColor=t;break;case"Circle":this.pdfViewer.annotation.shapeAnnotationModule.circleFillColor=t;break;case"Polygon":this.pdfViewer.annotation.shapeAnnotationModule.polygonFillColor=t}this.pdfViewer.drawingObject&&(this.pdfViewer.drawingObject.fillColor=t,"FreeText"===this.pdfViewer.drawingObject.shapeAnnotationType&&(this.pdfViewer.freeTextSettings.fillColor=t,this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties()))}(0,a.xr)()?(this.colorDropDownElementInBlazor=this.pdfViewer.element.querySelector(".e-pv-annotation-color-container"),this.updateColorInIcon(this.colorDropDownElementInBlazor,t)):(this.updateColorInIcon(this.colorDropDownElement,t),this.colorDropDown.toggle())},s.prototype.onStrokePickerChange=function(e){var t;if(t=(0,a.xr)()?e[0]:""===e.currentValue.hex?"#ffffff00":e.currentValue.hex,1===this.pdfViewer.selectedItems.annotations.length)(0,a.xr)()?e[0]!==e[1]&&this.pdfViewer.annotation.modifyStrokeColor(t):e.currentValue.hex!==e.previousValue.hex&&this.pdfViewer.annotation.modifyStrokeColor(t);else{if(this.pdfViewer.annotation.shapeAnnotationModule)switch(this.pdfViewer.annotation.shapeAnnotationModule.currentAnnotationMode){case"Line":this.pdfViewer.annotation.shapeAnnotationModule.lineStrokeColor=t;break;case"Arrow":this.pdfViewer.annotation.shapeAnnotationModule.arrowStrokeColor=t;break;case"Rectangle":this.pdfViewer.annotation.shapeAnnotationModule.rectangleStrokeColor=t;break;case"Circle":this.pdfViewer.annotation.shapeAnnotationModule.circleStrokeColor=t;break;case"Polygon":this.pdfViewer.annotation.shapeAnnotationModule.polygonStrokeColor=t}var i=this.pdfViewer.annotation;i&&i.inkAnnotationModule&&(this.pdfViewer.inkAnnotationSettings.strokeColor=t),this.pdfViewer.drawingObject&&(this.pdfViewer.drawingObject.strokeColor=t),this.pdfViewer.drawingObject&&"FreeText"===this.pdfViewer.drawingObject.shapeAnnotationType&&(this.pdfViewer.freeTextSettings.borderColor=t,this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties())}(0,a.xr)()?(this.strokeDropDownElementInBlazor=this.pdfViewer.element.querySelector(".e-pv-annotation-stroke-container"),this.updateColorInIcon(this.strokeDropDownElementInBlazor,t)):(this.updateColorInIcon(this.strokeDropDownElement,t),this.strokeDropDown.toggle())},s.prototype.updateColorInIcon=function(e,t){(0,a.xr)()?e&&(e.children[0].style.borderBottomColor=t):e&&e.childNodes[0]&&(e.childNodes[0].style.borderBottomColor=t)},s.prototype.updateTextPropertySelection=function(e){"bold"===e?document.getElementById(this.pdfViewer.element.id+"_bold").classList.toggle("textprop-option-active"):"italic"===e?document.getElementById(this.pdfViewer.element.id+"_italic").classList.toggle("textprop-option-active"):"underline"===e?(document.getElementById(this.pdfViewer.element.id+"_underline_textinput").classList.toggle("textprop-option-active"),document.getElementById(this.pdfViewer.element.id+"_strikeout").classList.remove("textprop-option-active")):"strikeout"===e&&(document.getElementById(this.pdfViewer.element.id+"_strikeout").classList.toggle("textprop-option-active"),document.getElementById(this.pdfViewer.element.id+"_underline_textinput").classList.remove("textprop-option-active"))},s.prototype.updateFontFamilyInIcon=function(e){this.fontFamily.value=e},s.prototype.updateTextAlignInIcon=function(e){var t="e-btn-icon e-pv-left-align-icon e-pv-icon",i=document.getElementById(this.pdfViewer.element.id+"_left_align"),n=document.getElementById(this.pdfViewer.element.id+"_right_align"),o=document.getElementById(this.pdfViewer.element.id+"_center_align"),r=document.getElementById(this.pdfViewer.element.id+"_justify_align");(0,a.xr)()||(i.classList.remove("textprop-option-active"),n.classList.remove("textprop-option-active"),o.classList.remove("textprop-option-active"),r.classList.remove("textprop-option-active")),"Left"===e?i.classList.add("textprop-option-active"):"Right"===e?(t="e-btn-icon e-pv-right-align-icon e-pv-icon",n.classList.add("textprop-option-active")):"Center"===e?(t="e-btn-icon e-pv-center-align-icon e-pv-icon",o.classList.add("textprop-option-active")):"Justify"===e&&(t="e-btn-icon e-pv-justfiy-align-icon e-pv-icon",r.classList.add("textprop-option-active")),document.getElementById(this.pdfViewer.element.id+"_annotation_textalign").children[0].className=t},s.prototype.updateFontSizeInIcon=function(e){this.fontSize.value=e+"px"},s.prototype.updateOpacityIndicator=function(){this.opacityIndicator.textContent=parseInt(Math.round(this.opacitySlider.value).toString())+"%"},s.prototype.updateThicknessIndicator=function(){this.thicknessIndicator.textContent=this.thicknessSlider.value+" pt"},s.prototype.createSlider=function(e){var t=(0,a.az)("div",{className:"e-pv-annotation-opacity-popup-container"});document.body.appendChild(t);var i=(0,a.az)("span",{id:e+"_label",className:"e-pv-annotation-opacity-label"});i.textContent=this.pdfViewer.localeObj.getConstant("Opacity");var n=(0,a.az)("div",{id:e+"_slider"});return this.opacitySlider=new G.iR({type:"MinRange",cssClass:"e-pv-annotation-opacity-slider",max:100,min:0}),this.opacityIndicator=(0,a.az)("div",{id:e+"_opacity_indicator",className:"e-pv-annotation-opacity-indicator"}),this.opacityIndicator.textContent="100%",this.pdfViewer.enableRtl?(t.appendChild(this.opacityIndicator),t.appendChild(n),this.opacitySlider.enableRtl=!0,this.opacitySlider.appendTo(n),this.opacitySlider.element.parentElement.classList.add("e-pv-annotation-opacity-slider-container"),t.appendChild(i)):(t.appendChild(i),t.appendChild(n),this.opacitySlider.appendTo(n),this.opacitySlider.element.parentElement.classList.add("e-pv-annotation-opacity-slider-container"),t.appendChild(this.opacityIndicator)),t},s.prototype.createThicknessSlider=function(e){var t=(0,a.az)("div",{className:"e-pv-annotation-thickness-popup-container"});document.body.appendChild(t);var i=(0,a.az)("span",{id:e+"_label",className:"e-pv-annotation-thickness-label"});i.textContent=this.pdfViewer.localeObj.getConstant("Line Thickness");var n=(0,a.az)("div",{id:e+"_slider"});return this.thicknessSlider=new G.iR({type:"MinRange",cssClass:"e-pv-annotation-thickness-slider",max:12,min:0}),this.thicknessIndicator=(0,a.az)("div",{id:e+"_thickness_indicator",className:"e-pv-annotation-thickness-indicator"}),this.thicknessIndicator.textContent="0 pt",this.pdfViewer.enableRtl?(t.appendChild(this.thicknessIndicator),t.appendChild(n),this.thicknessSlider.enableRtl=!0,this.thicknessSlider.appendTo(n),t.appendChild(i)):(t.appendChild(i),t.appendChild(n),this.thicknessSlider.appendTo(n),t.appendChild(this.thicknessIndicator)),this.thicknessSlider.element.parentElement.classList.add("e-pv-annotation-thickness-slider-container"),t},s.prototype.afterToolbarCreation=function(){this.highlightItem=this.primaryToolbar.addClassToolbarItem("_highlight","e-pv-highlight",this.pdfViewer.localeObj.getConstant("Highlight")),this.underlineItem=this.primaryToolbar.addClassToolbarItem("_underline","e-pv-underline",this.pdfViewer.localeObj.getConstant("Underline")),this.strikethroughItem=this.primaryToolbar.addClassToolbarItem("_strikethrough","e-pv-strikethrough",this.pdfViewer.localeObj.getConstant("Strikethrough")),this.deleteItem=this.primaryToolbar.addClassToolbarItem("_annotation_delete","e-pv-annotation-delete",this.pdfViewer.localeObj.getConstant("Delete")),this.freeTextEditItem=this.primaryToolbar.addClassToolbarItem("_annotation_freeTextEdit","e-pv-annotation-freeTextEdit",this.pdfViewer.localeObj.getConstant("Free Text")),this.inkAnnotationItem=this.primaryToolbar.addClassToolbarItem("_annotation_ink","e-pv-annotation-ink",this.pdfViewer.localeObj.getConstant("Draw Ink")),this.commentItem=this.primaryToolbar.addClassToolbarItem("_annotation_commentPanel","e-pv-annotation-comment-panel",this.pdfViewer.localeObj.getConstant("Comment Panel")),this.closeItem=this.primaryToolbar.addClassToolbarItem("_annotation_close","e-pv-annotation-tools-close",null),this.selectAnnotationDeleteItem(!1),this.enableTextMarkupAnnotationPropertiesTools(!1),this.enableCommentPanelTool(this.pdfViewer.enableCommentPanel)},s.prototype.onToolbarClicked=function(e){var t=this.pdfViewer.selectedItems.annotations[0];switch(e.originalEvent.target.id&&this.pdfViewer.toolbarModule.updateStampItems(),this.pdfViewer.toolbarModule.deSelectCommentAnnotation(),e.originalEvent.target.id){case this.pdfViewer.element.id+"_highlight":case this.pdfViewer.element.id+"_highlightIcon":this.pdfViewer.tool="",a.AR.isDevice?(this.pdfViewer.annotationModule.setAnnotationMode("Highlight"),this.textMarkupForMobile(e)):(this.pdfViewer.tool="",this.resetFreeTextAnnot(),this.handleHighlight()),this.pdfViewer.annotation.triggerAnnotationUnselectEvent();break;case this.pdfViewer.element.id+"_underline":case this.pdfViewer.element.id+"_underlineIcon":this.pdfViewer.tool="",a.AR.isDevice?(this.pdfViewer.annotationModule.setAnnotationMode("Underline"),this.textMarkupForMobile(e)):(this.pdfViewer.tool="",this.resetFreeTextAnnot(),this.handleUnderline()),this.pdfViewer.annotation.triggerAnnotationUnselectEvent();break;case this.pdfViewer.element.id+"_strikethrough":case this.pdfViewer.element.id+"_strikethroughIcon":this.pdfViewer.tool="",a.AR.isDevice?(this.pdfViewer.annotationModule.setAnnotationMode("Strikethrough"),this.textMarkupForMobile(e)):(this.pdfViewer.tool="",this.resetFreeTextAnnot(),this.handleStrikethrough()),this.pdfViewer.annotation.triggerAnnotationUnselectEvent();break;case this.pdfViewer.element.id+"_annotation_delete":case this.pdfViewer.element.id+"_annotation_deleteIcon":this.pdfViewer.annotationModule.deleteAnnotation(),this.resetFreeTextAnnot();break;case this.pdfViewer.element.id+"_annotation_commentPanel":case this.pdfViewer.element.id+"_annotation_commentPanelIcon":this.inkAnnotationSelected=!1;var i=document.getElementById(this.pdfViewer.element.id+"_commantPanel");this.pdfViewer.annotation&&this.pdfViewer.annotation.textMarkupAnnotationModule&&this.pdfViewer.annotation.textMarkupAnnotationModule.showHideDropletDiv(!0),"block"===i.style.display?this.pdfViewerBase.navigationPane.closeCommentPanelContainer():this.pdfViewer.annotationModule.showCommentsPanel();break;case this.pdfViewer.element.id+"_annotation_close":case this.pdfViewer.element.id+"_annotation_closeIcon":this.inkAnnotationSelected=!1,"block"===document.getElementById(this.pdfViewer.element.id+"_commantPanel").style.display&&this.pdfViewerBase.navigationPane.closeCommentPanelContainer(),this.showAnnotationToolbar(this.primaryToolbar.annotationItem);break;case this.pdfViewer.element.id+"_annotation_freeTextEdit":case this.pdfViewer.element.id+"_annotation_freeTextEditIcon":a.AR.isDevice?(this.pdfViewer.annotationModule.setAnnotationMode("FreeText"),this.FreeTextForMobile()):(this.resetFreeTextAnnot(),this.handleFreeTextEditor());break;case this.pdfViewer.element.id+"_annotation_signature":case this.pdfViewer.element.id+"_annotation_signatureIcon":this.inkAnnotationSelected=!1,this.updateSignatureCount();break;case this.pdfViewer.element.id+"_annotation_ink":case this.pdfViewer.element.id+"_annotation_inkIcon":if(t&&this.pdfViewer.annotation.triggerAnnotationUnselectEvent(),this.pdfViewer.clearSelection(this.pdfViewer.currentPageNumber-1),this.pdfViewer.annotationModule.inkAnnotationModule){var o=this.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber;o&&""!==o&&(this.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(parseInt(o)),this.primaryToolbar.deSelectItem(this.inkAnnotationItem))}this.inkAnnotationSelected?this.inkAnnotationSelected=!1:(this.deselectAllItems(),this.drawInkAnnotation());break;case this.pdfViewer.element.id+"_annotation_shapesIcon":case this.pdfViewer.element.id+"_annotation_shapes":a.AR.isDevice&&this.shapeToolMobile(e);break;case this.pdfViewer.element.id+"_annotation_calibrateIcon":case this.pdfViewer.element.id+"_annotation_calibrate":a.AR.isDevice&&this.calibrateToolMobile(e);break;case this.pdfViewer.element.id+"_commentIcon":case this.pdfViewer.element.id+"_comment":this.pdfViewerBase.isAddComment=!0,this.pdfViewerBase.isCommentIconAdded=!0,document.getElementById(this.pdfViewer.element.id+"_comment").classList.add("e-pv-select"),this.pdfViewer.toolbarModule.addComments(e)}},s.prototype.addInkAnnotation=function(){if(this.pdfViewer.clearSelection(this.pdfViewer.currentPageNumber-1),this.pdfViewer.annotationModule.inkAnnotationModule){var e=this.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber;e&&""!==e&&(this.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(parseInt(e)),(0,a.xr)()?(this.primaryToolbar.deSelectItem(this.InkAnnotationElement),this.pdfViewerBase.focusViewerContainer()):this.primaryToolbar.deSelectItem(this.inkAnnotationItem))}this.inkAnnotationSelected?this.inkAnnotationSelected=!1:(this.deselectAllItemsInBlazor(),this.drawInkAnnotation())},s.prototype.deselectInkAnnotation=function(){(0,a.xr)()?(this.primaryToolbar.deSelectItem(this.InkAnnotationElement),this.pdfViewerBase.focusViewerContainer()):this.primaryToolbar.deSelectItem(this.inkAnnotationItem)},s.prototype.drawInkAnnotation=function(){this.inkAnnotationSelected=!0,(0,a.xr)()?this.primaryToolbar.selectItem(this.InkAnnotationElement):this.primaryToolbar.selectItem(this.inkAnnotationItem),this.enableSignaturePropertiesTools(!0),this.pdfViewerBase.isToolbarInkClicked=!0,this.pdfViewer.annotationModule.inkAnnotationModule.drawInk()},s.prototype.resetFreeTextAnnot=function(){if(this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.freeTextAnnotationModule&&(this.pdfViewer.annotation.freeTextAnnotationModule.isNewFreeTextAnnot=!1,this.pdfViewer.annotation.freeTextAnnotationModule.isNewAddedAnnot=!1,a.AR.isDevice||(this.freeTextEditItem&&!(0,a.xr)()?this.primaryToolbar.deSelectItem(this.freeTextEditItem):(0,a.xr)()&&this.primaryToolbar.deSelectItem(this.FreeTextElement),this.enableFreeTextAnnotationPropertiesTools(!1))),this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.inkAnnotationModule){var e=this.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber;e&&""!==e&&(this.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(parseInt(e)),(0,a.xr)()?this.primaryToolbar.deSelectItem(this.InkAnnotationElement):this.primaryToolbar.deSelectItem(this.inkAnnotationItem))}this.inkAnnotationSelected=!1},s.prototype.updateInkannotationItems=function(){if(this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.inkAnnotationModule&&this.inkAnnotationSelected){var e=this.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber;e&&""!==e&&(this.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(parseInt(e)),this.pdfViewerBase.isToolbarInkClicked=!0,this.pdfViewer.tool="Ink",this.pdfViewer.clearSelection(e))}},s.prototype.showSignaturepanel=function(){this.pdfViewerBase.isToolbarSignClicked=!0,this.pdfViewerBase.signatureModule.showSignatureDialog(!0)},s.prototype.handleFreeTextEditor=function(){var e=this.pdfViewer.selectedItems.annotations[0];this.enableFreeTextAnnotationPropertiesTools(!0),e&&this.pdfViewer.fireAnnotationUnSelect(e.annotName,e.pageIndex,e),this.pdfViewer.clearSelection(this.pdfViewer.currentPageNumber-1),this.pdfViewer.annotationModule.textMarkupAnnotationModule&&(this.pdfViewer.annotationModule.textMarkupAnnotationModule.isTextMarkupAnnotationMode=!1),this.isStrikethroughEnabled=!1,this.isHighlightEnabled=!1,this.isUnderlineEnabled=!1;var t=this.pdfViewer.annotation.freeTextAnnotationModule;t.setAnnotationType("FreeText"),t.isNewFreeTextAnnot=!0,t.isNewAddedAnnot=!0,this.updateInteractionTools(),this.primaryToolbar.deSelectItem(this.highlightItem),this.primaryToolbar.deSelectItem(this.underlineItem),this.primaryToolbar.deSelectItem(this.strikethroughItem),this.primaryToolbar.selectItem(this.freeTextEditItem),this.updateColorInIcon(this.colorDropDownElement,this.pdfViewer.annotationModule.freeTextAnnotationModule.fillColor),this.updateColorInIcon(this.strokeDropDownElement,this.pdfViewer.annotationModule.freeTextAnnotationModule.borderColor),this.updateColorInIcon(this.fontColorElement,this.pdfViewer.annotationModule.freeTextAnnotationModule.fontColor),this.updateFontFamilyInIcon(this.pdfViewer.annotationModule.freeTextAnnotationModule.fontFamily),this.updateFontSizeInIcon(this.pdfViewer.annotationModule.freeTextAnnotationModule.fontSize),this.updateTextAlignInIcon(this.pdfViewer.annotationModule.freeTextAnnotationModule.textAlign),this.updateFontFamily()},s.prototype.updateFontFamily=function(){this.updateFontFamilyIcon("_bold",!!this.pdfViewer.annotationModule.freeTextAnnotationModule.isBold),this.updateFontFamilyIcon("_italic",!!this.pdfViewer.annotationModule.freeTextAnnotationModule.isItalic),this.pdfViewer.annotationModule.freeTextAnnotationModule.isUnderline?(this.updateFontFamilyIcon("_underline_textinput",!0),this.updateFontFamilyIcon("_strikeout",!1)):this.updateFontFamilyIcon("_underline_textinput",!1),this.pdfViewer.annotationModule.freeTextAnnotationModule.isStrikethrough?(this.updateFontFamilyIcon("_strikeout",!0),this.updateFontFamilyIcon("_underline_textinput",!1)):this.updateFontFamilyIcon("_strikeout",!1)},s.prototype.updateFontFamilyIcon=function(e,t){var i=document.getElementById(this.pdfViewer.element.id+e);t?i.classList.add("textprop-option-active"):i.classList.remove("textprop-option-active")},s.prototype.showAnnotationToolbar=function(e,t){if(!a.AR.isDevice||this.pdfViewer.enableDesktopMode){if(this.isToolbarHidden){var n=void 0;this.toolbarElement&&(n=this.toolbarElement.style.display,this.toolbarElement.style.display="block"),t||(this.pdfViewer.isAnnotationToolbarVisible=!0),e?this.primaryToolbar.selectItem(e):this.pdfViewer.enableToolbar&&this.primaryToolbar.selectItem(this.primaryToolbar.annotationItem),"none"===n&&this.adjustViewer(!0)}else{var i=this.pdfViewer.annotationModule;e?this.primaryToolbar.deSelectItem(e):this.pdfViewer.enableToolbar&&this.primaryToolbar.deSelectItem(this.primaryToolbar.annotationItem),this.adjustViewer(!1),i&&i.textMarkupAnnotationModule&&i.textMarkupAnnotationModule.currentTextMarkupAnnotation?this.enablePropertiesTool(i):this.deselectAllItems(),this.toolbarElement.style.display="none",t||(this.pdfViewer.isAnnotationToolbarVisible=!1),this.primaryToolbar.updateInteractionTools(!this.pdfViewerBase.isPanMode)}this.pdfViewer.magnification&&"fitToPage"===this.pdfViewer.magnification.fitType&&this.pdfViewer.magnification.fitToPage(),this.enableAnnotationAddTools(!0),this.isToolbarHidden=!this.isToolbarHidden}},s.prototype.enablePropertiesTool=function(e){this.isHighlightEnabled=!1,this.isUnderlineEnabled=!1,this.isStrikethroughEnabled=!1,this.pdfViewerBase.isTextMarkupAnnotationModule()&&(e.textMarkupAnnotationModule.isTextMarkupAnnotationMode=!1),this.primaryToolbar.deSelectItem(this.highlightItem),this.primaryToolbar.deSelectItem(this.underlineItem),this.primaryToolbar.deSelectItem(this.strikethroughItem),this.enableTextMarkupAnnotationPropertiesTools(!0),this.updateColorInIcon(this.colorDropDownElement,e.textMarkupAnnotationModule.currentTextMarkupAnnotation.color),this.selectAnnotationDeleteItem(!0)},s.prototype.applyAnnotationToolbarSettings=function(){var e=this.pdfViewer.toolbarSettings.annotationToolbarItems;e&&(-1!==e.indexOf("HighlightTool")?this.showHighlightTool(!0,0,0):this.showHighlightTool(!1,0,0),-1!==e.indexOf("UnderlineTool")?this.showUnderlineTool(!0,1,1):this.showUnderlineTool(!1,1,1),-1!==e.indexOf("StrikethroughTool")?this.showStrikethroughTool(!0,2,2):this.showStrikethroughTool(!1,2,2),-1!==e.indexOf("ShapeTool")?this.showShapeAnnotationTool(!0,4,4):this.showShapeAnnotationTool(!1,4,4),-1!==e.indexOf("CalibrateTool")?this.showCalibrateAnnotationTool(!0,6,6):this.showCalibrateAnnotationTool(!1,6,6),-1!==e.indexOf("ColorEditTool")?this.showColorEditTool(!0,22,22):this.showColorEditTool(!1,22,22),-1!==e.indexOf("StrokeColorEditTool")?this.showStrokeColorEditTool(!0,23,23):this.showStrokeColorEditTool(!1,23,23),-1!==e.indexOf("ThicknessEditTool")?this.showThicknessEditTool(!0,24,24):this.showThicknessEditTool(!1,24,24),-1!==e.indexOf("OpacityEditTool")?this.showOpacityEditTool(!0,25,25):this.showOpacityEditTool(!1,25,25),-1!==e.indexOf("AnnotationDeleteTool")?this.showAnnotationDeleteTool(!0,27,27):this.showAnnotationDeleteTool(!1,27,27),-1!==e.indexOf("StampAnnotationTool")?this.showStampAnnotationTool(!0,10,10):this.showStampAnnotationTool(!1,10,10),-1!==e.indexOf("HandWrittenSignatureTool")?this.showSignatureTool(!0,12,12):this.showSignatureTool(!1,12,12),-1!==e.indexOf("FreeTextAnnotationTool")?this.showFreeTextAnnotationTool(!0,8,8):this.showFreeTextAnnotationTool(!1,8,8),-1!==e.indexOf("FontFamilyAnnotationTool")?this.showFontFamilyAnnotationTool(!0,16,16):this.showFontFamilyAnnotationTool(!1,16,16),-1!==e.indexOf("FontSizeAnnotationTool")?this.showFontSizeAnnotationTool(!0,17,17):this.showFontSizeAnnotationTool(!1,17,17),-1!==e.indexOf("FontStylesAnnotationTool")?this.showFontStylesAnnotationTool(!0,20,20):this.showFontStylesAnnotationTool(!1,20,20),-1!==e.indexOf("FontAlignAnnotationTool")?this.showFontAlignAnnotationTool(!0,18,18):this.showFontAlignAnnotationTool(!1,18,18),-1!==e.indexOf("FontColorAnnotationTool")?this.showFontColorAnnotationTool(!0,19,19):this.showFontColorAnnotationTool(!1,19,19),-1!==e.indexOf("CommentPanelTool")?this.showCommentPanelTool(!0,28,28):this.showCommentPanelTool(!1,28,28),this.showInkAnnotationTool(),this.showSeparator())},s.prototype.applyMobileAnnotationToolbarSettings=function(){var e=this.pdfViewer.toolbarSettings.annotationToolbarItems;if(e){-1!==e.indexOf("HighlightTool")?this.showHighlightTool(!0,2,2):this.showHighlightTool(!1,2,2),-1!==e.indexOf("UnderlineTool")?this.showUnderlineTool(!0,3,3):this.showUnderlineTool(!1,3,3),-1!==e.indexOf("StrikethroughTool")?this.showStrikethroughTool(!0,4,4):this.showStrikethroughTool(!1,4,4),-1!==e.indexOf("ShapeTool")?this.showShapeAnnotationTool(!0,6,6):this.showShapeAnnotationTool(!1,6,6),-1!==e.indexOf("CalibrateTool")?this.showCalibrateAnnotationTool(!0,8,8):this.showCalibrateAnnotationTool(!1,8,8);var t=this.pdfViewer.toolbarSettings.toolbarItems;t&&-1!==t.indexOf("CommentTool")?this.showStickyNoteToolInMobile(!0):this.showStickyNoteToolInMobile(!1),-1!==e.indexOf("StampAnnotationTool")?this.showStampAnnotationTool(!0,12,12):this.showStampAnnotationTool(!1,12,12),-1!==e.indexOf("HandWrittenSignatureTool")?this.showSignatureTool(!0,14,14):this.showSignatureTool(!1,14,14),-1!==e.indexOf("FreeTextAnnotationTool")?this.showFreeTextAnnotationTool(!0,10,10):this.showFreeTextAnnotationTool(!1,10,10),-1!==e.indexOf("CommentPanelTool")?this.showCommentPanelTool(!0,18,18):this.showCommentPanelTool(!1,18,18),-1!==e.indexOf("InkAnnotationTool")?this.showInkTool(!0,16,16):this.showInkTool(!1,16,16),this.showSeparatorInMobile()}},s.prototype.showStickyNoteToolInMobile=function(e){this.isCommentBtnVisible=e,this.applyHideToToolbar(e,0,0)},s.prototype.showSeparatorInMobile=function(){this.isCommentBtnVisible||this.applyHideToToolbar(!1,1,1),!this.isHighlightBtnVisible&&!this.isUnderlineBtnVisible&&!this.isStrikethroughBtnVisible&&this.applyHideToToolbar(!1,5,5),this.isShapeBtnVisible||this.applyHideToToolbar(!1,7,7),this.isCalibrateBtnVisible||this.applyHideToToolbar(!1,9,9),this.isFreeTextBtnVisible||this.applyHideToToolbar(!1,11,11),this.isStampBtnVisible||this.applyHideToToolbar(!1,13,13),this.isSignatureBtnVisible||this.applyHideToToolbar(!1,15,15),this.isInkBtnVisible||this.applyHideToToolbar(!1,17,17)},s.prototype.showInkAnnotationTool=function(){-1!==this.pdfViewer.toolbarSettings.annotationToolbarItems.indexOf("InkAnnotationTool")?this.showInkTool(!0,14,14):this.showInkTool(!1,14,14)},s.prototype.showSeparator=function(){!this.isHighlightBtnVisible&&!this.isUnderlineBtnVisible&&!this.isStrikethroughBtnVisible&&this.applyHideToToolbar(!1,3,3),this.isShapeBtnVisible||this.applyHideToToolbar(!1,5,5),this.isCalibrateBtnVisible||this.applyHideToToolbar(!1,7,7),this.isFreeTextBtnVisible||this.applyHideToToolbar(!1,9,9),this.isStampBtnVisible||this.applyHideToToolbar(!1,11,11),this.isSignatureBtnVisible||this.applyHideToToolbar(!1,13,13),this.isInkBtnVisible||this.applyHideToToolbar(!1,15,15),!this.isFontFamilyToolVisible&&!this.isFontSizeToolVisible&&!this.isFontColorToolVisible&&!this.isFontAlignToolVisible&&!this.isFontStylesToolVisible&&this.applyHideToToolbar(!1,21,21),(!this.isColorToolVisible&&!this.isStrokeColorToolVisible&&!this.isThicknessToolVisible&&!this.isOpacityToolVisible||!this.isDeleteAnnotationToolVisible)&&this.applyHideToToolbar(!1,26,26)},s.prototype.showHighlightTool=function(e,t,i){this.isHighlightBtnVisible=e,this.applyHideToToolbar(e,t,i)},s.prototype.showUnderlineTool=function(e,t,i){this.isUnderlineBtnVisible=e,this.applyHideToToolbar(e,t,i)},s.prototype.showStrikethroughTool=function(e,t,i){this.isStrikethroughBtnVisible=e,this.applyHideToToolbar(e,t,i)},s.prototype.showShapeAnnotationTool=function(e,t,i){this.isShapeBtnVisible=e,this.applyHideToToolbar(e,t,i)},s.prototype.showCalibrateAnnotationTool=function(e,t,i){this.isCalibrateBtnVisible=e,this.applyHideToToolbar(e,t,i)},s.prototype.showFreeTextAnnotationTool=function(e,t,i){this.isFreeTextBtnVisible=e,this.applyHideToToolbar(e,t,i)},s.prototype.showStampAnnotationTool=function(e,t,i){this.isStampBtnVisible=e,this.applyHideToToolbar(e,t,i)},s.prototype.showSignatureTool=function(e,t,i){this.isSignatureBtnVisible=e,this.applyHideToToolbar(e,t,i)},s.prototype.showInkTool=function(e,t,i){this.isInkBtnVisible=e,this.applyHideToToolbar(e,t,i)},s.prototype.showFontFamilyAnnotationTool=function(e,t,i){this.isFontFamilyToolVisible=e,this.applyHideToToolbar(e,t,i)},s.prototype.showFontSizeAnnotationTool=function(e,t,i){this.isFontSizeToolVisible=e,this.applyHideToToolbar(e,t,i)},s.prototype.showFontAlignAnnotationTool=function(e,t,i){this.isFontAlignToolVisible=e,this.applyHideToToolbar(e,t,i)},s.prototype.showFontColorAnnotationTool=function(e,t,i){this.isFontColorToolVisible=e,this.applyHideToToolbar(e,t,i)},s.prototype.showFontStylesAnnotationTool=function(e,t,i){this.isFontStylesToolVisible=e,this.applyHideToToolbar(e,t,i)},s.prototype.showColorEditTool=function(e,t,i){this.isColorToolVisible=e,this.applyHideToToolbar(e,t,i)},s.prototype.showStrokeColorEditTool=function(e,t,i){this.isStrokeColorToolVisible=e,this.applyHideToToolbar(e,t,i)},s.prototype.showThicknessEditTool=function(e,t,i){this.isThicknessToolVisible=e,this.applyHideToToolbar(e,t,i)},s.prototype.showOpacityEditTool=function(e,t,i){this.isOpacityToolVisible=e,this.applyHideToToolbar(e,t,i)},s.prototype.showAnnotationDeleteTool=function(e,t,i){this.isDeleteAnnotationToolVisible=e,this.applyHideToToolbar(e,t,i)},s.prototype.showCommentPanelTool=function(e,t,i){this.isCommentPanelBtnVisible=e,this.applyHideToToolbar(e,t,i)},s.prototype.applyHideToToolbar=function(e,t,i){for(var n=!e,o=t;o<=i;o++){var r=void 0,l=this.propertyToolbar&&this.propertyToolbar.element?this.propertyToolbar.element:null,d=this.toolbar&&this.toolbar.element?this.toolbar.element:null;if(d&&d.children&&d.children.length>0?r=this.toolbar:a.AR.isDevice&&l&&l.children&&l.children.length>0&&(r=this.propertyToolbar),r.items[o]){var h=r.items[o].cssClass;if(h&&""!==h){var p=r.element.querySelector("."+h);p&&this.toolbar.hideItem(p,n)}else r.hideItem(o,n)}}},s.prototype.adjustViewer=function(e){var t,i,n;if((0,a.xr)()){t=this.pdfViewer.element.querySelector(".e-pv-sidebar-toolbar-splitter"),i=this.pdfViewer.element.querySelector(".e-pv-toolbar");var o=this.pdfViewer.element.querySelector(".e-pv-annotation-toolbar");n=this.getToolbarHeight(o)}else t=this.pdfViewerBase.getElement("_sideBarToolbarSplitter"),i=this.pdfViewerBase.getElement("_toolbarContainer"),n=this.getToolbarHeight(this.toolbarElement);var r=this.getToolbarHeight(i),l=this.pdfViewerBase.navigationPane.sideBarToolbar,d=this.pdfViewerBase.navigationPane.sideBarContentContainer,h=this.pdfViewerBase.navigationPane.commentPanelContainer,p=this.pdfViewerBase.navigationPane.commentPanelResizer;e?(this.pdfViewer.enableToolbar?(l.style.top=r+n+"px",d.style.top=r+n+"px",t.style.top=r+n+"px",h.style.top=r+n+"px",p.style.top=r+n+"px"):(l.style.top=n+"px",d.style.top=n+"px",t.style.top=n+"px",h.style.top=n+"px",p.style.top=r+n+"px"),this.pdfViewer.enableToolbar||(r=0),this.pdfViewerBase.viewerContainer.style.height=this.updateViewerHeight(this.getElementHeight(this.pdfViewerBase.viewerContainer),n+r)+"px",l.style.height=this.getNavigationToolbarHeight(n+r)+"px",t.style.height=this.getNavigationToolbarHeight(n+r)+"px"):(this.pdfViewer.enableToolbar?(l.style.top=r+"px",d.style.top=r+"px",t.style.top=r+"px",h.style.top=r+"px",p.style.top=r+"px"):(l.style.top="1px",l.style.height="100%",d.style.top="1px",d.style.height="100%",t.style.top="1px",t.style.height="100%",h.style.top="1px",h.style.height="100%",p.style.top="1px",p.style.height="100%"),this.pdfViewer.enableToolbar||(r=0),this.pdfViewerBase.viewerContainer.style.height=this.resetViewerHeight(this.getElementHeight(this.pdfViewerBase.viewerContainer),n)+"px",l.style.height=this.getNavigationToolbarHeight(r),t.style.height=this.getNavigationToolbarHeight(r),"0px"===this.pdfViewerBase.viewerContainer.style.height&&(this.pdfViewerBase.viewerContainer.style.height=parseInt(this.pdfViewer.element.style.height)-parseInt(l.style.top)+"px")),(0,a.xr)()?this.updateContentContainerHeight(e,!0):this.updateContentContainerHeight(e)},s.prototype.updateContentContainerHeight=function(e,t){var i;if(t){var n=this.pdfViewer.element.querySelector(".e-pv-annotation-toolbar");i=this.getToolbarHeight(n)}else i=this.getToolbarHeight(this.toolbarElement);var o=this.pdfViewerBase.navigationPane.sideBarContentContainer.getBoundingClientRect();0!==o.height&&(this.pdfViewerBase.navigationPane.sideBarContentContainer.style.height=e?o.height-i+"px":o.height+i+"px")},s.prototype.getToolbarHeight=function(e){var t=e.getBoundingClientRect().height;return 0===t&&e===this.pdfViewerBase.getElement("_toolbarContainer")&&(t=parseFloat(window.getComputedStyle(e).height)+this.toolbarBorderHeight),t},s.prototype.getNavigationToolbarHeight=function(e){var t=this.pdfViewer.element.getBoundingClientRect().height;return 0!==t?t-e+"px":""},s.prototype.handleHighlight=function(){this.isHighlightEnabled?this.deselectAllItems():(this.updateInteractionTools(),this.clearShapeMode(),this.clearMeasureMode(),this.pdfViewer.annotationModule.textMarkupAnnotationModule.drawTextMarkupAnnotations("Highlight"),this.primaryToolbar.selectItem(this.highlightItem),this.primaryToolbar.deSelectItem(this.underlineItem),this.primaryToolbar.deSelectItem(this.strikethroughItem),this.primaryToolbar.deSelectItem(this.freeTextEditItem),this.primaryToolbar.deSelectItem(this.inkAnnotationItem),this.enableTextMarkupAnnotationPropertiesTools(!0),this.pdfViewer.annotationModule.textMarkupAnnotationModule.highlightColor=null,this.setCurrentColorInPicker(),this.updateColorInIcon(this.colorDropDownElement,this.pdfViewer.annotationModule.textMarkupAnnotationModule.highlightColor),this.isHighlightEnabled=!0,this.isUnderlineEnabled=!1,this.isStrikethroughEnabled=!1)},s.prototype.handleUnderline=function(){this.isUnderlineEnabled?this.deselectAllItems():(this.updateInteractionTools(),this.clearShapeMode(),this.clearMeasureMode(),this.pdfViewer.annotationModule.textMarkupAnnotationModule.drawTextMarkupAnnotations("Underline"),this.primaryToolbar.selectItem(this.underlineItem),this.primaryToolbar.deSelectItem(this.highlightItem),this.primaryToolbar.deSelectItem(this.strikethroughItem),this.primaryToolbar.deSelectItem(this.freeTextEditItem),this.primaryToolbar.deSelectItem(this.inkAnnotationItem),this.enableTextMarkupAnnotationPropertiesTools(!0),this.pdfViewer.annotationModule.textMarkupAnnotationModule.underlineColor=null,this.setCurrentColorInPicker(),this.updateColorInIcon(this.colorDropDownElement,this.pdfViewer.annotationModule.textMarkupAnnotationModule.underlineColor),this.isUnderlineEnabled=!0,this.isHighlightEnabled=!1,this.isStrikethroughEnabled=!1)},s.prototype.handleStrikethrough=function(){this.isStrikethroughEnabled?this.deselectAllItems():(this.updateInteractionTools(),this.clearShapeMode(),this.clearMeasureMode(),this.pdfViewer.annotationModule.textMarkupAnnotationModule.drawTextMarkupAnnotations("Strikethrough"),this.primaryToolbar.selectItem(this.strikethroughItem),this.primaryToolbar.deSelectItem(this.highlightItem),this.primaryToolbar.deSelectItem(this.underlineItem),this.primaryToolbar.deSelectItem(this.freeTextEditItem),this.primaryToolbar.deSelectItem(this.inkAnnotationItem),this.enableTextMarkupAnnotationPropertiesTools(!0),this.pdfViewer.annotationModule.textMarkupAnnotationModule.strikethroughColor=null,this.setCurrentColorInPicker(),this.updateColorInIcon(this.colorDropDownElement,this.pdfViewer.annotationModule.textMarkupAnnotationModule.strikethroughColor),this.isStrikethroughEnabled=!0,this.isHighlightEnabled=!1,this.isUnderlineEnabled=!1)},s.prototype.deselectAllItemsInBlazor=function(){this.pdfViewerBase.isTextMarkupAnnotationModule()&&(this.pdfViewer.annotationModule.textMarkupAnnotationModule.isTextMarkupAnnotationMode=!1,this.pdfViewer.annotationModule.textMarkupAnnotationModule.showHideDropletDiv(!0)),(!a.AR.isDevice||this.pdfViewer.enableDesktopMode)&&(this.primaryToolbar.deSelectItem(this.HighlightElement),this.primaryToolbar.deSelectItem(this.UnderlineElement),this.primaryToolbar.deSelectItem(this.StrikethroughElement),this.primaryToolbar.deSelectItem(this.FreeTextElement),this.primaryToolbar.deSelectItem(this.InkAnnotationElement),this.pdfViewer._dotnetInstance.invokeMethodAsync("UpdateTextMarkupButtons",!1,!1,!1)),this.resetFreeTextAnnot(),this.clearTextMarkupMode(),this.clearShapeMode(),this.clearMeasureMode(),this.pdfViewer.tool="",(!a.AR.isDevice||this.pdfViewer.enableDesktopMode)&&(this.enableTextMarkupAnnotationPropertiesTools(!1),this.enableFreeTextAnnotationPropertiesTools(!1),this.updateColorInIcon(this.colorDropDownElement,"#000000"),this.updateColorInIcon(this.strokeDropDownElement,"#000000"),this.updateColorInIcon(this.fontColorElement,"#000000"),this.selectAnnotationDeleteItem(!1)),this.pdfViewer.annotationModule&&(this.pdfViewer.annotationModule.freeTextAnnotationModule.isNewFreeTextAnnot=!1)},s.prototype.deselectAllItems=function(){var e=(0,a.xr)();this.isHighlightEnabled=!1,this.isUnderlineEnabled=!1,this.isStrikethroughEnabled=!1,this.pdfViewerBase.isTextMarkupAnnotationModule()&&(this.pdfViewer.annotationModule.textMarkupAnnotationModule.isTextMarkupAnnotationMode=!1,this.pdfViewer.annotationModule.textMarkupAnnotationModule.showHideDropletDiv(!0)),(!a.AR.isDevice||this.pdfViewer.enableDesktopMode)&&(e?(this.primaryToolbar.deSelectItem(this.pdfViewer.toolbar.SelectToolElement),this.primaryToolbar.selectItem(this.pdfViewer.toolbar.PanElement),this.primaryToolbar.deSelectItem(this.HighlightElement),this.primaryToolbar.deSelectItem(this.UnderlineElement),this.primaryToolbar.deSelectItem(this.StrikethroughElement),this.primaryToolbar.deSelectItem(this.FreeTextElement),this.primaryToolbar.deSelectItem(this.InkAnnotationElement)):(this.primaryToolbar.deSelectItem(this.highlightItem),this.primaryToolbar.deSelectItem(this.underlineItem),this.primaryToolbar.deSelectItem(this.strikethroughItem),this.primaryToolbar.deSelectItem(this.freeTextEditItem),this.primaryToolbar.deSelectItem(this.inkAnnotationItem))),this.resetFreeTextAnnot(),this.clearTextMarkupMode(),this.clearShapeMode(),this.clearMeasureMode(),this.pdfViewer.tool="",(!a.AR.isDevice||this.pdfViewer.enableDesktopMode)&&(this.enableTextMarkupAnnotationPropertiesTools(!1),this.enableFreeTextAnnotationPropertiesTools(!1),this.updateColorInIcon(this.colorDropDownElement,"#000000"),this.updateColorInIcon(this.strokeDropDownElement,"#000000"),this.updateColorInIcon(this.fontColorElement,"#000000"),this.selectAnnotationDeleteItem(!1)),this.pdfViewer.annotationModule&&(this.pdfViewer.annotationModule.freeTextAnnotationModule.isNewFreeTextAnnot=!1)},s.prototype.updateInteractionTools=function(){this.pdfViewer.enableTextSelection?(this.pdfViewerBase.initiateTextSelectMode(),a.AR.isDevice||this.pdfViewer.toolbar.updateInteractionTools(!0)):a.AR.isDevice||this.pdfViewer.toolbar.updateInteractionTools(!1)},s.prototype.selectAnnotationDeleteItem=function(e,t){if((0,a.xr)()||a.AR.isDevice)a.AR.isDevice&&!this.pdfViewer.enableDesktopMode||(e?(i=this.pdfViewer.annotationModule.findCurrentAnnotation())&&(i.annotationSettings&&i.annotationSettings.isLock?this.pdfViewer.annotationModule.checkAllowedInteractions("Delete",i)?this.pdfViewerBase.blazorUIAdaptor.EnableDeleteOption(e):this.pdfViewerBase.blazorUIAdaptor.EnableDeleteOption(!1):this.pdfViewerBase.blazorUIAdaptor&&this.pdfViewerBase.blazorUIAdaptor.EnableDeleteOption(e)):this.pdfViewerBase.blazorUIAdaptor&&this.pdfViewerBase.blazorUIAdaptor.EnableDeleteOption(e),t&&this.pdfViewerBase.focusViewerContainer());else if(this.toolbar)if(e){var i;(i=this.pdfViewer.annotationModule.findCurrentAnnotation())&&(i.annotationSettings&&i.annotationSettings.isLock?this.pdfViewer.annotationModule.checkAllowedInteractions("Delete",i)?this.toolbar.enableItems(this.deleteItem.parentElement,e):this.toolbar.enableItems(this.deleteItem.parentElement,!1):this.toolbar.enableItems(this.deleteItem.parentElement,e))}else this.toolbar.enableItems(this.deleteItem.parentElement,e)},s.prototype.enableTextMarkupAnnotationPropertiesTools=function(e){a.AR.isDevice||((0,a.xr)()?this.pdfViewerBase.blazorUIAdaptor.enableTextMarkupAnnotationPropertiesTools(e):(this.toolbar.enableItems(this.colorDropDownElement.parentElement,e),this.toolbar.enableItems(this.opacityDropDownElement.parentElement,e),(!a.AR.isDevice||this.pdfViewer.enableDesktopMode)&&(this.toolbar.enableItems(this.strokeDropDownElement.parentElement,!1),this.toolbar.enableItems(this.thicknessElement.parentElement,!1),this.toolbar.enableItems(this.fontFamilyElement.parentElement,!1),this.toolbar.enableItems(this.fontSizeElement.parentElement,!1),this.toolbar.enableItems(this.fontColorElement.parentElement,!1),this.toolbar.enableItems(this.textAlignElement.parentElement,!1),this.toolbar.enableItems(this.textPropElement.parentElement,!1))))},s.prototype.checkAnnotationPropertiesChange=function(){var e=this.pdfViewer.selectedItems.annotations[0];return!(e&&e.annotationSettings&&e.annotationSettings.isLock)||!!this.pdfViewer.annotationModule.checkAllowedInteractions("PropertyChange",e)},s.prototype.enableAnnotationPropertiesTools=function(e){if(!a.AR.isDevice){var t=this.checkAnnotationPropertiesChange();e||(t=!0),(0,a.xr)()?this.pdfViewerBase.blazorUIAdaptor.enableAnnotationPropertiesTool(e,t):t&&(this.toolbar.enableItems(this.colorDropDownElement.parentElement,(!this.pdfViewer.selectedItems.annotations[0]||"Line"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType)&&e),this.toolbar.enableItems(this.opacityDropDownElement.parentElement,e),this.toolbar.enableItems(this.strokeDropDownElement.parentElement,e),this.toolbar.enableItems(this.thicknessElement.parentElement,e),this.pdfViewer.enableShapeLabel&&(this.toolbar.enableItems(this.fontFamilyElement.parentElement,e),this.toolbar.enableItems(this.fontSizeElement.parentElement,e),this.toolbar.enableItems(this.fontColorElement.parentElement,e)),this.toolbar.enableItems(this.textAlignElement.parentElement,!1),this.toolbar.enableItems(this.textPropElement.parentElement,!1))}},s.prototype.enableSignaturePropertiesTools=function(e){if(!a.AR.isDevice){var t=this.checkAnnotationPropertiesChange();e||(t=!0),(0,a.xr)()?this.pdfViewerBase.blazorUIAdaptor.enableSignaturePropertiesTools(e,t):t&&(this.toolbar.enableItems(this.colorDropDownElement.parentElement,!1),this.toolbar.enableItems(this.opacityDropDownElement.parentElement,e),this.toolbar.enableItems(this.strokeDropDownElement.parentElement,e),this.toolbar.enableItems(this.thicknessElement.parentElement,e),this.toolbar.enableItems(this.textAlignElement.parentElement,!1),this.toolbar.enableItems(this.textPropElement.parentElement,!1),this.toolbar.enableItems(this.fontFamilyElement.parentElement,!1),this.toolbar.enableItems(this.fontSizeElement.parentElement,!1),this.toolbar.enableItems(this.fontColorElement.parentElement,!1),this.toolbar.enableItems(this.textAlignElement.parentElement,!1))}},s.prototype.enableStampAnnotationPropertiesTools=function(e){var t=this.checkAnnotationPropertiesChange();e||(t=!0),(0,a.xr)()?this.pdfViewerBase.blazorUIAdaptor.enableStampAnnotationPropertiesTools(e,t):t&&(this.toolbar.enableItems(this.opacityDropDownElement.parentElement,e),this.toolbar.enableItems(this.colorDropDownElement.parentElement,!1),this.toolbar.enableItems(this.strokeDropDownElement.parentElement,!1),this.toolbar.enableItems(this.thicknessElement.parentElement,!1),this.toolbar.enableItems(this.fontFamilyElement.parentElement,!1),this.toolbar.enableItems(this.fontSizeElement.parentElement,!1),this.toolbar.enableItems(this.fontColorElement.parentElement,!1),this.toolbar.enableItems(this.textAlignElement.parentElement,!1),this.toolbar.enableItems(this.textPropElement.parentElement,!1))},s.prototype.enableFreeTextAnnotationPropertiesTools=function(e){var t=this.checkAnnotationPropertiesChange();e||(t=!0),(0,a.xr)()?this.pdfViewerBase.blazorUIAdaptor.enableFreeTextAnnotationPropertiesTools(e,t):t&&(this.toolbar.enableItems(this.opacityDropDownElement.parentElement,e),this.toolbar.enableItems(this.colorDropDownElement.parentElement,e),this.toolbar.enableItems(this.strokeDropDownElement.parentElement,e),this.toolbar.enableItems(this.thicknessElement.parentElement,e),this.toolbar.enableItems(this.fontFamilyElement.parentElement,e),this.toolbar.enableItems(this.fontSizeElement.parentElement,e),this.toolbar.enableItems(this.fontColorElement.parentElement,e),this.toolbar.enableItems(this.textAlignElement.parentElement,e),this.toolbar.enableItems(this.textPropElement.parentElement,e))},s.prototype.enableAnnotationAddTools=function(e){this.toolbar&&!a.AR.isDevice&&(this.pdfViewer.enableTextMarkupAnnotation&&(this.toolbar.enableItems(this.highlightItem.parentElement,e),this.toolbar.enableItems(this.underlineItem.parentElement,e),this.toolbar.enableItems(this.strikethroughItem.parentElement,e)),this.pdfViewer.enableShapeAnnotation&&this.toolbar.enableItems(this.shapeElement.parentElement,e),this.pdfViewer.enableStampAnnotations&&this.toolbar.enableItems(this.stampElement.parentElement,e),this.pdfViewer.enableMeasureAnnotation&&this.pdfViewerBase.isCalibrateAnnotationModule()&&this.toolbar.enableItems(this.calibrateElement.parentElement,e),this.pdfViewer.enableFreeText&&this.toolbar.enableItems(this.freeTextEditItem.parentElement,e),this.pdfViewer.enableHandwrittenSignature&&this.toolbar.enableItems(this.handWrittenSignatureItem.parentElement,e),this.pdfViewer.enableInkAnnotation&&this.toolbar.enableItems(this.inkAnnotationItem.parentElement,e),this.pdfViewer.enableCommentPanel&&this.enableCommentPanelTool(e))},s.prototype.isAnnotationButtonsEnabled=function(){var e=!1;return(this.isHighlightEnabled||this.isUnderlineEnabled||this.isStrikethroughEnabled)&&(e=!0),e},s.prototype.enableCommentPanelTool=function(e){this.toolbar&&this.toolbar.enableItems(this.commentItem.parentElement,e)},s.prototype.updateToolbarItems=function(){this.enableTextMarkupAddTools(!!this.pdfViewer.enableTextMarkupAnnotation),this.toolbar.enableItems(this.shapeElement.parentElement,this.pdfViewer.enableShapeAnnotation),this.toolbar.enableItems(this.stampElement.parentElement,this.pdfViewer.enableStampAnnotations),this.toolbar.enableItems(this.calibrateElement.parentElement,this.pdfViewer.enableMeasureAnnotation),this.toolbar.enableItems(this.freeTextEditItem.parentElement,this.pdfViewer.enableFreeText),this.toolbar.enableItems(this.handWrittenSignatureItem.parentElement,this.pdfViewer.enableHandwrittenSignature),this.toolbar.enableItems(this.inkAnnotationItem.parentElement,this.pdfViewer.enableInkAnnotation)},s.prototype.enableTextMarkupAddTools=function(e){this.toolbar.enableItems(this.highlightItem.parentElement,e),this.toolbar.enableItems(this.underlineItem.parentElement,e),this.toolbar.enableItems(this.strikethroughItem.parentElement,e)},s.prototype.updateAnnnotationPropertyItems=function(){(0,a.xr)()?(this.colorDropDownElementInBlazor=this.pdfViewer.element.querySelector(".e-pv-annotation-color-container"),this.strokeDropDownElementInBlazor=this.pdfViewer.element.querySelector(".e-pv-annotation-stroke-container"),this.fontColorElementInBlazor=this.pdfViewer.element.querySelector(".e-pv-annotation-textcolor-container"),1===this.pdfViewer.selectedItems.annotations.length?(this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.colorDropDownElementInBlazor,this.getColorHexValue(this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.fill,"fillColor")),this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.strokeDropDownElementInBlazor,this.getColorHexValue(this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeColor,"strokeColor")),"FreeText"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&(this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.fontColorElementInBlazor,this.getColorHexValue(this.pdfViewer.selectedItems.annotations[0].fontColor,"fontColor")),this.pdfViewerBase.blazorUIAdaptor.updateFontFamilyInIcon(this.pdfViewer.selectedItems.annotations[0].fontFamily),this.pdfViewerBase.blazorUIAdaptor.updateFontSizeInIcon(this.pdfViewer.selectedItems.annotations[0].fontSize))):(this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.colorDropDownElementInBlazor,"#000000"),this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.strokeDropDownElementInBlazor,"#000000"),this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.fontColorElementInBlazor,"#000000"))):1===this.pdfViewer.selectedItems.annotations.length?(this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.colorDropDownElement,this.getColorHexValue(this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.fill,"fillColor")),this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.strokeDropDownElement,this.getColorHexValue(this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeColor,"strokeColor")),"FreeText"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&(this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.fontColorElement,this.getColorHexValue(this.pdfViewer.selectedItems.annotations[0].fontColor,"fontColor")),this.pdfViewer.toolbar.annotationToolbarModule.updateFontFamilyInIcon(this.pdfViewer.selectedItems.annotations[0].fontFamily),this.pdfViewer.toolbar.annotationToolbarModule.updateFontSizeInIcon(this.pdfViewer.selectedItems.annotations[0].fontSize),this.pdfViewer.toolbar.annotationToolbarModule.updateTextAlignInIcon(this.pdfViewer.selectedItems.annotations[0].textAlign))):(this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.colorDropDownElement,"#000000"),this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.strokeDropDownElement,"#000000"),this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.fontColorElement,"#000000"))},s.prototype.getColorHexValue=function(e,t){return"#ffffff00"===e&&(e="#ffffff"),"red"===e.toLowerCase()&&(e="#FF0000"),"transparent"!==e?(0,a.xr)()?e:this.colorPalette.getValue(e,"hex"):"fontColor"===t||"strokeColor"===t?"#000000":"#ffffff"},s.prototype.setColorInPicker=function(e,t){e&&e.setProperties({value:t},!0)},s.prototype.resetToolbar=function(){this.adjustViewer(!1),this.updateToolbarItems(),(this.pdfViewer.isAnnotationToolbarOpen||this.pdfViewer.isAnnotationToolbarVisible)&&this.pdfViewer.enableAnnotationToolbar?(this.toolbarElement.style.display="",this.isToolbarHidden=!1,this.adjustViewer(!0),this.enableAnnotationAddTools(!1),this.pdfViewer.isAnnotationToolbarVisible=!0):(this.toolbarElement.style.display="none",this.isToolbarHidden=!0,this.pdfViewer.isAnnotationToolbarVisible=!1)},s.prototype.clearTextMarkupMode=function(){this.pdfViewerBase.isTextMarkupAnnotationModule()&&((0,a.xr)()&&(this.pdfViewer.annotationModule.textMarkupAnnotationModule.isTextMarkupAnnotationMode=!1),this.pdfViewer.annotation.textMarkupAnnotationModule.currentTextMarkupAddMode="")},s.prototype.clearShapeMode=function(){this.pdfViewerBase.isShapeAnnotationModule()&&(this.pdfViewer.annotation.shapeAnnotationModule.currentAnnotationMode="")},s.prototype.clearMeasureMode=function(){this.pdfViewerBase.isCalibrateAnnotationModule()&&(this.pdfViewer.annotation.measureAnnotationModule.currentAnnotationMode="")},s.prototype.clear=function(){this.deselectAllItems()},s.prototype.destroy=function(){this.destroyComponent(),this.shapeDropDown&&this.shapeDropDown.destroy(),this.calibrateDropDown&&this.calibrateDropDown.destroy(),this.fontColorDropDown&&this.fontColorDropDown.destroy(),this.textAlignDropDown&&this.textAlignDropDown.destroy(),this.colorDropDown&&this.colorDropDown.destroy(),this.strokeDropDown&&this.strokeDropDown.destroy(),this.thicknessDropDown&&this.thicknessDropDown.destroy(),this.opacityDropDown&&this.opacityDropDown.destroy(),this.textPropertiesDropDown&&this.textPropertiesDropDown.destroy(),this.toolbar&&this.toolbar.destroy();var e=document.getElementById(this.pdfViewer.element.id+"_stampElement");e&&e.parentElement.removeChild(e)},s.prototype.destroyComponent=function(){for(var e=[this.highlightItem,this.underlineItem,this.strikethroughItem,this.lineElement,this.arrowElement,this.rectangleElement,this.circleElement,this.polygonElement,this.calibrateDistance,this.calibrateArea,this.calibrateRadius,this.calibrateVolume,this.calibratePerimeter,this.freeTextEditItem,this.stampElement,this.handWrittenSignatureItem,this.inkAnnotationItem,this.fontFamilyElement,this.fontSizeElement,this.alignLeftElement,this.alignRightElement,this.alignCenterElement,this.alignJustifyElement,this.boldElement,this.italicElement,this.fontStyleStrikethroughItem,this.fontStyleUnderlineItem,this.deleteItem,this.commentItem,this.shapeDropDown?this.shapeDropDown.activeElem[0]:null,this.calibrateDropDown?this.calibrateDropDown.activeElem[0]:null,this.fontColorDropDown?this.fontColorDropDown.activeElem[0]:null,this.textAlignDropDown?this.textAlignDropDown.activeElem[0]:null,this.colorDropDown?this.colorDropDown.activeElem[0]:null,this.strokeDropDown?this.strokeDropDown.activeElem[0]:null,this.thicknessDropDown?this.thicknessDropDown.activeElem[0]:null,this.opacityDropDown?this.opacityDropDown.activeElem[0]:null,this.textPropertiesDropDown?this.textPropertiesDropDown.activeElem[0]:null],t=0;t<e.length;t++)e[t]&&this.destroyDependentComponent(e[t])},s.prototype.destroyDependentComponent=function(e){if(e.ej2_instances)for(var t=e.ej2_instances.length-1;t>=0;t--)e.ej2_instances[t].destroy()},s.prototype.getElementHeight=function(e){try{return e.getBoundingClientRect().height}catch(t){return 0}},s.prototype.updateViewerHeight=function(e,t){return this.getElementHeight(this.pdfViewer.element)-t},s.prototype.resetViewerHeight=function(e,t){return e+t},s.prototype.afterAnnotationToolbarCreationInBlazor=function(){this.HighlightElement=document.getElementById(this.pdfViewer.element.id+"_highLight").children[0],this.UnderlineElement=document.getElementById(this.pdfViewer.element.id+"_underline").children[0],this.StrikethroughElement=document.getElementById(this.pdfViewer.element.id+"_strikethrough").children[0],this.InkAnnotationElement=document.getElementById(this.pdfViewer.element.id+"_annotation_ink").children[0],this.InkAnnotationElement.classList.add("e-pv-tbar-btn"),this.FreeTextElement=document.getElementById(this.pdfViewer.element.id+"_annotation_freeTextEdit").children[0],this.HighlightElement=this.addClassToToolbarInBlazor(this.HighlightElement,"e-pv-highlight","_highLight"),this.UnderlineElement=this.addClassToToolbarInBlazor(this.UnderlineElement,"e-pv-underline","_underline"),this.StrikethroughElement=this.addClassToToolbarInBlazor(this.StrikethroughElement,"e-pv-strikethrough","_strikethrough")},s.prototype.addClassToToolbarInBlazor=function(e,t,i){if(e.classList.add(t),e.classList.add("e-pv-tbar-btn"),e.childNodes.length>0){var n=e.childNodes[0];n&&n.classList&&(n.id=this.pdfViewer.element.id+i+"Icon",n.classList.remove("e-icons"),n.classList.remove("e-btn-icon"),this.pdfViewer.enableRtl&&n.classList.add("e-right"))}return e},s.prototype.handleHighlightInBlazor=function(){this.HighlightElement.classList.contains("e-pv-select")?this.primaryToolbar.deSelectItem(this.HighlightElement):this.HighlightElement.classList.contains("e-pv-select")||this.primaryToolbar.selectItem(this.HighlightElement),this.StrikethroughElement.classList.contains("e-pv-select")&&this.primaryToolbar.deSelectItem(this.StrikethroughElement),this.UnderlineElement.classList.contains("e-pv-select")&&this.primaryToolbar.deSelectItem(this.UnderlineElement)},s.prototype.handleUnderlineInBlazor=function(){this.UnderlineElement.classList.contains("e-pv-select")?this.primaryToolbar.deSelectItem(this.UnderlineElement):this.UnderlineElement.classList.contains("e-pv-select")||this.primaryToolbar.selectItem(this.UnderlineElement),this.StrikethroughElement.classList.contains("e-pv-select")&&this.primaryToolbar.deSelectItem(this.StrikethroughElement),this.HighlightElement.classList.contains("e-pv-select")&&this.primaryToolbar.deSelectItem(this.HighlightElement)},s.prototype.handleStrikethroughInBlazor=function(){this.StrikethroughElement.classList.contains("e-pv-select")?this.primaryToolbar.deSelectItem(this.StrikethroughElement):this.StrikethroughElement.classList.contains("e-pv-select")||this.primaryToolbar.selectItem(this.StrikethroughElement),this.HighlightElement.classList.contains("e-pv-select")&&this.primaryToolbar.deSelectItem(this.HighlightElement),this.UnderlineElement.classList.contains("e-pv-select")&&this.primaryToolbar.deSelectItem(this.UnderlineElement)},s.prototype.AnnotationSliderOpened=function(){this.pdfViewer.selectedItems.annotations&&this.pdfViewer.selectedItems.annotations.length>0&&this.pdfViewer.selectedItems.annotations[0]&&this.pdfViewer.selectedItems.annotations[0].wrapper&&this.pdfViewer.selectedItems.annotations[0].wrapper.children[0]&&this.pdfViewer._dotnetInstance.invokeMethodAsync("UpdateAnnotationSlider",100*this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.opacity,this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeWidth)},s.prototype.DropDownOpened=function(e){if(e&&e[0].element){var t=e[0].element.getBoundingClientRect(),i=this.pdfViewerBase.navigationPane.sideBarToolbar,n=i?i.getBoundingClientRect().width:0;t.left>this.pdfViewerBase.viewerContainer.clientWidth+t.width+n&&(e[0].element.style.left=t.left-this.pdfViewerBase.viewerContainer.clientHeight/2+"px")}},s}(),X=function(){var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])})(e,t)};return function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),w=function(s,e,t,i){var r,n=arguments.length,o=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(s,e,t,i);else for(var l=s.length-1;l>=0;l--)(r=s[l])&&(o=(n<3?r(o):n>3?r(e,t,o):r(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},_a=function(s,e,t,i){return new(t||(t=Promise))(function(n,o){function r(h){try{d(i.next(h))}catch(p){o(p)}}function l(h){try{d(i.throw(h))}catch(p){o(p)}}function d(h){h.done?n(h.value):new t(function(p){p(h.value)}).then(r,l)}d((i=i.apply(s,e||[])).next())})},za=function(s,e){var i,n,o,r,t={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(h){return function(p){return function(h){if(i)throw new TypeError("Generator is already executing.");for(;t;)try{if(i=1,n&&(o=2&h[0]?n.return:h[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,h[1])).done)return o;switch(n=0,o&&(h=[2&h[0],o.value]),h[0]){case 0:case 1:o=h;break;case 4:return t.label++,{value:h[1],done:!1};case 5:t.label++,n=h[1],h=[0];continue;case 7:h=t.ops.pop(),t.trys.pop();continue;default:if(!(o=(o=t.trys).length>0&&o[o.length-1])&&(6===h[0]||2===h[0])){t=0;continue}if(3===h[0]&&(!o||h[1]>o[0]&&h[1]<o[3])){t.label=h[1];break}if(6===h[0]&&t.label<o[1]){t.label=o[1],o=h;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(h);break}o[2]&&t.ops.pop(),t.trys.pop();continue}h=e.call(s,t)}catch(p){h=[6,p],n=0}finally{i=o=0}if(5&h[0])throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}([h,p])}}},LS=function(s){function e(t,i){var n=s.call(this,t,i)||this;return n.signatureCollection=[],n.fileName=null,n.zIndex=-1,n.nameTable={},n.clipboardData={},n.zIndexTable=[],n.isTextSelectionStarted=!1,n.touchPadding=10,n.defaultLocale={PdfViewer:"PDF Viewer",Cancel:"Cancel","Download file":"Download file",Download:"Download","Enter Password":"This document is password protected. Please enter a password.","File Corrupted":"File Corrupted","File Corrupted Content":"The file is corrupted and cannot be opened.","Fit Page":"Fit Page","Fit Width":"Fit Width",Automatic:"Automatic","Go To First Page":"Show first page","Invalid Password":"Incorrect Password. Please try again.","Next Page":"Show next page",OK:"OK",Open:"Open file","Page Number":"Current page number","Previous Page":"Show previous page","Go To Last Page":"Show last page",Zoom:"Zoom","Zoom In":"Zoom in","Zoom Out":"Zoom out","Page Thumbnails":"Page thumbnails",Bookmarks:"Bookmarks",Print:"Print file","Password Protected":"Password Required",Copy:"Copy","Text Selection":"Text selection tool",Panning:"Pan mode","Text Search":"Find text","Find in document":"Find in document","Match case":"Match case",Apply:"Apply",GoToPage:"Go to Page","No matches":"Viewer has finished searching the document. No more matches were found","No Text Found":"No Text Found",Undo:"Undo",Redo:"Redo",Annotation:"Add or Edit annotations",FormDesigner:"Add and Edit Form Fields",Highlight:"Highlight Text",Underline:"Underline Text",Strikethrough:"Strikethrough Text",Delete:"Delete annotation",Opacity:"Opacity","Color edit":"Change Color","Opacity edit":"Change Opacity","Highlight context":"Highlight","Underline context":"Underline","Strikethrough context":"Strikethrough","Server error":"Web-service is not listening. PDF Viewer depends on web-service for all it's features. Please start the web service to continue.","Client error":"Client-side error is found. Please check the custom headers provided in the AjaxRequestSettings property and web action methods in the ServerActionSettings property.","Open text":"Open","First text":"First Page","Previous text":"Previous Page","Next text":"Next Page","Last text":"Last Page","Zoom in text":"Zoom In","Zoom out text":"Zoom Out","Selection text":"Selection","Pan text":"Pan","Print text":"Print","Search text":"Search","Annotation Edit text":"Edit Annotation","FormDesigner Edit text":"Add and Edit Form Fields","Line Thickness":"Line Thickness","Line Properties":"Line Properties","Start Arrow":"Start Arrow","End Arrow":"End Arrow","Line Style":"Line Style","Fill Color":"Fill Color","Line Color":"Line Color",None:"None","Open Arrow":"Open","Closed Arrow":"Closed","Round Arrow":"Round","Square Arrow":"Square","Diamond Arrow":"Diamond",Butt:"Butt",Cut:"Cut",Paste:"Paste","Delete Context":"Delete",Properties:"Properties","Add Stamp":"Add Stamp","Add Shapes":"Add Shapes","Stroke edit":"Change Stroke Color","Change thickness":"Change Border Thickness","Add line":"Add Line","Add arrow":"Add Arrow","Add rectangle":"Add Rectangle","Add circle":"Add Circle","Add polygon":"Add Polygon","Add Comments":"Add Comments",Comments:"Comments",SubmitForm:"Submit Form","No Comments Yet":"No Comments Yet",Accepted:"Accepted",Completed:"Completed",Cancelled:"Cancelled",Rejected:"Rejected","Leader Length":"Leader Length","Scale Ratio":"Scale Ratio",Calibrate:"Calibrate","Calibrate Distance":"Calibrate Distance","Calibrate Perimeter":"Calibrate Perimeter","Calibrate Area":"Calibrate Area","Calibrate Radius":"Calibrate Radius","Calibrate Volume":"Calibrate Volume",Depth:"Depth",Closed:"Closed",Round:"Round",Square:"Square",Diamond:"Diamond",Edit:"Edit",Comment:"Comment","Comment Panel":"Comment Panel","Set Status":"Set Status",Post:"Post",Page:"Page","Add a comment":"Add a comment","Add a reply":"Add a reply","Import Annotations":"Import annotations from JSON file","Export Annotations":"Export annotation to JSON file","Export XFDF":"Export annotation to XFDF file","Import XFDF":"Import annotations from XFDF file",Add:"Add",Clear:"Clear",Bold:"Bold",Italic:"Italic",Strikethroughs:"Strikethrough",Underlines:"Underline",Superscript:"Superscript",Subscript:"Subscript","Align left":"Align Left","Align right":"Align Right",Center:"Center",Justify:"Justify","Font color":"Font Color","Text Align":"Text Align","Text Properties":"Font Style",SignatureFieldDialogHeaderText:"Add Signature",HandwrittenSignatureDialogHeaderText:"Add Signature",InitialFieldDialogHeaderText:"Add Initial",HandwrittenInitialDialogHeaderText:"Add Initial","Draw Ink":"Draw Ink",Create:"Create","Font family":"Font Family","Font size":"Font Size","Free Text":"Free Text","Import Failed":"Invalid JSON file type or file name; please select a valid JSON file","Import PDF Failed":"Invalid PDF file type or PDF file not found. Please select a valid PDF file","File not found":"Imported JSON file is not found in the desired location","Export Failed":"Export annotations action has failed; please ensure annotations are added properly",of:"of ",Dynamic:"Dynamic","Standard Business":"Standard Business","Sign Here":"Sign Here","Custom Stamp":"Custom Stamp","Enter Signature as Name":"Enter your name","Draw-hand Signature":"DRAW","Type Signature":"TYPE","Upload Signature":"UPLOAD","Browse Signature Image":"BROWSE","Save Signature":"Save Signature","Save Initial":"Save Initial",Textbox:"Textbox",Password:"Password","Check Box":"Checkbox","Radio Button":"Radio Button",Dropdown:"Drop Down","List Box":"List Box",Signature:"Signature","Delete FormField":"Delete Form Field","Textbox Properties":"Textbox Properties",Name:"Name",Tooltip:"Tooltip",Value:"Value","Form Field Visibility":"Form Field Visibility","Read Only":"Read Only",Required:"Required",Checked:"Checked","Show Printing":"Show Printing",Formatting:"Format",Fill:"Fill",Border:"Border","Border Color":"Border Color",Thickness:"Thickness","Max Length":"Max Length","List Item":"Item Name","Export Value":"Item Value","Dropdown Item List":"Dropdown Item List","List Box Item List":"List Box Item List",General:"GENERAL",Appearance:"APPEARANCE",Options:"OPTIONS","Delete Item":"Delete",Up:"Up",Down:"Down",Multiline:"Multiline",Revised:"Revised",Reviewed:"Reviewed",Received:"Received",Confidential:"Confidential",Approved:"Approved","Not Approved":"Not Approved",Witness:"Witness","Initial Here":"Initial Here",Draft:"Draft",Final:"Final","For Public Release":"For Public Release","Not For Public Release":"Not For Public Release","For Comment":"For Comment",Void:"Void","Preliminary Results":"Preliminary Results","Information Only":"Information Only",in:"in",m:"m",ft_in:"ft_in",ft:"ft",p:"p",cm:"cm",mm:"mm",pt:"pt",cu:"cu",sq:"sq",Initial:"Initial"},n.viewerBase=new kS(n),n.drawing=new Sb(n),n}return X(e,s),Object.defineProperty(e.prototype,"zoomPercentage",{get:function(){return 100*this.magnificationModule.zoomFactor},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bookmark",{get:function(){return this.bookmarkViewModule},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"print",{get:function(){return this.printModule},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"magnification",{get:function(){return this.magnificationModule},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"navigation",{get:function(){return this.navigationModule},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textSearch",{get:function(){return this.textSearchModule},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"toolbar",{get:function(){return this.toolbarModule},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"thumbnailView",{get:function(){return this.thumbnailViewModule},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"annotation",{get:function(){return this.annotationModule},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"formDesigner",{get:function(){return this.formDesignerModule},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textSelection",{get:function(){return this.textSelectionModule},enumerable:!0,configurable:!0}),e.prototype.preRender=function(){this.localeObj=new a.E7(this.getModuleName(),this.defaultLocale,this.locale),a.AR.isDevice&&(this.touchPadding=16)},e.prototype.render=function(){this.viewerBase.initializeComponent(),this.enableFormFields||(this.formFieldsModule=new Dh(this,this.viewerBase),this.formFieldsModule.formFieldsReadOnly(this.enableFormFields)),this.enableTextSelection&&this.textSelectionModule?this.textSelectionModule.enableTextSelectionMode():this.viewerBase.disableTextSelectionMode(),this.drawing.renderLabels(this),this.renderComplete()},e.prototype.getModuleName=function(){return"PdfViewer"},e.prototype.getLocaleConstants=function(){return this.defaultLocale},e.prototype.setJsonData=function(t){this.viewerBase.ajaxData=t},e.prototype.onPropertyChanged=function(t,i){if(!this.isDestroyed)for(var o=0,r=Object.keys(t);o<r.length;o++){var l=r[o];switch(l){case"locale":if(this.viewerBase.loadedData){var d=null;if(this.formFieldsModule&&(d=this.viewerBase.getItemFromSessionStorage("_formfields")),d){this.viewerBase.formfieldvalue=JSON.parse(d);var h=this.annotationCollection,p=this.viewerBase.jsonDocumentId;s.prototype.refresh.call(this),this.load(this.viewerBase.loadedData,null),this.addAnnotation(h),this.viewerBase.loadedData=null,this.downloadFileName=p,this.fileName=p}}break;case"enableToolbar":this.notify("",{module:"toolbar",enable:this.enableToolbar});break;case"enableCommentPanel":this.notify("",{module:"annotation",enable:this.enableCommentPanel}),this.toolbarModule&&this.toolbarModule.annotationToolbarModule&&this.toolbarModule.annotationToolbarModule.enableCommentPanelTool(this.enableCommentPanel),this.enableCommentPanel||this.viewerBase.navigationPane&&this.viewerBase.navigationPane.closeCommentPanelContainer();break;case"documentPath":(0,a.xr)()?this._dotnetInstance.invokeMethodAsync("LoadDocumentFromClient",t.documentPath):this.load(t.documentPath,null);break;case"interactionMode":this.interactionMode=t.interactionMode,"Pan"===t.interactionMode?(this.viewerBase.initiatePanning(),this.toolbar&&this.toolbar.updateInteractionTools(!1)):"TextSelection"===t.interactionMode&&(this.viewerBase.initiateTextSelectMode(),this.toolbar&&this.toolbar.updateInteractionTools(!0));break;case"height":this.height=t.height,this.viewerBase.updateHeight(),this.viewerBase.onWindowResize(),this.toolbar&&this.toolbar.annotationToolbarModule&&this.toolbar.annotationToolbarModule.adjustViewer(!this.toolbar.annotationToolbarModule.isToolbarHidden);break;case"width":this.width=t.width,this.viewerBase.updateWidth(),this.viewerBase.onWindowResize();break;case"customStamp":this.renderCustomerStamp(this.customStamp[0]);break;case"customStampSettings":t.customStampSettings.customStamps&&this.renderCustomerStamp(this.customStampSettings.customStamps[0]);break;case"enableFormFields":if(this.enableFormFields&&this.formFieldsModule)for(var f=0;f<this.pageCount;f++)this.formFieldsModule.renderFormFields(f);else this.formFieldsModule=new Dh(this,this.viewerBase),this.formFieldsModule.formFieldsReadOnly(this.enableFormFields);break;case"designerMode":this.formDesignerModule.setMode(this.designerMode?"designer":"edit");break;case"highlightSettings":case"underlineSettings":case"strikethroughSettings":this.annotationModule&&this.annotationModule.textMarkupAnnotationModule&&this.annotationModule.textMarkupAnnotationModule.updateTextMarkupSettings(l);break;case"signatureFieldSettings":case"initialFieldSettings":this.formDesignerModule&&this.formDesignerModule.updateSignatureSettings(t[l],"initialFieldSettings"===l);break;case"textFieldSettings":this.formDesignerModule&&this.formDesignerModule.updateTextFieldSettings(t[l]);break;case"passwordFieldSettings":this.formDesignerModule&&this.formDesignerModule.updatePasswordFieldSettings(t[l]);break;case"checkBoxFieldSettings":this.formDesignerModule&&this.formDesignerModule.updateCheckBoxFieldSettings(t[l]);break;case"radioButtonFieldSettings":this.formDesignerModule&&this.formDesignerModule.updateRadioButtonFieldSettings(t[l]);break;case"DropdownFieldSettings":this.formDesignerModule&&this.formDesignerModule.updateDropDownFieldSettings(t[l]);break;case"listBoxFieldSettings":this.formDesignerModule&&this.formDesignerModule.updateListBoxFieldSettings(t[l])}}},e.prototype.renderCustomerStamp=function(t){this.annotation.stampAnnotationModule.isStampAddMode=!0,this.annotationModule.stampAnnotationModule.isStampAnnotSelected=!0,this.viewerBase.stampAdded=!0,this.viewerBase.isAlreadyAdded=!1,this.annotation.stampAnnotationModule.createCustomStampAnnotation(t.customStampImageSource,t.customStampName)},e.prototype.getPersistData=function(){return"PdfViewer"},e.prototype.requiredModules=function(){var t=[];return this.enableMagnification&&t.push({member:"Magnification",args:[this,this.viewerBase]}),this.enableNavigation&&t.push({member:"Navigation",args:[this,this.viewerBase]}),(this.enableToolbar||this.enableNavigationToolbar||this.enableAnnotationToolbar||this.enableFormDesignerToolbar)&&t.push({member:"Toolbar",args:[this,this.viewerBase]}),this.enableHyperlink&&t.push({member:"LinkAnnotation",args:[this,this.viewerBase]}),this.enableThumbnail&&t.push({member:"ThumbnailView",args:[this,this.viewerBase]}),this.enableBookmark&&t.push({member:"BookmarkView",args:[this,this.viewerBase]}),this.enableTextSelection&&t.push({member:"TextSelection",args:[this,this.viewerBase]}),this.enableTextSearch&&t.push({member:"TextSearch",args:[this,this.viewerBase]}),this.enablePrint&&t.push({member:"Print",args:[this,this.viewerBase]}),this.enableAnnotation&&t.push({member:"Annotation",args:[this,this.viewerBase]}),this.enableFormFields&&t.push({member:"FormFields",args:[this,this.viewerBase]}),this.enableFormDesigner&&!(0,a.xr)()&&t.push({member:"FormDesigner",args:[this,this.viewerBase]}),t},e.prototype.load=function(t,i){this.viewerBase.clear(0!==this.pageCount),this.pageCount=0,this.currentPageNumber=0,(0,a.xr)()?this.viewerBase.blazorUIAdaptor.resetToolbar():this.toolbarModule&&this.toolbarModule.resetToolbar(),this.viewerBase.initiatePageRender(t,i)},e.prototype.loadDocument=function(t,i,n){this.viewerBase.clear(0!==this.pageCount),this.pageCount=0,this.currentPageNumber=0,this.viewerBase.blazorUIAdaptor.resetToolbar(),this.fileName=n,this.viewerBase.initiateLoadDocument(t,i,n)},e.prototype.loadSuccess=function(t,i){this.viewerBase.loadSuccess(t,i)},e.prototype.focusElement=function(t){var i=document.getElementById(t);null!=i&&i.focus()},e.prototype.download=function(){this.enableDownload&&this.viewerBase.download()},e.prototype.saveAsBlob=function(){var t=this;return this.enableDownload?new Promise(function(i,n){i(t.viewerBase.saveAsBlob())}):null},e.prototype.updateViewerContainer=function(){this.viewerBase.updateViewerContainer()},e.prototype.showNotificationPopup=function(t){this.viewerBase.showNotificationPopup(t)},e.prototype.focusFormField=function(t){if("string"==typeof t)for(var i=this.retrieveFormFields(),n=0;n<i.length;n++)i[n].name===t&&(t=i[n]);if(t){this.viewerBase.isFocusField=!0,this.viewerBase.focusField=t;var o=document.getElementById(t.id);if(this.formDesignerModule)this.navigationModule.goToPage(t.pageIndex+1);else{var r=parseFloat(t.id.split("_")[1]);this.navigationModule.goToPage(r+1)}if(o){if("SignatureField"!==t.type&&"InitialField"!==t.type||!this.formDesignerModule)o.focus();else{var l=t.bounds.y,d=this.viewerBase.getPageHeight(t.pageIndex);this.bookmark.goToBookmark(t.pageIndex,d-l)}this.viewerBase.isFocusField=!1,this.viewerBase.focusField=[]}}},e.prototype.updateFormFieldsValue=function(t){var i=document.getElementById(t.id),n=!1;if(i)if((i=i||document.getElementById(t.id+"_content_html_element").children[0].children[0])&&"Textbox"===t.type||"Password"===t.type?i.value=t.value:"Checkbox"===t.type||"RadioButton"===t.type||"CheckBox"===t.type?("CheckBox"===t.type&&(i.style.appearance="auto"),this.formDesignerModule?this.formDesignerModule.updateFormField(t,"RadioButton"===t.type?{isSelected:t.isSelected}:{isChecked:t.isChecked}):"RadioButton"===t.type?i.selected=t.isSelected:i.checked=t.isChecked):"DropDown"!==t.type&&"ListBox"!==t.type&&"DropdownList"!==t.type||(this.formDesignerModule?(n=!0,this.formDesignerModule.updateFormField(t,{options:t.value})):i.value=t.value),"SignatureField"===t.type||"InitialField"===t.type){t.signatureType="string"==typeof t.signatureType?t.signatureType:t.signatureType[0],t.fontName=t.fontName?t.fontName:t.fontFamily;var d=t.value,h=this.getFormFieldByID(t.id),p=this.formDesignerModule?h.value===t.value:h.Value===t.value;i.classList.contains("e-pdfviewer-signatureformfields-signature")&&!p&&this.annotation.deleteAnnotationById(this.formDesignerModule?t.id.split("_")[0]+"_content":t.id),(!t.signatureType||!t.value)&&(t.value=d,t.signatureType=t.value.indexOf("base64")>-1?"Image":t.value.startsWith("M")&&t.value.split(",")[1].split(" ")[1].startsWith("L")?"Path":"Type"),p||this.formFieldsModule.drawSignature(t.signatureType,t.value,i,t.fontName)}else n||this.formFieldsModule.updateDataInSession(i);else{var f=this.viewerBase.getItemFromSessionStorage("_formfields");if(f)for(var c=JSON.parse(f),u=0;u<c.length;u++){var m=c[u];if(("Checkbox"===t.type||"RadioButton"===t.type||"CheckBox"===t.type?m.GroupName:"DropDown"===t.type||"ListBox"===t.type||"DropdownList"===t.type?m.Text:m.FieldName)===t.name){if("Textbox"===t.type||"Password"===t.type)t.value&&(m.Text=t.value,m.Value=t.value);else if("Checkbox"===t.type||"RadioButton"===t.type||"CheckBox"===t.type)m.Selected=!(!t.isSelected&&!t.isChecked);else if("DropDown"===t.type||"ListBox"===t.type||"DropdownList"===t.type){m.SelectedValue=t.value;var v=m.TextList?m.TextList.indexOf(t.value):0;m.selectedIndex=v>-1?v:0,"ListBox"===t.type&&(m.SelectedListed=[m.selectedIndex])}else("SignatureField"===t.type||"InitialField"===t.type)&&t.value&&(m.Value=t.value,m=this.updateSignatureValue(m,t));this.formFieldsModule.updateFormFieldsCollection(m)}}window.sessionStorage.removeItem(this.viewerBase.documentId+"_formfields"),this.viewerBase.setItemInSessionStorage(c,"_formfields")}},e.prototype.getFormFieldByID=function(t){if(this.formDesignerModule)return this.nameTable[t.split("_")[0]];var i=window.sessionStorage.getItem(this.viewerBase.documentId+"_formfields"),n=JSON.parse(i);return n[n.findIndex(function(o){return o.uniqueID===t})]},e.prototype.ConvertPointToPixel=function(t){return t*(96/72)},e.prototype.updateSignatureValue=function(t,i){i.signatureType&&(i.signatureType=i.signatureType[0]),i.signatureType||(i.signatureType=i.value.indexOf("base64")>-1?"Image":i.value.startsWith("M")&&i.split(",")[1].split(" ")[1].startsWith("L")?"Path":"Type");var h,n=t.LineBounds,o=this.ConvertPointToPixel(n.X),r=this.ConvertPointToPixel(n.Y),l=this.ConvertPointToPixel(n.Width),d=this.ConvertPointToPixel(n.Height);if("Type"===i.signatureType){t.FontFamily||(t.FontFamily="Helvetica"),h=this.formFieldsModule.getSignBounds(t.pageIndex,t.RotationAngle,t.pageIndex,this.viewerBase.getZoomFactor(),o,r,l,d),"Default"===this.signatureFitMode&&(h=this.formFieldsModule.getDefaultBoundsforSign(h)),t.Bounds=h;var p=h.height/1.35,f=this.formFieldsModule.getTextWidth(t.value,p,t.FontFamily),c=1;f>h.width&&(c=h.width/f),t.FontSize=this.formFieldsModule.getFontSize(Math.floor(p*c))}else if("Image"===i.signatureType){h=this.formFieldsModule.getSignBounds(t.pageIndex,t.RotationAngle,t.pageIndex,this.viewerBase.getZoomFactor(),o,r,l,d);var u=new Image;if(u.src=t.Value,"Default"===this.signatureFitMode){if(Math.abs(u.height-u.width)<20)h.width>h.height?(h.x=h.x+h.width/2-h.height/2,h.width=h.height):(h.y=h.y+h.height/2-h.width/2,h.height=h.width);else if(h.width>h.height){h.y=h.y+h.height/4,h.x=h.x+h.height/4;var y=h.height/2;h={x:h.x,y:h.y,width:h.width-y,height:h.height-y}}else h.y=h.y+h.height/4,h.height=h.height/2;t.Bounds=h}}else{if(-1!==t.Value.indexOf("base64"))h=this.formFieldsModule.getSignBounds(t.pageIndex,t.RotationAngle,t.pageIndex,this.viewerBase.getZoomFactor(),o,r,l,d),"Default"===this.signatureFitMode&&(h=this.formFieldsModule.getDefaultBoundsforSign(h));else if("Default"===this.signatureFitMode){var b=this.formFieldsModule.updateSignatureAspectRatio(t.Value,!1,null,t);(h=this.formFieldsModule.getSignBounds(t.pageIndex,t.RotationAngle,t.pageIndex,this.viewerBase.getZoomFactor(),o,r,b.width,b.height,!0)).x=h.x+b.left,h.y=h.y+b.top}else h=this.formFieldsModule.getSignBounds(t.pageIndex,t.RotationAngle,t.pageIndex,this.viewerBase.getZoomFactor(),o,r,l,d);t.Bounds=h}return t},e.prototype.undo=function(){this.annotationModule&&this.annotationModule.undo()},e.prototype.redo=function(){this.annotationModule&&this.annotationModule.redo()},e.prototype.unload=function(){this.viewerBase.clear(!0),this.pageCount=0,(0,a.xr)()?this.viewerBase.blazorUIAdaptor.resetToolbar():this.toolbarModule&&(this.viewerBase.pageCount=0,this.toolbarModule.resetToolbar()),this.magnificationModule.zoomTo(100)},e.prototype.destroy=function(){s.prototype.destroy.call(this),(0,a.le)(this.element)||(this.refreshing||this.element.classList.remove("e-pdfviewer"),this.element.innerHTML=""),this.viewerBase.navigationPane&&(this.viewerBase.navigationPane.restrictUpdateZoomValue=!1),this.viewerBase.destroy(),this.viewerBase.navigationPane&&(this.viewerBase.navigationPane.restrictUpdateZoomValue=!0)},e.prototype.importAnnotation=function(t,i){if(this.annotationModule)if("string"==typeof t){var n=t.indexOf(".xfdf")>-1||i.indexOf("Xfdf")>-1;i?t.indexOf("</xfdf>")>-1?this.viewerBase.importAnnotations(t,i,!1):this.viewerBase.importAnnotations(t,i,n):"json"===t.split(".")[1]?this.viewerBase.importAnnotations(t,Lt.Json):this.viewerBase.importAnnotations(t,Lt.Xfdf,n)}else this.viewerBase.importAnnotations(t)},e.prototype.exportAnnotation=function(t){this.annotationModule&&this.viewerBase.exportAnnotations(t&&"Xfdf"===t?Lt.Xfdf:Lt.Json)},e.prototype.exportAnnotationsAsObject=function(){var t=this;return this.annotationModule?new Promise(function(i,n){t.viewerBase.exportAnnotationsAsObject().then(function(o){var r=JSON.parse(o),l=JSON.stringify(r);i(l)})}):null},e.prototype.exportAnnotationsAsBase64String=function(t){var i=this;return this.annotationModule?new Promise(function(n,o){i.viewerBase.createRequestForExportAnnotations(!1,t,!0).then(function(r){n(r)})}):null},e.prototype.addAnnotation=function(t){this.viewerBase&&this.viewerBase.addAnnotation(t)},e.prototype.importFormFields=function(t){this.formFieldsModule&&this.viewerBase.importFormFields(t)},e.prototype.exportFormFields=function(t){this.formFieldsModule&&this.viewerBase.exportFormFields(t)},e.prototype.exportFormFieldsAsObject=function(){var t=this;return this.formFieldsModule?new Promise(function(i,n){t.viewerBase.exportFormFieldsAsObject().then(function(o){i(o)})}):null},e.prototype.resetFormFields=function(){this.formFieldsModule.resetFormFields()},e.prototype.clearFormFields=function(t){this.formFieldsModule.clearFormFields(t)},e.prototype.deleteAnnotations=function(){this.annotationModule&&this.viewerBase.deleteAnnotations()},e.prototype.retrieveFormFields=function(){return this.formFieldCollections},e.prototype.updateFormFields=function(t){this.updateFormFieldsValue(t),this.formFieldsModule.updateFormFieldValues(t)},e.prototype.fireAjaxRequestInitiate=function(t){this.trigger("ajaxRequestInitiate",{name:"ajaxRequestInitiate",JsonData:t})},e.prototype.fireButtonFieldClickEvent=function(t,i,n){this.trigger("buttonFieldClick",{name:"buttonFieldClicked",buttonFieldValue:t,buttonFieldName:i,id:n})},e.prototype.fireFormFieldClickEvent=function(t,i,n,o){return _a(this,void 0,void 0,function(){var r,l;return za(this,function(d){switch(d.label){case 0:return r={name:t,field:i,cancel:n},(0,a.xr)()?[4,this.triggerEvent("formFieldClick",r)]:[3,2];case 1:return(r=d.sent()||r).field.type=i.type,[3,3];case 2:this.triggerEvent("formFieldClick",r),d.label=3;case 3:return("SignatureField"===i.type||"InitialField"===i.type)&&(this.viewerBase.isInitialField="InitialField"===i.type,"hidden"===(l=document.getElementById(i.id)).style.visibility&&(l.disabled=!0),l=l||(document.getElementById(i.id+"_content_html_element")?document.getElementById(i.id+"_content_html_element").children[0].children[0]:null),!this.signatureFieldSettings.isReadOnly&&!r.cancel&&l&&!l.disabled&&l.classList.contains("e-pdfviewer-signatureformfields")&&(o||(0,a.le)(o))&&this.viewerBase.signatureModule.showSignatureDialog(!0)),[2]}})})},e.prototype.fireFormFieldAddEvent=function(t,i,n){var o={name:t,field:i,pageIndex:n};this.viewerBase.isFormFieldSelect=!1,this.trigger("formFieldAdd",o)},e.prototype.fireFormFieldRemoveEvent=function(t,i,n){this.trigger("formFieldRemove",{name:t,field:i,pageIndex:n})},e.prototype.fireFormFieldDoubleClickEvent=function(t){return this.trigger("formFieldDoubleClick",t),t},e.prototype.fireFormFieldPropertiesChangeEvent=function(t,i,n,o,r,l,d,h,p,f,c,u,m,g,v,y,b,C,S,x,V){var T={name:t,field:i,pageIndex:n,isValueChanged:o,isFontFamilyChanged:r,isFontSizeChanged:l,isFontStyleChanged:d,isColorChanged:h,isBackgroundColorChanged:p,isBorderColorChanged:f,isBorderWidthChanged:c,isAlignmentChanged:u,isReadOnlyChanged:m,isVisibilityChanged:g,isMaxLengthChanged:v,isRequiredChanged:y,isPrintChanged:b,isToolTipChanged:C,oldValue:S,newValue:x,isNameChanged:!(0,a.le)(V)&&V};this.trigger("formFieldPropertiesChange",T)},e.prototype.fireFormFieldMouseLeaveEvent=function(t,i,n){this.trigger("formFieldMouseLeave",{name:t,field:i,pageIndex:n})},e.prototype.fireFormFieldMouseoverEvent=function(t,i,n,o,r,l,d){this.trigger("formFieldMouseover",{name:t,field:i,pageIndex:n,pageX:o,pageY:r,X:l,Y:d})},e.prototype.fireFormFieldMoveEvent=function(t,i,n,o,r){this.trigger("formFieldMove",{name:t,field:i,pageIndex:n,previousPosition:o,currentPosition:r})},e.prototype.fireFormFieldResizeEvent=function(t,i,n,o,r){this.trigger("formFieldResize",{name:t,field:i,pageIndex:n,previousPosition:o,currentPosition:r})},e.prototype.fireFormFieldSelectEvent=function(t,i,n,o){this.trigger("formFieldSelect",{name:t,field:i,pageIndex:n,isProgrammaticSelection:o})},e.prototype.fireFormFieldUnselectEvent=function(t,i,n){this.trigger("formFieldUnselect",{name:t,field:i,pageIndex:n})},e.prototype.fireDocumentLoad=function(t){this.trigger("documentLoad",{name:"documentLoad",documentName:this.fileName,pageData:t}),(0,a.xr)()&&(this._dotnetInstance.invokeMethodAsync("LoadDocument",null),this.viewerBase.blazorUIAdaptor.loadDocument())},e.prototype.fireDocumentUnload=function(t){this.trigger("documentUnload",{name:"documentUnload",documentName:t})},e.prototype.fireDocumentLoadFailed=function(t,i){this.trigger("documentLoadFailed",{name:"documentLoadFailed",documentName:this.fileName,isPasswordRequired:t,password:i})},e.prototype.fireAjaxRequestFailed=function(t,i,n,o){var r={name:"ajaxRequestFailed",documentName:this.fileName,errorStatusCode:t,errorMessage:i,action:n};o&&(r.retryCount=!0),this.trigger("ajaxRequestFailed",r)},e.prototype.fireAjaxRequestSuccess=function(t,i){var n={name:"ajaxRequestSuccess",documentName:this.fileName,action:t,data:i,cancel:!1};return this.trigger("ajaxRequestSuccess",n),!!n.cancel},e.prototype.fireValidatedFailed=function(t){var i;(0,a.xr)()?((i={}).documentName=this.fileName,i.formFields=this.formFieldCollections,i.nonFillableFields=this.viewerBase.nonFillableFields,this.trigger("validateFormFields",i)):this.trigger("validateFormFields",i={formField:this.formFieldCollections,documentName:this.fileName,nonFillableFields:this.viewerBase.nonFillableFields})},e.prototype.firePageClick=function(t,i,n){this.trigger("pageClick",{name:"pageClick",documentName:this.fileName,x:t,y:i,pageNumber:n})},e.prototype.firePageChange=function(t){this.trigger("pageChange",{name:"pageChange",documentName:this.fileName,currentPageNumber:this.currentPageNumber,previousPageNumber:t}),(0,a.xr)()&&this.viewerBase.blazorUIAdaptor.pageChanged(this.currentPageNumber)},e.prototype.fireZoomChange=function(){this.trigger("zoomChange",{name:"zoomChange",zoomValue:100*this.magnificationModule.zoomFactor,previousZoomValue:100*this.magnificationModule.previousZoomFactor})},e.prototype.fireHyperlinkClick=function(t,i){return _a(this,void 0,void 0,function(){var n;return za(this,function(o){switch(o.label){case 0:return n={name:"hyperlinkClick",hyperlink:t,hyperlinkElement:i,cancel:!1},(0,a.xr)()?[4,this.triggerEvent("hyperlinkClick",n)]:[3,2];case 1:return n=o.sent()||n,[3,3];case 2:this.triggerEvent("hyperlinkClick",n),o.label=3;case 3:return n.hyperlinkElement.href!=n.hyperlink&&(i.href=n.hyperlink),n.cancel?[2,!1]:[2,!0]}})})},e.prototype.fireHyperlinkHover=function(t){this.trigger("hyperlinkMouseOver",{name:"hyperlinkMouseOver",hyperlinkElement:t})},e.prototype.fireFocusOutFormField=function(t,i){this.trigger("formFieldFocusOut",{name:"formFieldFocusOut",fieldName:t,value:i})},e.prototype.fireAnnotationAdd=function(t,i,n,o,r,l,d,h,p,f,c){var u={name:"annotationAdd",pageIndex:t,annotationId:i,annotationType:n,annotationBound:o,annotationSettings:r};l&&((0,a.xr)()?(u.annotationSettings.textMarkupContent=l,u.annotationSettings.textMarkupStartIndex=d,u.annotationSettings.textMarkupEndIndex=h):(u.textMarkupContent=l,u.textMarkupStartIndex=d,u.textMarkupEndIndex=h)),p&&(u.labelSettings=p),f&&(u.multiplePageCollection=f),"Image"===n&&(u.customStampName=c),this.viewerBase.isAnnotationSelect=!1,this.trigger("annotationAdd",u),(0,a.xr)()&&this.viewerBase.blazorUIAdaptor.annotationAdd()},e.prototype.fireAnnotationRemove=function(t,i,n,o,r,l,d,h){var p={name:"annotationRemove",pageIndex:t,annotationId:i,annotationType:n,annotationBounds:o};r&&(p.textMarkupContent=r,p.textMarkupStartIndex=l,p.textMarkupEndIndex=d),h&&(p.multiplePageCollection=h),this.trigger("annotationRemove",p)},e.prototype.fireBeforeAddFreeTextAnnotation=function(t){this.trigger("beforeAddFreeText",{name:"beforeAddFreeText",value:t})},e.prototype.fireCommentAdd=function(t,i,n){this.trigger("commentAdd",{name:"CommentAdd",id:t,text:i,annotation:n})},e.prototype.fireCommentEdit=function(t,i,n){this.trigger("commentEdit",{name:"CommentEdit",id:t,text:i,annotation:n})},e.prototype.fireCommentDelete=function(t,i,n){this.trigger("commentDelete",{name:"CommentDelete",id:t,text:i,annotation:n})},e.prototype.fireCommentSelect=function(t,i,n){this.trigger("commentSelect",{name:"CommentSelect",id:t,text:i,annotation:n})},e.prototype.fireCommentStatusChanged=function(t,i,n,o){this.trigger("commentStatusChanged",{name:"CommentStatusChanged",id:t,text:i,annotation:n,status:o})},e.prototype.fireAnnotationPropertiesChange=function(t,i,n,o,r,l,d,h,p,f,c){var u={name:"annotationPropertiesChange",pageIndex:t,annotationId:i,annotationType:n,isColorChanged:o,isOpacityChanged:r,isTextChanged:l,isCommentsChanged:d};h&&(u.textMarkupContent=h,u.textMarkupStartIndex=p,u.textMarkupEndIndex=f),c&&(u.multiplePageCollection=c),this.trigger("annotationPropertiesChange",u)},e.prototype.fireSignatureAdd=function(t,i,n,o,r,l,d,h){var p={pageIndex:t,id:i,type:n,bounds:o,opacity:r};d&&(p.thickness=d),l&&(p.strokeColor=l),h&&(p.data=h),this.trigger("addSignature",p)},e.prototype.fireSignatureRemove=function(t,i,n,o){this.trigger("removeSignature",{pageIndex:t,id:i,type:n,bounds:o})},e.prototype.fireSignatureMove=function(t,i,n,o,r,l,d,h){this.trigger("moveSignature",{pageIndex:t,id:i,type:n,opacity:o,strokeColor:r,thickness:l,previousPosition:d,currentPosition:h})},e.prototype.fireSignaturePropertiesChange=function(t,i,n,o,r,l,d,h){this.trigger("signaturePropertiesChange",{pageIndex:t,id:i,type:n,isStrokeColorChanged:o,isOpacityChanged:r,isThicknessChanged:l,oldValue:d,newValue:h})},e.prototype.fireSignatureResize=function(t,i,n,o,r,l,d,h){this.trigger("resizeSignature",{pageIndex:t,id:i,type:n,opacity:o,strokeColor:r,thickness:l,currentPosition:d,previousPosition:h})},e.prototype.fireSignatureSelect=function(t,i,n){this.trigger("signatureSelect",{id:t,pageIndex:i,signature:n})},e.prototype.fireAnnotationSelect=function(t,i,n,o,r,l,d){var h={name:"annotationSelect",annotationId:t,pageIndex:i,annotation:n};if(o&&(h={name:"annotationSelect",annotationId:t,pageIndex:i,annotation:n,annotationCollection:o}),r&&(h.multiplePageCollection=r),l&&(h.isProgrammaticSelection=l),d&&(h.annotationAddMode=d),(0,a.xr)()){if("FreeText"===n.type){var p={isBold:!1,isItalic:!1,isStrikeout:!1,isUnderline:!1};1===n.fontStyle?p.isBold=!0:2===n.fontStyle?p.isItalic=!0:3===n.fontStyle?p.isStrikeout=!0:4===n.fontStyle&&(p.isUnderline=!0),n.fontStyle=p}this.viewerBase.blazorUIAdaptor.annotationSelect(n.type)}this.trigger("annotationSelect",h)},e.prototype.fireAnnotationUnSelect=function(t,i,n){(0,a.xr)()&&this.viewerBase.blazorUIAdaptor.annotationUnSelect(),this.trigger("annotationUnSelect",{name:"annotationUnSelect",annotationId:t,pageIndex:i,annotation:n})},e.prototype.fireAnnotationDoubleClick=function(t,i,n){this.trigger("annotationDoubleClick",{name:"annotationDblClick",annotationId:t,pageIndex:i,annotation:n})},e.prototype.fireTextSelectionStart=function(t){this.isTextSelectionStarted=!0,this.trigger("textSelectionStart",{pageIndex:t})},e.prototype.fireTextSelectionEnd=function(t,i,n){this.isTextSelectionStarted&&(this.trigger("textSelectionEnd",{pageIndex:t,textContent:i,textBounds:n}),this.isTextSelectionStarted=!1)},e.prototype.renderDrawing=function(t,i){(0,a.le)(i)&&this.viewerBase.activeElements.activePageID&&!this.viewerBase.isPrint&&(i=this.viewerBase.activeElements.activePageID),this.annotation?this.annotation.renderAnnotations(i,null,null,null,t):this.formDesignerModule&&this.formDesignerModule.updateCanvas(i,t)},e.prototype.fireAnnotationResize=function(t,i,n,o,r,l,d,h,p,f){var c={name:"annotationResize",pageIndex:t,annotationId:i,annotationType:n,annotationBound:o,annotationSettings:r};l&&(c.textMarkupContent=l,c.textMarkupStartIndex=d,c.textMarkupEndIndex=h),p&&(c.labelSettings=p),f&&(c.multiplePageCollection=f),this.trigger("annotationResize",c)},e.prototype.fireAnnotationMoving=function(t,i,n,o,r,l){this.trigger("annotationMoving",{name:"annotationMoving",pageIndex:t,annotationId:i,annotationType:n,annotationSettings:o,previousPosition:r,currentPosition:l})},e.prototype.fireAnnotationMove=function(t,i,n,o,r,l){this.trigger("annotationMove",{name:"annotationMove",pageIndex:t,annotationId:i,annotationType:n,annotationSettings:o,previousPosition:r,currentPosition:l})},e.prototype.fireAnnotationMouseover=function(t,i,n,o,r,l,d){var h={name:"annotationMouseover",annotationId:t,pageIndex:i,annotationType:n,annotationBounds:o,annotation:r,pageX:l.left,pageY:l.top,X:d.left,Y:d.top};(0,a.xr)()&&("Perimeter calculation"===r.subject?h.annotationType="Perimeter":"Area calculation"===r.subject?h.annotationType="Area":"Volume calculation"===r.subject?h.annotationType="Volume":"Arrow"===r.subject?h.annotationType="Arrow":"Circle"===r.subject&&(h.annotationType="Circle")),this.trigger("annotationMouseover",h)},e.prototype.fireAnnotationMouseLeave=function(t){this.trigger("annotationMouseLeave",{name:"annotationMouseLeave",pageIndex:t})},e.prototype.firePageMouseover=function(t,i){this.trigger("pageMouseover",{pageX:t,pageY:i})},e.prototype.fireDownloadStart=function(t){this.trigger("downloadStart",{fileName:t})},e.prototype.fireDownloadEnd=function(t,i){this.trigger("downloadEnd",{fileName:t,downloadDocument:i})},e.prototype.firePrintStart=function(){return _a(this,void 0,void 0,function(){var t;return za(this,function(i){switch(i.label){case 0:return t={fileName:this.downloadFileName,cancel:!1},a.xr?[4,this.triggerEvent("printStart",t)]:[3,2];case 1:return t=i.sent()||t,[3,3];case 2:this.triggerEvent("printStart",t),i.label=3;case 3:return t.cancel||this.printModule.print(),[2]}})})},e.prototype.triggerEvent=function(t,i){return _a(this,void 0,void 0,function(){var n;return za(this,function(o){switch(o.label){case 0:return[4,this.trigger(t,i)];case 1:return n=o.sent(),a.xr&&"string"==typeof n&&(n=JSON.parse(n)),[2,n]}})})},e.prototype.firePrintEnd=function(t){this.trigger("printEnd",{fileName:t})},e.prototype.fireThumbnailClick=function(t){this.trigger("thumbnailClick",{name:"thumbnailClick",pageNumber:t})},e.prototype.fireBookmarkClick=function(t,i,n,o){this.trigger("bookmarkClick",{name:"bookmarkClick",pageNumber:t,position:i,text:n,fileName:o})},e.prototype.fireImportStart=function(t){this.trigger("importStart",{name:"importAnnotationsStart",importData:t,formFieldData:null})},e.prototype.fireExportStart=function(t){this.trigger("exportStart",{name:"exportAnnotationsStart",exportData:t,formFieldData:null})},e.prototype.fireImportSuccess=function(t){this.trigger("importSuccess",{name:"importAnnotationsSuccess",importData:t,formFieldData:null})},e.prototype.fireExportSuccess=function(t,i){this.trigger("exportSuccess",{name:"exportAnnotationsSuccess",exportData:t,fileName:i,formFieldData:null})},e.prototype.fireImportFailed=function(t,i){this.trigger("importFailed",{name:"importAnnotationsFailed",importData:t,errorDetails:i,formFieldData:null})},e.prototype.fireExportFailed=function(t,i){this.trigger("exportFailed",{name:"exportAnnotationsFailed",exportData:t,errorDetails:i,formFieldData:null})},e.prototype.fireFormImportStarted=function(t){this.trigger("importStart",{name:"importFormFieldsStart",importData:null,formFieldData:t})},e.prototype.fireFormExportStarted=function(t){this.trigger("exportStart",{name:"exportFormFieldsStart",exportData:null,formFieldData:t})},e.prototype.fireFormImportSuccess=function(t){this.trigger("importSuccess",{name:"importFormFieldsSuccess",importData:t,formFieldData:t})},e.prototype.fireFormExportSuccess=function(t,i){this.trigger("exportSuccess",{name:"exportFormFieldsSuccess",exportData:t,fileName:i,formFieldData:t})},e.prototype.fireFormImportFailed=function(t,i){this.trigger("importFailed",{name:"importFormFieldsfailed",importData:t,errorDetails:i,formFieldData:t})},e.prototype.fireFormExportFailed=function(t,i){this.trigger("exportFailed",{name:"exportFormFieldsFailed",exportData:t,errorDetails:i,formFieldData:t})},e.prototype.fireTextExtractionCompleted=function(t){this.trigger("extractTextCompleted",{documentTextCollection:t})},e.prototype.fireTextSearchStart=function(t,i){this.trigger("textSearchStart",{name:"textSearchStart",searchText:t,matchCase:i})},e.prototype.fireTextSearchComplete=function(t,i){this.trigger("textSearchComplete",{name:"textSearchComplete",searchText:t,matchCase:i})},e.prototype.fireTextSearchHighlight=function(t,i,n,o){this.trigger("textSearchHighlight",{name:"textSearchHighlight",searchText:t,matchCase:i,bounds:n,pageNumber:o})},e.prototype.renderAdornerLayer=function(t,i,n,o){kh(t,i,n,o,this)},e.prototype.renderSelector=function(t,i){this.drawing.renderSelector(t,i)},e.prototype.select=function(t,i,n,o){var r=this.allowServerDataBinding;if(this.enableServerDataBinding(!1),this.annotationModule){var l=this.annotationModule.textMarkupAnnotationModule,d=l&&l.selectTextMarkupCurrentPage,h=this.selectedItems.annotations[0];if(d){var p=this.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation;this.annotationModule.textMarkupAnnotationModule.clearCurrentAnnotationSelection(d,!0),this.fireAnnotationUnSelect(p.annotName,p.pageNumber,p)}n||this.viewerBase.activeElements&&this.viewerBase.activeElements.activePageID>=0&&!this.viewerBase.isNewStamp&&h&&"HandWrittenSignature"!==h.shapeAnnotationType&&"SignatureText"!==h.shapeAnnotationType&&"SignatureImage"!==h.shapeAnnotationType&&this.fireAnnotationUnSelect(h.annotName,h.pageIndex,h)}if(this.formDesignerModule){var f=this.selectedItems.formFields[0];f&&this.formDesignerModule&&f&&f.formFieldAnnotationType&&this.fireFormFieldUnselectEvent("formFieldUnselect",{name:f.name,id:f.id,value:f.value,fontFamily:f.fontFamily,fontSize:f.fontSize,fontStyle:f.fontStyle,color:f.color,backgroundColor:f.backgroundColor,borderColor:f.borderColor,thickness:f.thickness,alignment:f.alignment,isReadonly:f.isReadonly,visibility:f.visibility,maxLength:f.maxLength,isRequired:f.isRequired,isPrint:f.isPrint,rotation:f.rotateAngle,tooltip:f.tooltip,options:f.options,isChecked:f.isChecked,isSelected:f.isSelected},f.pageIndex)}var u=this;this.viewerBase.renderedPagesList.forEach(function(m){u.clearSelection(m)}),this.drawing.select(t,i,n,o),this.enableServerDataBinding(r,!0)},e.prototype.getPageTable=function(t){return this.drawing.getPageTable(t)},e.prototype.dragSelectedObjects=function(t,i,n,o,r){return this.drawing.dragSelectedObjects(t,i,n,o,r)},e.prototype.scaleSelectedItems=function(t,i,n){return this.drawing.scaleSelectedItems(t,i,n)},e.prototype.dragConnectorEnds=function(t,i,n,o,r,l,d){return this.drawing.dragConnectorEnds(t,i,n,o,r,null,d)},e.prototype.clearSelection=function(t){var i=this.allowServerDataBinding;this.enableServerDataBinding(!1);var n=this.selectedItems;if(n.annotations.length>0?(n.offsetX=0,n.offsetY=0,n.width=0,n.height=0,n.rotateAngle=0,n.annotations=[],n.wrapper=null):n.formFields.length>0&&(n.offsetX=0,n.offsetY=0,n.width=0,n.height=0,n.rotateAngle=0,n.formFields=[],n.wrapper=null),this.drawing.clearSelectorLayer(t),this.viewerBase.isAnnotationSelect=!1,this.viewerBase.isFormFieldSelect=!1,this.annotationModule){var r=this.annotationModule.textMarkupAnnotationModule;if(r){var l=r.selectTextMarkupCurrentPage;this.annotationModule.textMarkupAnnotationModule.clearCurrentSelectedAnnotation(),this.annotationModule.textMarkupAnnotationModule.clearCurrentAnnotationSelection(l)}}this.enableServerDataBinding(i,!0)},e.prototype.getPageNumberFromClientPoint=function(t){return this.viewerBase.getPageNumberFromClientPoint(t)},e.prototype.convertClientPointToPagePoint=function(t,i){return this.viewerBase.convertClientPointToPagePoint(t,i)},e.prototype.convertPagePointToClientPoint=function(t,i){return this.viewerBase.convertPagePointToClientPoint(t,i)},e.prototype.convertPagePointToScrollingPoint=function(t,i){return this.viewerBase.convertPagePointToScrollingPoint(t,i)},e.prototype.zoomToRect=function(t){this.magnificationModule.zoomToRect(t)},e.prototype.add=function(t){return this.drawing.add(t)},e.prototype.remove=function(t){return this.drawing.remove(t)},e.prototype.copy=function(){return this.annotation?this.annotation.isShapeCopied=!0:this.formDesigner&&this.designerMode&&(this.formDesigner.isShapeCopied=!0),this.drawing.copy()},e.prototype.rotate=function(t,i){return this.drawing.rotate(this.selectedItems,t,null,i)},e.prototype.paste=function(t){var i;return this.viewerBase.activeElements.activePageID&&(i=this.viewerBase.activeElements.activePageID),this.drawing.paste(t,i||0)},e.prototype.refresh=function(){for(var t=0;t<this.annotations.length;t++){if(void 0!==this.zIndexTable.length){for(var i=0;i<this.zIndexTable.length;i++){for(var n=this.zIndexTable[i].objects,o=0;o<n.length;o++)n.splice(o,1);delete this.zIndexTable[i]}this.annotations[t]&&delete this.annotations[t],this.selectedItems.annotations&&this.selectedItems.annotations[t]&&delete this.selectedItems.annotations[t],this.zIndexTable=[],this.renderDrawing()}this.annotations&&0!==this.annotations.length&&(this.annotations.length=0,this.selectedItems.annotations.length=0)}},e.prototype.cut=function(){var t;return this.viewerBase.activeElements.activePageID&&(t=this.viewerBase.activeElements.activePageID),this.annotation?this.annotation.isShapeCopied=!0:this.formDesigner&&this.designerMode&&(this.formDesigner.isShapeCopied=!0),this.drawing.cut(t||0)},e.prototype.nodePropertyChange=function(t,i){this.drawing.nodePropertyChange(t,i)},e.prototype.enableServerDataBinding=function(t,i){void 0===i&&(i=!1),(0,a.xr)()&&(this.allowServerDataBinding=t,i&&(this.bulkChanges={}))},e.prototype.checkBoundaryConstraints=function(t,i,n,o,r,l){return this.drawing.checkBoundaryConstraints(t,i,n,o,r,l)},w([(0,a.Z9)()],e.prototype,"serviceUrl",void 0),w([(0,a.Z9)(0)],e.prototype,"pageCount",void 0),w([(0,a.Z9)(!1)],e.prototype,"isDocumentEdited",void 0),w([(0,a.Z9)(0)],e.prototype,"currentPageNumber",void 0),w([(0,a.Z9)()],e.prototype,"documentPath",void 0),w([(0,a.Z9)(null)],e.prototype,"exportAnnotationFileName",void 0),w([(0,a.Z9)()],e.prototype,"downloadFileName",void 0),w([(0,a.Z9)("auto")],e.prototype,"height",void 0),w([(0,a.Z9)("auto")],e.prototype,"width",void 0),w([(0,a.Z9)(!0)],e.prototype,"enableToolbar",void 0),w([(0,a.Z9)(1)],e.prototype,"retryCount",void 0),w([(0,a.Z9)(!0)],e.prototype,"showNotificationDialog",void 0),w([(0,a.Z9)(!0)],e.prototype,"enableNavigationToolbar",void 0),w([(0,a.Z9)(!0)],e.prototype,"enableCommentPanel",void 0),w([(0,a.Z9)(!1)],e.prototype,"isCommandPanelOpen",void 0),w([(0,a.Z9)(!1)],e.prototype,"enableTextMarkupResizer",void 0),w([(0,a.Z9)(!1)],e.prototype,"enableMultiLineOverlap",void 0),w([(0,a.Z9)(!1)],e.prototype,"isValidFreeText",void 0),w([(0,a.Z9)(!1)],e.prototype,"isAnnotationToolbarOpen",void 0),w([(0,a.Z9)(!1)],e.prototype,"isAnnotationToolbarVisible",void 0),w([(0,a.Z9)(!1)],e.prototype,"isFormDesignerToolbarVisible",void 0),w([(0,a.Z9)(!1)],e.prototype,"enableMultiPageAnnotation",void 0),w([(0,a.Z9)(!0)],e.prototype,"enableDownload",void 0),w([(0,a.Z9)(!0)],e.prototype,"enablePrint",void 0),w([(0,a.Z9)(!0)],e.prototype,"enablePrintRotation",void 0),w([(0,a.Z9)(!0)],e.prototype,"enableThumbnail",void 0),w([(0,a.Z9)(!1)],e.prototype,"isThumbnailViewOpen",void 0),w([(0,a.Z9)(!1)],e.prototype,"isSignatureEditable",void 0),w([(0,a.Z9)(!0)],e.prototype,"enableBookmark",void 0),w([(0,a.Z9)(!1)],e.prototype,"enableBookmarkStyles",void 0),w([(0,a.Z9)(!0)],e.prototype,"enableHyperlink",void 0),w([(0,a.Z9)(!0)],e.prototype,"enableHandwrittenSignature",void 0),w([(0,a.Z9)(!0)],e.prototype,"enableInkAnnotation",void 0),w([(0,a.Z9)(!1)],e.prototype,"restrictZoomRequest",void 0),w([(0,a.Z9)("CurrentTab")],e.prototype,"hyperlinkOpenState",void 0),w([(0,a.Z9)("RightClick")],e.prototype,"contextMenuOption",void 0),w([(0,a.Z9)([])],e.prototype,"disableContextMenuItems",void 0),w([(0,a.Z9)({name:"",id:"",type:"",isReadOnly:!1,isSelected:!1,isChecked:!1,value:"",signatureType:[""],fontName:"",fontFamily:"Helvetica",fontSize:10,fontStyle:"None",color:"black",backgroundColor:"white",alignment:"Left",visibility:"visible",maxLength:0,isRequired:!1,isPrint:!1,tooltip:"",pageIndex:-1,options:[],signatureIndicatorSettings:{opacity:1,backgroundColor:"orange",width:19,height:10,fontSize:10,text:null,color:"black"}})],e.prototype,"formFieldCollections",void 0),w([(0,a.Z9)(!0)],e.prototype,"enableNavigation",void 0),w([(0,a.Z9)(!0)],e.prototype,"enableAutoComplete",void 0),w([(0,a.Z9)(!0)],e.prototype,"enableMagnification",void 0),w([(0,a.Z9)(!1)],e.prototype,"enableShapeLabel",void 0),w([(0,a.Z9)(!0)],e.prototype,"enableImportAnnotationMeasurement",void 0),w([(0,a.Z9)(!0)],e.prototype,"enablePinchZoom",void 0),w([(0,a.Z9)(!0)],e.prototype,"enableTextSelection",void 0),w([(0,a.Z9)(!0)],e.prototype,"enableTextSearch",void 0),w([(0,a.Z9)(!0)],e.prototype,"enableAnnotation",void 0),w([(0,a.Z9)(!0)],e.prototype,"enableFormFields",void 0),w([(0,a.Z9)(!0)],e.prototype,"enableFormDesigner",void 0),w([(0,a.Z9)(!1)],e.prototype,"designerMode",void 0),w([(0,a.Z9)(!1)],e.prototype,"enableFormFieldsValidation",void 0),w([(0,a.Z9)(!1)],e.prototype,"isFormFieldDocument",void 0),w([(0,a.Z9)(!1)],e.prototype,"enableDesktopMode",void 0),w([(0,a.Z9)(!1)],e.prototype,"hideSaveSignature",void 0),w([(0,a.Z9)(!0)],e.prototype,"enableFreeText",void 0),w([(0,a.Z9)(!0)],e.prototype,"enableTextMarkupAnnotation",void 0),w([(0,a.Z9)(!0)],e.prototype,"enableShapeAnnotation",void 0),w([(0,a.Z9)(!0)],e.prototype,"enableMeasureAnnotation",void 0),w([(0,a.Z9)(!0)],e.prototype,"enableStampAnnotations",void 0),w([(0,a.Z9)(!0)],e.prototype,"enableStickyNotesAnnotation",void 0),w([(0,a.Z9)(!0)],e.prototype,"enableAnnotationToolbar",void 0),w([(0,a.Z9)(!0)],e.prototype,"enableFormDesignerToolbar",void 0),w([(0,a.Z9)(!1)],e.prototype,"isBookmarkPanelOpen",void 0),w([(0,a.Z9)(!1)],e.prototype,"isInitialFieldToolbarSelection",void 0),w([(0,a.Z9)("TextSelection")],e.prototype,"interactionMode",void 0),w([(0,a.Z9)("Default")],e.prototype,"zoomMode",void 0),w([(0,a.Z9)("Default")],e.prototype,"signatureFitMode",void 0),w([(0,a.Z9)("Default")],e.prototype,"printMode",void 0),w([(0,a.Z9)(0)],e.prototype,"zoomValue",void 0),w([(0,a.Z9)(!0)],e.prototype,"enableZoomOptimization",void 0),w([(0,a.Z9)(!1)],e.prototype,"isExtractText",void 0),w([(0,a.Z9)(!1)],e.prototype,"isMaintainSelection",void 0),w([(0,a.Z9)("M/d/yyyy h:mm:ss a")],e.prototype,"dateTimeFormat",void 0),w([(0,a.Z9)({showTooltip:!0,toolbarItems:["OpenOption","UndoRedoTool","PageNavigationTool","MagnificationTool","PanTool","SelectionTool","CommentTool","SubmitForm","AnnotationEditTool","FormDesignerEditTool","FreeTextAnnotationOption","InkAnnotationOption","ShapeAnnotationOption","StampAnnotation","SignatureOption","SearchOption","PrintOption","DownloadOption"],annotationToolbarItems:["HighlightTool","UnderlineTool","StrikethroughTool","ColorEditTool","OpacityEditTool","AnnotationDeleteTool","StampAnnotationTool","HandWrittenSignatureTool","InkAnnotationTool","ShapeTool","CalibrateTool","StrokeColorEditTool","ThicknessEditTool","FreeTextAnnotationTool","FontFamilyAnnotationTool","FontSizeAnnotationTool","FontStylesAnnotationTool","FontAlignAnnotationTool","FontColorAnnotationTool","CommentPanelTool"],formDesignerToolbarItems:["TextboxTool","PasswordTool","CheckBoxTool","RadioButtonTool","DropdownTool","ListboxTool","DrawSignatureTool","DeleteTool"]})],e.prototype,"toolbarSettings",void 0),w([(0,a.Z9)({ajaxHeaders:[],withCredentials:!1})],e.prototype,"ajaxRequestSettings",void 0),w([(0,a.Z9)({customStampName:"",customStampImageSource:""})],e.prototype,"customStamp",void 0),w([(0,a.Z9)({load:"Load",renderPages:"RenderPdfPages",unload:"Unload",download:"Download",renderThumbnail:"RenderThumbnailImages",print:"PrintImages",renderComments:"RenderAnnotationComments",importAnnotations:"ImportAnnotations",exportAnnotations:"ExportAnnotations",importFormFields:"ImportFormFields",exportFormFields:"ExportFormFields",renderTexts:"RenderPdfTexts"})],e.prototype,"serverActionSettings",void 0),w([(0,a.Z9)({name:"",isReadOnly:!1,visibility:"visible",isRequired:!1,isPrint:!0,tooltip:"",signatureIndicatorSettings:{opacity:1,backgroundColor:"orange",width:19,height:10,fontSize:10,text:null,color:"black"},signatureDialogSettings:{displayMode:ae.Draw|ae.Text|ae.Upload,hideSaveSignature:!1}})],e.prototype,"signatureFieldSettings",void 0),w([(0,a.Z9)({name:"",isReadOnly:!1,visibility:"visible",isRequired:!1,isPrint:!0,tooltip:"",initialIndicatorSettings:{opacity:1,backgroundColor:"orange",width:19,height:10,fontSize:10,text:null,color:"black"},initialDialogSettings:{displayMode:ae.Draw|ae.Text|ae.Upload,hideSaveSignature:!1}})],e.prototype,"initialFieldSettings",void 0),w([(0,a.Z9)({opacity:1,color:"#FFDF56",author:"Guest",annotationSelectorSettings:{selectionBorderColor:"",resizerBorderColor:"black",resizerFillColor:"#FF4081",resizerSize:8,selectionBorderThickness:1,resizerShape:"Square",selectorLineDashArray:[],resizerLocation:Q.Corners|Q.Edges},isLock:!1,enableMultiPageAnnotation:!1,enableTextMarkupResizer:!1,allowedInteractions:["None"],isPrint:!0})],e.prototype,"highlightSettings",void 0),w([(0,a.Z9)({opacity:1,color:"#ff0000",author:"Guest",annotationSelectorSettings:{selectionBorderColor:"",resizerBorderColor:"black",resizerFillColor:"#FF4081",resizerSize:8,selectionBorderThickness:1,resizerShape:"Square",selectorLineDashArray:[],resizerLocation:Q.Corners|Q.Edges},isLock:!1,enableMultiPageAnnotation:!1,enableTextMarkupResizer:!1,allowedInteractions:["None"],isPrint:!0})],e.prototype,"strikethroughSettings",void 0),w([(0,a.Z9)({opacity:1,color:"#00ff00",author:"Guest",annotationSelectorSettings:{selectionBorderColor:"",resizerBorderColor:"black",resizerFillColor:"#FF4081",resizerSize:8,selectionBorderThickness:1,resizerShape:"Square",selectorLineDashArray:[],resizerLocation:Q.Corners|Q.Edges},isLock:!1,enableMultiPageAnnotation:!1,enableTextMarkupResizer:!1,allowedInteractions:["None"],isPrint:!0})],e.prototype,"underlineSettings",void 0),w([(0,a.Z9)({opacity:1,fillColor:"#ffffff00",strokeColor:"#ff0000",author:"Guest",thickness:1,borderDashArray:0,lineHeadStartStyle:"None",lineHeadEndStyle:"None",annotationSelectorSettings:{selectionBorderColor:"",resizerBorderColor:"black",resizerFillColor:"#FF4081",resizerSize:8,selectionBorderThickness:1,resizerShape:"Square",selectorLineDashArray:[],resizerLocation:Q.Corners|Q.Edges,resizerCursorType:null},minHeight:0,minWidth:0,maxWidth:0,maxHeight:0,isLock:!1,allowedInteractions:["None"],isPrint:!0})],e.prototype,"lineSettings",void 0),w([(0,a.Z9)({opacity:1,fillColor:"#ffffff00",strokeColor:"#ff0000",author:"Guest",thickness:1,borderDashArray:0,lineHeadStartStyle:"Closed",lineHeadEndStyle:"Closed",annotationSelectorSettings:{selectionBorderColor:"",resizerBorderColor:"black",resizerFillColor:"#FF4081",resizerSize:8,selectionBorderThickness:1,resizerShape:"Square",selectorLineDashArray:[],resizerLocation:Q.Corners|Q.Edges,resizerCursorType:null},minHeight:0,minWidth:0,maxWidth:0,maxHeight:0,isLock:!1,allowedInteractions:["None"],isPrint:!0})],e.prototype,"arrowSettings",void 0),w([(0,a.Z9)({opacity:1,fillColor:"#ffffff00",strokeColor:"#ff0000",author:"Guest",thickness:1,annotationSelectorSettings:{selectionBorderColor:"",resizerBorderColor:"black",resizerFillColor:"#FF4081",resizerSize:8,selectionBorderThickness:1,resizerShape:"Square",selectorLineDashArray:[],resizerLocation:Q.Corners|Q.Edges,resizerCursorType:null},minHeight:0,minWidth:0,maxWidth:0,maxHeight:0,isLock:!1,allowedInteractions:["None"],isPrint:!0})],e.prototype,"rectangleSettings",void 0),w([(0,a.Z9)({opacity:1,fillColor:"#ffffff00",borderColor:"#ff0000",fontColor:"#000",fontSize:16,labelHeight:24.6,labelMaxWidth:151,labelContent:"Label"})],e.prototype,"shapeLabelSettings",void 0),w([(0,a.Z9)({opacity:1,fillColor:"#ffffff00",strokeColor:"#ff0000",author:"Guest",thickness:1,annotationSelectorSettings:{selectionBorderColor:"",resizerBorderColor:"black",resizerFillColor:"#FF4081",resizerSize:8,selectionBorderThickness:1,resizerShape:"Square",selectorLineDashArray:[],resizerLocation:Q.Corners|Q.Edges,resizerCursorType:null},minHeight:0,minWidth:0,maxWidth:0,maxHeight:0,isLock:!1,allowedInteractions:["None"],isPrint:!0})],e.prototype,"circleSettings",void 0),w([(0,a.Z9)({opacity:1,fillColor:"#ffffff00",strokeColor:"#ff0000",author:"Guest",thickness:1,annotationSelectorSettings:{selectionBorderColor:"",resizerBorderColor:"black",resizerFillColor:"#FF4081",resizerSize:8,selectionBorderThickness:1,resizerShape:"Square",selectorLineDashArray:[],resizerLocation:Q.Corners|Q.Edges,resizerCursorType:null},minHeight:0,minWidth:0,maxWidth:0,maxHeight:0,isLock:!1,allowedInteractions:["None"],isPrint:!0})],e.prototype,"polygonSettings",void 0),w([(0,a.Z9)({opacity:1,author:"Guest",annotationSelectorSettings:{selectionBorderColor:"",resizerBorderColor:"black",resizerFillColor:"#FF4081",resizerSize:8,selectionBorderThickness:1,resizerShape:"Square",selectorLineDashArray:[],resizerLocation:Q.Corners|Q.Edges,resizerCursorType:null},minHeight:0,minWidth:0,maxWidth:0,maxHeight:0,isLock:!1,dynamicStamps:[Ft.Revised,Ft.Reviewed,Ft.Received,Ft.Confidential,Ft.Approved,Ft.NotApproved],signStamps:[st.Witness,st.InitialHere,st.SignHere,st.Accepted,st.Rejected],standardBusinessStamps:[Be.Approved,Be.NotApproved,Be.Draft,Be.Final,Be.Completed,Be.Confidential,Be.ForPublicRelease,Be.NotForPublicRelease,Be.ForComment,Be.Void,Be.PreliminaryResults,Be.InformationOnly],allowedInteractions:["None"],isPrint:!0})],e.prototype,"stampSettings",void 0),w([(0,a.Z9)({opacity:1,author:"Guest",width:0,height:0,left:0,top:0,minHeight:0,minWidth:0,maxWidth:0,maxHeight:0,isLock:!1,enableCustomStamp:!0,allowedInteractions:["None"],isPrint:!0})],e.prototype,"customStampSettings",void 0),w([(0,a.Z9)({opacity:1,fillColor:"#ffffff00",strokeColor:"#ff0000",author:"Guest",thickness:1,borderDashArray:0,lineHeadStartStyle:"Closed",lineHeadEndStyle:"Closed",annotationSelectorSettings:{selectionBorderColor:"",resizerBorderColor:"black",resizerFillColor:"#FF4081",resizerSize:8,selectionBorderThickness:1,resizerShape:"Square",selectorLineDashArray:[],resizerLocation:Q.Corners|Q.Edges,resizerCursorType:null},minHeight:0,minWidth:0,maxWidth:0,maxHeight:0,isLock:!1,leaderLength:40,resizeCursorType:Fs.move,allowedInteractions:["None"],isPrint:!0})],e.prototype,"distanceSettings",void 0),w([(0,a.Z9)({opacity:1,fillColor:"#ffffff00",strokeColor:"#ff0000",author:"Guest",thickness:1,borderDashArray:0,lineHeadStartStyle:"Open",lineHeadEndStyle:"Open",minHeight:0,minWidth:0,maxWidth:0,maxHeight:0,isLock:!1,annotationSelectorSettings:{selectionBorderColor:"",resizerBorderColor:"black",resizerFillColor:"#FF4081",resizerSize:8,selectionBorderThickness:1,resizerShape:"Square",selectorLineDashArray:[],resizerLocation:Q.Corners|Q.Edges,resizerCursorType:null},allowedInteractions:["None"],isPrint:!0})],e.prototype,"perimeterSettings",void 0),w([(0,a.Z9)({opacity:1,fillColor:"#ffffff00",strokeColor:"#ff0000",author:"Guest",thickness:1,minHeight:0,minWidth:0,maxWidth:0,maxHeight:0,isLock:!1,annotationSelectorSettings:{selectionBorderColor:"",resizerBorderColor:"black",resizerFillColor:"#FF4081",resizerSize:8,selectionBorderThickness:1,resizerShape:"Square",selectorLineDashArray:[],resizerLocation:Q.Corners|Q.Edges,resizerCursorType:null},allowedInteractions:["None"],isPrint:!0})],e.prototype,"areaSettings",void 0),w([(0,a.Z9)({opacity:1,fillColor:"#ffffff00",strokeColor:"#ff0000",author:"Guest",thickness:1,annotationSelectorSettings:{selectionBorderColor:"",resizerBorderColor:"black",resizerFillColor:"#FF4081",resizerSize:8,selectionBorderThickness:1,resizerShape:"Square",selectorLineDashArray:[],resizerLocation:Q.Corners|Q.Edges,resizerCursorType:null},minHeight:0,minWidth:0,maxWidth:0,maxHeight:0,isLock:!1,allowedInteractions:["None"],isPrint:!0})],e.prototype,"radiusSettings",void 0),w([(0,a.Z9)({opacity:1,fillColor:"#ffffff00",strokeColor:"#ff0000",author:"Guest",thickness:1,minHeight:0,minWidth:0,maxWidth:0,maxHeight:0,isLock:!1,annotationSelectorSettings:{selectionBorderColor:"",resizerBorderColor:"black",resizerFillColor:"#FF4081",resizerSize:8,selectionBorderThickness:1,resizerShape:"Square",selectorLineDashArray:[],resizerLocation:Q.Corners|Q.Edges,resizerCursorType:null},allowedInteractions:["None"],isPrint:!0})],e.prototype,"volumeSettings",void 0),w([(0,a.Z9)({author:"Guest",opacity:1,annotationSelectorSettings:{selectionBorderColor:"",resizerBorderColor:"black",resizerFillColor:"#FF4081",resizerSize:8,selectionBorderThickness:1,resizerShape:"Square",selectorLineDashArray:[],resizerLocation:Q.Corners|Q.Edges,resizerCursorType:null},isLock:!1,allowedInteractions:["None"],isPrint:!0})],e.prototype,"stickyNotesSettings",void 0),w([(0,a.Z9)({opacity:1,fillColor:"#ffffff00",borderColor:"#ffffff00",author:"Guest",borderWidth:1,width:151,fontSize:16,height:24.6,fontColor:"#000",fontFamily:"Helvetica",defaultText:"Type Here",textAlignment:"Left",fontStyle:ct.None,allowTextOnly:!1,annotationSelectorSettings:{selectionBorderColor:"",resizerBorderColor:"black",resizerFillColor:"#FF4081",resizerSize:8,selectionBorderThickness:1,resizerShape:"Square",selectorLineDashArray:[],resizerLocation:Q.Corners|Q.Edges,resizerCursorType:null},minHeight:0,minWidth:0,maxWidth:0,maxHeight:0,isLock:!1,allowedInteractions:["None"],isPrint:!0,isReadonly:!1,enableAutoFit:!1})],e.prototype,"freeTextSettings",void 0),w([(0,a.Z9)({conversionUnit:"in",displayUnit:"in",scaleRatio:1,depth:96})],e.prototype,"measurementSettings",void 0),w([(0,a.Z9)({selectionBorderColor:"",resizerBorderColor:"black",resizerFillColor:"#FF4081",resizerSize:8,selectionBorderThickness:1,resizerShape:"Square",selectorLineDashArray:[],resizerLocation:Q.Corners|Q.Edges,resizerCursorType:null})],e.prototype,"annotationSelectorSettings",void 0),w([(0,a.Z9)({searchHighlightColor:"#fdd835",searchColor:"#8b4c12"})],e.prototype,"textSearchColorSettings",void 0),w([(0,a.Z9)({displayMode:ae.Draw|ae.Text|ae.Upload,hideSaveSignature:!1})],e.prototype,"signatureDialogSettings",void 0),w([(0,a.Z9)({displayMode:ae.Draw|ae.Text|ae.Upload,hideSaveSignature:!1})],e.prototype,"initialDialogSettings",void 0),w([(0,a.Z9)({signatureItem:["Signature","Initial"],saveSignatureLimit:1,saveInitialLimit:1,opacity:1,strokeColor:"#000000",width:150,height:100,thickness:1,annotationSelectorSettings:{selectionBorderColor:"",resizerBorderColor:"black",resizerFillColor:"#FF4081",resizerSize:8,selectionBorderThickness:1,resizerShape:"Square",selectorLineDashArray:[],resizerLocation:Q.Corners|Q.Edges,resizerCursorType:null},allowedInteractions:["None"],signatureDialogSettings:{displayMode:ae.Draw|ae.Text|ae.Upload,hideSaveSignature:!1},initialDialogSettings:{displayMode:ae.Draw|ae.Text|ae.Upload,hideSaveSignature:!1}})],e.prototype,"handWrittenSignatureSettings",void 0),w([(0,a.Z9)({author:"Guest",opacity:1,strokeColor:"#ff0000",thickness:1,annotationSelectorSettings:{selectionBorderColor:"",resizerBorderColor:"black",resizerFillColor:"#FF4081",resizerSize:8,selectionBorderThickness:1,resizerShape:"Square",selectorLineDashArray:[],resizerLocation:Q.Corners|Q.Edges,resizerCursorType:null},isLock:!1,allowedInteractions:["None"],isPrint:!0})],e.prototype,"inkAnnotationSettings",void 0),w([(0,a.Z9)({author:"Guest",minHeight:0,minWidth:0,maxWidth:0,maxHeight:0,isLock:!1,skipPrint:!1,skipDownload:!1,allowedInteractions:["None"]})],e.prototype,"annotationSettings",void 0),w([(0,a.Z9)({enableTileRendering:!0,x:0,y:0})],e.prototype,"tileRenderingSettings",void 0),w([(0,a.Z9)({delayPageRequestTimeOnScroll:100})],e.prototype,"scrollSettings",void 0),w([(0,a.Z9)({name:"",value:"",fontFamily:"Helvetica",fontSize:10,fontStyle:"None",color:"black",borderColor:"black",backgroundColor:"white",alignment:"Left",isReadOnly:!1,visibility:"visible",maxLength:0,isRequired:!1,isPrint:!0,tooltip:"",thickness:1,isMultiline:!1})],e.prototype,"textFieldSettings",void 0),w([(0,a.Z9)({name:"",value:"",fontFamily:"Helvetica",fontSize:10,fontStyle:"None",color:"black",borderColor:"black",backgroundColor:"white",alignment:"Left",isReadOnly:!1,visibility:"visible",maxLength:0,isRequired:!1,isPrint:!0,tooltip:"",thickness:1})],e.prototype,"passwordFieldSettings",void 0),w([(0,a.Z9)({name:"",isChecked:!1,backgroundColor:"white",isReadOnly:!1,visibility:"visible",isPrint:!0,tooltip:"",isRequired:!1,thickness:1,borderColor:"black"})],e.prototype,"checkBoxFieldSettings",void 0),w([(0,a.Z9)({name:"",isSelected:!1,backgroundColor:"white",isReadOnly:!1,visibility:"visible",isPrint:!0,tooltip:"",isRequired:!1,thickness:1,borderColor:"black"})],e.prototype,"radioButtonFieldSettings",void 0),w([(0,a.Z9)({name:"",fontFamily:"Helvetica",fontSize:10,fontStyle:"None",color:"black",backgroundColor:"white",alignment:"Left",isReadOnly:!1,visibility:"visible",isRequired:!1,isPrint:!0,tooltip:"",options:[],thickness:1,borderColor:"black"})],e.prototype,"DropdownFieldSettings",void 0),w([(0,a.Z9)({name:"",fontFamily:"Helvetica",fontSize:10,fontStyle:"None",color:"black",backgroundColor:"white",alignment:"Left",isReadOnly:!1,visibility:"visible",isRequired:!1,isPrint:!1,tooltip:"",options:[],thickness:1,borderColor:"black"})],e.prototype,"listBoxFieldSettings",void 0),w([(0,a.Z9)({contextMenuAction:"RightClick",contextMenuItems:[$e.Comment,$e.Copy,$e.Cut,$e.Delete,$e.Highlight,$e.Paste,$e.Properties,$e.ScaleRatio,$e.Strikethrough,$e.Underline]})],e.prototype,"contextMenuSettings",void 0),w([(0,a.Zz)({},an)],e.prototype,"selectedItems",void 0),w([(0,a.ju)()],e.prototype,"created",void 0),w([(0,a.ju)()],e.prototype,"documentLoad",void 0),w([(0,a.ju)()],e.prototype,"documentUnload",void 0),w([(0,a.ju)()],e.prototype,"documentLoadFailed",void 0),w([(0,a.ju)()],e.prototype,"ajaxRequestFailed",void 0),w([(0,a.ju)()],e.prototype,"ajaxRequestSuccess",void 0),w([(0,a.ju)()],e.prototype,"validateFormFields",void 0),w([(0,a.ju)()],e.prototype,"pageClick",void 0),w([(0,a.ju)()],e.prototype,"pageChange",void 0),w([(0,a.ju)()],e.prototype,"hyperlinkClick",void 0),w([(0,a.ju)()],e.prototype,"hyperlinkMouseOver",void 0),w([(0,a.ju)()],e.prototype,"zoomChange",void 0),w([(0,a.ju)()],e.prototype,"annotationAdd",void 0),w([(0,a.ju)()],e.prototype,"annotationRemove",void 0),w([(0,a.ju)()],e.prototype,"annotationPropertiesChange",void 0),w([(0,a.ju)()],e.prototype,"annotationResize",void 0),w([(0,a.ju)()],e.prototype,"addSignature",void 0),w([(0,a.ju)()],e.prototype,"removeSignature",void 0),w([(0,a.ju)()],e.prototype,"moveSignature",void 0),w([(0,a.ju)()],e.prototype,"signaturePropertiesChange",void 0),w([(0,a.ju)()],e.prototype,"resizeSignature",void 0),w([(0,a.ju)()],e.prototype,"signatureSelect",void 0),w([(0,a.ju)()],e.prototype,"annotationSelect",void 0),w([(0,a.ju)()],e.prototype,"annotationUnSelect",void 0),w([(0,a.ju)()],e.prototype,"annotationDoubleClick",void 0),w([(0,a.ju)()],e.prototype,"annotationMove",void 0),w([(0,a.ju)()],e.prototype,"annotationMoving",void 0),w([(0,a.ju)()],e.prototype,"annotationMouseover",void 0),w([(0,a.ju)()],e.prototype,"annotationMouseLeave",void 0),w([(0,a.ju)()],e.prototype,"pageMouseover",void 0),w([(0,a.ju)()],e.prototype,"importStart",void 0),w([(0,a.ju)()],e.prototype,"exportStart",void 0),w([(0,a.ju)()],e.prototype,"importSuccess",void 0),w([(0,a.ju)()],e.prototype,"exportSuccess",void 0),w([(0,a.ju)()],e.prototype,"importFailed",void 0),w([(0,a.ju)()],e.prototype,"exportFailed",void 0),w([(0,a.ju)()],e.prototype,"extractTextCompleted",void 0),w([(0,a.ju)()],e.prototype,"thumbnailClick",void 0),w([(0,a.ju)()],e.prototype,"bookmarkClick",void 0),w([(0,a.ju)()],e.prototype,"textSelectionStart",void 0),w([(0,a.ju)()],e.prototype,"textSelectionEnd",void 0),w([(0,a.ju)()],e.prototype,"downloadStart",void 0),w([(0,a.ju)()],e.prototype,"buttonFieldClick",void 0),w([(0,a.ju)()],e.prototype,"formFieldClick",void 0),w([(0,a.ju)()],e.prototype,"downloadEnd",void 0),w([(0,a.ju)()],e.prototype,"printStart",void 0),w([(0,a.ju)()],e.prototype,"printEnd",void 0),w([(0,a.ju)()],e.prototype,"textSearchStart",void 0),w([(0,a.ju)()],e.prototype,"textSearchComplete",void 0),w([(0,a.ju)()],e.prototype,"textSearchHighlight",void 0),w([(0,a.ju)()],e.prototype,"ajaxRequestInitiate",void 0),w([(0,a.ju)()],e.prototype,"commentAdd",void 0),w([(0,a.ju)()],e.prototype,"commentEdit",void 0),w([(0,a.ju)()],e.prototype,"commentDelete",void 0),w([(0,a.ju)()],e.prototype,"commentSelect",void 0),w([(0,a.ju)()],e.prototype,"commentStatusChanged",void 0),w([(0,a.ju)()],e.prototype,"beforeAddFreeText",void 0),w([(0,a.ju)()],e.prototype,"formFieldFocusOut",void 0),w([(0,a.ju)()],e.prototype,"formFieldAdd",void 0),w([(0,a.ju)()],e.prototype,"formFieldRemove",void 0),w([(0,a.ju)()],e.prototype,"formFieldPropertiesChange",void 0),w([(0,a.ju)()],e.prototype,"formFieldMouseLeave",void 0),w([(0,a.ju)()],e.prototype,"formFieldMouseover",void 0),w([(0,a.ju)()],e.prototype,"formFieldMove",void 0),w([(0,a.ju)()],e.prototype,"formFieldResize",void 0),w([(0,a.ju)()],e.prototype,"formFieldSelect",void 0),w([(0,a.ju)()],e.prototype,"formFieldUnselect",void 0),w([(0,a.ju)()],e.prototype,"formFieldDoubleClick",void 0),w([(0,a.FE)([],ka)],e.prototype,"annotations",void 0),w([(0,a.FE)([],Aa)],e.prototype,"formFields",void 0),w([(0,a.Z9)()],e.prototype,"drawingObject",void 0),w([a.Zl],e)}(a.wA),NS=function(){function s(e,t){var i=this;this.childNavigateCount=0,this.bookmarkClick=function(n){if(n.event.target.classList.contains("e-icons"))i.childNavigateCount++;else{var o=n.data.Id;i.childNavigateCount=0,i.pdfViewerBase.navigationPane.goBackToToolbar();var r=i.bookmarkList.getSelectedItems();i.navigateToBookmark(o,n.text,r.data.FileName)}return!1},this.nodeClick=function(n){i.setHeight(n.node);var o=Number(n.nodeData.id),r=i.treeObj.getTreeData(n.node);if(i.navigateToBookmark(o,n.node.textContent,r[0].FileName),i.pdfViewer.annotationModule&&i.pdfViewer.annotationModule.inkAnnotationModule){var l=parseInt(i.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber);i.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(l)}return!1},this.bookmarkPanelBeforeOpen=function(n){if(i.pdfViewer.enableBookmarkStyles)for(var o=0;o<i.bookmarkStyles.length;o++)if(n.text.trim()===i.bookmarkStyles[o].Text.trim()){var r=n.node.lastElementChild;if(r){for(var l=i.bookmarkStyles[o].FontStyle.split(","),d=0;d<l.length;d++)switch(l[d].trim()){case"Italic":r.style.fontStyle="italic";break;case"Bold":r.style.fontWeight="Bold"}var h=r.getElementsByClassName("e-pv-bookmark-title")[0];h?h.style.color=i.bookmarkStyles[o].Color:r.children[0].style.color=i.bookmarkStyles[o].Color}break}},this.pdfViewer=e,this.pdfViewerBase=t}return s.prototype.createRequestForBookmarks=function(){var e=this,t={hashId:this.pdfViewerBase.hashId,action:"Bookmarks",elementId:this.pdfViewer.element.id,uniqueId:this.pdfViewerBase.documentId};this.pdfViewerBase.jsonDocumentId&&(t.documentId=this.pdfViewerBase.jsonDocumentId),this.pdfViewer.enableBookmarkStyles&&(t.bookmarkStyles=this.pdfViewer.enableBookmarkStyles),this.bookmarkRequestHandler=new Ue(this.pdfViewer),this.bookmarkRequestHandler.url=e.pdfViewer.serviceUrl+"/Bookmarks",this.bookmarkRequestHandler.responseType="json",this.bookmarkRequestHandler.send(t),this.bookmarkRequestHandler.onSuccess=function(i){e.pdfViewerBase.navigationPane&&e.pdfViewerBase.navigationPane.disableBookmarkButton();var n=i.data;if(n){if("object"!=typeof n)try{n=JSON.parse(n)}catch(r){e.pdfViewerBase.onControlError(500,n,"Bookmarks"),n=null}n&&n.uniqueId===e.pdfViewerBase.documentId&&(e.pdfViewer.fireAjaxRequestSuccess("Bookmarks",n),e.bookmarks={bookMark:n.Bookmarks},e.bookmarkStyles=n.Bookmarkstyles,e.bookmarksDestination={bookMarkDestination:n.BookmarksDestination},(0,a.xr)())&&e.pdfViewer&&e.pdfViewer._dotnetInstance&&e.pdfViewer._dotnetInstance.invokeMethodAsync("UpdateBookmarkCollection",{bookmarks:e.bookmarks,bookmarksDestination:e.bookmarksDestination})}e.pdfViewerBase.navigationPane&&(null==e.bookmarks?(e.pdfViewerBase.navigationPane.disableBookmarkButton(),(0,a.xr)()&&e.pdfViewer._dotnetInstance&&e.pdfViewer._dotnetInstance.invokeMethodAsync("UpdateBookmarkCollection",null)):(e.pdfViewerBase.navigationPane.enableBookmarkButton(),e.isBookmarkViewDiv=!1,e.pdfViewer.isBookmarkPanelOpen&&e.pdfViewerBase.navigationPane.openBookmarkcontentInitially()))},this.bookmarkRequestHandler.onFailure=function(i){e.pdfViewer.fireAjaxRequestFailed(i.status,i.statusText,"Bookmarks")},this.bookmarkRequestHandler.onError=function(i){e.pdfViewerBase.openNotificationPopup(),e.pdfViewer.fireAjaxRequestFailed(i.status,i.statusText,"Bookmarks")}},s.prototype.renderBookmarkcontent=function(){var e=this;if(!this.isBookmarkViewDiv){var t=(0,a.xr)();this.bookmarkView=t?this.pdfViewer.element.querySelector(".e-pv-bookmark-view"):(0,a.az)("div",{id:this.pdfViewer.element.id+"_bookmark_view",className:"e-pv-bookmark-view"}),this.pdfViewerBase.navigationPane.sideBarContent.appendChild(this.bookmarkView);var i=(0,a.az)("div",{id:this.pdfViewer.element.id+"_bookmark_iconview",className:"e-pv-bookmark-icon-view"});if(this.pdfViewer.enableRtl){var n=(0,a.az)("span",{id:this.pdfViewer.element.id+"_bookmark_icon",className:"e-pv-bookmark-icon e-pv-icon e-right"});i.appendChild(n)}else n=(0,a.az)("span",{id:this.pdfViewer.element.id+"_bookmark_icon",className:"e-pv-bookmark-icon e-pv-icon"}),i.appendChild(n);var o=(0,a.az)("div",{id:this.pdfViewer.element.id+"_bookmark_Title",className:"e-pv-bookmark-title"});this.pdfViewer.enableRtl&&(o.style.paddingRight="26px"),o.innerText="${Title}",i.appendChild(o),t||(this.treeObj=new re.LQ({fields:{dataSource:this.bookmarks.bookMark,id:"Id",text:"Title",child:"Child",hasChildren:"HasChild"},nodeTemplate:i.outerHTML,nodeSelected:this.nodeClick.bind(this),drawNode:this.bookmarkPanelBeforeOpen.bind(this)}),this.treeObj.isStringTemplate=!0,this.pdfViewer.enableRtl&&(this.treeObj.enableRtl=!0),this.treeObj.appendTo(this.bookmarkView));for(var r=["mouseover","keydown"],l=0;l<r.length;l++)this.bookmarkView.addEventListener(r[l],function(d){e.setHeight(d.target)});this.isBookmarkViewDiv=!0}this.bookmarkView.style.display="block"},s.prototype.renderBookmarkContentMobile=function(){null!=this.bookmarkView&&this.bookmarkView.remove(),this.bookmarkView=(0,a.az)("div",{id:this.pdfViewer.element.id+"_bookmark_view",className:"e-pv-bookmark-view"}),this.pdfViewerBase.getElement("_bookmarks_container").appendChild(this.bookmarkView),this.bookmarkList=new pp.Bv({dataSource:this.bookmarks.bookMark,fields:{id:"Id",text:"Title",child:"Child"},showHeader:!1,select:this.bookmarkClick.bind(this)}),this.bookmarkList.isStringTemplate=!0,this.pdfViewer.enableRtl&&(this.bookmarkList.enableRtl=!0),this.bookmarkList.appendTo(this.bookmarkView)},s.prototype.setHeight=function(e){this.treeObj&&this.treeObj.fullRowSelect&&e.classList&&(e.classList.contains("e-treeview")?e=e.querySelector(".e-node-focus").querySelector(".e-fullrow"):e.classList.contains("e-list-parent")?e=e.querySelector(".e-fullrow"):"e-fullrow"!==e.classList.value&&(e.closest&&e.closest(".e-list-item")?e=e.closest(".e-list-item").querySelector(".e-fullrow"):e.classList.contains("e-list-item")?e=e.querySelector(".e-fullrow"):e.classList.contains("e-icons")&&e.classList.contains("interaction")&&e.parentElement.parentElement.classList.contains("e-list-item")&&(e=e.parentElement.parentElement.querySelector(".e-fullrow"))),e.nextElementSibling&&(e.style.height=e.nextElementSibling.offsetHeight+"px"))},s.prototype.setBookmarkContentHeight=function(){if(this.treeObj){var e=this.treeObj.element;this.treeObj.fullRowSelect&&(e.classList.contains("e-treeview")&&(e=e.querySelector(".e-node-focus").querySelector(".e-fullrow")),e.nextElementSibling&&(e.style.height=e.nextElementSibling.offsetHeight+"px"))}},s.prototype.navigateToBookmark=function(e,t,i){var n=this.bookmarksDestination.bookMarkDestination[e].PageIndex,o=this.bookmarksDestination.bookMarkDestination[e].Y;-1!==n&&this.goToBookmark(n,o),this.pdfViewer.fireBookmarkClick(-1!==n?n+1:n,o,t,i)},s.prototype.getBookmarks=function(){if(this.bookmarks&&this.bookmarksDestination)return{bookmarks:this.bookmarks,bookmarksDestination:this.bookmarksDestination}},s.prototype.goToBookmark=function(e,t){var n=this.pdfViewerBase.pageSize[e].height,r=(0===t?this.pdfViewerBase.pageSize[e].top*this.pdfViewerBase.getZoomFactor():this.pdfViewerBase.pageSize[e].top*this.pdfViewerBase.getZoomFactor()+(n-t)*this.pdfViewerBase.getZoomFactor()).toString();return this.pdfViewerBase.viewerContainer.scrollTop=parseInt(r),a.AR.isDevice&&!this.pdfViewer.enableDesktopMode&&(this.pdfViewerBase.mobileScrollerContainer.style.display="",this.pdfViewerBase.updateMobileScrollerPosition()),this.pdfViewerBase.focusViewerContainer(),!1},s.prototype.clear=function(){if(this.pdfViewerBase.navigationPane&&(this.pdfViewerBase.navigationPane.disableBookmarkButton(),this.pdfViewerBase.navigationPane.updateViewerContainerOnClose()),this.bookmarks&&(this.bookmarks.bookMark=[],this.bookmarks=null),this.bookmarksDestination&&(this.bookmarksDestination.bookMarkDestination=[]),null!=this.bookmarkView&&!(0,a.xr)())for(null!==this.bookmarkView.parentElement&&this.bookmarkView.parentElement.removeChild(this.bookmarkView);this.bookmarkView.hasChildNodes();)this.bookmarkView.removeChild(this.bookmarkView.lastChild);this.bookmarkRequestHandler&&this.bookmarkRequestHandler.clear()},s.prototype.destroy=function(){this.clear()},s.prototype.getModuleName=function(){return"BookmarkView"},s}(),RS=function(){function s(e,t){var i=this;this.isTextSelection=!1,this.selectionStartPage=null,this.isBackwardPropagatedSelection=!1,this.contextMenuHeight=144,this.selectionRangeArray=[],this.selectionAnchorTouch=null,this.selectionFocusTouch=null,this.scrollMoveTimer=0,this.isMouseLeaveSelection=!1,this.isTouchSelection=!1,this.previousScrollDifference=0,this.topStoreLeft=null,this.topStoreRight=null,this.isTextSearched=!1,this.isSelectionStartTriggered=!1,this.allTextContent="",this.onLeftTouchSelectElementTouchStart=function(n){i.initiateSelectionByTouch()},this.onRightTouchSelectElementTouchStart=function(n){i.initiateSelectionByTouch()},this.onLeftTouchSelectElementTouchEnd=function(n){i.terminateSelectionByTouch(n)},this.onRightTouchSelectElementTouchEnd=function(n){i.terminateSelectionByTouch(n)},this.onLeftTouchSelectElementTouchMove=function(n){var r;n.preventDefault(),n.target.style.zIndex="0";var l=i.dropDivElementRight,d=i.isTouchedWithinContainer(n);if(l&&d){var h=l.getBoundingClientRect(),p=n.changedTouches[0].clientX,f=n.changedTouches[0].clientY;if(n.target.style.zIndex="1000",r=i.getNodeElement(void 0,p,f,n,r)){var c=Math.sqrt((f-h.top)*(f-h.top)+(p-h.left)*(p-h.left)),u=i.isCloserTouchScroll(c),m=!1;if(f<=h.top?(i.dropElementLeft.style.transform="rotate(0deg)",i.dropElementRight.style.transform="rotate(-90deg)",m=i.selectTextByTouch(r.parentElement,p,f,!1,"left",u)):(i.dropElementLeft.style.transform="rotate(-90deg)",i.dropElementRight.style.transform="rotate(0deg)",m=i.selectTextByTouch(r.parentElement,p,f,!0,"left",u)),m){var g=i.dropDivElementLeft.getBoundingClientRect(),v=i.pdfViewerBase.pageSize[i.pdfViewerBase.currentPageNumber-1].top,y=i.getClientValueTop(f,i.pdfViewerBase.currentPageNumber-1),C=p-i.pdfViewerBase.getElement("_pageDiv_"+(i.pdfViewerBase.currentPageNumber-1)).getBoundingClientRect().left;i.dropDivElementLeft.style.top=v*i.pdfViewerBase.getZoomFactor()+y+"px",i.topStoreLeft={pageTop:v,topClientValue:i.getMagnifiedValue(y),pageNumber:i.pdfViewerBase.currentPageNumber-1,left:i.getMagnifiedValue(C),isHeightNeeded:!1},i.dropDivElementLeft.style.left=p-i.pdfViewerBase.viewerContainer.getBoundingClientRect().left-g.width/2+"px",i.previousScrollDifference=c}}}},this.onRightTouchSelectElementTouchMove=function(n){var r;n.preventDefault(),n.target.style.zIndex="0";var l=i.dropDivElementLeft,d=i.isTouchedWithinContainer(n);if(l&&d){var h=l.getBoundingClientRect(),p=n.changedTouches[0].clientX,f=n.changedTouches[0].clientY;if(n.target.style.zIndex="1000",r=i.getNodeElement(void 0,p,f,n,r)){var c=Math.sqrt((f-h.top)*(f-h.top)+(p-h.left)*(p-h.left)),u=i.isCloserTouchScroll(c),m=!1;if(f>=h.top?(i.dropElementRight.style.transform="rotate(-90deg)",i.dropElementLeft.style.transform="rotate(0deg)",m=i.selectTextByTouch(r.parentElement,p,f,!0,"right",u)):(i.dropElementRight.style.transform="rotate(0deg)",i.dropElementLeft.style.transform="rotate(-90deg)",m=i.selectTextByTouch(r.parentElement,p,f,!1,"right",u)),m){var g=i.pdfViewerBase.pageSize[i.pdfViewerBase.currentPageNumber-1].top,v=i.getClientValueTop(f,i.pdfViewerBase.currentPageNumber-1),y=i.dropDivElementRight.getBoundingClientRect();i.dropDivElementRight.style.top=g*i.pdfViewerBase.getZoomFactor()+v+"px";var C=p-i.pdfViewerBase.getElement("_pageDiv_"+(i.pdfViewerBase.currentPageNumber-1)).getBoundingClientRect().left;i.topStoreRight={pageTop:g,topClientValue:i.getMagnifiedValue(v),pageNumber:i.pdfViewerBase.currentPageNumber-1,left:i.getMagnifiedValue(C),isHeightNeeded:!1},i.dropDivElementRight.style.left=p-i.pdfViewerBase.viewerContainer.getBoundingClientRect().left-y.width/2+"px",i.previousScrollDifference=c}}}},this.pdfViewer=e,this.pdfViewerBase=t}return s.prototype.textSelectionOnMouseMove=function(e,t,i,n){var o=e;if(this.isTextSearched=!0,o.nodeType===o.TEXT_NODE){!this.isSelectionStartTriggered&&!this.pdfViewerBase.getTextMarkupAnnotationMode()&&(this.pdfViewer.fireTextSelectionStart(this.pdfViewerBase.currentPageNumber),this.isSelectionStartTriggered=!0),this.isBackwardPropagatedSelection=!1;var r=o.ownerDocument.createRange(),l=window.getSelection();if(null!==l.anchorNode){var d=l.anchorNode.compareDocumentPosition(l.focusNode);(!d&&l.anchorOffset>l.focusOffset||d===Node.DOCUMENT_POSITION_PRECEDING)&&(this.isBackwardPropagatedSelection=!0)}r.selectNodeContents(o);for(var h=0,p=r.endOffset;h<p;){r.setStart(o,h),r.setEnd(o,h+1);var c=(f=r.getBoundingClientRect()).right;n&&(c=parseInt(f.right.toString())),f.left<=t&&c>=t&&parseInt(f.top.toString())<=i&&f.bottom>=i&&(null!==l.anchorNode&&l.anchorNode.parentNode.classList.contains("e-pv-text")&&r.setStart(l.anchorNode,l.anchorOffset),l.removeAllRanges(),l.addRange(r),this.isTextSelection||(this.selectionStartPage=this.pdfViewerBase.currentPageNumber-1),this.isTextSelection=!0,!!document.documentMode||l.extend(o,this.isBackwardPropagatedSelection||n?h:h+1),r.detach()),h+=1}var m=this.pdfViewer.annotationModule;if(m&&m.textMarkupAnnotationModule&&m.textMarkupAnnotationModule.isEnableTextMarkupResizer(m.textMarkupAnnotationModule.currentTextMarkupAddMode)){var g=document.getElementById(this.pdfViewer.element.id+"_droplet_left");if(this.pdfViewerBase.isSelection&&l&&l.rangeCount>0){var y=l.getRangeAt(0).getBoundingClientRect();this.pdfViewer.annotation.textMarkupAnnotationModule.updateLeftposition(y.left,y.top),this.pdfViewerBase.isSelection=!1}else g&&"none"===g.style.display&&this.pdfViewer.annotation.textMarkupAnnotationModule.updateLeftposition(t,i);this.pdfViewer.annotation.textMarkupAnnotationModule.updatePosition(t,i)}}else for(var S=0;S<o.childNodes.length;S++)if(o.childNodes[S].nodeType===o.TEXT_NODE){var f;(f=(r=this.getSelectionRange(S,o)).getBoundingClientRect()).left<=t&&f.right>=parseInt(t.toString())&&parseInt(f.top.toString())<=i&&f.bottom>=i?(r.detach(),this.textSelectionOnMouseMove(o.childNodes[S],t,i,n)):r.detach()}},s.prototype.textSelectionOnDrag=function(e,t,i,n){var o=e;if(this.isTextSearched=!0,o.nodeType===o.TEXT_NODE){this.isBackwardPropagatedSelection=!1;var r=o.ownerDocument.createRange(),l=window.getSelection();if(null!==l.anchorNode){var d=l.anchorNode.compareDocumentPosition(l.focusNode);(!d&&l.anchorOffset>l.focusOffset||d===Node.DOCUMENT_POSITION_PRECEDING)&&(this.isBackwardPropagatedSelection=!0)}r.selectNodeContents(o);for(var h=0,p=r.endOffset;h<p;){if(r.setStart(o,h),r.setEnd(o,h+1),(f=r.getBoundingClientRect()).left<=t&&f.right>=t&&parseInt(f.top.toString())<=i&&f.bottom>=i)return n?(null!==l.anchorNode&&l.anchorNode.parentNode.classList.contains("e-pv-text")&&r.setStart(l.anchorNode,l.anchorOffset),l.removeAllRanges(),l.addRange(r),l.extend(o,h)):l.focusNode&&(r.setEnd(l.focusNode,l.focusOffset),l.removeAllRanges(),l.addRange(r)),this.isTextSelection||(this.selectionStartPage=this.pdfViewerBase.currentPageNumber-1),this.isTextSelection=!0,r.detach(),!0;h+=1}if(this.pdfViewerBase.isSelection){var u=l.getRangeAt(0).getBoundingClientRect();this.pdfViewer.annotation.textMarkupAnnotationModule.updateLeftposition(u.left,u.top),this.pdfViewerBase.isSelection=!1}this.pdfViewer.annotation.textMarkupAnnotationModule.updatePosition(t,i)}else for(var v=0;v<o.childNodes.length;v++)if(o.childNodes[v].nodeType===o.TEXT_NODE){var f;(f=(r=this.getSelectionRange(v,o)).getBoundingClientRect()).left<=t&&f.right>=t&&parseInt(f.top.toString())<=i&&f.bottom>=i?(r.detach(),this.textSelectionOnDrag(o.childNodes[v],t,i,n)):r.detach()}return null},s.prototype.selectTextRegion=function(e,t){for(var i=null,n=e-1,o=0;o<t.length;o++){var r=t[o],l=(r.left?r.left:r.Left)*this.pdfViewerBase.getZoomFactor(),d=(r.top?r.top:r.Top)*this.pdfViewerBase.getZoomFactor(),h=(r.width?r.width:r.Width)*this.pdfViewerBase.getZoomFactor(),f=this.pdfViewerBase.getElement("_textLayer_"+n);if(f){for(var c=f.childNodes,u=0;u<c.length;u++)if(c[u]){var m=c[u].getBoundingClientRect(),g=this.getClientValueTop(m.top,n),v=m.left-this.pdfViewerBase.getElement("_pageDiv_"+n).getBoundingClientRect().left,y=v+m.width,b=parseInt(c[u].style.left),C=parseInt(c[u].style.top),S=this.checkLeftBounds(v,b,y,l),x=this.checkTopBounds(g,C,d);if(S&&x){i=c[u];break}}if(null!=i){var V=this.pdfViewerBase.getElement("_textLayer_"+n).getBoundingClientRect();this.textSelectionOnMouseMove(i,l+V.left,d+V.top,!1),t.length-1===o&&this.textSelectionOnMouseMove(i,l+V.left+h,d+V.top,!1)}}}},s.prototype.checkLeftBounds=function(e,t,i,n){var o=!1;return(e===parseInt(n.toString())||parseInt(e.toString())===parseInt(n.toString())||e+1===parseInt(n.toString())||e-1===parseInt(n.toString())||t===parseInt(n.toString())||t===n||i>=n&&e<=n)&&(o=!0),o},s.prototype.checkTopBounds=function(e,t,i){var n=!1;return(e===parseInt(i.toString())||parseInt(e.toString())===parseInt(i.toString())||parseInt((e+1).toString())===parseInt(i.toString())||parseInt((e-1).toString())===parseInt(i.toString())||t===parseInt(i.toString())||t===i)&&(n=!0),n},s.prototype.textSelectionOnMouseLeave=function(e){var t=this;e.preventDefault(),this.pdfViewer.magnificationModule&&"fitToPage"===this.pdfViewer.magnificationModule.fitType||(this.scrollMoveTimer=e.clientY>this.pdfViewerBase.viewerContainer.offsetTop?setInterval(function(){t.scrollForwardOnSelection()},500):setInterval(function(){t.scrollBackwardOnSelection()},500))},s.prototype.scrollForwardOnSelection=function(){this.isMouseLeaveSelection=!0,this.pdfViewerBase.viewerContainer.scrollTop=this.pdfViewerBase.viewerContainer.scrollTop+200,this.stichSelectionOnScroll(this.pdfViewerBase.currentPageNumber-1)},s.prototype.scrollBackwardOnSelection=function(){this.isMouseLeaveSelection=!0,this.pdfViewerBase.viewerContainer.scrollTop=this.pdfViewerBase.viewerContainer.scrollTop-200,this.stichSelectionOnScroll(this.pdfViewerBase.currentPageNumber-1)},s.prototype.clear=function(){this.scrollMoveTimer&&(this.isMouseLeaveSelection=!1,clearInterval(this.scrollMoveTimer))},s.prototype.selectAWord=function(e,t,i,n){if(e.nodeType===e.TEXT_NODE){var o=window.getSelection();(r=e.ownerDocument.createRange()).selectNodeContents(e);for(var l=0,d=r.endOffset;l<d;){if(r.setStart(e,l),r.setEnd(e,l+1),(h=r.getBoundingClientRect()).left<=t&&h.right>=t&&h.top<=i&&h.bottom>=i){for(var p=e.textContent,f=[],c=void 0,u=void 0,m=0;m<p.length;m++)" "===p[m]&&f.push(m);for(var g=0;g<f.length;g++){if(l===f[g]&&(c=f[g],u=f[g]),f[0]>l){c=0,u=f[g];break}l>f[g]&&l<f[g+1]?(c=f[g],u=f[g+1]):l>f[g]&&(f[g+1]||(c=f[g]))}u||(u=p.length),r.setStart(e,0===c?c:c+1),r.setEnd(e,u),o.removeAllRanges(),o.addRange(r),this.isTextSelection=!0;var v=(0,a.le)(r.startContainer.parentElement)?r.startContainer.parentNode:r.startContainer.parentElement;this.selectionStartPage=parseInt(v.id.split("_text_")[1]),n&&(this.selectionAnchorTouch={anchorNode:o.anchorNode.parentElement.id,anchorOffset:o.anchorOffset},this.selectionFocusTouch={focusNode:o.focusNode.parentElement.id,focusOffset:o.focusOffset}),a.AR.isIE||r.detach();break}l+=1}}else for(m=0;m<e.childNodes.length;m++){var r,h;(h=(r=this.getSelectionRange(m,e)).getBoundingClientRect()).left<=t&&h.right>=t&&h.top<=i&&h.bottom>=i?(r.detach(),this.selectAWord(e.childNodes[m],t,i,n)):r.detach()}},s.prototype.getSelectionRange=function(e,t){var i=t.childNodes[e].ownerDocument.createRange();return i.selectNodeContents(t.childNodes[e]),i},s.prototype.selectEntireLine=function(e){var t=[],i=e.target,n=i.getBoundingClientRect(),o=parseInt((n.top+n.height/2).toString()),r=parseInt(e.target.id.split("_text_")[1]),l=document.querySelectorAll('div[id*="'+this.pdfViewer.element.id+"_text_"+r+'"]');if(i.classList.contains("e-pv-text")){this.pdfViewer.fireTextSelectionStart(r+1);for(var d=0;d<l.length;d++){var h=l[d].getBoundingClientRect(),p=parseInt(h.top.toString()),f=parseInt(h.bottom.toString());if(p<=o&&f>o&&n.bottom+10>f){var c=l[d].id;""!==c&&t.push(c)}}var u=window.getSelection();u.removeAllRanges();var m=document.createRange(),g=t.length-1,v=document.getElementById(t[0]),y=document.getElementById(t[g]);y.childNodes.length>0?(m.setStart(v.childNodes[0],0),m.setEnd(y.childNodes[0],y.textContent.length)):(m.setStart(v.childNodes[0],0),m.setEnd(y,1)),this.selectionStartPage=parseInt(m.startContainer.parentElement.id.split("_text_")[1]),u.addRange(m),this.isTextSelection=!0,null!=u&&"MouseUp"===this.pdfViewer.contextMenuSettings.contextMenuAction&&this.calculateContextMenuPosition(e.clientY,e.clientY)}},s.prototype.enableTextSelectionMode=function(){this.pdfViewerBase.isTextSelectionDisabled=!1,this.pdfViewerBase.viewerContainer.classList.remove("e-disable-text-selection"),this.pdfViewerBase.viewerContainer.classList.add("e-enable-text-selection"),this.pdfViewerBase.viewerContainer.addEventListener("selectstart",function(){return!0})},s.prototype.clearTextSelection=function(){if(this.isTextSelection){if(this.pdfViewerBase.textLayer.clearDivSelection(),window.getSelection&&window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges(),this.pdfViewer.linkAnnotationModule){var e=this.pdfViewerBase.currentPageNumber-3,t=this.pdfViewer.currentPageNumber+1;t=t<this.pdfViewerBase.pageCount-1?t:this.pdfViewerBase.pageCount-1;for(var i=e=e<0?0:e;i<=t;i++)this.pdfViewer.linkAnnotationModule.modifyZindexForTextSelection(i,!1)}this.pdfViewer.annotation&&this.pdfViewer.annotation.textMarkupAnnotationModule&&this.pdfViewer.annotation.textMarkupAnnotationModule.showHideDropletDiv(!0),this.selectionRangeArray=[],this.isTextSelection=!1,this.isTouchSelection=!1,this.pdfViewer.textSearchModule&&this.pdfViewer.textSearchModule.searchAfterSelection(),this.pdfViewerBase.contextMenuModule.close(),this.removeTouchElements()}},s.prototype.removeTouchElements=function(){this.dropDivElementLeft&&(this.dropDivElementLeft.parentElement.removeChild(this.dropDivElementLeft),this.dropDivElementLeft=null,this.dropElementLeft.style.transform="rotate(0deg)"),this.dropDivElementRight&&(this.dropDivElementRight.parentElement.removeChild(this.dropDivElementRight),this.dropDivElementRight=null,this.dropElementRight.style.transform="rotate(-90deg)")},s.prototype.resizeTouchElements=function(){var e=this.pdfViewerBase.viewerContainer.getBoundingClientRect().left;if(this.dropDivElementLeft){var t=this.dropDivElementLeft.getBoundingClientRect(),i=0,n=this.pdfViewerBase.getElement("_pageDiv_"+this.topStoreLeft.pageNumber).getBoundingClientRect();this.dropDivElementLeft.style.left=parseFloat(this.topStoreLeft.left.toString())*this.pdfViewerBase.getZoomFactor()+n.left-e-t.width/2+"px",this.topStoreLeft.isHeightNeeded&&(i=t.height/2*this.pdfViewerBase.getZoomFactor()),this.dropDivElementLeft.style.top=parseFloat(this.topStoreLeft.pageTop.toString())*this.pdfViewerBase.getZoomFactor()+parseFloat(this.topStoreLeft.topClientValue.toString())*this.pdfViewerBase.getZoomFactor()+i+"px"}if(this.dropDivElementRight){t=this.dropDivElementRight.getBoundingClientRect(),i=0;var o=this.pdfViewerBase.getElement("_pageDiv_"+this.topStoreRight.pageNumber).getBoundingClientRect();this.dropDivElementRight.style.left=parseFloat(this.topStoreRight.left.toString())*this.pdfViewerBase.getZoomFactor()+o.left-e-t.width/2+"px",this.topStoreRight.isHeightNeeded&&(i=t.height/2*this.pdfViewerBase.getZoomFactor()),this.dropDivElementRight.style.top=parseFloat(this.topStoreRight.pageTop.toString())*this.pdfViewerBase.getZoomFactor()+parseFloat(this.topStoreRight.topClientValue.toString())*this.pdfViewerBase.getZoomFactor()+i+"px"}},s.prototype.textSelectionOnMouseup=function(e){if(this.clear(),null!==window.getSelection().anchorNode){if(this.isMouseLeaveSelection=!1,this.isSelectionStartTriggered=!1,this.maintainSelectionOnZoom(!0,!1),this.fireTextSelectEnd(),this.pdfViewerBase.textLayer.getTextSearchStatus()){this.pdfViewerBase.textLayer.clearDivSelection();for(var i=this.pdfViewer.textSearchModule.getIndexes(),n=parseFloat(i.lowerPageValue.toString()),o=parseFloat(i.higherPageValue.toString()),r=n;r<o;r++)this.applySelectionRangeOnScroll(r);this.pdfViewer.textSearchModule.searchAfterSelection()}else this.applySpanForSelection();this.pdfViewer.linkAnnotationModule&&this.pdfViewer.linkAnnotationModule.modifyZindexForTextSelection(this.pdfViewerBase.currentPageNumber-1,!1),this.isTextSearched&&"MouseUp"===this.pdfViewer.contextMenuSettings.contextMenuAction&&(this.calculateContextMenuPosition(e.clientY,e.clientX),this.isTextSearched=!1)}else this.pdfViewerBase.textLayer.clearDivSelection(),this.pdfViewer.textSearchModule&&this.pdfViewer.textSearchModule.searchAfterSelection(),this.pdfViewerBase.contextMenuModule.close(),this.removeTouchElements()},s.prototype.fireTextSelectEnd=function(){if(0!==this.selectionRangeArray.length){for(var e=0,t="",i=[],n=0;n<this.selectionRangeArray.length;n++){t+=this.selectionRangeArray[n].textContent;for(var o=0;o<this.selectionRangeArray[n].rectangleBounds.length;o++){var r=this.selectionRangeArray[n].rectangleBounds[o];i.push({left:r.left,right:r.right,top:r.top,bottom:r.bottom,width:r.width,height:r.height,pageIndex:this.selectionRangeArray[n].pageNumber+1})}(this.selectionRangeArray[n].isBackward&&0===n||!this.selectionRangeArray[n].isBackward&&n===this.selectionRangeArray.length-1)&&(e=this.selectionRangeArray[n].pageNumber+1)}this.pdfViewer.fireTextSelectionEnd(e,t,i)}},s.prototype.maintainSelectionOnZoom=function(e,t){var i=window.getSelection();if("Range"===i.type||!i.type&&!i.isCollapsed){var n=this.pdfViewerBase.textLayer.isBackWardSelection(i);if(null!==i.anchorNode){var o=parseInt(this.getNodeElementFromNode(i.anchorNode).id.split("_text_")[1]),r=parseInt(this.getNodeElementFromNode(i.focusNode).id.split("_text_")[1]);if(this.isTouchSelection&&isNaN(r)&&i.focusNode===this.pdfViewerBase.pageContainer){var d=this.pdfViewerBase.pageContainer.lastChild;d.classList.contains("e-pv-touch-select-drop")?r=parseInt(d.previousSibling.previousSibling.id.split("_pageDiv_")[1]):d.classList.contains("e-pv-page-div")&&(r=parseInt(d.id.split("_pageDiv_")[1]))}if(n)for(var h=o;h>=r;h--)this.maintainSelectionOnScroll(h,t);else for(h=o;h<=r;h++)this.maintainSelectionOnScroll(h,t)}e||i.removeAllRanges()}},s.prototype.isSelectionAvailableOnScroll=function(e){for(var t=!1,i=this.selectionRangeArray,n=0;n<i.length;n++)if(null!==i[n]&&e===i[n].pageNumber){t=!0,this.isTouchSelection&&!this.pdfViewerBase.getMagnified()&&(t=!1);break}return t},s.prototype.applySelectionRangeOnScroll=function(e){this.isMouseLeaveSelection?this.applySelectionMouseScroll(e):this.applySelectionRange(e)},s.prototype.getSelectionRangeFromArray=function(e){for(var t=!1,i=null,n=this.selectionRangeArray,o=0;o<n.length;o++)if(null!==n[o]&&e===n[o].pageNumber){i=n[o],t=!0;break}return{isSelectionAvailable:t,selectionRange:i}},s.prototype.applySelectionRange=function(e){var t=this.getSelectionRangeFromArray(e),i=t.isSelectionAvailable,n=document.getElementById(this.pdfViewer.element.id+"_textLayer_"+e);if(n&&i&&0!==n.childNodes.length){var o=t.selectionRange,r=void 0,l=void 0,d=void 0,h=void 0;if(o.isBackward){var p=parseInt(o.endNode.split("_text_")[1].split("_")[1]),f=parseInt(o.startNode.split("_text_")[1].split("_")[1]);p<f?(r=p,d=o.endOffset,h=o.startOffset,l=f):(r=f,d=o.endOffset,l=p,h=o.startOffset)}else r=parseInt(o.startNode.split("text_")[1].split("_")[1]),l=parseInt(o.endNode.split("text_")[1].split("_")[1]),d=o.startOffset,h=o.endOffset;window.getSelection().removeAllRanges(),this.pdfViewerBase.textLayer.applySpanForSelection(e,e,r,l,d,h),this.pdfViewer.textSearchModule&&this.pdfViewer.textSearchModule.searchAfterSelection()}},s.prototype.applySelectionMouseScroll=function(e){var t=this.getSelectionRangeFromArray(e);if(t.isSelectionAvailable){var n=t.selectionRange,o=window.getSelection(),r=document.getElementById(n.startNode).childNodes[0],l=document.getElementById(n.endNode).childNodes[0],d=document.createRange();if(null===o.anchorNode)n.isBackward?(d.setStart(l,n.endOffset),d.setEnd(r,n.startOffset)):(d.setStart(r,n.startOffset),d.setEnd(l,n.endOffset));else{var h=isNaN(parseInt(o.anchorNode.parentElement.id.split("_text_")[1]))?parseInt(o.anchorNode.id.split("_pageDiv_")[1]):parseInt(o.anchorNode.parentElement.id.split("_text_")[1]);isNaN(h)&&(h=parseInt(o.anchorNode.id.split("_text_")[1]));var p=isNaN(parseInt(o.focusNode.parentElement.id.split("_text_")[1]))?parseInt(o.focusNode.id.split("_pageDiv_")[1]):parseInt(o.focusNode.parentElement.id.split("_text_")[1]),f=parseInt(n.startNode.split("_text_")[1]);if(h===p&&h===f)n.isBackward?(d.setStart(l,n.endOffset),d.setEnd(r,n.startOffset)):(d.setStart(r,n.startOffset),d.setEnd(l,n.endOffset));else if(isNaN(h))isNaN(h)&&(n.isBackward?(d.setStart(l,n.endOffset),d.setEnd(r,n.startOffset)):(d.setStart(r,n.startOffset),d.setEnd(l,n.endOffset)));else if(isNaN(h)||n.isBackward){var c=this.pdfViewerBase.textLayer.isBackWardSelection(o);if(h>f&&f>p&&h!==p)c?o.extend(o.focusNode,o.focusOffset):(d.setStart(o.anchorNode,o.anchorOffset),d.setEnd(o.focusNode,o.focusOffset));else if(h<f&&f<p&&h!==p)c?o.extend(o.focusNode,o.focusOffset):(d.setStart(o.anchorNode,o.anchorOffset),d.setEnd(o.focusNode,o.focusOffset));else if(h<f)c?f!==this.selectionRangeArray[0].pageNumber?this.extendCurrentSelection(l.parentElement,n.endOffset,o,d):this.extendCurrentSelection(r.parentElement,n.startOffset,o,d):f!==this.selectionRangeArray[0].pageNumber?(d.setStart(o.anchorNode,o.anchorOffset),d.setEnd(l,n.endOffset)):(d.setStart(o.anchorNode,o.anchorOffset),d.setEnd(r,n.startOffset));else if(h===f)f===p?(d.setStart(r,n.startOffset),d.setEnd(r,n.startOffset),o.removeAllRanges(),o.addRange(d),d=document.createRange(),o.extend(l,n.endOffset)):c?this.extendCurrentSelection(l.parentElement,n.endOffset,o,d):(d.setStart(l,n.endOffset),d.setEnd(o.focusNode,o.focusOffset));else if(p===f)c?o.extend(o.focusNode,o.focusOffset):(d.setStart(o.anchorNode,o.anchorOffset),d.setEnd(o.focusNode,o.focusOffset));else if(h>f){var u=parseInt(n.startNode.split("_"+f+"_")[1]),m=parseInt(n.endNode.split("_"+f+"_")[1]);c?f!==this.selectionRangeArray[0].pageNumber?u<m?this.extendCurrentSelection(r.parentElement,n.startOffset,o,d):(d.setStart(l.parentElement,n.endOffset),d.setEnd(o.anchorNode,o.anchorOffset)):this.extendCurrentSelection(l.parentElement,n.endOffset,o,d):u<m?(d.setStart(r,n.startOffset),d.setEnd(o.focusNode,o.focusOffset)):(d.setStart(l,n.endOffset),d.setEnd(o.focusNode,o.focusOffset))}}else h<f&&f<p&&h!==p?(d.setStart(o.anchorNode,o.anchorOffset),d.setEnd(o.focusNode,o.focusOffset)):h<f?(d.setStart(o.anchorNode,o.anchorOffset),d.setEnd(l,n.endOffset)):(d.setStart(r,n.startOffset),d.setEnd(o.focusNode,o.focusOffset))}""!==d.toString()&&(o.removeAllRanges(),o.addRange(d))}},s.prototype.maintainSelectionOnScroll=function(e,t){var i=this.isSelectionAvailableOnScroll(e);this.isTextSelection&&!i&&this.maintainSelection(e,t)},s.prototype.maintainSelection=function(e,t){var i=window.getSelection();if(this.isTextSelection&&("Range"===i.type||!i.type&&!i.isCollapsed)){var n=parseInt(this.getNodeElementFromNode(i.anchorNode).id.split("_text_")[1]),o=parseInt(this.getNodeElementFromNode(i.focusNode).id.split("_text_")[1]);if(isNaN(o)&&null!==i.anchorNode)if(this.pdfViewerBase.textLayer.isBackWardSelection(i))o=parseInt(this.pdfViewerBase.pageContainer.firstChild.id.split("_pageDiv_")[1]);else{var l=this.pdfViewerBase.pageContainer.lastChild;o=l.classList.contains("e-pv-touch-select-drop")?parseInt(l.previousSibling.previousSibling.id.split("_pageDiv_")[1]):parseInt(l.id.split("_pageDiv_")[1])}var d=this.pdfViewerBase.textLayer.isBackWardSelection(i);if(this.isTouchSelection&&e>o&&e>n)return;if(n===o){var h=null,p=this.getSelectionBounds(i.getRangeAt(0),e),f=this.getSelectionRectangleBounds(i.getRangeAt(0),e),c=1===this.getNodeElementFromNode(i.anchorNode).childNodes.length?i.anchorOffset:this.getCorrectOffset(i.anchorNode,i.anchorOffset),u=1===this.getNodeElementFromNode(i.focusNode).childNodes.length?i.focusOffset:this.getCorrectOffset(i.focusNode,i.focusOffset);h={isBackward:d,startNode:this.getNodeElementFromNode(i.anchorNode).id,startOffset:c,endNode:this.getNodeElementFromNode(i.focusNode).id,endOffset:u,textContent:this.allTextContent,pageNumber:e,bound:p,rectangleBounds:f},this.pushSelectionRangeObject(h,e)}else(h=this.createRangeObjectOnScroll(e,n,o))&&(this.pushSelectionRangeObject(h,e),t&&this.stichSelection(d,i,e))}},s.prototype.getCorrectOffset=function(e,t){for(var i=0,n=this.getNodeElementFromNode(e),o=0;o<n.childNodes.length;o++){if(n.childNodes[o]===e){i+=t;break}i+=n.childNodes[o].textContent.length}return i},s.prototype.pushSelectionRangeObject=function(e,t){if(this.isTouchSelection){var i=this.selectionRangeArray.filter(function(p){return p.pageNumber===t});if(i.length>0){var n=this.selectionRangeArray.indexOf(i[0]);return void this.selectionRangeArray.splice(n,1,e)}}var o=this.selectionRangeArray.filter(function(p){return p.pageNumber===t+1});if(0===o.length)if(this.isTouchSelection&&0!==this.selectionRangeArray.length){var r=this.selectionRangeArray.filter(function(p){return p.pageNumber===t-1});if(0!==r.length){var l=this.selectionRangeArray.indexOf(r[0]);this.selectionRangeArray.splice(l+1,0,e)}else t<this.selectionRangeArray[0].pageNumber?this.selectionRangeArray.splice(0,0,e):this.selectionRangeArray.push(e)}else this.selectionRangeArray.push(e);else{var h=this.selectionRangeArray.indexOf(o[0]);this.selectionRangeArray.splice(h,0,e)}},s.prototype.extendCurrentSelection=function(e,t,i,n){var o=i.focusOffset,r=i.focusNode.parentElement.id,l=isNaN(parseInt(r.split("_text_")[1]))?parseInt(i.focusNode.id.split("_pageDiv_")[1]):parseInt(r.split("_text_")[1]);isNaN(parseInt(r.split("_text_")[1]))&&(r=this.pdfViewerBase.getElement("_textLayer_"+(l+1)).firstChild.id),n.setStart(e.childNodes[0],t),n.setEnd(e.childNodes[0],t),i.removeAllRanges(),i.addRange(n),i.extend(document.getElementById(r).childNodes[0],o)},s.prototype.stichSelection=function(e,t,i){var o,n=document.createRange();if(e)if(o=document.getElementById(this.pdfViewer.element.id+"_textLayer_"+(i-1)))(r=o.lastChild)||(r=(o=document.getElementById(this.pdfViewer.element.id+"_textLayer_"+(i-2))).lastChild),this.extendCurrentSelection(r,this.getTextLastLength(r),t,n);else{var r;o=document.getElementById(this.pdfViewer.element.id+"_textLayer_"+(i+1)),this.extendCurrentSelection(r=o.firstChild,0,t,n)}else if(o=document.getElementById(this.pdfViewer.element.id+"_textLayer_"+(i+1))){var l=o.firstChild;l||(l=(o=document.getElementById(this.pdfViewer.element.id+"_textLayer_"+(i+2))).firstChild),n.setStart(l.childNodes[0],0),n.setEnd(t.focusNode,t.focusOffset),t.removeAllRanges(),t.addRange(n)}},s.prototype.textSelectionOnMouseWheel=function(e){this.isMouseLeaveSelection=!0,this.stichSelectionOnScroll(e)},s.prototype.stichSelectionOnScroll=function(e){var t=window.getSelection();if(this.isTextSelection){var i=parseInt(this.getNodeElementFromNode(t.anchorNode).id.split("_text_")[1]),n=parseInt(this.getNodeElementFromNode(t.focusNode).id.split("_text_")[1]),o=void 0;if(i!==e&&n!==e)if(this.pdfViewerBase.textLayer.isBackWardSelection(t))(o=document.getElementById(this.pdfViewer.element.id+"_textLayer_"+(e-1)))&&(l=o.firstChild)&&this.extendSelectionStich(l.childNodes[0],0,t);else if(o=document.getElementById(this.pdfViewer.element.id+"_textLayer_"+(e-1))){var l;(l=o.lastChild)?this.extendSelectionStich(l.childNodes[0]?l.childNodes[0]:l,this.getTextLastLength(l),t):(o=this.pdfViewerBase.getElement("_textLayer_"+e),this.extendSelectionStich(o.firstChild.childNodes[0],0,t))}this.maintainSelectionArray()}},s.prototype.extendSelectionStich=function(e,t,i){i.extend&&i.extend(e,t)},s.prototype.createRangeObjectOnScroll=function(e,t,i){var o=window.getSelection();if(null!==o.anchorNode){var r=this.pdfViewerBase.textLayer.isBackWardSelection(o),l=void 0,d=void 0,h=void 0,p=void 0,f=document.getElementById(this.pdfViewer.element.id+"_textLayer_"+e);if(f.childNodes){if(r?e===t?(l=this.getNodeElementFromNode(o.anchorNode),d=f.firstChild,h=this.getCorrectOffset(o.anchorNode,o.anchorOffset),p=0):e<t&&e>i?(l=f.firstChild,h=0,p=this.getTextLastLength(d=f.lastChild)):e===i&&(l=this.getNodeElementFromNode(o.focusNode),d=f.lastChild,h=this.getCorrectOffset(o.focusNode,o.focusOffset),p=this.getTextLastLength(d)):e===t?(l=this.getNodeElementFromNode(o.anchorNode),d=f.lastChild,h=this.getCorrectOffset(o.anchorNode,o.anchorOffset),p=this.getTextLastLength(d)):e>t&&e<i?(l=f.firstChild,h=0,p=this.getTextLastLength(d=f.lastChild)):e===i&&(l=f.firstChild,-1!==this.getNodeElementFromNode(o.focusNode).id.indexOf(i.toString())?(d=this.getNodeElementFromNode(o.focusNode),p=this.getCorrectOffset(o.focusNode,o.focusOffset)):(d=document.getElementById(this.pdfViewer.element.id+"_textLayer_"+i).lastChild,p=this.getTextLastLength(d)),h=0),l&&d){var u=this.getSelectionRangeObject(l.id,h,d.id,p,e),g=(u.toString(),this.getSelectionBounds(u,e)),v=this.getSelectionRectangleBounds(u,e);return{isBackward:r,startNode:l.id,startOffset:h,endNode:d.id,endOffset:p,textContent:this.allTextContent,pageNumber:e,bound:g,rectangleBounds:v}}return null}}return null},s.prototype.getSelectionRangeObject=function(e,t,i,n,o){var r=document.getElementById(e),l=document.getElementById(i);r.childNodes[0]&&(r=r.childNodes[0]),l.childNodes[0]&&(l=l.childNodes[0]);var d=parseInt(e.split("_"+o+"_")[1]),h=parseInt(i.split("_"+o+"_")[1]),p=document.createRange();return d<=h?(p.setStart(r,t),p.setEnd(l,n)):(p.setStart(l,n),p.setEnd(r,t)),p},s.prototype.getSelectionBounds=function(e,t){var o=null;if(this.getNodeElementFromNode(e.startContainer)!==this.getNodeElementFromNode(e.endContainer)){var r=document.createRange(),l=this.createRangeForSelection(e.startContainer,e.endContainer,e.startOffset,e.endOffset,r);o=this.normalizeBounds(l.getBoundingClientRect(),t)}else o=this.normalizeBounds(e.getBoundingClientRect(),t);return o},s.prototype.getSelectionRectangleBounds=function(e,t){var i=[],n=this.getNodeElementFromNode(e.startContainer),o=this.getNodeElementFromNode(e.endContainer),r=null,l=[];if(this.allTextContent="",n!==o){for(var d=0,h=0,f=this.pdfViewerBase.textLayer.getPageIndex(e.startContainer),c=this.pdfViewerBase.textLayer.getTextIndex(e.startContainer,f),u=this.pdfViewerBase.textLayer.getPageIndex(e.endContainer),m=this.pdfViewerBase.textLayer.getTextIndex(e.endContainer,u),g=this.pdfViewerBase.getElement("_textLayer_"+u).childNodes,v=t===f?c:0;v<g.length;v++){var y=g[v];if(h=v===m?e.endOffset:y.textContent.length,0!==(d=v===c?e.startOffset:0)||0!==h){for(var b=document.createRange(),C=0;C<y.childNodes.length;C++){var S=y.childNodes[C];b.setStart(S,d),b.setEnd(S,h)}var x=this.normalizeBounds(b.getBoundingClientRect(),t);i.push(x);var V=b.toString();if(l.push(V),b.detach(),v===m)break}}for(var T=0;T<l.length;T++){var k=l[T];"\r\n"===k.slice(k.length-2)||T===l.length-1?this.allTextContent+=k:this.allTextContent+=k+"\r\n"}}else r=this.normalizeBounds(e.getBoundingClientRect(),t),this.allTextContent=e.toString(),i.push(r);return i},s.prototype.getTextId=function(e){var t=e.lastIndexOf("_"),i=e.substring(t+1,e.length);return parseInt(i)},s.prototype.normalizeBounds=function(e,t){var n=this.pdfViewerBase.getElement("_pageDiv_"+t);if(this.pdfViewerBase.isMixedSizeDocument){var o=this.pdfViewerBase.getElement("_textLayer_"+t);o&&(n=o)}var r=n.getBoundingClientRect();return{bottom:this.getMagnifiedValue(e.bottom-r.top),height:this.getMagnifiedValue(e.height),left:this.getMagnifiedValue(e.left-r.left),top:this.getMagnifiedValue(e.top-r.top),right:this.getMagnifiedValue(e.right-r.left),width:this.getMagnifiedValue(e.width)}},s.prototype.getMagnifiedValue=function(e){return e/this.pdfViewerBase.getZoomFactor()},s.prototype.getCurrentSelectionBounds=function(e){for(var t=null,i=this.selectionRangeArray,n=0;n<i.length;n++)null!==i[n]&&e===i[n].pageNumber&&(t=i[n].bound);return t},s.prototype.createRangeForSelection=function(e,t,i,n,o){return o.setStart(e,i),o.setEnd(t,n),o},s.prototype.maintainSelectionArray=function(){var e=this;if(0!==this.selectionRangeArray.length){var t=window.getSelection(),i=this.pdfViewerBase.textLayer.isBackWardSelection(t),n=isNaN(parseInt(this.getNodeElementFromNode(t.anchorNode).id.split("_text_")[1]))?parseInt(t.anchorNode.id.split("_pageDiv_")[1]):parseInt(this.getNodeElementFromNode(t.anchorNode).id.split("_text_")[1]);isNaN(n)&&(n=parseInt(t.anchorNode.id.split("_text_")[1]));var o=isNaN(parseInt(this.getNodeElementFromNode(t.focusNode).id.split("_text_")[1]))?parseInt(t.focusNode.id.split("_pageDiv_")[1]):parseInt(this.getNodeElementFromNode(t.focusNode).id.split("_text_")[1]);isNaN(o)&&(o=isNaN(parseInt(t.focusNode.id.split("_text_")[1]))?parseInt(t.focusNode.id.split("_textLayer_")[1]):parseInt(t.focusNode.id.split("_text_")[1]));var r=[];if((r=this.selectionRangeArray.filter(i?function(h){return!(o<h.pageNumber&&h.pageNumber<=e.selectionStartPage)}:function(h){return!(e.selectionStartPage<=h.pageNumber&&h.pageNumber<o)})).length>0){for(var l=0;l<r.length;l++){var d=this.selectionRangeArray.indexOf(r[l]);-1!==d&&this.selectionRangeArray.splice(d,1)}1===this.selectionRangeArray.length&&(this.selectionRangeArray[0].pageNumber===n||this.selectionRangeArray[0].pageNumber===o)&&(r=[])}}},s.prototype.applySpanForSelection=function(){var e=window.getSelection();if(e.anchorNode===e.focusNode&&e.anchorOffset===e.focusOffset&&!e.isCollapsed&&e.removeAllRanges(),null!==e.anchorNode&&this.pdfViewerBase.viewerContainer.contains(this.getNodeElementFromNode(e.anchorNode))){var i=void 0,n=void 0,o=void 0,r=void 0,l=void 0,d=void 0;if(this.pdfViewerBase.textLayer.isBackWardSelection(e))i=parseInt(this.getNodeElementFromNode(e.focusNode).id.split("_text_")[1]),n=parseInt(this.getNodeElementFromNode(e.anchorNode).id.split("_text_")[1]),o=parseInt(this.getNodeElementFromNode(e.focusNode).id.split("_text_")[1].split("_")[1]),r=parseInt(this.getNodeElementFromNode(e.anchorNode).id.split("_text_")[1].split("_")[1]),l=e.focusOffset,d=e.anchorOffset;else{var h=this.getNodeElementFromNode(e.anchorNode),p=this.getNodeElementFromNode(e.focusNode);i=-1!==h.id.indexOf("text_")?parseInt(h.id.split("text_")[1]):parseInt(h.id.split("_textLayer_")[1]),n=-1!==p.id.indexOf("text_")?parseInt(p.id.split("text_")[1]):parseInt(p.id.split("_textLayer_")[1]);var f=!1;if(this.isTouchSelection&&e.focusNode===this.pdfViewerBase.pageContainer){var c=this.pdfViewerBase.pageContainer.lastChild;if(c.classList.contains("e-pv-touch-select-drop")){var u=c.previousSibling.previousSibling;n=parseInt(u.id.split("_pageDiv_")[1]),p=this.pdfViewerBase.getElement("_textLayer_"+n).lastChild,f=!0}else c.classList.contains("e-pv-page-div")&&(u=c,n=parseInt(u.id.split("_pageDiv_")[1]),p=this.pdfViewerBase.getElement("_textLayer_"+n).lastChild,f=!0)}h.classList.contains("e-pv-maintaincontent")&&(h=this.getNodeElementFromNode(h),i=parseInt(h.id.split("text_")[1])),p.classList.contains("e-pv-maintaincontent")&&(p=this.getNodeElementFromNode(p),n=parseInt(p.id.split("text_")[1])),i===n&&(h.contains(p)&&(h=p),p.contains(h)&&(p=h)),o=h.id.split("text_")[1]?parseInt(h.id.split("text_")[1].split("_")[1]):null,r=p.id.split("text_")[1]?parseInt(p.id.split("text_")[1].split("_")[1]):null,o=isNaN(o)?r:o,r=isNaN(r)?o:r,l=e.anchorOffset,d=f?p.textContent.length:e.focusOffset}this.pdfViewerBase.checkIsNormalText()&&(e.removeAllRanges(),this.pdfViewerBase.textLayer.clearDivSelection(),this.pdfViewerBase.textLayer.applySpanForSelection(i,n,o,r,l,d)),this.pdfViewer.textSearchModule&&this.pdfViewer.textSearchModule.searchAfterSelection()}},s.prototype.initiateTouchSelection=function(e,t,i){this.pdfViewerBase.isShapeBasedAnnotationsEnabled()&&this.pdfViewer.selectedItems.annotations.length>0&&this.pdfViewer.clearSelection(this.pdfViewer.selectedItems.annotations[0].pageIndex);var n=e.target,o=document.elementsFromPoint(e.touches[0].clientX,e.touches[0].clientY);0!==o.length&&o[0].classList.contains("e-pv-hyperlink")&&o[1].classList.contains("e-pv-text")&&(n=o[1]);var r=parseFloat(n.id.split("_")[2]);this.pdfViewer.fireTextSelectionStart(r+1),this.selectAWord(n,t,i,!0),this.createTouchSelectElement(e),this.maintainSelectionOnZoom(!0,!1),this.fireTextSelectEnd(),this.applySpanForSelection()},s.prototype.selectTextByTouch=function(e,t,i,n,o,r){var l=!1;if(e.nodeType===e.TEXT_NODE){var d=e.ownerDocument.createRange(),h=window.getSelection();d.selectNodeContents(e);for(var p=0,f=d.endOffset;p<f;){if(d.setStart(e,p),d.setEnd(e,p+1),(c=d.getBoundingClientRect()).left<=t&&c.right>=t&&c.top<=i&&c.bottom>=i)return null!=h.anchorNode&&(n&&d.setStart(h.anchorNode,h.anchorOffset),d=this.setTouchSelectionStartPosition(h,d,n,o,e,p,r),n&&h.extend(e,p),l=!0),d.detach(),l;p+=1}}else for(var u=0;u<e.childNodes.length;u++){var c,m=e.childNodes[u].ownerDocument.createRange();if(m.selectNodeContents(e.childNodes[u]),(c=m.getBoundingClientRect()).left<=t&&c.right>=t&&c.top<=i&&c.bottom>=i)return m.detach(),this.selectTextByTouch(e.childNodes[u],t,i,n,o,r);m.detach()}return l},s.prototype.setTouchSelectionStartPosition=function(e,t,i,n,o,r,l){if(i)if("left"===n){var d=this.getTouchFocusElement(e,!0);t.setStart(d.focusNode,d.focusOffset),t.setEnd(o,r),this.selectionAnchorTouch={anchorNode:t.endContainer.parentElement.id,anchorOffset:t.endOffset}}else"right"===n&&(d=this.getTouchAnchorElement(e,!1),t.setStart(d.anchorNode,d.anchorOffset),t.setEnd(o,r),this.selectionFocusTouch={focusNode:t.endContainer.parentElement.id,focusOffset:t.endOffset});else"left"===n?l?(t.setStart(o,r),t.setEnd(e.focusNode,e.focusOffset),this.selectionAnchorTouch={anchorNode:t.startContainer.parentElement.id,anchorOffset:t.startOffset}):(d=this.getTouchFocusElement(e,!1),t.setStart(o,r),t.setEnd(d.focusNode,d.focusOffset),""===t.toString()&&(t.setStart(o,r),t.setEnd(e.focusNode,e.focusOffset)),this.selectionAnchorTouch={anchorNode:t.startContainer.parentElement.id,anchorOffset:t.startOffset}):"right"===n&&(d=this.getTouchAnchorElement(e,!0),t.setStart(o,r),t.setEnd(d.anchorNode,d.anchorOffset),""===t.toString()&&(t.setStart(d.anchorNode,d.anchorOffset),t.setEnd(o,r)),this.selectionFocusTouch={focusNode:t.startContainer.parentElement.id,focusOffset:t.startOffset});return e.removeAllRanges(),e.addRange(t),t},s.prototype.getTouchAnchorElement=function(e,t){var i=document.getElementById(this.selectionAnchorTouch.anchorNode.toString()),n=null,o=0;return i?(n=i.childNodes[0],o=parseInt(this.selectionAnchorTouch.anchorOffset.toString())):t?(n=e.focusNode,o=e.focusOffset):(n=e.anchorNode,o=e.anchorOffset),{anchorNode:n,anchorOffset:o}},s.prototype.getTouchFocusElement=function(e,t){var i=document.getElementById(this.selectionFocusTouch.focusNode.toString()),n=null,o=0;return i?(n=i.childNodes[0],o=parseInt(this.selectionFocusTouch.focusOffset.toString())):t?(n=e.anchorNode,o=e.anchorOffset):(n=e.focusNode,o=e.focusOffset),{focusNode:n,focusOffset:o}},s.prototype.createTouchSelectElement=function(e){this.isTouchSelection=!0;var i=window.getSelection();if("Range"===i.type){this.dropDivElementLeft=(0,a.az)("div",{id:this.pdfViewer.element.id+"_touchSelect_droplet_left",className:"e-pv-touch-select-drop"}),this.dropDivElementRight=(0,a.az)("div",{id:this.pdfViewer.element.id+"_touchSelect_droplet_right",className:"e-pv-touch-select-drop"}),this.dropElementLeft=(0,a.az)("div",{className:"e-pv-touch-ellipse"}),this.dropElementLeft.style.transform="rotate(0deg)",this.dropDivElementLeft.appendChild(this.dropElementLeft),this.dropElementRight=(0,a.az)("div",{className:"e-pv-touch-ellipse"}),this.dropElementRight.style.transform="rotate(-90deg)",this.dropElementRight.style.margin="0 9px 0 0",this.dropDivElementRight.appendChild(this.dropElementRight),this.pdfViewerBase.pageContainer.appendChild(this.dropDivElementLeft),this.pdfViewerBase.pageContainer.appendChild(this.dropDivElementRight);var o=i.getRangeAt(0).getBoundingClientRect(),r=this.dropDivElementLeft.getBoundingClientRect(),l=this.pdfViewerBase.pageSize[this.pdfViewerBase.currentPageNumber-1].top,d=this.pdfViewerBase.viewerContainer.getBoundingClientRect().left,h=this.getClientValueTop(o.top,this.pdfViewerBase.currentPageNumber-1),p=h+l*this.pdfViewerBase.getZoomFactor()+r.height/2*this.pdfViewerBase.getZoomFactor()+"px";this.dropDivElementLeft.style.top=p,this.dropDivElementLeft.style.left=o.left-(d+r.width)+"px",this.dropDivElementRight.style.top=p,this.dropDivElementRight.style.left=o.left+o.width-d+"px";var f=this.pdfViewerBase.getElement("_pageDiv_"+(this.pdfViewerBase.currentPageNumber-1)).getBoundingClientRect().left,c=o.left-f;this.topStoreLeft={pageTop:l,topClientValue:this.getMagnifiedValue(h),pageNumber:this.pdfViewerBase.currentPageNumber-1,left:this.getMagnifiedValue(c),isHeightNeeded:!0},this.topStoreRight={pageTop:l,topClientValue:this.getMagnifiedValue(h),pageNumber:this.pdfViewerBase.currentPageNumber-1,left:this.getMagnifiedValue(c+o.width),isHeightNeeded:!0},this.dropDivElementLeft.addEventListener("touchstart",this.onLeftTouchSelectElementTouchStart),this.dropDivElementLeft.addEventListener("touchmove",this.onLeftTouchSelectElementTouchMove),this.dropDivElementLeft.addEventListener("touchend",this.onLeftTouchSelectElementTouchEnd),this.dropDivElementRight.addEventListener("touchstart",this.onRightTouchSelectElementTouchStart),this.dropDivElementRight.addEventListener("touchmove",this.onRightTouchSelectElementTouchMove),this.dropDivElementRight.addEventListener("touchend",this.onRightTouchSelectElementTouchEnd),this.calculateContextMenuPosition(e.touches[0].clientY+this.dropDivElementLeft.clientHeight+10,parseInt(this.dropDivElementLeft.style.left,10)-10)}},s.prototype.calculateContextMenuPosition=function(e,t){var i=this;if(a.AR.isDevice&&!this.pdfViewer.enableDesktopMode){var o=e-this.contextMenuHeight;o<this.pdfViewerBase.toolbarHeight?e+=this.contextMenuHeight:e=o,e+this.contextMenuHeight>window.innerHeight&&(e-=this.contextMenuHeight)}"MouseUp"===this.pdfViewer.contextMenuSettings.contextMenuAction&&(t-=50);var r=this;setTimeout(function(){var d=document.getElementsByClassName("e-pv-maintaincontent")[0]?document.getElementsByClassName("e-pv-maintaincontent")[0].getBoundingClientRect():null;if(d){e=d.bottom+r.contextMenuHeight+r.pdfViewerBase.toolbarHeight>window.innerHeight?d.top-(r.contextMenuHeight+r.pdfViewerBase.toolbarHeight-10):d.bottom+r.pdfViewerBase.toolbarHeight-10,t=d.left-35;var h=i.pdfViewer.toolbarModule?i.pdfViewer.toolbarModule.annotationToolbarModule:"null";(!h||!h.textMarkupToolbarElement||0===h.textMarkupToolbarElement.children.length)&&r.pdfViewerBase.contextMenuModule.open(e,t,r.pdfViewerBase.viewerContainer)}})},s.prototype.initiateSelectionByTouch=function(){this.pdfViewerBase.textLayer.clearDivSelection(),this.pdfViewerBase.contextMenuModule.close();var e=this.pdfViewerBase.currentPageNumber-3,t=this.pdfViewer.currentPageNumber+1;t=t<this.pdfViewerBase.pageCount-1?t:this.pdfViewerBase.pageCount-1;for(var i=e=e<0?0:e;i<=t;i++){var n=this.pdfViewerBase.getElement("_textLayer_"+i);n&&null!==n.childNodes&&this.applySelectionMouseScroll(i)}this.selectionRangeArray.length>0&&this.pdfViewer.fireTextSelectionStart(this.selectionRangeArray[0].pageNumber+1)},s.prototype.terminateSelectionByTouch=function(e){if(this.maintainSelectionOnZoom(!0,!1),this.applySpanForSelection(),this.pdfViewerBase.getTextMarkupAnnotationMode())this.pdfViewer.annotationModule.textMarkupAnnotationModule.drawTextMarkupAnnotations(this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode);else{this.fireTextSelectEnd();var i,n=this.getSpanBounds();i=n.bottom+this.contextMenuHeight+this.pdfViewerBase.toolbarHeight>window.innerHeight?n.top-(this.contextMenuHeight+this.pdfViewerBase.toolbarHeight):n.bottom+this.pdfViewerBase.toolbarHeight-10,this.pdfViewerBase.contextMenuModule.open(i,(n.right-n.left)/2,this.pdfViewerBase.viewerContainer)}},s.prototype.getSpanBounds=function(){var e=[],t=[],i=[],n=0,o=document.getElementsByClassName("e-pv-maintaincontent");if(o.length>0){for(var r=0;r<o.length;r++){var l=o[r].getBoundingClientRect();n+=l.height,e.push(l.width),t.push(l.right),i.push(l.left)}return{top:o[0].getBoundingClientRect().top,bottom:o[o.length-1].getBoundingClientRect().bottom,left:Math.min.apply(null,i),right:Math.max.apply(null,t),width:Math.max.apply(null,e),height:n}}},s.prototype.getNodeElement=function(e,t,i,n,o){if(document.caretRangeFromPoint)e=document.caretRangeFromPoint(t,i),o=this.onTouchElementScroll(e,o,i,n);else if(document.caretPositionFromPoint){var r=document.caretPositionFromPoint(t,i),l=document.caretPositionFromPoint(t,i);(e=document.createRange()).setStart(r.offsetNode,r.offset),e.setEnd(l.offsetNode,l.offset),o=this.onTouchElementScroll(e,o,i,n)}return o},s.prototype.isTouchedWithinContainer=function(e){var i=!1;return 0!==document.elementsFromPoint(e.touches[0].clientX,e.touches[0].clientY).length&&(i=!0),i},s.prototype.onTouchElementScroll=function(e,t,i,n){var o=this.pdfViewerBase.viewerContainer.scrollTop;if(null!=e){t=e.startContainer;var r=this.isScrolledOnScrollBar(n);(!this.pdfViewerBase.viewerContainer.contains(t.parentElement)||r)&&(this.pdfViewerBase.viewerContainer.scrollTop=i<this.pdfViewerBase.viewerContainer.clientHeight?o-30:o+30)}else this.pdfViewerBase.viewerContainer.scrollTop=i<this.pdfViewerBase.viewerContainer.clientHeight?o-30:o+30;return t},s.prototype.isCloserTouchScroll=function(e){var t=!1;return this.previousScrollDifference>e&&(t=!0),t},s.prototype.getClientValueTop=function(e,t){return this.pdfViewerBase.getElement("_pageDiv_"+t)?e-this.pdfViewerBase.getElement("_pageDiv_"+t).getBoundingClientRect().top:e},s.prototype.isScrolledOnScrollBar=function(e){var t=!1;return e.touches&&this.pdfViewerBase.viewerContainer.clientHeight+this.pdfViewerBase.viewerContainer.offsetTop<e.touches[0].clientY&&e.touches[0].clientY<this.pdfViewerBase.viewerContainer.offsetHeight+this.pdfViewerBase.viewerContainer.offsetTop&&(t=!0),t},s.prototype.getTextLastLength=function(e){return e?e.textContent.length:0},s.prototype.getNodeElementFromNode=function(e){return e.parentElement?e.parentElement:e.parentNode},s.prototype.copyText=function(){var e="";if(this.maintainSelectionOnZoom(!0,!1),this.selectionRangeArray.length>0)for(var t=0;t<this.selectionRangeArray.length;t++)e+=this.selectionRangeArray[t].textContent;if(e.length>0){this.pdfViewer.annotation&&(this.pdfViewer.annotation.isShapeCopied=!1);var i=document.createElement("textarea");i.contentEditable="true",i.textContent=e,this.pdfViewer.annotation&&this.pdfViewer.annotation.freeTextAnnotationModule&&(this.pdfViewer.annotation.freeTextAnnotationModule.selectedText=e),i.style.position="fixed",document.body.appendChild(i),i.select();try{document.execCommand("copy")}catch(n){console.warn("Copy to clipboard failed.",n)}finally{i&&document.body.removeChild(i)}}},s.prototype.destroy=function(){this.clear()},s.prototype.getModuleName=function(){return"TextSelection"},s}(),OS=function(){function s(e,t){var i=this;this.isTextSearch=!1,this.searchCount=0,this.searchIndex=0,this.currentSearchIndex=0,this.startIndex=null,this.searchPageIndex=null,this.searchString=null,this.isMatchCase=!1,this.searchRequestHandler=null,this.textContents=new Array,this.searchMatches=new Array,this.searchCollection=new Array,this.searchedPages=[],this.isPrevSearch=!1,this.searchTextDivzIndex="-1",this.tempElementStorage=new Array,this.isMessagePopupOpened=!1,this.isTextRetrieved=!1,this.isTextSearched=!1,this.isTextSearchEventTriggered=!1,this.isSearchText=!1,this.checkBoxOnChange=function(n){if(i.isMatchCase=(0,a.xr)()?!(!n.currentTarget||!n.currentTarget.checked):!!n.checked,i.isTextSearch){i.resetVariables(),i.clearAllOccurrences();var o=i.searchInput.value;i.searchIndex=0,i.textSearch(o)}},this.searchKeypressHandler=function(n){i.enableNextButton(!0),i.enablePrevButton(!0),13===n.which?(i.initiateTextSearch(i.searchInput),i.updateSearchInputIcon(!1)):i.resetVariables()},this.searchClickHandler=function(n){i.searchButtonClick(i.searchBtn,i.searchInput)},this.nextButtonOnClick=function(n){i.nextSearch()},this.prevButtonOnClick=function(n){i.prevSearch()},this.pdfViewer=e,this.pdfViewerBase=t}return s.prototype.createTextSearchBox=function(){var t,e=this;this.searchBox=(0,a.az)("div",{id:this.pdfViewer.element.id+"_search_box",className:"e-pv-search-bar"}),(t=(0,a.xr)()?document.getElementById("toolbarContainer"):this.pdfViewerBase.getElement("_toolbarContainer"))&&(this.searchBox.style.top=((0,a.xr)(),t.clientHeight+"px"));var i=(0,a.az)("div",{id:this.pdfViewer.element.id+"_search_box_elements",className:"e-pv-search-bar-elements"}),n=(0,a.az)("div",{id:this.pdfViewer.element.id+"_search_input_container",className:"e-input-group e-pv-search-input"});this.searchInput=(0,a.az)("input",{id:this.pdfViewer.element.id+"_search_input",className:"e-input"}),this.searchInput.type="text",(0,a.xr)()?this.pdfViewer._dotnetInstance.invokeMethodAsync("GetLocaleText","PdfViewer_Findindocument").then(function(f){e.searchInput.placeholder=f}):this.searchInput.placeholder=this.pdfViewer.localeObj.getConstant("Find in document"),this.searchBtn=(0,a.az)("span",{id:this.pdfViewer.element.id+"_search_box-icon",className:"e-input-group-icon e-input-search-group-icon e-pv-search-icon"}),n.appendChild(this.searchInput),n.appendChild(this.searchBtn),i.appendChild(n),this.prevSearchBtn=this.createSearchBoxButtons("prev_occurrence",this.pdfViewer.enableRtl?"e-pv-next-search":"e-pv-prev-search"),this.prevSearchBtn.setAttribute("aria-label","Previous Search text"),i.appendChild(this.prevSearchBtn),this.nextSearchBtn=this.createSearchBoxButtons("next_occurrence",this.pdfViewer.enableRtl?"e-pv-prev-search":"e-pv-next-search"),this.nextSearchBtn.setAttribute("aria-label","Next Search text"),i.appendChild(this.nextSearchBtn);var r=(0,a.az)("div",{id:this.pdfViewer.element.id+"_match_case_container",className:"e-pv-match-case-container"}),l=(0,a.az)("input",{id:this.pdfViewer.element.id+"_match_case"});if(l.type="checkbox",(0,a.xr)()&&(l.style.height="17px",l.style.width="17px",l.addEventListener("change",this.checkBoxOnChange.bind(this))),r.appendChild(l),this.searchBox.appendChild(i),this.searchBox.appendChild(r),this.pdfViewerBase.mainContainer.appendChild(this.searchBox),(0,a.xr)()){var d=(0,a.az)("span",{id:this.pdfViewer.element.id+"_search_box_text",styles:"position: absolute; padding-top: 3px; padding-left: 8px; padding-right: 8px; font-size: 13px"});this.pdfViewer._dotnetInstance.invokeMethodAsync("GetLocaleText","PdfViewer_Matchcase").then(function(c){d.textContent=c}),r.appendChild(d)}else new le.Jg({cssClass:"e-pv-match-case",label:this.pdfViewer.localeObj.getConstant("Match case"),change:this.checkBoxOnChange.bind(this)}).appendTo(l);var p=(0,a.az)("div",{id:this.pdfViewer.element.id+"_textSearchLoadingIndicator"});n.appendChild(p),p.style.position="absolute",p.style.top="15px",p.style.left=n.clientWidth-46+"px",Rs({target:p,cssClass:"e-spin-center"}),this.setLoaderProperties(p),this.showSearchBox(!1),this.pdfViewer.enableRtl?(this.searchBox.classList.add("e-rtl"),this.searchBox.style.left="88.3px"):(this.searchBox.classList.remove("e-rtl"),this.searchBox.style.right="88.3px"),this.searchInput.addEventListener("focus",function(){e.searchInput.parentElement.classList.add("e-input-focus")}),this.searchInput.addEventListener("blur",function(){e.searchInput.parentElement.classList.remove("e-input-focus")}),this.searchInput.addEventListener("keydown",this.searchKeypressHandler.bind(this)),this.searchBtn.addEventListener("click",this.searchClickHandler.bind(this)),this.nextSearchBtn.addEventListener("click",this.nextButtonOnClick.bind(this)),this.prevSearchBtn.addEventListener("click",this.prevButtonOnClick.bind(this))},s.prototype.setLoaderProperties=function(e){var t=e.firstChild.firstChild.firstChild;t&&(t.style.height="18px",t.style.width="18px",t.style.transformOrigin="9px 9px 9px")},s.prototype.showLoadingIndicator=function(e){var t=document.getElementById(this.pdfViewer.element.id+"_textSearchLoadingIndicator");t&&(e?bo(t):Nt(t))},s.prototype.textSearchBoxOnResize=function(){if(this.pdfViewer.toolbarModule&&this.pdfViewer.enableToolbar){var e=this.pdfViewerBase.getElement("_toolbarContainer_popup");e&&e.contains(this.pdfViewerBase.getElement("_search").parentElement)&&(this.searchBox.style.right="0px")}else this.pdfViewerBase.viewerContainer.clientWidth+this.pdfViewerBase.viewerContainer.offsetLeft<this.searchBox.offsetLeft+this.searchBox.clientWidth?(this.searchBox.style.right="0px",this.searchBox.style.width=parseInt(this.searchBox.style.width)-(this.searchBox.offsetLeft+this.searchBox.clientWidth-this.pdfViewerBase.viewerContainer.clientWidth)+"px",this.searchInput.style.width=parseInt(this.searchInput.style.width)-(this.searchBox.offsetLeft+this.searchBox.clientWidth-this.pdfViewerBase.viewerContainer.clientWidth)+"px"):(this.searchBox.style.right="88.3px",this.searchBox.style.width="",this.searchInput.style.width="")},s.prototype.showSearchBox=function(e){e?this.searchBox.style.display="block":(this.searchBox.style.display="none",this.searchInput.value=""),this.onTextSearchClose()},s.prototype.searchAfterSelection=function(){this.isTextSearch&&(this.initSearch(this.searchPageIndex,!0),this.highlightOthers())},s.prototype.initiateTextSearch=function(e){var t=e.value;t&&t.length>0&&" "===t[t.length-1]&&(t=t.slice(0,t.length-1)),this.initiateSearch(t)},s.prototype.initiateSearch=function(e){e!==this.searchString&&(this.isTextSearch=!1,this.searchPageIndex=this.pdfViewerBase.currentPageNumber-1),this.clearAllOccurrences(),""!==e&&(this.searchMatches[this.searchPageIndex]&&e===this.searchString?0===this.searchMatches[this.searchPageIndex].length?this.initSearch(this.searchPageIndex,!1):this.nextSearch():(this.resetVariables(),this.searchIndex=0,this.textSearch(e)))},s.prototype.textSearch=function(e){if(""!==e||e){if(this.searchString=e,this.isTextSearch=!0,this.isSearchText=!0,this.searchPageIndex=this.pdfViewerBase.currentPageNumber-1,this.searchCount=0,this.isTextSearchEventTriggered=!1,this.showLoadingIndicator(!0),this.pdfViewer.fireTextSearchStart(e,this.isMatchCase),this.pdfViewer.isExtractText)if(this.isTextRetrieved)for(var t=0;t<this.pdfViewerBase.pageCount;t++)this.initSearch(t,!1,!0);else for(this.isTextSearched=!0,t=0;t<this.documentTextCollection.length;t++)this.initSearch(t,!1,!0);this.initSearch(this.searchPageIndex,!1),this.highlightOthers()}},s.prototype.nextSearch=function(){this.isPrevSearch=!1,this.isTextSearch=!0,this.isSearchText=!1,this.searchString?(this.clearAllOccurrences(),this.searchIndex=this.searchIndex+1,this.searchMatches[this.searchPageIndex]?(this.searchIndex>=this.searchMatches[this.searchPageIndex].length?(this.searchIndex=0,this.searchPageIndex=this.searchPageIndex+1<this.pdfViewerBase.pageCount?this.searchPageIndex+1:0,this.pdfViewerBase.pageCount>1?this.initSearch(this.searchPageIndex,!1):(this.initSearch(this.searchPageIndex,!0),this.isMessagePopupOpened||this.onMessageBoxOpen(),this.pdfViewerBase.updateScrollTop(this.searchPageIndex)),this.showLoadingIndicator(!0)):(this.highlightSearchedTexts(this.searchPageIndex,!1,void 0),this.showLoadingIndicator(!1)),this.highlightOthers(!0)):this.initiateTextSearch(this.searchInput)):this.initiateTextSearch(this.searchInput)},s.prototype.prevSearch=function(){this.isPrevSearch=!0,this.isTextSearch=!0,this.isSearchText=!1,this.searchString?(this.clearAllOccurrences(),this.searchIndex=this.searchIndex-1,this.searchIndex<0?(this.searchPageIndex=this.searchPageIndex-1<0?this.pdfViewerBase.pageCount-1:this.searchPageIndex-1,this.initSearch(this.searchPageIndex,!1),this.showLoadingIndicator(!0)):(this.highlightSearchedTexts(this.searchPageIndex,!1,void 0),this.showLoadingIndicator(!1)),this.highlightOthers(!0)):(this.searchIndex=this.searchIndex-1,this.searchPageIndex=this.searchPageIndex-1<0?this.pdfViewerBase.pageCount-1:this.searchPageIndex-1,this.textSearch(this.searchInput.value))},s.prototype.initSearch=function(e,t,i){var n=this.pdfViewerBase.getStoredData(e,!0),o=null,r=null,l=null;if(i){if(0!==this.documentTextCollection.length){var d=this.documentTextCollection[e][e];this.documentTextCollection[e]&&d&&this.getSearchTextContent(e,this.searchString,d.pageText?d.pageText:d.PageText,r,t,this.documentTextCollection[e])}}else n?(o=n.pageText,l=this.pdfViewerBase.textLayer.characterBound[e],this.textContents[e]=r=n.textContent,this.getPossibleMatches(e,this.searchString,o,r,t,l)):t||this.createRequestForSearch(e);this.pdfViewerBase.pageCount===(this.searchedPages&&this.searchedPages.length)&&(this.isTextSearchEventTriggered||(this.isTextSearchEventTriggered=!0,this.pdfViewer.fireTextSearchComplete(this.searchString,this.isMatchCase)))},s.prototype.getPossibleMatches=function(e,t,i,n,o,r){var l;if(this.searchMatches&&!this.searchMatches[e]){var d=i,h=t,p=d.replace(/(\s\r\n)/gm," ").replace(/(\r\n)/gm," "),f=i.replace(/(\s\r\n)/gm,"  ").replace(/(\r\n)/gm," "),c=p.replace(/[^a-zA-z0-9" "]/g,""),u=t.length;this.isMatchCase||(h=t.toLowerCase(),d=i.toLowerCase(),p=p.toLowerCase(),f=f.toLowerCase(),c=c.toLowerCase());for(var m=[],g=[],v=-u,y=-u,b=-u,C=-u,S=-u;(0!==v||0===v)&&""!==h&&" "!==h&&h;){if(v=d.indexOf(h,v+u),-1!==h.indexOf(" ")){var x=t.replace(" ","\r\n");y=d.indexOf(x,y+u),(y=-1)<=-1||y<v&&m.push(y)}if(v<=-1&&y<=-1)break;v<=-1||m.push(v),y>v&&!(y<=-1)&&m.push(y)}if(0==m.length){if(b=p.indexOf(h,b+u),C=f.indexOf(h,C+u),S=c.indexOf(h,S+u),-1!==b){v=-(l=this.correctLinetext(t,v,d))[0].length;for(var V=0;V<l.length;V++)v=d.indexOf(l[V].trim(),v+(void 0===l[V-1]?l[0].length:l[V-1].length)),g.push(v),g.length>1&&(g[1]-(g[0]+l[0].length)<=3?(m.push(g),this.searchMatches[e]=m):(V=-1,v=g[0]+l[0].length,g.splice(0,g.length)))}else if(-1!==S)for(v=-(l=this.correctLinetext(t,v,d))[0].length,V=0;V<l.length;V++)v=d.indexOf(l[V].trim(),v+(void 0===l[V-1]?l[0].length:l[V-1].length)),g.push(v),g.length>1&&(g[1]-(g[0]+l[0].length)<=3?(m.push(g),this.searchMatches[e]=m):(V=-1,v=g[0]+l[0].length,g.splice(0,g.length)));else if(-1!==C)for(v=-(l=this.correctLinetext(t,v,d))[0].length,V=0;V<l.length;V++)v=d.indexOf(l[V].trim(),v+(void 0===l[V-1]?l[0].length:l[V-1].length)),g.push(v),g.length>1&&(g[1]-(g[0]+l[0].length)<=3?(m.push(g),this.searchMatches[e]=m):(V=-1,v=g[0]+l[0].length,g.splice(0,g.length)));m.length>1&&m.splice(1,m.length)}this.searchMatches&&m.length>0&&(this.searchMatches[e]=m)}if(o||(-1===this.searchedPages.indexOf(e)&&(this.searchedPages.push(e),this.startIndex=this.searchedPages[0]),this.updateSearchInputIcon(!1)),this.searchMatches&&this.searchMatches[e]&&0!==this.searchMatches[e].length)o||(this.isPrevSearch&&(this.searchIndex=this.searchMatches[e].length-1),this.pdfViewerBase.currentPageNumber-1!==this.searchPageIndex?(this.searchMatches.length>0&&(0===this.searchIndex||-1===this.searchIndex)&&this.searchPageIndex===this.currentSearchIndex?(!this.isMessagePopupOpened&&!this.isSearchText&&this.onMessageBoxOpen(),this.searchPageIndex=this.getSearchPage(this.pdfViewerBase.currentPageNumber-1),this.searchedPages=[this.searchPageIndex]):this.isPrevSearch&&this.searchMatches&&this.searchMatches.length>0&&this.searchMatches[this.searchPageIndex]&&this.searchMatches[this.searchPageIndex].length>0&&this.searchedPages.length===this.pdfViewerBase.pageCount&&this.startIndex-1===this.searchPageIndex&&(this.isMessagePopupOpened||this.onMessageBoxOpen(),this.searchedPages=[this.startIndex]),this.pdfViewerBase.updateScrollTop(this.searchPageIndex)):this.searchMatches&&this.searchMatches[this.searchPageIndex]&&this.searchMatches[this.searchPageIndex].length>0&&this.searchedPages.length===this.pdfViewerBase.pageCount&&this.startIndex===this.searchPageIndex&&this.pdfViewerBase.pageCount>1&&(this.isMessagePopupOpened||this.onMessageBoxOpen(),this.searchedPages=[this.startIndex])),this.highlightSearchedTexts(e,o,l);else if(!o)if(this.searchPageIndex=this.isPrevSearch?this.searchPageIndex-1<0?this.pdfViewerBase.pageCount-1:this.searchPageIndex-1:this.searchPageIndex+1<this.pdfViewerBase.pageCount?this.searchPageIndex+1:0,-1===this.searchedPages.indexOf(this.searchPageIndex)&&this.searchedPages.length!==this.pdfViewerBase.pageCount)this.showLoadingIndicator(!0),this.initSearch(this.searchPageIndex,!1);else{var T=this.getSearchPage(e);this.searchMatches&&(0,a.le)(this.searchMatches[this.searchPageIndex])&&this.searchedPages.length===this.pdfViewerBase.pageCount?(this.isMessagePopupOpened||this.onMessageBoxOpen(),this.pdfViewerBase.updateScrollTop(this.startIndex)):this.searchMatches&&this.searchMatches.length>0&&(0===this.searchIndex||-1===this.searchIndex)&&T===this.currentSearchIndex?(this.isPrevSearch?(this.isMessagePopupOpened||this.onMessageBoxOpen(),this.searchPageIndex=T,this.searchedPages=[T],this.searchIndex=-1):(!this.isMessagePopupOpened&&1!==this.pdfViewerBase.currentPageNumber&&!this.isSearchText&&this.onMessageBoxOpen(),this.searchPageIndex=T,this.searchedPages=[T],this.searchIndex=0),this.highlightSearchedTexts(this.searchPageIndex,o,void 0)):this.searchMatches&&this.searchMatches[this.searchPageIndex]&&this.searchMatches[this.searchPageIndex].length>0&&this.searchedPages.length===this.pdfViewerBase.pageCount&&(this.isMessagePopupOpened||this.onMessageBoxOpen(),this.searchPageIndex=this.startIndex,this.searchedPages=[this.searchPageIndex],this.searchIndex=0,this.pdfViewerBase.updateScrollTop(this.startIndex),this.highlightSearchedTexts(this.searchPageIndex,o,void 0))}},s.prototype.correctLinetext=function(e,t,i){var n=[],o=e.toLowerCase().split(/[" "]+/);t=0;for(var r="",l=0;l<o.length;l++)-1!==(t=i.indexOf(r+o[l],t))?(r+=o[l]+" ",l==o.length-1&&n.push(r)):(n.push(r),r=o[l]+" ",l==o.length-1&&n.push(r));return n},s.prototype.getSearchTextContent=function(e,t,i,n,o,r){var l=i,d=t,h=t.length;this.isMatchCase||(d=t.toLowerCase(),l=i.toLowerCase());for(var p=[],f=-h,c=-h;0!==f&&""!==d&&" "!==d&&d;){if(f=l.indexOf(d,f+h),-1!==d.indexOf(" ")){var u=t.replace(" ","\r\n");(c=l.indexOf(u,c+h))<=-1||c<f&&p.push(c)}if(f<=-1&&c<=-1)break;f<=-1||p.push(f),c>f&&!(c<=-1)&&p.push(c)}0!==p.length&&(this.searchCount=this.searchCount+p.length),this.searchMatches[e]=p},s.prototype.getSearchPage=function(e){var t=null;if(this.isPrevSearch){for(var i=e;i>=0;i--)if(i!==e&&this.searchMatches[i]){t=i;break}if(!t)for(var n=this.pdfViewerBase.pageCount-1;n>e;n--)if(this.searchMatches[n]){t=n;break}}else{for(i=e;i<this.pdfViewerBase.pageCount;i++)if(i!==e&&this.searchMatches[i]){t=i;break}if(!t)if(0===e)t=e;else for(n=0;n<e;n++)if(this.searchMatches[n]){t=n;break}}return t},s.prototype.highlightSearchedTexts=function(e,t,i){var r,n=this.searchMatches[e],o={y:-100,x:-100},l=this.searchString,d=this.pdfViewerBase.textLayer.characterBound[e];if(t&&this.pdfViewerBase.currentPageNumber-1!==this.searchPageIndex&&this.searchMatches.length>0&&this.getSearchPage(this.pdfViewerBase.currentPageNumber-1),d){for(var h=0;h<n.length;h++){if(void 0!==n[h].length&&void 0!==i)if(h===this.searchIndex&&e===this.searchPageIndex)for(var p=0;p<i.length;p++)r="e-pv-search-text-highlight",this.searchString=i[p].trim(),this.addDivForSearch(h,e,d,this.searchString.length,r,p);else for(p=0;p<i.length;p++)r="e-pv-search-text-highlightother",this.searchString=i[p].trim(),this.addDivForSearch(h,e,d,this.searchString.length,r,p);else r=h===this.searchIndex&&e===this.searchPageIndex?"e-pv-search-text-highlight":"e-pv-search-text-highlightother";null==n[h].length&&this.addDivForSearch(h,e,d,this.searchString.length,r,void 0)}if(this.searchString=l,e===this.searchPageIndex&&!t){var f=this.pdfViewerBase.getElement("_searchtext_"+e+"_"+this.searchIndex);if(f){var c=this.getScrollElement(f);this.scrollToSearchStr(c,o)}else{this.pdfViewerBase.updateScrollTop(e);var u=this.pdfViewerBase.getElement("_searchtext_"+e+"_"+this.searchIndex);u&&(c=this.getScrollElement(u),this.scrollToSearchStr(c,o))}}}},s.prototype.addDivForSearch=function(e,t,i,n,o,r){var d,l=this.pdfViewerBase.getElement("_textLayer_"+t);(0,a.le)(l)&&"e-pv-search-text-highlight"===o&&this.pdfViewer.navigation&&this.pdfViewer.navigation.goToPage(t+1);for(var h=d=void 0!==this.searchMatches[t][e].length?this.searchMatches[t][e][r]:this.searchMatches[t][e],p=0;d<h+n;)d=this.addDivElement(d,i,n,o,e,t,h,p,r),p++;"e-pv-search-text-highlight"===o&&this.showLoadingIndicator(!1)},s.prototype.addDivElement=function(e,t,i,n,o,r,l,d,h){var p=0,f=0,c=0,u=0,m=!1;t[e]&&(u=t[e].X,c=t[e].Y);var g=0;for(e-l!=0&&(g=e-l,i+=1);g<i;g++)t[e]&&(u>(v=t[e]).X+v.Width&&(m=!0),p=p>(y=(c=c<v.Y?c:v.Y)<v.Y?v.Y-c:c-v.Y)+v.Height?p:y+v.Height,e++);var b=!1;if(m){var v,y;u=(v=t[l+i-1]).X,f=t[l].X-t[l+i-1].X,p=p>(y=(c=c<v.Y?c:v.Y)<v.Y?v.Y-c:c-v.Y)+v.Height?p:y+v.Height;for(var V=t[l-1].Y-t[l].Y,T=l+i-1;T>=l;T--)0===(v=t[T]).Width&&(V=v.Y-t[T-1].Y);f+=V}else if(l+i!==e)b=!0,t[e-1]&&(f=t[e-1].X-u);else{b=!1;var C=this.pdfViewerBase.getStoredData(r,!0),S=null;if(C)S=C.pageText;else if(this.pdfViewer.isExtractText&&0!==this.documentTextCollection.length){var x=this.documentTextCollection[r][r];S=x.pageText?x.pageText:x.PageText}t[e]?f=!S||""!==S[e]&&" "!==S[e]&&"\r"!==S[e]&&"\n"!==S[e]||0!==t[e].Width?t[e].X-u:t[e-1].X-u+t[e-1].Width:t[e-1]&&(f=t[e-1].X-u)}return this.createSearchTextDiv(o,r,p,f,c,u,n,b,d,h),e},s.prototype.createSearchTextDiv=function(e,t,i,n,o,r,l,d,h,p){var f="_searchtext_"+t+"_"+e;if(d&&(f+="_"+h),void 0!==p&&this.pdfViewerBase.getElement(f)){var c=(0,a.az)("div",{id:this.pdfViewer.element.id+f+"_"+p});this.calculateBounds(c,i,n,o,r,this.pdfViewerBase.pageSize[t]),c.classList.add(l),"e-pv-search-text-highlight"===l?(c.style.backgroundColor=""===this.pdfViewer.textSearchColorSettings.searchHighlightColor?"#fdd835":this.pdfViewer.textSearchColorSettings.searchHighlightColor,this.pdfViewer.fireTextSearchHighlight(this.searchString,this.isMatchCase,{left:r,top:o,width:n,height:i},t+1)):"e-pv-search-text-highlightother"===l&&(c.style.backgroundColor=""===this.pdfViewer.textSearchColorSettings.searchColor?"#8b4c12":this.pdfViewer.textSearchColorSettings.searchColor);var g=this.pdfViewerBase.getElement("_textLayer_"+t);c.style.zIndex=this.searchTextDivzIndex,g&&g.appendChild(c)}this.pdfViewerBase.getElement(f)||(c=(0,a.az)("div",{id:this.pdfViewer.element.id+f}),this.calculateBounds(c,i,n,o,r,this.pdfViewerBase.pageSize[t]),c.classList.add(l),"e-pv-search-text-highlight"===l?(c.style.backgroundColor=""===this.pdfViewer.textSearchColorSettings.searchHighlightColor?"#fdd835":this.pdfViewer.textSearchColorSettings.searchHighlightColor,this.pdfViewer.fireTextSearchHighlight(this.searchString,this.isMatchCase,{left:r,top:o,width:n,height:i},t+1)):"e-pv-search-text-highlightother"===l&&(c.style.backgroundColor=""===this.pdfViewer.textSearchColorSettings.searchColor?"#8b4c12":this.pdfViewer.textSearchColorSettings.searchColor),g=this.pdfViewerBase.getElement("_textLayer_"+t),c.style.zIndex=this.searchTextDivzIndex,g&&g.appendChild(c))},s.prototype.calculateBounds=function(e,t,i,n,o,r){0===r.rotation||2===r.rotation?(e.style.height=Math.ceil(t)*this.pdfViewerBase.getZoomFactor()+"px",e.style.width=i*this.pdfViewerBase.getZoomFactor()+"px",2===r.rotation?(e.style.top=(r.height-n-t)*this.pdfViewerBase.getZoomFactor()+"px",e.style.left=Math.ceil(r.width-o-i)*this.pdfViewerBase.getZoomFactor()+"px"):(e.style.top=n*this.pdfViewerBase.getZoomFactor()+"px",e.style.left=o*this.pdfViewerBase.getZoomFactor()+"px")):1===r.rotation?(e.style.height=i*this.pdfViewerBase.getZoomFactor()+"px",e.style.width=t*this.pdfViewerBase.getZoomFactor()+"px",e.style.top=o*this.pdfViewerBase.getZoomFactor()+"px",e.style.left=(r.height-n-t)*this.pdfViewerBase.getZoomFactor()+"px"):3===r.rotation&&(e.style.height=i*this.pdfViewerBase.getZoomFactor()+"px",e.style.width=t*this.pdfViewerBase.getZoomFactor()+"px",e.style.left=(r.width-r.height+n)*this.pdfViewerBase.getZoomFactor()+"px",e.style.top=(r.height-o-i)*this.pdfViewerBase.getZoomFactor()+"px")},s.prototype.isClassAvailable=function(){for(var e=!1,t=0;t<this.tempElementStorage.length;t++)if(this.tempElementStorage[t].classString&&("e-pv-search-text-highlight"===this.tempElementStorage[t].classString||"e-pv-search-text-highlightother"===this.tempElementStorage[t].classString)){e=!0;break}return e},s.prototype.getScrollElement=function(e){var t=e;if(e.childNodes.length>0)for(var i=0;i<e.childNodes.length;i++)e.childNodes[i].classList&&e.childNodes[i].classList.contains("e-pv-search-text-highlight")&&(t=e.childNodes[i]);return t},s.prototype.scrollToSearchStr=function(e,t){for(var i=e.offsetParent,n=e.offsetTop+e.clientTop,o=e.offsetLeft+e.clientLeft;i.id!==this.pdfViewerBase.viewerContainer.id;)n+=i.offsetTop,o+=i.offsetLeft,i=i.offsetParent;t&&(n+=t.y,o+=t.x,(a.AR.isDevice&&!this.pdfViewer.enableDesktopMode||this.pdfViewerBase.getZoomFactor()>1.5)&&(i.scrollLeft=o)),i.scrollTop=n,this.pdfViewerBase.updateMobileScrollerPosition()},s.prototype.resizeSearchElements=function(e){for(var t=document.querySelectorAll('div[id*="'+this.pdfViewer.element.id+"_searchtext_"+e+'"]'),i=0;i<t.length;i++){var n=t[i],o=1;this.pdfViewer.magnificationModule&&(o=this.pdfViewer.magnificationModule.previousZoomFactor);var r=e+"_"+o+"_"+this.pdfViewerBase.getZoomFactor();n.getAttribute("name")!==r&&(n.style.width=parseFloat(n.style.width)/o*this.pdfViewerBase.getZoomFactor()+"px",n.style.height=parseFloat(n.style.height)/o*this.pdfViewerBase.getZoomFactor()+"px",n.style.top=parseFloat(n.style.top)/o*this.pdfViewerBase.getZoomFactor()+"px",n.style.left=parseFloat(n.style.left)/o*this.pdfViewerBase.getZoomFactor()+"px",n.setAttribute("name",r))}},s.prototype.highlightOtherOccurrences=function(e){this.initSearch(e,!0)},s.prototype.highlightOthers=function(e){for(var t=this.getIndexes(),i=parseFloat(t.lowerPageValue.toString()),n=parseFloat(t.higherPageValue.toString()),o=i;o<=n;o++)this.highlightOtherOccurrences(o);e&&this.showLoadingIndicator(!1)},s.prototype.clearAllOccurrences=function(){for(var e=document.querySelectorAll('div[id*="'+this.pdfViewer.element.id+'_searchtext_"]'),t=0;t<e.length;t++)e[t].parentElement.removeChild(e[t])},s.prototype.getIndexes=function(){var e=this.pdfViewerBase.currentPageNumber-3,t=this.pdfViewerBase.currentPageNumber+1;return{lowerPageValue:e=e>0?e:0,higherPageValue:t=t<this.pdfViewerBase.pageCount?t:this.pdfViewerBase.pageCount-1}},s.prototype.applyTextSelection=function(){if(this.pdfViewer.textSelectionModule&&!this.pdfViewerBase.isTextSelectionDisabled)for(var e=this.getIndexes(),t=parseFloat(e.lowerPageValue.toString()),i=parseFloat(e.higherPageValue.toString()),n=t;n<=i;n++)this.pdfViewer.textSelectionModule.applySelectionRangeOnScroll(n)},s.prototype.resetTextSearch=function(){this.resetVariables(),this.onTextSearchClose(),this.searchPageIndex=null,this.searchIndex=0,this.updateSearchInputIcon(!0),this.enableNextButton(!1),this.enablePrevButton(!1),this.documentTextCollection=[],this.isTextRetrieved=!1,this.isTextSearched=!1,this.isSearchText=!1,this.searchRequestHandler&&this.searchRequestHandler.clear()},s.prototype.onTextSearchClose=function(){this.isPrevSearch=!1,this.isTextSearch=!1,this.pdfViewerBase.pageCount>0&&this.clearAllOccurrences()},s.prototype.createRequestForSearch=function(e){var t=this,i=816,n=this.pdfViewer.element.clientHeight,o=this.pdfViewerBase.pageSize[e].width,l=this.pdfViewerBase.getTileCount(o),d=i>=o?1:l,h=i>=o?1:l,p=!1,f=this.pdfViewer.tileRenderingSettings;f.enableTileRendering&&f.x>0&&f.y>0&&(d=i>=o?1:f.x,h=i>=o?1:f.y),d>1&&h>1&&(p=!0);for(var c=function(g){for(var v=function(b){var C=void 0;C={xCoordinate:g,yCoordinate:b,pageNumber:e,viewPortWidth:i,viewPortHeight:n,documentId:t.pdfViewerBase.getDocumentId(),hashId:t.pdfViewerBase.hashId,zoomFactor:t.pdfViewerBase.getZoomFactor(),tilecount:l,action:"Search",elementId:t.pdfViewer.element.id,uniqueId:t.pdfViewerBase.documentId,tileXCount:d,tileYCount:h},u.pdfViewerBase.jsonDocumentId&&(C.documentId=u.pdfViewerBase.jsonDocumentId),u.searchRequestHandler=new Ue(u.pdfViewer),u.searchRequestHandler.url=u.pdfViewer.serviceUrl+"/"+u.pdfViewer.serverActionSettings.renderPages,u.searchRequestHandler.responseType="json",u.searchRequestHandler.send(C),u.searchRequestHandler.onSuccess=function(S){var x=S.data;if(x){if("object"!=typeof x)try{x=JSON.parse(x)}catch(T){t.pdfViewerBase.onControlError(500,x,this.pdfViewer.serverActionSettings.renderPages),x=null}if(x)if((0,a.le)(x.pageText)||x.uniqueId!==t.pdfViewerBase.documentId)p&&x.uniqueId===t.pdfViewerBase.documentId&&(t.pdfViewer.fireAjaxRequestSuccess(this.pdfViewer.serverActionSettings.renderPages,x),t.pdfViewerBase.storeWinData(x,V=void 0!==x.pageNumber?x.pageNumber:e,x.tileX,x.tileY),g===d-1&&b===h-1&&t.initSearch(e,!1));else{t.pdfViewer.fireAjaxRequestSuccess(this.pdfViewer.serverActionSettings.renderPages,x);var V=void 0!==x.pageNumber?x.pageNumber:e;i>=o?t.pdfViewerBase.storeWinData(x,V):t.pdfViewerBase.storeWinData(x,V,x.tileX,x.tileY),p?g===d-1&&b===h-1&&t.initSearch(e,!1):t.initSearch(e,!1)}}},u.searchRequestHandler.onFailure=function(S){t.pdfViewer.fireAjaxRequestFailed(S.status,S.statusText,this.pdfViewer.serverActionSettings.renderPages)},u.searchRequestHandler.onError=function(S){t.pdfViewerBase.openNotificationPopup(),t.pdfViewer.fireAjaxRequestFailed(S.status,S.statusText,this.pdfViewer.serverActionSettings.renderPages)}},y=0;y<h;y++)v(y)},u=this,m=0;m<d;m++)c(m)},s.prototype.getPDFDocumentTexts=function(){var t=50,i=this.pdfViewerBase.pageCount;t>=i&&(t=i),this.createRequestForGetPdfTexts(0,t)},s.prototype.createRequestForGetPdfTexts=function(e,t){var n,i=this;n={pageStartIndex:e,pageEndIndex:t,documentId:i.pdfViewerBase.getDocumentId(),hashId:i.pdfViewerBase.hashId,action:"RenderPdfTexts",elementId:i.pdfViewer.element.id,uniqueId:i.pdfViewerBase.documentId},this.pdfViewerBase.jsonDocumentId&&(n.documentId=this.pdfViewerBase.jsonDocumentId),this.searchRequestHandler=new Ue(this.pdfViewer),this.searchRequestHandler.url=this.pdfViewer.serviceUrl+"/"+this.pdfViewer.serverActionSettings.renderTexts,this.searchRequestHandler.responseType="json",this.searchRequestHandler.send(n),this.searchRequestHandler.onSuccess=function(o){var r=o.data;if(r){if("object"!=typeof r)try{r=JSON.parse(r)}catch(d){i.pdfViewerBase.onControlError(500,r,this.pdfViewer.serverActionSettings.renderTexts),r=null}if(r&&r.documentTextCollection&&r.uniqueId===i.pdfViewerBase.documentId){i.pdfViewer.fireAjaxRequestSuccess(this.pdfViewer.serverActionSettings.renderTexts,r),i.documentTextCollection.length>0?(i.documentTextCollection=r.documentTextCollection.concat(i.documentTextCollection),i.documentTextCollection=i.orderPdfTextCollections(i.documentTextCollection)):i.documentTextCollection=r.documentTextCollection;var l=i.pdfViewerBase.pageCount;t!==l?(e=t,(t+=50)>=l&&(t=l),i.createRequestForGetPdfTexts(e,t)):(i.isTextRetrieved=!0,i.pdfViewer.fireTextExtractionCompleted(i.documentTextCollection),i.isTextSearched&&i.searchString.length>0&&(i.textSearch(i.searchString),i.isTextSearched=!1))}}},this.searchRequestHandler.onFailure=function(o){i.pdfViewer.fireAjaxRequestFailed(o.status,o.statusText,this.pdfViewer.serverActionSettings.renderTexts)},this.searchRequestHandler.onError=function(o){i.pdfViewerBase.openNotificationPopup(),i.pdfViewer.fireAjaxRequestFailed(o.status,o.statusText,this.pdfViewer.serverActionSettings.renderTexts)}},s.prototype.orderPdfTextCollections=function(e){for(var t=[],i=0;i<e.length;i++)if(0===t.length)t.push(e[i]);else if(parseInt(Object.keys(e[i])[0])>parseInt(Object.keys(t[t.length-1])[0]))t.push(e[i]);else for(var n=0;n<t.length;n++)if(parseInt(Object.keys(e[i])[0])<parseInt(Object.keys(t[n])[0])){t.splice(n,0,e[i]);break}return t},s.prototype.createSearchBoxButtons=function(e,t){var i=(0,a.az)("button",{id:this.pdfViewer.element.id+"_"+e,className:"e-btn e-icon-btn e-pv-search-btn "+t});i.setAttribute("type","button");var n=(0,a.az)("span",{id:this.pdfViewer.element.id+"_"+e+"Icon",className:"e-pv-icon-search "+t+"-icon"});return i.disabled=!0,i.appendChild(n),i},s.prototype.enablePrevButton=function(e){(!a.AR.isDevice||this.pdfViewer.enableDesktopMode)&&(e?this.prevSearchBtn.removeAttribute("disabled"):this.prevSearchBtn&&(this.prevSearchBtn.disabled=!0))},s.prototype.enableNextButton=function(e){(!a.AR.isDevice||this.pdfViewer.enableDesktopMode)&&(e?this.nextSearchBtn.removeAttribute("disabled"):this.nextSearchBtn&&(this.nextSearchBtn.disabled=!0))},s.prototype.resetVariables=function(){this.searchedPages=[],this.searchMatches=new Array},s.prototype.searchButtonClick=function(e,t){this.isMessagePopupOpened=!1,(0,a.xr)()&&a.AR.isDevice&&!this.pdfViewer.enableDesktopMode&&(e=this.pdfViewerBase.getElement("_search_box-icon").children[0].children[0],t=this.pdfViewerBase.getElement("_search_input")),e.classList.contains("e-pv-search-icon")?this.initiateTextSearch(t):e.classList.contains("e-pv-search-close")&&(this.showLoadingIndicator(!1),t.value="",this.resetTextSearch(),t.focus())},s.prototype.updateSearchInputIcon=function(e){(0,a.xr)()&&this.searchBtn&&a.AR.isDevice&&!this.pdfViewer.enableDesktopMode&&(this.searchBtn=this.pdfViewerBase.getElement("_search_box-icon").children[0].children[0]),this.searchBtn&&(e?(this.searchBtn.classList.remove("e-pv-search-close"),this.searchBtn.classList.add("e-pv-search-icon")):(this.searchBtn.classList.remove("e-pv-search-icon"),this.searchBtn.classList.add("e-pv-search-close")))},s.prototype.onMessageBoxOpen=function(){var e=this;this.showLoadingIndicator(!1),this.pdfViewerBase.getElement("_search_input").blur(),this.isMessagePopupOpened=!0,!a.AR.isDevice||this.pdfViewer.enableDesktopMode?(0,a.xr)()?this.pdfViewer._dotnetInstance.invokeMethodAsync("GetLocaleText","PdfViewer_Nomatches").then(function(i){e.pdfViewerBase.textLayer.createNotificationPopup(i)}):this.pdfViewerBase.textLayer.createNotificationPopup(this.pdfViewer.localeObj.getConstant("No matches")):(0,a.xr)()?this.pdfViewer._dotnetInstance.invokeMethodAsync("GetLocaleText","PdfViewer_NoTextFound").then(function(n){e.pdfViewerBase.navigationPane.createTooltipMobile(n)}):this.pdfViewerBase.navigationPane.createTooltipMobile(this.pdfViewer.localeObj.getConstant("No Text Found"))},s.prototype.searchText=function(e,t){e&&e.length>0&&" "===e[e.length-1]&&(e=e.slice(0,e.length-1)),this.searchString=e,this.isMatchCase=t,this.searchIndex=0,this.textSearch(e)},s.prototype.searchNext=function(){this.nextSearch()},s.prototype.searchPrevious=function(){this.prevSearch()},s.prototype.cancelTextSearch=function(){this.resetTextSearch()},s.prototype.destroy=function(){this.searchMatches=void 0},s.prototype.getModuleName=function(){return"TextSearch"},s}(),_S=function(){function s(e,t){this.printHeight=1056,this.printWidth=816,this.pdfViewer=e,this.pdfViewerBase=t}return s.prototype.print=function(){var t,e=this;this.pdfViewerBase.pageCount>0&&(this.printViewerContainer=(0,a.az)("div",{id:this.pdfViewer.element.id+"_print_viewer_container",className:"e-pv-print-viewer-container"}),"Default"===this.pdfViewer.printMode?(this.pdfViewerBase.showPrintLoadingIndicator(!0),this.iframe=document.createElement("iframe"),this.iframe.className="iframeprint",this.iframe.id="iframePrint",this.iframe.style.position="fixed",this.iframe.style.top="-100000000px",document.body.appendChild(this.iframe),this.frameDoc=this.iframe.contentWindow?this.iframe.contentWindow:this.iframe.contentDocument,this.frameDoc.document.open()):(this.printWindow=window.open("","print","height="+window.outerHeight+",width="+window.outerWidth+",tabbar=no"),this.printWindow.moveTo(0,0),this.printWindow.resizeTo(screen.availWidth,screen.availHeight),this.createPrintLoadingIndicator(this.printWindow.document.body)),setTimeout(function(){for(t=0;t<e.pdfViewerBase.pageCount;t++)e.pdfViewer.printModule.createRequestForPrint(t,e.pdfViewerBase.pageSize[t].width,e.pdfViewerBase.pageSize[t].height,e.pdfViewerBase.pageCount);e.pdfViewer.firePrintEnd(e.pdfViewer.downloadFileName)},100))},s.prototype.createRequestForPrint=function(e,t,i,n){var o=this,r={pageNumber:e.toString(),documentId:this.pdfViewerBase.documentId,hashId:this.pdfViewerBase.hashId,zoomFactor:"2",action:"PrintImages",elementId:this.pdfViewer.element.id,uniqueId:this.pdfViewerBase.documentId};this.pdfViewerBase.jsonDocumentId&&(r.documentId=this.pdfViewerBase.jsonDocumentId),o.pdfViewerBase.createFormfieldsJsonData(),o.printRequestHandler=new Ue(o.pdfViewer),o.printRequestHandler.url=o.pdfViewer.serviceUrl+"/"+o.pdfViewer.serverActionSettings.print,o.printRequestHandler.responseType=null,o.printRequestHandler.mode=!1,this.pdfViewerBase.validateForm&&this.pdfViewer.enableFormFieldsValidation?(this.pdfViewer.fireValidatedFailed(o.pdfViewer.serverActionSettings.download),this.pdfViewerBase.validateForm=!1,this.pdfViewerBase.showPrintLoadingIndicator(!1)):o.printRequestHandler.send(r),o.printRequestHandler.onSuccess=function(l){o.pdfViewerBase.isPrint=!0;var d=l.data;if(d&&"object"!=typeof d)try{"object"!=typeof(d=JSON.parse(d))&&(o.pdfViewerBase.onControlError(500,d,o.pdfViewer.serverActionSettings.print),d=null)}catch(V){o.pdfViewerBase.onControlError(500,d,o.pdfViewer.serverActionSettings.print),d=null}if(d&&d.uniqueId===o.pdfViewerBase.documentId){o.pdfViewer.fireAjaxRequestSuccess(o.pdfViewer.serverActionSettings.print,d);var h="";if(!o.pdfViewer.annotationSettings.skipPrint){var p=o.pdfViewerBase.documentAnnotationCollections;if(p&&p[d.pageNumber]&&o.pdfViewerBase.isTextMarkupAnnotationModule()){var f=p[d.pageNumber];h=o.pdfViewer.annotationModule.textMarkupAnnotationModule.printTextMarkupAnnotations(f.textMarkupAnnotation,d.pageNumber,f.stampAnnotations,f.shapeAnnotation,f.measureShapeAnnotation,o.pdfViewerBase.isImportAction?f.stickyNotesAnnotation:f.stickyNoteAnnotation)}o.pdfViewerBase.isAnnotationCollectionRemoved&&(h=o.pdfViewer.annotationModule.textMarkupAnnotationModule.printTextMarkupAnnotations(null,d.pageNumber,null,null,null,null))}var y=d.pageNumber;o.printCanvas=(0,a.az)("canvas",{id:o.pdfViewer.element.id+"_printCanvas_"+e,className:"e-pv-print-canvas"}),o.printCanvas.style.width=t+"px",o.printCanvas.style.height=i+"px",o.printCanvas.height=2*o.printHeight*window.devicePixelRatio,o.printCanvas.width=2*o.printWidth*window.devicePixelRatio;var C=o.printCanvas.getContext("2d"),S=new Image,x=new Image;S.onload=function(){i>t||!o.pdfViewer.enablePrintRotation?(C.drawImage(S,0,0,o.printCanvas.width,o.printCanvas.height),h&&C.drawImage(x,0,0,o.printCanvas.width,o.printCanvas.height)):(C.translate(.5*o.printCanvas.width,.5*o.printCanvas.height),C.rotate(-.5*Math.PI),C.translate(.5*-o.printCanvas.height,.5*-o.printCanvas.width),C.drawImage(S,0,0,o.printCanvas.height,o.printCanvas.width),h&&C.drawImage(x,0,0,o.printCanvas.height,o.printCanvas.width)),y===o.pdfViewerBase.pageCount-1&&o.printWindowOpen(),o.pdfViewer.renderDrawing(null,e)},S.src=d.image,x.src=h,o.printViewerContainer.appendChild(o.printCanvas)}o.pdfViewerBase.isPrint=!1},this.printRequestHandler.onFailure=function(l){o.pdfViewer.fireAjaxRequestFailed(l.status,l.statusText,o.pdfViewer.serverActionSettings.print)},this.printRequestHandler.onError=function(l){o.pdfViewerBase.openNotificationPopup(),o.pdfViewer.fireAjaxRequestFailed(l.status,l.statusText,o.pdfViewer.serverActionSettings.print)}},s.prototype.renderFieldsForPrint=function(e,t,i){var o,n=null;if(o="Default"===this.pdfViewer.printMode?this.frameDoc.document.getElementById("fields_"+e):this.printWindow.document.getElementById("fields_"+e),this.pdfViewer.formFieldsModule&&(n=this.pdfViewerBase.getItemFromSessionStorage("_formfields")),this.pdfViewer.formDesignerModule){var V=null;if(this.pdfViewer.formDesignerModule&&(V=this.pdfViewerBase.getItemFromSessionStorage("_formDesigner")),V)for(var T=JSON.parse(V),l=0;l<T.length;l++)if((d=T[l].FormField).pageNumber-1===e&&d.isPrint){var k=this.pdfViewer.nameTable[T[l].Key.split("_")[0]],A=k.wrapper.children[0],M=void 0;if(A)if("RadioButton"===d.formFieldAnnotationType)for(var I=0;I<d.radiobuttonItem.length;I++)k=this.pdfViewer.nameTable[d.radiobuttonItem[I].id.split("_")[0]],(M=this.createFormDesignerFields(d.radiobuttonItem[I],A,k))&&(this.applyPosition(M,f=d.radiobuttonItem[I].lineBound,d.radiobuttonItem[I].fontFamily,t,i,!0,d.radiobuttonItem[I].zoomValue,d.pageNumber-1),o.appendChild(M));else(M=this.createFormDesignerFields(d,A,k))&&(this.applyPosition(M,f=d.lineBound,d.fontFamily,t,i,!0,d.zoomValue,d.pageNumber-1),o.appendChild(M))}}else if(n){var r=JSON.parse(n);for(l=0;l<r.length;l++){var d=r[l];if(parseFloat(d.PageIndex)===e){var p=this.pdfViewer.formFieldsModule.createFormFields(d,e,l,o).currentField;if(p){var f;if(this.applyPosition(p,f=d.LineBounds,d.Font,t,i),p.InsertSpaces=d.InsertSpaces,p.InsertSpaces){var u=parseInt(p.style.width)/p.maxLength-parseFloat(p.style.fontSize)/2-.6;p.style.letterSpacing=u+"px",p.style.fontFamily="monospace"}var m=this.pdfViewerBase.pageSize[e];if(m.width>m.height&&this.pdfViewer.enablePrintRotation){var g=this.pdfViewer.formFieldsModule.ConvertPointToPixel(f.X),v=this.pdfViewer.formFieldsModule.ConvertPointToPixel(f.Y),y=this.pdfViewer.formFieldsModule.ConvertPointToPixel(f.Width),b=this.pdfViewer.formFieldsModule.ConvertPointToPixel(f.Height),S=m.width-g-b,x=v+b;p.style.transform="rotate(-90deg)",p.style.transformOrigin="left bottom",p.style.left=x+"px",p.style.top=S+"px",p.style.height=b+"px",p.style.width=y+"px"}p.style.backgroundColor="transparent",d.IsSignatureField||(p.style.borderColor="transparent"),o.appendChild(p)}}}}},s.prototype.createFormDesignerFields=function(e,t,i){var n,o;return o=this.pdfViewer.formDesignerModule.createHtmlElement("div",{id:"form_field_"+t.id+"_html_element",class:"foreign-object"}),n=this.pdfViewer.formDesignerModule.createHtmlElement("div",{id:t.id+"_html_element",class:"foreign-object"}),"SignatureField"===e.formFieldAnnotationType||"InitialField"===e.formFieldAnnotationType?(this.pdfViewer.formDesignerModule.disableSignatureClickEvent=!0,t.template=n.appendChild(this.pdfViewer.formDesignerModule.createSignatureDialog(this.pdfViewer,i,null,!0)),this.pdfViewer.formDesignerModule.disableSignatureClickEvent=!1):t.template=n.appendChild("DropdownList"===e.formFieldAnnotationType?this.pdfViewer.formDesignerModule.createDropDownList(t,i,!0):"ListBox"===e.formFieldAnnotationType?this.pdfViewer.formDesignerModule.createListBox(t,i,!0):this.pdfViewer.formDesignerModule.createInputElement(e.formFieldAnnotationType,i,null,!0)),o.appendChild(n),n},s.prototype.applyPosition=function(e,t,i,n,o,r,l,d){if(t){var f,p=void 0,c=void 0,u=void 0,m=this.pdfViewerBase.pageSize[d],g=m?m.width:0;r&&(m?m.height:0)<g&&this.pdfViewer.enablePrintRotation?(f=g-t.X/l-t.Height/l,p=(t.Y+t.Height)/l,c=t.Width/l,u=t.Height/l,e.style.transform="rotate(-90deg)",e.style.transformOrigin="left bottom"):(p=r?t.X/l/o:this.pdfViewer.formFieldsModule.ConvertPointToPixel(t.X)/o,f=r?t.Y/l/n:this.pdfViewer.formFieldsModule.ConvertPointToPixel(t.Y)/n,c=r?t.Width/l/o:this.pdfViewer.formFieldsModule.ConvertPointToPixel(t.Width)/o,u=r?t.Height/l/n:this.pdfViewer.formFieldsModule.ConvertPointToPixel(t.Height)/n);var y=0;null!==i&&i.Height&&(e.style.fontFamily=i.Name,i.Italic&&(e.style.fontStyle="italic"),i.Bold&&(e.style.fontWeight="Bold"),y=this.pdfViewerBase.ConvertPointToPixel(i.Size)),a.AR.isIE&&(f-=1),this.pdfViewerBase.setStyleToTextDiv(e,p,f,y,c,u,!0)}},s.prototype.printWindowOpen=function(){var i,e=this,t=navigator.userAgent;i="Default"===this.pdfViewer.printMode?this.frameDoc.document:this.printWindow.document;for(var n=0;n<this.printViewerContainer.children.length;n++){var o=this.printViewerContainer.children[n].toDataURL();if(i.write('<div style="margin:0mm;width:'+this.printWidth.toString()+"px;height:"+this.printHeight.toString()+'px;position:relative"><img src="'+o+'" id="image_'+n+'" /><div id="fields_'+n+'" style="margin:0px;top:0px;left:0px;position:absolute;width:'+this.printWidth.toString()+"px;height:"+this.printHeight.toString()+'px;z-index:2"></div></div>'),this.pdfViewer.formFieldsModule||this.pdfViewer.formDesignerModule){var d,h,r=this.pdfViewerBase.pageSize[n].width,l=this.pdfViewerBase.pageSize[n].height;l<r&&this.pdfViewer.enablePrintRotation?(d=l/this.printWidth,h=r/this.printHeight):(d=l/this.printHeight,h=r/this.printWidth),this.renderFieldsForPrint(n,d,h)}0===n&&(-1!==t.indexOf("Chrome")||-1!==t.indexOf("Safari")||-1!==t.indexOf("Firefox")?(i.write("<!DOCTYPE html>"),i.write("<html moznomarginboxes mozdisallowselectionprint><head><style>html, body { height: 100%; width:100% } img { height: 100%; width: 100%; display: block; }@media print { body { margin: 0cm; } img { width:100%; width:100%; box-sizing: border-box; }br, button { display: none; } div{ page-break-inside: avoid; }} @page{margin:0mm;  size:"+this.printWidth.toString()+"px "+this.printHeight.toString()+'px; }</style></head><body><center class="loader">')):(i.write("<!DOCTYPE html>"),i.write("<html><head><style>html, body { height: 100%; } img { height: 100%; width: 100%; }@media print { body { margin: 0cm; }img { width:100%; width:100%; box-sizing: border-box; }br, button { display: none; } div{ page-break-inside: avoid; }} @page{margin:0mm;  size:"+this.printWidth.toString()+"px "+this.printHeight.toString()+"px; }</style></head><body><center>")))}if(a.AR.isIE||"edge"===a.AR.info.name)try{"Default"===this.pdfViewer.printMode?(this.pdfViewerBase.showPrintLoadingIndicator(!1),this.iframe.contentWindow.document.execCommand("print",!1,null)):this.printWindow.document.execCommand("print",!1,null)}catch(p){"Default"===this.pdfViewer.printMode?(this.pdfViewerBase.showPrintLoadingIndicator(!1),this.iframe.contentWindow.print()):this.printWindow.print()}else setTimeout(function(){"Default"===e.pdfViewer.printMode?(e.pdfViewerBase.showPrintLoadingIndicator(!1),e.iframe.contentWindow.print(),e.iframe.contentWindow.focus(),document.body.removeChild(e.iframe)):e.printWindow&&(e.printWindow.print(),e.printWindow.focus(),e.printWindow.close())},200)},s.prototype.createPrintLoadingIndicator=function(e){var t=(0,a.az)("div",{id:this.pdfViewer.element.id+"_printWindowcontainer"});t.style.height="100%",t.style.width="100%",t.style.position="absolute",t.style.zIndex=2e3,t.style.left=0,t.style.top=0,t.style.overflow="auto",t.style.backgroundColor="rgba(0, 0, 0, 0.3)",e.appendChild(t);var i=(0,a.az)("div",{id:this.pdfViewer.element.id+"_printLoadingContainer"});i.style.position="absolute",i.style.width="50px",i.style.height="50px",i.style.left="46%",i.style.top="45%",t.style.zIndex=3e3,t.appendChild(i);var n=new Image;n.src="data:image/gif;base64,R0lGODlhNgA3APMAAP///wAAAHh4eBwcHA4ODtjY2FRUVNzc3MTExEhISIqKigAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAANgA3AAAEzBDISau9OOvNu/9gKI5kaZ4lkhBEgqCnws6EApMITb93uOqsRC8EpA1Bxdnx8wMKl51ckXcsGFiGAkamsy0LA9pAe1EFqRbBYCAYXXUGk4DWJhZN4dlAlMSLRW80cSVzM3UgB3ksAwcnamwkB28GjVCWl5iZmpucnZ4cj4eWoRqFLKJHpgSoFIoEe5ausBeyl7UYqqw9uaVrukOkn8LDxMXGx8ibwY6+JLxydCO3JdMg1dJ/Is+E0SPLcs3Jnt/F28XXw+jC5uXh4u89EQAh+QQJCgAAACwAAAAANgA3AAAEzhDISau9OOvNu/9gKI5kaZ5oqhYGQRiFWhaD6w6xLLa2a+iiXg8YEtqIIF7vh/QcarbB4YJIuBKIpuTAM0wtCqNiJBgMBCaE0ZUFCXpoknWdCEFvpfURdCcM8noEIW82cSNzRnWDZoYjamttWhphQmOSHFVXkZecnZ6foKFujJdlZxqELo1AqQSrFH1/TbEZtLM9shetrzK7qKSSpryixMXGx8jJyifCKc1kcMzRIrYl1Xy4J9cfvibdIs/MwMue4cffxtvE6qLoxubk8ScRACH5BAkKAAAALAAAAAA2ADcAAATOEMhJq7046827/2AojmRpnmiqrqwwDAJbCkRNxLI42MSQ6zzfD0Sz4YYfFwyZKxhqhgJJeSQVdraBNFSsVUVPHsEAzJrEtnJNSELXRN2bKcwjw19f0QG7PjA7B2EGfn+FhoeIiYoSCAk1CQiLFQpoChlUQwhuBJEWcXkpjm4JF3w9P5tvFqZsLKkEF58/omiksXiZm52SlGKWkhONj7vAxcbHyMkTmCjMcDygRNAjrCfVaqcm11zTJrIjzt64yojhxd/G28XqwOjG5uTxJhEAIfkECQoAAAAsAAAAADYANwAABM0QyEmrvTjrzbv/YCiOZGmeaKqurDAMAlsKRE3EsjjYxJDrPN8PRLPhhh8XDMk0KY/OF5TIm4qKNWtnZxOWuDUvCNw7kcXJ6gl7Iz1T76Z8Tq/b7/i8qmCoGQoacT8FZ4AXbFopfTwEBhhnQ4w2j0GRkgQYiEOLPI6ZUkgHZwd6EweLBqSlq6ytricICTUJCKwKkgojgiMIlwS1VEYlspcJIZAkvjXHlcnKIZokxJLG0KAlvZfAebeMuUi7FbGz2z/Rq8jozavn7Nev8CsRACH5BAkKAAAALAAAAAA2ADcAAATLEMhJq7046827/2AojmRpnmiqrqwwDAJbCkRNxLI42MSQ6zzfD0Sz4YYfFwzJNCmPzheUyJuKijVrZ2cTlrg1LwjcO5HFyeoJeyM9U++mfE6v2+/4PD6O5F/YWiqAGWdIhRiHP4kWg0ONGH4/kXqUlZaXmJlMBQY1BgVuUicFZ6AhjyOdPAQGQF0mqzauYbCxBFdqJao8rVeiGQgJNQkIFwdnB0MKsQrGqgbJPwi2BMV5wrYJetQ129x62LHaedO21nnLq82VwcPnIhEAIfkECQoAAAAsAAAAADYANwAABMwQyEmrvTjrzbv/YCiOZGmeaKqurDAMAlsKRE3EsjjYxJDrPN8PRLPhhh8XDMk0KY/OF5TIm4qKNWtnZxOWuDUvCNw7kcXJ6gl7Iz1T76Z8Tq/b7/g8Po7kX9haKoAZZ0iFGIc/iRaDQ40Yfj+RepSVlpeYAAgJNQkIlgo8NQqUCKI2nzNSIpynBAkzaiCuNl9BIbQ1tl0hraewbrIfpq6pbqsioaKkFwUGNQYFSJudxhUFZ9KUz6IGlbTfrpXcPN6UB2cHlgfcBuqZKBEAIfkECQoAAAAsAAAAADYANwAABMwQyEmrvTjrzbv/YCiOZGmeaKqurDAMAlsKRE3EsjjYxJDrPN8PRLPhhh8XDMk0KY/OF5TIm4qKNWtnZxOWuDUvCNw7kcXJ6gl7Iz1T76Z8Tq/b7yJEopZA4CsKPDUKfxIIgjZ+P3EWe4gECYtqFo82P2cXlTWXQReOiJE5bFqHj4qiUhmBgoSFho59rrKztLVMBQY1BgWzBWe8UUsiuYIGTpMglSaYIcpfnSHEPMYzyB8HZwdrqSMHxAbath2MsqO0zLLorua05OLvJxEAIfkECQoAAAAsAAAAADYANwAABMwQyEmrvTjrzbv/YCiOZGmeaKqurDAMAlsKRE3EsjjYxJDrPN8PRLPhfohELYHQuGBDgIJXU0Q5CKqtOXsdP0otITHjfTtiW2lnE37StXUwFNaSScXaGZvm4r0jU1RWV1hhTIWJiouMjVcFBjUGBY4WBWw1A5RDT3sTkVQGnGYYaUOYPaVip3MXoDyiP3k3GAeoAwdRnRoHoAa5lcHCw8TFxscduyjKIrOeRKRAbSe3I9Um1yHOJ9sjzCbfyInhwt3E2cPo5dHF5OLvJREAOwAAAAAAAAAAAA==",n.style.width="50px",n.style.height="50px",i.appendChild(n);var o=(0,a.az)("div",{id:this.pdfViewer.element.id+"_printLabelContainer"});o.style.position="absolute",o.textContent="Loading ...",o.style.fontWeight="Bold",o.style.left="46%",o.style.top="54.5%",o.style.zIndex="3000",t.appendChild(o)},s.prototype.destroy=function(){this.printViewerContainer=void 0,this.frameDoc=void 0,this.printWindow=void 0},s.prototype.getModuleName=function(){return"Print"},s}(),Dh=function(){function s(e,t){this.maintainTabIndex={},this.maintanMinTabindex={},this.isSignatureField=!1,this.isKeyDownCheck=!1,this.readOnlyCollection=[],this.isSignatureRendered=!1,this.signatureFieldCollection=[],this.selectedIndex=[],this.renderedPageList=[],this.pdfViewer=e,this.pdfViewerBase=t}return s.prototype.renderFormFields=function(e){if(this.maxTabIndex=0,this.minTabIndex=-1,-1!==this.renderedPageList.indexOf(e)?(this.data=this.pdfViewerBase.getItemFromSessionStorage("_formDesigner"),this.data||(this.data=this.pdfViewerBase.getItemFromSessionStorage("_formfields"))):this.data=this.pdfViewerBase.getItemFromSessionStorage("_formfields"),this.data){this.formFieldsData=JSON.parse(this.data);var t=document.getElementById(this.pdfViewer.element.id+"_textLayer_"+e),i=document.getElementById(this.pdfViewer.element.id+"_pageCanvas_"+e),n=void 0;if(null!==this.formFieldsData&&null!==i&&null!==t){for(var o=!1,r=0;r<this.formFieldsData.length;r++){var l=this.formFieldsData[r];!o&&(0,a.le)(l.ActualFieldName)&&l.PageIndex===e&&(n=parseInt(l.FieldName.split("_")[1]),o=!0)}-1===this.renderedPageList.indexOf(e)&&this.renderedPageList.push(e);for(var d=0;d<this.formFieldsData.length;d++){var h=this.formFieldsData[d];if(""!==h.FieldName){h.IsInitialField&&(h.Name="InitialField");var p=h.Font;if(this.pdfViewer.formDesigner){if(parseFloat(h.PageIndex)==e){var f=void 0,c=void 0,u=void 0;null!==p&&p.Height&&(f=p.Name,p.Italic&&(c="Italic"),p.Bold&&(c="Bold"),p.Strikeout&&(c="Strikethrough"),p.Underline&&(c="Underline"),u=this.ConvertPointToPixel(p.Size));var m=2===h.Alignment?"right":1===h.Alignment?"center":"left",g=h.BackColor,v=h.LineBounds,y="rgba("+g.R+","+g.G+","+g.B+",1)";!0===h.IsTransparent&&(y="rgba(0,0,0,0)"),"#000000ff"===(y=this.rgbaToHex(y))&&(y="#daeaf7ff");var b=h.FontColor,T={left:this.ConvertPointToPixel(v.X),top:this.ConvertPointToPixel(v.Y),width:this.ConvertPointToPixel(v.Width),height:V=this.ConvertPointToPixel(v.Height)},k=!1,A=0;0!==h.Rotation?(-90===h.RotationAngle||-270===h.RotationAngle||-180===h.RotationAngle)&&(T=this.getBounds(T,e,0,k)):(T=this.getBounds(T,e,0,k=!0),A=this.getAngle(e));var M="rgba("+b.R+","+b.G+","+b.B+",1)";M=this.rgbaToHex(M);var I=h.BorderColor,B="rgba("+I.R+","+I.G+","+I.B+",1)";B=this.rgbaToHex(B);var N=h.BorderWidth;this.selectedIndex=[];var D;D="RadioButton"===h.Name?h.Text?h.Text:h.Value:h.Text;var Z={bounds:{X:T.left,Y:T.top,Width:T.width,Height:T.height},pageNumber:parseFloat(h.PageIndex)+1,name:h.ActualFieldName,tooltip:h.ToolTip,value:D,isChecked:h.Selected,isSelected:h.Selected,fontFamily:f,fontStyle:c,backgroundColor:y,color:M,borderColor:B,thickness:N,fontSize:u,isMultiline:h.Multiline,rotateAngle:A,isReadOnly:h.IsReadonly,isRequired:h.IsRequired,alignment:m,options:this.getListValues(h),selectedIndex:this.selectedIndex,maxLength:h.MaxLength,visibility:1===h.Visible?"hidden":"visible",font:{isItalic:!(0,a.le)(p)&&p.Italic,isBold:!(0,a.le)(p)&&p.Bold,isStrikeout:!(0,a.le)(p)&&p.Strikeout,isUnderline:!(0,a.le)(p)&&p.Underline}};!h.id&&this.pdfViewer.formFieldCollections[d]&&!(0,a.le)(h.ActualFieldName)&&(Z.id=this.pdfViewer.formFieldCollections[d].id),("DropDown"===h.Name||"ListBox"===h.Name)&&(Z.value=h.SelectedValue);var O=this.getFormFieldType(h);if(("SignatureText"!==h.Name||"SignatureImage"!==h.Name)&&!(0,a.le)(this.getFormFieldType(h))){if(h.IsRequired){var H=Z.thickness;Z.thickness=H=H>0?H:1}var $=this.pdfViewer.formDesignerModule.addFormField(O,Z,!1,Z.id);$&&$.parentElement&&(h.id=$.parentElement.id.split("_")[0]),$&&"hidden"===$.style.visibility&&($.childNodes[0].disabled=!0)}("SignatureField"===O||"InitialField"===O)&&(this.addSignaturePath(h,n),(0,a.le)(h.Value)||(this.renderExistingAnnnot(h,parseFloat(h.PageIndex)+1,null,k),this.isSignatureRendered=!0,n++)),this.pdfViewerBase.isLoadedFormFieldAdded=!0}}else if(parseFloat(h.PageIndex)==e){var me=this.createFormFields(h,e,d,null,n),W=me.currentField,Te=me.count;if(W){var ke=this.createParentElement(h,e),rt=(v=h.LineBounds,h.Font),Rt=(k=!1,0);if(0===h.Rotation&&(k=!0,Rt=this.getAngle(e)),ke?ke.style.transform="rotate("+Rt+"deg)":W.style.transform="rotate("+Rt+"deg)",this.applyPosition(W,v,rt,e,0,k),W.InsertSpaces=h.InsertSpaces,W.InsertSpaces){var fi=this.pdfViewerBase.getZoomFactor(),Nn=parseInt(W.style.width)/W.maxLength-parseFloat(W.style.fontSize)/2-.6*fi;W.style.letterSpacing=Nn+"px",W.style.fontFamily="monospace",W.style.paddingLeft=Nn/2+"px"}h.uniqueID=this.pdfViewer.element.id+"input_"+e+"_"+d;for(var Ni=0;Ni<this.pdfViewer.formFieldCollections.length;Ni++)("text"===W.type||"password"===W.type||"textarea"===W.type)&&"SignatureField"!==h.Name&&h.uniqueID===this.pdfViewer.formFieldCollections[Ni].id&&(this.pdfViewer.formFieldCollections[Ni].value=h.Text);(0,a.le)(h.Value)&&(h.Value=h.Text),h.ToolTip&&this.setToolTip(h.ToolTip,W),this.applyCommonProperties(W,e,d,h,k),this.checkIsReadonly(h,W),this.applyTabIndex(h,W,e),this.checkIsRequiredField(h,W),this.applyDefaultColor(W),this.updateFormFieldsCollection(h),ke?(ke.appendChild(W),t.appendChild(ke)):(W.style.position="absolute",t.appendChild(W)),W.addEventListener("focus",this.focusFormFields.bind(this)),W.addEventListener("blur",this.blurFormFields.bind(this)),W.addEventListener("click",this.updateFormFields.bind(this)),W.addEventListener("change",this.changeFormFields.bind(this)),W.addEventListener("keydown",this.updateFormFieldsValue.bind(this)),W.addEventListener("keyup",this.updateSameFieldsValue.bind(this)),n=Te}}}}this.pdfViewer.formDesigner||(window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_formfields"),this.pdfViewerBase.setItemInSessionStorage(this.formFieldsData,"_formfields"))}}if(this.pdfViewerBase.isFocusField&&this.pdfViewerBase.focusField){var Ha=document.getElementById(this.pdfViewerBase.focusField.id);if(Ha){if("SignatureField"!==this.pdfViewerBase.focusField.type&&"InitialField"!==this.pdfViewerBase.focusField.type||!this.pdfViewer.formDesignerModule)Ha.focus();else{var Bh=this.pdfViewerBase.focusField.bounds.y,V=this.pdfViewerBase.getPageHeight(this.pdfViewerBase.focusField.pageIndex);this.pdfViewer.bookmark.goToBookmark(this.pdfViewerBase.focusField.pageIndex,V-Bh)}this.pdfViewerBase.isFocusField=!1,this.pdfViewerBase.focusField=[]}}},s.prototype.setToolTip=function(e,t){new j.u({content:e}).appendTo(t)},s.prototype.trim=function(e){return e.replace(/^\s+|\s+$/gm,"")},s.prototype.rgbaToHex=function(e){var t=e.substring(e.indexOf("(")).split(","),i=parseInt(this.trim(t[0].substring(1)),10),n=parseInt(this.trim(t[1]),10),o=parseInt(this.trim(t[2]),10),r=parseFloat(parseFloat(this.trim(t[3].substring(0,t[3].length-1))).toFixed(2)),l=[i.toString(16),n.toString(16),o.toString(16),Math.round(255*r).toString(16).substring(0,2)];return l.forEach(function(d,h){1===d.length&&(l[h]="0"+d)}),"#"+l.join("")},s.prototype.getListValues=function(e){for(var t=e.TextList,i=[],n=0;n<t.length;n++)t[n]===e.SelectedValue&&this.selectedIndex.push(n),i.push({itemName:t[n],itemValue:t[n]});return"ListBox"===this.getFormFieldType(e)&&(this.selectedIndex=e.SelectedList),i},s.prototype.createParentElement=function(e,t){var i;if("Textbox"===e.Name||"Password"===e.Name){(i=document.createElement("div")).style.background="white",e.InsertSpaces&&(i.style.background="transparent");var n=e.LineBounds,o=e.Font;i.style.position="absolute";var r=!1;0===e.Rotation&&(r=!0),this.applyPosition(i,n,o,t,0,r)}return i},s.prototype.getAngle=function(e){var t=0,i=this.pdfViewerBase.pageSize[e];if(i&&i.rotation)switch(i.rotation){case 0:t=0;break;case 1:t=90;break;case 2:t=180;break;case 3:t=270}return t},s.prototype.nextField=function(){this.signatureFieldNavigate(!0)},s.prototype.previousField=function(){this.signatureFieldNavigate(!1)},s.prototype.signatureFieldNavigate=function(e){var n,t=e,i=this.signatureFieldCollection;if(0===i.length&&(i=this.getSignField()),this.currentTarget){for(var o=0;o<i.length;o++)if(this.currentTarget.id===(n=this.pdfViewer.formDesignerModule?i[o].FormField:i[o]).uniqueID){this.currentTarget=document.getElementById(n.uniqueID),this.getSignatureIndex(o,i.length,t);break}}else e&&(n=this.pdfViewer.formDesignerModule?i[0].FormField:i[0]).uniqueID&&(this.currentTarget=document.getElementById(n.uniqueID),this.getSignatureIndex(0,i.length,t,!0))},s.prototype.getSignatureIndex=function(e,t,i,n){var o=e;n||(i?o++:o--),1===t?this.renderSignatureField(0):o<t&&o>=0?this.renderSignatureField(o):i?o>=t&&this.renderSignatureField(0):o<=0&&this.renderSignatureField(t-1)},s.prototype.renderSignatureField=function(e){var n,t=e,i=this.signatureFieldCollection;if(t<i.length){for(var o=0;o<i.length;o++){var l=this.pdfViewer.formDesignerModule?i[o].FormField:i[o];if((this.pdfViewer.formDesignerModule?i[t].FormField.uniqueID:i[t].uniqueID)===l.uniqueID){this.pdfViewer.annotationModule.findRenderPageList(d=l.PageIndex>=0?l.PageIndex:l.pageNumber)||this.pdfViewer.navigation.goToPage(d),this.currentTarget=document.getElementById(l.uniqueID),n=l;break}}var d;null===this.currentTarget&&(this.pdfViewer.navigation.goToPage(d=n.PageIndex>=0?n.PageIndex:n.pageNumber),this.currentTarget=document.getElementById(n.uniqueID)),this.currentTarget&&("e-pdfviewer-signatureformfields-signature"===this.currentTarget.className?(document.getElementById(this.currentTarget.id).focus(),this.pdfViewer.select([this.currentTarget.id],null)):"e-pdfviewer-signatureformfields"===this.currentTarget.className&&(this.pdfViewer.formDesignerModule?document.getElementById(this.currentTarget.id).parentElement.focus():document.getElementById(this.currentTarget.id).focus()))}},s.prototype.setFocus=function(e){e?(this.removeFocus(),document.getElementById(e).classList.add("e-pv-signature-focus")):this.currentTarget&&document.getElementById(this.currentTarget.id).focus()},s.prototype.removeFocus=function(){if(this.signatureFieldCollection){var e=this.signatureFieldCollection;0===e.length&&(e=this.getSignField());for(var t=0;t<this.signatureFieldCollection.length;t++){var n=document.getElementById(this.pdfViewer.formDesignerModule?this.signatureFieldCollection[t].FormField.uniqueID:this.signatureFieldCollection[t].uniqueID);n&&n.classList.remove("e-pv-signature-focus")}this.pdfViewer.formFieldsModule.currentTarget&&this.pdfViewer.formFieldsModule.currentTarget.classList.remove("e-pv-signature-focus")}},s.prototype.getSignField=function(){return this.signatureFieldCollection=this.pdfViewer.formDesignerModule?this.pdfViewer.formDesignerModule.getFormDesignerSignField(this.signatureFieldCollection):this.getFormFieldSignField(),this.signatureFieldCollection},s.prototype.getFormFieldSignField=function(){var t,e=this.pdfViewerBase.getItemFromSessionStorage("_formfields");if(e)for(var i=JSON.parse(e),n=0;n<i.length;n++)"SignatureField"===(t=i[n]).Name&&(t.uniqueID=this.pdfViewer.element.id+"input_"+t.PageIndex+"_"+n,this.signatureFieldCollection.push(i[n]));return this.signatureFieldCollection},s.prototype.formFieldCollections=function(){var e=this.pdfViewerBase.getItemFromSessionStorage("_formfields");if(e)for(var t=JSON.parse(e),i=0;i<t.length;i++){var n=t[i],o=n.Name;if(this.pdfViewer.formDesignerModule)"ink"!==n.Name&&"SignatureImage"!==n.Name&&"SignatureText"!==n.Name&&this.retreiveFormFieldsData(n,!0);else if("ink"!==n.Name){var r={name:this.retriveFieldName(n),id:this.pdfViewer.element.id+"input_"+parseFloat(n.PageIndex)+"_"+i,isReadOnly:!1,type:n.IsInitialField?"InitialField":o,value:this.retriveCurrentValue(n),fontName:"",isRequired:n.IsRequired};this.pdfViewer.formFieldCollections.push(r)}}},s.prototype.retreiveFormFieldsData=function(e,t){var i,n,o;if(""!==e.FieldName){e.IsInitialField&&(e.Name="InitialField");var r=e.Font;null!==r&&r.Height&&(i=r.Name,r.Italic&&(n="Italic"),r.Bold&&(n="Bold"),r.Strikeout&&(n="Strikethrough"),r.Underline&&(n="Underline"),o=this.ConvertPointToPixel(r.Size));var l=2===e.Alignment?"right":1===e.Alignment?"center":"left",d=e.BackColor,h=e.LineBounds,p="rgba("+d.R+","+d.G+","+d.B+",1)";"#000000ff"===(p=this.rgbaToHex(p))&&(p="#daeaf7ff");var f=e.FontColor,v={left:this.ConvertPointToPixel(h.X),top:this.ConvertPointToPixel(h.Y),width:this.ConvertPointToPixel(h.Width),height:this.ConvertPointToPixel(h.Height)},y="rgba("+f.R+","+f.G+","+f.B+",1)";y=this.rgbaToHex(y);var b=e.BorderColor,C="rgba("+b.R+","+b.G+","+b.B+",1)";C=this.rgbaToHex(C);var S=e.BorderWidth;this.selectedIndex=[];var x={bounds:{X:v.left,Y:v.top,Width:v.width,Height:v.height},pageNumber:parseFloat(e.PageIndex)+1,name:e.ActualFieldName,tooltip:e.ToolTip,value:e.Text,isChecked:e.Selected,isSelected:e.Selected,fontFamily:i,fontStyle:n,backgroundColor:p,color:y,borderColor:C,thickness:S,fontSize:o,isMultiline:e.Multiline,isReadOnly:e.IsReadonly,isRequired:e.IsRequired,alignment:l,options:this.getListValues(e),selectedIndex:this.selectedIndex,maxLength:e.MaxLength,visibility:1===e.Visible?"hidden":"visible",font:{isItalic:!(0,a.le)(r)&&r.Italic,isBold:!(0,a.le)(r)&&r.Bold,isStrikeout:!(0,a.le)(r)&&r.Strikeout,isUnderline:!(0,a.le)(r)&&r.Underline}};("DropDown"===e.Name||"ListBox"===e.Name)&&(x.value=e.SelectedValue);var V=this.getFormFieldType(e);return("SignatureField"===V||"InitialField"===V)&&(this.addSignaturePath(e),this.isSignatureField&&(x.value=e.Value)),this.pdfViewer.formDesignerModule.addFormField(V,x,t)}return null},s.prototype.updateFormFieldsCollection=function(e){var t=e.Name,i={name:this.retriveFieldName(e),id:e.uniqueID,isReadOnly:e.IsReadonly,isRequired:e.IsRequired,isSelected:"CheckBox"!==t&&e.Selected,isChecked:"RadioButton"!==t&&e.Selected,type:t,value:"ListBox"===t||"DropDown"===t?e.SelectedValue:e.Value,fontName:e.FontFamily?e.FontFamily:""};this.pdfViewer.formFieldCollections[this.pdfViewer.formFieldCollections.findIndex(function(n){return n.id===i.id})]=i},s.prototype.updateFormFieldValues=function(e){if(this.readOnlyCollection.push(e.id),e){var t=document.getElementById(e.id);t&&(e.isReadOnly?(t.disabled=!0,t.style.backgroundColor="",t.style.cursor="default"):(""===t.style.backgroundColor&&(t.style.backgroundColor="rgba(0, 20, 200, 0.2)"),t.disabled=!1,t.style.cursor="")),this.updateDataInSession(t)}},s.prototype.retriveFieldName=function(e){var t;switch(e.Name){case"Textbox":case"Password":case"SignatureField":case"InitialField":t=e.FieldName;break;case"RadioButton":case"CheckBox":t=e.GroupName;break;case"DropDown":case"ListBox":t=e.Text}return t},s.prototype.retriveCurrentValue=function(e){var t;switch(e.Name){case"Textbox":case"Password":t=e.Text;break;case"SignatureField":t=e.Value;break;case"RadioButton":case"CheckBox":t=e.Selected;break;case"DropDown":t=e.SelectedValue;break;case"ListBox":t=e.SelectedList}return t},s.prototype.getSignatureBounds=function(e,t,i){var n=this.pdfViewerBase.pageSize[i],o=0;switch(n.rotation){case 0:o=t;break;case 1:o={x:t.x+e.Width+t.width/3.5,y:n.width-e.X+t.height/4};break;case 2:o={x:n.width-t.x-t.width,y:n.height-t.y-t.height};break;case 3:o={x:t.y-t.width/2+t.height,y:t.x+t.width/3}}return o},s.prototype.downloadFormFieldsData=function(){var e=this.pdfViewerBase.getItemFromSessionStorage("_formfields");if(e){for(var t=JSON.parse(e),i={},n=[],o=0;o<t.length;o++){var r=t[o],l=r.IsRequired;if("Textbox"===r.Name||"Password"===r.Name||r.Multiline)!l||""!==r.Text&&null!==r.Text?delete this.pdfViewerBase.nonFillableFields[r.FieldName]:(this.pdfViewerBase.validateForm=!0,this.pdfViewerBase.nonFillableFields[r.FieldName]=r.Text),i[r.FieldName]=n={fieldValue:r.Text,isReadOnly:r.IsReadonly};else if("RadioButton"===r.Name&&r.Selected)l&&!1===r.Selected?(this.pdfViewerBase.validateForm=!0,this.pdfViewerBase.nonFillableFields[r.GroupName]=r.Value):delete this.pdfViewerBase.nonFillableFields[r.GroupName],i[r.GroupName]=n={fieldValue:r.Value,isReadOnly:r.IsReadonly};else if("CheckBox"===r.Name)l&&!1===r.Selected?(this.pdfViewerBase.validateForm=!0,this.pdfViewerBase.nonFillableFields[r.GroupName]=r.Selected):delete this.pdfViewerBase.nonFillableFields[r.GroupName],r.CheckboxIndex&&r.Selected?i[r.GroupName]=n={fieldValue:r.CheckboxIndex,isReadOnly:r.IsReadonly}:null==i[r.GroupName]&&(i[r.GroupName]=n={fieldValue:r.Selected,isReadOnly:r.IsReadonly});else if("DropDown"===r.Name)l&&""===r.SelectedValue?(this.pdfViewerBase.validateForm=!0,this.pdfViewerBase.nonFillableFields[r.Text]=r.SelectedValue):delete this.pdfViewerBase.nonFillableFields[r.Text],i[r.Text]=n={fieldValue:r.SelectedValue,isReadOnly:r.IsReadonly};else if("ListBox"===r.Name){for(var d=r.TextList,h=[],p=0;p<r.SelectedList.length;p++)h.push(d[r.SelectedList[p]]);n={fieldValue:JSON.stringify(h),isReadOnly:r.IsReadonly},i[r.Text]=n}else if("SignatureField"===r.Name||"InitialField"===r.Name){var c=void 0;if((null===r.Value||""===r.Value)&&this.addSignaturePath(r),r.Value&&""!==r.Value){c=r.Value;var u=r.fontFamily?r.fontFamily:r.FontFamily;u?(i[r.FieldName+"fontName"]=u,i[r.FieldName+"fontSize"]=r.fontSize?r.fontSize:r.FontSize):r.Value.split("base64,")[1]?i[r.FieldName+"ImageData"]=!0:c=gt(ze(r.Value))}if(l&&null===r.Value||""===r.Value?(this.pdfViewerBase.validateForm=!0,this.pdfViewerBase.nonFillableFields[r.FieldName]=JSON.stringify(c)):delete this.pdfViewerBase.nonFillableFields[r.FieldName],i[r.FieldName]=JSON.stringify(c),r.Bounds){var g=this.getSignatureBounds(r.LineBounds,r.Bounds,r.PageIndex);r.Bounds.x=g.x,r.Bounds.y=g.y,i[r.FieldName+"bounds"]=JSON.stringify(r.Bounds)}else{var v=r.LineBounds;g={x:this.ConvertPointToPixel(v.X),y:this.ConvertPointToPixel(v.Y),width:this.ConvertPointToPixel(v.Width),height:this.ConvertPointToPixel(v.Height)},i[r.FieldName+"bounds"]=JSON.stringify(g)}i[r.FieldName+"isReadOnly"]=r.IsReadonly}}return JSON.stringify(i)}},s.prototype.focusFormFields=function(e){var t=e.target;if(t&&"e-pdfviewer-signatureformfields"!==t.className&&"e-pdfviewer-signatureformfields e-pv-signature-focus"!==t.className){var i=t.style.backgroundColor,n=i.lastIndexOf(","),o=i.slice(0,n+1)+0+")";t.style.backgroundColor=o}else t&&("e-pdfviewer-signatureformfields"===t.className||"e-pdfviewer-signatureformfields-signature"===t.className||"e-pdfviewer-signatureformfields e-pv-signature-focus"===t.className||"e-pdfviewer-signatureformfields-signature  e-pv-signature-focus"===t.className)&&this.setFocus(t.id)},s.prototype.blurFormFields=function(e){var t=e.target;if(t.InsertSpaces&&this.isKeyDownCheck){var i=parseInt(t.style.width)-parseInt(t.style.height)/2;t.style.width=i+"px",this.isKeyDownCheck=!1}this.pdfViewer.fireFocusOutFormField(t.name,"checkbox"===t.type?t.checked:t.value);var n=t.style.backgroundColor,o=n.lastIndexOf(","),r=n.slice(0,o+1)+.2+")";t.style.backgroundColor=r},s.prototype.updateFormFields=function(e){var t=e.target;"e-pdfviewer-ListBox"===t.className?this.updateDataInSession(t=t.parentElement):"e-pdfviewer-signatureformfields"===t.className||"e-pdfviewer-signatureformfields e-pv-signature-focus"===t.className?this.currentTarget=t:("e-pv-buttonItem"===t.className||"button"===t.type)&&this.pdfViewer.fireButtonFieldClickEvent(t.value,t.name,t.id);for(var i=0;i<this.pdfViewer.formFieldCollections.length;i++)t.id===this.pdfViewer.formFieldCollections[i].id&&((this.pdfViewer.formDesignerModule||this.pdfViewer.annotationModule)&&this.pdfViewer.fireFormFieldClickEvent("formFieldClicked",this.pdfViewer.formFieldCollections[i]),("e-pdfviewer-signatureformfields"===t.className||"e-pdfviewer-signatureformfields-signature"===t.className||"e-pdfviewer-signatureformfields e-pv-signature-focus"===t.className||"e-pdfviewer-signatureformfields-signature  e-pv-signature-focus"===t.className)&&this.setFocus(t.id))},s.prototype.drawSignature=function(e,t,i,n){var o,l,d,h,p,r=this;p=this.pdfViewerBase.getItemFromSessionStorage(this.pdfViewer.formDesigner?"_formDesigner":"_formfields");for(var f=JSON.parse(p),c=i?i.name?i.name:i.offsetParent.name:this.currentTarget.name,u=function(){var v=m.pdfViewer.formDesigner?f[g].FormField.name:f[g].FieldName;if(m.pdfViewer.formDesigner?v===c:v===c&&!(0,a.le)(f[g].ActualFieldName)){var y=i=m.pdfViewer.formDesigner?document.getElementById(f[g].Key.split("_")[0]):document.getElementById(f[g].uniqueID),b=y.offsetParent.offsetParent.id.split("_")[0],C=m.pdfViewer.nameTable[b];i&&i.offsetParent&&C&&(d=i.getBoundingClientRect(),h=i.offsetParent.offsetParent.offsetParent.getBoundingClientRect(),m.pdfViewerBase.drawSignatureWithTool=!0,i.nextSibling&&-1!==i.nextSibling.id.indexOf("initial")&&(m.pdfViewer.isInitialFieldToolbarSelection=!0));var D,Z,S=t||m.pdfViewerBase.signatureModule.outputString,x=n||m.pdfViewerBase.signatureModule.fontName,V=m.pdfViewerBase.getZoomFactor(),T=m.pdfViewerBase.drawSignatureWithTool?d.width/V:parseFloat(y.style.width)/V,k=m.pdfViewerBase.drawSignatureWithTool?d.height/V:parseFloat(y.style.height)/V,A=m.pdfViewerBase.drawSignatureWithTool?(d.left-h.left)/V:parseFloat(y.style.left)/V,M=m.pdfViewerBase.drawSignatureWithTool?(d.top-h.top)/V:parseFloat(y.style.top)/V,I=m.pdfViewerBase.drawSignatureWithTool&&i.nextElementSibling?parseFloat(i.nextElementSibling.id.split("_")[1]):parseFloat(y.id.split("_")[1]),B=m.pdfViewerBase.drawSignatureWithTool&&i.nextElementSibling?parseFloat(i.nextElementSibling.id.split("_")[2]):parseFloat(y.id.split("_")[2]),N=m.pdfViewerBase.signatureModule.saveImageString,O=y.offsetParent.offsetParent.style.transform?y.offsetParent.offsetParent.style.transform:y.style.transform,H=(O=O.substring(O.indexOf("(")+1,O.indexOf("d")))?parseInt(O):0;if("Type"===e){if(x||(x="Helvetica"),l=m.getSignBounds(B,H,I,V,A,M,T,k),"Default"===m.pdfViewer.signatureFitMode&&(l=m.getDefaultBoundsforSign(l)),"SignatureText"===(o={id:y.id,bounds:{x:l.x,y:l.y,width:l.width,height:l.height},pageIndex:I,data:S,modifiedDate:"",shapeAnnotationType:"SignatureText",opacity:1,rotateAngle:H,annotName:"SignatureText",comments:[],review:{state:"",stateModel:"",modifiedDate:"",author:""},fontFamily:x,fontSize:90===H||270===H?l.width/1.35:l.height/1.35}).shapeAnnotationType){var $=m.getTextWidth(o.data,o.fontSize,o.fontFamily),me=1;$>l.width&&(me=l.width/$),o.fontSize=m.getFontSize(Math.floor(o.fontSize*me))}N=o.data,D=o.fontFamily,Z=o.fontSize}else if("Image"===e){l=m.getSignBounds(B,H,I,V,A,M,T,k);var W=new Image;W.src=S,W.onload=function(){r.imageOnLoad(l,W,S,I,H,y,C,N,D,Z,i)}}else if(-1!==S.indexOf("base64"))l=m.getSignBounds(B,H,I,V,A,M,T,k),"Default"===m.pdfViewer.signatureFitMode&&(l=m.getDefaultBoundsforSign(l)),N=(o={id:y.id,bounds:{x:l.x,y:l.y,width:l.width,height:l.height},pageIndex:I,data:S,modifiedDate:"",shapeAnnotationType:"SignatureImage",opacity:1,rotateAngle:H,annotName:"SignatureField",comments:[],review:{state:"",stateModel:"",modifiedDate:"",author:""}}).data;else{if("Default"===m.pdfViewer.signatureFitMode){var Te=m.updateSignatureAspectRatio(S,!1,y);(l=m.getSignBounds(B,H,I,V,A,M,Te.width,Te.height,!0)).x=l.x+Te.left,l.y=l.y+Te.top}else l=m.getSignBounds(B,H,I,V,A,M,T,k);o={id:y.id,bounds:{x:l.x,y:l.y,width:l.width,height:l.height},pageIndex:I,data:S,modifiedDate:"",shapeAnnotationType:"Path",opacity:1,rotateAngle:H,annotName:"SignatureField",comments:[],review:{state:"",stateModel:"",modifiedDate:"",author:""}}}if(m.pdfViewerBase.drawSignatureWithTool&&C&&"Image"!==e){o.id=C.id+"_content";var ke=m.pdfViewer.add(o);C.wrapper.children.push(ke.wrapper)}else"Image"!==e&&m.pdfViewer.add(o);if(o&&"Path"===o.shapeAnnotationType&&""!==S&&(m.pdfViewerBase.currentSignatureAnnot=o,m.pdfViewerBase.signatureModule.addSignatureCollection(l,{currentHeight:k,currentWidth:T,currentLeft:A,currentTop:M}),N=m.pdfViewerBase.signatureModule.saveImageString,m.pdfViewerBase.currentSignatureAnnot=null),"Image"!==e){var Rt=document.getElementById(m.pdfViewer.element.id+"_annotationCanvas_"+I);if(m.pdfViewer.renderDrawing(Rt,I),m.pdfViewerBase.signatureModule.showSignatureDialog(!1),y.className="e-pdfviewer-signatureformfields e-pv-signature-focus"===y.className?"e-pdfviewer-signatureformfields-signature e-pv-signature-focus":"e-pdfviewer-signatureformfields-signature",m.pdfViewerBase.drawSignatureWithTool&&C){var fi=i.offsetParent.offsetParent.id.split("_")[0]+"_content";o.bounds={x:l.x*V,y:l.y*V,width:l.width*V,height:l.height*V},m.updateSignatureDataInSession(o,fi)}else m.updateDataInSession(y,o.data,o.bounds,D,Z);y.style.pointerEvents="none",m.pdfViewer.annotation&&m.pdfViewer.annotation.addAction(o.pageIndex,null,o,"FormField Value Change","",o,o),("Path"===o.shapeAnnotationType||"SignatureText"===o.shapeAnnotationType)&&m.pdfViewer.fireSignatureAdd(o.pageIndex,o.id,o.shapeAnnotationType,o.bounds,o.opacity,null,null,N),m.pdfViewer.fireFocusOutFormField(y.name,S)}}},m=this,g=0;g<f.length;g++)u();"Image"!==e&&(this.pdfViewerBase.signatureModule.hideSignaturePanel(),this.pdfViewerBase.drawSignatureWithTool=!1,this.pdfViewer.isInitialFieldToolbarSelection=!1)},s.prototype.imageOnLoad=function(e,t,i,n,o,r,l,d,h,p,f){var c;if("Default"===this.pdfViewer.signatureFitMode){if(Math.abs(t.height-t.width)<20)e.width>e.height?(e.x=e.x+e.width/2-e.height/2,e.width=e.height):(e.y=e.y+e.height/2-e.width/2,e.height=e.width);else if(e.width>e.height){e.y=e.y+e.height/4,e.x=e.x+e.height/4;var v=e.height/2;e={x:e.x,y:e.y,width:e.width-v,height:e.height-v}}else e.y=e.y+e.height/4,e.height=e.height/2;if(d=(c={id:r.id,bounds:{x:e.x,y:e.y,width:e.width,height:e.height},pageIndex:n,data:i,modifiedDate:"",shapeAnnotationType:"SignatureImage",opacity:1,rotateAngle:o,annotName:"SignatureField",comments:[],review:{state:"",stateModel:"",modifiedDate:"",author:""}}).data,this.pdfViewerBase.drawSignatureWithTool&&l){c.id=l.id+"_content";var y=this.pdfViewer.add(c);l.wrapper.children.push(y.wrapper)}else this.pdfViewer.add(c);var b=document.getElementById(this.pdfViewer.element.id+"_annotationCanvas_"+n);if(this.pdfViewer.renderDrawing(b,n),this.pdfViewerBase.signatureModule.showSignatureDialog(!1),r.className="e-pdfviewer-signatureformfields e-pv-signature-focus"===r.className?"e-pdfviewer-signatureformfields-signature e-pv-signature-focus":"e-pdfviewer-signatureformfields-signature",this.pdfViewerBase.drawSignatureWithTool&&l){var C=f.offsetParent.offsetParent.id.split("_")[0]+"_content";this.updateSignatureDataInSession(c,C)}else this.updateDataInSession(r,c.data,c.bounds,h,p);r.style.pointerEvents="none",this.pdfViewer.annotation&&this.pdfViewer.annotation.addAction(c.pageIndex,null,c,"FormField Value Change","",c,c),"SignatureImage"===c.shapeAnnotationType&&this.pdfViewer.fireSignatureAdd(c.pageIndex,c.id,c.shapeAnnotationType,c.bounds,c.opacity,null,null,d),this.pdfViewer.fireFocusOutFormField(r.name,i)}this.pdfViewerBase.signatureModule.hideSignaturePanel(),this.pdfViewerBase.drawSignatureWithTool=!1,this.pdfViewer.isInitialFieldToolbarSelection=!1},s.prototype.updateSignatureDataInSession=function(e,t){for(var i=this.pdfViewerBase.getItemFromSessionStorage("_formDesigner"),n=JSON.parse(i),o=function(d){if(n[d].Key===t){var h=r.pdfViewer.formFieldCollection.findIndex(function(c){return c.id===n[d].FormField.id.split("_")[0]});if("SignatureText"===e.shapeAnnotationType?(n[d].FormField.signatureType="Text",r.pdfViewerBase.formFieldCollection[d].FormField.signatureType="Text",r.pdfViewer.nameTable[t].signatureType="Text",n[d].FormField.fontFamily="TimesRoman"===e.fontFamily?"Times New Roman":e.fontFamily,r.pdfViewerBase.formFieldCollection[d].FormField.fontFamily=e.fontFamily,r.pdfViewer.nameTable[t].fontFamily=e.fontFamily,n[d].FormField.fontSize=e.fontSize,r.pdfViewerBase.formFieldCollection[d].FormField.fontSize=e.fontSize,r.pdfViewer.nameTable[t].fontSize=e.fontSize,h>-1&&(r.pdfViewer.formFieldCollection[h].signatureType="Text")):"SignatureImage"===e.shapeAnnotationType?(n[d].FormField.signatureType="Image",r.pdfViewerBase.formFieldCollection[d].FormField.signatureType="Image",r.pdfViewer.nameTable[t].signatureType="Image",h>-1&&(r.pdfViewer.formFieldCollection[h].signatureType="Image")):(n[d].FormField.signatureType="Path",r.pdfViewerBase.formFieldCollection[d].FormField.signatureType="Path",r.pdfViewer.nameTable[t].signatureType="Path",h>-1&&(r.pdfViewer.formFieldCollection[h].signatureType="Path")),n[d].FormField.signatureBound=e.bounds,r.pdfViewerBase.formFieldCollection[d].FormField.signatureBound=e.bounds,r.pdfViewer.nameTable[t].signatureBound=e.bounds,h>-1&&(r.pdfViewer.formFieldCollection[h].signatureBound=e.bounds),"Path"===e.shapeAnnotationType){var f=gt(ze(e.data));n[d].FormField.value=JSON.stringify(f),r.pdfViewer.nameTable[t].value=e.data,r.pdfViewer.nameTable[t.split("_")[0]].value=e.data,r.pdfViewerBase.formFieldCollection[d].FormField.value=JSON.stringify(f),h>-1&&(r.pdfViewer.formFieldCollection[h].value=JSON.stringify(f))}else n[d].FormField.value=e.data,r.pdfViewerBase.formFieldCollection[d].FormField.value=e.data,r.pdfViewer.nameTable[t.split("_")[0]].value=e.data,r.pdfViewer.nameTable[t].value=e.data,h>-1&&(r.pdfViewer.formFieldCollection[h].value=e.data);r.pdfViewer.formDesigner.updateFormFieldCollections(n[d].FormField),r.pdfViewer.formDesigner.updateFormFieldPropertiesChanges("formFieldPropertiesChange",n[d].FormField,!0,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,"",n[d].FormField.value)}},r=this,l=0;l<n.length;l++)o(l);this.pdfViewerBase.setItemInSessionStorage(n,"_formDesigner")},s.prototype.getDefaultBoundsforSign=function(e){return{x:e.x+4,y:e.y+4,width:e.width-8,height:e.height-8}},s.prototype.getSignBounds=function(e,t,i,n,o,r,l,d,h){var c=document.getElementById((this.pdfViewer.isInitialFieldToolbarSelection?"initialIcon":"signIcon")+"_"+i+"_"+e),m=o*n-(c?parseFloat(c.style.left)*n:0)/n;return 90===t||270===t?(this.rotateAngle=0,""!==c.style.left?h?{x:o-m/n-n,y:r+m/n+n,width:l,height:d}:{x:o-m/n-n,y:r+m/n+n,width:d,height:l}:(m=10,h?{x:o-l,y:r+l,width:d,height:l}:{x:o-l-m/2,y:r+l+m,width:d,height:l})):(this.rotateAngle=0,{x:o,y:r,width:l,height:d})},s.prototype.updateSameFieldsValue=function(e){if(this.formFieldsData)for(var t=0;t<this.formFieldsData.length;t++){var i=this.formFieldsData[t];if(e.target.name===i.FieldName&&e.target.id!==i.uniqueID){var n=document.getElementById(this.formFieldsData[t].uniqueID);n?n.value=e.target.value:(i.Text=e.target.value,this.pdfViewerBase.setItemInSessionStorage(this.formFieldsData,"_formfields"))}}},s.prototype.updateFormFieldsValue=function(e){var t=e.target;if(t.InsertSpaces&&!this.isKeyDownCheck){var i=parseInt(t.style.width)+parseInt(t.style.height)/2;t.style.width=i+"px",this.isKeyDownCheck=!0}if(9===e.which&&t&&"e-pdfviewer-formFields"===t.className){var n=t.id.split("input_")[1].split("_")[0];if(this.maintainTabIndex[n]===t.tabIndex){if(o=document.getElementById(this.pdfViewer.element.id+"_textLayer_"+(parseInt(n)+1)))(r=o.getElementsByClassName("e-pdfviewer-formFields"))&&r.length>0&&(r[0].focus(),e.preventDefault());else for(var r=document.getElementById(this.pdfViewer.element.id+"_textLayer_0").getElementsByClassName("e-pdfviewer-formFields"),d=0;d<r.length;d++)if(r[d].tabIndex===this.maintanMinTabindex[0]){r[d].focus(),e.preventDefault();break}}else{r=(o=document.getElementById(this.pdfViewer.element.id+"_textLayer_"+parseInt(n))).getElementsByClassName("e-pdfviewer-formFields");var o,h=!0;for(d=0;d<r.length;d++)if(h=!1,r[d].tabIndex===t.tabIndex+1){r[d].focus(),h=!0,e.preventDefault();break}for(var p=t.tabIndex+1;!h;){for(var f=0;f<r.length;f++)if(h=!1,r[f].tabIndex===p){r[f].focus(),h=!0,e.preventDefault();break}this.maintainTabIndex[n]===p&&(h=!0),p+=1}}}if(e.currentTarget.classList.contains("e-pdfviewer-signatureformfields")||e.currentTarget.classList.contains("e-pdfviewer-signatureformfields-signature"))if("Enter"===e.key){var c=e.target;for(d=0;d<this.pdfViewer.formFieldCollections.length;d++)c.id===this.pdfViewer.formFieldCollections[d].id&&(this.setFocus(c.id),this.pdfViewer.fireFormFieldClickEvent("formFieldClicked",this.pdfViewer.formFieldCollections[d]))}else e.preventDefault()},s.prototype.changeFormFields=function(e){this.updateDataInSession(e.target)},s.prototype.calculateSignatureBounds=function(e,t,i,n,o,r,l){var d=i/e,h=n/t,p=this.pdfViewerBase.getZoomFactor(),f=0,c=0,u=!1,m=!1,g=0,v=0;if(o)f=this.pdfViewer.handWrittenSignatureSettings.width?this.pdfViewer.handWrittenSignatureSettings.width:150,c=this.pdfViewer.handWrittenSignatureSettings.height?this.pdfViewer.handWrittenSignatureSettings.height:100;else{var y=r?"100%"===r.style.width?r.clientWidth:parseFloat(r.style.width):this.ConvertPointToPixel(l.LineBounds.Width),b=r?"100%"===r.style.height?r.clientHeight:parseFloat(r.style.height):this.ConvertPointToPixel(l.LineBounds.Height),C=y/b,S=b/y,x=e/t,V=t/e,T=r?r.offsetParent.offsetParent.style.transform?r.offsetParent.offsetParent.style.transform:r.style.transform:l.RotationAngle;if(C>x||S>x||Math.abs(C-S)<=1){var k=0;S>x||Math.abs(C-S)<=1?(m=!0,k=S/V):(u=!0,k=C/x),"rotate(90deg)"===T||"rotate(270deg)"===T?(f=b/p,c=y/p):(u&&(g=y/p,f=y/k/p,c=b/p),m&&(v=b/p,f=y/p,c=b/k/p))}else"rotate(90deg)"===T||"rotate(270deg)"===T?(f=b/p,c=y/p):(f=y/p,c=b/p)}var A=(e-i)/2,M=(t-n)/2;return u?(A=A/e*g,A+=(g*d-f*d)/2,M=M/t*c):m?(A=A/e*f,M=M/t*v,M+=(v*h-c*h)/2):(A=A/e*f,M=M/t*c),{currentLeftDiff:A,currentTopDiff:M,currentWidth:f*=d,currentHeight:c*=h}},s.prototype.updateSignatureAspectRatio=function(e,t,i,n){for(var r=gt(ze(e)),l=-1,d=-1,h=-1,p=-1,f=document.getElementById(this.pdfViewer.element.id+"_signatureCanvas_"),m=0;m<r.length;m++){var g=r[m];if(-1===l)l=parseFloat(g.x.toString()),h=parseFloat(g.x.toString()),d=parseFloat(g.y.toString()),p=parseFloat(g.y.toString());else{var v=parseFloat(g.x.toString()),y=parseFloat(g.y.toString());l>=v&&(l=v),d>=y&&(d=y),h<=v&&(h=v),p<=y&&(p=y)}}var S=this.calculateSignatureBounds(f?f.clientWidth:650,f?f.clientHeight:300,h-l,p-d,t,i,n);if(t){var x=this.pdfViewerBase.getZoomFactor(),T=document.getElementById(this.pdfViewer.element.id+"_pageDiv_"+(this.pdfViewerBase.currentPageNumber-1));return{x:(parseFloat(T.style.width)/2-S.currentWidth/2)/x,y:(parseFloat(T.style.height)/2-S.currentHeight/2)/x,width:S.currentWidth,height:S.currentHeight}}return{left:S.currentLeftDiff,top:S.currentTopDiff,width:S.currentWidth,height:S.currentHeight}},s.prototype.updateDataInSession=function(e,t,i,n,o){this.pdfViewerBase.updateDocumentEditedProperty(!0);var r=[],l=" ",h=0,p=this.pdfViewerBase.getItemFromSessionStorage("_formfields");if(p&&!this.pdfViewer.formDesignerModule){var f=JSON.parse(p);(r=f.filter(function(A){return A.uniqueID===e.id})).length>0&&(l=r[0].FieldName,h=f.filter(function(A){return A.FieldName===l}).length);for(var c=0;c<f.length;c++){var u=f[c];if(u.uniqueID===e.id||l===u.FieldName){if(e&&"text"===e.type||"password"===e.type||"textarea"===e.type){var m=e;m.classList.contains("e-pdfviewer-signatureformfields")||m.classList.contains("e-pdfviewer-signatureformfields-signature")?(t&&(u.Value=t),i&&(u.Bounds=i),n&&(u.FontFamily=n,u.FontSize=o)):(u.Text=e.value,u.Value=e.value)}else if("radio"===e.type){for(var g=0;g<f.length;g++)f[g].GroupName===e.name&&(f[g].Selected=!1);if(e.value==u.Value){u.Selected=!0;break}u.Selected=!1}else if("checkbox"===e.type){for(g=0;g<f.length;g++)if(f[g].GroupName===e.name){f[g].Selected=!1;var y=document.getElementById(f[g].uniqueID);y&&u.GroupName===e.name&&u.uniqueID!==y.id&&(u.Selected=!1,y.checked=!1)}u.Selected=!!e.checked}else if("select-one"===e.type&&0===e.size)for(var b=e.options[e.selectedIndex].text,C=e.children,S=0;S<C.length;S++)C[S].text===b&&(u.SelectedValue=b);else if("select-multiple"===e.type||e.size>0){b=e.selectedOptions,u.SelectedList=[];for(var x=0;x<b.length;x++)for(C=e.children,S=0;S<C.length;S++)C[S]===b[x]&&u.SelectedList.push(S);u.SelectedValue=e.value;var V=u.TextList?u.TextList.indexOf(e.value):0;u.selectedIndex=V>-1?V:0,u.SelectedList=[u.selectedIndex]}if(e.disabled&&(u.IsReadonly=!0),this.updateFormFieldsCollection(u),0==--h)break}else e&&null!=e.getAttribute("list")&&"text"===e.type&&u.uniqueID===e.list.id&&(u.SelectedValue=e.value);this.updateFormFieldsCollection(u)}window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_formfields"),this.pdfViewerBase.setItemInSessionStorage(f,"_formfields")}if(this.pdfViewer.formDesignerModule&&e&&e.id){var T=this.pdfViewer.nameTable[e.id.split("_")[0]];if(T&&T.wrapper&&T.wrapper.children[0]){T.value=e.value;var k=et(T.wrapper.children[0]).topLeft;this.pdfViewer.formDesignerModule.updateFormDesignerFieldInSessionStorage(k,T.wrapper.children[0],T.formFieldAnnotationType,T),window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_formfields")}}},s.prototype.removeExistingFormFields=function(){var e=this.pdfViewerBase.getItemFromSessionStorage("_formDesigner"),t=JSON.parse(e);if(t)for(var i=0;i<t.length;i++)this.pdfViewer.formDesignerModule.deleteFormField(t[i].Key.split("_")[0])},s.prototype.applyCommonProperties=function(e,t,i,n,o){var r=document.getElementById(this.pdfViewer.element.id+"input_"+t+"_"+i);if(r){var l=document.getElementById(this.pdfViewer.element.id+"_textLayer_"+t);"text"===e.type&&r.parentElement!==l&&r.parentElement.remove(),r.remove()}var u,m,v,d=document.getElementById("signIcon_"+t+"_"+i),h=parseFloat(e.style.left),p=parseInt(e.style.top),f=parseFloat(e.style.width),c=parseFloat(e.style.height),y=this.pdfViewerBase.getZoomFactor();d&&!o&&(u=parseFloat(d.style.width),m=parseFloat(d.style.height),"rotate(90deg)"==d.style.transform&&(d.style.transform="rotate(0deg)",d.style.left=h-(c/2-u*y)+(v=u*y)/2+"px"),"rotate(180deg)"==d.style.transform&&(d.style.transform="rotate(0deg)",d.style.left=h+"px",d.style.top=p+"px"),"rotate(270deg)"==d.style.transform&&(d.style.transform="rotate(0deg)",d.style.left=h-(c/2-(v=u*y))+v/2+"px",d.style.top=p+(f+m*y)+m*y/2+"px")),n.IsSignatureField&&this.isSignatureField?(e.className="e-pdfviewer-signatureformfields-signature",e.style.pointerEvents="none"):n.IsSignatureField?n.Value?(e.className="e-pdfviewer-signatureformfields-signature",e.style.pointerEvents="none"):e.className="e-pdfviewer-signatureformfields":"Button"!==n.Name&&(e.className="e-pdfviewer-formFields"),e.id=this.pdfViewer.element.id+"input_"+t+"_"+i,e.ariaLabel=this.pdfViewer.element.id+"input_"+t,e.style.zIndex=1e3},s.prototype.createFormFields=function(e,t,i,n,o){var r;switch(e.Name){case"Textbox":r=this.createTextBoxField(e,t,"text");break;case"Password":r=this.createTextBoxField(e,t,"password");break;case"RadioButton":r=this.createRadioBoxField(e,t,"radio");break;case"CheckBox":r=this.createRadioBoxField(e,t,"checkbox",n);break;case"DropDown":r=this.createDropDownField(e,t,i,n);break;case"ListBox":r=this.createListBoxField(e,t);break;case"InitialField":case"SignatureField":r=this.createSignatureField(e,t,i,n,o);var l=!1;0===e.Rotation&&(l=!0),e.Value&&""!==e.Value&&(this.renderExistingAnnnot(e,i,n,l),this.isSignatureRendered=!0,o++);break;case"Button":r=this.createButtonField(e,t);break;case"ink":this.pdfViewer.formDesignerModule&&e.Value&&""!==e.Value&&!this.isSignatureRendered&&this.renderExistingAnnnot(e,i,n);break;case"SignatureText":case"SignatureImage":e.Value&&""!==e.Value&&!this.isSignatureRendered&&this.renderExistingAnnnot(e,i,n)}return{currentField:r,count:o}},s.prototype.getFormFieldType=function(e){var t;switch(e.Name){case"Textbox":t="Textbox";break;case"Password":t="Password";break;case"RadioButton":t="RadioButton";break;case"CheckBox":t="CheckBox";break;case"DropDown":t="DropDown";break;case"ListBox":t="ListBox";break;case"SignatureField":t="SignatureField",e.IsInitialField&&(t="InitialField");break;case"InitialField":t="InitialField"}return t},s.prototype.createButtonField=function(e,t){var i=document.createElement("input");return e.Value?(i.type="image",i.src=e.Value):i.type="button",i.className="e-pv-buttonItem",i.value=""!==e.Text?e.Text:"",i.name=e.FieldName,i},s.prototype.createTextBoxField=function(e,t,i){var n;if(1!==e.Visible)return e.Multiline?(n=document.createElement("textarea")).style.resize="none":(n=document.createElement("input")).type=i,e.MaxLength>0&&(n.maxLength=e.MaxLength),this.addAlignmentPropety(e,n),n.value=""!==e.Text?e.Text:"",this.pdfViewer.enableAutoComplete||(n.autocomplete="off"),n.name=e.FieldName,n},s.prototype.checkIsReadonly=function(e,t){for(var i=!1,n=0;n<this.readOnlyCollection.length;n++)if(t.id===this.readOnlyCollection[n]){i=!0;break}if(!this.pdfViewer.formDesignerModule&&!this.pdfViewer.annotationModule&&(e.IsInitialField||e.IsSignatureField)&&(i=!0),e.IsReadonly||!this.pdfViewer.enableFormFields||i)t.disabled=!0,t.style.cursor="default",t.style.backgroundColor="transparent";else{var o=e.BackColor;t.style.backgroundColor="rgba("+o.R+","+o.G+","+o.B+",0.2)";var r=e.FontColor;t.style.color="rgba("+r.R+","+r.G+","+r.B+",1)"}},s.prototype.formFieldsReadOnly=function(e){var t=document.getElementsByClassName("e-pdfviewer-formFields");this.makeformFieldsReadonly(t,e);var i=document.getElementsByClassName("e-pdfviewer-signatureformfields");this.makeformFieldsReadonly(i,e)},s.prototype.makeformFieldsReadonly=function(e,t){for(var i=0;i<e.length;i++)if(e[i]){var n=e[i];t?n.disabled=!1:(n.disabled=!0,n.style.cursor="default")}},s.prototype.applyTabIndex=function(e,t,i){t.tabIndex=e.TabIndex,this.maxTabIndex=Math.max(this.maxTabIndex,t.tabIndex),-1===this.minTabIndex&&(this.minTabIndex=t.tabIndex),this.minTabIndex=Math.min(this.minTabIndex,t.tabIndex),this.maintainTabIndex[i.toString()]=this.maxTabIndex,this.maintanMinTabindex[i.toString()]=this.minTabIndex},s.prototype.checkIsRequiredField=function(e,t){if(e.IsRequired)t.required=!0,t.style.border="1px solid red";else{var i=e.BorderColor;t.style.border=e.BorderWidth,t.style.borderColor="rgba("+i.R+","+i.G+","+i.B+",1)"}"checkbox"!==t.type&&"radio"!==t.type&&this.addBorderStylePropety(e.BorderStyle,t)},s.prototype.applyDefaultColor=function(e){"button"!==e.type&&("rgba(255, 255, 255, 0.2)"===e.style.backgroundColor||"rgba(0, 0, 0, 0.2)"===e.style.backgroundColor)&&(e.style.backgroundColor="rgba(0, 20, 200, 0.2)"),"rgba(255, 255, 255, 0.2)"===e.style.color&&(e.style.color="black")},s.prototype.addAlignmentPropety=function(e,t){switch(e.Alignment){case 0:t.style.textAlign="left";break;case 1:t.style.textAlign="center";break;case 2:t.style.textAlign="right";break;case 3:t.style.textAlign="justify"}},s.prototype.addBorderStylePropety=function(e,t){switch(e){case 0:t.style.borderStyle="solid";break;case 1:t.style.borderStyle="dashed";break;case 2:case 4:t.style.borderStyle="outset";break;case 3:case 6:t.style.borderStyle="inset";break;case 5:t.style.borderStyle="dotted"}},s.prototype.createRadioBoxField=function(e,t,i,n){var o=document.createElement("input");return o.type=i,e.Selected&&(o.checked=!0),o.name=e.GroupName,o.value=e.Value,o},s.prototype.createDropDownField=function(e,t,i,n){var o=document.createElement("select"),r=e.TextList;if(e.Selected&&!n){var l=document.getElementById("editableDropdown"+t+"_"+i);l&&l.remove();var d=document.createElement("input");d.id="editableDropdown"+t+"_"+i,d.setAttribute("list",this.pdfViewer.element.id+"input_"+t+"_"+i);var h=e.LineBounds,p=e.Font;d.style.position="absolute",d.style.border="0px",this.applyPosition(d,h,p,t,e.Rotation),d.style.backgroundColor="rgba(0, 20, 200, 0.2)",d.className="e-pdfviewer-formFields",-1===e.selectedIndex&&(d.value=e.SelectedValue),n?n.appendChild(d):document.getElementById(this.pdfViewer.element.id+"_textLayer_"+t).appendChild(d),d.addEventListener("focus",this.focusFormFields.bind(this)),d.addEventListener("blur",this.blurFormFields.bind(this)),d.addEventListener("click",this.updateFormFields.bind(this)),d.addEventListener("change",this.changeFormFields.bind(this)),d.addEventListener("keydown",this.updateFormFieldsValue.bind(this)),o=document.createElement("DATALIST")}for(var c=0;c<r.length;c++){var u=document.createElement("option");u.className="e-dropdownSelect",u.selected=e.SelectedValue===r[c]||e.selectedIndex===c,u.innerHTML=r[c],o.appendChild(u)}return o.name=e.Text,o},s.prototype.createListBoxField=function(e,t){var i=document.createElement("select"),n=e.TextList;e.MultiSelect?i.multiple=!0:(i.multiple=!1,i.size=n.length);for(var o=0;o<n.length;o++){var r=document.createElement("option");r.className="e-pdfviewer-ListBox";for(var l=0;l<e.SelectedList.length;l++)e.SelectedList[l]===o&&(r.selected=!0);r.innerHTML=n[o],i.appendChild(r)}return i.name=e.Text,i},s.prototype.createSignatureField=function(e,t,i,n,o){var r=document.createElement("input");r.type="text",r.name=e.FieldName;var l=document.getElementById("signIcon_"+t+"_"+i);l&&!n&&l.remove(),this.pdfViewerBase.isInitialField=e.IsInitialField;var d=this.pdfViewerBase.isInitialField?"Initial":"Sign",h=19===this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.width?this.pdfViewerBase.isInitialField?27:19:this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.width,p=document.createElement("span"),f=document.getElementById(this.pdfViewer.element.id+"_textLayer_"+t),c=e.LineBounds,m=this.ConvertPointToPixel(c.X),g=this.ConvertPointToPixel(c.Y),v=this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.height>c.Height/2?c.Height/2:this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.height,y=h>c.Width/2?c.Width/2:h,b=this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.fontSize>v/2?10:this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.fontSize;p.style.position="absolute",p.id="signIcon_"+t+"_"+i;var C=this.pdfViewerBase.getZoomFactor(),S=this.getAngle(t),V=this.getBounds({left:m,top:g,width:y,height:v},t);return p.style.transform="rotate("+S+"deg)",p.style.left=V.left*C+"px",p.style.top=V.top*C+"px",a.AR.isDevice&&!this.pdfViewer.enableDesktopMode?(p.style.height="5px",p.style.width="10px",p.style.fontSize="3px"):(p.style.height=v+"px",p.style.width=y+"px",p.style.fontSize=b+"px",(0,a.xr)()&&(p.style.fontSize=b-1+"px")),p.style.padding="2px",p.style.textAlign="center",p.style.boxSizing="content-box",p.innerHTML=this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.text?this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.text:d,p.style.color=this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.color?this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.color:"black",p.style.backgroundColor=this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.backgroundColor?this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.backgroundColor:"orange",p.style.opacity=this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.opacity?this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.opacity:1,f.appendChild(p),this.addSignaturePath(e,o),r},s.prototype.addSignaturePath=function(e,t){this.isSignatureField=!1;var i=this.pdfViewerBase.getItemFromSessionStorage("_formfields");if(i)for(var n=JSON.parse(i),o=0;o<n.length;o++){var r=n[o];if("ink"!==r.Name&&"SignatureField"!==r.Name&&"SignatureImage"!==r.Name&&"SignatureText"!==r.Name||!this.pdfViewer.formDesigner?(r.FieldName===e.FieldName+"_"+t||r.FieldName===e.ActualFieldName+"_"+t)&&!(0,a.le)(e.ActualFieldName)&&r.Value&&""!==r.Value:r.FieldName===e.ActualFieldName+"_"+t||r.FieldName===e.FieldName+"_"+t){e.Value=r.Value,e.FontFamily=r.FontFamily,e.FontSize=r.FontSize,this.isSignatureField=!0,e.Bounds||(e.Bounds=r.LineBounds);break}}return this.isSignatureField},s.prototype.getBounds=function(e,t,i,n){var o=this.pdfViewerBase.pageSize[t];return this.getBoundsPosition(i>0?i:o.rotation,e,o,n)},s.prototype.getBoundsPosition=function(e,t,i,n){var o;if(n){switch(e){case 0:o=t;break;case 1:o={left:i.width-t.top-t.height-(t.width/2-t.height/2),top:t.left+(t.width/2-t.height/2),width:t.width,height:t.height};break;case 2:o={left:i.width-t.left-t.width,top:i.height-t.top-t.height,width:t.width,height:t.height};break;case 3:o={left:t.top-(t.width/2-t.height/2),top:i.height-t.left-t.width+(t.width/2-t.height/2),width:t.width,height:t.height}}o||(o=t)}else{switch(e){case 90:case 1:o={left:i.width-t.top-t.height,top:t.left,width:t.height,height:t.width};break;case 180:case 2:o={left:i.width-t.left-t.width,top:i.height-t.top-t.height,width:t.width,height:t.height};break;case 270:case 3:o={left:t.top,top:i.height-t.left-t.width,width:t.height,height:t.width};break;case 0:o=t}o||(o=t)}return o},s.prototype.applyPosition=function(e,t,i,n,o,r){if(t){var l=this.ConvertPointToPixel(t.X),d=this.ConvertPointToPixel(t.Y),h=this.ConvertPointToPixel(t.Width),p=this.ConvertPointToPixel(t.Height),f=0,u=this.getBounds({left:l,top:d,width:h,height:p},n,o,r);null!==i&&i.Height&&(e.style.fontFamily=i.Name,i.Italic&&(e.style.fontStyle="italic"),i.Bold&&(e.style.fontWeight="Bold"),f=this.ConvertPointToPixel(i.Size)),this.pdfViewerBase.setStyleToTextDiv(e,u.left,u.top,f,u.width,u.height,!1)}},s.prototype.renderExistingAnnnot=function(e,t,i,n){if(!i){var o,r=void 0,l=void 0,d=void 0,h=void 0;(o=e.Bounds&&"ink"!==e.Name?e.Bounds:e.LineBounds).x||o.y||o.width||o.height?(r=o.x,l=o.y,d=o.width,h=o.height):(r=this.ConvertPointToPixel(o.X),l=this.ConvertPointToPixel(o.Y),d=this.ConvertPointToPixel(o.Width),h=this.ConvertPointToPixel(o.Height));var p=parseFloat(e.PageIndex),c=this.updateSignatureBounds({left:r,top:l,width:d,height:h},p,n),u=void 0,m=e.FontFamily?e.FontFamily:e.fontFamily;if(e.Value.split("base64,")[1])u={id:this.pdfViewer.element.id+"input_"+p+"_"+t,bounds:c,pageIndex:p,data:e.Value,modifiedDate:"",shapeAnnotationType:"SignatureImage",opacity:1,rotateAngle:n?this.getAngle(p):0,annotName:"SignatureField",comments:[],review:{state:"",stateModel:"",modifiedDate:"",author:""}};else if(!m||e.Value&&e.Value.startsWith("M")&&e.Value.split(",")[1].split(" ")[1].startsWith("L")){var g;g=this.updateSignatureBounds({left:c.x,top:c.y,width:c.width,height:c.height},p,!1),u={id:this.pdfViewer.element.id+"input_"+p+"_"+t,bounds:g,pageIndex:p,data:e.Value,modifiedDate:"",shapeAnnotationType:"Path",opacity:1,rotateAngle:0,annotName:"SignatureField",comments:[],review:{state:"",stateModel:"",modifiedDate:"",author:""}}}else(u={id:this.pdfViewer.element.id+"input_"+p+"_"+t,bounds:c,pageIndex:p,data:e.Value,modifiedDate:"",shapeAnnotationType:"SignatureText",opacity:1,rotateAngle:n?this.getAngle(p):0,annotName:"SignatureField",comments:[],review:{state:"",stateModel:"",modifiedDate:"",author:""},fontFamily:e.FontFamily,fontSize:e.FontSize}).fontFamily="TimesRoman"===m?"Times New Roman":m,u.fontSize=e.FontSize?e.FontSize:e.fontSize;if("SignatureField"!==e.Name&&"InitialField"!==e.Name||(0,a.le)(e.id)){var V=document.getElementById(u.id);V&&V.classList.contains("e-pdfviewer-signatureformfields-signature")&&this.pdfViewer.annotation.deleteAnnotationById(u.id),this.pdfViewer.add(u)}else{var y=e.id,b=document.getElementById(y+"_content_html_element"),C=this.pdfViewer.nameTable[y];u.id=C.id+"_content";var S=this.pdfViewer.add(u);if(C.wrapper.children.push(S.wrapper),!(0,a.le)(b)&&this.isSignatureField)(x=b.children[0].children[0]).style.pointerEvents="none",x.className="e-pdfviewer-signatureformfields-signature",x.parentElement.style.pointerEvents="none";else if(!(0,a.le)(b)&&e.Value){var x;(x=b.children[0].children[0]).style.pointerEvents="none",x.className="e-pdfviewer-signatureformfields-signature",x.parentElement.style.pointerEvents="none"}}if(e.Bounds=u.bounds,this.pdfViewer.formDesignerModule){var T=this.pdfViewerBase.getZoomFactor();u.bounds={x:r*T,y:l*T,width:d*T,height:h*T},this.updateSignatureDataInSession(u,u.id)}var k=document.getElementById(this.pdfViewer.element.id+"_annotationCanvas_"+p);this.pdfViewer.renderDrawing(k,p)}},s.prototype.updateSignatureBounds=function(e,t,i){var n=this.pdfViewerBase.pageSize[t];return n?i?1===n.rotation?{x:n.width-e.top-e.height-(e.width/2-e.height/2),y:e.left+(e.width/2-e.height/2),width:e.width,height:e.height}:2===n.rotation?{x:n.width-e.left-e.width,y:n.height-e.top-e.height,width:e.width,height:e.height}:3===n.rotation?{x:e.top-(e.width/2-e.height/2),y:n.height-e.left-e.width+(e.width/2-e.height/2),width:e.width,height:e.height}:{x:e.left,y:e.top,width:e.width,height:e.height}:1===n.rotation?{x:n.width-e.top-e.height,y:e.left,width:e.height,height:e.width}:2===n.rotation?{x:n.width-e.left-e.width,y:n.height-e.top-e.height,width:e.width,height:e.height}:3===n.rotation?{x:e.top,y:n.height-e.left-e.width,width:e.height,height:e.width}:{x:e.left,y:e.top,width:e.width,height:e.height}:{x:e.left,y:e.top,width:e.width,height:e.height}},s.prototype.resetFormFields=function(){for(var e=this.pdfViewer.formFieldCollections,t=0;t<e.length;t++){var i=e[t];if(this.currentTarget=document.getElementById(i.id),"Textbox"===i.type)this.currentTarget.value=i.value;else if("RadioButton"===i.type)this.currentTarget.checked=i.value,i.value&&this.updateDataInSession(this.currentTarget);else if("DropDown"===i.type)this.currentTarget.value=i.value;else if("CheckBox"===i.type)this.currentTarget.checked=i.value;else if("SignatureField"===i.type){var n=this.pdfViewer.nameTable[i.id];n&&(this.currentTarget&&"e-pdfviewer-signatureformfields-signature"===this.currentTarget.className&&(this.currentTarget.className="e-pdfviewer-signatureformfields",this.currentTarget.style.pointerEvents="",this.updateDataInSession(this.currentTarget,"")),this.pdfViewer.remove(n),this.pdfViewer.renderDrawing())}"RadioButton"!==i.type&&"SignatureField"!==i.type&&this.updateDataInSession(this.currentTarget)}},s.prototype.clearFormFieldStorage=function(){if(Math.round(JSON.stringify(window.sessionStorage).length/1024)>4500){for(var i=window.sessionStorage.length,n=[],o=0;o<i;o++)window.sessionStorage.key(o)&&window.sessionStorage.key(o).split("_")[3]&&"annotations"===window.sessionStorage.key(o).split("_")[3]&&(this.pdfViewerBase.formFieldStorage[window.sessionStorage.key(o)]=window.sessionStorage.getItem(window.sessionStorage.key(o)),n.push(window.sessionStorage.key(o)));if(n)for(o=0;o<n.length;o++)window.sessionStorage.removeItem(n[o])}},s.prototype.clearFormFields=function(e){var t=this.pdfViewerBase.getItemFromSessionStorage("_formfields");if(t){var i;i=e?[e]:JSON.parse(t);for(var n=!0,o=0;o<i.length;o++){var r=i[o];if(e&&(r.uniqueID=e.id,r.Name=e.type),this.currentTarget=document.getElementById(r.uniqueID),"Textbox"===r.Name)this.currentTarget.value="";else if("RadioButton"===r.Name)n&&(this.currentTarget.checked=!0,this.updateDataInSession(this.currentTarget),n=!1);else if("DropDown"===r.Name)this.currentTarget.value=r.TextList[0];else if("CheckBox"===r.Name)this.currentTarget.checked=!1;else if("SignatureField"===r.Name){var l=this.pdfViewer.nameTable[r.uniqueID];l&&(this.currentTarget&&"e-pdfviewer-signatureformfields-signature"===this.currentTarget.className&&(this.currentTarget.className="e-pdfviewer-signatureformfields",this.currentTarget.style.pointerEvents="",this.currentTarget.parentElement.style.pointerEvents="",this.updateDataInSession(this.currentTarget,""),e&&(e.value="",e.signatureType=[e.signatureType],e.signatureType[0]="")),this.pdfViewer.remove(l),this.pdfViewer.renderDrawing())}"SignatureField"!==r.Name&&"ink"!==r.Name&&"RadioButton"!==r.Name&&this.updateDataInSession(this.currentTarget)}}},s.prototype.ConvertPointToPixel=function(e){return e*(96/72)},s.prototype.destroy=function(){this.currentTarget=null,this.readOnlyCollection=[],this.pdfViewerBase&&this.pdfViewerBase.signatureModule&&this.pdfViewerBase.signatureModule.destroy()},s.prototype.getModuleName=function(){return"FormFields"},s.prototype.getTextWidth=function(e,t,i){var r,o=document.createElement("canvas").getContext("2d");return t&&(r=t+"px "+i),o.font=r||getComputedStyle(document.body).font,o.measureText(e).width},s.prototype.getFontSize=function(e){return e},s}();const HS=["addSignature","ajaxRequestFailed","ajaxRequestInitiate","ajaxRequestSuccess","annotationAdd","annotationDoubleClick","annotationMouseLeave","annotationMouseover","annotationMove","annotationMoving","annotationPropertiesChange","annotationRemove","annotationResize","annotationSelect","annotationUnSelect","beforeAddFreeText","bookmarkClick","buttonFieldClick","commentAdd","commentDelete","commentEdit","commentSelect","commentStatusChanged","created","documentLoad","documentLoadFailed","documentUnload","downloadEnd","downloadStart","exportFailed","exportStart","exportSuccess","extractTextCompleted","formFieldAdd","formFieldClick","formFieldDoubleClick","formFieldFocusOut","formFieldMouseLeave","formFieldMouseover","formFieldMove","formFieldPropertiesChange","formFieldRemove","formFieldResize","formFieldSelect","formFieldUnselect","hyperlinkClick","hyperlinkMouseOver","importFailed","importStart","importSuccess","moveSignature","pageChange","pageClick","pageMouseover","printEnd","printStart","removeSignature","resizeSignature","signaturePropertiesChange","signatureSelect","textSearchComplete","textSearchHighlight","textSearchStart","textSelectionEnd","textSelectionStart","thumbnailClick","validateFormFields","zoomChange"],qS=[];let ZS=(()=>{let s=class extends LS{constructor(t,i,n,o){super(),this.ngEle=t,this.srenderer=i,this.viewContainerRef=n,this.injector=o,this.element=this.ngEle.nativeElement,this.injectedModules=this.injectedModules||[];try{let r=this.injector.get("PdfViewerLinkAnnotation");-1===this.injectedModules.indexOf(r)&&this.injectedModules.push(r)}catch(r){}try{let r=this.injector.get("PdfViewerBookmarkView");-1===this.injectedModules.indexOf(r)&&this.injectedModules.push(r)}catch(r){}try{let r=this.injector.get("PdfViewerMagnification");-1===this.injectedModules.indexOf(r)&&this.injectedModules.push(r)}catch(r){}try{let r=this.injector.get("PdfViewerThumbnailView");-1===this.injectedModules.indexOf(r)&&this.injectedModules.push(r)}catch(r){}try{let r=this.injector.get("PdfViewerToolbar");-1===this.injectedModules.indexOf(r)&&this.injectedModules.push(r)}catch(r){}try{let r=this.injector.get("PdfViewerNavigation");-1===this.injectedModules.indexOf(r)&&this.injectedModules.push(r)}catch(r){}try{let r=this.injector.get("PdfViewerPrint");-1===this.injectedModules.indexOf(r)&&this.injectedModules.push(r)}catch(r){}try{let r=this.injector.get("PdfViewerTextSelection");-1===this.injectedModules.indexOf(r)&&this.injectedModules.push(r)}catch(r){}try{let r=this.injector.get("PdfViewerTextSearch");-1===this.injectedModules.indexOf(r)&&this.injectedModules.push(r)}catch(r){}try{let r=this.injector.get("PdfViewerAnnotation");-1===this.injectedModules.indexOf(r)&&this.injectedModules.push(r)}catch(r){}try{let r=this.injector.get("PdfViewerFormDesigner");-1===this.injectedModules.indexOf(r)&&this.injectedModules.push(r)}catch(r){}try{let r=this.injector.get("PdfViewerFormFields");-1===this.injectedModules.indexOf(r)&&this.injectedModules.push(r)}catch(r){}this.registerEvents(HS),this.addTwoWay.call(this,qS),(0,Os.sO)("currentInstance",this,this.viewContainerRef),this.context=new Os.VZ}ngOnInit(){this.context.ngOnInit(this)}ngAfterViewInit(){this.context.ngAfterViewInit(this)}ngOnDestroy(){this.context.ngOnDestroy(this)}ngAfterContentChecked(){this.context.ngAfterContentChecked(this)}};return s.\u0275fac=function(t){return new(t||s)(ve.Y36(ve.SBq),ve.Y36(ve.Qsj),ve.Y36(ve.s_b),ve.Y36(ve.zs3))},s.\u0275cmp=ve.Xpm({type:s,selectors:[["ejs-pdfviewer"]],inputs:{DropdownFieldSettings:"DropdownFieldSettings",ajaxRequestSettings:"ajaxRequestSettings",annotationSelectorSettings:"annotationSelectorSettings",annotationSettings:"annotationSettings",annotations:"annotations",areaSettings:"areaSettings",arrowSettings:"arrowSettings",checkBoxFieldSettings:"checkBoxFieldSettings",circleSettings:"circleSettings",contextMenuOption:"contextMenuOption",contextMenuSettings:"contextMenuSettings",currentPageNumber:"currentPageNumber",customStamp:"customStamp",customStampSettings:"customStampSettings",dateTimeFormat:"dateTimeFormat",designerMode:"designerMode",disableContextMenuItems:"disableContextMenuItems",distanceSettings:"distanceSettings",documentPath:"documentPath",downloadFileName:"downloadFileName",drawingObject:"drawingObject",enableAnnotation:"enableAnnotation",enableAnnotationToolbar:"enableAnnotationToolbar",enableAutoComplete:"enableAutoComplete",enableBookmark:"enableBookmark",enableBookmarkStyles:"enableBookmarkStyles",enableCommentPanel:"enableCommentPanel",enableDesktopMode:"enableDesktopMode",enableDownload:"enableDownload",enableFormDesigner:"enableFormDesigner",enableFormDesignerToolbar:"enableFormDesignerToolbar",enableFormFields:"enableFormFields",enableFormFieldsValidation:"enableFormFieldsValidation",enableFreeText:"enableFreeText",enableHandwrittenSignature:"enableHandwrittenSignature",enableHyperlink:"enableHyperlink",enableImportAnnotationMeasurement:"enableImportAnnotationMeasurement",enableInkAnnotation:"enableInkAnnotation",enableMagnification:"enableMagnification",enableMeasureAnnotation:"enableMeasureAnnotation",enableMultiLineOverlap:"enableMultiLineOverlap",enableMultiPageAnnotation:"enableMultiPageAnnotation",enableNavigation:"enableNavigation",enableNavigationToolbar:"enableNavigationToolbar",enablePersistence:"enablePersistence",enablePinchZoom:"enablePinchZoom",enablePrint:"enablePrint",enablePrintRotation:"enablePrintRotation",enableRtl:"enableRtl",enableShapeAnnotation:"enableShapeAnnotation",enableShapeLabel:"enableShapeLabel",enableStampAnnotations:"enableStampAnnotations",enableStickyNotesAnnotation:"enableStickyNotesAnnotation",enableTextMarkupAnnotation:"enableTextMarkupAnnotation",enableTextMarkupResizer:"enableTextMarkupResizer",enableTextSearch:"enableTextSearch",enableTextSelection:"enableTextSelection",enableThumbnail:"enableThumbnail",enableToolbar:"enableToolbar",enableZoomOptimization:"enableZoomOptimization",exportAnnotationFileName:"exportAnnotationFileName",formFieldCollections:"formFieldCollections",formFields:"formFields",freeTextSettings:"freeTextSettings",handWrittenSignatureSettings:"handWrittenSignatureSettings",height:"height",hideSaveSignature:"hideSaveSignature",highlightSettings:"highlightSettings",hyperlinkOpenState:"hyperlinkOpenState",initialDialogSettings:"initialDialogSettings",initialFieldSettings:"initialFieldSettings",inkAnnotationSettings:"inkAnnotationSettings",interactionMode:"interactionMode",isAnnotationToolbarOpen:"isAnnotationToolbarOpen",isAnnotationToolbarVisible:"isAnnotationToolbarVisible",isBookmarkPanelOpen:"isBookmarkPanelOpen",isCommandPanelOpen:"isCommandPanelOpen",isDocumentEdited:"isDocumentEdited",isExtractText:"isExtractText",isFormDesignerToolbarVisible:"isFormDesignerToolbarVisible",isFormFieldDocument:"isFormFieldDocument",isInitialFieldToolbarSelection:"isInitialFieldToolbarSelection",isMaintainSelection:"isMaintainSelection",isSignatureEditable:"isSignatureEditable",isThumbnailViewOpen:"isThumbnailViewOpen",isValidFreeText:"isValidFreeText",lineSettings:"lineSettings",listBoxFieldSettings:"listBoxFieldSettings",locale:"locale",measurementSettings:"measurementSettings",pageCount:"pageCount",passwordFieldSettings:"passwordFieldSettings",perimeterSettings:"perimeterSettings",polygonSettings:"polygonSettings",printMode:"printMode",radioButtonFieldSettings:"radioButtonFieldSettings",radiusSettings:"radiusSettings",rectangleSettings:"rectangleSettings",restrictZoomRequest:"restrictZoomRequest",retryCount:"retryCount",scrollSettings:"scrollSettings",selectedItems:"selectedItems",serverActionSettings:"serverActionSettings",serviceUrl:"serviceUrl",shapeLabelSettings:"shapeLabelSettings",showNotificationDialog:"showNotificationDialog",signatureDialogSettings:"signatureDialogSettings",signatureFieldSettings:"signatureFieldSettings",signatureFitMode:"signatureFitMode",stampSettings:"stampSettings",stickyNotesSettings:"stickyNotesSettings",strikethroughSettings:"strikethroughSettings",textFieldSettings:"textFieldSettings",textSearchColorSettings:"textSearchColorSettings",tileRenderingSettings:"tileRenderingSettings",toolbarSettings:"toolbarSettings",underlineSettings:"underlineSettings",volumeSettings:"volumeSettings",width:"width",zoomMode:"zoomMode",zoomValue:"zoomValue"},outputs:{addSignature:"addSignature",ajaxRequestFailed:"ajaxRequestFailed",ajaxRequestInitiate:"ajaxRequestInitiate",ajaxRequestSuccess:"ajaxRequestSuccess",annotationAdd:"annotationAdd",annotationDoubleClick:"annotationDoubleClick",annotationMouseLeave:"annotationMouseLeave",annotationMouseover:"annotationMouseover",annotationMove:"annotationMove",annotationMoving:"annotationMoving",annotationPropertiesChange:"annotationPropertiesChange",annotationRemove:"annotationRemove",annotationResize:"annotationResize",annotationSelect:"annotationSelect",annotationUnSelect:"annotationUnSelect",beforeAddFreeText:"beforeAddFreeText",bookmarkClick:"bookmarkClick",buttonFieldClick:"buttonFieldClick",commentAdd:"commentAdd",commentDelete:"commentDelete",commentEdit:"commentEdit",commentSelect:"commentSelect",commentStatusChanged:"commentStatusChanged",created:"created",documentLoad:"documentLoad",documentLoadFailed:"documentLoadFailed",documentUnload:"documentUnload",downloadEnd:"downloadEnd",downloadStart:"downloadStart",exportFailed:"exportFailed",exportStart:"exportStart",exportSuccess:"exportSuccess",extractTextCompleted:"extractTextCompleted",formFieldAdd:"formFieldAdd",formFieldClick:"formFieldClick",formFieldDoubleClick:"formFieldDoubleClick",formFieldFocusOut:"formFieldFocusOut",formFieldMouseLeave:"formFieldMouseLeave",formFieldMouseover:"formFieldMouseover",formFieldMove:"formFieldMove",formFieldPropertiesChange:"formFieldPropertiesChange",formFieldRemove:"formFieldRemove",formFieldResize:"formFieldResize",formFieldSelect:"formFieldSelect",formFieldUnselect:"formFieldUnselect",hyperlinkClick:"hyperlinkClick",hyperlinkMouseOver:"hyperlinkMouseOver",importFailed:"importFailed",importStart:"importStart",importSuccess:"importSuccess",moveSignature:"moveSignature",pageChange:"pageChange",pageClick:"pageClick",pageMouseover:"pageMouseover",printEnd:"printEnd",printStart:"printStart",removeSignature:"removeSignature",resizeSignature:"resizeSignature",signaturePropertiesChange:"signaturePropertiesChange",signatureSelect:"signatureSelect",textSearchComplete:"textSearchComplete",textSearchHighlight:"textSearchHighlight",textSearchStart:"textSearchStart",textSelectionEnd:"textSelectionEnd",textSelectionStart:"textSelectionStart",thumbnailClick:"thumbnailClick",validateFormFields:"validateFormFields",zoomChange:"zoomChange"},features:[ve.qOj],decls:0,vars:0,template:function(t,i){},encapsulation:2,changeDetection:0}),s=(0,$u.gn)([(0,Os.jm)([Os.VZ])],s),s})(),WS=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=ve.oAB({type:s}),s.\u0275inj=ve.cJS({imports:[[Rh.ez]]}),s})();const US={provide:"PdfViewerLinkAnnotation",useValue:Fb},YS={provide:"PdfViewerBookmarkView",useValue:NS},XS={provide:"PdfViewerMagnification",useValue:ES},jS={provide:"PdfViewerThumbnailView",useValue:DS},GS={provide:"PdfViewerToolbar",useValue:FS},JS={provide:"PdfViewerNavigation",useValue:PS},QS={provide:"PdfViewerPrint",useValue:_S},KS={provide:"PdfViewerTextSelection",useValue:RS},$S={provide:"PdfViewerTextSearch",useValue:OS},eC={provide:"PdfViewerAnnotation",useValue:Bb};var tC=Fe(6007);let iC=(()=>{class s{constructor(t){this.shared=t,this.service="https://ej2services.syncfusion.com/production/web-services/api/pdfviewer"}ngOnInit(){}loadDoc(){if(null==localStorage.getItem("localFile"))return;let t=JSON.parse(localStorage.getItem("localFile")).fileUrl;localStorage.removeItem("localFile"),this.shared.http.get(t,{responseType:"blob"}).subscribe(i=>{const n=new FileReader;n.readAsDataURL(i),n.onload=r=>{var l=document.getElementById("pdfViewer").ej2_instances[0];console.log(r.target.result),l.load(r.target.result,null)}})}}return s.\u0275fac=function(t){return new(t||s)(ve.Y36(tC.F))},s.\u0275cmp=ve.Xpm({type:s,selectors:[["app-pdf"]],features:[ve._Bn([US,YS,XS,jS,GS,JS,eC,$S,KS,QS])],decls:3,vars:1,consts:[[1,"navbar","navbar-expand-md","navbar-dark","fixed-top"],[1,"doc","content-wrapper"],["id","pdfViewer","height","657px",2,"height","640px","display","block",3,"serviceUrl","created"]],template:function(t,i){1&t&&(ve._UZ(0,"nav",0),ve.TgZ(1,"div",1),ve.TgZ(2,"ejs-pdfviewer",2),ve.NdJ("created",function(){return i.loadDoc()}),ve.qZA(),ve.qZA()),2&t&&(ve.xp6(2),ve.Q6J("serviceUrl",i.service))},directives:[ZS],styles:[".doc[_ngcontent-%COMP%]{margin-top:56px}nav[_ngcontent-%COMP%]{background-color:var(--dark-color);height:56px}"]}),s})();var nC=Fe(6901);const oC=[{path:"",component:iC}];let sC=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=ve.oAB({type:s}),s.\u0275inj=ve.cJS({imports:[[Rh.ez,WS,nC.Bz.forChild(oC)]]}),s})()}}]);