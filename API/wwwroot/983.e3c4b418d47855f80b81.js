"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[983],{1983:(Rp,Ta,tt)=>{tt.d(Ta,{dIK:()=>yt,I0D:()=>Yo,rjZ:()=>Fr,Cfg:()=>w,sqP:()=>Ue,QS6:()=>Tr,yKz:()=>ni,Hgd:()=>Qs,k6n:()=>Ys,RAh:()=>Ii,OX0:()=>Dn,PEF:()=>ui,t$0:()=>Nr,Wvk:()=>Ld,xVl:()=>ep});var l=tt(1727),z=tt(310),Ce=tt(8760),ze=tt(1355),it=tt(3773),rt=tt(1155),kt=tt(7409),Yt=tt(8386),us=tt(4957),M=tt(3559),At=function(){function s(e){this.intl=new l.eC,(0,l.le)(e)||(this.intl.culture=e)}return s.prototype.getFormatFunction=function(e){return e.type?this.intl.getDateFormat(e):this.intl.getNumberFormat(e)},s.prototype.getParserFunction=function(e){return e.type?this.intl.getDateParser(e):this.intl.getNumberParser(e)},s.prototype.fromView=function(e,t,i){return"date"!==i&&"datetime"!==i&&"number"!==i||(0,l.le)(t)?e:t(e)},s.prototype.toView=function(e,t){var i=e;return!(0,l.le)(t)&&!(0,l.le)(e)&&(i=t(e)),i},s.prototype.setCulture=function(e){(0,l.le)(e)||(0,l.VY)(e)},s}(),De=(function(e,t){return(Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])})(e,t)},function(){function s(e,t){var i=this;this.disableHtmlEncode=!0,this.allowSorting=!0,this.allowResizing=!0,this.allowFiltering=!0,this.allowGrouping=!0,this.allowReordering=!0,this.showColumnMenu=!0,this.enableGroupByFormat=!1,this.allowEditing=!0,this.filter={},this.showInColumnChooser=!0,this.edit={},this.allowSearching=!0,this.autoFit=!1,this.sortDirection="Descending",this.getEditTemplate=function(){return i.editTemplateFn},this.getFilterTemplate=function(){return i.filterTemplateFn},(0,l.TS)(this,e),this.parent=t,"none"===this.type?this.type=null:this.type&&(this.type="string"==typeof this.type?this.type.toLowerCase():void 0),this.editType&&(this.editType=this.editType.toLowerCase()),(0,l.le)(this.uid)&&(this.uid=Ue("grid-column"));var r=new At;if(e.format&&(e.format.skeleton||e.format.format&&"string"==typeof e.format.format)&&(this.setFormatter(r.getFormatFunction((0,l.l7)({},e.format))),this.setParser(r.getParserFunction(e.format))),this.toJSON=function(){for(var o={},a=["filter","dataSource","headerText","template","headerTemplate","edit","editTemplate","filterTemplate","commandsTemplate","parent"],h=Object.keys(i),d=0;d<h.length;d++)if("columns"===h[d]){o[h[d]]=[];for(var p=0;p<i[h[d]].length;p++)o[h[d]].push(i[h[d]][p].toJSON())}else a.indexOf(h[d])<0&&(o[h[d]]=i[h[d]]);return o},this.field||(this.allowFiltering=!1,this.allowGrouping=!1,this.allowSorting=!1,this.columns&&(this.allowResizing=this.columns.some(function(o){return o.allowResizing}))),this.commands&&!this.textAlign&&(this.textAlign="Right"),(this.template||this.commandsTemplate)&&(this.templateFn=Me(this.template||this.commandsTemplate)),this.headerTemplate&&(this.headerTemplateFn=Me(this.headerTemplate)),!(0,l.le)(this.filter)&&this.filter.itemTemplate&&(this.fltrTemplateFn=Me(this.filter.itemTemplate)),this.editTemplate&&(this.editTemplateFn=Me(this.editTemplate)),this.filterTemplate&&(this.filterTemplateFn=Me(this.filterTemplate)),this.isForeignColumn()&&((0,l.le)(this.editType)||"dropdownedit"===this.editType||"defaultedit"===this.editType)&&(this.editType="dropdownedit",this.edit.params&&this.edit.params.dataSource&&(this.edit.params.ddEditedData=!0),this.edit.params=(0,l.l7)({dataSource:this.dataSource,query:new z.AE,fields:{value:this.foreignKeyField||this.field,text:this.foreignKeyValue}},this.edit.params)),this.sortComparer){var n=this.sortComparer;this.sortComparer=function(o,a,h,d){if("string"==typeof n&&(n=ne(n,window)),"Descending"===i.sortDirection){var p=o;o=a,a=p;var c=h;h=d,d=c}return n(o,a,h,d)}}!this.sortComparer&&this.isForeignColumn()&&(this.sortComparer=function(o,a){return o=ne(i.foreignKeyValue,Mt(i,{},o)[0]),a=ne(i.foreignKeyValue,Mt(i,{},a)[0]),"Descending"===i.sortDirection?z.j4.fnDescending(o,a):z.j4.fnAscending(o,a)})}return s.prototype.getSortDirection=function(){return this.sortDirection},s.prototype.setSortDirection=function(e){this.sortDirection=e},s.prototype.getFreezeTableName=function(){return this.freezeTable},s.prototype.setProperties=function(e){for(var t=Object.keys(e),i=0;i<t.length;i++)this[t[i]]=e[t[i]],this.parent&&this.parent.isReact&&("template"===t[i]?this.parent.refreshReactColumnTemplateByUid(this.uid):"headerTemplate"===t[i]?(this.headerTemplateFn=Me(e[t[i]]),this.parent.refreshReactHeaderTemplateByUid(this.uid)):"editTemplate"===t[i]&&(this.editTemplateFn=Me(e[t[i]])))},s.prototype.isForeignColumn=function(){return!(!this.dataSource||!this.foreignKeyValue)},s.prototype.getFormatter=function(){return this.formatFn},s.prototype.setFormatter=function(e){this.formatFn=e},s.prototype.getParser=function(){return this.parserFn},s.prototype.setParser=function(e){this.parserFn=e},s.prototype.getColumnTemplate=function(){return this.templateFn},s.prototype.getHeaderTemplate=function(){return this.headerTemplateFn},s.prototype.getFilterItemTemplate=function(){return this.fltrTemplateFn},s.prototype.getDomSetter=function(){return this.disableHtmlEncode?"textContent":"innerHTML"},s}()),vs="rowDataBound",Wr="queryCellInfo",ms="headerCellInfo",Y="actionBegin",H="actionComplete",Xt="actionFailure",Te="dataBound",Kr="rowSelecting",Jt="rowSelected",ys="rowDeselecting",Xi="rowDeselected",mi="cellSelecting",Ji="cellSelected",Cs="cellDeselecting",bs="cellDeselected",Zr="columnSelecting",Qr="columnSelected",$t="columnDragStart",Lt="columnDrag",ei="columnDrop",ws="beforePrint",Ss="printComplete",Rs="beforeOpenAdaptiveDialog",xs="resizeStop",Fs="filterchoicerequest",Is="exportGroupCaption",nt="initial-load",we="initial-end",Ge="data-ready",ee="content-ready",X="ui-update",Ye="on-empty",Se="inbound-model-changed",ve="model-changed",tr="colgroup-refresh",ue="header-refreshed",Xr="sorting-complete",Es="searching-complete",Jr="grouping-complete",As="ungrouping-complete",wt="group-aggregates",ut="refresh-footer-rendered",ti="beforecellfocused",ir="cellfocused",oe="key-pressed",xe="click",V="destroy",je="column-visible-changed",yi="column-width-changed",ii="column-position-changed",en="rows-added",rr="rows-removed",ri="header-drop",Ci="datasource-modified",nr="refresh-virtual-block",bi="dblclick",qt="auto-col",Ot="tooltip-destroy",wi="update-data",Le="prevent-batch",Hs="add-delete-Action",Ns="exportDetailDataBound",Vs="pdfExportComplete",Be="freezerender",ni="filterDialogCreated",or="getForeignKeyData",si="generateQuery",Gs="showEmptyGrid",js="foreignKeyData",Si="dataStateChange",_s="dataSourceChanged",Us="beforeFragAppend",Ri="frozenHeight",hn="textWrapRefresh",dn="recordAdded",ar="cancel-Begin",pn="hierarchyprint",Ws="export-RowDataBound",xi="partial-refresh",Zs="select-virtual-Row",un="columns-prepared",oi="cbox-filter-complete",Fi="filter-Prevent",Qs="before-filter-cmenu-open",Ys="filter-cbox-value",Pt="restore-Focus",Js="detail-indentcell-info",$s="virtaul-cell-focus",to="virtual-scroll-edit",pr="edit-reset",gt="get-virtual-data",ur="infinite-scroll-handler",fr="infinite-edit-handler",ro="pdfAggregateQueryCellInfo",xn="group-collapse",Mi="refreshResizeHandlers",zn="before-refresh-on-data-change",Ii="filter-dialog-close",Tn="refresh-cutsom-filter-ok-button",lo="refresh-cutsom-filter-clear-button",En="render-responsive-cmenu",Dn="filter-cmenu-select",ho="custom-filter-close",Ti="set-fullscreen-dialog",Ht="refresh-Expand-and-Collapse",gr="enter-key-handler",An="refresh-virtual-max-page",vr="set-virtual-page-query",Ln="select-row-on-context-open",po="pager-refresh",uo="reset-virtual-focus",fo="refresh-virtual-editform-cells",go="scroll-to-edit",mr="create-virtual-validation-form",Bn="validate-virtual-form",Pn="refresh-infinite-persist-selection",A=(()=>(function(s){s[s.Data=0]="Data",s[s.Header=1]="Header",s[s.Summary=2]="Summary",s[s.GroupSummary=3]="GroupSummary",s[s.CaptionSummary=4]="CaptionSummary",s[s.Filter=5]="Filter",s[s.Indent=6]="Indent",s[s.GroupCaption=7]="GroupCaption",s[s.GroupCaptionEmpty=8]="GroupCaptionEmpty",s[s.Expand=9]="Expand",s[s.HeaderIndent=10]="HeaderIndent",s[s.StackedHeader=11]="StackedHeader",s[s.DetailHeader=12]="DetailHeader",s[s.DetailExpand=13]="DetailExpand",s[s.CommandColumn=14]="CommandColumn",s[s.DetailFooterIntent=15]="DetailFooterIntent",s[s.RowDragIcon=16]="RowDragIcon",s[s.RowDragHIcon=17]="RowDragHIcon"}(A||(A={})),A))(),de=(()=>(function(s){s[s.Header=0]="Header",s[s.Content=1]="Content",s[s.Summary=2]="Summary"}(de||(de={})),de))(),K=(()=>(function(s){s[s.isEdit=0]="isEdit",s[s.isAdd=1]="isAdd",s[s.isSort=2]="isSort",s[s.isFilter=3]="isFilter"}(K||(K={})),K))(),Cr=function(){function s(e,t){this.dataState={isPending:!1,resolver:null,group:[]},this.foreignKeyDataState={isPending:!1,resolver:null},this.parent=e,this.serviceLocator=t,this.initDataManager(),!this.parent.isDestroyed&&"foreignKey"!==this.getModuleName()&&(this.parent.on(en,this.addRows,this),this.parent.on("row-position-changed",this.reorderRows,this),this.parent.on(rr,this.removeRows,this),this.parent.on(Ci,this.initDataManager,this),this.parent.on(V,this.destroy,this),this.parent.on(wi,this.crudActions,this),this.parent.on(Hs,this.getData,this),this.parent.on(qt,this.refreshFilteredCols,this),this.parent.on(un,this.refreshFilteredCols,this))}return s.prototype.reorderRows=function(e){this.dataManager.dataSource.json.splice(e.toIndex,0,this.dataManager.dataSource.json.splice(e.fromIndex,1)[0])},s.prototype.getModuleName=function(){return"data"},s.prototype.initDataManager=function(){var e=this.parent;this.dataManager=e.dataSource instanceof z.hm?e.dataSource:(0,l.le)(e.dataSource)?new z.hm:new z.hm(e.dataSource),!e.isAngular||e.query instanceof z.AE?(this.isQueryInvokedFromData=!0,e.query=e.query instanceof z.AE?e.query:new z.AE):e.setProperties({query:new z.AE},!0)},s.prototype.generateQuery=function(e){var i=this.parent.getQuery().clone();if("ExcludeHidden"===this.parent.columnQueryMode)i.select(this.parent.getColumns().filter(function(a){return!(!0!==a.isPrimaryKey&&!1===a.visible||void 0===a.field)}).map(function(a){return a.field}));else if("Schema"===this.parent.columnQueryMode){for(var r=[],n=this.parent.columns,o=0;o<n.length;o++)r.push(n[o].field);i.select(r)}return this.filterQuery(i),this.searchQuery(i),this.aggregateQuery(i),this.sortQuery(i),he(this.parent)?this.virtualGroupPageQuery(i):this.pageQuery(i,e),this.groupQuery(i),i},s.prototype.aggregateQuery=function(e){for(var t=this.parent.aggregates,i=0;i<t.length;i++)for(var r=t[i],n=0;n<r.columns.length;n++)for(var o=r.columns[n],a=o.type instanceof Array?o.type:[o.type],h=0;h<a.length;h++)e.aggregate(a[h].toLowerCase(),o.field);return e},s.prototype.virtualGroupPageQuery=function(e){if(e.queries.length)for(var i=0;i<e.queries.length;i++)"onPage"===e.queries[i].fn&&e.queries.splice(i,1);return e},s.prototype.pageQuery=function(e,t){var i=this.parent,n={query:e,skipPage:!1};if(i.notify(vr,n),n.skipPage)return e;if((i.allowPaging||i.enableVirtualization||i.enableInfiniteScrolling)&&!0!==t){if(i.pageSettings.currentPage=Math.max(1,i.pageSettings.currentPage),i.pageSettings.pageCount<=0&&(i.pageSettings.pageCount=8),i.pageSettings.pageSize<=0&&(i.pageSettings.pageSize=12),e.queries.length)for(var o=0;o<e.queries.length;o++)"onPage"===e.queries[o].fn&&e.queries.splice(o,1);!(0,l.le)(i.infiniteScrollModule)&&i.enableInfiniteScrolling?this.parent.notify("infinite-page-query",e):e.page(i.pageSettings.currentPage,i.allowPaging&&i.pagerModule&&i.pagerModule.pagerObj.isAllPage&&!this.dataManager.dataSource.offline?null:i.pageSettings.pageSize)}return e},s.prototype.groupQuery=function(e){var t=this.parent;if(t.allowGrouping&&t.groupSettings.columns.length){this.parent.groupSettings.enableLazyLoading&&e.lazyLoad.push({key:"isLazyLoad",value:this.parent.groupSettings.enableLazyLoading});for(var i=t.groupSettings.columns,r=0,n=i.length;r<n;r++){var o=this.getColumnByField(i[r]);o||this.parent.log("initial_action",{moduleName:"group",columnName:i[r]});var h=o.format;o.enableGroupByFormat?e.group(i[r],this.formatGroupColumn.bind(this),h):e.group(i[r],null)}}return e},s.prototype.sortQuery=function(e){var t=this.parent;if((t.allowSorting||t.allowGrouping)&&t.sortSettings.columns.length){for(var i=t.sortSettings.columns,r=[],n=i.length-1;n>-1;n--){if(!(o=this.getColumnByField(i[n].field)))return this.parent.log("initial_action",{moduleName:"sort",columnName:i[n].field}),e;o.setSortDirection(i[n].direction);var a=i[n].direction;o.sortComparer&&(this.parent.log("grid_sort_comparer"),a=this.isRemote()?i[n].direction:o.sortComparer.bind(o)),-1===t.groupSettings.columns.indexOf(i[n].field)?o.isForeignColumn()||o.sortComparer?e.sortByForeignKey(o.field,a,void 0,i[n].direction.toLowerCase()):e.sortBy(o.field,a):r.push({direction:a,field:o.field})}n=0;for(var h=r.length;n<h;n++)if("string"==typeof r[n].direction)e.sortBy(r[n].field,r[n].direction);else{var o=this.getColumnByField(r[n].field);e.sortByForeignKey(r[n].field,r[n].direction,void 0,o.getSortDirection().toLowerCase())}}return e},s.prototype.searchQuery=function(e,t,i){var r=this.parent.searchSettings,n=r.fields.length?r.fields:this.getSearchColumnFieldNames(),o=[],a=!1;if(this.parent.searchSettings.key.length){a=this.parent.getForeignKeyColumns().some(function(u){return n.indexOf(u.field)>-1});var h=i?t.dataSource.adaptor:this.dataManager.adaptor;if(a||h.getModuleName&&"ODataV4Adaptor"===h.getModuleName()){n=i?[t.foreignKeyValue]:n;for(var d=0;d<n.length;d++){var p=i?t:this.getColumnByField(n[d]);p.isForeignColumn()&&!i?o=this.fGeneratePredicate(p,o):o.push(new z.$G(n[d],r.operator,r.key,r.ignoreCase,r.ignoreAccent))}var c=z.$G.or(o);c.key=r.key,e.where(c)}else e.search(r.key,n,r.operator,r.ignoreCase,r.ignoreAccent)}return e},s.prototype.filterQuery=function(e,t,i){var h,r=this.parent,n=[],o=[],a=this.parent.getForeignKeyColumns();if(r.allowFiltering&&r.filterSettings.columns.length){for(var d=t||r.filterSettings.columns,p={},c=0,u=r.getColumns();c<u.length;c++)p[(f=u[c]).field]=f.filter.type?f.filter.type:r.filterSettings.type;for(var g=[],v=[],m=0,C=d;m<C.length;m++){var b=r.getColumnByField((f=C[m]).field);(0,l.le)(f.type)&&b&&("date"===b.type||"datetime"===b.type)&&(f.type=r.getColumnByField(f.field).type),f.isForeignKey?g.push(f):v.push(f)}if(v.length){for(var y=0,S=v.length;y<S;y++)v[y].uid=v[y].uid||this.parent.grabColumnByFieldFromAllCols(v[y].field).uid;for(var R=yt.getPredicate(v),F=0,D=Object.keys(R);F<D.length;F++)n.push(R[D[F]])}if(g.length)for(var k=0,E=g;k<E.length;k++){var f;(f=E[k]).uid=f.uid||this.parent.grabColumnByFieldFromAllCols(f.field).uid;var T=this.parent.grabColumnByUidFromAllCols(f.uid);if(T||this.parent.log("initial_action",{moduleName:"filter",columnName:f.field}),T.isForeignColumn()&&Gi(f.field,a)&&!i)o.push(f),T.columnData.length||(h=!0),n=this.fGeneratePredicate(T,n);else{R=yt.getPredicate(d);for(var P=0,j=Object.keys(R);P<j.length;P++)n.push(R[j[P]])}}n.length&&!h?e.where(z.$G.and(n)):this.parent.notify(Gs,{})}return e},s.prototype.fGeneratePredicate=function(e,t){var i={};return e&&(this.parent.notify(si,{predicate:i,column:e}),i.predicate.predicates.length&&t.push(i.predicate)),t},s.prototype.getData=function(e,t){var i=this;void 0===e&&(e={requestType:""});var r=this.getKey(e.foreignKeyData&&Object.keys(e.foreignKeyData).length?e.foreignKeyData:this.parent.getPrimaryKeyFieldNames());if(this.parent.log("datasource_syntax_mismatch",{dataState:this.parent}),this.parent.dataSource&&"result"in this.parent.dataSource)return this.eventPromise(e,t,r).promise;var o=void 0;switch(e.requestType){case"delete":if(t=t||this.generateQuery(),1===Object.keys(e.data).length)o=this.dataManager.remove(r,e.data[0],t.fromTable,t);else{var h={addedRecords:[],deletedRecords:[],changedRecords:[]};h.deletedRecords=e.data,o=this.dataManager.saveChanges(h,r,t.fromTable,t.requiresCount())}break;case"save":t=t||this.generateQuery(),e.index=(0,l.le)(e.index)?0:e.index,o=this.dataManager.insert(e.data,t.fromTable,t,e.index)}return e.promise=o,!o||Array.isArray(o)||o.hasOwnProperty("deletedRecords")?this.insert(t,e):o.then(function(){return i.insert(t,e)})},s.prototype.insert=function(e,t){return"save"===t.requestType&&this.parent.notify(dn,t),this.executeQuery(e)},s.prototype.executeQuery=function(e){var t=this;if(this.dataManager.ready){var i=new z.BH;return this.dataManager.ready.then(function(){t.dataManager.executeQuery(e).then(function(n){i.resolve(n)})}).catch(function(n){i.reject(n)}),i.promise}return this.dataManager.executeQuery(e)},s.prototype.formatGroupColumn=function(e,t){var i=this.serviceLocator,r=this.getColumnByField(t),n=e;return r.type||(r.type=n.getDay?n.getHours()>0||n.getMinutes()>0||n.getSeconds()>0||n.getMilliseconds()>0?"datetime":"date":typeof e),(0,l.le)(r.getFormatter())&&Bo(i,r),At.prototype.toView(e,r.getFormatter())},s.prototype.crudActions=function(e){var t=this.generateQuery(),i=null,r="promise",n=this.getKey(e.foreignKeyData&&Object.keys(e.foreignKeyData).length?e.foreignKeyData:this.parent.getPrimaryKeyFieldNames());"save"===(this.parent.dataSource&&"result"in this.parent.dataSource&&this.eventPromise(e,t,n),e.requestType)&&(i=this.dataManager.update(n,e.data,t.fromTable,t,e.previousData)),e[r]=i||e[r],this.parent.notify("crud-Action",e)},s.prototype.saveChanges=function(e,t,i,r){if(void 0===r&&(r=this.generateQuery()),r.requiresCount(),"result"in this.parent.dataSource){var n=new z.BH,o={requestType:"batchsave",changes:e,key:t,query:r,endEdit:n.resolve};return this.setState({isPending:!0,resolver:n.resolve}),this.parent.trigger(_s,o),n.promise}return this.dataManager.saveChanges(e,t,r.fromTable,r,i)},s.prototype.getKey=function(e){if(e&&e.length)return e[0]},s.prototype.isRemote=function(){return!0!==this.dataManager.dataSource.offline&&void 0!==this.dataManager.dataSource.url&&""!==this.dataManager.dataSource.url},s.prototype.addRows=function(e){for(var t=e.records.length;t>0;t--)this.dataManager.dataSource.json.splice(e.toIndex,0,e.records[t-1])},s.prototype.removeRows=function(e){this.dataManager.dataSource.json=this.dataManager.dataSource.json.filter(function(i){return-1===e.records.indexOf(i)})},s.prototype.getColumnByField=function(e){var t;return this.parent.columnModel.some(function(i){return t=i,i.field===e})&&t},s.prototype.destroy=function(){this.parent.isDestroyed||(this.parent.off(en,this.addRows),this.parent.off(rr,this.removeRows),this.parent.off(Ci,this.initDataManager),this.parent.off(V,this.destroy),this.parent.off(wi,this.crudActions),this.parent.off(Hs,this.getData),this.parent.off(qt,this.refreshFilteredCols),this.parent.off(un,this.refreshFilteredCols))},s.prototype.getState=function(){return this.dataState},s.prototype.setState=function(e){return this.dataState=e},s.prototype.getForeignKeyDataState=function(){return this.foreignKeyDataState},s.prototype.setForeignKeyDataState=function(e){this.foreignKeyDataState=e},s.prototype.getStateEventArgument=function(e){var t=new z.lM,i=new z.hm({url:"",adaptor:new z.lM}),r=t.processQuery(i,e),n=JSON.parse(r.data);return(0,l.l7)(n,r.pvtData)},s.prototype.eventPromise=function(e,t,i){var r=this,n=e,o=this.getStateEventArgument(t),a=new z.BH,h=new z.BH;if(void 0!==e.requestType&&!1!==this.dataState.isDataChanged)if(o.action=e,"save"===e.requestType||"delete"===e.requestType){var d=e;d.key=i,d.promise=h.promise,d.state=o,this.setState({isPending:!0,resolver:h.resolve}),n.endEdit=h.resolve,n.cancelEdit=h.reject,this.parent.trigger(_s,d),h.promise.then(function(){r.setState({isPending:!0,resolver:a.resolve,group:o.group,aggregates:o.aggregates}),"save"===d.requestType&&r.parent.notify(dn,d),r.parent.trigger(Si,o)}).catch(function(){})}else this.setState({isPending:!0,resolver:a.resolve,group:o.group,aggregates:o.aggregates}),this.parent.trigger(Si,o);else this.setState({}),a.resolve(this.parent.dataSource);return a},s.prototype.getSearchColumnFieldNames=function(){for(var e=[],i=0,r=this.parent.getColumns();i<r.length;i++){var n=r[i];n.allowSearching&&!(0,l.le)(n.field)&&e.push(n.field)}return e},s.prototype.refreshFilteredCols=function(){this.parent.allowFiltering&&this.parent.filterSettings.columns.length&&function(s,e){for(var t=0;t<e.length;t++)e[t].uid=e[t].isForeignKey?Gi(e[t].field,s.getForeignKeyColumns()).uid:s.enableColumnVirtualization?Uo(s,e[t].field).uid:s.getColumnByField(e[t].field).uid}(this.parent,this.parent.filterSettings.columns)},s}(),st=function(){function s(e,t){(0,l.TS)(this,e),this.parent=t}return s.prototype.clone=function(){var e=new s({});return(0,l.TS)(e,this),e.cells=this.cells.map(function(t){return t.clone()}),e},s.prototype.setRowValue=function(e){if(this.parent){var t=this.data[this.parent.getPrimaryKeyFieldNames()[0]];this.parent.setRowData(t,e)}},s.prototype.setCellValue=function(e,t){if(this.parent){if(this.data[e].toString()===t.toString())return;var r=this.parent.getPrimaryKeyFieldNames()[0];this.parent.setCellValue(this.data[r],e,t),this.makechanges(r,this.data)}},s.prototype.makechanges=function(e,t){this.parent&&this.parent.getDataModule().dataManager.update(e,t)},s}(),Pe=function(){function s(e){this.isSpanned=!1,this.isRowSpanned=!1,(0,l.TS)(this,e)}return s.prototype.clone=function(){var e=new s({});return(0,l.TS)(e,this),e},s}(),vo=function(){function s(e,t){this.serviceLocator=e,this.parent=t}return s.prototype.render=function(e,t,i,r){var p,o=this.serviceLocator.getService("cellRendererFactory").getCellRenderer(t.cells[i].cellType||A.Data),a=t.cells[i].cellSpan?t.cells[i].cellSpan:e.colSpan+i<=t.cells.length?e.colSpan:t.cells.length-i,h=e.rowSpan,d=0;if(t.index>0){var c=this.parent.groupSettings.columns.length>0&&!this.parent.getRowsObject()[t.index-1].isDataRow?this.parent.getRowsObject()[t.index].cells:this.parent.getRowsObject()[t.index-1].cells,u=t.cells[i];p=c.filter(function(m){return m.column.uid===u.column.uid})[0]}for(var g=p&&p.colSpanRange>1&&p.rowSpanRange>1?p.colSpanRange:a,v=i+1;v<i+g&&v<t.cells.length;v++)!1===t.cells[v].visible?d++:t.cells[v].isSpanned=!0;if(d>0){for(v=i+a;v<i+a+d&&v<t.cells.length;v++)t.cells[v].isSpanned=!0;i+a+d>=t.cells.length&&(a-=i+a+d-t.cells.length)}return t.cells[i].cellSpan&&(t.data[e.column.field]=t.cells[i].spanText,r=o.render(t.cells[i],t.data,{index:(0,l.le)(t.index)?"":t.index.toString()})),a>1&&(0,l.Y4)(r,{colSpan:a.toString(),"aria-colSpan":a.toString()}),h>1&&((0,l.Y4)(r,{rowspan:h.toString(),"aria-rowspan":h.toString()}),t.cells[i].isRowSpanned=!0,t.cells[i].rowSpanRange=Number(h),a>1&&(t.cells[i].colSpanRange=Number(a))),t.index>0&&p.rowSpanRange>1&&(t.cells[i].isSpanned=!0,t.cells[i].rowSpanRange=Number(p.rowSpanRange-1),t.cells[i].colSpanRange=p.rowSpanRange>0?p.colSpanRange:1),this.parent.enableColumnVirtualization&&!t.cells[i].cellSpan&&!this.containsKey(e.column.field,e.data[e.column.field])&&this.backupMergeCells(e.column.field,e.data[e.column.field],e.colSpan),r},s.prototype.backupMergeCells=function(e,t,i){this.setMergeCells(this.generteKey(e,t),i)},s.prototype.generteKey=function(e,t){return e+"__"+t.toString()},s.prototype.splitKey=function(e){return e.split("__")},s.prototype.containsKey=function(e,t){return this.getMergeCells().hasOwnProperty(this.generteKey(e,t))},s.prototype.getMergeCells=function(){return this.parent.mergeCells},s.prototype.setMergeCells=function(e,t){this.parent.mergeCells[e]=t},s.prototype.updateVirtualCells=function(e){for(var t=this.getMergeCells(),i=0,r=Object.keys(t);i<r.length;i++){var n=r[i],o=t[n],a=this.splitKey(n),h=this.getIndexFromAllColumns(a[0]),d=this.parent.getColumnIndexesInView(),p=o-(d[0]-h);if(h<d[0]&&p>1)for(var c=0,u=e;c<u.length;c++){var f=u[c];if(f.data[a[0]].toString()===a[1].toString()){f.cells[0].cellSpan=p,f.cells[0].spanText=a[1];break}}}return e},s.prototype.getIndexFromAllColumns=function(e){return _t(this.parent.getVisibleColumns(),function(i,r){if(i.field===e)return r})[0]},s}(),N="e-rowcell",pe="e-gridheader",ae="e-gridcontent",Rt="e-gridfooter",le="e-headercontent",_="e-movablecontent",W="e-movableheader",He="e-frozencontent",Xe="e-frozenheader",ie="e-content",Z="e-table",G="e-row",Nt="e-gridchkbox",Re="e-editedrow",Ie="e-addedrow",ai="changedRecords",ot="addedRecords",xt="deletedRecords",B="Left-Right",Q="frozen-right",te="frozen-left",ce="data-colindex",mo="aria-colindex",O="data-rowindex",Ei="aria-rowindex",I="tbody",q="colgroup",Ne="open",li="change",hi="focus",br="created",ke=function(){function s(e,t,i){this.isSpan=!1,this.cellType=t,this.serviceLocator=e,this.parent=i,this.element=this.parent.createElement("tr",{attrs:{role:"row"}})}return s.prototype.render=function(e,t,i,r,n){return this.refreshRow(e,t,i,r,n)},s.prototype.refresh=function(e,t,i,r,n){var o=this;i&&(e.data=Lr({},e.changes),this.refreshMergeCells(e));var a=this.parent.element.querySelector("[data-uid="+e.uid+"]"),h=this.refreshRow(e,t,r,n,null,i),d=[].slice.call(h.cells),p=[].slice.call(a.querySelectorAll(".e-templatecell"));if(this.parent.isReact&&p.length)for(var c=function(y){if(y.template)return setTimeout(function(){o.parent.refreshReactColumnTemplateByUid(y.uid)},0),"break"},u=0,f=t;u<f.length&&"break"!==c(f[u]);u++);a.innerHTML="";for(var m=0,C=d;m<C.length;m++)a.appendChild(C[m])},s.prototype.refreshRow=function(e,t,i,r,n,o){var a=(0,l.le)(n)?this.element.cloneNode():n,h={data:e.data},d={data:e.data},p=this.parent.getColumns().filter(function(re){return"checkbox"===re.type&&re.field})[0],c=!1;p&&(c=ne(p.field,h.data));var u=this.parent.getSelectedRowIndexes();e.isDataRow&&(e.isSelected=u.indexOf(e.index)>-1||c),e.isDataRow&&this.parent.isCheckBoxSelection&&"Check"===this.parent.checkAllRows&&this.parent.enableVirtualization&&(e.isSelected=!0,-1===u.indexOf(e.index)&&u.push(e.index)),this.buildAttributeFromRow(a,e),(0,l.Y4)(a,(0,l.l7)({},i,{})),at(a,e.attributes);for(var f=this.serviceLocator.getService("cellRendererFactory"),g=function(re,pt){var Fe=e.cells[re];Fe.isSelected=e.isSelected,Fe.isColumnSelected=Fe.column.isSelected;var Et=f.getCellRenderer(e.cells[re].cellType||A.Data),Dt={index:(0,l.le)(e.index)?"":e.index.toString()};e.isExpand&&e.cells[re].cellType===A.DetailExpand&&(Dt.class=v.parent.isPrinting?"e-detailrowcollapse":"e-detailrowexpand");var gi=Et.render(e.cells[re],e.data,Dt,e.isExpand,o);if(e.cells[re].cellType!==A.Filter){if(e.cells[re].cellType===A.Data||e.cells[re].cellType===A.CommandColumn){v.parent.trigger(Wr,(0,l.l7)(d,{cell:gi,column:Fe.column,colSpan:1,rowSpan:1,foreignKeyData:e.cells[re].foreignKeyData,requestType:v.parent.requestTypeAction}));var _r=!1;if(e.index>0&&v.isSpan){var Qi=(v.parent.groupSettings.columns.length>0&&!v.parent.getRowsObject()[e.index-1].isDataRow?v.parent.getRowsObject()[e.index].cells:v.parent.getRowsObject()[e.index-1].cells).filter(function(et){return et.column.uid===e.cells[re].column.uid})[0];_r=Qi.isRowSpanned?Qi.isRowSpanned:Qi.rowSpanRange>1}(d.colSpan>1||e.cells[re].cellSpan>1||d.rowSpan>1||_r)&&(v.isSpan=!0,gi=new vo(v.serviceLocator,v.parent).render(d,e,re,gi))}e.cells[re].isSpanned||a.appendChild(gi)}},v=this,m=0,C=e.cells.length;m<C;m++)g(m);var b={row:a,rowHeight:this.parent.rowHeight};if(e.isDataRow){var y=(0,l.l7)(h,b);y.isSelectable=!0,this.parent.trigger(vs,y),e.isSelectable=y.isSelectable;var S=this.parent.isRowDragable();if(this.parent.allowPaging&&this.parent.selectionSettings.persistSelection){var R=this.parent.getPrimaryKeyFieldNames()[0],F=e.data?e.data[R]:null,D=y.isSelectable?this.parent.partialSelectedRecords:this.parent.disableSelectedRecords;D.some(function(re){return re[R]===F})||D.push(e.data)}if(!y.isSelectable){this.parent.selectionModule.isPartialSelection=!0,e.isSelected=!1;var L=b.row.querySelectorAll(".e-rowcell.e-gridchkbox"),k=y.row.querySelector(".e-rowdragdrop"),E=this.parent.groupSettings.columns.length+(k||this.parent.isDetail()?1:0);for(m=0;m<L.length;m++)L[m].firstElementChild.classList.add("e-checkbox-disabled"),L[m].querySelector(".e-frame").classList.remove("e-check");if(e.cells.length)for(m=E;m<e.cells.length;m++){var T=y.row.querySelector('.e-rowcell[data-colindex="'+e.cells[m].index+'"]');T&&(0,l.IV)([T],["e-selectionbackground","e-active"])}k&&(0,l.IV)([k],["e-selectionbackground","e-active"])}if(this.parent.childGrid||S||this.parent.detailTemplate){var P=a.querySelectorAll(".e-rowcell:not(.e-hide)")[0];P&&P.classList.add("e-detailrowvisible")}}if(this.parent.enableVirtualization&&(h.rowHeight=this.parent.rowHeight),h.rowHeight?a.style.height=h.rowHeight+"px":this.parent.rowHeight&&(a.querySelector(".e-headercell")||a.querySelector(".e-groupcaption"))&&(a.style.height=this.parent.rowHeight+"px"),e.cssClass&&a.classList.add(e.cssClass),e.lazyLoadCssClass&&a.classList.add(e.lazyLoadCssClass),(!this.parent.enableColumnVirtualization||0===this.parent.frozenColumns)&&this.parent.aggregates.length&&this.parent.element.scrollHeight>this.parent.height)for(m=0;m<this.parent.aggregates.length;m++)if(this.parent.aggregates[m].properties.columns[0].footerTemplate){var se=[].slice.call(a.getElementsByClassName("e-summarycell"));se.length&&((0,l.cn)([se[se.length-1]],["e-lastsummarycell"]),(0,l.cn)([se[0]],["e-firstsummarycell"]))}return a},s.prototype.refreshMergeCells=function(e){for(var t=0,i=e.cells;t<i.length;t++)i[t].isSpanned=!1;return e},s.prototype.buildAttributeFromRow=function(e,t){var i={},n=[];t.isDataRow&&n.push(G),t.isAltRow&&n.push("e-altrow"),(0,l.le)(t.index)||(i[Ei]=t.index+1,i["data-rowindex"]=t.index),t.rowSpan&&(i.rowSpan=t.rowSpan),t.uid&&(i["data-uid"]=t.uid),t.isSelected&&(i["aria-selected"]=!0),!1===t.visible&&n.push("e-hide"),i.class=n,at(e,i)},s}(),Je=function(){function s(e){this.parent=e}return s.prototype.generateRows=function(e,t){var i=[],r=this.parent.enableVirtualization&&t?t.startIndex:0;r=this.parent.enableInfiniteScrolling&&t?this.getInfiniteIndex(t):r;for(var n=0,o=Object.keys(e).length;n<o;n++,r++)i[n]=this.generateRow(e[n],r);return i},s.prototype.ensureColumns=function(){var e=[];if(this.parent.detailTemplate||this.parent.childGrid){var t={};this.parent.notify(Js,t),e.push(this.generateCell(t,null,A.DetailExpand))}return this.parent.isRowDragable()&&e.push(this.generateCell({},null,A.RowDragIcon)),e},s.prototype.generateRow=function(e,t,i,r,n,o,a){var h={foreignKeyData:{}};h.uid=Ue("grid-row"),h.data=e,h.index=t,h.indent=r,h.tIndex=o,h.isDataRow=!0,h.parentGid=n,h.parentUid=a,this.parent.isPrinting&&("All"===this.parent.hierarchyPrintMode?h.isExpand=!0:"Expanded"===this.parent.hierarchyPrintMode&&this.parent.expandedRows&&this.parent.expandedRows[t]&&(h.isExpand=this.parent.expandedRows[t].isExpand)),h.cssClass=i,h.isAltRow=!!this.parent.enableAltRow&&t%2!=0,h.isAltRow=!!this.parent.enableAltRow&&t%2!=0,h.isSelected=this.parent.getSelectedRowIndexes().indexOf(t)>-1,this.refreshForeignKeyRow(h);var d=this.ensureColumns(),p=new st(h,this.parent);return p.cells="Right"===this.parent.getFrozenMode()?this.generateCells(h).concat(d):d.concat(this.generateCells(h)),p},s.prototype.refreshForeignKeyRow=function(e){for(var t=this.parent.getForeignKeyColumns(),i=0;i<t.length;i++)(0,l.sO)(t[i].field,Mt(t[i],e.data),e.foreignKeyData)},s.prototype.generateCells=function(e){for(var t=this.parent.getColumns(),i=[],r=0;r<t.length;r++)i.push(this.generateCell(t[r],e.uid,(0,l.le)(t[r].commands)?void 0:A.CommandColumn,null,r,e.foreignKeyData));return i},s.prototype.generateCell=function(e,t,i,r,n,o){var a={visible:e.visible,isDataCell:!(0,l.le)(e.field||e.template),isTemplate:!(0,l.le)(e.template),rowID:t,column:e,cellType:(0,l.le)(i)?A.Data:i,colSpan:r,commands:e.commands,isForeignKey:e.isForeignColumn&&e.isForeignColumn(),foreignKeyData:e.isForeignColumn&&e.isForeignColumn()&&(0,l.NA)(e.field,o)};return(a.isDataCell||"checkbox"===a.column.type||a.commands)&&(a.index=n),new Pe(a)},s.prototype.refreshRows=function(e){for(var t=0;t<e.length;t++)this.refreshForeignKeyRow(e[t]),e[t].cells=this.generateCells(e[t]);return e},s.prototype.getInfiniteIndex=function(e){return"infiniteScroll"===e.requestType||"delete"===e.requestType||"add"===e.action?e.startIndex:0},s}(),Co=function(){var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])})(e,t)};return function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),ki=function(){function s(e){this.parent=e}return s.prototype.getData=function(){for(var e=this,t=[],i=this.parent.aggregates.slice(),r=0;r<i.length;r++){var n=i[r].columns.filter(function(o){return!(o.footerTemplate||o.groupFooterTemplate||o.groupCaptionTemplate)||e.columnSelector(o)});n.length&&t.push({columns:n})}return t},s.prototype.columnSelector=function(e){return void 0!==e.footerTemplate},s.prototype.getColumns=function(e,t){var i=[];if((this.parent.detailTemplate||!(0,l.le)(this.parent.childGrid))&&i.push(new De({})),this.parent.allowGrouping)for(var r=0;r<this.parent.groupSettings.columns.length;r++)i.push(new De({}));return this.parent.isRowDragable()&&!e&&i.push(new De({})),i.push.apply(i,this.parent.getColumns()),t=t&&!e?t+this.parent.getIndentCount():t,(0,l.le)(e)?i:i.slice(e,t)},s.prototype.generateRows=function(e,t,i,r,n){if(0===e.length&&(void 0===t||!t.count))return[];for(var o=this.buildSummaryData(e,t),a=[],h=this.getData(),d=0;d<h.length;d++)a.push(this.getGeneratedRow(h[d],o[d],t?t.level:void 0,i,r,t?t.parentUid:void 0,n));return a},s.prototype.getGeneratedRow=function(e,t,i,r,n,o,a){var h=[],d=this.getIndentByLevel(),p=!(0,l.le)(this.parent.childGrid),c=r?0:this.parent.getIndentCount();this.parent.isRowDragable()&&!r&&(d=["e-indentcelltop"]);for(var u=a||this.getColumns(r,n),f=0;f<u.length;f++)h.push(this.getGeneratedCell(u[f],e,f>=c?this.getCellType():0===f&&this.parent.childGrid?A.DetailFooterIntent:A.Indent,d[f],p));var g=new st({data:t,attributes:{class:"e-summaryrow"}});return g.cells=h,g.uid=Ue("grid-row"),g.parentUid=o,g.isAggregateRow=!0,g.visible=h.some(function(v){return v.isDataCell&&v.visible}),g},s.prototype.getGeneratedCell=function(e,t,i,r,n){var o=t.columns.filter(function(d){return d.columnName===e.field})[0],a={style:{textAlign:e.textAlign},"e-mappinguid":e.uid,index:e.index};r&&(a.class=r),(0,l.le)(r)&&n&&(a.class="e-detailindentcelltop");var h={visible:e.visible,isDataCell:!(0,l.le)(o),isTemplate:o&&!(0,l.le)(o.footerTemplate||o.groupFooterTemplate||o.groupCaptionTemplate),column:o||{},attributes:a,cellType:i};return h.column.headerText=e.headerText,new Pe(h)},s.prototype.buildSummaryData=function(e,t){for(var i=[],r=this.getData(),n={},o=0;o<r.length;o++){n={};for(var a=r[o].columns,h=0;h<a.length;h++)n=this.setTemplate(a[h],t&&t.aggregates?t:e,n);i.push(n)}return i},s.prototype.getIndentByLevel=function(){return this.parent.groupSettings.columns.map(function(){return"e-indentcelltop"})},s.prototype.setTemplate=function(e,t,i){var r=e.type,n={},o=e.getFormatter()||function(u){return u},a=t;r instanceof Array||(r=[e.type]);for(var h=0;h<r.length;h++){var d=e.field+" - "+r[h].toLowerCase(),p=e.columnName,c="Custom"!==r[h]&&a.aggregates&&d in a.aggregates?a.aggregates[d]:Lo(r[h],a.aggregates?a:t,e,this.parent);i[p]=i[p]||{},i[p][d]=c,i[p][r[h]]=(0,l.le)(c)?" ":o(c),a.field&&(i[p].field=a.field,i[p].key=a.key)}return n.format=e.getFormatter(),e.setTemplate(n),i},s.prototype.getCellType=function(){return A.Summary},s}(),di=function(s){function e(){return null!==s&&s.apply(this,arguments)||this}return Co(e,s),e.prototype.columnSelector=function(t){return void 0!==t.groupFooterTemplate},e.prototype.getIndentByLevel=function(t){return void 0===t&&(t=this.parent.groupSettings.columns.length),this.parent.groupSettings.columns.map(function(i,r){return r<=t-1?"":"e-indentcelltop"})},e.prototype.getCellType=function(){return A.GroupSummary},e}(ki),Ai=function(s){function e(){return null!==s&&s.apply(this,arguments)||this}return Co(e,s),e.prototype.columnSelector=function(t){return void 0!==t.groupCaptionTemplate},e.prototype.getData=function(){return[s.prototype.getData.call(this).reduce(function(i,r){return i.columns=i.columns.concat(r.columns),i},{columns:[]})]},e.prototype.isEmpty=function(){return 0===(this.getData()[0].columns||[]).length},e.prototype.getCellType=function(){return A.CaptionSummary},e}(ki),Zl=function(){var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])})(e,t)};return function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),Sr=function(s){function e(t){var i=s.call(this,t)||this;return i.rows=[],i.index=0,i.infiniteChildCount=0,i.renderInfiniteAgg=!0,i.parent=t,i.summaryModelGen=new di(t),i.captionModelGen=new Ai(t),i}return Zl(e,s),e.prototype.generateRows=function(t,i){if(0===this.parent.groupSettings.columns.length)return s.prototype.generateRows.call(this,t,i);this.isInfiniteScroll="infiniteScroll"===i.requestType,this.rows=[],this.index=this.parent.enableVirtualization||this.isInfiniteScroll?i.startIndex:0;for(var r=0,n=t.length;r<n;r++)this.infiniteChildCount=0,this.renderInfiniteAgg=!0,this.getGroupedRecords(0,t[r],t.level,r,void 0,this.rows.length);return this.index=0,this.parent.isCollapseStateEnabled()&&this.ensureRowVisibility(),this.rows},e.prototype.getGroupedRecords=function(t,i,r,n,o,a,h){var d,p=r;if((0,l.le)(i.items))if((0,l.le)(i.GroupGuid))this.rows=this.rows.concat(this.generateDataRows(i,t,n,this.rows.length,h));else for(var c=0,u=i.length;c<u;c++)this.getGroupedRecords(t,i[c],i.level,n,t,this.rows.length,h);else{var f=void 0,g=this.generateCaptionRow(i,t,n,o,a,h);if(this.isInfiniteScroll&&(f=this.getPreCaption(t,g.data.key)),f?g.uid=f.uid:this.rows=this.rows.concat(g),i.items&&i.items.length&&this.getGroupedRecords(t+1,i.items,i.items.level,n,t+1,this.rows.length,g.uid),this.parent.aggregates.length&&this.isRenderAggregate(g)){var v=this.rows.length;(d=this.rows).push.apply(d,this.summaryModelGen.generateRows(i,{level:p,parentUid:g.uid}));for(var m=v-1;m>=0;m--)if(this.rows[m].isCaptionRow)this.rows[m].aggregatesCount=this.rows.length-v;else if(!this.rows[m].isCaptionRow&&!this.rows[m].isDataRow)break}f&&this.setInfiniteRowVisibility(f)}},e.prototype.isRenderAggregate=function(t){return this.parent.enableInfiniteScrolling?!!this.renderInfiniteAgg&&(this.getPreCaption(t.indent,t.data.key),this.renderInfiniteAgg=t.data.count===this.infiniteChildCount,this.renderInfiniteAgg):!this.parent.enableInfiniteScrolling},e.prototype.getPreCaption=function(t,i){var n,r=this.parent.getRowsObject().concat(this.rows);this.infiniteChildCount=0;for(var o=r.length;o--&&(r[o].isCaptionRow&&r[o].indent===t&&r[o].data.key===i&&(n=r[o]),!(r[o].indent===t||r[o].indent<t));)r[o].indent===t+1&&this.infiniteChildCount++;return n},e.prototype.getCaptionRowCells=function(t,i,r){var n=[],o=[],a=this.parent.getColumnByField(t),h=this.parent.getColumnIndexesInView();this.parent.enableColumnVirtualization&&(a=this.parent.columns.filter(function(y){return y.field===t})[0]);var d=this.parent.groupSettings.columns.length,p=this.parent;if(!this.parent.enableColumnVirtualization||-1!==h.indexOf(i)){for(var c=0;c<i;c++)n.push(this.generateIndentCell());n.push(this.generateCell({},null,A.Expand))}if(i=this.parent.enableColumnVirtualization?1:this.parent.getVisibleColumns().length+d+(p.detailTemplate||p.childGrid?1:0)-i+(this.parent.getVisibleColumns().length?-1:0),this.parent.aggregates.length&&!this.captionModelGen.isEmpty()){var u=this.captionModelGen.generateRows(r)[0];(0,l.l7)(r,u.data);var f=0;u.cells.some(function(y,S){return f=S,y.visible&&y.isDataCell}),o=u.cells.slice(f).filter(function(y){return y.visible}),u.visible&&o[0].column.field===this.parent.getVisibleColumns()[0].field&&(o=o.slice(1)),1===this.parent.getVisibleColumns().length&&(o=[]),i-=o.length}for(var g=this.parent.enableColumnVirtualization?this.parent.getColumns():[a],v=!0,m=0;m<g.length;m++){var C=v&&-1!==h.indexOf(i);C&&(v=!1);var b=!this.parent.enableColumnVirtualization||C?A.GroupCaption:A.GroupCaptionEmpty;i=this.parent.enableColumnVirtualization&&b===A.GroupCaption?i+d:i,p.isRowDragable()&&i++,n.push(this.generateCell(a,null,b,i))}return n.push.apply(n,o),n},e.prototype.generateCaptionRow=function(t,i,r,n,o,a){var h={},d="records",p=this.parent.getColumnByField(t.field);h.data=(0,l.l7)({},t),p&&(h.data.field=t.field),h.isDataRow=!1,h.isExpand=!this.parent.groupSettings.enableLazyLoading&&!this.parent.isCollapseStateEnabled(),h.parentGid=r,h.childGid=n,h.tIndex=o,h.isCaptionRow=!0,h.parentUid=a,h.gSummary=(0,l.le)(t.items[d])?t.items.length:t.items[d].length,h.uid=Ue("grid-row");var c=new st(h);return c.indent=i,this.getForeignKeyData(c),c.cells=this.getCaptionRowCells(t.field,i,c.data),c},e.prototype.getForeignKeyData=function(t){var i=t.data,r=this.parent.getColumnByField(i.field);if(r&&r.isForeignColumn&&r.isForeignColumn()){var n=(0,l.le)(i.key)?"":r.valueAccessor(r.foreignKeyValue,Mt(r,{},i.key)[0],r);(0,l.sO)("foreignKey",n,t.data)}},e.prototype.generateDataRows=function(t,i,r,n,o){for(var a=[],h=this.parent.getColumnIndexesInView(),d=0,p=t.length;d<p;d++,n++){a[d]=this.generateRow(t[d],this.index,d?void 0:"e-firstchildrow",i,r,n,o);for(var c=0;c<i;c++)this.parent.enableColumnVirtualization&&-1===h.indexOf(i)||a[d].cells.unshift(this.generateIndentCell());this.index++}return a},e.prototype.generateIndentCell=function(){return this.generateCell({},null,A.Indent)},e.prototype.refreshRows=function(t){for(var i=this.parent.getColumnIndexesInView(),r=0;r<t.length;r++)if(t[r].isDataRow){t[r].cells=this.generateCells(t[r]);for(var n=0;n<t[r].indent;n++)this.parent.enableColumnVirtualization&&-1===i.indexOf(t[r].indent)||t[r].cells.unshift(this.generateIndentCell())}else{var o=this.generateCaptionRow(t[r].data,t[r].indent);t[r].cells=o.cells}return t},e.prototype.setInfiniteRowVisibility=function(t){if(!t.isExpand||!1===t.visible)for(var i=0,r=this.rows;i<r.length;i++){var n=r[i];n.parentUid===t.uid&&(n.visible=!1,n.isCaptionRow&&this.setInfiniteRowVisibility(n))}},e.prototype.ensureRowVisibility=function(){for(var t=0;t<this.rows.length;t++){var i=this.rows[t];if(i.isCaptionRow)for(var r=t+1;r<this.rows.length;r++)i.uid===this.rows[r].parentUid&&(this.rows[r].visible=i.isExpand)}},e}(Je),Li=function(){function s(e,t){var i=this;this.rows=[],this.freezeRows=[],this.movableRows=[],this.freezeRowElements=[],this.currentInfo={},this.prevCurrentView=[],this.isLoaded=!0,this.viewColIndexes=[],this.drop=function(r){i.parent.notify(ei,{target:r.target,droppedElement:r.droppedElement}),(0,l.Od)(r.droppedElement)},this.infiniteCache={},this.isRemove=!1,this.visibleRows=[],this.visibleFrozenRows=[],this.rightFreezeRows=[],this.isAddRows=!1,this.isInfiniteFreeze=!1,this.useGroupCache=!1,this.rafCallback=function(r){var n=r;return function(){if(i.parent.isFrozenGrid()&&i.parent.enableVirtualization){var o=r.tableName;if(i.isLoaded=i.parent.getFrozenMode()===B?"frozen-right"===o:"movable"===o,i.parent.enableColumnVirtualization&&"virtualscroll"===r.requestType&&i.isLoaded){var a=[].slice.call(i.parent.getMovableVirtualHeader().getElementsByClassName(G)),h=[].slice.call(i.parent.getFrozenVirtualHeader().getElementsByClassName(G));i.isLoaded=a.length===h.length}}if(i.ariaService.setBusy(i.getPanel().querySelector("."+ie),!1),!i.parent.isDestroyed){var d=i.rows.slice(0);if(i.parent.enableInfiniteScrolling){if(i.parent.groupSettings.enableLazyLoading)for(var p=0;p<i.visibleRows.length;p++)i.setRowsInLazyGroup(i.visibleRows[p],p);if(d=i.parent.getRowsObject(),i.parent.infiniteScrollSettings.enableCache&&n.prevPage){var u=i.parent.infiniteScrollSettings.maxBlocks;d=[];for(var f=parseInt(i.rowElements[0].getAttribute("data-rowindex"),10)+1,v=(p=0,Math.ceil(f/i.parent.pageSettings.pageSize));p<u;p++,v++)i.infiniteCache[v]&&(d=d.concat(i.infiniteCache[v]))}}if(i.parent.isFrozenGrid()&&(d=r.isFrozen?i.freezeRows:r.renderFrozenRightContent?i.parent.getFrozenRightRowsObject():i.movableRows),i.parent.notify(ee,{rows:d,args:n}),i.isLoaded&&(i.parent.isManualRefresh=!1,i.parent.enableInfiniteScrolling&&i.parent.groupSettings.enableLazyLoading&&"sorting"===r.requestType&&(i.parent.infiniteScrollModule.groupCaptionAction=void 0),i.parent.trigger(Te,{},function(){i.parent.allowTextWrap&&i.parent.notify(Be,{case:"textwrap"})})),n){var m=(n.requestType||"").toLowerCase()+"-complete";i.parent.notify(m,n),"batchsave"===r.requestType&&(r.cancel=!1,i.parent.trigger(H,r))}i.isLoaded&&i.parent.hideSpinner()}}},this.parent=e,this.serviceLocator=t,this.ariaService=this.serviceLocator.getService("ariaService"),this.parent.enableDeepCompare=this.parent.getDataModule().isRemote(),this.generator=this.getModelGenerator(),!this.parent.isDestroyed&&(!this.parent.enableColumnVirtualization&&!this.parent.enableVirtualization&&!this.parent.groupSettings.enableLazyLoading&&this.parent.on(je,this.setVisible,this),this.parent.on(tr,this.colGroupRefresh,this),this.parent.on(X,this.enableAfterRender,this),this.parent.on("refresh-infinite-mode-blocks",this.refreshContentRows,this),this.parent.on(ti,this.beforeCellFocused,this),this.parent.on(V,this.droppableDestroy,this))}return s.prototype.beforeCellFocused=function(e){this.pressedKey=!e.byKey||"upArrow"!==e.keyArgs.action&&"downArrow"!==e.keyArgs.action?void 0:e.keyArgs.action},s.prototype.renderPanel=function(){var e=this.parent,t=this.parent.element.querySelector("."+ae);if(t)return this.ariaService.setOptions(this.parent.element.querySelector("."+ie),{busy:!1}),void this.setPanel(t);t=this.parent.createElement("div",{className:ae});var i=this.parent.createElement("div",{className:ie});this.ariaService.setOptions(i,{busy:!1}),t.appendChild(i),this.setPanel(t),e.element.appendChild(t)},s.prototype.renderTable=function(){var e=this.getPanel(),t=e.querySelector(".e-virtualtable"),i=e.querySelector(".e-virtualtrack");this.parent.enableVirtualization&&!(0,l.le)(t)&&!(0,l.le)(i)&&((0,l.Od)(t),(0,l.Od)(i)),e.appendChild(this.createContentTable("_content_table")),this.setTable(e.querySelector("."+Z)),this.ariaService.setOptions(this.getTable(),{multiselectable:"Multiple"===this.parent.selectionSettings.type}),this.initializeContentDrop(),this.parent.frozenRows&&this.parent.getHeaderContent().classList.add("e-frozenhdrcont")},s.prototype.createContentTable=function(e){var t=this.getPanel().firstElementChild;this.getTable()&&(0,l.Od)(this.getTable());var i=t.querySelector("."+Z)?t.querySelector("."+Z):this.parent.createElement("table",{className:Z,attrs:{cellspacing:"0.25px",role:"grid",id:this.parent.element.id+e}});return this.setColGroup(this.parent.getHeaderTable().querySelector(q).cloneNode(!0)),i.appendChild(this.getColGroup()),i.appendChild(this.parent.createElement(I,{attrs:{role:"rowgroup"}})),t.appendChild(i),t},s.prototype.refreshContentRows=function(e){var t=this;void 0===e&&(e={});var i=this.parent;if(0!==i.currentViewData.length){var r=this.currentMovableRows||i.currentViewData,n=this.parent.contentModule,o=i.isReact&&!(0,l.le)(i.rowTemplate),a=o?i.createElement(I,{attrs:{role:"rowgroup"}}):document.createDocumentFragment();this.initialPageRecords||(this.initialPageRecords=(0,l.l7)([],r));var p,c,g,h=o?i.createElement(I,{attrs:{role:"rowgroup"}}):document.createDocumentFragment(),d=i.getColumns(),u=i.getFrozenColumns(),f=this.parent.isFrozenGrid(),v=new ke(this.serviceLocator,null,this.parent),m=this.parent.enableInfiniteScrolling&&"infiniteScroll"===e.requestType;i.notify("destroy-child-grid",{}),this.rowElements=[],this.rows=[];var S,R,F,C=this.getPanel().querySelector("."+He),b=this.getPanel().querySelector("."+_),y=this.getPanel().querySelector("."+ie);he(i)&&["sorting","filtering","searching","grouping","ungrouping","reorder"].some(function(vi){return e.requestType===vi})&&this.emptyVcRows(),this.parent.enableVirtualization&&this.parent.isFrozenGrid()?(this.parent.enableColumnVirtualization&&"virtualscroll"===e.requestType&&"X"===e.virtualInfo.sentinelInfo.axis&&(F=this.parent.contentModule.generateRows(r,e),e.renderMovableContent=!0),F=this.parent.contentModule.generateRows(r,e)):(F=this.checkCache(F,e),!this.isAddRows&&!this.useGroupCache&&(F=this.generator.generateRows(r,e))),this.setGroupCache(F,e),this.parent.notify("set-infinite-cache",{isInfiniteScroll:m,modelData:F,args:e});var D=F[0].cells[0].index;f&&(R=n.setTbody(F,e),S=n.getTbody(R));var L=this.parent.getFrozenMode()===B&&R===Q;if("infiniteScroll"!==e.requestType&&this.parent.registeredTemplate&&this.parent.registeredTemplate.template&&!e.isFrozen&&!L){for(var k=[],E=0;E<this.parent.registeredTemplate.template.length;E++)for(var T=0;T<this.parent.registeredTemplate.template[E].rootNodes.length;T++)(0,l.le)(this.parent.registeredTemplate.template[E].rootNodes[T].parentNode)&&k.push(this.parent.registeredTemplate.template[E]);this.parent.destroyTemplate(["template"],k)}!this.parent.isReact&&!this.parent.isVue||"infiniteScroll"===e.requestType||e.isFrozen||Wi(this.parent,[this.parent.isVue?"template":"columnTemplate","rowTemplate","detailTemplate","captionTemplate","commandsTemplate","groupFooterTemplate","groupCaptionTemplate"]),this.parent.enableColumnVirtualization&&new vo(this.serviceLocator,this.parent).updateVirtualCells(F),f||(this.tbody=this.getTable().querySelector(I));var $=0,J=!0;if(he(i)&&i.vcRows.length){var ge=(0,l.le)(e.virtualInfo.offsets)?(0,l.le)(e.scrollTop)?0:e.scrollTop.top:e.virtualInfo.offsets.top;if(0!==ge){for(var be=i.vGroupOffsets,re=i.pageSettings.pageSize/2,pt=Object.keys(be).map(function(vi){return be[vi]}),Fe=0;Fe<pt.length;Fe++)if(ge<pt[Fe]){if((0,l.le)(e.virtualInfo)||"up"!==e.virtualInfo.direction){$=Fe*re,(this.parent.contentModule.isEndBlock(Fe)||this.parent.contentModule.isEndBlock(Fe+1))&&(e.virtualInfo.blockIndexes=[Fe,Fe+1]);break}$=Fe>0?(Fe-1)*re:Fe*re;break}Math.round(ge+this.contentPanel.firstElementChild.offsetHeight)>=this.contentPanel.firstElementChild.scrollHeight&&!e.rowObject&&(J=!1)}}var Et=i.frozenRows&&!i.isFrozenGrid()&&this.parent.enableVirtualization&&"reorder"===e.requestType;if(i.frozenRows&&"virtualscroll"===e.requestType&&"X"===e.virtualInfo.sentinelInfo.axis||Et){var Dt=e.virtualInfo.blockIndexes,gi=e.virtualInfo.page;e.virtualInfo.blockIndexes=[1,2],Et&&(e.virtualInfo.page=1);var Zi=this.vgenerator.generateRows(Et?this.initialPageRecords:r,e);for(Zi.splice(this.parent.frozenRows),E=0;E<this.parent.frozenRows;E++)Zi[E].cells.splice(0,this.parent.getFrozenColumns()),p=v.render(Zi[E],d),h.appendChild(p);e.virtualInfo.blockIndexes=Dt,e.virtualInfo.page=gi,Et&&1===e.virtualInfo.page&&F.splice(0,this.parent.frozenRows)}this.virtualFrozenHdrRefresh(h,F,v,e,r,d),this.parent.groupSettings.enableLazyLoading&&!this.useGroupCache&&this.parent.groupSettings.columns.length&&(this.parent.contentModule.refRowsObj[this.parent.pageSettings.currentPage]=[]),this.parent.enableInfiniteScrolling&&this.parent.groupSettings.enableLazyLoading&&"delete"===e.requestType&&(this.visibleRows=[]),E=$;for(var ps=F.length;E<ps;E++)if(this.rows.push(F[E]),!this.parent.groupSettings.enableLazyLoading||this.useGroupCache||!this.parent.groupSettings.columns.length||(this.parent.contentModule.refRowsObj[this.parent.pageSettings.currentPage].push(F[E]),this.setRowsInLazyGroup(F[E],E),!(0,l.le)(F[E].indent))){if(this.setInfiniteVisibleRows(e,F[E],R),he(i)&&e.virtualInfo&&e.virtualInfo.blockIndexes&&this.rowElements.length>=e.virtualInfo.blockIndexes.length*this.parent.contentModule.getBlockSize()&&J){this.parent.currentViewData.records=this.rows.map(function(cs){return cs.data});break}if(i.rowTemplate){var Ur=i.element.id+"rowTemplate",et=void 0;if(i.isReact){var Cp=i.frozenRows&&E<i.frozenRows,bp=(0,l.l7)({index:E},r[E]);i.getRowTemplate()(bp,i,"rowTemplate",Ur,null,null,Cp?h:a),i.renderTemplates()}else et=i.getRowTemplate()((0,l.l7)({index:E},r[E]),i,"rowTemplate",Ur,void 0,void 0,void 0,this.parent.root);if(i.isReact||"TBODY"!==et[0].tagName)i.frozenRows&&E<i.frozenRows?p=i.isReact?h.lastElementChild:ye(h,et):(i.isReact||(p=ye(a,et)),g=i.isReact?a.lastElementChild:p.lastElementChild);else{for(T=0;T<et.length;T++){var Ia="tr"===et[T].nodeName.toLowerCase();(Ia||et[T].querySelectorAll&&et[T].querySelectorAll("tr").length)&&(p=Ia?et[T]:et[T].querySelector("tr"))}i.frozenRows&&E<i.frozenRows?h.appendChild(p):a.appendChild(p)}this.parent.trigger(vs,{data:F[E].data,row:g||p})}else{p=v.render(F[E],d);var Qi=this.ensureFrozenHeaderRender(e);i.frozenRows&&E<i.frozenRows&&!m&&"virtualscroll"!==e.requestType&&Qi&&this.ensureVirtualFrozenHeaderRender(e)?h.appendChild(p):a.appendChild(p),F[E].isExpand&&i.notify("expandchildgrid",p.cells[i.groupSettings.columns.length])}F[E].isDataRow&&this.rowElements.push(p),this.ariaService.setOptions(this.getTable(),{colcount:i.getColumns().length.toString()})}if(this.parent.enableInfiniteScrolling&&this.parent.groupSettings.enableLazyLoading&&(this.parent.contentModule.refRowsObj[this.parent.pageSettings.currentPage]=this.parent.contentModule.groupCache[this.parent.pageSettings.currentPage]),this.parent.groupSettings.enableLazyLoading&&!this.useGroupCache&&this.parent.groupSettings.columns.length&&this.parent.notify(Ht,{rows:this.parent.contentModule.refRowsObj[this.parent.pageSettings.currentPage]}),f&&n.splitRows(R),i.removeMaskRow(),i.frozenRows&&"virtualscroll"!==e.requestType&&!m&&this.ensureVirtualFrozenHeaderRender(e)||"virtualscroll"===e.requestType&&e.virtualInfo.sentinelInfo&&"X"===e.virtualInfo.sentinelInfo.axis)if(c=f?n.getFrozenHeader(R):i.getHeaderTable().querySelector(I),o){var Sp=c.parentElement;(0,l.Od)(c),Sp.appendChild(h)}else c.innerHTML="",c.appendChild(h);!i.enableVirtualization&&i.frozenRows&&0===D&&y.offsetHeight===Number(i.height)&&(y.style.height=y.offsetHeight-c.offsetHeight+"px"),e.rows=this.rows.slice(0),f&&n.setIsFrozen(e,R),this.index=D,Eo(function(){t.parent.notify(Us,e);var vi=t.parent.enableVirtualization&&t.parent.isFrozenGrid();if(!t.parent.enableVirtualization&&!m&&(t.parent.isFrozenGrid()?((0,l.Od)(n.getTbody(R)),S=t.parent.createElement(I,{attrs:{role:"rowgroup"}})):(t.tbody.innerHTML="",(0,l.Od)(t.tbody),t.tbody=t.parent.createElement(I,{attrs:{role:"rowgroup"}}))),!f||vi||t.parent.enableInfiniteScrolling)if(i.rowTemplate&&(0,l.tx)(i.element.id+"rowTemplate","RowTemplate",i),vi){if(e.renderFrozenRightContent){var cs=i.getContent().querySelector(".e-frozen-right-content").querySelector(I);t.appendContent(cs,a,e)}else e.renderMovableContent?(t.appendContent(b.querySelector(I),a,e),e.renderMovableContent=!1):t.appendContent(C.querySelector(I),a,e);t.parent.getFrozenColumns()||n.renderNextFrozentPart(e,R)}else!(0,l.le)(t.parent.infiniteScrollModule)&&t.parent.enableInfiniteScrolling?(t.isAddRows=!1,t.parent.notify("remove-infinite-rows",{args:e}),t.parent.notify("append-infinite-content",{tbody:S||t.tbody,frag:a,args:e,rows:t.rows,rowElements:t.rowElements,visibleRows:t.visibleRows,tableName:R}),!u&&f&&(i.getFrozenMode()!==B&&(R===te||R===Q)||i.getFrozenMode()===B&&(R===te||"movable"===R))&&t.refreshContentRows((0,l.l7)({},e))):(t.useGroupCache=!1,t.appendContent(t.tbody,a,e));else t.appendContent(S,a,e,R);u&&n.renderNextFrozentPart(e,R),a=null},this.rafCallback((0,l.l7)({},e)))}},s.prototype.emptyVcRows=function(){this.parent.vcRows=[],this.parent.vRows=[]},s.prototype.appendContent=function(e,t,i,r){this.parent.isReact&&!(0,l.le)(this.parent.rowTemplate)?this.getTable().appendChild(t):(e.appendChild(t),this.getTable().appendChild(e))},s.prototype.setRowsInLazyGroup=function(e,t){this.parent.groupSettings.enableLazyLoading&&!this.useGroupCache&&this.parent.groupSettings.columns.length&&this.parent.contentModule.maintainRows(e,t)},s.prototype.setGroupCache=function(e,t){!this.useGroupCache&&this.parent.groupSettings.enableLazyLoading&&this.parent.notify("group-cache",{args:t,data:e})},s.prototype.ensureFrozenHeaderRender=function(e){return!(this.parent.enableVirtualization&&("reorder"===e.requestType||"refresh"===e.requestType)||this.parent.infiniteScrollSettings.enableCache&&this.parent.frozenRows&&"delete"===this.parent.infiniteScrollModule.requestType&&1!==this.parent.pageSettings.currentPage)},s.prototype.ensureVirtualFrozenHeaderRender=function(e){return!(this.parent.enableVirtualization&&"delete"===e.requestType)},s.prototype.checkCache=function(e,t){if(this.parent.infiniteScrollSettings.enableCache&&"infiniteScroll"===t.requestType){var i=t.isFrozen?1:0,r=this.parent.isFrozenGrid();if(this.isAddRows=!(0,l.le)(this.infiniteCache[this.parent.pageSettings.currentPage]),r&&!(0,l.le)(this.infiniteCache[this.parent.pageSettings.currentPage])&&(this.isAddRows=0!==this.infiniteCache[this.parent.pageSettings.currentPage][i].length),this.isAddRows){var n=r?this.infiniteCache[this.parent.pageSettings.currentPage][i]:this.infiniteCache[this.parent.pageSettings.currentPage];e=1===this.parent.pageSettings.currentPage?n.slice(this.parent.frozenRows):n}return e}return this.parent.groupSettings.enableLazyLoading&&this.parent.groupSettings.columns.length&&("paging"===t.requestType||"columnstate"===t.requestType||"reorder"===t.requestType)&&this.parent.contentModule.getGroupCache()[this.parent.pageSettings.currentPage]?(this.useGroupCache=!0,this.parent.contentModule.initialGroupRows("reorder"===t.requestType)):null},s.prototype.setInfiniteVisibleRows=function(e,t,i){var r=this.parent.isFrozenGrid();this.parent.enableInfiniteScrolling&&!this.parent.infiniteScrollSettings.enableCache&&(r?i===te||"Right"===this.parent.getFrozenMode()&&i===Q?this.visibleFrozenRows.push(t):"movable"===i?this.visibleRows.push(t):this.rightFreezeRows.push(t):this.parent.infiniteScrollSettings.enableCache||this.visibleRows.push(t))},s.prototype.getCurrentBlockInfiniteRecords=function(e){var t=[];if(this.parent.infiniteScrollSettings.enableCache){if(!Object.keys(this.infiniteCache).length)return[];var i=this.parent.isFrozenGrid(),r=this.parent.getRows(),n=parseInt(r[this.parent.frozenRows].getAttribute(O),10),o=Math.ceil((n+1)/this.parent.pageSettings.pageSize);n=parseInt(r[r.length-1].getAttribute(O),10);var a=Math.ceil(n/this.parent.pageSettings.pageSize);if(i){for(var h=e?0:1,d=o;d<=a;d++)t=t.length?t.concat(this.infiniteCache[d][h]):this.infiniteCache[d][h];this.parent.frozenRows&&this.parent.pageSettings.currentPage>1&&(t=this.infiniteCache[1][h].slice(0,this.parent.frozenRows).concat(t))}else{for(d=o;d<=a;d++)t=t.length?t.concat(this.infiniteCache[d]):this.infiniteCache[d];this.parent.frozenRows&&this.parent.pageSettings.currentPage>1&&(t=this.infiniteCache[1].slice(0,this.parent.frozenRows).concat(t))}}return t},s.prototype.getReorderedVFRows=function(e){return this.parent.contentModule.getReorderedFrozenRows(e)},s.prototype.getReorderedRows=function(e){return this.parent.contentModule.getReorderedFrozenRows(e)},s.prototype.virtualFrozenHdrRefresh=function(e,t,i,r,n,o){if(this.parent.frozenRows&&this.parent.enableVirtualization&&("reorder"===r.requestType||"refresh"===r.requestType)){var a=void 0,h=[];this.parent.isFrozenGrid()?(this.currentMovableRows=n,h=this.getReorderedVFRows(r)):h=this.getReorderedRows(r);for(var d=0;d<h.length;d++)a=i.render(h[d],o),e.appendChild(a);1===r.virtualInfo.page&&t.splice(0,this.parent.frozenRows),r.renderMovableContent&&(this.parent.currentViewData=this.currentMovableRows,this.currentMovableRows=null)}},s.prototype.getInfiniteRows=function(){var e=[],t=this.parent.isFrozenGrid();if(this.parent.enableInfiniteScrolling)if(this.parent.infiniteScrollSettings.enableCache)for(var i=Object.keys(this.infiniteCache),r=0;r<i.length;r++)e=e.concat(t?this.infiniteCache[i[r]][0]:this.infiniteCache[i[r]]);else e=t?this.visibleFrozenRows:this.visibleRows;return e},s.prototype.getInfiniteMovableRows=function(){var e=this.getCurrentBlockInfiniteRecords();return this.parent.enableInfiniteScrolling?e.length?e:this.visibleRows:[]},s.prototype.getPanel=function(){return this.contentPanel},s.prototype.setPanel=function(e){this.contentPanel=e},s.prototype.getTable=function(){return this.contentTable},s.prototype.setTable=function(e){this.contentTable=e},s.prototype.getRows=function(){var e=this.getInfiniteRows();return e.length?e:this.parent.getFrozenColumns()?this.freezeRows:this.rows},s.prototype.getMovableRows=function(){var e=this.getInfiniteMovableRows();return e.length?e:this.movableRows},s.prototype.getRowElements=function(){return this.parent.getFrozenColumns()?this.freezeRowElements:this.rowElements},s.prototype.getMovableRowElements=function(){return this.rowElements},s.prototype.setRowElements=function(e){this.rowElements=e},s.prototype.getColGroup=function(){return this.colgroup},s.prototype.setColGroup=function(e){return(0,l.le)(e)||(e.id="content-"+e.id),this.colgroup=e},s.prototype.setVisible=function(e){var m,t=this.parent,i=this.parent.isFrozenGrid(),r=t.getFrozenColumns(),n=[];if(i){var o=this.freezeRows,a=this.movableRows,h=o.length,d=void 0,p=[];t.getFrozenMode()===B&&(p=t.getFrozenRightRowsObject());for(var c=0,u=void 0;c<h;c++){d=a[c].cells.length;var f=p.length?p[c].cells.length:0;u=o[c].clone();for(var g=0;g<d;g++)u.cells.push(a[c].cells[g]);for(var v=0;v<f;v++)u.cells.push(p[c].cells[v]);n.push(u)}}else n=this.getRows();n.some(function(be){return be.isDataRow&&(m=be),be.isDataRow});var C=!0;!t.groupSettings.columns.length&&m&&(C=!1);for(var b=t.getDataRows(),R=this.infiniteRowVisibility()||this.rows.filter(function(be){return!be.isDetailRow}),F=0,D=e.length;F<D;F++){var L=e[F],k=this.parent.getNormalizedColumnIndex(L.uid),E=this.parent.getColumnIndexByUid(L.uid),T=!0===L.visible?"":"none";if(-1!==k&&m&&k<m.cells.length)if(i)if("movable"!==L.getFreezeTableName())if(L.getFreezeTableName()===Q){E=k-=this.parent.getFrozenLeftColumnsCount()+this.parent.getMovableColumnsCount();var $=this.parent.getContent().querySelector(".e-frozen-right-content").querySelector(q);(0,l.V7)($.childNodes[k],{display:T}),R=t.getFrozenRightRowsObject(),b=t.getFrozenRightDataRows()}else(0,l.V7)(this.getColGroup().childNodes[k],{display:T}),R=this.infiniteRowVisibility(!0)||this.freezeRows,b=t.getDataRows();else{var se=t.getContent().querySelector("."+_).querySelector(q);E=k=k-r-this.parent.getFrozenLeftColumnsCount(),(0,l.V7)(se.childNodes[k],{display:T}),b=t.getMovableDataRows(),R=this.infiniteRowVisibility()||this.movableRows}else(0,l.V7)(this.getColGroup().childNodes[k],{display:T});C||(this.setDisplayNone(b,E,T,R),i&&this.parent.notify(Be,{case:"refreshHeight",isModeChg:!0})),!this.parent.invokedFromMedia&&L.hideAtMedia&&this.parent.updateMediaColumns(L),this.parent.invokedFromMedia=!1}C?this.refreshContentRows({requestType:"refresh"}):this.parent.getFrozenColumns()?(this.parent.notify(xi,{rows:this.freezeRows,args:{isFrozen:!0,rows:this.freezeRows}}),this.parent.notify(xi,{rows:this.movableRows,args:{isFrozen:!1,rows:this.movableRows}})):this.parent.notify(xi,{rows:R,args:{}})},s.prototype.setDisplayNone=function(e,t,i,r){(function(s,e,t,i,r,n){for(var o=Object.keys(s),a=0;a<o.length;a++){var h=s[o[a]].querySelectorAll("td.e-rowcell")[e];if(s[o[a]].querySelectorAll("td.e-rowcell").length&&h)if((0,l.V7)(s[o[a]].querySelectorAll("td.e-rowcell")[e],{display:t}),s[o[a]].querySelectorAll("td.e-rowcell")[e].classList.contains("e-hide")&&(0,l.IV)([s[o[a]].querySelectorAll("td.e-rowcell")[e]],["e-hide"]),n&&r.isRowDragable()){var d=r.getFrozenColumns()?e:e+1;i[o[a]].cells[d].visible=""===t}else i[o[a]].cells[e].visible=""===t}})(e,t,i,r,this.parent,this.parent.isRowDragable()),this.parent.notify("infinite-show-hide",{visible:i,index:t,isFreeze:this.isInfiniteFreeze})},s.prototype.infiniteRowVisibility=function(e){var t;return this.parent.enableInfiniteScrolling&&(this.isInfiniteFreeze=e,t=this.parent.infiniteScrollSettings.enableCache?e?this.getCurrentBlockInfiniteRecords(!0):this.getCurrentBlockInfiniteRecords():e?this.visibleFrozenRows:this.visibleRows),t},s.prototype.colGroupRefresh=function(){if(this.getColGroup()){var e;e=this.parent.enableColumnVirtualization&&this.parent.getFrozenColumns()&&this.parent.contentModule.isXaxis()?this.parent.getMovableVirtualHeader().querySelector(q+":not(.e-masked-colgroup)").cloneNode(!0):this.getHeaderColGroup(),this.getTable().replaceChild(e,this.getColGroup()),this.setColGroup(e)}},s.prototype.getHeaderColGroup=function(){return this.parent.element.querySelector("."+pe).querySelector(q+":not(.e-masked-colgroup)").cloneNode(!0)},s.prototype.initializeContentDrop=function(){this.droppable=new l.bK(this.parent.element,{accept:".e-dragclone",drop:this.drop})},s.prototype.droppableDestroy=function(){this.droppable&&!this.droppable.isDestroyed&&this.droppable.destroy()},s.prototype.canSkip=function(e,t,i){return(0,l.le)(t)||(0,l.le)(e.visible)||t.cells[i].visible===e.visible},s.prototype.getModelGenerator=function(){return this.generator=this.parent.allowGrouping?new Sr(this.parent):new Je(this.parent)},s.prototype.renderEmpty=function(e){this.getTable().appendChild(e),this.parent.frozenRows&&(this.parent.getHeaderContent().querySelector(I).innerHTML="")},s.prototype.setSelection=function(e,t,i){this.parent.notify("set-freeze-selection",{uid:e,set:t,clearAll:i});var r=this.parent.isFrozenGrid();if(!r||!this.parent.enableVirtualization){if(r)for(var n=this.getMovableRows().filter(function(c){return i||e===c.uid}),o=0;o<n.length;o++)n[o].isSelected=t;for(var a=this.getRows().filter(function(c){return i||e===c.uid}),h=0;h<a.length;h++){a[h].isSelected=t;for(var d=a[h].cells,p=0;p<d.length;p++)d[p].isSelected=t}}},s.prototype.getRowByIndex=function(e){return e=this.getInfiniteRowIndex(e),this.parent.getDataRows()[e]},s.prototype.getInfiniteRowIndex=function(e){if(this.parent.infiniteScrollSettings.enableCache){var t=this.parent.frozenRows,i=t>e?0:t,r=parseInt(this.parent.getRows()[i].getAttribute(O),10);e=t>e?e:e-r+t}return e},s.prototype.getVirtualRowIndex=function(e){return e},s.prototype.getMovableRowByIndex=function(e){return e=this.getInfiniteRowIndex(e),this.parent.getMovableDataRows()[e]},s.prototype.enableAfterRender=function(e){"group"===e.module&&e.enable&&(this.generator=this.getModelGenerator())},s.prototype.setRowObjects=function(e){this.rows=e},s.prototype.immutableModeRendering=function(e){var t=this;void 0===e&&(e={});var i=this.parent;i.hideSpinner();var r=i.getPrimaryKeyFieldNames()[0],n={},o={},a=[],h={},d=i.getRowsObject().slice(),p=this.getBatchEditedRecords(r,d),c={},u=0!==Object.keys(p).length;if(i.getContent().querySelector(".e-emptyrow")||"reorder"===e.requestType||this.parent.groupSettings.columns.length)this.refreshContentRows(e);else{if(0===i.currentViewData.length)return;var f={},g=i.createElement(I,{attrs:{role:"rowgroup"}}),v=i.currentViewData,m=[].slice.call(this.getTable().querySelector(I).children);if(this.prevCurrentView.length){var C=this.prevCurrentView.length,b=v.length;if(C===b)for(var y=0;y<b;y++)"Batch"===this.parent.editSettings.mode&&m[y].classList.contains("e-insertedrow")?(m.splice(y,1),--y):(o[v[y][r]]=n[this.prevCurrentView[y][r]]=y,c[y]=v[y][r],f[d[y].uid]=m[y],h[y]=this.prevCurrentView[y][r]);else{for(y=0;y<b;y++)o[v[y][r]]=y,c[y]=v[y][r];for(y=0;y<C;y++)"Batch"===this.parent.editSettings.mode&&m[y].classList.contains("e-insertedrow")?(m.splice(y,1),--y):(f[d[y].uid]=m[y],n[this.prevCurrentView[y][r]]=y,h[y]=this.prevCurrentView[y][r])}}for(y=0;y<v.length;y++){var S=n[v[y][r]];if((0,l.le)(S)){var D=new ke(this.serviceLocator,null,i),L=this.generator.generateRows([v[y]]);a.push(L[0]);var F=D.render(L[0],i.getColumns());g.appendChild(F),this.refreshImmutableContent(y,F,a[y])}else{var R=!1;if(this.parent.enableDeepCompare&&(R=this.objectEqualityChecker(this.prevCurrentView[S],v[y])),F=f[d[S].uid],a.push(d[S]),this.rowElements[S]&&this.rowElements[S].getAttribute("data-uid")===a[y].uid&&(u&&(0,l.le)(p[c[y]])||!u&&(R||this.prevCurrentView[S]===v[y]))){S!==y&&this.refreshImmutableContent(y,F,a[y]),g.appendChild(F);continue}(u&&!(0,l.le)(p[c[y]])||!this.parent.enableDeepCompare&&v[y]!==this.prevCurrentView[S]||this.parent.enableDeepCompare&&!R)&&d[S].setRowValue(v[y]),g.appendChild(F),this.refreshImmutableContent(y,F,a[y])}}if(this.rows=a,this.rowElements=[].slice.call(g.children),(0,l.Od)(this.getTable().querySelector(I)),this.getTable().appendChild(g),this.parent.trigger(Te,{},function(){t.parent.allowTextWrap&&t.parent.notify(Be,{case:"textwrap"})}),e){var k=(e.requestType||"").toLowerCase()+"-complete";this.parent.notify(k,e)}}},s.prototype.objectEqualityChecker=function(e,t){for(var i=Object.keys(e),r=!0,n=0;n<i.length;n++)if(!(e[i[n]]===t[i[n]]||e[i[n]]instanceof Date&&t[i[n]]instanceof Date&&e[i[n]].getTime()===t[i[n]].getTime())){r=!1;break}return r},s.prototype.getBatchEditedRecords=function(e,t){var i={},r=this.parent.getBatchChanges(),n=[],o=[];Object.keys(r).length&&(n=r.changedRecords,o=r.addedRecords);var a={cancel:!1};this.parent.notify("immutable-batch-cancel",{rows:t,args:a}),o.length&&("Bottom"===this.parent.editSettings.newRowPosition?t.splice(t.length-1,o.length):a.cancel||t.splice(0,o.length));for(var h=0;h<n.length;h++)i[n[h][e]]=h;return i},s.prototype.refreshImmutableContent=function(e,t,i){i.isAltRow=!!this.parent.enableAltRow&&e%2!=0,i.isAltRow?t.classList.add("e-altrow"):t.classList.remove("e-altrow"),i.index=e,i.edit=void 0,i.isDirty=!1,t.setAttribute(O,e.toString()),t.setAttribute(Ei,(e+1).toString()),this.updateCellIndex(t,e)},s.prototype.updateCellIndex=function(e,t){for(var i=0;i<e.cells.length;i++)e.cells[i].setAttribute("index",t.toString())},s}(),jn=function(){function s(e,t){var i=this;this.frzIdx=0,this.notfrzIdx=0,this.isFirstCol=!1,this.isReplaceDragEle=!0,this.helper=function(r){var n=i.parent,o=i.draggable.currentStateTarget,a=w(o,"e-headercell");if(!n.allowReordering&&!n.allowGrouping||!(0,l.le)(a)&&a.getElementsByClassName("e-checkselectall").length>0)return!1;var h=i.parent.createElement("div",{className:"e-cloneproperties e-dragclone e-headerclone"}),d=o.classList.contains("e-headercell")?o:a;if(!d||!n.allowReordering&&d.classList.contains("e-stackedheadercell"))return!1;var u,p=d.offsetHeight,c=d.querySelector(".e-headercelldiv")||d.querySelector(".e-stackedheadercelldiv");if(c){if(u=d.querySelector(".e-stackedheadercelldiv")?n.getStackedHeaderColumnByHeaderText(c.innerText.trim(),n.columns):n.getColumnByUid(c.getAttribute("e-mappinguid")),i.column=u,i.column.lockColumn)return!1;h.setAttribute("e-mappinguid",i.column.uid)}if(u&&!(0,l.le)(u.headerTemplate))if((0,l.le)(u.headerTemplate))h.innerHTML=u.headerTemplate;else{var f=n.getColumnIndexByField(u.field);ye(h,u.getHeaderTemplate()((0,l.l7)({index:f},u),n,"headerTemplate"))}else h.innerHTML=c?u.headerText:d.firstElementChild.innerHTML;return h.style.width=d.offsetWidth+"px",h.style.height=d.offsetHeight+"px",h.style.lineHeight=(p-6).toString()+"px",n.element.appendChild(h),h},this.dragStart=function(r){var n=i.parent;n.element.querySelector(".e-gridpopup").style.display="none",n.notify($t,{target:i.draggable.currentStateTarget,column:i.column,event:r.event})},this.drag=function(r){var n=i.parent,o=r.target;if(o){var a=(0,l.oq)(o,".e-grid"),h=i.parent.element.querySelector(".e-cloneproperties");if(!(a&&a.getAttribute("id")===n.element.getAttribute("id")||((0,l.s1)(h,["e-notallowedcur"],["e-defaultcur"]),n.allowReordering&&(n.element.querySelector(".e-reorderuparrow").style.display="none",n.element.querySelector(".e-reorderdownarrow").style.display="none"),n.groupSettings.allowReordering)))return;n.notify(Lt,{target:r.target,column:i.column,event:r.event})}},this.dragStop=function(r){var o,n=i.parent;n.element.querySelector(".e-gridpopup").style.display="none",(!w(r.target,"e-headercell")&&!w(r.target,"e-groupdroparea")||!n.allowReordering&&w(r.target,"e-headercell")||!r.helper.getAttribute("e-mappinguid")&&w(r.target,"e-groupdroparea"))&&((0,l.Od)(r.helper),o=!0),n.notify("column-drag-stop",{target:r.target,event:r.event,column:i.column,cancel:o})},this.drop=function(r){var n=i.parent,o=r.droppedElement.getAttribute("e-mappinguid"),a=(0,l.oq)(r.target,".e-grid");(0,l.Od)(r.droppedElement),!(a&&a.getAttribute("id")!==n.element.getAttribute("id")||!n.allowReordering&&!n.allowGrouping)&&n.notify(ri,{target:r.target,uid:o,droppedElement:r.droppedElement})},this.parent=e,this.serviceLocator=t,this.ariaService=this.serviceLocator.getService("ariaService"),this.widthService=this.serviceLocator.getService("widthService"),!this.parent.isDestroyed&&(!this.parent.enableColumnVirtualization&&!this.parent.getFrozenLeftColumnsCount()&&!this.parent.getFrozenRightColumnsCount()&&this.parent.on(je,this.setVisible,this),this.parent.on(ii,this.colPosRefresh,this),this.parent.on(we,this.renderCustomToolbar,this),"Vertical"===this.parent.rowRenderingMode&&this.parent.on(X,this.updateCustomResponsiveToolbar,this))}return s.prototype.renderPanel=function(){var e=this.parent.element.querySelector("."+pe),t=null!=e;e=t?e:this.parent.createElement("div",{className:"e-gridheader"});var i=t?e.querySelector("."+le):this.parent.createElement("div",{className:le});this.toggleStackClass(e),e.appendChild(i),this.setPanel(e),t||this.parent.element.appendChild(e)},s.prototype.renderTable=function(){var e=this.getPanel();e.appendChild(this.createHeaderTable()),this.setTable(e.querySelector("."+Z)),!this.parent.getFrozenColumns()&&!this.parent.getFrozenRightColumnsCount()&&!this.parent.getFrozenLeftColumnsCount()&&(this.initializeHeaderDrag(),this.initializeHeaderDrop()),this.parent.notify(ue,{rows:this.rows,args:{isFrozen:this.parent.isFrozenGrid()}})},s.prototype.getPanel=function(){return this.headerPanel},s.prototype.setPanel=function(e){this.headerPanel=e},s.prototype.getTable=function(){return this.headerTable},s.prototype.setTable=function(e){this.headerTable=e},s.prototype.getColGroup=function(){return this.colgroup},s.prototype.setColGroup=function(e){return this.colgroup=e},s.prototype.getRows=function(){return this.getTable().tHead.rows},s.prototype.createHeaderTable=function(){var e=this.createTable(),t=this.getPanel().querySelector("."+le);return t.appendChild(e),t},s.prototype.createHeader=function(e,t){void 0===e&&(e=null);var i=this.parent,r=i.isFrozenGrid();this.getTable()&&!r&&(0,l.Od)(this.getTable());var n=this.parent.createElement("table",{className:Z,attrs:{cellspacing:"0.25px",role:"grid"}}),o=t||(i.getFrozenLeftCount()?"frozen-left":"frozen-right"),a=this.createHeaderContent(o),h=a.thead,d=this.parent.createElement(I,{className:this.parent.frozenRows?"":"e-hide",attrs:{role:"rowgroup"}});this.caption=this.parent.createElement("caption",{innerHTML:this.parent.element.id+"_header_table",className:"e-hide"});for(var u,p=this.parent.createElement(q),c=this.parent.createElement("tr",{attrs:{role:"row"}}),f=this.rows=a.rows,g=0,v=f.length;g<v;g++)for(var m=0,C=f[g].cells.length;m<C;m++)u=this.parent.createElement("td"),c.appendChild(u);return(i.allowFiltering||i.allowSorting||i.allowGrouping)&&n.classList.add("e-sortfilter"),this.updateColGroup(p),d.appendChild(c),n.appendChild(this.setColGroup(p)),n.appendChild(h),n.appendChild(d),n.appendChild(this.caption),this.ariaService.setOptions(n,{colcount:i.getColumns().length.toString()}),n},s.prototype.createTable=function(e){return void 0===e&&(e=null),this.createHeader(e)},s.prototype.createHeaderContent=function(e){var t=this.parent,i=1,r=t.getFrozenMode(),n=t.getColumns(),o=this.parent.createElement("thead",{attrs:{role:"rowgroup"}}),a=this.parent.createElement("tr",{className:"e-columnheader",attrs:{role:"row"}}),h=new ke(this.serviceLocator,A.Header,t);h.element=a;var p,d=[];this.colDepth=Br(t.columns);for(var c=0,u=this.colDepth;c<u;c++)d[c]=this.generateRow(c),d[c].cells=[];"Right"!==r&&(d=this.ensureColumns(d)),d=this.getHeaderCells(d,e),"Right"===r&&(i=0,d=this.ensureColumns(d));var f=this.parent.getFrozenColumns();if(this.parent.isRowDragable()&&this.parent.isFrozenGrid()&&d[0].cells[i]){var g=d[0].cells[i].column.getFreezeTableName();"movable"===g||r===B&&g===Q?"Right"===r?d[0].cells.pop():d[0].cells.shift():f||g!==te?"Right"===r&&g===Q&&(d[0].cells[d[0].cells.length-1].column.freeze="Right"):d[0].cells[0].column.freeze=g===te?"Left":"Right"}for(c=0,u=this.colDepth;c<u;c++)p=h.render(d[c],n),this.parent.rowHeight&&p.querySelector(".e-headercell")&&(p.style.height=this.parent.rowHeight+"px"),o.appendChild(p);return{thead:o,rows:d}},s.prototype.updateColGroup=function(e){var i,t=this.parent.getColumns(),r=this.parent.getColumnIndexesInView();if(this.parent.enableColumnVirtualization&&this.parent.getFrozenColumns()&&this.parent.contentModule.isXaxis()&&(t=(0,l.l7)([],this.parent.getColumns())).splice(0,this.parent.getFrozenColumns()),e.id=this.parent.element.id+q,this.parent.allowGrouping)for(var n=0,o=this.parent.groupSettings.columns.length;n<o;n++)this.parent.enableColumnVirtualization&&-1===r.indexOf(n)||(i=this.parent.createElement("col",{className:"e-group-intent"}),e.appendChild(i));for((this.parent.detailTemplate||this.parent.childGrid)&&(i=this.parent.createElement("col",{className:"e-detail-intent"}),e.appendChild(i)),this.parent.isRowDragable()&&"Right"!==this.parent.getFrozenMode()&&(i=this.parent.createElement("col",{className:"e-drag-intent"}),e.appendChild(i)),n=0,o=t.length;n<o;n++)i=this.parent.createElement("col"),!1===t[n].visible&&(0,l.V7)(i,{display:"none"}),e.appendChild(i);return this.parent.isRowDragable()&&"Right"===this.parent.getFrozenMode()&&(i=this.parent.createElement("col",{className:"e-drag-intent"}),e.appendChild(i)),e},s.prototype.ensureColumns=function(e){for(var t=this.parent,i=this.parent.getColumnIndexesInView(),r=0,n=e.length;r<n;r++){if(t.allowGrouping)for(var o=0,a=t.groupSettings.columns.length;o<a;o++)this.parent.enableColumnVirtualization&&-1===i.indexOf(o)||e[r].cells.push(this.generateCell({},A.HeaderIndent));if(t.detailTemplate||t.childGrid){var h={};this.parent.notify(Js,h),e[r].cells.push(this.generateCell(h,A.DetailHeader))}t.isRowDragable()&&e[r].cells.push(this.generateCell({},A.RowDragHIcon))}return e},s.prototype.getHeaderCells=function(e,t){var i=this.parent.getHeaderTable()&&this.parent.getHeaderTable().querySelector("thead"),r=this.parent.enableColumnVirtualization?this.parent.getColumns(this.parent.enablePersistence):this.parent.columns;if(this.frzIdx=0,this.notfrzIdx=0,this.parent.lockcolPositionCount)for(var n=0;n<r.length;n++)this.lockColsRendered=!1,e=this.appendCells(r[n],e,0,0===n,!1,n===r.length-1,i,t,!1);n=0;for(var o=r.length;n<o;n++)this.notfrzIdx=0,this.lockColsRendered=!0,e=this.appendCells(r[n],e,0,0===n,!1,n===o-1,i,t,!1);return e},s.prototype.appendCells=function(e,t,i,r,n,o,a,h,d){var v,p=o?d?"e-laststackcell":"e-lastcell":"",c=this.parent.isFrozenGrid(),u=!this.parent.lockcolPositionCount||e.lockColumn&&!this.lockColsRendered||!e.lockColumn&&this.lockColsRendered,f=!this.parent.lockcolPositionCount||e.lockColumn&&!this.lockColsRendered||!e.lockColumn&&this.lockColsRendered,g=this.parent.getContent().querySelector(".e-movablescrollbar");if(c&&g&&this.parent.enableColumnVirtualization&&(v=g.scrollLeft),e.columns){this.isFirstCol=!1;var m=this.getCellCnt(e,0);if(m){var C=this.getStackedLockColsCount(e,0),b=0===this.parent.lockcolPositionCount||!this.lockColsRendered&&0!==C||this.lockColsRendered&&m-C!=0,y=c&&this.ensureStackedFrozen(e.columns,h,!1);(!c&&b||y)&&t[i].cells.push(new Pe({cellType:A.StackedHeader,column:e,colSpan:this.getColSpan(m,C,e.columns,h,c),className:r?"":n?"e-firstcell":""}))}if(this.parent.lockcolPositionCount&&!this.lockColsRendered)for(var S=0;S<e.columns.length;S++)t=this.appendCells(e.columns[S],t,i+1,r,0===S,S===e.columns.length-1&&o,a,h,!1);if(this.lockColsRendered){S=0;for(var R=e.columns.length;S<R;S++){r=r&&0===S;var F=this.isFirstCol=e.columns[S].visible&&!r,D=S===R-1&&o;t=this.appendCells(e.columns[S],t,i+1,r,F&&!D,D,a,h,!0)}}}else(v&&v>0&&this.parent.contentModule.isXaxis()&&0!==this.parent.inViewIndexes[0]&&"movable"===e.getFreezeTableName()||!c&&u||c&&e.getFreezeTableName()===h&&f)&&t[i].cells.push(this.generateCell(e,A.Header,this.colDepth-i,(r?"":n?"e-firstcell":"")+p,i,this.parent.getColumnIndexByUid(e.uid))),this.parent.lockcolPositionCount?this.frzIdx+this.notfrzIdx<this.parent.frozenColumns&&(e.lockColumn&&!this.lockColsRendered||!e.lockColumn&&this.lockColsRendered)?this.frzIdx++:this.notfrzIdx++:this.frzIdx++;return t},s.prototype.ensureStackedFrozen=function(e,t,i){for(var r=e.length,n=0;n<r;n++)if(e[n].columns)i=this.ensureStackedFrozen(e[n].columns,t,i);else if(e[n].getFreezeTableName()===t){i=!0;break}return i},s.prototype.getStackedLockColsCount=function(e,t){if(e.columns)for(var i=0;i<e.columns.length;i++)t=this.getStackedLockColsCount(e.columns[i],t);else e.lockColumn&&t++;return t},s.prototype.getColSpan=function(e,t,i,r,n){return n?e=this.getFrozenColSpan(i,r,0):this.parent.lockcolPositionCount&&(e=this.lockColsRendered?e-t:t),e},s.prototype.getFrozenColSpan=function(e,t,i){for(var r=e.length,n=0;n<r;n++)e[n].columns?i=this.getFrozenColSpan(e[n].columns,t,i):e[n].getFreezeTableName()===t&&e[n].visible&&i++;return i},s.prototype.generateRow=function(e){return new st({})},s.prototype.generateCell=function(e,t,i,r,n,o){var a={visible:e.visible,isDataCell:!1,isTemplate:!(0,l.le)(e.headerTemplate),rowID:"",column:e,cellType:t,rowSpan:i,className:r,index:n,colIndex:o};return(!a.rowSpan||a.rowSpan<2)&&delete a.rowSpan,new Pe(a)},s.prototype.setVisible=function(e){for(var i,r,t=this.parent,n=t.getFrozenColumns(),o=0,a=e.length;o<a;o++){var h=e[o];if(r=t.getNormalizedColumnIndex(h.uid),i=h.visible?"":"none",n){var d=this.parent.isRowDragable()?n+1:n;if(r<d)(0,l.V7)(this.getColGroup().children[r],{display:i});else{var p=t.getHeaderContent().querySelector("."+W).querySelector(q);(0,l.V7)(p.children[r-d],{display:i})}}else(0,l.V7)(this.getColGroup().children[r],{display:i})}this.refreshUI()},s.prototype.colPosRefresh=function(){this.refreshUI()},s.prototype.refreshUI=function(){var e=this.parent.isFrozenGrid(),t=this.parent.enableColumnVirtualization&&e,i=this.getPanel();this.toggleStackClass(i);var r=this.freezeReorder?this.headerPanel.querySelector("."+W).querySelector("."+Z):this.getTable(),n=this.parent.isFrozenGrid()?this.parent.getFrozenLeftCount()?"frozen-left":"frozen-right":void 0;if(t&&(r=this.parent.contentModule.getVirtualFreezeHeader(),n=this.parent.contentModule.isXaxis()?"movable":n),r){(0,l.Od)(r),r.removeChild(r.firstChild),r.removeChild(r.childNodes[0]);var o=this.parent.createElement(q),a=this.createHeaderContent(n);this.rows=a.rows,r.insertBefore(a.thead,r.firstChild),this.updateColGroup(o),r.insertBefore(this.setColGroup(o),r.firstChild),t||this.setTable(r),this.appendContent(r),this.parent.notify(tr,{}),this.widthService.setWidthToColumns(),this.parent.updateDefaultCursor(),(!e||this.parent.enableColumnVirtualization&&e)&&this.initializeHeaderDrag();for(var h=[].slice.call(i.querySelectorAll("tr.e-columnheader")),d=0,p=h;d<p.length;d++){var u=[].slice.call(p[d].getElementsByClassName("e-grouptopleftcell"));u.length&&u[u.length-1].classList.add("e-lastgrouptopleftcell")}e||this.parent.notify(ue,{rows:this.rows,args:{isFrozen:e}}),this.parent.enableColumnVirtualization&&w(r,W)&&this.parent.notify(ue,{rows:this.rows,args:{isFrozen:!1,isXaxis:!0}}),this.parent.allowTextWrap&&"Header"===this.parent.textWrapSettings.wrapMode&&qe(h,!0)}},s.prototype.toggleStackClass=function(e){this.parent.columns.some(function(r){return!(0,l.le)(r.columns)})?e.classList.add("e-stackedheader"):e.classList.remove("e-stackedheader")},s.prototype.appendContent=function(e){this.getPanel().querySelector("."+le).appendChild(e)},s.prototype.getCellCnt=function(e,t){if(e.columns)for(var i=0,r=e.columns.length;i<r;i++)t=this.getCellCnt(e.columns[i],t);else e.visible&&t++;return t},s.prototype.initializeHeaderDrag=function(){!(this.parent.allowReordering||this.parent.allowGrouping&&this.parent.groupSettings.showDropArea)||(this.draggable=new l._l(this.parent.getHeaderContent(),{dragTarget:".e-headercell",distance:5,helper:this.helper,dragStart:this.dragStart,drag:this.drag,dragStop:this.dragStop,abort:".e-rhandler",isReplaceDragEle:this.isReplaceDragEle}))},s.prototype.initializeHeaderDrop=function(){new l.bK(this.parent.getHeaderContent(),{accept:".e-dragclone",drop:this.drop})},s.prototype.renderCustomToolbar=function(){var e=this,t=this.parent;if("Vertical"===t.rowRenderingMode&&!t.toolbar&&(t.allowSorting||t.allowFiltering&&"FilterBar"!==t.filterSettings.type)){for(var i=t.createElement("div",{className:"e-res-toolbar e-toolbar"}),r=t.createElement("div",{className:"e-toolbar-items"}),n=t.createElement("div",{className:"e-toolbar-left"}),o=this.parent.allowFiltering&&this.parent.allowSorting?2:1,a=0;a<o;a++){var h=t.createElement("div",{className:"e-toolbar-item e-gridresponsiveicons e-icons e-tbtn-align"}),d=1===o?this.parent.allowSorting?"sort":"filter":1===a?"sort":"filter",p=t.createElement("button",{className:"e-tbar-btn e-control e-btn e-lib e-icon-btn"}),c=t.createElement("span",{className:"e-btn-icon e-res"+d+"-icon e-icons"});p.appendChild(c),new ze.zx({cssClass:this.parent.cssClass?this.parent.cssClass:""}).appendTo(p),p.onclick=function(f){f.target.classList.contains("e-ressort-btn")||f.target.classList.contains("e-ressort-icon")?e.parent.showResponsiveCustomSort():e.parent.showResponsiveCustomFilter()},h.appendChild(p),n.appendChild(h)}r.appendChild(n),i.appendChild(r),t.element.insertBefore(i,this.parent.element.querySelector("."+pe))}else t.enableAdaptiveUI&&!t.toolbar&&t.getContent().classList.add("e-responsive-header")},s.prototype.updateCustomResponsiveToolbar=function(e){var t=this.parent.element.querySelector(".e-responsive-toolbar");"toolbar"===e.module&&(t?(0,l.Od)(t):this.renderCustomToolbar())},s}(),Ee=function(){function s(e,t){this.localizer=t.getService("localization"),this.formatter=t.getService("valueFormatter"),this.parent=e,this.element=this.parent.createElement("TD",{className:N,attrs:{role:"gridcell",tabindex:"-1"}}),this.rowChkBox=this.parent.createElement("input",{className:"e-checkselect",attrs:{type:"checkbox","aria-label":this.localizer.getConstant("CheckBoxLabel")}})}return s.prototype.getGui=function(){return""},s.prototype.format=function(e,t,i){return(0,l.le)(e.format)||("number"===e.type&&isNaN(parseInt(t,10))&&(t=null),t=this.formatter.toView(t,e.getFormatter())),(0,l.le)(t)?"":t.toString()},s.prototype.evaluate=function(e,t,i,r,n,o){var a,h;if(t.column.template){var d=this.parent.isReact&&"string"!=typeof t.column.template,p=this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact,c=["index"],u=Lr({},i,((a={})[js]=n,a.column=t.column,a)),f=this.parent.element.id+t.column.uid,g="isStringTemplate";if(d||p){var v={index:r[c[0]]};t.column.getColumnTemplate()((0,l.l7)(v,u),this.parent,"columnTemplate",f,this.parent[g],null,e),this.parent.renderTemplates()}else h=t.column.getColumnTemplate()((0,l.l7)({index:r[c[0]]},u),this.parent,"template",f,this.parent[g],void 0,void 0,this.parent.root);return!d&&!p&&ye(e,h),this.parent.notify("template-result",{template:h}),h=null,e.setAttribute("aria-label",e.innerText+this.localizer.getConstant("TemplateCell")+this.localizer.getConstant("ColumnHeader")+t.column.headerText),!1}return!0},s.prototype.invokeFormatter=function(e,t,i){return(0,l.le)(e.formatter)||(t=function(s,e){return s.prototype&&"getValue"in s.prototype}(e.formatter)?(new(0,e.formatter)).getValue(e,i):"function"==typeof e.formatter?e.formatter(e,i):e.formatter.getValue(e,i)),t},s.prototype.render=function(e,t,i,r,n){return this.refreshCell(e,t,i,n)},s.prototype.refreshTD=function(e,t,i,r){var n="Batch"===this.parent.editSettings.mode&&e.classList.contains("e-editedbatchcell");if(this.parent.isReact){e.innerHTML="";var o=e.cellIndex,a=e.parentElement;(0,l.Od)(e);var h=this.refreshCell(t,i,r,n);this.cloneAttributes(h,e),a.cells.length!==o-1?a.insertBefore(h,a.cells[o]):a.appendChild(h)}else{var d=this.refreshCell(t,i,r,n);e.innerHTML="",e.setAttribute("aria-label",d.getAttribute("aria-label"));for(var c=0,u=[].slice.call(d.childNodes);c<u.length;c++)e.appendChild(u[c])}},s.prototype.cloneAttributes=function(e,t){for(var n,i=t.attributes,r=i.length;r--;)e.setAttribute((n=i[r]).name,n.value)},s.prototype.refreshCell=function(e,t,i,r){var n,h,o=this.element.cloneNode(),a=e.column;e.isForeignKey&&(h=e.foreignKeyData[0]||((n={})[a.foreignKeyValue]=a.format?null:"",n));var d=this.getGui(),p=e.isForeignKey?this.getValue(a.foreignKeyValue,h,a):this.getValue(a.field,t,a);if(("date"===a.type||"datetime"===a.type)&&!(0,l.le)(p)&&(p=new Date(p)),d=(p=this.format(a,p,t)).toString(),"boolean"===a.type&&!a.displayAsCheckBox){var c="true"!==p&&"false"!==p?null:"true"===p?"True":"False";d=c?this.localizer.getConstant(c):d}var u=this.invokeFormatter(a,p,t);if(d=(0,l.le)(a.formatter)?d:(0,l.le)(u)?"":u.toString(),o.setAttribute("aria-label",d+this.localizer.getConstant("ColumnHeader")+e.column.headerText),this.evaluate(o,e,t,i,h,r)&&"checkbox"!==a.type)this.appendHtml(o,d,a.getDomSetter?a.getDomSetter():"innerHTML");else if("checkbox"===a.type){o.classList.add(Nt),o.setAttribute("aria-label",this.localizer.getConstant("CheckBoxLabel"));var f=(0,ze.eE)(this.parent.createElement,!1,{checked:p=!!this.parent.selectionSettings.persistSelection&&"true"===p,label:" "});this.parent.cssClass&&(0,l.cn)([f],[this.parent.cssClass]),this.rowChkBox.id="checkbox-"+e.rowID,f.insertBefore(this.rowChkBox.cloneNode(),f.firstChild),o.appendChild(f)}if("Check"===this.parent.checkAllRows&&this.parent.enableVirtualization&&(e.isSelected=!0),this.setAttributes(o,e,i),"boolean"===a.type&&a.displayAsCheckBox){var g=isNaN(parseInt(p.toString(),10))?"true"===p:parseInt(p.toString(),10)>0;f=(0,ze.eE)(this.parent.createElement,!1,{checked:g,label:" "}),o.innerHTML="",f.classList.add("e-checkbox-disabled"),this.parent.cssClass&&(0,l.cn)([f],[this.parent.cssClass]),o.appendChild(f),o.setAttribute("aria-label",g+this.localizer.getConstant("ColumnHeader")+e.column.headerText)}return o},s.prototype.appendHtml=function(e,t,i){return void 0===i&&(i="innerHTML"),e[i]=t,e},s.prototype.setAttributes=function(e,t,i){var r=t.column;this.buildAttributeFromCell(e,t,"checkbox"===r.type),at(e,i),at(e,t.attributes),r.customAttributes&&at(e,r.customAttributes),"Vertical"===this.parent.rowRenderingMode&&at(e,{"data-cell":r.headerText}),r.textAlign&&(e.style.textAlign=r.textAlign),"Clip"===r.clipMode||!r.clipMode&&"Clip"===this.parent.clipMode?e.classList.add("e-gridclip"):("EllipsisWithTooltip"===r.clipMode||!r.clipMode&&"EllipsisWithTooltip"===this.parent.clipMode)&&"checkbox"!==r.type&&e.classList.add("e-ellipsistooltip")},s.prototype.buildAttributeFromCell=function(e,t,i){var r={},o=[];t.colSpan&&(r.colSpan=t.colSpan),t.rowSpan&&(r.rowSpan=t.rowSpan),t.isTemplate&&o.push("e-templatecell"),t.isSelected&&(o.push.apply(o,["e-selectionbackground","e-active"]),i&&e.querySelector(".e-frame").classList.add("e-check")),t.isColumnSelected&&o.push.apply(o,["e-columnselection"]),t.cellType===A.Header?(r["data-colindex"]=t.colIndex,r[mo]=t.colIndex+1):(0,l.le)(t.index)||(r["data-colindex"]=t.index,r[mo]=t.index+1),t.visible||o.push("e-hide"),r.class=o,at(e,r)},s.prototype.getValue=function(e,t,i){return i.valueAccessor(e,t,i)},s}(),Bi=function(){function s(){}return s.prototype.setOptions=function(e,t){for(var i=Object.keys(t),r=0;r<i.length;r++)Vt(e,Gt[i[r]],t[i[r]])},s.prototype.setExpand=function(e,t){Vt(e,Gt.expand,t)},s.prototype.setSort=function(e,t){Vt(e,Gt.sort,t,"boolean"==typeof t)},s.prototype.setBusy=function(e,t){Vt(e,Gt.busy,t),Vt(e,Gt.invalid,null,!0)},s.prototype.setGrabbed=function(e,t,i){Vt(e,Gt.grabbed,t,i)},s.prototype.setDropTarget=function(e,t){Vt(e,Gt.dropeffect,"copy",!t)},s}();function Vt(s,e,t,i){i&&s?s.removeAttribute(e):s&&s.setAttribute(e,t)}var Gt={expand:"aria-expanded",role:"role",datarole:"data-role",selected:"aria-selected",multiselectable:"aria-multiselectable",sort:"aria-sort",busy:"aria-busy",invalid:"aria-invalid",grabbed:"aria-grabbed",dropeffect:"aria-dropeffect",haspopup:"aria-haspopup",level:"aria-level",colcount:"aria-colcount",rowcount:"aria-rowcount"},Ql=function(){var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])})(e,t)};return function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),bo=function(s){function e(){var t=null!==s&&s.apply(this,arguments)||this;return t.element=t.parent.createElement("TH",{className:"e-headercell",attrs:{role:"columnheader",tabindex:"-1"}}),t.ariaService=new Bi,t.hTxtEle=t.parent.createElement("span",{className:"e-headertext"}),t.sortEle=t.parent.createElement("div",{className:"e-sortfilterdiv e-icons",attrs:{"aria-hidden":"true"}}),t.gui=t.parent.createElement("div"),t.chkAllBox=t.parent.createElement("input",{className:"e-checkselectall",attrs:{type:"checkbox","aria-label":t.localizer.getConstant("CheckBoxLabel")}}),t}return Ql(e,s),e.prototype.getGui=function(){return this.gui.cloneNode()},e.prototype.render=function(t,i,r){var n=this.element.cloneNode(),o=this.parent.createElement("div",{className:"e-filtermenudiv e-icons e-icon-filter",attrs:{"aria-hidden":"true"}});return this.prepareHeader(t,n,o)},e.prototype.refresh=function(t,i){this.clean(i);var r=this.parent.createElement("div",{className:"e-filtermenudiv e-icons e-icon-filter",attrs:{"aria-hidden":"true"}});return this.prepareHeader(t,i,r)},e.prototype.clean=function(t){t.innerHTML=""},e.prototype.prepareHeader=function(t,i,r){var d,n=t.column,o={},a="",h=this.getGui();if((0,l.Y4)(h,{"e-mappinguid":n.uid,class:"e-headercelldiv"}),(0,l.le)(n.headerValueAccessor)||(d=this.getValue(n.headerText,n)),"checkbox"!==n.type){var p=n.headerText;(0,l.le)(d)||(p=d);var c=this.hTxtEle.cloneNode();c[n.getDomSetter()]=p,h.appendChild(c)}else{n.editType="booleanedit";var u=(0,ze.eE)(this.parent.createElement,!1,{checked:!1,label:" "});this.chkAllBox.id="checkbox-"+n.uid,u.insertBefore(this.chkAllBox.cloneNode(),u.firstChild),this.parent.cssClass&&(0,l.cn)([u],[this.parent.cssClass]),h.appendChild(u),h.classList.add("e-headerchkcelldiv")}if(this.buildAttributeFromCell(i,t),this.appendHtml(i,h),i.appendChild(this.sortEle.cloneNode()),this.parent.allowFiltering&&"FilterBar"!==this.parent.filterSettings.type&&n.allowFiltering&&!(0,l.le)(n.field)&&(!this.parent.showColumnMenu||!n.showColumnMenu)){(0,l.Y4)(r,{"e-mappinguid":"e-flmenu-"+n.uid}),a=a.length?a+". "+this.localizer.getConstant("FilterDescription"):this.localizer.getConstant("FilterDescription"),i.classList.add("e-fltr-icon");var f=[];if(this.parent.filterSettings.columns.length&&this.parent.filterSettings.columns.length!==f.length)for(var g=this.parent.getForeignKeyColumns(),v=0;v<this.parent.columns.length;v++)for(var m=0;m<this.parent.filterSettings.columns.length;m++)if(this.parent.filterSettings.columns[m].field===n.field||g.length&&n.foreignKeyValue===this.parent.filterSettings.columns[m].field){r.classList.add("e-filtered"),f.push(n.field);break}i.appendChild(r.cloneNode())}t.className&&i.classList.add(t.className),n.customAttributes&&at(i,n.customAttributes),this.parent.allowSorting&&n.allowSorting&&(o.sort="none",a=a.length?a+". "+this.localizer.getConstant("SortDescription"):this.localizer.getConstant("SortDescription")),(this.parent.allowGrouping&&n.allowGrouping||this.parent.allowReordering&&n.allowReordering)&&(o.grabbed=!1,a=a.length?a+". "+this.localizer.getConstant("GroupDescription"):this.localizer.getConstant("GroupDescription")),this.parent.showColumnMenu&&(a=a.length?a+". "+this.localizer.getConstant("ColumnMenuDescription"):this.localizer.getConstant("ColumnMenuDescription")),i=this.extendPrepareHeader(n,i);var C,b=this.parent,y=b.getColumnIndexByField(n.field);if(!(0,l.le)(n.headerTemplate)){var S=b.element.id+n.uid+"headerTemplate",R="isStringTemplate",F=n;if(this.parent.isReact&&"string"!=typeof n.headerTemplate||this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact){var k={index:y};i.firstElementChild.innerHTML="",n.getHeaderTemplate()((0,l.l7)(k,F),b,"headerTemplate",S,this.parent[R],null,i.firstElementChild),this.parent.renderTemplates()}else C=n.getHeaderTemplate()((0,l.l7)({index:y},F),b,"headerTemplate",S,this.parent[R],void 0,void 0,this.parent.root),i.firstElementChild.innerHTML="",ye(i.firstElementChild,C)}if(this.ariaService.setOptions(i,o),!(0,l.le)(n.headerTextAlign)||!(0,l.le)(n.textAlign)){var E=n.headerTextAlign||n.textAlign;h.style.textAlign=E,"Right"===E||"Left"===E?i.classList.add("Right"===E?"e-rightalign":"e-leftalign"):"Center"===E&&i.classList.add("e-centeralign")}return"Clip"===n.clipMode||!n.clipMode&&"Clip"===this.parent.clipMode?i.classList.add("e-gridclip"):("EllipsisWithTooltip"===n.clipMode||!n.clipMode&&"EllipsisWithTooltip"===this.parent.clipMode)&&"checkbox"!==n.type&&i.classList.add("e-ellipsistooltip"),a&&i.setAttribute("aria-description",a),i.setAttribute("aria-rowspan",((0,l.le)(t.rowSpan)?1:t.rowSpan).toString()),i.setAttribute("aria-colspan","1"),this.parent.trigger(ms,{cell:t,node:i}),i},e.prototype.getValue=function(t,i){return i.headerValueAccessor(t,i)},e.prototype.extendPrepareHeader=function(t,i){if(this.parent.showColumnMenu&&t.showColumnMenu&&!(0,l.le)(t.field)){var r=this.parent.createElement("div",{className:"e-icons e-columnmenu",attrs:{"aria-hidden":"true"}}),n=[];if(this.parent.filterSettings.columns.length&&this.parent.filterSettings.columns.length!==n.length)for(var o=0;o<this.parent.columns.length;o++)for(var a=0;a<this.parent.filterSettings.columns.length;a++)if(this.parent.filterSettings.columns[a].field===t.field){r.classList.add("e-filtered"),n.push(t.field);break}i.classList.add("e-fltr-icon"),i.appendChild(r)}if(this.parent.allowResizing){var h=this.parent.createElement("div");h.className=t.allowResizing?"e-rhandler e-rcursor":"e-rsuppress",i.appendChild(h)}return i},e.prototype.appendHtml=function(t,i){return t.appendChild(i),t},e}(Ee),Yl=function(){var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])})(e,t)};return function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),wo=function(s){function e(){var t=null!==s&&s.apply(this,arguments)||this;return t.element=t.parent.createElement("TH",{className:"e-headercell e-stackedheadercell",attrs:{role:"columnheader",tabindex:"-1"}}),t}return Yl(e,s),e.prototype.render=function(t,i,r){var n=this.element.cloneNode(),o=this.parent.createElement("div",{className:"e-stackedheadercelldiv",attrs:{"e-mappinguid":t.column.uid}}),a=t.column;if(n.appendChild(o),(0,l.le)(a.headerTemplate)?this.appendHtml(o,a.headerText,a.getDomSetter()):ye(o,a.getHeaderTemplate()(a,this.parent,"headerTemplate")),t.column.toolTip&&n.setAttribute("title",t.column.toolTip),"Clip"===a.clipMode||!a.clipMode&&"Clip"===this.parent.clipMode?n.classList.add("e-gridclip"):("EllipsisWithTooltip"===a.clipMode||!a.clipMode&&"EllipsisWithTooltip"===this.parent.clipMode)&&n.classList.add("e-ellipsistooltip"),(0,l.le)(t.column.textAlign)||(o.style.textAlign=t.column.textAlign),t.column.customAttributes&&at(n,t.column.customAttributes),n.setAttribute("colspan",t.colSpan.toString()),n.setAttribute("aria-colspan",t.colSpan.toString()),n.setAttribute("aria-rowspan","1"),this.parent.allowResizing){var h=this.parent.createElement("div");h.className=t.column.allowResizing?"e-rhandler e-rcursor":"e-rsuppress",n.appendChild(h)}return t.className&&n.classList.add(t.className),this.parent.trigger(ms,{cell:t,node:n}),n},e}(Ee),Xl=function(){var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])})(e,t)};return function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),_n=function(s){function e(){var t=null!==s&&s.apply(this,arguments)||this;return t.element=t.parent.createElement("TD",{className:"e-indentcell"}),t}return Xl(e,s),e.prototype.render=function(t,i){var r=this.element.cloneNode();return at(r,t.attributes),r},e}(Ee),So=function(){var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])})(e,t)};return function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),Jl=function(s){function e(){var t=null!==s&&s.apply(this,arguments)||this;return t.cellUid=0,t.element=t.parent.createElement("TD",{className:"e-groupcaption",attrs:{id:t.parent.element.id+"captioncell",role:"gridcell",tabindex:"-1"}}),t}return So(e,s),e.prototype.render=function(t,i){this.element.id=this.parent.element.id+"captioncell"+this.cellUid++;var o,a,h,r=this.element.cloneNode(),n=this.parent;i.headerText=t.column.headerText,t.isForeignKey&&(a=this.format(t.column,t.column.valueAccessor("foreignKey",i,t.column)));for(var d=t.isForeignKey?a:t.column.enableGroupByFormat?i.key:this.format(t.column,t.column.valueAccessor("key",i,t.column)),p=0;p<n.aggregates.length;p++)for(var c=0;c<n.aggregates[p].columns.length;c++)if(n.getVisibleColumns()[0].field===n.aggregates[p].columns[c].field&&n.aggregates[p].columns[c].groupCaptionTemplate){h=n.aggregates[p].columns[c].groupCaptionTemplate.includes("$")?n.aggregates[p].columns[c].groupCaptionTemplate.split("$")[0]+i[n.getVisibleColumns()[0].field][n.aggregates[p].columns[c].type]+n.aggregates[p].columns[c].groupCaptionTemplate.split("}")[1]:n.aggregates[p].columns[c].groupCaptionTemplate;break}if((0,l.le)(n.groupSettings.captionTemplate))r.innerHTML=n.groupSettings.enableLazyLoading?t.column.headerText+": "+d+(h?"   "+h:""):t.column.headerText+": "+d+" - "+i.count+" "+this.localizer.getConstant(i.count<2?"Item":"Items")+(h?"   "+h:"");else{var u=this.parent.isReact&&"string"!=typeof n.groupSettings.captionTemplate,f=this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact;if(u||f){var g=n.element.id+"captionTemplate";Me(n.groupSettings.captionTemplate)(i,this.parent,"captionTemplate",g,null,null,r),this.parent.renderTemplates()}else o=this.parent.isVue?Me(n.groupSettings.captionTemplate)(i,this.parent):Me(n.groupSettings.captionTemplate)(i);!u&&!f&&ye(r,o)}return r.setAttribute("colspan",t.colSpan.toString()),r.setAttribute("aria-label",r.innerHTML+this.localizer.getConstant("GroupCaption")),r.setAttribute("title",r.innerHTML),r},e}(Ee),$l=function(s){function e(){var t=null!==s&&s.apply(this,arguments)||this;return t.element=t.parent.createElement("TD",{className:"e-groupcaption"}),t}return So(e,s),e.prototype.render=function(t,i){var r=this.element.cloneNode();return r.innerHTML="&nbsp;",r.setAttribute("colspan",t.colSpan.toString()),r},e}(Ee),eh=function(){var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])})(e,t)};return function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),th=function(s){function e(){return null!==s&&s.apply(this,arguments)||this}return eh(e,s),e.prototype.render=function(t,i,r,n){var o=this.element.cloneNode();return o.setAttribute("ej-mappingname",i.field),o.setAttribute("ej-mappingvalue",i.key),o.setAttribute("aria-expanded",n?"true":"false"),o.setAttribute("tabindex","-1"),this.parent.infiniteScrollSettings&&this.parent.infiniteScrollSettings.enableCache?(t.cellType=A.Indent,o.className=n?"e-recordplusexpand e-disablepointer":"e-recordpluscollapse e-disablepointer"):(o.className=n?"e-recordplusexpand":"e-recordpluscollapse",o.appendChild(this.parent.createElement("a",{className:n?"e-icons e-gdiagonaldown e-icon-gdownarrow":"e-icons e-gnextforward e-icon-grightarrow",attrs:{href:"javascript:void(0);",title:n?"expanded":"collapsed"}}))),o},e}(_n),ih=function(){var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])})(e,t)};return function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),rh=function(s){function e(){var t=null!==s&&s.apply(this,arguments)||this;return t.element=t.parent.createElement("TH",{className:"e-grouptopleftcell"}),t}return ih(e,s),e.prototype.render=function(t,i){var r=this.element.cloneNode();return r.appendChild(this.parent.createElement("div",{className:"e-headercelldiv e-emptycell",innerHTML:""})),r},e}(Ee),nh=function(){var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])})(e,t)};return function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),sh=function(s){function e(){var t=null!==s&&s.apply(this,arguments)||this;return t.element=t.parent.createElement("TH",{className:"e-detailheadercell"}),t}return nh(e,s),e.prototype.render=function(t,i){var r=this.element.cloneNode();return r.appendChild(this.parent.createElement("div",{className:"e-emptycell"})),r},e}(Ee),oh=function(){var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])})(e,t)};return function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),ah=function(s){function e(){var t=null!==s&&s.apply(this,arguments)||this;return t.element=t.parent.createElement("TD",{className:"e-detailrowcollapse",attrs:{"aria-expanded":"false",role:"gridcell",tabindex:"-1"}}),t}return oh(e,s),e.prototype.render=function(t,i,r){var n=this.element.cloneNode();return r&&!(0,l.le)(r.class)?(n.className="",n.className=r.class,n.appendChild(this.parent.createElement("a",{className:"e-icons e-dtdiagonaldown e-icon-gdownarrow",attrs:{href:"javascript:void(0);",title:"expanded"}}))):n.appendChild(this.parent.createElement("a",{className:"e-icons e-dtdiagonalright e-icon-grightarrow",attrs:{href:"javascript:void(0);",title:"collapsed"}})),n},e}(Ee),lh=function(){var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])})(e,t)};return function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),hh=function(s){function e(){var t=null!==s&&s.apply(this,arguments)||this;return t.element=t.parent.createElement("TD",{className:"e-rowdragdrop e-rowdragdropcell",attrs:{role:"gridcell",tabindex:"-1"}}),t}return lh(e,s),e.prototype.render=function(t,i){var r=this.element.cloneNode();return r.appendChild(this.parent.createElement("div",{className:"e-icons e-rowcelldrag e-dtdiagonalright e-icon-rowdragicon",attrs:{"aria-hidden":"true"}})),t.isSelected&&(r.classList.add("e-selectionbackground"),r.classList.add("e-active")),r},e}(Ee),dh=function(){var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])})(e,t)};return function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),ph=function(s){function e(){var t=null!==s&&s.apply(this,arguments)||this;return t.element=t.parent.createElement("TH",{className:"e-rowdragheader"}),t}return dh(e,s),e.prototype.render=function(t,i){var r=this.element.cloneNode();return r.appendChild((0,l.az)("div",{className:"e-emptycell"})),r},e}(Ee),ch=function(){function s(e,t){this.emptyGrid=!1,this.counter=0,this.parent=e,this.locator=t,this.data=new Cr(e,t),this.l10n=t.getService("localization"),this.ariaService=this.locator.getService("ariaService"),this.renderer=this.locator.getService("rendererFactory"),this.addEventListener()}return s.prototype.render=function(){var e=this.parent;this.headerRenderer=this.renderer.getRenderer(de.Header),this.contentRenderer=this.renderer.getRenderer(de.Content),this.headerRenderer.renderPanel(),this.contentRenderer.renderPanel(),e.getColumns().length&&(this.isLayoutRendered=!0,this.headerRenderer.renderTable(),this.contentRenderer.renderTable(),this.emptyRow(!1)),this.parent.scrollModule.setWidth(),this.parent.scrollModule.setHeight(),"auto"!==this.parent.height&&this.parent.scrollModule.setPadding(),this.refreshDataManager()},s.prototype.refresh=function(e){var t=this;void 0===e&&(e={requestType:"refresh"});var i=this.parent;i.notify(e.requestType+"-begin",e),i.trigger(Y,e,function(r){if(void 0===r&&(r={requestType:"refresh"}),r.cancel)i.notify(ar,r);else{if("delete"===r.requestType&&i.allowPaging){var n=r.data.length,o=i.pageSettings.totalRecordsCount-n;!(i.getCurrentViewRecords().length-n)&&o&&(i.pageSettings.currentPage-1)*i.pageSettings.pageSize===o&&(i.prevPageMoving=!0,i.setProperties({pageSettings:{totalRecordsCount:o,currentPage:Math.ceil(o/i.pageSettings.pageSize)}},!0),i.pagerModule.pagerObj.totalRecordsCount=o)}"reorder"===r.requestType&&t.parent.dataSource&&"result"in t.parent.dataSource||("paging"===r.requestType||"columnstate"===r.requestType||"reorder"===r.requestType)&&t.parent.groupSettings.enableLazyLoading&&t.parent.groupSettings.columns.length&&t.parent.contentModule.getGroupCache()[t.parent.pageSettings.currentPage]?t.contentRenderer.refreshContentRows(r):t.refreshDataManager(r)}})},s.prototype.resetTemplates=function(){var e=this.parent,t=e.getColumns();if(e.detailTemplate){var i=e.element.id+"detailTemplate";l.ep[i]=[],(0,l.oL)(i,"DetailTemplate")}e.groupSettings.captionTemplate&&(0,l.oL)(e.element.id+"captionTemplate","CaptionTemplate"),e.rowTemplate&&(0,l.oL)(e.element.id+"rowTemplate","RowTemplate"),e.toolbarTemplate&&(0,l.oL)(e.element.id+"toolbarTemplate","ToolbarTemplate"),e.pageSettings.template&&(0,l.oL)(e.element.id+"_template","pageSettings");for(var r=0;r<t.length;r++)t[r].template&&(l.ep[e.element.id+t[r].uid]=[],(0,l.oL)(e.element.id+t[r].uid,"Template")),t[r].headerTemplate&&(0,l.oL)(e.element.id+t[r].uid+"headerTemplate","HeaderTemplate"),t[r].filterTemplate&&(0,l.oL)(e.element.id+t[r].uid+"filterTemplate","FilterTemplate");for(var n="guid",o=0;o<e.aggregates.length;o++)for(var a=0;a<e.aggregates[o].columns.length;a++)e.aggregates[o].columns[a].footerTemplate&&(0,l.oL)(e.element.id+e.aggregates[o].columns[a][n]+"footerTemplate","FooterTemplate"),e.aggregates[o].columns[a].groupFooterTemplate&&(0,l.oL)(e.element.id+e.aggregates[o].columns[a][n]+"groupFooterTemplate","GroupFooterTemplate"),e.aggregates[o].columns[a].groupCaptionTemplate&&(0,l.oL)(e.element.id+e.aggregates[o].columns[a][n]+"groupCaptionTemplate","GroupCaptionTemplate")},s.prototype.refreshComplete=function(e){this.parent.trigger(H,e)},s.prototype.refreshDataManager=function(e){var t=this;void 0===e&&(e={});var i=this.parent,r="Shimmer"===i.loadingIndicator.indicatorType&&"virtualscroll"!==e.requestType&&"infiniteScroll"!==e.requestType||("virtualscroll"===e.requestType||"infiniteScroll"===e.requestType)&&i.enableVirtualMaskRow;"virtualscroll"!==e.requestType&&!e.isCaptionCollapse&&!r&&this.parent.showSpinner(),r&&i.showMaskRow("virtualscroll"===e.requestType?e.virtualInfo.sentinelInfo.axis:"infiniteScroll"===e.requestType?e.direction:void 0),this.parent.notify("reset-infinite-blocks",e),this.emptyGrid=!1;var n,o=this.isNeedForeignAction();if(this.ariaService.setBusy(this.parent.getContent().querySelector("."+ie),!0),o){var a=new z.BH;n=this.getFData(a,e)}if(n=n?n.then(function(d){var p=t.data.generateQuery().requiresCount();if(t.emptyGrid){var c=new z.BH;return c.resolve({result:[],count:0}),c.promise}return t.data.getData(e,p)}):this.data.getData(e,this.data.generateQuery().requiresCount()),this.parent.getForeignKeyColumns().length&&(!o||this.parent.searchSettings.key.length)){var h=new z.BH;n=n.then(function(d){return t.parent.notify(or,{dataManager:n,result:d,promise:h,action:e}),h.promise})}this.parent.groupSettings.disablePageWiseAggregates&&this.parent.groupSettings.columns.length&&(n=n.then(function(d){return t.validateGroupRecords(d)})),n.then(function(d){return t.dataManagerSuccess(d,e)}).catch(function(d){return t.dataManagerFailure(d,e)})},s.prototype.getFData=function(e,t){return this.parent.notify(or,{isComplex:!0,promise:e,action:t}),e.promise},s.prototype.isNeedForeignAction=function(){var e=this.parent;return!!(e.allowFiltering&&e.filterSettings.columns.length||e.searchSettings.key.length)&&this.foreignKey(this.parent.getForeignKeyColumns())},s.prototype.foreignKey=function(e){var t=this;return e.some(function(i){return!(!t.parent.filterSettings.columns.some(function(n){return i.uid===n.uid})&&!t.parent.searchSettings.key.length)})},s.prototype.sendBulkRequest=function(e){var t=this;e.requestType="batchsave";var i=this.data.saveChanges(e.changes,this.parent.getPrimaryKeyFieldNames()[0],e.original),r=this.data.generateQuery().requiresCount();this.data.dataManager.dataSource.offline?this.refreshDataManager({requestType:"batchsave"}):i.then(function(n){t.data.getData(e,r).then(function(o){return t.dmSuccess(o,e)}).catch(function(o){return t.dmFailure(o,e)})}).catch(function(n){return t.dmFailure(n,e)})},s.prototype.dmSuccess=function(e,t){this.dataManagerSuccess(e,t)},s.prototype.dmFailure=function(e,t){this.dataManagerFailure(e,t)},s.prototype.renderEmptyRow=function(){this.emptyRow(!0)},s.prototype.emptyRow=function(e){var t=this.parent,i=this.contentRenderer.getTable().querySelector(I);(0,l.le)(i)||(0,l.Od)(i),i=this.parent.createElement(I,{attrs:{role:"rowgroup"}});var r=0;(t.detailTemplate||t.childGrid)&&++r;var n=this.parent.createElement("tr",{className:"e-emptyrow",attrs:{role:"row"}});n.appendChild(this.parent.createElement("td",{innerHTML:this.l10n.getConstant("EmptyRecord"),attrs:{colspan:(t.getVisibleColumns().length+r+t.groupSettings.columns.length).toString()}})),i.appendChild(n),this.contentRenderer.renderEmpty(i),e&&(this.parent.trigger(Te,{}),this.parent.notify(Ye,{rows:[new st({isDataRow:!0,cells:[new Pe({isDataCell:!0,visible:!0})]})]}))},s.prototype.dynamicColumnChange=function(){this.parent.getCurrentViewRecords().length&&this.updateColumnType(this.parent.getCurrentViewRecords()[0])},s.prototype.updateColumnType=function(e){for(var i,t=this.parent.getColumns(),r="customFormat",n="equalTo",o=e&&e.items?e.items[0]:e,a=this.locator.getService("valueFormatter"),h=0,d=t.length;h<d;h++){i=ne(t[h].field||"",o),(0,l.le)(t[h][r])||(t[h].format=t[h][r]),!(0,l.le)(t[h].validationRules)&&!(0,l.le)(t[h].validationRules[n])&&(t[h].validationRules[n][0]=this.parent.element.id+t[h].validationRules[n][0]),t[h].isForeignColumn()&&t[h].columnData&&(i=ne(t[h].foreignKeyValue||"",t[h].columnData[0])),(0,l.le)(i)?t[h].type=t[h].type||null:(this.isColTypeDef=!0,t[h].type||(t[h].type=i.getDay?i.getHours()>0||i.getMinutes()>0||i.getSeconds()>0||i.getMilliseconds()>0?"datetime":"date":typeof i));var p=new At;t[h].format&&(t[h].format.skeleton||t[h].format.format&&"string"==typeof t[h].format.format)&&(t[h].setFormatter(p.getFormatFunction((0,l.l7)({},t[h].format))),t[h].setParser(p.getParserFunction(t[h].format))),"string"==typeof t[h].format?Bo(this.locator,t[h]):!t[h].format&&"number"===t[h].type&&t[h].setParser(a.getParserFunction({format:"n2"}))}},s.prototype.dataManagerSuccess=function(e,t){var i=this,r=this.parent;this.contentRenderer=this.renderer.getRenderer(de.Content),this.headerRenderer=this.renderer.getRenderer(de.Header),e.actionArgs=t;var n=this.parent.enableInfiniteScrolling&&!this.parent.infiniteScrollSettings.enableCache&&!r.groupSettings.enableLazyLoading&&("delete"===t.requestType||"save"===t.requestType&&"add"===this.parent.infiniteScrollModule.requestType&&!(r.sortSettings.columns.length||r.filterSettings.columns.length||this.parent.groupSettings.columns.length||r.searchSettings.key));r.trigger("beforeDataBound",e,function(o){if(!o.cancel){o.result=(0,l.le)(o.result)?[]:o.result;var a=Object.keys(o.result).length;if(!i.parent.isDestroyed){if(!(r.getColumns().length||a||r.columns.length&&r.columns[0]instanceof De))return void r.hideSpinner();if(i.isInfiniteEnd(t)&&!a)return void i.parent.notify(fr,{e:t,result:e.result,count:e.count,agg:e.aggregates});if(i.parent.isEdit=!1,i.parent.notify(pr,{}),i.parent.notify(Ot,{}),t&&"infiniteScroll"!==t.requestType&&i.parent.notify("commandColumnDestroy",{type:"refreshCommandColumn"}),i.contentRenderer.prevCurrentView=i.parent.currentViewData.slice(),r.currentViewData=o.result,r.notify("refresh-infinite-current-view-data",{args:t,data:o.result}),o.count&&!r.allowPaging&&(r.enableVirtualization||r.enableInfiniteScrolling)&&(r.totalDataRecordsCount=o.count),!a&&o.count&&r.allowPaging&&t&&"delete"!==t.requestType)return i.parent.groupSettings.enableLazyLoading&&("grouping"===t.requestType||"ungrouping"===t.requestType)&&i.parent.notify(Jr,t),r.prevPageMoving=!0,r.pageSettings.totalRecordsCount=o.count,"paging"!==t.requestType&&(r.pageSettings.currentPage=Math.ceil(o.count/r.pageSettings.pageSize)),void r.dataBind();if((!r.getColumns().length&&a||!i.isLayoutRendered)&&!he(r)&&(r.removeMaskRow(),i.updatesOnInitialRender(o)),!i.isColTypeDef&&r.getCurrentViewRecords()&&i.updateColumnType(i.data.dataManager.dataSource.offline&&r.dataSource&&r.dataSource.length?r.dataSource[0]:r.getCurrentViewRecords()[0]),!i.parent.isInitialLoad&&i.parent.groupSettings.disablePageWiseAggregates&&!i.parent.groupSettings.columns.length&&(o.result=i.parent.dataSource instanceof Array?i.parent.dataSource:i.parent.currentViewData),(i.parent.isReact||i.parent.isVue)&&!(0,l.le)(t)&&"infiniteScroll"!==t.requestType&&!t.isFrozen&&Wi(i.parent,["footerTemplate"]),i.parent.isAngular&&i.parent.allowGrouping&&i.parent.groupSettings.captionTemplate&&!(!(0,l.le)(t)&&"infiniteScroll"===t.requestType)&&i.parent.destroyTemplate(["groupSettings_captionTemplate"]),i.parent.notify(Ge,(0,l.l7)({count:o.count,result:o.result,aggregates:o.aggregates},t)),(r.groupSettings.columns.length||t&&"ungrouping"===t.requestType)&&t&&"filtering"!==t.requestType&&i.headerRenderer.refreshUI(),a)he(r)&&(t.scrollTop={top:i.contentRenderer.content.scrollTop}),n?i.parent.notify(fr,{e:t,result:e.result,count:e.count,agg:e.aggregates}):i.parent.enableImmutableMode?i.contentRenderer.immutableModeRendering(t):i.contentRenderer.refreshContentRows(t);else{if(t&&t.isCaptionCollapse)return;if(!r.getColumns().length)return r.element.innerHTML="",void alert(i.l10n.getConstant("EmptyDataSourceError"));if(i.contentRenderer.setRowElements([]),i.contentRenderer.setRowObjects([]),i.ariaService.setBusy(i.parent.getContent().querySelector("."+ie),!1),r.removeMaskRow(),i.renderEmptyRow(),t){var d=(t.requestType||"").toLowerCase()+"-complete";i.parent.notify(d,t),"batchsave"===t.requestType&&(t.cancel=!1,t.rows=[],t.isFrozen=0!==i.parent.getFrozenColumns()&&!t.isFrozen,i.parent.trigger(H,t))}i.parent.hideSpinner()}i.parent.notify("toolbar-refresh",{}),i.setRowCount(i.parent.getCurrentViewRecords().length),"query"in e&&(i.parent.getDataModule().isQueryInvokedFromData=!1)}}})},s.prototype.dataManagerFailure=function(e,t){this.ariaService.setOptions(this.parent.getContent().querySelector("."+ie),{busy:!1,invalid:!0}),this.setRowCount(1),this.parent.trigger(Xt,{error:e}),this.parent.hideSpinner(),this.parent.removeMaskRow(),"save"!==t.requestType&&"delete"!==t.requestType&&"bulk-save"!==t.name&&(this.parent.currentViewData=[],this.renderEmptyRow(),this.parent.log("actionfailure",{error:e}))},s.prototype.setRowCount=function(e){this.ariaService.setOptions(this.parent.getHeaderTable(),{rowcount:e?e.toString():"1"})},s.prototype.isInfiniteEnd=function(e){return this.parent.enableInfiniteScrolling&&!this.parent.infiniteScrollSettings.enableCache&&"delete"===e.requestType},s.prototype.updatesOnInitialRender=function(e){this.isLayoutRendered=!0,this.parent.columns.length<1&&this.buildColumns(e.result[0]),pi(this.parent.columns,null,this.parent),this.headerRenderer.renderTable(),this.contentRenderer.renderTable(),this.parent.isAutoGen=!0,this.parent.notify(qt,{})},s.prototype.iterateComplexColumns=function(e,t,i){for(var r=Object.keys(e),n=0;n<r.length;n++)("object"!=typeof e[r[n]]||!e[r[n]]||e[r[n]]instanceof Date?[]:Object.keys(e[r[n]])).length?this.iterateComplexColumns(e[r[n]],t+(r[n]+"."),i):(i[this.counter]=t+r[n],this.counter++)},s.prototype.buildColumns=function(e){var t=[],i={};this.iterateComplexColumns(e,"",i);for(var r=Object.keys(i).filter(function(a){return"BlazId"!==i[a]}).map(function(a){return i[a]}),n=0,o=r.length;n<o;n++)t[n]={field:r[n]},this.parent.enableColumnVirtualization&&(t[n].width=(0,l.le)(t[n].width)?200:t[n].width);this.parent.setProperties({columns:t},!0)},s.prototype.instantiateRenderer=function(){this.renderer.addRenderer(de.Header,new jn(this.parent,this.locator)),this.renderer.addRenderer(de.Content,new Li(this.parent,this.locator));var e=this.locator.getService("cellRendererFactory");e.addCellRenderer(A.Header,new bo(this.parent,this.locator)),e.addCellRenderer(A.Data,new Ee(this.parent,this.locator)),e.addCellRenderer(A.StackedHeader,new wo(this.parent,this.locator)),e.addCellRenderer(A.Indent,new _n(this.parent,this.locator)),e.addCellRenderer(A.GroupCaption,new Jl(this.parent,this.locator)),e.addCellRenderer(A.GroupCaptionEmpty,new $l(this.parent,this.locator)),e.addCellRenderer(A.Expand,new th(this.parent,this.locator)),e.addCellRenderer(A.HeaderIndent,new rh(this.parent,this.locator)),e.addCellRenderer(A.StackedHeader,new wo(this.parent,this.locator)),e.addCellRenderer(A.DetailHeader,new sh(this.parent,this.locator)),e.addCellRenderer(A.RowDragHIcon,new ph(this.parent,this.locator)),e.addCellRenderer(A.DetailExpand,new ah(this.parent,this.locator)),e.addCellRenderer(A.DetailFooterIntent,new _n(this.parent,this.locator)),e.addCellRenderer(A.RowDragIcon,new hh(this.parent,this.locator))},s.prototype.addEventListener=function(){var e=this;this.parent.isDestroyed||(this.parent.on(nt,this.instantiateRenderer,this),this.parent.on("refreshdataSource",this.dataManagerSuccess,this),this.parent.on(ve,this.refresh,this),this.parent.on("refresh-complete",this.refreshComplete,this),this.parent.on("bulk-save",this.sendBulkRequest,this),this.parent.on(Gs,function(){e.emptyGrid=!0},this),this.parent.on(qt,this.dynamicColumnChange,this))},s.prototype.validateGroupRecords=function(e){var t=this,i=e.result.length-1;if(i<0)return Promise.resolve(e);var r=e.result[0],n=e.result[i],o=[],a=function(m){for(var C=[r,n],b=0;b<C.length;b++)o.push(new z.$G("field","==",C[b].field).and(t.getPredicate("key","equal",C[b].key)));m.where(z.$G.or(o))},h=new z.AE;a(h);var p=new z.hm(e.result).executeLocal(h),c=this.data.generateQuery(!0),u=[];if(this.data.isRemote()){for(var f=[r,n],g=0;g<f.length;g++)u.push(this.getPredicate(f[g].field,"equal",f[g].key));c.where(z.$G.or(u))}else a(c);var v=new z.BH;return this.data.getData({},c).then(function(m){t.updateGroupInfo(p,m.result),v.resolve(e)}).catch(function(m){return v.reject(m)}),v.promise},s.prototype.getPredicate=function(e,t,i){return i instanceof Date?It({field:e,operator:t,value:i}):new z.$G(e,t,i)},s.prototype.updateGroupInfo=function(e,t){for(var i=new z.hm(t),r=e,n=0;n<r.length;n++){var o=i.executeLocal((new z.AE).where(new z.$G("field","==",r[n].field).and(this.getPredicate("key","equal",r[n].key))))[0];r[n].count=o.count;var a=r[n].items,h=o.items;a.GroupGuid&&(r[n].items=this.updateGroupInfo(r[n].items,o.items));for(var d=this.parent.aggregates,p=0;p<d.length;p++)for(var c=d[p],u=0;u<c.columns.length;u++)for(var f=c.columns[u].type instanceof Array?c.columns[u].type:[c.columns[u].type],g=0;g<f.length;g++){var v=c.columns[u].field+" - "+f[g].toLowerCase(),m=a.level?h.records:o.items,C=this.parent;if("Custom"===f[g]){var b=a.level?h:o,y=c.columns[u].customAggregate;"string"==typeof y&&(y=(0,l.NA)(y,window)),r[n].aggregates[v]=y?y.call(C,b,c.columns[u]):""}else r[n].aggregates[v]=z.j4.aggregates[f[g].toLowerCase()](m,c.columns[u].field)}}return e},s}(),uh=function(){function s(){this.cellRenderMap={}}return s.prototype.addCellRenderer=function(e,t){e="string"==typeof e?e:(0,l.I$)(A,e),(0,l.le)(this.cellRenderMap[e])&&(this.cellRenderMap[e]=t)},s.prototype.getCellRenderer=function(e){if(e="string"==typeof e?e:(0,l.I$)(A,e),(0,l.le)(this.cellRenderMap[e]))throw"The cellRenderer "+e+" is not found";return this.cellRenderMap[e]},s}(),Ro=function(){function s(e,t){this.sortedCols=[],this.sortPredicate=[],this.isCustomDialog=!1,this.parent=e,this.serviceLocator=t,this.addEventListener()}return s.prototype.addEventListener=function(){this.evtHandlers=[{event:Ii,handler:this.closeCustomDialog},{event:Tn,handler:this.refreshCustomFilterOkBtn},{event:En,handler:this.renderResponsiveContextMenu},{event:Dn,handler:this.renderCustomFilterDiv},{event:ho,handler:this.customExFilterClose},{event:lo,handler:this.refreshCustomFilterClearBtn}],me(this.parent,this.evtHandlers,!0,this),this.onActionCompleteFn=this.editComplate.bind(this),this.parent.addEventListener(H,this.onActionCompleteFn)},s.prototype.customExFilterClose=function(){this.isCustomDlgRender=!1},s.prototype.renderCustomFilterDiv=function(){var e=this.customResponsiveDlg.element.querySelector(".e-dlg-header-content"),t=e.querySelector(".e-dlg-custom-header"),i=e.querySelector(".e-dlg-closeicon-btn");this.isCustomDlgRender=!0,this.parent.filterModule.filterModule.closeDialog(),this.saveBtn.element.style.display="",this.refreshCustomFilterOkBtn({disabled:!1}),this.backBtn.element.style.display="none",i.style.display="",t.innerHTML=this.parent.localeObj.getConstant("CustomFilter");var r=this.customResponsiveDlg.element.querySelector(".e-dlg-content");this.customExcelFilterParent=this.parent.createElement("div",{className:"e-xl-customfilterdiv e-default-filter"}),r.appendChild(this.customExcelFilterParent)},s.prototype.renderResponsiveContextMenu=function(e){if(this.action===K.isFilter){var t=this.customResponsiveDlg.element.querySelector(".e-dlg-content"),i=this.customResponsiveDlg.element.querySelector(".e-dlg-header-content"),r=i.querySelector(".e-dlg-closeicon-btn"),n=i.querySelector(".e-dlg-custom-header");if(e.isOpen){t.firstChild.style.display="none",t.appendChild(e.target),r.style.display="none",this.saveBtn.element.style.display="none",this.filterClearBtn.element.style.display="none",n.innerHTML=e.header;var o=this.parent.createElement("button"),a=this.parent.createElement("span",{className:"e-btn-icon e-resfilterback e-icons"});o.appendChild(a),this.backBtn=new ze.zx({cssClass:this.parent.cssClass?"e-res-back-btn "+this.parent.cssClass:"e-res-back-btn"}),this.backBtn.appendTo(o),n.parentElement.insertBefore(o,n)}else this.backBtn&&!this.isCustomDlgRender&&(t.firstChild.style.display="",(0,l.Od)(this.backBtn.element),r.style.display="",this.saveBtn.element.style.display="",this.isFiltered&&(this.filterClearBtn.element.style.display=""),n.innerHTML=this.getHeaderTitle({action:K.isFilter},e.col))}},s.prototype.refreshCustomFilterClearBtn=function(e){this.filterClearBtn&&(this.isFiltered=e.isFiltered,this.filterClearBtn.element.style.display=e.isFiltered?"":"none")},s.prototype.refreshCustomFilterOkBtn=function(e){this.saveBtn&&(this.saveBtn.disabled=e.disabled)},s.prototype.renderResponsiveContent=function(e){var t=this,i=this.parent;if(e)return this.filterParent=this.parent.createElement("div",{className:"e-mainfilterdiv e-default-filter",id:e.uid+"-main-filter"}),this.filterParent;var r=i.getColumns();this.customColumnDiv=i.createElement("div",{className:"columndiv",styles:"width: 100%"});var n=i.createElement("div",{className:"e-ressortbutton-parent"}),o=[],a=this.action===K.isSort,h=this.action===K.isFilter;if(h)for(var d=0;d<i.filterSettings.columns.length;d++)o.push(i.filterSettings.columns[d].field);for(d=0;d<r.length;d++)if(!(!r[d].visible||!r[d].allowSorting&&a||!r[d].allowFiltering&&h)){var p=i.createElement("div",{className:"e-responsivecoldiv"});p.setAttribute("data-e-mappingname",r[d].field),p.setAttribute("data-e-mappinguid",r[d].uid);var c=i.createElement("span",{innerHTML:r[d].headerText,className:"e-res-header-text"});if(p.appendChild(c),this.customColumnDiv.appendChild(p),a){var f=this.getSortedFieldsAndDirections("field").indexOf(r[d].field),g=i.createElement("button",{id:i.element.id+r[d].field+"sortbutton"}),v=n.cloneNode();v.appendChild(g),p.appendChild(v),new ze.zx({cssClass:this.parent.cssClass?"e-ressortbutton "+this.parent.cssClass:"e-ressortbutton"}).appendTo(g);var C=void 0;(0,l.le)(this.parent.sortSettings.columns[f])||(C=this.parent.localeObj.getConstant("Ascending"===this.parent.sortSettings.columns[f].direction?"AscendingText":"DescendingText")),g.innerHTML=f>-1?C:this.parent.localeObj.getConstant("NoneText"),g.onclick=function(R){t.sortButtonClickHandler(R.target)}}if(h&&o.indexOf(r[d].field)>-1){var b=i.createElement("div",{className:"e-icons e-res-icon e-filtersetdiv"}),y=i.createElement("span",{className:"e-icons e-res-icon e-filterset"});y.setAttribute("colType",r[d].type),b.appendChild(y),p.appendChild(b)}}return l.bi.add(this.customColumnDiv,"click",this.customFilterColumnClickHandler,this),this.customColumnDiv},s.prototype.getSortedFieldsAndDirections=function(e){for(var t=[],i=0;i<this.parent.sortSettings.columns.length;i++)t.push(this.parent.sortSettings.columns[i][e]);return t},s.prototype.sortButtonClickHandler=function(e){if(e){var i=w(e,"e-responsivecoldiv").getAttribute("data-e-mappingname");this.parent.allowMultiSorting||(this.sortPredicate=[],this.sortedCols=[],this.isSortApplied=!1,this.resetSortButtons(e));var r=e.textContent,n=r===this.parent.localeObj.getConstant("NoneText")?this.parent.localeObj.getConstant("AscendingText"):r===this.parent.localeObj.getConstant("AscendingText")?this.parent.localeObj.getConstant("DescendingText"):this.parent.localeObj.getConstant("NoneText"),o=n===this.parent.localeObj.getConstant("AscendingText")?"Ascending":n===this.parent.localeObj.getConstant("DescendingText")?"Descending":"None";e.innerHTML=n,this.setSortedCols(i,o)}},s.prototype.resetSortButtons=function(e){for(var t=[].slice.call(this.customColumnDiv.getElementsByClassName("e-ressortbutton")),i=0;i<t.length;i++)t[i]!==e&&(t[i].innerHTML="None")},s.prototype.setSortedCols=function(e,t){var r=this.getCurrentSortedFields().indexOf(e);this.parent.allowMultiSorting&&r>-1&&(this.sortedCols.splice(r,1),this.sortPredicate.splice(r,1)),this.isSortApplied=!0,"None"!==t&&(this.sortedCols.push(e),this.sortPredicate.push({field:e,direction:t}))},s.prototype.getCurrentSortedFields=function(){for(var e=[],t=0;t<this.sortedCols.length;t++)e.push(this.sortedCols[t]);return e},s.prototype.customFilterColumnClickHandler=function(e){if(this.action===K.isFilter){var t=this.parent,i=e.target;if("FilterBar"!==t.filterSettings.type)if(i.classList.contains("e-responsivecoldiv")||i.parentElement.classList.contains("e-responsivecoldiv")){if((r=i.getAttribute("data-e-mappingname"))||(r=i.parentElement.getAttribute("data-e-mappingname")),r){var n=t.getColumnByField(r);this.isRowResponsive=!0,this.showResponsiveDialog(n)}}else if(i.classList.contains("e-filterset")||i.parentElement.classList.contains("e-filtersetdiv")){var o=w(i,"e-responsivecoldiv");if(o){var r=o.getAttribute("data-e-mappingname");("Menu"===(n=t.getColumnByField(r)).filter.type||!n.filter.type&&"Menu"===t.filterSettings.type)&&(this.isDialogClose=!0),this.parent.filterModule.filterModule.clearCustomFilter(n),this.removeCustomDlgFilterEle(i)}}}},s.prototype.showResponsiveDialog=function(e){if(this.isCustomDialog&&this.action===K.isFilter&&!this.isRowResponsive)this.renderCustomFilterDialog();else{if(this.filteredCol=e,this.renderResponsiveDialog(e),this.parent.enableAdaptiveUI&&e&&(this.parent.filterModule.setFilterModel(e),this.parent.filterModule.filterModule.openDialog(this.parent.filterModule.createOptions(e,void 0))),this.action===K.isSort){var t={cancel:!1,dialogObj:this.customResponsiveDlg,requestType:"beforeOpenAptiveSortDialog"};if(this.parent.trigger(Rs,t),t.cancel)return}this.customResponsiveDlg.show(!0),this.customResponsiveDlg.element.style.maxHeight="100%",this.setTopToChildDialog(this.customResponsiveDlg.element)}},s.prototype.setTopToChildDialog=function(e){var t=e.querySelector(".e-dialog");if(t){var i=e.querySelector(".e-dlg-header-content").getBoundingClientRect().height;t.style.top=i+"px"}},s.prototype.renderCustomFilterDialog=function(e){var t=this.parent;if(this.action!==K.isFilter||"FilterBar"!==t.filterSettings.type){var i=this.parent.createElement("div",{id:t.element.id+"customfilter",className:this.parent.cssClass?"e-customfilterdiv e-responsive-dialog "+this.parent.cssClass:"e-customfilterdiv e-responsive-dialog"});this.parent.element.appendChild(i),this.customFilterDlg=this.getDialogOptions(e,!0);var r={cancel:!1,dialogObj:this.customFilterDlg,requestType:"beforeOpenAptiveFilterDialog"};this.parent.trigger(Rs,r),!r.cancel&&(this.customFilterDlg.appendTo(i),this.customFilterDlg.show(!0),this.customFilterDlg.element.style.maxHeight="100%")}},s.prototype.getDialogOptions=function(e,t,i){var r=new Ce.Vq({isModal:!0,showCloseIcon:!0,closeOnEscape:!1,locale:this.parent.locale,target:this.parent.adaptiveDlgTarget?this.parent.adaptiveDlgTarget:document.body,visible:!1,enableRtl:this.parent.enableRtl,content:this.renderResponsiveContent(e),open:this.dialogOpen.bind(this),created:this.dialogCreated.bind(this),close:this.beforeDialogClose.bind(this),width:"100%",height:"100%",animationSettings:{effect:"None"},cssClass:this.parent.cssClass?this.parent.cssClass:""});return r.isStringTemplate=!0,t?(r.header=this.renderResponsiveHeader(e,void 0,!0),r.cssClass="e-customfilter"):(r.header=this.renderResponsiveHeader(e),r.cssClass="Vertical"===this.parent.rowRenderingMode&&this.action===K.isFilter?"e-res"+i+" e-row-responsive-filter":"e-res"+i),r},s.prototype.renderResponsiveDialog=function(e){var t=this.parent;if(this.action!==K.isFilter||"FilterBar"!==t.filterSettings.type){var i=this.action===K.isFilter?"filter":"sort",r=this.parent.createElement("div",{id:t.element.id+"responsive"+i,className:this.parent.cssClass?"e-res"+i+"div e-responsive-dialog "+this.parent.cssClass:"e-res"+i+"div e-responsive-dialog"});this.parent.element.appendChild(r),this.customResponsiveDlg=this.getDialogOptions(e,!1,i),this.customResponsiveDlg.appendTo(r)}},s.prototype.dialogCreated=function(){!function(s){if(s.enableAdaptiveUI)for(var e=document.getElementsByClassName("e-responsive-dialog"),t=0;t<e.length;t++)e[t].classList.add("e-bigger")}(this.parent)},s.prototype.dialogOpen=function(){if(this.action===K.isSort&&this.parent.allowMultiSorting)for(var e=0;e<this.parent.sortSettings.columns.length;e++)this.sortedCols.push(this.parent.sortSettings.columns[e].field),this.sortPredicate.push({field:this.parent.sortSettings.columns[e].field,direction:this.parent.sortSettings.columns[e].direction})},s.prototype.beforeDialogClose=function(e){this.isDialogClose=e.element&&!e.element.querySelector(".e-xl-customfilterdiv")&&e.element.classList.contains("e-resfilterdiv"),this.action===K.isFilter?e.element.classList.contains("e-resfilterdiv")?this.parent.filterModule.filterModule.closeResponsiveDialog(this.isCustomDlgRender):e.element.classList.contains("e-customfilterdiv")&&this.closeCustomFilter():this.action===K.isSort&&this.closeCustomDialog(),this.parent.off(gr,this.keyHandler)},s.prototype.sortColumn=function(){if(this.isSortApplied){this.sortPredicate.length&&this.parent.setProperties({sortSettings:{columns:[]}},!0);for(var e=0;e<this.sortPredicate.length;e++)this.parent.sortColumn(this.sortPredicate[e].field,this.sortPredicate[e].direction,this.parent.allowMultiSorting);this.sortPredicate.length||this.parent.clearSorting(),this.closeCustomDialog()}else this.closeCustomDialog()},s.prototype.getHeaderTitle=function(e,t){var r,i=this.parent;return this.action===K.isEdit?r=i.localeObj.getConstant("EditFormTitle")+e.primaryKeyValue[0]:this.action===K.isAdd?r=i.localeObj.getConstant("AddFormTitle"):this.action===K.isFilter?r=t?t.headerText||t.field:i.localeObj.getConstant("FilterButton"):this.action===K.isSort&&(r=i.localeObj.getConstant("Sort")),r},s.prototype.getDialogName=function(e){var t;return e===K.isAdd||e===K.isEdit?t="dialogEdit_wrapper_title":e===K.isFilter&&(t="responsive_filter_dialog_wrapper"),t},s.prototype.getButtonText=function(e){var t;return e===K.isAdd||e===K.isEdit?t="Save":(e===K.isFilter||this.action===K.isSort)&&(t="OKButton"),t},s.prototype.renderResponsiveHeader=function(e,t,i){var r=this,n=this.parent;n.on(gr,this.keyHandler,this);var o=n.element.id+this.getDialogName(this.action),a=n.createElement("div",{className:"e-res-custom-element"}),h=n.createElement("div",{className:"e-dlg-custom-header",id:o});h.innerHTML=this.getHeaderTitle(t,e),a.appendChild(h);var d=n.createElement("button");i||(this.saveBtn=new ze.zx({cssClass:this.parent.cssClass?"e-primary e-flat e-res-apply-btn "+this.parent.cssClass:"e-primary e-flat e-res-apply-btn"}),d.innerHTML=n.localeObj.getConstant(this.getButtonText(this.action)),this.saveBtn.appendTo(d),d.onclick=function(v){r.dialogHdrBtnClickHandler()});var p=this.action===K.isSort,c=this.action===K.isFilter;if(c||p){var u=p?"sort":"filter",f=n.createElement("button");if(this.filterClearBtn=new ze.zx({cssClass:this.parent.cssClass?"e-primary e-flat e-res-"+u+"-clear-btn "+this.parent.cssClass:"e-primary e-flat e-res-"+u+"-clear-btn"}),c){var g=n.createElement("span",{className:"e-btn-icon e-icon-filter-clear e-icons"});f.appendChild(g)}else f.innerHTML=n.localeObj.getConstant("Clear");a.appendChild(f),this.filterClearBtn.appendTo(f),f.onclick=function(v){w(v.target,"e-customfilter")?(r.parent.filterModule.clearFiltering(),r.removeCustomDlgFilterEle()):c?r.filterClear():(r.resetSortButtons(),r.sortedCols=[],r.sortPredicate=[],r.isSortApplied=!0)},a.appendChild(f)}return i||a.appendChild(d),a},s.prototype.filterClear=function(){this.parent.filterModule.filterModule.clearCustomFilter(this.filteredCol),this.parent.filterModule.filterModule.closeResponsiveDialog()},s.prototype.dialogHdrBtnClickHandler=function(){this.action===K.isEdit||this.action===K.isAdd?this.parent.endEdit():this.action===K.isFilter?this.parent.filterModule.filterModule.applyCustomFilter({col:this.filteredCol,isCustomFilter:this.isCustomDlgRender}):this.action===K.isSort&&this.sortColumn()},s.prototype.closeCustomDialog=function(){if(this.isCustomDlgRender){var e=this.customResponsiveDlg.element.querySelector(".e-mainfilterdiv");(0,l.Od)(e)}else this.isRowResponsive=!1,this.isCustomDlgRender=!1,this.destroyCustomFilterDialog()},s.prototype.destroyCustomFilterDialog=function(){if(this.customResponsiveDlg){var e=document.getElementById(this.customResponsiveDlg.element.id);this.customResponsiveDlg&&!this.customResponsiveDlg.isDestroyed&&e&&(this.customResponsiveDlg.destroy(),(0,l.Od)(e)),this.closeCustomFilter(),this.action===K.isSort&&(this.sortPredicate=[],this.sortedCols=[],this.isSortApplied=!1)}},s.prototype.closeCustomFilter=function(){if(!this.isDialogClose&&this.customFilterDlg){var e=document.getElementById(this.customFilterDlg.element.id);this.customFilterDlg&&!this.customFilterDlg.isDestroyed&&e&&(this.customFilterDlg.destroy(),(0,l.Od)(e))}this.isCustomDialog=!1,this.isDialogClose=!1},s.prototype.removeCustomDlgFilterEle=function(e){if(e)e.parentElement.classList.contains("e-filtersetdiv")?(0,l.Od)(e.parentElement):(0,l.Od)(e);else for(var t=this.customColumnDiv.children,i=0;i<t.length;i++)(e=t[i].querySelector(".e-filtersetdiv"))&&((0,l.Od)(e),i--)},s.prototype.keyHandler=function(e){13===e.keyCode&&(this.action===K.isFilter&&e.target.classList.contains("e-searchinput")||this.action===K.isEdit||this.action===K.isAdd)&&this.dialogHdrBtnClickHandler()},s.prototype.editComplate=function(e){("save"===e.requestType||"cancel"===e.requestType)&&this.parent.off(gr,this.keyHandler)},s.prototype.removeEventListener=function(){this.customColumnDiv&&l.bi.remove(this.customColumnDiv,"click",this.customFilterColumnClickHandler),me(this.parent,this.evtHandlers,!0,this),this.parent.removeEventListener(H,this.onActionCompleteFn)},s}(),fh=function(){function s(){this.services={}}return s.prototype.register=function(e,t){(0,l.le)(this.services[e])&&(this.services[e]=t)},s.prototype.getService=function(e){if((0,l.le)(this.services[e]))throw"The service "+e+" is not registered";return this.services[e]},s.prototype.registerAdaptiveService=function(e,t,i){t?(e.responsiveDialogRenderer=new Ro(e.parent,e.serviceLocator),e.responsiveDialogRenderer.action=i):e.responsiveDialogRenderer&&(e.responsiveDialogRenderer.removeEventListener(),e.responsiveDialogRenderer=void 0)},s}(),gh=function(){function s(){this.rendererMap={}}return s.prototype.addRenderer=function(e,t){var i=(0,l.I$)(de,e);(0,l.le)(this.rendererMap[i])&&(this.rendererMap[i]=t)},s.prototype.getRenderer=function(e){var t=(0,l.I$)(de,e);if((0,l.le)(this.rendererMap[t]))throw"The renderer "+t+" is not found";return this.rendererMap[t]},s}(),Un=function(){function s(e){this.parent=e}return s.prototype.setWidthToColumns=function(){var r,e=0,t=this.parent.getColumnIndexesInView(),i=!0;if(this.parent.allowGrouping)for(var n=this.parent.groupSettings.columns.length;e<n;e++)this.parent.enableColumnVirtualization&&-1===t.indexOf(e)?i=!1:this.setColumnWidth(new De({width:"30px"}),e);(this.parent.detailTemplate||this.parent.childGrid)&&(this.setColumnWidth(new De({width:"30px"}),e),e++),this.parent.isRowDragable()&&"Right"!==this.parent.getFrozenMode()&&(this.setColumnWidth(new De({width:"30px"}),e),e++);for(var o=this.parent.getColumns(),a=0;a<o.length;a++)this.setColumnWidth(o[a],i&&this.parent.enableColumnVirtualization?void 0:a+e);this.parent.isRowDragable()&&"Right"===this.parent.getFrozenMode()&&this.setColumnWidth(new De({width:"30px"}),o.length),r=this.getTableWidth(this.parent.getColumns()),"auto"!==this.parent.width&&-1===this.parent.width.toString().indexOf("%")&&this.setMinwidthBycalculation(r)},s.prototype.setMinwidthBycalculation=function(e){var t=0,i=this.parent.getColumns().filter(function(p){return(0,l.le)(p.width)||"auto"===p.width});if(i.length){t=(0,l.le)(this.parent.width)||"auto"===this.parent.width||"string"!=typeof this.parent.width||-1!==this.parent.width.indexOf("%")?this.parent.element.getBoundingClientRect().width-e:("string"==typeof this.parent.width?parseInt(this.parent.width,10):this.parent.width)-e;for(var r=0,n=0,o=i;n<o.length;n++){var a=o[n];r+=(0,l.le)(a.minWidth)?0:"string"==typeof a.minWidth?parseInt(a.minWidth,10):a.minWidth}for(var h=0;h<i.length;h++){0===e&&this.parent.allowResizing&&this.isWidthUndefined()&&h!==i.length-1&&this.setUndefinedColumnWidth(i);var d=this.parent.getColumnIndexByField(i[h].field)+this.parent.getIndentCount();0!==e&&t<r?this.setWidth(i[h].minWidth,d):0!==e&&t>r&&this.setWidth("",d,!0)}}},s.prototype.setUndefinedColumnWidth=function(e){for(var t=0;t<e.length;t++)t!==e.length-1&&(e[t].width=200,this.setWidth(200,this.parent.getColumnIndexByField(e[t].field)))},s.prototype.setColumnWidth=function(e,t,i){if(!(this.parent.getColumns().length<1)){var r=(0,l.le)(t)?this.parent.getNormalizedColumnIndex(e.uid):t,n=this.getWidth(e),o=this.getTableWidth(this.parent.getColumns());null!==n&&(this.setWidth(n,r),"auto"!==this.parent.width&&-1===this.parent.width.toString().indexOf("%")&&this.setMinwidthBycalculation(o),(this.parent.allowResizing&&"resize"===i||this.parent.getFrozenColumns()&&this.parent.allowResizing)&&this.setWidthToTable(),this.parent.notify(yi,{index:r,width:n,column:e,module:i}))}},s.prototype.setWidth=function(e,t,i){this.parent.groupSettings.columns.length>t&&es(this.parent)&&(e=(30/this.parent.element.offsetWidth*100).toFixed(1)+"%");var h,n=this.parent.getHeaderTable(),o=this.parent.getContentTable(),a=(0,l.Ac)(e),d=this.parent.getFrozenColumns(),p=this.parent.isRowDragable();d=d&&p?d+1:d;var S,c=this.parent.getHeaderContent().querySelector("."+W),u=this.parent.getContent().querySelector("."+_),f=this.parent.getFrozenLeftColumnsCount(),g=this.parent.getFrozenRightColumnsCount(),v=this.parent.getMovableColumnsCount(),m=0!==f||0!==g;if(d&&t>=d){if(!c||!c.querySelector(q))return;h=c.querySelector(q+":not(.e-masked-colgroup)").children[t-d]}else if(this.parent.enableColumnVirtualization&&d&&this.parent.contentModule.isXaxis()&&c.scrollLeft>0)h=(C=c.querySelector(q)).children[C.children.length-1-t];else if(m){var b=void 0;if(f&&!g)b=(t=p?t-1:t)<f?n:c;else if(!f&&g)b=t>=v?n:c;else if(f&&g){t=p?t-1:t;var y=this.parent.getFrozenRightHeader();b=t<f?n:t<f+v?c:y}if(!(h=this.getColumnLevelFrozenColgroup(t,f,v,b)))return}else h=n.querySelector(q).children[t];if(h&&!i?h.style.width=a:h&&i&&(h.style.width=""),d&&t>=d)S=this.parent.getContent().querySelector("."+_).querySelector(q+":not(.e-masked-colgroup)").children[t-d];else if(this.parent.enableColumnVirtualization&&d&&this.parent.contentModule.isXaxis()&&u.scrollLeft>0){var C;S=(C=this.parent.getContent().querySelector("."+_).querySelector(q)).children[C.children.length-1-t]}else if(m){if(b=void 0,f&&!g&&(b=t<f?o:u),!f&&g&&(b=t>=v?o:u),f&&g){var R=this.parent.getContent().querySelector(".e-frozen-right-content");b=t<f?o:t<f+v?u:R}S=this.getColumnLevelFrozenColgroup(t,f,v,b)}else S=o.querySelector(q).children[t];if(S&&!i?S.style.width=a:S&&i&&(S.style.width=""),!this.parent.enableColumnVirtualization){for(var F=this.parent.element.querySelectorAll(".e-table.e-inline-edit"),D=[],L=0;L<F.length;L++)if(w(F[L],"e-grid").id===this.parent.element.id)for(var k=0;k<F[L].querySelector("colgroup").children.length;k++)D.push(F[L].querySelector("colgroup").children[k]);F.length&&D.length&&(D[t].style.width=a)}this.parent.isFrozenGrid()&&this.refreshFrozenScrollbar()},s.prototype.getColumnLevelFrozenColgroup=function(e,t,i,r){if(!r||!r.querySelector(q))return null;var n=this.parent.getColumns(),o=this.parent.isRowDragable(),a=this.parent.getFrozenMode(),d=[].slice.call(r.querySelector(q+":not(.e-masked-colgroup)").children);return"Right"===a&&o&&e===i+this.parent.getFrozenRightColumnsCount()?d[d.length-1]:o&&-1===e?d[0]:"Left"===n[e].freeze?d[o?e+1:e]:"Right"===n[e].freeze?d[e-(t+i)]:d[e-t]},s.prototype.refreshFrozenScrollbar=function(){var e={cancel:!1};if(this.parent.notify("prevent-frozen-scroll-refresh",e),!e.cancel){var t=zt(),i=this.parent.element.querySelector(".e-frozenscrollbar"),r=this.parent.element.querySelector(".e-movablescrollbar"),n=this.parent.getContent().querySelector("."+He),o=this.parent.getContent().querySelector("."+_),a=n.firstElementChild.getBoundingClientRect().width,h=o.firstElementChild.getBoundingClientRect().width;if("Right"===this.parent.getFrozenMode()&&(a+=t),i.style.width=a+"px",this.parent.getFrozenMode()===B){var d=this.parent.element.querySelector(".e-frozen-right-scrollbar"),p=this.parent.getContent().querySelector(".e-frozen-right-content").firstElementChild.getBoundingClientRect().width;"auto"!==this.parent.height&&(p+=t),d.style.width=p+"px"}else{if(this.parent.enableColumnVirtualization){var c=this.parent.getMovableVirtualContent().querySelector(".e-virtualtrack");c&&(h=c.scrollWidth)}"Right"!==this.parent.getFrozenMode()&&"auto"!==this.parent.height&&(h+=t)}r.firstElementChild.style.width=h+"px"}},s.prototype.getSiblingsHeight=function(e){return this.getHeightFromDirection(e,"previous")+this.getHeightFromDirection(e,"next")},s.prototype.getHeightFromDirection=function(e,t){for(var i=e[t+"ElementSibling"],r=0,n=[pe,Rt,"e-groupdroparea","e-gridpager","e-toolbar"];i;)n.some(function(o){return i.classList.contains(o)})&&(r+=i.offsetHeight),i=i[t+"ElementSibling"];return r},s.prototype.isWidthUndefined=function(){var e=this.parent.getColumns().filter(function(t){return(0,l.le)(t.width)&&(0,l.le)(t.minWidth)}).length;return this.parent.getColumns().length===e},s.prototype.getWidth=function(e){if((0,l.le)(e.width)&&this.parent.allowResizing&&(0,l.le)(e.minWidth)&&!this.isWidthUndefined()&&(e.width=200),this.parent.isFrozenGrid()&&(0,l.le)(e.width)&&(e.getFreezeTableName()===te||e.getFreezeTableName()===Q)&&(e.width=200),!e.width)return null;var t=parseInt(e.width.toString(),10);return e.minWidth&&t<parseInt(e.minWidth.toString(),10)?e.minWidth:e.maxWidth&&t>parseInt(e.maxWidth.toString(),10)?e.maxWidth:e.width},s.prototype.getTableWidth=function(e){for(var t=0,i=0,r=e;i<r.length;i++){var n=r[i],o=this.getWidth(n);"auto"===n.width&&(o=0),!1!==n.visible&&null!==o&&(t+=parseInt(o.toString(),10))}return t},s.prototype.calcMovableOrFreezeColWidth=function(e){var t=this.parent.getColumns().slice(),i=this.parent.getFrozenLeftColumnsCount()||this.parent.getFrozenColumns(),r=this.parent.getMovableColumnsCount(),n=this.parent.getFrozenRightColumnsCount();return"movable"===e?(n&&t.splice(i+r,t.length),i&&t.splice(0,i)):"freeze-left"===e?t.splice(i,t.length):"freeze-right"===e&&t.splice(0,i+r),(0,l.Ac)(this.getTableWidth(t))},s.prototype.setWidthToFrozenRightTable=function(){var e=this.calcMovableOrFreezeColWidth("freeze-right");e=this.isAutoResize()?"100%":e;var t=this.parent.getHeaderContent().querySelector(".e-frozen-right-header").querySelector("."+Z+":not(.e-masked-table)"),i=this.parent.getContent().querySelector(".e-frozen-right-content").querySelector("."+Z+":not(.e-masked-table)");t.style.width=e,i.style.width=e},s.prototype.setWidthToFrozenLeftTable=function(){var e=this.calcMovableOrFreezeColWidth("freeze-left");e=this.isAutoResize()?"100%":e,this.parent.getHeaderTable().style.width=e,this.parent.getContentTable().style.width=e},s.prototype.setWidthToMovableTable=function(){var e="",t=this.parent.getColumns().filter(function(o){return(0,l.le)(o.width)}).length>=1,i=this.parent.getColumns().filter(function(o){return"auto"===o.width}).length>=1,r=this.parent.getHeaderContent().querySelector("."+W),n=this.parent.getContent().querySelector("."+_);"number"!=typeof this.parent.width||t||i?!t&&!i&&(e=this.calcMovableOrFreezeColWidth("movable")):e=(0,l.Ac)(this.parent.width-parseInt(this.calcMovableOrFreezeColWidth("freeze").split("px")[0],10)-5),e=this.isAutoResize()?"100%":e,r.firstElementChild&&(r.firstElementChild.classList.contains("e-masked-table")?r.childNodes[1].style.width=e:r.firstElementChild.style.width=e),n.firstElementChild.classList.contains("e-masked-table")?n.childNodes[1].style.width=e:n.firstElementChild.style.width=e},s.prototype.setWidthToFrozenEditTable=function(){var e=this.calcMovableOrFreezeColWidth("freeze");e=this.isAutoResize()?"100%":e,this.parent.element.querySelectorAll(".e-table.e-inline-edit")[0].style.width=e},s.prototype.setWidthToMovableEditTable=function(){var e=this.calcMovableOrFreezeColWidth("movable");e=this.isAutoResize()?"100%":e,this.parent.element.querySelectorAll(".e-table.e-inline-edit")[1].style.width=e},s.prototype.setWidthToTable=function(){var e=(0,l.Ac)(this.getTableWidth(this.parent.getColumns()));this.parent.isFrozenGrid()?((this.parent.getFrozenColumns()||this.parent.getFrozenLeftColumnsCount())&&this.setWidthToFrozenLeftTable(),this.setWidthToMovableTable(),this.parent.getFrozenRightColumnsCount()&&this.setWidthToFrozenRightTable()):((this.parent.detailTemplate||this.parent.childGrid)&&this.setColumnWidth(new De({width:"30px"})),e=this.isAutoResize()?"100%":e,this.parent.getHeaderTable().style.width=e,this.parent.getContentTable().style.width=e);var t=this.parent.element.querySelector(".e-table.e-inline-edit");t&&this.parent.getFrozenColumns()?(this.setWidthToFrozenEditTable(),this.setWidthToMovableEditTable()):t&&(t.style.width=e)},s.prototype.isAutoResize=function(){return this.parent.allowResizing&&"Auto"===this.parent.resizeSettings.mode},s}(),qi=function(){var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])})(e,t)};return function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),vh=function(){function s(e){this.currentInfo={},this.oneTime=!0,this.swap={},this.isInfiniteScroll=!1,this.forget=!1,this.skipFocus=!0,this.focusByClick=!1,this.prevIndexes={},this.refMatrix=this.refreshMatrix(!0),this.actions=["downArrow","upArrow"],this.isVirtualScroll=!1,this.parent=e,this.rowModelGen=new Je(this.parent),this.addEventListener()}return s.prototype.focusCheck=function(e){var t=e.target;this.focusByClick=!0,this.skipFocus=t.classList.contains("e-grid")},s.prototype.onFocus=function(e){if(!(this.parent.isDestroyed||l.AR.isDevice||this.parent.enableVirtualization||this.parent.element.querySelector(".e-masked-table")||!this.parent.isInitialLoad&&e&&e.target===this.parent.element&&this.parent.element.querySelector(".e-spin-show"))){this.setActive(!this.parent.enableHeaderFocus&&0===this.parent.frozenRows,this.parent.isFrozenGrid()),!this.parent.enableHeaderFocus&&!this.parent.getCurrentViewRecords().length&&("Batch"!==this.parent.editSettings.mode||"Batch"===this.parent.editSettings.mode&&this.parent.editModule&&!this.parent.editModule.getBatchChanges()[ot].length)&&this.getContent().matrix.generate(this.rowModelGen.generateRows({rows:[new st({isDataRow:!0})]}),this.getContent().selector,!1);var t=this.getContent().matrix.get(0,-1,[0,1],null,this.getContent().validator());this.getContent().matrix.select(t[0],t[1]),this.skipFocus&&(!e||e.target!==this.parent.element)&&(this.focus(e),this.skipFocus=!1)}},s.prototype.passiveFocus=function(e){this.parent.isDestroyed||e.target&&e.target.classList.contains("e-detailcell")&&(this.currentInfo.skipAction=!1,(0,l.cn)([this.currentInfo.element],["e-focused","e-focus"]))},s.prototype.onBlur=function(e){(this.parent.isEdit||e&&(!e.relatedTarget||(0,l.oq)(e.relatedTarget,".e-grid"))&&(!this.parent.element.classList.contains("e-childgrid")||this.parent.element.matches(":focus-within")))&&(!(0,l.le)(e.relatedTarget)||0!==parseInt(e.target.getAttribute("data-colindex"),10)||0!==parseInt(e.target.getAttribute("index"),10))||(this.removeFocus(),this.skipFocus=!0,this.currentInfo.skipAction=!1,this.setLastContentCellTabIndex(),this.parent.element.tabIndex=0)},s.prototype.setLastContentCellTabIndex=function(){var e=this.parent.getContentTable();e.rows[e.rows.length-1].lastElementChild.tabIndex=0},s.prototype.onClick=function(e,t){if(!w(e.target,"e-filterbarcell")||!w(e.target,"e-multiselect")&&!e.target.classList.contains("e-input-group-icon")){var i=!(0,l.le)((0,l.oq)(e.target,"."+ae)),r=!(0,l.le)((0,l.oq)(e.target,"."+pe));i=i&&r?!i:i;var n=!(0,l.le)((0,l.oq)(e.target,"."+He))||!(0,l.le)((0,l.oq)(e.target,"."+Xe)),o=!1;if(this.parent.getFrozenMode()===B&&(o=!(0,l.le)((0,l.oq)(e.target,".e-frozen-right-content"))||!(0,l.le)((0,l.oq)(e.target,".e-frozen-right-header")),n=n&&!o),!(!i&&(0,l.le)((0,l.oq)(e.target,"."+pe))||e.target.classList.contains(ie))&&(0,l.le)((0,l.oq)(e.target,".e-unboundcell"))){if(this.setActive(i,n,o),!i&&(0,l.le)((0,l.oq)(e.target,"."+pe)))return void this.clearOutline();var a={cancel:!1,byKey:!1,byClick:!(0,l.le)(e.target),clickArgs:e};if(this.parent.notify(ti,a),!a.cancel&&!(0,l.oq)(e.target,".e-inline-edit")&&(this.setActive(i,n,o),this.getContent())){if(!1===this.getContent().onClick(e,t))return;this.parent.isFrozenGrid()&&r&&e.target===this.parent.getHeaderContent().firstChild&&-1===this.active.matrix.current[0]&&this.active.matrix.current[1]===this.active.matrix.columns&&(this.active.matrix.current=[0,0]),this.focus()}}}},s.prototype.onKeyPress=function(e){if(this.parent.allowPaging){var i=this.parent.pagerModule.pagerObj.getFocusablePagerElements(this.parent.pagerModule.pagerObj.element,[]);if(this.parent.childGrid&&this.allowToPaging(e)&&i.length&&(i[0].tabIndex=0),this.parent.pagerModule.pagerObj.checkPagerHasFocus()){if("shiftTab"===e.action&&i.length&&i[0]===e.target)return this.setActive(!0),0===this.active.matrix.matrix[(r=[this.active.matrix.matrix.length-1,this.active.matrix.matrix[this.active.matrix.matrix.length-1].length-1])[0]][r[1]]&&(r=mt(this.active.matrix.matrix,r,!1)),this.active.matrix.current=r,e.preventDefault(),void this.focus(e);if("tab"!==e.action||!this.parent.element.classList.contains("e-childgrid")||(this.parent.pageSettings.pageSizes||!i.length||i[i.length-1]!==e.target)&&this.parent.pagerModule.pagerObj.getDropDownPage()!==e.target)return void this.parent.pagerModule.pagerObj.changePagerFocus(e);var n=w(this.parent.element,"e-detailcell");(0,l.IV)([this.parent.element],["e-focus"]),(0,l.IV)([n],["e-focused"]),n.tabIndex=-1}if(0===this.parent.pagerModule.pagerObj.element.tabIndex&&(38===e.keyCode||e.shiftKey&&9===e.keyCode))return e.preventDefault(),void this.getFocusedElement().focus();if(0===this.parent.pagerModule.pagerObj.element.tabIndex&&9===e.keyCode)return e.preventDefault(),void this.parent.pagerModule.pagerObj.setPagerFocus();if(this.parent.pagerModule.pagerObj.checkFirstPagerFocus()){var o=this.getContent().matrix.rows,a=this.getContent().matrix.columns;this.getContent().matrix.current=[o,a]}}if(!this.skipOn(e)){if(e.target&&w(e.target,"e-gridcontent")&&!this.parent.isFrozenGrid()){var h=[].slice.call(this.parent.getContentTable().rows);e.target===h[h.length-1].lastElementChild&&(this.setActive(!0),this.setLastContentCellActive())}if("shiftTab"===e.action&&e.target&&(e.target===this.parent.element||w(e.target,"e-toolbar")||w(e.target,"e-groupdroparea"))){if(e.target===this.parent.element)return void(this.parent.element.classList.contains("e-childgrid")&&this.focusOutFromChildGrid(e));if(w(e.target,"e-groupdroparea"))return e.preventDefault(),void this.parent.element.focus();if(w(e.target,"e-toolbar"))return e.preventDefault(),void(this.parent.allowGrouping?(c=(p=this.parent.groupModule).getFocusableGroupedItems()).length>0?c[c.length-1].focus():p.element.focus():this.parent.element.focus())}var u=!1;if("tab"===e.action&&e.target&&(e.target===this.parent.element||w(e.target,"e-toolbar")||w(e.target,"e-groupdroparea"))){if(this.parent.allowGrouping&&this.parent.groupSettings.showDropArea&&(e.target===this.parent.element||e.target.classList.contains("e-groupdroparea"))){var p,c;if((c=(p=this.parent.groupModule).getFocusableGroupedItems()).length>0)return e.preventDefault(),void c[0].focus();if(!e.target.classList.contains("e-groupdroparea"))return e.preventDefault(),void p.element.focus()}if((this.parent.toolbar||this.parent.toolbarTemplate)&&(e.target===this.parent.element||w(e.target,"e-groupdroparea")||e.target.classList.contains("e-toolbar"))){var f=this.parent.toolbarModule.element,g=f.querySelectorAll(".e-toolbar-item:not(.e-overlay):not(.e-hidden)");if(g.length>0)return e.preventDefault(),void g[0].querySelector(".e-btn,.e-input").focus();if(!e.target.classList.contains("e-toolbar"))return e.preventDefault(),void f.focus()}(e.target===this.parent.element||w(e.target,"e-toolbar")||w(e.target,"e-groupdroparea"))&&(u=!0)}u&&(!this.parent.isFrozenGrid()||"Left"!==this.parent.getFrozenMode()&&this.parent.getFrozenMode()!==B?this.setActive(!(!this.parent.allowGrouping||this.parent.groupSettings.columns.length!==this.parent.columns.length)):this.setActive(!1,!0),this.active.matrix.current=[0,-1]),this.activeKey=e.action;var v={cancel:!1,byKey:!0,byClick:!1,keyArgs:e};if(this.parent.notify(ti,v),!v.cancel){var m=this.getContent().matrix.current;this.currentInfo.outline=!0;var C=this.getContent().jump(e.action,m);this.swap=C,C.swap&&(this.setActive(!C.toHeader,C.toFrozen,C.toFrozenRight),this.getContent().matrix.current=this.getContent().getNextCurrent(m,C,this.active,e.action),this.prevIndexes={}),this.setActiveByKey(e.action,this.getContent());var b=!this.content.lastIdxCell&&this.getContent().onKeyPress(e);if(e.target&&w(e.target,"e-gridheader"))if(this.parent.isFrozenGrid()){if("shiftTab"===e.action&&m.toString()===this.active.matrix.current.toString()&&!C.swap)return void this.focusOutFromHeader(e)}else{if("tab"===e.action&&m.toString()===this.active.matrix.current.toString()){var r,y=mt(this.active.matrix.matrix,this.active.matrix.current,!0);0===this.active.matrix.matrix[(r=[this.active.matrix.matrix.length-1,this.active.matrix.matrix[this.active.matrix.matrix.length-1].length-1])[0]][r[1]]&&(r=mt(this.active.matrix.matrix,r,!1)),this.active.matrix.current.toString()===r.toString()?(b=!0,this.setActive(!0),0===this.active.matrix.matrix[(S=[0,0])[0]][S[1]]&&(S=mt(this.active.matrix.matrix,[0,0],!0)),this.active.matrix.current=S):this.active.matrix.current.toString()!==y.toString()&&(this.active.matrix.current=y)}if("shiftTab"===e.action&&m.toString()===this.active.matrix.current.toString()){var R=mt(this.active.matrix.matrix,this.active.matrix.current,!1);if(R.toString()===this.active.matrix.current.toString())return void this.focusOutFromHeader(e);this.active.matrix.current.toString()!==R.toString()&&!b&&(b=!0,this.active.matrix.current=R)}}if(e.target&&w(e.target,"e-gridcontent")&&!this.parent.isFrozenGrid()&&"shiftTab"===e.action&&m.toString()===this.active.matrix.current.toString()){if(this.parent.allowGrouping&&this.parent.groupSettings.columns.length===this.parent.columns.length)return void this.focusOutFromHeader(e);var S;0===this.active.matrix.matrix[(S=[0,0])[0]][S[1]]&&(S=mt(this.active.matrix.matrix,[0,0],!0)),!b&&S.toString()===this.active.matrix.current.toString()&&(b=!0,this.setActive(!1),this.setLastContentCellActive())}if(!1===b){if(this.clearIndicator(),"shiftTab"===e.action&&m.toString()===[0,0].toString()&&(this.parent.element.tabIndex=-1),this.parent.allowPaging&&!this.parent.pagerModule.pagerObj.checkPagerHasFocus()&&this.allowToPaging(e)&&m.toString()!==[0,0].toString()){if(e.preventDefault(),40===e.keyCode)return void this.parent.pagerModule.pagerObj.setPagerContainerFocus();if(9===e.keyCode)return void this.parent.pagerModule.pagerObj.setPagerFocus()}return void(this.parent.element.classList.contains("e-childgrid")&&this.focusOutFromChildGrid(e))}e.preventDefault(),this.focus(e)}}},s.prototype.setLastContentCellActive=function(){var e=[this.active.matrix.matrix.length-1,this.active.matrix.matrix[this.active.matrix.matrix.length-1].length-1];0===this.active.matrix.matrix[e[0]][e[1]]&&(e=mt(this.active.matrix.matrix,e,!1)),this.active.matrix.current=e},s.prototype.focusOutFromChildGrid=function(e){var t=w(this.parent.element,"e-table"),i=w(t,"e-grid").ej2_instances[0],r=w(this.parent.element,"e-detailcell"),n=w(this.parent.element,"e-detailrow").getAttribute("data-uid"),o=i.getRows(),a=o.map(function(u){return u.getAttribute("data-uid")}).indexOf(n);if(!("tab"===e.action&&a>=o.length-1)){var h;if((0,l.IV)([this.parent.element],["e-focus"]),(0,l.IV)([r],["e-focused"]),r.tabIndex=-1,e.preventDefault(),i.focusModule.removeFocus(),"shiftTab"===e.action){for(var p=o[a-1].cells,c=p.length-1;c>=0;c--)if(!(h=p[c]).classList.contains("e-hide")){i.focusModule.active.matrix.current=[a-1,c];break}}else h=o[a+1].cells[0],i.focusModule.active.matrix.current=[a+1,0];i.focusModule.currentInfo.element=h,i.focusModule.currentInfo.elementToFocus=h,(0,l.cn)([h],["e-focused","e-focus"]),h.tabIndex=0,h.focus()}},s.prototype.focusOutFromHeader=function(e){if(e.preventDefault(),this.removeFocus(),this.parent.toolbar||this.parent.toolbarTemplate){var t=this.parent.toolbarModule.element,i=t.querySelectorAll(".e-toolbar-item:not(.e-overlay):not(.e-hidden)");i.length>0?i[i.length-1].querySelector(".e-btn,.e-input").focus():t.focus()}else if(this.parent.allowGrouping&&this.parent.groupSettings.showDropArea){var r=this.parent.groupModule,n=r.getFocusableGroupedItems();n.length>0?n[n.length-1].focus():r.element.focus()}else this.parent.element.focus()},s.prototype.allowToPaging=function(e){return!("Batch"===this.parent.editSettings.mode&&this.parent.editSettings.allowAdding&&40!==e.keyCode)},s.prototype.skipOn=function(e){var t=e.target;if(!t)return!1;if(this.currentInfo.skipAction)return this.clearIndicator(),!0;if(["pageUp","pageDown","altDownArrow"].indexOf(e.action)>-1)return this.clearIndicator(),!0;if(this.parent.allowGrouping){var i=this.parent.groupModule.getFocusableGroupedItems();if(w(e.target,"e-groupheadercell")&&!(e.target===i[0]&&"shiftTab"===e.action||e.target===i[i.length-1]&&"tab"===e.action))return!0}if(this.parent.toolbar||this.parent.toolbarTemplate){var n=this.parent.toolbarModule.element.querySelectorAll(".e-toolbar-item:not(.e-overlay):not(.e-hidden)");if(w(e.target,"e-toolbar-item")&&!(n.length>0&&(w(e.target,"e-toolbar-item")===n[0]&&"shiftTab"===e.action||w(e.target,"e-toolbar-item")===n[n.length-1]&&"tab"===e.action)))return!0}var o=(0,l.oq)(t,"th")&&!(0,l.oq)(t,"th").tabIndex;!e.target.classList.contains("e-filterbaroperator")||13!==e.keyCode&&27!==e.keyCode||(0,l.oq)(e.target,".e-filterbarcell").querySelector("input").focus(),o&&null!==(0,l.oq)(document.activeElement,".e-filterbarcell")&&this.removeFocus();var h=null!==(0,l.oq)(document.activeElement,".e-filterbarcell");if(this.parent.enableHeaderFocus&&h){var d=this.active.matrix,p=d.current;h=d.matrix[p[0]].lastIndexOf(1)!==p[1]}return"delete"===e.action||"Batch"!==this.parent.editSettings.mode&&(this.parent.isEdit||["insert","f2"].indexOf(e.action)>-1)||h&&this.parent.enableHeaderFocus||h&&"tab"!==e.action&&"shiftTab"!==e.action||null!==(0,l.oq)(document.activeElement,"#"+this.parent.element.id+"_searchbar")&&["enter","leftArrow","rightArrow","shiftLeft","shiftRight","ctrlPlusA"].indexOf(e.action)>-1||null===(0,l.oq)(t,"."+ae)&&null===(0,l.oq)(t,"."+pe)&&!(e.target===this.parent.element||w(e.target,"e-toolbar")||w(e.target,"e-groupdroparea"))||"space"===e.action&&!t.classList.contains(Nt)&&null===(0,l.oq)(t,"."+Nt)&&null===(0,l.oq)(t,".e-headerchkcelldiv")||null!==(0,l.oq)(t,".e-filter-popup")},s.prototype.focusVirtualElement=function(e){var t=this;if(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling){var i={virtualData:{},isAdd:!1,isCancel:!1};this.parent.notify(gt,i);var r=this.actions.some(function(o){return o===t.activeKey}),n=!!this.parent.contentModule&&this.parent.contentModule.selectedRowIndex>-1;i.isAdd||Object.keys(i.virtualData).length||r||i.isCancel||n?(this.parent.notify(uo,{isCancel:!1}),i.isCancel=!1,this.parent.contentModule.selectedRowIndex=-1,r&&(this.activeKey=this.empty,this.parent.notify("virtaul-key-handler",e)),this.currentInfo.elementToFocus.focus({preventScroll:!0})):this.isVirtualScroll||this.isInfiniteScroll?this.currentInfo.elementToFocus.focus({preventScroll:!0}):this.currentInfo.elementToFocus.focus()}this.isVirtualScroll=this.isInfiniteScroll=!1},s.prototype.getFocusedElement=function(){return this.currentInfo.elementToFocus},s.prototype.getContent=function(){return this.active||this.content},s.prototype.setActive=function(e,t,i){this.active=e?t?this.fContent:i?this.frContent:this.content:t?this.fHeader:i?this.frHeader:this.header},s.prototype.setFocusedElement=function(e,t){var i=this;this.currentInfo.elementToFocus=e,setTimeout(function(){(0,l.le)(i.currentInfo.elementToFocus)||(i.parent.enableVirtualization||i.parent.enableInfiniteScrolling?i.focusVirtualElement(t):i.currentInfo.elementToFocus.focus())},0)},s.prototype.focus=function(e){this.parent.notify($s,e),this.removeFocus(),this.addFocus(this.getContent().getFocusInfo(),e)},s.prototype.removeFocus=function(e){!this.currentInfo.element||((0,l.IV)([this.currentInfo.element,this.currentInfo.elementToFocus],["e-focused","e-focus"]),this.currentInfo.element.tabIndex=-1)},s.prototype.addOutline=function(){var e=this.getContent().getFocusInfo();e.element&&((0,l.cn)([e.element],["e-focused"]),(0,l.cn)([e.elementToFocus],["e-focus"]))},s.prototype.focusHeader=function(){this.setActive(!1,this.parent.isFrozenGrid()),this.resetFocus()},s.prototype.focusContent=function(){this.setActive(!0,this.parent.isFrozenGrid()),this.resetFocus()},s.prototype.resetFocus=function(){var e=this.getContent().matrix.get(0,-1,[0,1],null,this.getContent().validator());this.getContent().matrix.select(e[0],e[1]),this.focus()},s.prototype.addFocus=function(e,t){if(this.currentInfo=e,this.currentInfo.outline=e.outline&&!(0,l.le)(t),this.isInfiniteScroll&&(this.currentInfo.outline=!0),e.element){var i=e.elementToFocus.classList.contains("e-focus");if(!i){this.currentInfo.outline&&(0,l.cn)([e.element],["e-focused"]),(0,l.cn)([e.elementToFocus],["e-focus"]),e.element.tabIndex=0,i||this.setFocusedElement(e.elementToFocus,t),this.parent.notify(ir,{element:e.elementToFocus,parent:e.element,indexes:this.getContent().matrix.current,byKey:!(0,l.le)(t),byClick:(0,l.le)(t),keyArgs:t,isJump:this.swap.swap,container:this.getContent().getInfo(t),outline:!(0,l.le)(t),swapInfo:this.swap});var r=this.getContent().matrix.current,o=r[1];this.prevIndexes={rowIndex:r[0],cellIndex:o},this.focusedColumnUid=this.parent.getColumnByIndex(o).uid,this.focusByClick=!1}}},s.prototype.refreshMatrix=function(e){var t=this;return function(i){e&&i.args&&i.args.isFrozen&&!t.fContent?t.fContent=new yh(t.parent):e&&!t.frContent&&i.args&&i.args.renderFrozenRightContent?t.frContent=new bh(t.parent):e&&!t.content&&(t.content=new Rr(t.parent)),!e&&i.args&&i.args.isFrozen&&!t.fHeader?t.fHeader=new Ch(t.parent):!e&&i.args&&i.args.renderFrozenRightContent&&!t.frHeader?t.frHeader=new wh(t.parent):!e&&!t.header&&(t.header=new Wn(t.parent));var r=e?i.args&&i.args.isFrozen?t.fContent:i.args&&i.args.renderFrozenRightContent?t.frContent:t.content:i.args&&i.args.isFrozen?t.fHeader:i.args&&i.args.renderFrozenRightContent?t.frHeader:t.header,n=e?i.rows.slice(t.parent.frozenRows):i.rows,o=e?i.rows.slice(0,t.parent.frozenRows):i.rows;t.parent.isCollapseStateEnabled()&&e&&(n=n.filter(function(y){return!1!==y.visible}));var g,a=!(0,l.le)(t.parent.rowTemplate),h=r.matrix.generate(o,r.selector,a);if("batchAdd"===i.name&&t.parent.isFrozenGrid()){var p=t.parent.getMovableRowsObject().map(function(y){return y.clone()}),c=n.map(function(y){return y.clone()});if(t.fContent.matrix.generate(c,t.fContent.selector,a),t.content.matrix.generate(p,t.content.selector,a),t.parent.getFrozenMode()===B){var f=t.parent.getFrozenRightRowsObject().map(function(y){return y.clone()});t.frContent.matrix.generate(f,t.frContent.selector,a)}}else r.matrix.generate(n,r.selector,a);if(t.parent.isFrozenGrid()&&i.args&&"sorting"===i.args.requestType||r.generateRows(o,{matrix:h,handlerInstance:i.args&&i.args.isFrozen?t.fHeader:i.args&&i.args.renderFrozenRightContent?t.frHeader:t.header}),!l.AR.isDevice&&i&&i.args&&(!t.focusByClick&&"paging"===i.args.requestType&&!t.parent.pagerModule.pagerObj.checkPagerHasFocus()&&(t.skipFocus=!1,t.parent.element.focus()),"grouping"===i.args.requestType&&(t.skipFocus=!0)),i&&i.args&&"virtualscroll"===i.args.requestType)if(t.currentInfo.uid){if(i.rows.some(function(y,S){return g=S,y.uid===t.currentInfo.uid})&&(t.content.matrix.current[0]=g,t.content.matrix.current[1]=t.parent.getColumnIndexByUid(t.focusedColumnUid)||0,m=t.getContent().getFocusInfo().elementToFocus)){var C=m.getBoundingClientRect(),b=t.parent.element.getBoundingClientRect();C.top>=0&&C.left>=0&&C.right<=Math.min(b.right,window.innerWidth||document.documentElement.clientWidth)&&C.bottom<=Math.min(b.bottom,window.innerHeight||document.documentElement.clientHeight)&&(t.isVirtualScroll=!0,t.focus())}}else if(i.args.focusElement&&i.args.focusElement.classList.contains("e-filtertext")){var m;(m=t.parent.element.querySelector("#"+i.args.focusElement.id))&&m.focus()}}},s.prototype.addEventListener=function(){var e=this;this.parent.isDestroyed||(l.bi.add(this.parent.element,"mousedown",this.focusCheck,this),l.bi.add(this.parent.element,"focus",this.onFocus,this),this.parent.element.addEventListener("focus",this.passiveHandler=function(t){return e.passiveFocus(t)},!0),l.bi.add(this.parent.element,"focusout",this.onBlur,this),this.evtHandlers=[{event:oe,handler:this.onKeyPress},{event:xe,handler:this.onClick},{event:ee,handler:this.refMatrix},{event:xi,handler:this.refMatrix},{event:Ht,handler:this.refMatrix},{event:ue,handler:this.refreshMatrix()},{event:"close-edit",handler:this.restoreFocus},{event:Pt,handler:this.restoreFocus},{event:"start-edit",handler:this.clearIndicator},{event:"start-add",handler:this.clearIndicator},{event:"sorting-complete",handler:this.restoreFocus},{event:"filtering-complete",handler:this.filterfocus},{event:"grouping-complete",handler:this.restoreFocusWithAction},{event:"ungrouping-complete",handler:this.restoreFocusWithAction},{event:"batchAdd",handler:this.refMatrix},{event:"batchCancel",handler:this.refMatrix},{event:"batchDelete",handler:this.refMatrix},{event:"detailDataBound",handler:this.refMatrix},{event:Ye,handler:this.refMatrix},{event:ir,handler:this.internalCellFocus}],me(this.parent,this.evtHandlers,!0,this))},s.prototype.filterfocus=function(){"FilterBar"!==this.parent.filterSettings.type&&this.restoreFocus()},s.prototype.removeEventListener=function(){this.parent.isDestroyed||(l.bi.remove(this.parent.element,"mousedown",this.focusCheck),l.bi.remove(this.parent.element,"focus",this.onFocus),l.bi.remove(this.parent.element,"focusout",this.onBlur),this.parent.element.removeEventListener("focus",this.passiveHandler,!0),me(this.parent,this.evtHandlers,!1))},s.prototype.destroy=function(){this.removeEventListener()},s.prototype.restoreFocus=function(){var e=this.parent.groupModule;this.parent.allowGrouping&&e&&e.groupSortFocus?e.groupSortFocus=!1:this.addFocus(this.getContent().getFocusInfo())},s.prototype.restoreFocusWithAction=function(e){if(!this.parent.enableInfiniteScrolling){var t=this.getContent().matrix,i=t.current;switch(e.requestType){case"grouping":case"ungrouping":i[1]=!i.length||this.parent.groupSettings.showGroupedColumn||(0,l.le)(t.matrix[i[0]])?"grouping"===e.requestType?i[1]+1:i[1]-1:t.matrix[i[0]].indexOf(1)}this.getContent().matrix.current=i;var r=this.parent.groupModule;if(this.parent.allowGrouping&&r&&r.groupCancelFocus){var n=r.getFocusableGroupedItems();return n.length?n[0].parentElement.getAttribute("ej-mappingname")===e.columnName?n[3].focus():n[0].focus():r.element.focus(),void(r.groupCancelFocus=!1)}this.addFocus(this.getContent().getFocusInfo())}},s.prototype.clearOutline=function(){this.getContent().matrix.current=this.getContent().matrix.get(0,-1,[0,1],"downArrow",this.getContent().validator()),this.clearIndicator()},s.prototype.clearIndicator=function(){!this.currentInfo.element||!this.currentInfo.elementToFocus||(0,l.IV)([this.currentInfo.element,this.currentInfo.elementToFocus],["e-focus","e-focused"])},s.prototype.getPrevIndexes=function(){var e=this.forget;return this.forget=!1,e||!Object.keys(this.prevIndexes).length?{rowIndex:null,cellIndex:null}:this.prevIndexes},s.prototype.forgetPrevious=function(){this.forget=!0},s.prototype.setActiveByKey=function(e,t){var i=this;if(this.parent.isFrozenGrid()||0!==this.parent.frozenRows){var r,n={home:function(){return{toHeader:!r.isContent,toFrozen:!0}},end:function(){return{toHeader:!r.isContent,toFrozen:!1}},ctrlHome:function(){return{toHeader:!0,toFrozen:i.parent.isFrozenGrid()}},ctrlEnd:function(){return{toHeader:!1,toFrozen:!1}}};if(e in n){r=t.getInfo();var o=n[e]();this.setActive(!o.toHeader,o.toFrozen),this.getContent().matrix.current=t.matrix.current}}},s.prototype.internalCellFocus=function(e){if(e.byKey&&e.container.isContent&&"enter"===e.keyArgs.action&&(e.parent.classList.contains("e-detailcell")||e.parent.classList.contains("e-unboundcell")||e.parent.classList.contains("e-templatecell"))){this.clearIndicator();var t=this.getContent().getFocusable(this.getFocusedElement());this.setFocusedElement(t),this.currentInfo.skipAction=!0}},s}(),mh=function(){function s(){this.matrix=[],this.current=[]}return s.prototype.set=function(e,t,i){e=Math.max(0,Math.min(e,this.rows)),t=Math.max(0,Math.min(t,this.columns)),this.matrix[e]=this.matrix[e]||[],this.matrix[e][t]=i?1:0},s.prototype.get=function(e,t,i,r,n){var o=t;if(e+i[0]<0)return[e,t];e=Math.max(0,Math.min(e+i[0],this.rows));var a=!0;if((0,l.le)(this.matrix[e]))return null;if(t=Math.max(0,Math.min(t+i[1],this.matrix[e].length-1)),o+i[1]>this.matrix[e].length-1&&n(e,t,r))return[e,o];var h=this.first(this.matrix[e],t,i,!0,r),d=(0,l.NA)(e+"."+(t=null===h?o:h),this.matrix);if(e===this.rows&&("downArrow"===r||"enter"===r)&&(i[0]=-1),null===h){for(var p=0;p<this.rows;p++)if(this.matrix[p].some(function(c){return 1===c})){a=!1;break}if(a)return[e=this.current[0],t]}return this.inValid(d)||!n(e,t,r)?this.get(e,o,i,r,n):[e,t]},s.prototype.first=function(e,t,i,r,n){return(t<0||t===e.length)&&this.inValid(e[t])&&"upArrow"!==n&&"downArrow"!==n||!e.some(function(o){return 1===o})?null:this.inValid(e[t])?this.first(e,-1!==["upArrow","downArrow","shiftUp","shiftDown"].indexOf(n)?r?0:++t:t+i[1],i,!1,n):t},s.prototype.select=function(e,t){e=Math.max(0,Math.min(e,this.rows)),t=Math.max(0,Math.min(t,this.matrix[e].length-1)),this.current=[e,t]},s.prototype.generate=function(e,t,i){this.rows=e.length-1,this.matrix=[];for(var r=0;r<e.length;r++){var n=e[r].cells.filter(function(h){return!0!==h.isSpanned});this.columns=Math.max(n.length-1,0|this.columns);for(var o=0,a=0;a<n.length;a++)n[a].column&&n[a].column.columns?o=this.columnsCount(n[a].column.columns,o):o++,this.set(r,a,!1!==e[r].visible&&t(e[r],n[a],i));this.columns=Math.max(o-1,0|this.columns)}return this.matrix},s.prototype.columnsCount=function(e,t){for(var i=e,r=t,n=0;n<i.length;n++)i[n].columns?r=this.columnsCount(i[n].columns,r):r++;return r},s.prototype.inValid=function(e){return 0===e||void 0===e},s}(),Rr=function(){function s(e){var t=this;this.matrix=new mh,this.lastIdxCell=!1,this.parent=e,this.keyActions={rightArrow:[0,1],tab:[0,1],leftArrow:[0,-1],shiftTab:[0,-1],upArrow:[-1,0],downArrow:[1,0],shiftUp:[-1,0],shiftDown:[1,0],shiftRight:[0,1],shiftLeft:[0,-1],enter:[1,0],shiftEnter:[-1,0]},this.indexesByKey=function(i){return{home:[t.matrix.current[0],-1,0,1],end:[t.matrix.current[0],t.matrix.columns+1,0,-1],ctrlHome:[0,-1,0,1],ctrlEnd:[t.matrix.rows,t.matrix.columns+1,0,-1]}[i]||null}}return s.prototype.getTable=function(){return this.parent.isFrozenGrid()?this.parent.getContent().querySelector(".e-movablecontent .e-table"):this.parent.getContentTable()},s.prototype.onKeyPress=function(e){var i=this.getCurrentFromAction(e.action,this.keyActions[e.action],e.action in this.keyActions,e);if(i){if((["tab","shiftTab"].indexOf(e.action)>-1&&this.matrix.current||[]).toString()===i.toString()||this.parent.allowPaging&&!this.parent.pagerModule.pagerObj.checkPagerHasFocus()&&this.matrix.current[0]===this.matrix.rows&&("Batch"===this.parent.editSettings.mode&&this.parent.editSettings.allowAdding&&40===e.keyCode||40===e.keyCode)){if(i.toString()===[this.matrix.rows,this.matrix.columns].toString()||i.toString()===[0,0].toString()||this.matrix.current[0]===this.matrix.rows&&this.matrix.current.toString()===i.toString()||this.parent.allowGrouping&&this.parent.infiniteScrollSettings.enableCache&&i.toString()===[0,1].toString())return!1;i=this.editNextRow(i[0],i[1],e.action)}this.matrix.select(i[0],i[1])}},s.prototype.editNextRow=function(e,t,i){var r=this.parent,n=r.editSettings.allowNextRowEdit&&(r.isEdit||r.isLastCellPrimaryKey),o=r.getColumnIndexByField(r.getVisibleColumns()[0].field),a=this.getTable().rows[e].cells[t];return"tab"===i&&n&&(e++,t=o+(this.getTable().rows[e].getElementsByClassName("e-indentcell").length+this.getTable().rows[e].getElementsByClassName("e-detailrowcollapse").length)),"shiftTab"===i&&n&&(e--,t=r.getColumnIndexByField(r.getVisibleColumns()[r.getVisibleColumns().length-1].field)),a.classList.contains(N)||a.classList.contains("e-headercell")||a.classList.contains("e-groupcaption")||a.classList.contains("e-filterbarcell")?[e,t]:this.editNextRow(e,t,i)},s.prototype.getCurrentFromAction=function(e,t,i,r){if(void 0===t&&(t=[0,0]),!i&&!this.indexesByKey(e)||0===this.matrix.current.length)return null;if(!this.shouldFocusChange(r))return this.matrix.current;var n=this.indexesByKey(e)||this.matrix.current.concat(t),o=n[0],a=n[1],h=n[2],d=n[3];if(this.parent.allowGrouping&&this.parent.groupSettings.columns.length&&this.parent.aggregates.length&&"enter"===e)for(var p=o;p<this.matrix.matrix.length;p++){var c=this.getTable().rows[p+1];if(c&&c.cells[a]&&c.cells[a].classList.contains("e-rowcell"))return[p+1,a];if(p===this.matrix.matrix.length-1)return[o,a]}if("ctrlEnd"===e){var u=[this.matrix.matrix.length-1,this.matrix.matrix[this.matrix.matrix.length-1].length-1];0===this.matrix.matrix[u[0]][u[1]]&&(u=mt(this.matrix.matrix,u,!1)),o=u[0],a=u[1]+1}return this.matrix.get(o,a,[h,d],e,this.validator())},s.prototype.onClick=function(e,t){var i=e.target;if(this.target=i,i=(i=i.classList.contains(N)?i:(0,l.oq)(i,"td"))||(0,l.oq)(e.target,"td.e-detailrowcollapse")||(0,l.oq)(e.target,"td.e-detailrowexpand"),!(i=(i=(0,l.oq)(e.target,"td.e-detailcell")&&(0,l.le)((0,l.oq)((0,l.oq)(e.target,".e-grid"),"td.e-detailcell"))?null:i)&&(0,l.oq)(i,"table").classList.contains(Z)?i:null))return!1;var r=[i.parentElement.rowIndex,i.cellIndex],n=r[0],o=r[1],a=this.matrix.current,h=a[0],d=a[1],p=(0,l.NA)(n+"."+o,this.matrix.matrix);if(this.matrix.inValid(p)||!t&&h===n&&d===o||!w(e.target,N)&&!w(e.target,"e-groupcaption")&&!w(e.target,"e-recordpluscollapse")&&!w(e.target,"e-recordplusexpand")&&!w(e.target,"e-detailrowcollapse")&&!w(e.target,"e-detailrowexpand")&&!w(e.target,"e-templatecell"))return!1;this.matrix.select(n,o)},s.prototype.getFocusInfo=function(){var e={},t=this.matrix.current,i=t[0],r=void 0===i?0:i,n=t[1],o=void 0===n?0:n;return this.matrix.current=[r,o],e.element=(0,l.le)(this.getTable().rows[r])?null:this.getTable().rows[r].cells[o],e.element&&(e.elementToFocus=e.element.classList.contains("e-unboundcell")||e.element.classList.contains("e-detailcell")?e.element:this.getFocusable(e.element),e.elementToFocus=e.element.classList.contains("e-detailcell")&&e.element.querySelector(".e-childgrid")?e.element.querySelector(".e-childgrid"):e.elementToFocus,e.outline=!0,e.uid=e.element.parentElement.getAttribute("data-uid")),e},s.prototype.getFocusable=function(e){var t='button, [href], input:not([type="hidden"]), select, textarea, [tabindex]:not([tabindex="-1"])',i=!(0,l.le)((0,l.oq)(e,".e-templatecell"));this.parent.isEdit&&(t='input:not([type="hidden"]), select:not([aria-hidden="true"]), textarea');var r=[].slice.call(e.querySelectorAll(t));return r.length?i&&r.length>1?this.target?this.target:e:r[0]:e},s.prototype.selector=function(e,t,i){var r=[A.Expand,A.GroupCaption,A.CaptionSummary,A.GroupSummary];return(e.isDataRow&&t.visible&&(t.isDataCell||t.isTemplate)||e.isDataRow&&t.cellType===A.DetailExpand&&(0,l.le)(t.visible)||!e.isDataRow&&r.indexOf(t.cellType)>-1&&!!(t.cellType!==A.GroupSummary&&t.cellType!==A.CaptionSummary||t.isDataCell&&t.visible)||t.column&&t.visible&&"checkbox"===t.column.type||t.cellType===A.CommandColumn||e.isDataRow&&i)&&!("delete"===e.edit&&e.isDirty)},s.prototype.nextRowFocusValidate=function(e){for(var t=e,i=e,r=this.matrix.rows;i<=r;i++){if(-1!==this.matrix.matrix[e].indexOf(1))return e;e+=1}return this.lastIdxCell=!0,t},s.prototype.previousRowFocusValidate=function(e){for(var t=e,i=e;i>=0;i--){if(-1!==this.matrix.matrix[e].indexOf(1))return e;if((e-=1)<0)return this.lastIdxCell=!0,t}return t},s.prototype.jump=function(e,t){var i=this.parent.getFrozenLeftCount()&&("leftArrow"===e||"shiftTab"===e)&&0===t[1]||t[0]<this.matrix.matrix.length-1&&"tab"===e&&"Left"===this.parent.getFrozenMode()&&t[1]===this.matrix.matrix[t[0]].lastIndexOf(1),r=("rightArrow"===e||"tab"===e)&&t[1]===this.matrix.columns||"shiftTab"===e&&"Right"===this.parent.getFrozenMode()&&t[1]===this.matrix.matrix[t[0]].indexOf(1),n=this.parent.getFrozenMode()===B&&r;"Right"===this.parent.getFrozenMode()&&(i=r),this.lastIdxCell=!1;var o=0!==this.parent.frozenRows&&"shiftEnter"===e,a=("upArrow"===e||o)&&0===t[0]||"shiftTab"===e&&"Right"===this.parent.getFrozenMode()&&0===t[0]&&t[1]===this.matrix.matrix[t[0]].indexOf(1);!this.parent.isFrozenGrid()&&"tab"===e&&t[1]===this.matrix.matrix[t[0]].lastIndexOf(1)&&this.matrix.matrix.length-1!==t[0]&&(this.matrix.current[0]=this.nextRowFocusValidate(this.matrix.current[0]+1),this.matrix.current[1]=-1,i=this.parent.isFrozenGrid()),!this.parent.isFrozenGrid()&&"shiftTab"===e&&0!==t[0]&&this.matrix.matrix[t[0]].indexOf(1)===t[1]&&(this.matrix.current[0]=this.previousRowFocusValidate(this.matrix.current[0]-1),this.matrix.current[1]=this.matrix.matrix[t[0]].length);var h=!1,d=document.activeElement.parentElement;return(this.parent.enableVirtualization||this.parent.infiniteScrollSettings.enableCache)&&d.classList.contains(G)&&(h=parseInt(d.getAttribute(O),10)>0),"shiftTab"===e&&"Right"===this.parent.getFrozenMode()&&0===t[0]&&t[1]===this.matrix.matrix[t[0]].indexOf(1)&&(this.matrix.current[0]=-1),{swap:!h&&(("upArrow"===e||o)&&0===t[0]||i||n),toHeader:a,toFrozen:i,toFrozenRight:n}},s.prototype.getNextCurrent=function(e,t,i,r){void 0===e&&(e=[]);var n=[];return"Right"===this.parent.getFrozenMode()||this.parent.getFrozenMode()===B?(("leftArrow"===r||"shiftTab"===r)&&(n[0]=e[0],n[1]=this.matrix.matrix[n[0]].length),this.parent.getFrozenMode()===B&&("rightArrow"===r||"tab"===r)&&(n[0]=e[0],n[1]=-1),"Right"===this.parent.getFrozenMode()&&"tab"===r&&(n[0]=e[0]+1,n[1]=-1)):("rightArrow"===r||"tab"===r)&&(n[0]=e[0],n[1]=-1),("downArrow"===r||"enter"===r)&&(n[0]=-1,n[1]=e[1]),"shiftTab"===r&&"Left"===this.parent.getFrozenMode()&&(n[0]=e[0]-1,n[1]=this.matrix.matrix[n[0]].length),n},s.prototype.generateRows=function(e,t){var i,r=t.matrix,n=t.handlerInstance,o=n.matrix.matrix.length,a=this.parent.allowFiltering&&"FilterBar"===this.parent.filterSettings.type?o+1:o;n.matrix.matrix=n.matrix.matrix.slice(0,a),n.matrix.rows=a,(i=n.matrix.matrix).push.apply(i,r),n.matrix.rows+=r.length},s.prototype.getInfo=function(e){var t=this.getFocusInfo(),i=this.matrix.current,r=i[0],n=i[1],o=t.element.classList.contains(N),a=o||e&&"enter"!==e.action&&(t.element.classList.contains("e-detailrowcollapse")||t.element.classList.contains("e-detailrowexpand")),h=[Math.min(parseInt(t.element.parentElement.getAttribute(O),10),r),Math.min(parseInt(t.element.getAttribute(ce),10),n)],d=h[0],p=h[1];return this.parent.allowGrouping&&this.parent.groupSettings.enableLazyLoading&&o&&(d=this.parent.getDataRows().indexOf(t.element.parentElement)),{isContent:!0,isDataCell:o,indexes:[d,p],isSelectable:a}},s.prototype.validator=function(){var e=this.getTable();return function(t,i,r){if(!(0,l.le)(e.rows[t])){var n=void 0;i=e.querySelector(".e-emptyrow")?0:i;var o=0!==(n=e.rows[t].cells[0].classList.contains("e-editcell")?e.rows[t].cells[0].querySelectorAll("td")[i]:e.rows[t].cells[i]).getBoundingClientRect().width;if("enter"===r||"shiftEnter"===r)return o&&n.classList.contains(N);if(("shiftUp"===r||"shiftDown"===r)&&n.classList.contains(N))return o;if("shiftUp"!==r&&"shiftDown"!==r)return o}return!1}},s.prototype.shouldFocusChange=function(e){var t=this.matrix.current,i=t[0],r=void 0===i?-1:i,n=t[1],o=void 0===n?-1:n;if(r<0||o<0)return!0;var a=(0,l.NA)(r+".cells."+o,this.getTable().rows);return!a||"enter"!==e.action&&"shiftEnter"!==e.action||a.classList.contains(N)&&!a.classList.contains("e-unboundcell")&&(!a.classList.contains("e-templatecell")||a.classList.contains("e-editedbatchcell"))&&!a.classList.contains("e-detailcell")},s.prototype.getGridSeletion=function(){return this.parent.allowSelection&&this.parent.selectionSettings.allowColumnSelection},s}(),Wn=function(s){function e(t){return s.call(this,t)||this}return qi(e,s),e.prototype.getTable=function(){return this.parent.isFrozenGrid()?this.parent.getHeaderContent().querySelector(".e-movableheader .e-table"):this.parent.getHeaderTable()},e.prototype.onClick=function(t){var i=t.target;if(this.target=i,!(i=i.classList.contains("e-headercell")?i:(0,l.oq)(i,"th"))&&0!==this.parent.frozenRows&&(i=t.target.classList.contains(N)?t.target:(0,l.oq)(t.target,"td")),t.target.classList.contains("e-columnheader")||t.target.querySelector(".e-stackedheadercell"))return!1;if(i){var r=[i.parentElement.rowIndex,i.cellIndex],a=(0,l.NA)(r[0]+"."+r[1],this.matrix.matrix);if(this.matrix.inValid(a))return!1;this.matrix.select(i.parentElement.rowIndex,i.cellIndex)}},e.prototype.getFocusInfo=function(){var t={},i=this.matrix.current,r=i[0],n=void 0===r?0:r,o=i[1],a=void 0===o?0:o;return t.element=this.getTable().rows[n].cells[a],(0,l.le)(t.element)||(t.elementToFocus=this.getFocusable(t.element),t.outline=!t.element.classList.contains("e-filterbarcell")),t},e.prototype.selector=function(t,i){return i.visible&&(void 0!==i.column.field||i.isTemplate||!(0,l.le)(i.column.template))||"checkbox"===i.column.type||i.cellType===A.StackedHeader},e.prototype.jump=function(t,i){var r=this.parent.getFrozenLeftCount()&&("leftArrow"===t||"shiftLeft"===t&&this.getGridSeletion()||"shiftTab"===t)&&(0===i[1]||i[1]===this.matrix.matrix[i[0]].indexOf(1))||"Left"===this.parent.getFrozenMode()&&"tab"===t&&i[1]===this.matrix.matrix[i[0]].lastIndexOf(1),n=("rightArrow"===t||"shiftRight"===t&&this.getGridSeletion()||"tab"===t)&&(i[1]===this.matrix.columns||i[1]===this.matrix.matrix[i[0]].lastIndexOf(1))||i[0]>0&&"shiftTab"===t&&"Right"===this.parent.getFrozenMode()&&i[1]===this.matrix.matrix[i[0]].indexOf(1),o=this.parent.getFrozenMode()===B&&n;"Right"===this.parent.getFrozenMode()&&(r=n);var h,d,a=0!==this.parent.frozenRows&&"enter"===t,p=r&&!("Left"===this.parent.getFrozenMode()&&"tab"===t&&i[0]===this.matrix.matrix.length-1)||o,c=this.parent.focusModule.fHeader&&this.parent.focusModule.fHeader.matrix.matrix,u=c&&!(0,l.le)(c[i[0]]);return this.parent.enableHeaderFocus&&"tab"===t&&(d=this.matrix.matrix.length-1===i[0],(h=i[1]===this.matrix.matrix[i[0]].lastIndexOf(1))&&(this.matrix.current[0]=d?0:this.matrix.current[0]+1,this.matrix.current[1]=-1),this.parent.isFrozenGrid()&&d&&h&&(r=!0,p=!1)),"tab"===t&&"Left"===this.parent.getFrozenMode()&&i[0]===this.matrix.matrix.length-1&&i[1]===this.matrix.matrix[i[0]].lastIndexOf(1)&&(this.matrix.current[0]=-1),{swap:("downArrow"===t||a)&&i[0]===this.matrix.matrix.length-1||u&&(r||o)||"tab"===t&&d&&h,toHeader:p,toFrozen:r,toFrozenRight:o}},e.prototype.getNextCurrent=function(t,i,r,n){void 0===t&&(t=[]);var o=[];return"Right"===this.parent.getFrozenMode()||this.parent.getFrozenMode()===B?(("leftArrow"===n||"shiftLeft"===n&&this.getGridSeletion()||"shiftTab"===n)&&(o[0]=t[0],o[1]=this.matrix.matrix[o[0]].length),this.parent.getFrozenMode()===B&&("rightArrow"===n||"shiftRight"===n&&this.getGridSeletion()||"tab"===n)&&(o[0]=t[0],o[1]=-1)):("rightArrow"===n||"shiftRight"===n&&this.getGridSeletion()||"tab"===n)&&(o[0]=t[0],o[1]=-1),("upArrow"===n||"shiftEnter"===n)&&(o[0]=this.matrix.matrix.length,o[1]=t[1]),"Left"===this.parent.getFrozenMode()&&"shiftTab"===n&&(o[0]=-1===t[0]?this.matrix.matrix.length-1:t[0]-1,o[1]=this.matrix.matrix[o[0]].length),"Right"===this.parent.getFrozenMode()&&"tab"===n&&(o[0]=t[0]+1,o[1]=-1),o},e.prototype.generateRows=function(t){var i=this.matrix.matrix.length;if(this.parent.allowFiltering&&"FilterBar"===this.parent.filterSettings.type){this.matrix.rows=++this.matrix.rows;for(var r=t[0].cells,n=0,o="FixedHeaderFocus"===this.getHeaderType()&&"Right"!==this.parent.getFrozenMode()?te:"FixedHeaderFocus"===this.getHeaderType()||"FixedRightHeaderFocus"===this.getHeaderType()?Q:"movable",a=0;a<r.length;a++)r[a].column&&r[a].column.columns?n=this.checkFilterColumn(r[a].column.columns,i,n,o):(!this.parent.isFrozenGrid()||this.parent.isFrozenGrid()&&r[a].column.freezeTable===o)&&(this.matrix.set(i,n,r[a].visible&&!1!==r[a].column.allowFiltering),n++)}},e.prototype.checkFilterColumn=function(t,i,r,n){for(var o=t,a=r,h=0;h<o.length;h++)o[h].columns?a=this.checkFilterColumn(o[h].columns,i,a,n):(!this.parent.isFrozenGrid()||this.parent.isFrozenGrid()&&o[h].freezeTable===n)&&(this.matrix.set(i,a,o[h].visible&&!1!==o[h].allowFiltering),a++);return a},e.prototype.getInfo=function(t){return(0,l.l7)(s.prototype.getInfo.call(this,t),{isContent:!1,isHeader:!0})},e.prototype.validator=function(){return function(){return!0}},e.prototype.shouldFocusChange=function(t){var i=this.matrix.current,r=i[0],n=i[1];if(r<0||n<0)return!0;var o=(0,l.NA)(r+".cells."+n,this.getTable().rows);return!o||"enter"!==t.action&&"altDownArrow"!==t.action||!o.classList.contains("e-headercell")},e.prototype.getHeaderType=function(){return"HeaderFocus"},e}(Rr),yh=function(s){function e(){return null!==s&&s.apply(this,arguments)||this}return qi(e,s),e.prototype.getTable=function(){return this.parent.getContent().querySelector(".e-frozencontent .e-table")},e.prototype.jump=function(t,i){var r=0!==this.parent.frozenRows&&"shiftEnter"===t,n=("upArrow"===t||r)&&0===i[0]||"shiftTab"===t&&"Right"!==this.parent.getFrozenMode()&&0===i[0]&&i[1]===this.matrix.matrix[i[0]].indexOf(1),o=("upArrow"===t||r)&&0===i[0],a="shiftTab"===t&&this.parent.getFrozenMode()===B&&i[1]===this.matrix.matrix[i[0]].indexOf(1);return"Right"===this.parent.getFrozenMode()?{swap:n||("shiftTab"===t||"leftArrow"===t)&&0===i[1]||"tab"===t&&i[0]<this.matrix.matrix.length-1&&i[1]===this.matrix.matrix[i[0]].lastIndexOf(1),toHeader:n,toFrozen:o}:("shiftTab"===t&&0===i[0]&&i[1]===this.matrix.matrix[i[0]].indexOf(1)&&(this.matrix.current[0]=-1),{swap:n||("tab"===t||"rightArrow"===t)&&i[1]===this.matrix.columns||"shiftTab"===t&&i[1]===this.matrix.matrix[i[0]].indexOf(1),toHeader:n,toFrozen:o,toFrozenRight:a})},e.prototype.getNextCurrent=function(t,i,r,n){void 0===t&&(t=[]);var o=[];return"Right"===this.parent.getFrozenMode()?(("rightArrow"===n||"tab"===n)&&(o[0]=t[0],o[1]=-1),"shiftTab"===n&&(o[0]=t[0]-1,o[1]=this.matrix.matrix[o[0]].length)):("tab"===n&&this.parent.enableHeaderFocus&&(o[0]=t[0],o[1]=-1),("leftArrow"===n||"shiftTab"===n)&&(o[0]=t[0],o[1]=r.matrix.columns+1)),("downArrow"===n||"enter"===n)&&(o[0]=-1,o[1]=t[1]),"tab"===n&&"Right"!==this.parent.getFrozenMode()&&(o[0]=t[0]+1,o[1]=-1),o},e}(Rr),Ch=function(s){function e(){return null!==s&&s.apply(this,arguments)||this}return qi(e,s),e.prototype.jump=function(t,i){var r=0!==this.parent.frozenRows&&"enter"===t,n=this.parent.focusModule.header&&this.parent.focusModule.header.matrix.matrix,o=n&&!(0,l.le)(n[i[0]]);if("Right"===this.parent.getFrozenMode()){var a=("leftArrow"===t||"shiftLeft"===t&&this.getGridSeletion()||"shiftTab"===t)&&(0===i[1]||i[1]===this.matrix.matrix[i[0]].indexOf(1))||i[0]<this.matrix.matrix.length-1&&"tab"===t&&i[1]===this.matrix.matrix[i[0]].lastIndexOf(1),h=("downArrow"===t||r||"tab"===t&&i[1]===this.matrix.matrix[i[0]].lastIndexOf(1))&&i[0]===this.matrix.matrix.length-1||o&&a,d=("downArrow"===t||r)&&i[0]===this.matrix.matrix.length-1;return"tab"===t&&i[0]===this.matrix.matrix.length-1&&i[1]===this.matrix.matrix[i[0]].lastIndexOf(1)&&(this.matrix.current[0]=-1),{swap:h,toHeader:a,toFrozen:d}}var p=i[0]>0&&"shiftTab"===t&&this.parent.getFrozenMode()===B&&i[1]===this.matrix.matrix[i[0]].indexOf(1);return{swap:("downArrow"===t||r)&&i[0]===this.matrix.matrix.length-1||("rightArrow"===t||"shiftRight"===t&&this.getGridSeletion()||"tab"===t)&&(i[1]===this.matrix.columns||i[1]===this.matrix.matrix[i[0]].lastIndexOf(1))&&o||"tab"===t&&i[1]===this.matrix.matrix[i[0]].lastIndexOf(1)||"shiftTab"===t&&i[1]===this.matrix.matrix[i[0]].indexOf(1)&&i[0]>0,toHeader:("rightArrow"===t||"shiftRight"===t&&this.getGridSeletion()||"tab"===t)&&(i[1]===this.matrix.columns||i[1]===this.matrix.matrix[i[0]].lastIndexOf(1))||"tab"===t&&i[1]===this.matrix.matrix[i[0]].lastIndexOf(1)||"shiftTab"===t&&i[1]===this.matrix.matrix[i[0]].indexOf(1)&&i[0]>0,toFrozen:("downArrow"===t||r)&&i[0]===this.matrix.matrix.length-1,toFrozenRight:p}},e.prototype.getTable=function(){return this.parent.getHeaderContent().querySelector(".e-frozenheader .e-table")},e.prototype.getNextCurrent=function(t,i,r,n){void 0===t&&(t=[]);var o=[];return"Right"===this.parent.getFrozenMode()?(("rightArrow"===n||"shiftRight"===n&&this.getGridSeletion()||"tab"===n)&&(o[0]=t[0],o[1]=-1),"shiftTab"===n&&(o[0]=-1===t[0]?this.matrix.matrix.length-1:t[0]-1,o[1]=this.matrix.matrix[o[0]].length)):("leftArrow"===n||"shiftLeft"===n&&this.getGridSeletion()||"shiftTab"===n)&&(o[0]=t[0],o[1]=this.matrix.matrix[o[0]].length),("upArrow"===n||"shiftEnter"===n)&&(o[0]=this.matrix.matrix.length,o[1]=t[1]),"tab"===n&&"Right"!==this.parent.getFrozenMode()&&(o[0]=t[0]+1,o[1]=-1),o},e.prototype.getHeaderType=function(){return"FixedHeaderFocus"},e}(Wn),bh=function(s){function e(){return null!==s&&s.apply(this,arguments)||this}return qi(e,s),e.prototype.getTable=function(){return this.parent.getContent().querySelector(".e-frozen-right-content .e-table")},e.prototype.jump=function(t,i){var n=("upArrow"===t||0!==this.parent.frozenRows&&"shiftEnter"===t)&&0===i[0],o=this.parent.getFrozenMode()===B&&"tab"===t&&i[1]===this.matrix.matrix[i[0]].lastIndexOf(1);return{swap:n||("shiftTab"===t||"leftArrow"===t)&&0===i[1]||"tab"===t&&i[0]<this.matrix.matrix.length-1&&i[1]===this.matrix.matrix[i[0]].lastIndexOf(1),toHeader:n,toFrozenRight:n,toFrozen:o}},e.prototype.getNextCurrent=function(t,i,r,n){void 0===t&&(t=[]);var o=[];return("rightArrow"===n||"tab"===n)&&(o[0]=t[0],o[1]=-1),("downArrow"===n||"enter"===n)&&(o[0]=-1,o[1]=t[1]),"shiftTab"===n&&(o[0]=t[0]-1,o[1]=this.matrix.matrix[o[0]].length),o},e}(Rr),wh=function(s){function e(){return null!==s&&s.apply(this,arguments)||this}return qi(e,s),e.prototype.jump=function(t,i){var r=this.parent.focusModule.header&&this.parent.focusModule.header.matrix.matrix,n=r&&!(0,l.le)(r[i[0]]),o=0!==this.parent.frozenRows&&"enter"===t,a=("leftArrow"===t||"shiftLeft"===t&&this.getGridSeletion()||"shiftTab"===t)&&(0===i[1]||i[1]===this.matrix.matrix[i[0]].indexOf(1))||i[0]<this.matrix.matrix.length-1&&"tab"===t&&i[1]===this.matrix.matrix[i[0]].lastIndexOf(1),h=("downArrow"===t||o||"tab"===t&&i[1]===this.matrix.matrix[i[0]].lastIndexOf(1))&&i[0]===this.matrix.matrix.length-1||n&&a,d="tab"===t&&i[1]===this.matrix.matrix[i[0]].lastIndexOf(1),p=("downArrow"===t||o)&&i[0]===this.matrix.matrix.length-1;return"tab"===t&&i[0]===this.matrix.matrix.length-1&&i[1]===this.matrix.matrix[i[0]].lastIndexOf(1)&&(this.matrix.current[0]=-1),{swap:h,toHeader:a,toFrozen:d,toFrozenRight:p}},e.prototype.getTable=function(){return this.parent.getHeaderContent().querySelector(".e-frozen-right-header .e-table")},e.prototype.getNextCurrent=function(t,i,r,n){void 0===t&&(t=[]);var o=[];return("rightArrow"===n||"shiftRight"===n&&this.getGridSeletion()||"tab"===n)&&(o[0]=t[0],o[1]=-1),("upArrow"===n||"shiftEnter"===n)&&(o[0]=this.matrix.matrix.length,o[1]=t[1]),"shiftTab"===n&&(o[0]=-1===t[0]?this.matrix.matrix.length-1:t[0]-1,o[1]=this.matrix.matrix[o[0]].length),o},e.prototype.getHeaderType=function(){return"FixedRightHeaderFocus"},e}(Wn),Sh=function(){var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])})(e,t)};return function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),jt=function(s,e,t,i){var o,r=arguments.length,n=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(n=(r<3?o(n):r>3?o(e,t,n):o(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},Rh=function(s){function e(){return null!==s&&s.apply(this,arguments)||this}return Sh(e,s),jt([(0,l.Z9)(12)],e.prototype,"pageSize",void 0),jt([(0,l.Z9)(8)],e.prototype,"pageCount",void 0),jt([(0,l.Z9)(1)],e.prototype,"currentPage",void 0),jt([(0,l.Z9)()],e.prototype,"totalRecordsCount",void 0),jt([(0,l.Z9)(!1)],e.prototype,"enableQueryString",void 0),jt([(0,l.Z9)(!1)],e.prototype,"pageSizes",void 0),jt([(0,l.Z9)(null)],e.prototype,"template",void 0),e}(l.rt),xh=function(){var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])})(e,t)};return function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),Fo=function(s,e,t,i){var o,r=arguments.length,n=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(n=(r<3?o(n):r>3?o(e,t,n):o(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},Fh=function(s){function e(){return null!==s&&s.apply(this,arguments)||this}return xh(e,s),Fo([(0,l.Z9)("startsWith")],e.prototype,"operator",void 0),Fo([(0,l.Z9)(!1)],e.prototype,"ignoreAccent",void 0),e}(l.rt),xr=function(){return xr=Object.assign||function(s){for(var e,t=1,i=arguments.length;t<i;t++)for(var r in e=arguments[t])Object.prototype.hasOwnProperty.call(e,r)&&(s[r]=e[r]);return s},xr.apply(this,arguments)},zh=function(){function s(e,t,i){this.selectedRowIndexes=[],this.selectedRowCellIndexes=[],this.selectedRecords=[],this.preventFocus=!1,this.selectedColumnsIndexes=[],this.checkBoxState=!1,this.isMultiShiftRequest=!1,this.isMultiCtrlRequest=!1,this.enableSelectMultiTouch=!1,this.clearRowCheck=!1,this.selectRowCheck=!1,this.selectedRowState={},this.unSelectedRowState={},this.totalRecordsCount=0,this.chkAllCollec=[],this.isCheckedOnAdd=!1,this.persistSelectedData=[],this.deSelectedData=[],this.isHdrSelectAllClicked=!1,this.needColumnSelection=!1,this.isCancelDeSelect=!1,this.isPreventCellSelect=!1,this.disableUI=!1,this.isPersisted=!1,this.cmdKeyPressed=!1,this.cellselected=!1,this.isMultiSelection=!1,this.isAddRowsToSelection=!1,this.initialRowSelection=!1,this.isPrevRowSelection=!1,this.isKeyAction=!1,this.isRowDragSelected=!1,this.isPartialSelection=!1,this.rmtHdrChkbxClicked=!1,this.autoFillRLselection=!0,this.bottom="0 0 2px 0",this.top="2px 0 0 0",this.right_bottom="0 2px 2px 0",this.bottom_left="0 0 2px 2px",this.top_right="2px 2px 0 0",this.top_left="2px 0 0 2px",this.top_bottom="2px 0 2px 0",this.top_right_bottom="2px 2px 2px 0",this.top_bottom_left="2px 0 2px 2px",this.top_right_left="2px 2px 0 2px",this.right_bottom_left="0 2px 2px 2px",this.all_border="2px",this.parent=e,this.selectionSettings=t,this.factory=i.getService("rendererFactory"),this.focus=i.getService("focus"),this.addEventListener(),this.wireEvents()}return s.prototype.initializeSelection=function(){this.parent.log("selection_key_missing"),this.render()},s.prototype.onActionBegin=function(e,t){this.parent.trigger(t,this.fDataUpdate(e))},s.prototype.fDataUpdate=function(e){if(!(this.isMultiSelection||(0,l.le)(e.cellIndex)&&(0,l.le)(e.rowIndex))){var t=this.getRowObj((0,l.le)(e.rowIndex)?(0,l.le)(e.cellIndex)?this.currentIndex:e.cellIndex.rowIndex:e.rowIndex);e.foreignKeyData=t.foreignKeyData}return e},s.prototype.onActionComplete=function(e,t){this.parent.trigger(t,this.fDataUpdate(e)),this.isMultiSelection=!1},s.prototype.getModuleName=function(){return"selection"},s.prototype.destroy=function(){var e=this.parent.element;!e||!e.querySelector("."+pe)&&!e.querySelector("."+ae)||(this.hidePopUp(),this.clearSelection(),this.removeEventListener(),this.unWireEvents(),l.bi.remove(this.parent.getContent(),"mousedown",this.mouseDownHandler),l.bi.remove(this.parent.getHeaderContent(),"mousedown",this.mouseDownHandler))},s.prototype.isEditing=function(){return("Normal"===this.parent.editSettings.mode||"Batch"===this.parent.editSettings.mode&&this.parent.editModule&&this.parent.editModule.formObj&&!this.parent.editModule.formObj.validate())&&this.parent.isEdit&&!this.parent.isPersistSelection},s.prototype.getSelectedMovableRow=function(e){var t=this.parent;return t.isFrozenGrid()&&this.parent.getContent().querySelector("."+_)?t.getMovableRowByIndex(e):null},s.prototype.getSelectedFrozenRightRow=function(e){var t=this.parent;return t.isFrozenGrid()&&t.getFrozenMode()===B&&t.getFrozenRightContent()?t.getFrozenRightRowByIndex(e):null},s.prototype.getCurrentBatchRecordChanges=function(){var e=this.parent;if("Batch"===e.editSettings.mode&&e.editModule){var t=Oi(this.parent.getCurrentViewRecords());t="Bottom"===e.editSettings.newRowPosition?t.concat(this.parent.editModule.getBatchChanges()[ot]):this.parent.editModule.getBatchChanges()[ot].concat(t);for(var i=this.parent.editModule.getBatchChanges()[xt],r=this.parent.getPrimaryKeyFieldNames()[0],n=0;n<i.length;n++)for(var o=0;o<t.length;o++)if(i[n][r]===t[o][r]){t.splice(o,1);break}return t}return e.getCurrentViewRecords()},s.prototype.selectRow=function(e,t){if(this.selectedRowIndexes.length&&this.selectionSettings.enableSimpleMultiRowSelection)this.addRowsToSelection([e]);else{var i=this.parent,r=i.getRowByIndex(e),n=r&&i.getRowObjectFromUID(r.getAttribute("data-uid"));if(!(this.isPartialSelection&&n&&n.isDataRow)||n.isSelectable){var h,o=this.getSelectedMovableRow(e),a=this.getSelectedFrozenRightRow(e);if(i.enableVirtualization&&e>-1){var p={selectedIndex:e,isAvailable:!0};this.parent.notify(Zs,p);var c=i.isFrozenGrid()?i.contentModule.getRowObjectByIndex(e):null;if(!r||!i.getRowObjectFromUID(r.getAttribute("data-uid"))&&!c)return void(p.isAvailable&&!i.selectionSettings.persistSelection&&this.parent.getSelectedRecords().length>0&&this.clearRowSelection());h=c||i.getRowObjectFromUID(r.getAttribute("data-uid")).data}else h=this.getRowObj(e).data;if(this.isRowType()&&r&&!this.isEditing()){var f=r.hasAttribute("aria-selected");this.activeTarget(),t=t&&!(!this.selectedRowIndexes.length||1!==this.selectedRowIndexes.length)&&(!this.isKeyAction||!this.parent.isCheckBoxSelection)&&e===this.selectedRowIndexes[0],this.isKeyAction=!1;var g,v="cancel";t?this.rowSelectingCallBack(g,t,e,h,!1,f,v)(g):(g={data:h,rowIndex:e,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,row:r,previousRow:i.getRowByIndex(this.prevRowIndex),previousRowIndex:this.prevRowIndex,target:this.actualTarget,cancel:!1,isInteracted:this.isInteracted,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked},g=this.addMovableArgs(g,o,a),this.parent.trigger(Kr,this.fDataUpdate(g),this.rowSelectingCallBack(g,t,e,h,!1,f,v)))}}}},s.prototype.rowSelectingCallBack=function(e,t,i,r,n,o,a){var h=this;return function(d){(0,l.le)(d)||!0!==d[a]?(h.index=i,h.toggle=t,h.data=r,h.removed=n,o&&h.selectionSettings.persistSelection&&"ResetOnRowClick"!==h.selectionSettings.checkboxMode?(h.clearSelectedRow(i),h.selectRowCallBack()):!o&&h.selectionSettings.persistSelection&&"ResetOnRowClick"!==h.selectionSettings.checkboxMode&&h.selectRowCallBack(),"ResetOnRowClick"===h.selectionSettings.checkboxMode&&h.clearSelection(),(!h.selectionSettings.persistSelection||"ResetOnRowClick"===h.selectionSettings.checkboxMode||!h.parent.isCheckBoxSelection&&h.selectionSettings.persistSelection)&&(h.selectRowCheck=!0,h.clearRow())):h.disableInteracted()}},s.prototype.selectRowCallBack=function(){var t,e=this.parent,i=this.index,r=this.toggle,n=this.data,o=this.removed,a=e.getRowByIndex(i),h=this.getSelectedMovableRow(i),d=this.getSelectedFrozenRightRow(i);!r&&!o&&(this.selectedRowIndexes.indexOf(i)<=-1&&(this.updateRowSelection(a,i),this.selectMovableRow(h,d,i)),this.selectRowIndex(i)),r||(t={data:n,rowIndex:i,row:a,previousRow:e.getRowByIndex(this.prevRowIndex),previousRowIndex:this.prevRowIndex,target:this.actualTarget,isInteracted:this.isInteracted,isHeaderCheckBoxClicked:this.isHeaderCheckboxClicked,rowIndexes:i},t=this.addMovableArgs(t,h,d),this.onActionComplete(t,Jt)),this.isInteracted=!1,this.updateRowProps(i)},s.prototype.selectMovableRow=function(e,t,i){this.parent.isFrozenGrid()&&(this.updateRowSelection(e,i),this.parent.getFrozenMode()===B&&t&&this.updateRowSelection(t,i))},s.prototype.addMovableArgs=function(e,t,i){if(this.parent.isFrozenGrid()){var r={mRow:t,previousMovRow:this.parent.getMovableRows()[this.prevRowIndex]};this.parent.getFrozenMode()===B&&i&&(r.frozenRightRow=i,r.previousFrozenRightRow=this.parent.getFrozenRightDataRows()[this.prevRowIndex]),e=xr({},e,r)}return e},s.prototype.selectRowsByRange=function(e,t){this.selectRows(this.getCollectionFromIndexes(e,t)),this.selectRowIndex(t)},s.prototype.selectedDataUpdate=function(e,t,i,r,n){for(var o=0,a=r.length;o<a;o++){var h=this.parent.getDataRows()[r[o]];this.parent.enableVirtualization&&(h=this.parent.getRowByIndex(r[o]));var d=this.getRowObj(h);d&&d.isDataRow&&d.isSelectable?(e.push(d.data),i.push(h),t.push(d.foreignKeyData)):this.isPartialSelection&&n&&n.splice(n.indexOf(r[o]),1)}},s.prototype.selectRows=function(e){var t=this,i=this.parent,r=e.slice(),n=this.isSingleSel()?e[e.length-1]:e[0];this.isMultiSelection=!0;var o=[],a=[],h=this.getSelectedMovableRow(n),d=this.getSelectedFrozenRightRow(n),c=[];if(this.isRowType()&&!this.isEditing()){this.selectedDataUpdate(c,a,o,e,r),this.activeTarget();var u={cancel:!1,rowIndexes:r,row:o,rowIndex:n,target:this.actualTarget,prevRow:i.getRows()[this.prevRowIndex],previousRowIndex:this.prevRowIndex,isInteracted:this.isInteracted,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,data:c,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked,foreignKeyData:a};u=this.addMovableArgs(u,h,d),this.parent.trigger(Kr,this.fDataUpdate(u),function(f){if((0,l.le)(f)||!0!==f.cancel){t.clearRow(),t.selectRowIndex(r.slice(-1)[0]);var g=function(b){if(t.updateRowSelection(i.getRowByIndex(b),b),i.isFrozenGrid()){var y=t.parent.getFrozenMode()===B?i.getFrozenRightRowByIndex(b):void 0;t.selectMovableRow(i.getMovableRowByIndex(b),y,b)}t.updateRowProps(n)};if(t.isSingleSel())g(n);else for(var v=0,m=r;v<m.length;v++)g(m[v]);f={rowIndexes:r,row:o,rowIndex:n,target:t.actualTarget,prevRow:i.getRows()[t.prevRowIndex],previousRowIndex:t.prevRowIndex,data:t.getSelectedRecords(),isInteracted:t.isInteracted,isHeaderCheckboxClicked:t.isHeaderCheckboxClicked,foreignKeyData:a},f=t.addMovableArgs(f,h,d),t.isRowSelected&&t.onActionComplete(f,Jt),t.isInteracted=!1}else t.disableInteracted()})}},s.prototype.addRowsToSelection=function(e){var t=this.parent,r=this.target;this.isMultiSelection=!0;var n=[],o=[],a=[],h=t.getSelectedRowIndexes().concat(e),d=this.isSingleSel()?t.getRowByIndex(e[e.length-1]):t.getRowByIndex(e[0]),p=this.isSingleSel()?this.getSelectedMovableRow(e[e.length-1]):this.getSelectedMovableRow(e[0]),c=this.isSingleSel()?this.getSelectedFrozenRightRow(e[e.length-1]):this.getSelectedFrozenRightRow(e[0]);if(this.isRowType()&&!this.isEditing()||this.selectionSettings.checkboxOnly){var u,f=this.parent.getColumns().filter(function(y){return"checkbox"===y.type});this.isMultiCtrlRequest&&!f.length&&this.selectedDataUpdate(a,o,n,h);for(var g=0,v=e;g<v.length;g++){var m=v[g],C=this.getRowObj(m),b=this.selectedRowIndexes.indexOf(m)>-1;if(!(this.isPartialSelection&&C&&C.isDataRow)||C.isSelectable){if(this.selectRowIndex(m),b&&(f.length||this.selectionSettings.enableToggle||this.isMultiCtrlRequest)){if(this.isAddRowsToSelection=!0,this.rowDeselect(ys,[m],[C.data],[d],[C.foreignKeyData],r),this.isCancelDeSelect)return;this.selectedRowIndexes.splice(this.selectedRowIndexes.indexOf(m),1),this.selectedRecords.splice(this.selectedRecords.indexOf(d),1),this.selectRowIndex(this.selectedRowIndexes.length?this.selectedRowIndexes[this.selectedRowIndexes.length-1]:-1),d.removeAttribute("aria-selected"),this.addRemoveClassesForRow(d,!1,null,"e-selectionbackground","e-active"),p&&(this.selectedRecords.splice(this.selectedRecords.indexOf(p),1),p.removeAttribute("aria-selected"),this.addRemoveClassesForRow(p,!1,null,"e-selectionbackground","e-active")),c&&(this.selectedRecords.splice(this.selectedRecords.indexOf(c),1),c.removeAttribute("aria-selected"),this.addRemoveClassesForRow(c,!1,null,"e-selectionbackground","e-active")),this.rowDeselect(Xi,[m],[C.data],[d],[C.foreignKeyData],r,[p],void 0,[c]),this.isInteracted=!1,this.isMultiSelection=!1,this.isAddRowsToSelection=!1,this.isHdrSelectAllClicked=!1}else{if(this.activeTarget(),u={cancel:!1,data:a.length?a:C.data,rowIndex:m,row:n.length?n:d,target:this.actualTarget,prevRow:t.getRows()[this.prevRowIndex],previousRowIndex:this.prevRowIndex,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,foreignKeyData:o.length?o:C.foreignKeyData,isInteracted:this.isInteracted,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked,rowIndexes:h},u=this.addMovableArgs(u,p,c),this.parent.trigger(Kr,this.fDataUpdate(u)),!(0,l.le)(u)&&!0===u.cancel)return void this.disableInteracted();this.isSingleSel()&&this.clearRow(),this.updateRowSelection(d,m),this.selectMovableRow(p,c,m)}if(b||(u={data:a.length?a:C.data,rowIndex:m,row:n.length?n:d,target:this.actualTarget,prevRow:t.getRows()[this.prevRowIndex],previousRowIndex:this.prevRowIndex,foreignKeyData:o.length?o:C.foreignKeyData,isInteracted:this.isInteracted,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked,rowIndexes:h},u=this.addMovableArgs(u,p,c),this.onActionComplete(u,Jt)),this.isInteracted=!1,this.updateRowProps(m),this.isSingleSel())break}}}},s.prototype.getCollectionFromIndexes=function(e,t){for(var i=[],r=e<=t?{i:e,max:t}:{i:t,max:e},n=r.i,o=r.max;n<=o;n++)i.push(n);return e>t&&i.reverse(),i},s.prototype.clearRow=function(){this.clearRowCheck=!0,this.clearRowSelection()},s.prototype.clearRowCallBack=function(){this.isCancelDeSelect&&"Check"!==this.parent.checkAllRows||(this.selectedRowIndexes=[],this.selectedRecords=[],this.selectRowIndex(-1),this.isSingleSel()&&this.parent.isPersistSelection&&(this.selectedRowState={}))},s.prototype.clearSelectedRow=function(e){if(this.toggle){var t=this.parent.getRowByIndex(e);this.disableUI||(t.removeAttribute("aria-selected"),this.addRemoveClassesForRow(t,!1,!0,"e-selectionbackground","e-active")),this.removed=!0,this.updatePersistCollection(t,!1),this.updateCheckBoxes(t),this.selectedRowIndexes.splice(this.selectedRowIndexes.indexOf(e),1),this.selectedRecords.splice(this.selectedRecords.indexOf(this.parent.getRowByIndex(e)),1)}},s.prototype.updateRowProps=function(e){this.prevRowIndex=e,this.isRowSelected=this.selectedRowIndexes.length&&!0},s.prototype.getPkValue=function(e,t){return e&&We(e)?ne(e,t):t[e]},s.prototype.updatePersistCollection=function(e,t){var i=this;if((this.parent.isPersistSelection||this.parent.selectionSettings.persistSelection&&this.parent.getPrimaryKeyFieldNames().length>0)&&!(0,l.le)(e)){this.parent.isPersistSelection||this.ensureCheckboxFieldSelection();var r=this.getRowObj(e),n=r.data?this.getPkValue(this.primaryKey,r.data):null;if(null===n)return;r.isSelected=t,t&&!this.isPartialSelection||this.isPartialSelection&&r.isSelectable&&r.isSelected?(this.selectedRowState[n]=t,delete this.unSelectedRowState[n],this.persistSelectedData.some(function(o){return i.getPkValue(i.primaryKey,o)===n})||this.persistSelectedData.push(r.data)):this.updatePersistDelete(n)}},s.prototype.updatePersistDelete=function(e,t){var r,i=this;delete this.selectedRowState[e],this.rmtHdrChkbxClicked&&(this.unSelectedRowState[e]=!0),this.persistSelectedData.some(function(o,a){return r=a,i.getPkValue(i.primaryKey,o)===e})&&(this.persistSelectedData.splice(r,1),t&&this.parent.partialSelectedRecords.splice(r,1))},s.prototype.updateCheckBoxes=function(e,t,i){if(!(0,l.le)(e)){var r=e.querySelector(".e-checkselect");(0,l.le)(r)||(Vi(r.nextElementSibling,t),Wt(r,t),((0,l.le)(this.checkedTarget)||!(0,l.le)(this.checkedTarget)&&!this.checkedTarget.classList.contains("e-checkselectall"))&&this.setCheckAllState(i))}},s.prototype.updateRowSelection=function(e,t){if(e){this.selectedRowIndexes.push(t);var i=this.selectedRowIndexes.length;if(this.parent.isFrozenGrid()&&i>1&&this.selectedRowIndexes[i-2]===this.selectedRowIndexes[i-1]&&this.selectedRowIndexes.pop(),this.selectedRecords.push(e),e.setAttribute("aria-selected","true"),this.updatePersistCollection(e,!0),this.updateCheckBoxes(e,!0),this.addRemoveClassesForRow(e,!0,null,"e-selectionbackground","e-active"),!this.preventFocus){var r=this.focus.getPrevIndexes().cellIndex?e.cells[this.focus.getPrevIndexes().cellIndex]:e.querySelector(".e-selectionbackground:not(.e-hide):not(.e-detailrowcollapse):not(.e-detailrowexpand)");if(this.parent.contextMenuModule&&2===this.mouseButton&&(r=this.parent.contextMenuModule.cell),!r)return;this.focus.onClick({target:r},!0)}}},s.prototype.clearSelection=function(){if(this.checkSelectAllClicked=!0,this.selectionSettings.persistSelection&&this.persistSelectedData.length&&(this.deSelectedData=Oi(this.persistSelectedData)),!this.parent.isPersistSelection||this.parent.isPersistSelection&&!this.parent.isEdit||!(0,l.le)(this.checkedTarget)&&this.checkedTarget.classList.contains("e-checkselectall")){var e=this.parent.element.querySelector(".e-gridpopup").querySelector("span");e.classList.contains("e-rowselect")&&e.classList.remove("e-spanclicked"),this.parent.isPersistSelection&&(this.persistSelectedData=[],this.selectedRowState={}),this.clearRowSelection(),this.clearCellSelection(),this.clearColumnSelection(),this.prevRowIndex=void 0,this.prevCIdxs=void 0,this.prevECIdxs=void 0,this.enableSelectMultiTouch=!1,this.isInteracted=!1,this.checkSelectAllClicked=!1,this.isHdrSelectAllClicked=!1}},s.prototype.clearRowSelection=function(){var e=this;if(this.isRowSelected){for(var t=this.parent,i=this.parent.getDataRows(),r=[],n=[],o=[],a=[],h=[],d=[],p=this.target,c=0,u=this.selectedRowIndexes.length;c<u;c++){var f="Batch"===this.parent.editSettings.mode?this.parent.getRows()[this.selectedRowIndexes[c]]:this.parent.getDataRows()[this.selectedRowIndexes[c]],g=this.getRowObj(f);if(g&&(r.push(g.data),n.push(f),h.push(this.selectedRowIndexes[c]),d.push(g.foreignKeyData)),t.isFrozenGrid()){var v=t.getMovableRows();if(v&&v.length&&o.push(v[this.selectedRowIndexes[c]]),t.getFrozenMode()===B){var m=t.getFrozenRightRows();m&&m.length&&a.push(m[this.selectedRowIndexes[c]])}}}this.selectionSettings.persistSelection&&"ResetOnRowClick"!==this.selectionSettings.checkboxMode&&(this.isRowClicked=!!this.checkSelectAllClicked),this.rowDeselect(ys,h,r,n,d,p,o,function(){if(e.isCancelDeSelect&&(e.isRowClicked||e.checkSelectAllClicked||e.isInteracted&&!e.parent.isPersistSelection)){if(e.parent.isPersistSelection)if("Intermediate"===e.getCheckAllStatus(e.parent.element.querySelector(".e-checkselectall")))for(var C=0;C<e.selectedRecords.length;C++)e.updatePersistCollection(e.selectedRecords[C],!0);else e.parent.checkAllRows="Check",e.updatePersistSelectedData(!0);e.clearRowCheck&&(e.clearRowCallBack(),e.clearRowCheck=!1,e.selectRowCheck&&(e.selectRowCallBack(),e.selectRowCheck=!1))}else{for(var b=[].slice.call(i.filter(function(D){return D.hasAttribute("aria-selected")})),y=0;y<b.length;y++)e.disableUI||(b[y].removeAttribute("aria-selected"),e.addRemoveClassesForRow(b[y],!1,!0,"e-selectionbackground","e-active")),e.isPrevRowSelection||e.updatePersistCollection(b[y],!1),e.updateCheckBoxes(b[y]);C=0;for(var S=e.selectedRowIndexes.length;C<S;C++){var R=e.getSelectedMovableRow(e.selectedRowIndexes[C]);R&&(e.disableUI||(R.removeAttribute("aria-selected"),e.addRemoveClassesForRow(R,!1,!0,"e-selectionbackground","e-active")),e.updateCheckBoxes(R),e.isPrevRowSelection||e.updatePersistCollection(R,!1));var F=e.getSelectedFrozenRightRow(e.selectedRowIndexes[C]);F&&(e.disableUI||(F.removeAttribute("aria-selected"),e.addRemoveClassesForRow(F,!1,!0,"e-selectionbackground","e-active")),e.updateCheckBoxes(F),e.isPrevRowSelection||e.updatePersistCollection(F,!1))}e.selectedRowIndexes=[],e.selectedRecords=[],e.isRowSelected=!1,e.selectRowIndex(-1),e.isPrevRowSelection=!1,e.rowDeselect(Xi,h,r,n,d,p,o,void 0,a),e.clearRowCheck&&(e.clearRowCallBack(),e.clearRowCheck=!1,e.selectRowCheck&&(e.selectRowCallBack(),e.selectRowCheck=!1))}},a)}else this.clearRowCheck&&(this.clearRowCallBack(),this.clearRowCheck=!1,this.selectRowCheck&&(this.selectRowCallBack(),this.selectRowCheck=!1))},s.prototype.rowDeselect=function(e,t,i,r,n,o,a,h,d){var p=this;if(this.selectionSettings.persistSelection&&(this.isRowClicked||this.checkSelectAllClicked||this.focus.activeKey&&this.focus.currentInfo.element.classList.contains("e-gridchkbox")&&"space"===this.focus.activeKey)||!this.selectionSettings.persistSelection){var f={rowIndex:t[0],data:!this.selectionSettings.persistSelection||"Uncheck"!==this.parent.checkAllRows||1===t.length&&1===this.deSelectedData.length||"ResetOnRowClick"===this.selectionSettings.checkboxMode?i:this.deSelectedData,foreignKeyData:n,cancel:!1,isInteracted:this.isInteracted,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked};"rowDeselected"===e&&delete f.cancel;var g="row",C="rowIndexes",b="data",y="foreignKeyData";f[g]=r,f.target=this.actualTarget,this.actualTarget&&!(0,l.le)((0,l.oq)(this.actualTarget,"thead"))||t.length>1?(f.rowIndex=t[0],f[C]=t):1===t.length&&(f[b]=f[b][0],f[g]=f[g][0],f[y]=f[y][0],this.isAddRowsToSelection&&(f[C]=t)),this.parent.trigger(e,this.parent.isFrozenGrid()?xr({},f,{mRow:a,frozenRightRow:d}):f,function(R){p.isCancelDeSelect=R.cancel,(!p.isCancelDeSelect||!p.isRowClicked&&!p.isInteracted&&!p.checkSelectAllClicked)&&(p.updatePersistCollection(r[0],!1),p.updateCheckBoxes(r[0],void 0,t[0]),a&&p.updateCheckBoxes(a[0],void 0,t[0]),d&&p.updateCheckBoxes(d[0],void 0,t[0])),void 0!==h&&h()})}else this.selectionSettings.persistSelection&&!this.isInteracted&&void 0!==h&&h()},s.prototype.getRowObj=function(e){return void 0===e&&(e=this.currentIndex),(0,l.le)(e)?{}:("number"==typeof e&&(e=this.parent.getRowByIndex(e)),e&&this.parent.getRowObjectFromUID(e.getAttribute("data-uid"))||{})},s.prototype.getSelectedMovableCell=function(e){var t=this.parent,i=t.getColumnByIndex(e.cellIndex);return t.isFrozenGrid()&&"movable"===i.getFreezeTableName()?t.getMovableCellFromIndex(e.rowIndex,this.getColIndex(e.rowIndex,e.cellIndex)):null},s.prototype.selectCell=function(e,t){if(this.isCellType()){var n,i=this.parent,r=this.getSelectedMovableCell(e);r||(r=i.getCellFromIndex(e.rowIndex,this.getColIndex(e.rowIndex,e.cellIndex))),this.currentIndex=e.rowIndex;var o=this.getCurrentBatchRecordChanges()[this.currentIndex];if(this.isCellType()&&r&&!this.isEditing()){var a=r.classList.contains("e-cellselectionbackground");(t=t&&!(0,l.o8)(this.prevCIdxs)&&e.rowIndex===this.prevCIdxs.rowIndex&&e.cellIndex===this.prevCIdxs.cellIndex&&a)?this.successCallBack(n,t,e,r,o)(n):((n={data:o,cellIndex:e,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0,cancel:!1}).currentCell=r,n.previousRowCellIndex=this.prevECIdxs,this.parent.trigger(mi,this.fDataUpdate(n),this.successCallBack(n,t,e,r,o)),this.cellselected=!0)}}},s.prototype.successCallBack=function(e,t,i,r,n){var o=this;return function(a){var d="currentCell";if(((0,l.le)(a)||!0!==a.cancel)&&(t||(a[d]=a[d]?a[d]:r),o.clearCell(),t||o.updateCellSelection(r,i.rowIndex,i.cellIndex),!t)){var p={data:n,cellIndex:i,currentCell:r,selectedRowCellIndex:o.selectedRowCellIndexes,previousRowCell:o.prevECIdxs?o.getCellIndex(o.prevECIdxs.rowIndex,o.prevECIdxs.cellIndex):void 0};p.previousRowCellIndex=o.prevECIdxs,o.updateCellProps(i,i),o.onActionComplete(p,Ji)}}},s.prototype.getCellIndex=function(e,t){return this.parent.getFrozenColumns()&&t>=this.parent.getFrozenColumns()?this.parent.getMovableCellFromIndex(e,t):this.parent.getCellFromIndex(e,t)},s.prototype.selectCellsByRange=function(e,t){var i=this;if(this.isCellType()){var r=this.parent,n=this.getSelectedMovableCell(e),o=r.getFrozenColumns();n||(n=r.getCellFromIndex(e.rowIndex,e.cellIndex));var a,h,c,d=e,p=t=t||e;this.currentIndex=e.rowIndex;var f=this.getCurrentBatchRecordChanges()[this.currentIndex];if(!this.isSingleSel()&&this.isCellType()&&!this.isEditing()){var g={data:f,cellIndex:e,currentCell:n,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0};g.previousRowCellIndex=this.prevECIdxs,this.parent.trigger(mi,this.fDataUpdate(g),function(m){if((0,l.le)(m)||!0!==m.cancel){if(i.clearCell(),e.rowIndex>t.rowIndex){var C=e;e=t,t=C}for(var b=e.rowIndex;b<=t.rowIndex;b++){i.selectionSettings.cellSelectionMode.indexOf("Box")<0?(a=b===e.rowIndex?e.cellIndex:0,h=b===t.rowIndex?t.cellIndex:i.getLastColIndex(b)):(a=e.cellIndex,h=t.cellIndex),c=[];for(var y=a<h?a:h,S=a>h?a:h;y<=S;y++)(n=o?y<o?r.getCellFromIndex(b,y):r.getMovableCellFromIndex(b,y):r.getCellFromIndex(b,y))&&(c.push(y),i.updateCellSelection(n),i.addAttribute(n));i.selectedRowCellIndexes.push({rowIndex:b,cellIndexes:c})}var R={data:f,cellIndex:p,currentCell:r.getCellFromIndex(p.rowIndex,p.cellIndex),selectedRowCellIndex:i.selectedRowCellIndexes,previousRowCell:i.prevECIdxs?i.getCellIndex(i.prevECIdxs.rowIndex,i.prevECIdxs.cellIndex):void 0};R.previousRowCellIndex=i.prevECIdxs,i.isDragged||(i.onActionComplete(R,Ji),i.cellselected=!0),i.updateCellProps(d,p)}})}}},s.prototype.selectCells=function(e){if(this.isCellType()){var t=this.parent,i=this.getSelectedMovableCell(e[0]),r=t.getFrozenColumns();i||(i=t.getCellFromIndex(e[0].rowIndex,e[0].cellIndexes[0])),this.currentIndex=e[0].rowIndex;var n=this.getCurrentBatchRecordChanges()[this.currentIndex];if(!this.isSingleSel()&&this.isCellType()&&!this.isEditing()){var o={data:n,cellIndex:e[0].cellIndexes[0],currentCell:i,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0};o.previousRowCellIndex=this.prevECIdxs,this.onActionBegin(o,mi);for(var h=0,d=e.length;h<d;h++)for(var p=0,c=e[h].cellIndexes.length;p<c;p++)(i=r?e[h].cellIndexes[p]<r?t.getCellFromIndex(e[h].rowIndex,e[h].cellIndexes[p]):t.getMovableCellFromIndex(e[h].rowIndex,e[h].cellIndexes[p]):t.getCellFromIndex(e[h].rowIndex,e[h].cellIndexes[p]))&&(this.updateCellSelection(i),this.addAttribute(i),this.addRowCellIndex({rowIndex:e[h].rowIndex,cellIndex:e[h].cellIndexes[p]}));this.updateCellProps({rowIndex:e[0].rowIndex,cellIndex:e[0].cellIndexes[0]},{rowIndex:e[0].rowIndex,cellIndex:e[0].cellIndexes[0]});var u={data:n,cellIndex:e[0].cellIndexes[0],currentCell:i,selectedRowCellIndex:this.selectedRowCellIndexes,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0};u.previousRowCellIndex=this.prevECIdxs,this.onActionComplete(u,Ji)}}},s.prototype.addCellsToSelection=function(e){if(this.isCellType()){var i,r,t=this.parent;this.currentIndex=e[0].rowIndex;var o=this.getCurrentBatchRecordChanges()[this.currentIndex],a=t.getFrozenLeftCount(),h=t.getMovableColumnsCount();if(!this.isSingleSel()&&this.isCellType()&&!this.isEditing()){this.hideAutoFill();var p,d=t.getColumnByIndex(e[0].cellIndex);Tt(this.parent,function(D,L){p=L[e[0].rowIndex]},[d.getFreezeTableName()&&d.getFreezeTableName()!==te?[]:t.getRowsObject(),"movable"===d.getFreezeTableName()?t.getMovableRowsObject():[],d.getFreezeTableName()===Q?t.getFrozenRightRowsObject():[]]),t.groupSettings.columns.length>0&&(p=t.getRowObjectFromUID(this.target.parentElement.getAttribute("data-uid")));for(var c=[],u=0,f=e;u<f.length;u++){for(var g=f[u],v=0,m=this.selectedRowCellIndexes.length;v<m;v++)if(this.selectedRowCellIndexes[v].rowIndex===g.rowIndex){r=v;break}(i=this.getSelectedMovableCell(g))||(i=t.getCellFromIndex(g.rowIndex,this.getColIndex(g.rowIndex,g.cellIndex)));var C="movable"===d.getFreezeTableName()?g.cellIndex-a:d.getFreezeTableName()===Q?g.cellIndex-(a+h):g.cellIndex;c.push(t.groupSettings.columns.length>0?p.cells[C+t.groupSettings.columns.length].foreignKeyData:p.cells[C].foreignKeyData);var b={cancel:!1,data:o,cellIndex:e[0],isShiftPressed:this.isMultiShiftRequest,currentCell:i,isCtrlPressed:this.isMultiCtrlRequest,previousRowCell:this.prevECIdxs?t.getCellFromIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0},y="previousRowCellIndex";b[y]=this.prevECIdxs;var S=r>-1;if(S){var R=this.selectedRowCellIndexes[r].cellIndexes;R.indexOf(g.cellIndex)>-1?(this.cellDeselect(Cs,[{rowIndex:g.rowIndex,cellIndexes:[g.cellIndex]}],o,[i],c),R.splice(R.indexOf(g.cellIndex),1),0===R.length&&this.selectedRowCellIndexes.splice(r,1),i.classList.remove("e-cellselectionbackground"),i.removeAttribute("aria-selected"),this.cellDeselect(bs,[{rowIndex:g.rowIndex,cellIndexes:[g.cellIndex]}],o,[i],c)):(S=!1,this.onActionBegin(b,mi),this.addRowCellIndex({rowIndex:g.rowIndex,cellIndex:g.cellIndex}),this.updateCellSelection(i),this.addAttribute(i))}else{if(this.onActionBegin(b,mi),!(0,l.le)(b)&&!0===b.cancel)return;this.updateCellSelection(i,g.rowIndex,g.cellIndex)}if(!S){var F={data:o,cellIndex:e[0],currentCell:i,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0,selectedRowCellIndex:this.selectedRowCellIndexes};F[y]=this.prevECIdxs,this.onActionComplete(F,Ji),this.cellselected=!0}this.updateCellProps(g,g)}}}},s.prototype.getColIndex=function(e,t){var i=this.parent.isFrozenGrid(),r=this.parent.getColumnByIndex(t),n=No(this.parent,r,e);if(n)for(var o=0;o<n.length;o++)if(parseInt(n[o].getAttribute(ce),10)===t)return i&&("movable"===r.getFreezeTableName()?o+=this.parent.getFrozenLeftCount():r.getFreezeTableName()===Q&&(o+=this.parent.getFrozenLeftColumnsCount()+this.parent.getMovableColumnsCount())),o;return-1},s.prototype.getLastColIndex=function(e){var t=this.parent.getFrozenColumns()?this.parent.getMovableDataRows()[e].querySelectorAll("td.e-rowcell"):this.parent.getDataRows()[e].querySelectorAll("td.e-rowcell");return parseInt(t[t.length-1].getAttribute(ce),10)},s.prototype.clearCell=function(){this.clearCellSelection()},s.prototype.cellDeselect=function(e,t,i,r,n){r[0]&&r[0].classList.contains(Nt)&&this.updateCheckBoxes((0,l.oq)(r[0],"tr"));var a={cells:r,data:i,cellIndexes:t,foreignKeyData:n,cancel:!1};this.parent.trigger(e,a),this.isPreventCellSelect=a.cancel},s.prototype.updateCellSelection=function(e,t,i){(0,l.le)(t)||this.addRowCellIndex({rowIndex:t,cellIndex:i}),e.classList.add("e-cellselectionbackground"),e.classList.contains(Nt)&&this.updateCheckBoxes((0,l.oq)(e,"tr"),!0),this.addAttribute(e)},s.prototype.addAttribute=function(e){this.target=e,(0,l.le)(e)||(e.setAttribute("aria-selected","true"),this.preventFocus||this.focus.onClick({target:e},!0))},s.prototype.updateCellProps=function(e,t){this.prevCIdxs=e,this.prevECIdxs=t,this.isCellSelected=this.selectedRowCellIndexes.length&&!0},s.prototype.addRowCellIndex=function(e){for(var t,i,r=0,n=this.selectedRowCellIndexes.length;r<n;r++)if(this.selectedRowCellIndexes[r].rowIndex===e.rowIndex){t=!0,i=r;break}t?this.selectedRowCellIndexes[i].cellIndexes.indexOf(e.cellIndex)<0&&this.selectedRowCellIndexes[i].cellIndexes.push(e.cellIndex):this.selectedRowCellIndexes.push({rowIndex:e.rowIndex,cellIndexes:[e.cellIndex]})},s.prototype.clearCellSelection=function(){if(this.isCellSelected){var e=this.parent,t=this.getSelectedCellsElement(),i=this.selectedRowCellIndexes,r=[],n=[],o=[],a=this.getCurrentBatchRecordChanges(),h=e.isFrozenGrid();this.hideAutoFill();for(var d=0,p=i.length;d<p;d++){r.push(a[i[d].rowIndex]);for(var c=this.getRowObj(i[d].rowIndex),u=0,f=i[d].cellIndexes.length;u<f;u++)if(h){var g=e.getColumnByIndex(i[d].cellIndexes[u]);n.push(is(this.parent,g,i[d].rowIndex,i[d].cellIndexes[u]))}else c.cells&&o.push(c.cells[i[d].cellIndexes[u]].foreignKeyData),n.push(e.getCellFromIndex(i[d].rowIndex,i[d].cellIndexes[u]))}if(this.cellDeselect(Cs,i,r,n,o),!0===this.isPreventCellSelect)return;for(d=0,p=t.length;d<p;d++)t[d].classList.remove("e-cellselectionbackground"),t[d].removeAttribute("aria-selected");this.bdrElement&&this.showHideBorders("none"),this.selectedRowCellIndexes=[],this.isCellSelected=!1,!this.isDragged&&this.cellselected&&this.cellDeselect(bs,i,r,n,o)}},s.prototype.getSelectedCellsElement=function(){var i,e=this.parent,t=e.getDataRows();e.isFrozenGrid()&&(i=e.getMovableDataRows(),t=e.addMovableRows(t,i),e.getFrozenMode()===B&&(t=e.addMovableRows(t,e.getFrozenRightDataRows())));for(var r=[],n=0,o=t.length;n<o;n++)r=r.concat([].slice.call(t[n].getElementsByClassName("e-cellselectionbackground")));return r},s.prototype.mouseMoveHandler=function(e){e.preventDefault();var h,t=this.parent.element.getBoundingClientRect(),i=this.x,r=this.y,n=Ft(e),o=n.x-t.left,a=n.y-t.top,d=(0,l.oq)(e.target,"tr");if(this.isDragged=!0,this.isCellDrag||(d||(d=(0,l.oq)(document.elementFromPoint(this.parent.element.offsetLeft+2,e.clientY),"tr")),i>o&&(h=o,o=i,i=h),r>a&&(h=a,a=r,r=h),this.element.style.left=i+"px",this.element.style.top=r+"px",this.element.style.width=o-i+"px",this.element.style.height=a-r+"px"),d&&!e.ctrlKey&&!e.shiftKey){var p=parseInt(d.getAttribute(O),10);if(this.isCellDrag){var c=w(e.target,N);c&&(this.startAFCell=this.startCell,this.endAFCell=w(e.target,N),this.selectLikeExcel(e,p,parseInt(c.getAttribute(ce),10)))}else this.hideAutoFill(),this.selectRowsByRange(this.startDIndex,p),this.isRowDragSelected=!0}},s.prototype.selectLikeExcel=function(e,t,i){this.isAutoFillSel?(this.showAFBorders(),this.selectLikeAutoFill(e)):(this.clearCellSelection(),this.selectCellsByRange({rowIndex:this.startDIndex,cellIndex:this.startDCellIndex},{rowIndex:t,cellIndex:i}),this.drawBorders())},s.prototype.drawBorders=function(){"BoxWithBorder"===this.selectionSettings.cellSelectionMode&&this.selectedRowCellIndexes.length&&!this.parent.isEdit?(this.parent.element.classList.add("e-enabledboxbdr"),this.bdrElement||this.createBorders(),this.positionBorders()):this.showHideBorders("none")},s.prototype.isLastCell=function(e){var t=[].slice.call(e.parentElement.querySelectorAll(".e-rowcell:not(.e-hide)"));return t[t.length-1]===e},s.prototype.isLastRow=function(e){var t=[].slice.call((0,l.oq)(e,I).querySelectorAll(".e-row:not(.e-hiddenrow)"));return e.parentElement===t[t.length-1]},s.prototype.isFirstRow=function(e){var t=[].slice.call((0,l.oq)(e,I).querySelectorAll(".e-row:not(.e-hiddenrow)"));return e.parentElement===t[0]},s.prototype.isFirstCell=function(e){return[].slice.call(e.parentElement.querySelectorAll(".e-rowcell:not(.e-hide)"))[0]===e},s.prototype.setBorders=function(e,t,i){var r=[].slice.call(e.getElementsByClassName("e-cellselectionbackground")).filter(function(v){return""===v.style.display});if(r.length){var n=this.parent.isFrozenGrid(),o=r[0],a=r[r.length-1],h=o.getBoundingClientRect(),d=a.getBoundingClientRect(),p=o.offsetParent.getBoundingClientRect(),c=!this.isLastRow(a)||"1"!==i&&"2"!==i&&"5"!==i?0:2,u=this.parent.frozenRows&&("1"===i||"2"===i)&&this.isFirstRow(o)?1.5:0,f=n&&("2"===i||"4"===i)&&this.isFirstCell(o)?1:0,g=("Right"!==this.parent.getFrozenMode()||"1"!==i&&"3"!==i)&&(this.parent.getFrozenMode()!==B||"5"!==i&&"6"!==i)||!this.isFirstCell(o)?0:1;this.parent.enableRtl?(t.style.right=p.right-h.right-f+"px",t.style.width=h.right-d.left+f+1+"px"):(t.style.left=h.left-p.left-f-g+"px",t.style.width=d.right-h.left+f-g+1+"px"),t.style.top=h.top-p.top-u+"px",t.style.height=d.top-h.top>0?d.top-p.top+d.height+1-(h.top-p.top)-c+u+"px":d.height+u-c+1+"px",this.selectDirection+=i}else t.style.display="none"},s.prototype.positionBorders=function(){this.updateStartEndCells(),this.startCell&&this.bdrElement&&this.selectedRowCellIndexes.length&&(this.selectDirection="",this.showHideBorders(""),this.setBorders(this.parent.getContentTable(),this.bdrElement,"1"),this.parent.isFrozenGrid()&&(this.setBorders(this.parent.contentModule.getMovableContent(),this.mcBdrElement,"2"),this.parent.getFrozenMode()===B&&this.setBorders(this.parent.contentModule.getFrozenRightContent(),this.frcBdrElement,"5")),this.parent.frozenRows&&(this.setBorders(this.parent.getHeaderTable(),this.fhBdrElement,"3"),this.parent.isFrozenGrid()&&(this.setBorders(this.parent.headerModule.getMovableHeader(),this.mhBdrElement,"4"),this.parent.getFrozenMode()===B&&this.setBorders(this.parent.headerModule.getFrozenRightHeader(),this.frhBdrElement,"6"))),this.applyBorders(this.selectDirection))},s.prototype.applyBothFrozenBorders=function(e){var t=this.parent.enableRtl;switch(e.length){case 6:this.bdrElement.style.borderWidth=t?this.right_bottom:this.bottom_left,this.mcBdrElement.style.borderWidth=this.bottom,this.fhBdrElement.style.borderWidth=t?this.top_right:this.top_left,this.mhBdrElement.style.borderWidth=this.top,this.frcBdrElement.style.borderWidth=t?this.bottom_left:this.right_bottom,this.frhBdrElement.style.borderWidth=t?this.top_left:this.top_right;break;case 4:e.includes("1")&&e.includes("2")&&e.includes("3")&&e.includes("4")&&(this.fhBdrElement.style.borderWidth=t?this.top_right:this.top_left,this.mhBdrElement.style.borderWidth=t?this.top_left:this.top_right,this.bdrElement.style.borderWidth=t?this.right_bottom:this.bottom_left,this.mcBdrElement.style.borderWidth=t?this.bottom_left:this.right_bottom),e.includes("2")&&e.includes("4")&&e.includes("5")&&e.includes("6")&&(this.mcBdrElement.style.borderWidth=t?this.right_bottom:this.bottom_left,this.mhBdrElement.style.borderWidth=t?this.top_right:this.top_left,this.frcBdrElement.style.borderWidth=t?this.bottom_left:this.right_bottom,this.frhBdrElement.style.borderWidth=t?this.top_left:this.top_right);break;case 3:this.bdrElement.style.borderWidth=t?this.top_right_bottom:this.top_bottom_left,this.mcBdrElement.style.borderWidth=this.top_bottom,this.frcBdrElement.style.borderWidth=t?this.top_bottom_left:this.top_right_bottom,this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=t?this.top_right_bottom:this.top_bottom_left,this.mhBdrElement.style.borderWidth=this.top_bottom,this.frcBdrElement.style.borderWidth=t?this.top_bottom_left:this.top_right_bottom);break;case 2:e.includes("1")&&(this.mcBdrElement.style.borderWidth=t?this.top_bottom_left:this.top_right_bottom,this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=this.top_right_left)),e.includes("2")&&(this.bdrElement.style.borderWidth=t?this.top_right_bottom:this.top_bottom_left,this.frcBdrElement.style.borderWidth=t?this.top_bottom_left:this.top_right_bottom,this.parent.frozenRows&&(this.mhBdrElement.style.borderWidth=this.top_right_left)),e.includes("3")&&(this.mhBdrElement.style.borderWidth=t?this.top_bottom_left:this.top_right_bottom,this.bdrElement.style.borderWidth=this.right_bottom_left),e.includes("4")&&(this.fhBdrElement.style.borderWidth=t?this.top_right_bottom:this.top_bottom_left,this.frhBdrElement.style.borderWidth=t?this.top_bottom_left:this.top_right_bottom,this.mcBdrElement.style.borderWidth=this.right_bottom_left),e.includes("5")&&(this.mcBdrElement.style.borderWidth=t?this.top_right_bottom:this.top_bottom_left,this.parent.frozenRows&&(this.frhBdrElement.style.borderWidth=this.top_right_left)),e.includes("6")&&(this.mhBdrElement.style.borderWidth=t?this.top_right_bottom:this.top_bottom_left,this.frcBdrElement.style.borderWidth=this.right_bottom_left);break;default:this.bdrElement.style.borderWidth=this.all_border,this.mcBdrElement.style.borderWidth=this.all_border,this.frcBdrElement.style.borderWidth=this.all_border,this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=this.all_border,this.mhBdrElement.style.borderWidth=this.all_border,this.frhBdrElement.style.borderWidth=this.all_border)}},s.prototype.applyBorders=function(e){var t=this.parent.enableRtl;if(this.parent.getFrozenMode()===B)this.applyBothFrozenBorders(e);else switch(e.length){case 4:"Right"===this.parent.getFrozenMode()?(this.bdrElement.style.borderWidth=t?this.bottom_left:this.right_bottom,this.mcBdrElement.style.borderWidth=t?this.right_bottom:this.bottom_left,this.fhBdrElement.style.borderWidth=t?this.top_left:this.top_right,this.mhBdrElement.style.borderWidth=t?this.top_right:this.top_left):(this.bdrElement.style.borderWidth=t?this.right_bottom:this.bottom_left,this.mcBdrElement.style.borderWidth=t?this.bottom_left:this.right_bottom,this.fhBdrElement.style.borderWidth=t?this.top_right:this.top_left,this.mhBdrElement.style.borderWidth=t?this.top_left:this.top_right);break;case 2:"Right"===this.parent.getFrozenMode()?(this.bdrElement.style.borderWidth=e.includes("2")?t?this.top_bottom_left:this.top_right_bottom:this.right_bottom_left,this.mcBdrElement.style.borderWidth=e.includes("1")?t?this.top_right_bottom:this.top_bottom_left:this.right_bottom_left,this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=e.includes("1")?this.top_right_left:t?this.top_bottom_left:this.top_right_bottom,this.mhBdrElement.style.borderWidth=e.includes("2")?this.top_right_left:t?this.top_right_bottom:this.top_bottom_left)):(this.bdrElement.style.borderWidth=e.includes("2")?t?this.top_right_bottom:this.top_bottom_left:this.right_bottom_left,this.parent.isFrozenGrid()&&(this.mcBdrElement.style.borderWidth=e.includes("1")?t?this.top_bottom_left:this.top_right_bottom:this.right_bottom_left),this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=e.includes("1")?this.top_right_left:t?this.top_right_bottom:this.top_bottom_left,this.parent.isFrozenGrid()&&(this.mhBdrElement.style.borderWidth=e.includes("2")?this.top_right_left:t?this.top_bottom_left:this.top_right_bottom)));break;default:this.bdrElement.style.borderWidth=this.all_border,this.parent.isFrozenGrid()&&(this.mcBdrElement.style.borderWidth=this.all_border),this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=this.all_border,this.parent.isFrozenGrid()&&(this.mhBdrElement.style.borderWidth=this.all_border))}},s.prototype.createBorders=function(){this.bdrElement||(this.bdrElement=this.parent.getContentTable().parentElement.appendChild((0,l.az)("div",{className:"e-xlsel",id:this.parent.element.id+"_bdr",styles:"width: 2px; border-width: 0;"})),this.parent.isFrozenGrid()&&(this.mcBdrElement=this.parent.contentModule.getMovableContent().appendChild((0,l.az)("div",{className:"e-xlsel",id:this.parent.element.id+"_mcbdr",styles:"height: 2px; border-width: 0;"})),this.parent.getFrozenMode()===B&&(this.frcBdrElement=this.parent.contentModule.getFrozenRightContent().appendChild((0,l.az)("div",{className:"e-xlsel",id:this.parent.element.id+"_frcbdr",styles:"height: 2px; border-width: 0;"})))),this.parent.frozenRows&&(this.fhBdrElement=this.parent.getHeaderTable().parentElement.appendChild((0,l.az)("div",{className:"e-xlsel",id:this.parent.element.id+"_fhbdr",styles:"height: 2px;"}))),this.parent.frozenRows&&this.parent.isFrozenGrid()&&(this.mhBdrElement=this.parent.headerModule.getMovableHeader().appendChild((0,l.az)("div",{className:"e-xlsel",id:this.parent.element.id+"_mhbdr",styles:"height: 2px;"})),this.parent.getFrozenMode()===B&&(this.frhBdrElement=this.parent.headerModule.getFrozenRightHeader().appendChild((0,l.az)("div",{className:"e-xlsel",id:this.parent.element.id+"_frhbdr",styles:"height: 2px;"})))))},s.prototype.showHideBorders=function(e){this.bdrElement&&(this.bdrElement.style.display=e,this.parent.isFrozenGrid()&&(this.mcBdrElement.style.display=e,this.parent.getFrozenMode()===B&&(this.frcBdrElement.style.display=e)),this.parent.frozenRows&&(this.fhBdrElement.style.display=e),this.parent.frozenRows&&this.parent.isFrozenGrid()&&(this.mhBdrElement.style.display=e,this.parent.getFrozenMode()===B&&(this.frhBdrElement.style.display=e)))},s.prototype.drawAFBorders=function(){this.bdrAFBottom||this.createAFBorders(),this.positionAFBorders()},s.prototype.positionAFBorders=function(){if(this.startCell&&this.bdrAFLeft){var e=this.startAFCell.getBoundingClientRect(),t=this.endAFCell.getBoundingClientRect(),i=t.top-e.top>0?1:0,r=t.top-e.top>=0&&(w(this.startAFCell,_)||w(this.startAFCell,"e-frozencontent"))&&this.isFirstRow(this.startAFCell)?1.5:0,n=(w(this.startAFCell,_)||w(this.startAFCell,W))&&this.isFirstCell(this.startAFCell)?1:0,o=this.isLastRow(this.endAFCell)&&(w(this.endAFCell,_)||w(this.endAFCell,"e-frozencontent"))?2:0,a=this.startAFCell.offsetParent.getBoundingClientRect(),h=this.parent.element.getBoundingClientRect(),c=this.startAFCell.offsetParent.parentElement.scrollTop-this.startAFCell.offsetTop,u=this.startAFCell.offsetParent.parentElement.scrollLeft-this.startAFCell.offsetLeft,f=this.parent.element.clientHeight,g=this.parent.element.clientWidth;c=c>0?Math.floor(c)-1:0,u=u>0?u:0;var v=e.left-h.left;if(this.parent.enableRtl){var C=w(this.startAFCell,_)||w(this.startAFCell,W)?e.right-this.startAFCell.offsetParent.parentElement.getBoundingClientRect().width-h.left:0;this.bdrAFLeft.style.right=h.right-t.right-2+t.width+"px",this.bdrAFLeft.style.width=g<=parseInt(this.bdrAFLeft.style.right,10)?"0px":"2px",this.bdrAFRight.style.right=h.right-e.right-n+C-1+"px",this.bdrAFTop.style.left=t.left-h.left-.5+"px",this.bdrAFTop.style.width=parseInt(this.bdrAFLeft.style.right,10)-parseInt(this.bdrAFRight.style.right,10)-n+1+"px",parseInt(this.bdrAFTop.style.left,10)<0&&(this.bdrAFTop.style.width=parseInt(this.bdrAFTop.style.width,10)+parseInt(this.bdrAFTop.style.left,10)+"px",this.bdrAFTop.style.left="0px")}else if(this.bdrAFLeft.style.left=v-n+u-1+"px",this.bdrAFRight.style.left=t.left-h.left-2+t.width+"px",this.bdrAFRight.style.width=g<=parseInt(this.bdrAFRight.style.left,10)?"0px":"2px",this.bdrAFTop.style.left=v+u-.5+"px",this.bdrAFTop.style.width=parseInt(this.bdrAFRight.style.left,10)-parseInt(this.bdrAFLeft.style.left,10)-n+1+"px",g<=parseInt(this.bdrAFTop.style.width,10)+parseInt(this.bdrAFTop.style.left,10)){var m=parseInt(this.bdrAFTop.style.width,10)+parseInt(this.bdrAFTop.style.left,10)-g;this.bdrAFTop.style.width=parseInt(this.bdrAFTop.style.width,10)-m+"px"}if(this.bdrAFLeft.style.top=e.top-h.top-r+c+"px",this.bdrAFLeft.style.height=t.top-e.top>0?t.top-a.top+t.height+1-(e.top-a.top)+r-o-c+"px":t.height+r-o-c+"px",this.bdrAFRight.style.top=this.bdrAFLeft.style.top,this.bdrAFRight.style.height=parseInt(this.bdrAFLeft.style.height,10)+"px",this.bdrAFTop.style.top=this.bdrAFRight.style.top,this.bdrAFBottom.style.left=this.bdrAFTop.style.left,this.bdrAFBottom.style.top=parseFloat(this.bdrAFLeft.style.top)+parseFloat(this.bdrAFLeft.style.height)-i-1+"px",this.bdrAFBottom.style.width=f<=parseFloat(this.bdrAFBottom.style.top)?"0px":this.bdrAFTop.style.width,f<=parseInt(this.bdrAFLeft.style.height,10)+parseInt(this.bdrAFLeft.style.top,10)){var b=parseInt(this.bdrAFLeft.style.height,10)+parseInt(this.bdrAFLeft.style.top,10)-f;this.bdrAFLeft.style.height=parseInt(this.bdrAFLeft.style.height,10)-b+"px",this.bdrAFRight.style.height=parseInt(this.bdrAFLeft.style.height,10)+"px"}}},s.prototype.createAFBorders=function(){this.bdrAFLeft||(this.bdrAFLeft=this.parent.element.appendChild((0,l.az)("div",{className:"e-xlselaf",id:this.parent.element.id+"_bdrafleft",styles:"width: 2px;"})),this.bdrAFRight=this.parent.element.appendChild((0,l.az)("div",{className:"e-xlselaf",id:this.parent.element.id+"_bdrafright",styles:"width: 2px;"})),this.bdrAFBottom=this.parent.element.appendChild((0,l.az)("div",{className:"e-xlselaf",id:this.parent.element.id+"_bdrafbottom",styles:"height: 2px;"})),this.bdrAFTop=this.parent.element.appendChild((0,l.az)("div",{className:"e-xlselaf",id:this.parent.element.id+"_bdraftop",styles:"height: 2px;"})))},s.prototype.showAFBorders=function(){this.bdrAFLeft&&(this.bdrAFLeft.style.display="",this.bdrAFRight.style.display="",this.bdrAFBottom.style.display="",this.bdrAFTop.style.display="")},s.prototype.hideAFBorders=function(){this.bdrAFLeft&&(this.bdrAFLeft.style.display="none",this.bdrAFRight.style.display="none",this.bdrAFBottom.style.display="none",this.bdrAFTop.style.display="none")},s.prototype.updateValue=function(e,t,i){var r=this.createBeforeAutoFill(e,t,i);if(!r.cancel){var n=this.parent.getColumnByIndex(t);this.parent.editModule&&i&&this.parent.editModule.updateCell(e,n.field,"number"===n.type?parseFloat(r.value):r.value)}},s.prototype.createBeforeAutoFill=function(e,t,i){var n={column:this.parent.getColumnByIndex(t),value:i.innerText};return this.parent.trigger("beforeAutoFill",n),n},s.prototype.getAutoFillCells=function(e,t){var i=".e-cellselectionbackground",r=[].slice.call(this.parent.getDataRows()[e].querySelectorAll(i));return this.parent.isFrozenGrid()&&(r=r.concat([].slice.call(this.parent.getMovableDataRows()[e].querySelectorAll(i))),this.parent.getFrozenMode()===B&&(r=r.concat([].slice.call(this.parent.getFrozenRightDataRows()[e].querySelectorAll(i))))),r},s.prototype.selectLikeAutoFill=function(e,t){var i=parseInt(w(this.startAFCell,G).getAttribute(O),10),r=parseInt(this.startAFCell.getAttribute(ce),10),n=parseInt(w(this.endAFCell,G).getAttribute(O),10),o=parseInt(this.endAFCell.getAttribute(ce),10),a=this.selectedRowCellIndexes.length-1,h=this.selectedRowCellIndexes[0].cellIndexes.length-1;switch(!0){case!t&&this.endAFCell.classList.contains("e-cellselectionbackground")&&!!w(e.target,N):this.startAFCell=this.parent.getCellFromIndex(i,r),this.endAFCell=this.parent.getCellFromIndex(i+a,r+h),this.drawAFBorders();break;case this.autoFillRLselection&&r+h<o&&o-r-h+1>n-i-a&&o-r-h+1>i-n:if(this.endAFCell=this.parent.getCellFromIndex(i+a,o),n=parseInt(w(this.endAFCell,G).getAttribute(O),10),o=parseInt(this.endAFCell.getAttribute(ce),10),t){for(var d=parseInt(this.endCell.getAttribute(ce),10),p=i;p<=n;p++)for(var c=this.getAutoFillCells(p,r),u=0,f=d+1;f<=o;f++)u>h&&(u=0),this.updateValue(p,f,c[u]),u++;this.selectCellsByRange({rowIndex:i,cellIndex:this.startCellIndex},{rowIndex:n,cellIndex:o})}else this.drawAFBorders();break;case this.autoFillRLselection&&r>o&&r-o+1>n-i-a&&r-o+1>i-n:if(this.startAFCell=this.parent.getCellFromIndex(i,o),this.endAFCell=this.endCell,t){for(p=i;p<=i+a;p++)for((c=this.getAutoFillCells(p,r)).reverse(),u=0,f=this.startCellIndex-1;f>=o;f--)u>h&&(u=0),this.updateValue(p,f,c[u]),u++;this.selectCellsByRange({rowIndex:i,cellIndex:o},{rowIndex:i+a,cellIndex:this.startCellIndex+h})}else this.drawAFBorders();break;case i>n:if(this.startAFCell=this.parent.getCellFromIndex(n,r),this.endAFCell=this.endCell,t){var v=g=parseInt(this.endCell.parentElement.getAttribute(O),10);for(p=i-1;p>=n;p--)for(v===this.startIndex-1&&(v=g),c=this.getAutoFillCells(v,r),u=0,v--,f=this.startCellIndex;f<=this.startCellIndex+h;f++)this.updateValue(p,f,c[u]),u++;this.selectCellsByRange({rowIndex:n,cellIndex:r+h},{rowIndex:i+a,cellIndex:r})}else this.drawAFBorders();break;default:if(this.endAFCell=this.parent.getCellFromIndex(n,r+h),t){var g=parseInt(this.endCell.parentElement.getAttribute(O),10);for(v=this.startIndex,p=g+1;p<=n;p++){v===g+1&&(v=this.startIndex),c=this.getAutoFillCells(v,r),v++,u=0;for(var m=this.startCellIndex;m<=this.startCellIndex+h;m++)this.updateValue(p,m,c[u]),u++}this.selectCellsByRange({rowIndex:g-a,cellIndex:r},{rowIndex:n,cellIndex:r+h})}else this.drawAFBorders()}},s.prototype.mouseUpHandler=function(e){document.body.classList.remove("e-disableuserselect"),this.element&&(0,l.Od)(this.element),this.mUPTarget=this.isDragged&&1===this.selectedRowCellIndexes.length&&1===this.selectedRowCellIndexes[0].cellIndexes.length?w(e.target,N):null;var t=(0,l.oq)(e.target,".e-rowcell");if(this.isDragged&&!this.isAutoFillSel&&"Cell"===this.selectionSettings.mode&&t&&t.classList.contains(N)){var r=parseInt(t.parentElement.getAttribute(O),10),n=parseInt(t.getAttribute(ce),10);this.isDragged=!1,this.clearCellSelection(),this.selectCellsByRange({rowIndex:this.startDIndex,cellIndex:this.startDCellIndex},{rowIndex:r,cellIndex:n})}if(this.isDragged=!1,this.updateAutoFillPosition(),this.isAutoFillSel){var o=w(e.target,N);this.endAFCell=o||(this.endCell===this.endAFCell?this.startAFCell:this.endAFCell),this.startAFCell=this.startCell,this.updateStartCellsIndex(),this.selectLikeAutoFill(e,!0),this.updateAutoFillPosition(),this.hideAFBorders(),this.positionBorders(),this.isAutoFillSel=!1}l.bi.remove(this.parent.getContent(),"mousemove",this.mouseMoveHandler),this.parent.frozenRows&&l.bi.remove(this.parent.getHeaderContent(),"mousemove",this.mouseMoveHandler),l.bi.remove(document,"mouseup",this.mouseUpHandler)},s.prototype.hideAutoFill=function(){this.autofill&&(this.autofill.style.display="none")},s.prototype.updateAutoFillPosition=function(){if(this.parent.enableAutoFill&&!this.parent.isEdit&&this.selectionSettings.cellSelectionMode.indexOf("Box")>-1&&!this.isRowType()&&!this.isSingleSel()&&this.selectedRowCellIndexes.length){var e=parseInt(this.target.getAttribute(ce),10),t=parseInt(this.target.getAttribute("index"),10),r=this.getAutoFillCells(this.selectedRowCellIndexes[this.selectedRowCellIndexes.length-1].rowIndex,e).filter(function(g){return""===g.style.display}),n=this.parent.getColumnByIndex(e),o="movable"===n.getFreezeTableName(),a=t<this.parent.frozenRows,h=this.parent.getFrozenMode()===B&&n.getFreezeTableName()===Q;(0,l.Ys)("#"+this.parent.element.id+"_autofill",w(this.target,Z))||((0,l.Ys)("#"+this.parent.element.id+"_autofill",this.parent.element)&&(0,l.Ys)("#"+this.parent.element.id+"_autofill",this.parent.element).remove(),this.autofill=(0,l.az)("div",{className:"e-autofill",id:this.parent.element.id+"_autofill"}),this.autofill.style.display="none",a?o?this.parent.headerModule.getMovableHeader().appendChild(this.autofill):this.parent.getHeaderTable().parentElement.appendChild(this.autofill):o?this.parent.contentModule.getMovableContent().appendChild(this.autofill):this.parent.getContentTable().parentElement.appendChild(this.autofill),h&&(a?this.parent.getFrozenRightHeader().appendChild(this.autofill):this.parent.getFrozenRightContent().appendChild(this.autofill)));var d=r[r.length-1];if(d&&d.offsetParent){var p=d.getBoundingClientRect(),c=d.offsetParent.getBoundingClientRect(),u=this.isLastCell(d)?4:0,f=this.isLastRow(d)?3:0;this.parent.enableRtl?this.autofill.style.right=c.right-p.right+p.width-4-u+"px":this.autofill.style.left=p.left-c.left+p.width-4-u+"px",this.autofill.style.top=p.top-c.top+p.height-5-f+"px"}this.autofill.style.display=""}else this.hideAutoFill()},s.prototype.mouseDownHandler=function(e){this.mouseButton=e.button;var r,t=e.target,i=this.parent,n=w(t,"e-grid");if(!(n&&n.id!==i.element.id||w(t,le)&&!this.parent.frozenRows||w(t,"e-editedbatchcell")||w(t,Re))){if((e.shiftKey||e.ctrlKey)&&e.preventDefault(),w(t,N)&&!e.shiftKey&&!e.ctrlKey){if(i.selectionSettings.cellSelectionMode.indexOf("Box")>-1&&!this.isRowType()&&!this.isSingleSel())this.isCellDrag=!0,r=!0;else if(i.allowRowDragAndDrop&&!i.isEdit&&!this.parent.selectionSettings.checkboxOnly){if(this.isRowDragSelected=!1,!this.isRowType()||this.isSingleSel()||(0,l.oq)(t,"td").classList.contains("e-selectionbackground"))return void(this.isDragged=!1);r=!0,this.element=this.parent.createElement("div",{className:"e-griddragarea"}),i.getContent().appendChild(this.element)}r&&this.enableDrag(e,!0)}this.updateStartEndCells(),(t.classList.contains("e-autofill")||t.classList.contains("e-xlsel"))&&(this.isCellDrag=!0,this.isAutoFillSel=!0,this.enableDrag(e))}},s.prototype.updateStartEndCells=function(){var e=[].slice.call(this.parent.element.getElementsByClassName("e-cellselectionbackground"));this.startCell=e[0],this.endCell=e[e.length-1],this.startCell&&(this.startIndex=parseInt(this.startCell.parentElement.getAttribute(O),10),this.startCellIndex=parseInt(w(this.startCell,N).getAttribute(ce),10))},s.prototype.updateStartCellsIndex=function(){this.startCell&&(this.startIndex=parseInt(this.startCell.parentElement.getAttribute(O),10),this.startCellIndex=parseInt(w(this.startCell,N).getAttribute(ce),10))},s.prototype.enableDrag=function(e,t){var i=this.parent;if(t){var r=(0,l.oq)(e.target,"tr");this.startDIndex=parseInt(r.getAttribute(O),10),this.startDCellIndex=parseInt(w(e.target,N).getAttribute(ce),10)}document.body.classList.add("e-disableuserselect");var n=i.element.getBoundingClientRect(),o=Ft(e);this.x=o.x-n.left,this.y=o.y-n.top,l.bi.add(i.getContent(),"mousemove",this.mouseMoveHandler,this),this.parent.frozenRows&&l.bi.add(i.getHeaderContent(),"mousemove",this.mouseMoveHandler,this),l.bi.add(document,"mouseup",this.mouseUpHandler,this)},s.prototype.clearSelAfterRefresh=function(e){var t=this.parent.enableInfiniteScrolling&&"infiniteScroll"===e.requestType;if("virtualscroll"!==e.requestType&&!this.parent.isPersistSelection&&!t&&this.clearSelection(),("virtualscroll"===e.requestType||t)&&this.parent.isPersistSelection&&this.isPartialSelection&&this.isHdrSelectAllClicked){var i=this.parent.getRowsObject().filter(function(a){return a.isSelectable}),r=[];this.selectedRowState={},this.persistSelectedData=[];for(var n=0;n<i.length;n++){r.push(i[n].index);var o=this.getPkValue(this.primaryKey,i[n].data);this.selectedRowState[o]=!0,this.persistSelectedData.push(i[n].data)}this.selectedRowIndexes=r}},s.prototype.addEventListener=function(){this.parent.isDestroyed||(this.evtHandlers=[{event:X,handler:this.enableAfterRender},{event:we,handler:this.initializeSelection},{event:"rowselected",handler:this.onActionComplete},{event:"cellselected",handler:this.onActionComplete},{event:Se,handler:this.onPropertyChanged},{event:ir,handler:this.onCellFocused},{event:Us,handler:this.clearSelAfterRefresh},{event:ii,handler:this.columnPositionChanged},{event:ee,handler:this.initialEnd},{event:rr,handler:this.rowsRemoved},{event:ue,handler:this.refreshHeader},{event:V,handler:this.destroy}],me(this.parent,this.evtHandlers,!0,this),this.actionBeginFunction=this.actionBegin.bind(this),this.actionCompleteFunction=this.actionComplete.bind(this),this.parent.addEventListener(Y,this.actionBeginFunction),this.parent.addEventListener(H,this.actionCompleteFunction),this.addEventListener_checkbox())},s.prototype.removeEventListener=function(){this.parent.isDestroyed||(me(this.parent,this.evtHandlers,!1),this.parent.removeEventListener(Y,this.actionBeginFunction),this.parent.removeEventListener(H,this.actionCompleteFunction),this.removeEventListener_checkbox())},s.prototype.wireEvents=function(){this.isMacOS=-1!==navigator.userAgent.indexOf("Mac OS"),this.isMacOS?(l.bi.add(this.parent.element,"keydown",this.keyDownHandler,this),l.bi.add(this.parent.element,"keyup",this.keyUpHandler,this)):this.parent.allowKeyboard||l.bi.add(this.parent.element,"keydown",this.keyDownHandler,this)},s.prototype.unWireEvents=function(){this.isMacOS?(l.bi.remove(this.parent.element,"keydown",this.keyDownHandler),l.bi.remove(this.parent.element,"keyup",this.keyUpHandler)):this.parent.allowKeyboard||l.bi.remove(this.parent.element,"keydown",this.keyDownHandler)},s.prototype.columnPositionChanged=function(){this.parent.isPersistSelection||this.clearSelection()},s.prototype.refreshHeader=function(){this.setCheckAllState()},s.prototype.rowsRemoved=function(e){for(var t=0;t<e.records.length;t++){var i=this.getPkValue(this.primaryKey,e.records[t]);delete this.selectedRowState[i],--this.totalRecordsCount}this.setCheckAllState()},s.prototype.beforeFragAppend=function(e){"virtualscroll"!==e.requestType&&!this.parent.isPersistSelection&&this.clearSelection()},s.prototype.getCheckAllBox=function(){return this.parent.getHeaderContent().querySelector(".e-checkselectall")},s.prototype.enableAfterRender=function(e){e.module===this.getModuleName()&&e.enable&&(this.render(),this.initPerisistSelection())},s.prototype.render=function(e){l.bi.add(this.parent.getContent(),"mousedown",this.mouseDownHandler,this),l.bi.add(this.parent.getHeaderContent(),"mousedown",this.mouseDownHandler,this)},s.prototype.onPropertyChanged=function(e){if(e.module===this.getModuleName()){var t=this.parent;!(0,l.le)(e.properties.type)&&"Single"===this.selectionSettings.type&&(this.selectedRowCellIndexes.length>1&&(this.clearCellSelection(),this.prevCIdxs=void 0),this.selectedRowIndexes.length>1&&(this.clearRowSelection(),this.prevRowIndex=void 0),this.selectedColumnsIndexes.length>1&&(this.clearColumnSelection(),this.prevColIndex=void 0),this.enableSelectMultiTouch=!1,this.hidePopUp()),(!(0,l.le)(e.properties.mode)||!(0,l.le)(e.properties.cellSelectionMode))&&(this.clearSelection(),this.prevRowIndex=void 0,this.prevCIdxs=void 0,this.prevColIndex=void 0),this.isPersisted=!0,this.checkBoxSelectionChanged(),this.isPersisted=!1,this.parent.isCheckBoxSelection||this.initPerisistSelection(),this.parent.getColumns().filter(function(r){return"checkbox"===r.type}).length&&(t.isCheckBoxSelection="ResetOnRowClick"!==this.selectionSettings.checkboxMode),this.drawBorders()}},s.prototype.hidePopUp=function(){this.parent.element.querySelector(".e-gridpopup").getElementsByClassName("e-rowselect").length&&(this.parent.element.querySelector(".e-gridpopup").style.display="none")},s.prototype.initialEnd=function(e){var t=this.parent.isFrozenGrid(),i=this.parent.getFrozenMode()===B;(!t||t&&!i&&!e.args.isFrozen||i&&e.args.renderFrozenRightContent)&&!this.selectedRowIndexes.length&&(this.parent.off(ee,this.initialEnd),this.selectRow(this.parent.selectedRowIndex))},s.prototype.checkBoxSelectionChanged=function(){var e=this.parent;e.off(ee,this.checkBoxSelectionChanged);var t=e.getColumns().filter(function(i){return"checkbox"===i.type});t.length>0&&(e.isCheckBoxSelection=!0,this.chkField=t[0].field,this.totalRecordsCount=this.parent.pageSettings.totalRecordsCount,(0,l.le)(this.totalRecordsCount)&&(this.totalRecordsCount=this.getCurrentBatchRecordChanges().length),this.isSingleSel()?(e.selectionSettings.type="Multiple",e.dataBind()):this.initPerisistSelection()),!e.isCheckBoxSelection&&!this.isPersisted&&(this.chkField=null,this.initPerisistSelection())},s.prototype.initPerisistSelection=function(){var e=this.parent;this.parent.selectionSettings.persistSelection&&this.parent.getPrimaryKeyFieldNames().length>0?(e.isPersistSelection=!0,this.ensureCheckboxFieldSelection()):this.parent.getPrimaryKeyFieldNames().length>0?(e.isPersistSelection=!1,this.ensureCheckboxFieldSelection()):(e.isPersistSelection=!1,this.selectedRowState={})},s.prototype.ensureCheckboxFieldSelection=function(){var e=this.parent;if(this.primaryKey=this.parent.getPrimaryKeyFieldNames()[0],!e.enableVirtualization&&this.chkField&&(e.isPersistSelection&&0===Object.keys(this.selectedRowState).length||!e.isPersistSelection)){var t=this.parent.getDataModule(),i=(new z.AE).where(this.chkField,"equal",!0);i.params||(i.params=this.parent.query.params);var r=t.getData({},i),n=this;this.parent.showSpinner(),r.then(function(o){n.dataSuccess(o.result),n.refreshPersistSelection(),n.parent.hideSpinner()})}},s.prototype.dataSuccess=function(e){for(var t=0;t<e.length;t++){var i=this.getPkValue(this.primaryKey,e[t]);(0,l.le)(this.selectedRowState[i])&&e[t][this.chkField]&&(this.selectedRowState[i]=e[t][this.chkField])}this.persistSelectedData=e},s.prototype.setRowSelection=function(e){if(this.parent.getDataModule().isRemote())if(e)for(var u=Object.keys(this.selectedRowState),f=Object.keys(this.unSelectedRowState),g=0,v=this.parent.currentViewData;g<v.length;g++){var m=(d=v[g])[this.primaryKey].toString();-1===u.indexOf(m)&&-1===f.indexOf(m)&&(this.selectedRowState[d[this.primaryKey]]=!0)}else this.selectedRowState={},this.unSelectedRowState={},this.rmtHdrChkbxClicked=!1;else if(e)if(this.isPartialSelection&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling))for(var i=0,r=this.parent.getRowsObject().filter(function(C){return C.isSelectable});i<r.length;i++)this.selectedRowState[this.getPkValue(this.primaryKey,r[i].data)]=!0;else{var o=this.isPartialSelection?this.parent.partialSelectedRecords:this.getData();if(this.parent.groupSettings.columns.length)for(var a=0,h=this.isPartialSelection?o:o.records;a<h.length;a++)this.selectedRowState[this.getPkValue(this.primaryKey,d=h[a])]=!0;else for(var p=0,c=o;p<c.length;p++){var d;this.selectedRowState[this.getPkValue(this.primaryKey,d=c[p])]=!0}}else this.selectedRowState={}},s.prototype.getData=function(){return this.parent.getDataModule().dataManager.executeLocal(this.parent.getDataModule().generateQuery(!0))},s.prototype.refreshPersistSelection=function(){var e=this.parent.getRows();if(this.parent.isCheckBoxSelection&&this.parent.isFrozenGrid()&&(this.parent.getMovableContentTbody().querySelector(".e-checkselect")&&(e=this.parent.getMovableRows()),this.parent.getFrozenMode()===B&&this.parent.getFrozenRightContentTbody().querySelector(".e-checkselect")&&(e=this.parent.getFrozenRightRows())),this.totalRecordsCount=this.parent.getCurrentViewRecords().length,this.parent.allowPaging&&(this.totalRecordsCount=this.parent.pageSettings.totalRecordsCount),null!==e&&e.length>0&&(this.parent.isPersistSelection||this.chkField)){for(var r=[],n=0;n<e.length;n++){var o=this.getRowObj(e[n]),a=o&&o.data?this.getPkValue(this.primaryKey,o.data):null;if(null===a)return;if(!this.isPartialSelection||o.isSelectable){var h=void 0,d=e[n].querySelector(".e-checkselect");this.selectedRowState[a]||"Check"===this.parent.checkAllRows&&this.selectedRowState[a]&&this.totalRecordsCount===Object.keys(this.selectedRowState).length&&this.chkAllCollec.indexOf(a)<0||"Uncheck"===this.parent.checkAllRows&&this.chkAllCollec.indexOf(a)>0&&!this.parent.selectedRowIndex||"Intermediate"===this.parent.checkAllRows&&!(0,l.le)(this.chkField)&&o.data[this.chkField]?(r.push(parseInt(e[n].getAttribute(O),10)),h=!0):(h=!1,this.checkedTarget!==d&&this.parent.isCheckBoxSelection&&d&&Vi(d.nextElementSibling,h)),this.updatePersistCollection(e[n],h)}}this.isSingleSel()&&r.length>0?this.selectRow(r[0],!0):this.selectRows(r)}this.parent.isCheckBoxSelection&&this.getCurrentBatchRecordChanges().length>0&&this.setCheckAllState()},s.prototype.actionBegin=function(e){if("save"===e.requestType&&this.parent.isPersistSelection){var t=this.parent.element.querySelector(".e-edit-checkselect");if(!(0,l.le)(t)){var i=(0,l.oq)(t,"."+Re);if(i){"Dialog"===this.parent.editSettings.mode&&(i=this.parent.element.querySelector(".e-dlgeditrow"));var r=this.getRowObj(i);if(!r)return;this.selectedRowState[this.getPkValue(this.primaryKey,r.data)]=r.isSelected=t.checked}else this.isCheckedOnAdd=t.checked}}this.parent.isPersistSelection&&this.isPartialSelection&&("paging"===e.requestType&&this.parent.getDataModule().isRemote()&&(this.selectedRowIndexes=[]),("filtering"===e.requestType||"searching"===e.requestType)&&(this.parent.partialSelectedRecords=[],this.parent.disableSelectedRecords=[]))},s.prototype.actionComplete=function(e){if("save"===e.requestType&&this.parent.isPersistSelection){if("add"===e.action){if(this.isCheckedOnAdd){var t=this.parent.getRowObjectFromUID(this.parent.getRows()[e.selectedRow].getAttribute("data-uid"));this.selectedRowState[this.getPkValue(this.primaryKey,t.data)]=t.isSelected=this.isCheckedOnAdd}this.isHdrSelectAllClicked=!1,this.setCheckAllState()}this.refreshPersistSelection()}if("delete"===e.requestType&&this.parent.isPersistSelection){for(var r=e.data.slice(),n=0;n<r.length;n++){var o=this.getPkValue(this.primaryKey,r[n]);(0,l.le)(o)||this.updatePersistDelete(o,this.isPartialSelection)}this.isHdrSelectAllClicked=!1,this.setCheckAllState(),this.totalRecordsCount=this.parent.pageSettings.totalRecordsCount}if("paging"===e.requestType){if(this.parent.isPersistSelection&&this.isPartialSelection&&this.isHdrSelectAllClicked){var a=this.parent.getRowsObject(),h=[];for(n=0;n<a.length;n++)a[n].isSelectable&&h.push(a[n].index);h.length&&this.selectRows(h)}this.prevRowIndex=void 0,this.prevCIdxs=void 0,this.prevECIdxs=void 0}},s.prototype.onDataBound=function(){if(!this.parent.enableVirtualization&&this.parent.isPersistSelection&&this.selectedRecords.length&&(this.isPrevRowSelection=!0),this.parent.getDataModule().isRemote()&&this.rmtHdrChkbxClicked&&("Intermediate"===this.parent.checkAllRows?this.setRowSelection(!0):"Uncheck"===this.parent.checkAllRows&&this.setRowSelection(!1)),this.parent.enableVirtualization&&this.setCheckAllState(),this.parent.isPersistSelection&&this.refreshPersistSelection(),this.initialRowSelection=!!(this.isRowType()&&this.parent.element.querySelectorAll(".e-selectionbackground")&&this.parent.getSelectedRows().length),this.parent.isCheckBoxSelection&&!this.initialRowSelection){for(var e=this.parent.getRowsObject(),t=[],i=0;i<e.length;i++)e[i].isSelected&&t.push(i);t.length&&this.selectRows(t),this.initialRowSelection=!0}},s.prototype.updatePersistSelectedData=function(e){if(this.parent.isPersistSelection){for(var t=this.parent.getRows(),i=0;i<t.length;i++)this.updatePersistCollection(t[i],e);"Uncheck"===this.parent.checkAllRows?(this.setRowSelection(!1),this.persistSelectedData=this.parent.getDataModule().isRemote()?this.persistSelectedData:[]):"Check"===this.parent.checkAllRows&&(this.setRowSelection(!0),this.persistSelectedData=this.parent.getDataModule().isRemote()||this.isPartialSelection?this.persistSelectedData:this.parent.groupSettings.columns.length?this.getData().records.slice():this.getData().slice())}},s.prototype.checkSelectAllAction=function(e){var t=this.getRenderer(),i=this.parent.element.querySelector(".e-gridform");if(this.checkedTarget=this.getCheckAllBox(),e&&this.getCurrentBatchRecordChanges().length?(this.parent.checkAllRows="Check",this.updatePersistSelectedData(e),this.selectRowsByRange(t.getVirtualRowIndex(0),t.getVirtualRowIndex(this.getCurrentBatchRecordChanges().length-1))):(this.parent.checkAllRows="Uncheck",this.updatePersistSelectedData(e),this.clearSelection()),this.chkAllCollec=[],!(0,l.le)(i)){var r=i.querySelector(".e-edit-checkselect");(0,l.le)(r)||Vi(r.nextElementSibling,e)}},s.prototype.checkSelectAll=function(e){var t=this,i=this.getCheckAllStatus(e),r="Check"===i;this.isHeaderCheckboxClicked=!0,this.rmtHdrChkbxClicked=!(!this.parent.getDataModule().isRemote()||"Uncheck"!==i),"Intermediate"===i&&(r=this.getCurrentBatchRecordChanges().some(function(n){return t.getPkValue(t.primaryKey,n)in t.selectedRowState})),this.parent.isPersistSelection&&this.parent.allowPaging&&(this.totalRecordsCount=this.parent.pageSettings.totalRecordsCount),this.checkSelectAllAction(!r),this.target=null,this.getCurrentBatchRecordChanges().length>0&&(this.setCheckAllState(),this.updateSelectedRowIndexes()),this.triggerChkChangeEvent(e,!r)},s.prototype.getCheckAllStatus=function(e){var t=e?e.nextElementSibling.classList:this.getCheckAllBox().nextElementSibling.classList;return t.contains("e-check")?"Check":t.contains("e-uncheck")?"Uncheck":t.contains("e-stop")?"Intermediate":"None"},s.prototype.checkSelect=function(e){var t=(0,l.oq)(this.checkedTarget,"."+N),i=this.parent;this.isMultiCtrlRequest=!0;var r=0;if(this.isHeaderCheckboxClicked=!1,he(i)){var n=t.parentElement.getAttribute("data-uid");r=i.getRows().map(function(o){return o.getAttribute("data-uid")}).indexOf(n)}else r=parseInt(t.parentElement.getAttribute(O),10);this.parent.isPersistSelection&&this.parent.element.getElementsByClassName(Ie).length>0&&"Top"===this.parent.editSettings.newRowPosition&&++r,this.rowCellSelectionHandler(r,parseInt(t.getAttribute(ce),10)),this.moveIntoUncheckCollection((0,l.oq)(t,"."+G)),this.setCheckAllState(),this.isMultiCtrlRequest=!1,this.triggerChkChangeEvent(e,e.nextElementSibling.classList.contains("e-check"))},s.prototype.moveIntoUncheckCollection=function(e){if("Check"===this.parent.checkAllRows||"Uncheck"===this.parent.checkAllRows){var t=this.getRowObj(e),i=t&&t.data?this.getPkValue(this.primaryKey,t.data):null;if(!i)return;this.chkAllCollec.indexOf(i)<0?this.chkAllCollec.push(i):this.chkAllCollec.splice(this.chkAllCollec.indexOf(i),1)}},s.prototype.triggerChkChangeEvent=function(e,t){this.parent.trigger("checkBoxChange",{checked:t,selectedRowIndexes:this.parent.getSelectedRowIndexes(),target:e}),this.parent.isEdit||(this.checkedTarget=null)},s.prototype.updateSelectedRowIndexes=function(){if(this.parent.isCheckBoxSelection&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&this.isPartialSelection&&!this.parent.getDataModule().isRemote()&&this.parent.selectionSettings.persistSelection&&"Uncheck"!==this.parent.checkAllRows)for(var t=0,i=this.parent.getRowsObject().filter(function(n){return n.isSelectable});t<i.length;t++)this.selectedRowIndexes.push(i[t].index)},s.prototype.updateSelectedRowIndex=function(e){if(this.parent.isCheckBoxSelection&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&!this.parent.getDataModule().isRemote()&&!this.isPartialSelection)if("Check"===this.parent.checkAllRows){this.selectedRowIndexes=[];for(var t=this.getData().length,i=0;i<t;i++)this.selectedRowIndexes.push(i)}else if("Uncheck"===this.parent.checkAllRows)this.selectedRowIndexes=[];else{var r=this.parent.getRowByIndex(e);if(e&&r&&"false"===r.getAttribute("aria-selected")){var n=this.selectedRowIndexes.indexOf(e);this.selectedRowIndexes.splice(n,1)}}},s.prototype.isAllSelected=function(e){if(this.isPartialSelection){if(this.parent.allowPaging&&this.parent.pageSettings.pageSize<this.parent.pageSettings.totalRecordsCount){for(var t=this.parent.partialSelectedRecords,i=0;i<t.length;i++){var r=this.getPkValue(this.primaryKey,t[i]);if(!this.selectedRowState[r])return!1}return!0}return this.isSelectAllRowCount(e)}for(t=this.getData(),i=0;i<t.length;i++)if(r=this.getPkValue(this.primaryKey,t[i]),!this.selectedRowState[r])return!1;return!0},s.prototype.someDataSelected=function(){for(var e=this.isPartialSelection?this.parent.partialSelectedRecords:this.getData(),t=0;t<e.length;t++){var i=this.getPkValue(this.primaryKey,e[t]);if(this.selectedRowState[i])return!1}return!0},s.prototype.setCheckAllState=function(e,t){if(this.parent.isCheckBoxSelection||"ResetOnRowClick"===this.parent.selectionSettings.checkboxMode){var i=!1,r=!1,n=Object.keys(this.selectedRowState).length;this.parent.isPersistSelection||(n=this.selectedRowIndexes.length,this.totalRecordsCount=this.getCurrentBatchRecordChanges().length),this.parent.isPersistSelection&&!this.parent.getDataModule().isRemote()&&(this.parent.searchSettings.key.length||this.parent.filterSettings.columns.length)&&(r=!0,i=this.isAllSelected(n));var o=this.getCheckAllBox();if(o){var a=o.nextElementSibling;(0,l.IV)([a],["e-check","e-stop","e-uncheck"]),Wt(o,!1),o.indeterminate=!1,i&&r&&this.getData().length||!r&&(n===this.totalRecordsCount&&this.totalRecordsCount&&!this.isPartialSelection&&!this.parent.enableVirtualization||!this.parent.enableVirtualization&&!this.parent.enableInfiniteScrolling&&this.isPartialSelection&&(this.isSelectAllRowCount(n)||this.isHdrSelectAllClicked)||(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&!this.parent.allowPaging&&(!this.parent.getDataModule().isRemote()&&this.getData().length&&n===this.getData().length||this.parent.getDataModule().isRemote()&&!this.isPartialSelection&&n===this.parent.totalDataRecordsCount||this.isPartialSelection&&(this.isHdrSelectAllClicked||this.isSelectAllRowCount(n))))?((0,l.cn)([a],["e-check"]),Wt(o,!0),t&&this.getRenderer().setSelection(null,!0,!0),this.parent.checkAllRows="Check"):(!this.selectedRowIndexes.length&&!this.parent.enableVirtualization||this.parent.enableVirtualization&&(!this.persistSelectedData.length&&!r||r&&this.someDataSelected())||0===n&&0===this.getCurrentBatchRecordChanges().length)&&!this.parent.allowPaging||this.parent.allowPaging&&(0===n||n&&r&&this.someDataSelected())?((0,l.cn)([a],["e-uncheck"]),t&&this.getRenderer().setSelection(null,!1,!0),this.parent.checkAllRows="Uncheck",0===n&&0===this.getCurrentBatchRecordChanges().length?(0,l.cn)([a.parentElement],["e-checkbox-disabled"]):(0,l.IV)([a.parentElement],["e-checkbox-disabled"])):((0,l.cn)([a],["e-stop"]),this.parent.checkAllRows="Intermediate",o.indeterminate=!0),this.isPartialSelection&&(0===this.parent.getRowsObject().filter(function(d){return d.isSelectable}).length&&a.parentElement.querySelector(".e-frame").classList.contains("e-uncheck")?(0,l.cn)([a.parentElement],["e-checkbox-disabled"]):(0,l.IV)([a.parentElement],["e-checkbox-disabled"])),(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&!this.parent.allowPaging&&!this.parent.getDataModule().isRemote()&&this.updateSelectedRowIndex(e)}}},s.prototype.isSelectAllRowCount=function(e){var t=0,i=this.parent.getRowsObject();return this.parent.selectionSettings.persistSelection&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)?(this.parent.getDataModule().isRemote()?this.parent.totalDataRecordsCount:this.getData()&&this.getData().length)===i.length&&(t=i.filter(function(n){return n.isSelectable}).length)&&e===t:this.parent.allowPaging&&this.parent.selectionSettings.persistSelection?(t=this.parent.partialSelectedRecords.length+this.parent.disableSelectedRecords.length)===this.totalRecordsCount&&this.parent.partialSelectedRecords.length&&e===this.parent.partialSelectedRecords.length:(t=i.filter(function(n){return n.isSelectable}).length)&&e===t},s.prototype.keyDownHandler=function(e){(("chrome"===l.AR.info.name||"safari"===l.AR.info.name)&&(91===e.keyCode||93===e.keyCode)||"opera"===l.AR.info.name&&17===e.keyCode||"mozilla"===l.AR.info.name&&224===e.keyCode)&&(this.cmdKeyPressed=!0);var t=w(e.target,"e-headercell"),i=w(e.target,N);(t?t.children[0].classList.contains("e-headerchkcelldiv"):i&&i.classList.contains("e-gridchkbox"))&&!this.parent.allowKeyboard&&32===e.keyCode&&e.preventDefault()},s.prototype.keyUpHandler=function(e){(("chrome"===l.AR.info.name||"safari"===l.AR.info.name)&&(91===e.keyCode||93===e.keyCode)||"opera"===l.AR.info.name&&17===e.keyCode||"mozilla"===l.AR.info.name&&224===e.keyCode)&&(this.cmdKeyPressed=!1)},s.prototype.clickHandler=function(e){var t=e.target;this.actualTarget=t,this.selectionSettings.persistSelection&&(this.deSelectedData=Oi(this.persistSelectedData)),(w(t,G)||w(t,"e-headerchkcelldiv")||this.selectionSettings.allowColumnSelection&&t.classList.contains("e-headercell"))&&(this.isInteracted=!0),this.isMultiCtrlRequest=e.ctrlKey||this.enableSelectMultiTouch||this.isMacOS&&this.cmdKeyPressed,this.parent.allowKeyboard?this.isMultiShiftRequest=e.shiftKey:(this.isMultiShiftRequest=!1,this.isMultiCtrlRequest=!1),this.popUpClickHandler(e);var i=!1;this.preventFocus=!0;var r,n=w(t,"e-checkbox-wrapper");if(this.checkSelectAllClicked=!!(n&&n.getElementsByClassName("e-checkselectall")||this.selectionSettings.persistSelection&&w(t,G)),this.selectionSettings.persistSelection&&this.isPartialSelection&&w(t,"e-headerchkcelldiv")&&!t.querySelector(".e-checkbox-disabled")&&(this.isHdrSelectAllClicked=!0),n&&n.querySelectorAll(".e-checkselect,.e-checkselectall").length>0&&(r=n.querySelector('input[type="checkbox"]'),i=!0),this.drawBorders(),this.updateAutoFillPosition(),((t=w(t,N))&&t.parentElement.classList.contains(G)&&!this.parent.selectionSettings.checkboxOnly||i)&&!this.isRowDragSelected){if(this.parent.isCheckBoxSelection&&(this.isMultiCtrlRequest=!0),this.target=t,(0,l.le)(r)){var o=this.parent,a=0;if(he(o)){var h=t.parentElement.getAttribute("data-uid");a=o.getRows().map(function(d){return d.getAttribute("data-uid")}).indexOf(h)}else a=parseInt(t.parentElement.getAttribute(O),10);this.parent.isPersistSelection&&this.parent.element.getElementsByClassName(Ie).length>0&&++a,(!this.mUPTarget||!this.mUPTarget.isEqualNode(t))&&this.rowCellSelectionHandler(a,parseInt(t.getAttribute(ce),10)),this.parent.hoverFrozenRows(e),this.parent.isCheckBoxSelection&&(this.moveIntoUncheckCollection((0,l.oq)(t,"."+G)),this.setCheckAllState())}else this.checkedTarget=r,r.classList.contains("e-checkselectall")?this.checkSelectAll(r):this.checkSelect(r);!this.parent.isCheckBoxSelection&&l.AR.isDevice&&!this.isSingleSel()&&this.showPopup(e)}else e.target.classList.contains("e-headercell")&&!e.target.classList.contains("e-stackedheadercell")&&(h=e.target.querySelector(".e-headercelldiv").getAttribute("e-mappinguid"),this.headerSelectionHandler(this.parent.getColumnIndexByUid(h)));this.isMultiCtrlRequest=!1,this.isMultiShiftRequest=!1,(0,l.le)((0,l.oq)(e.target,".e-unboundcell"))&&(this.preventFocus=!1)},s.prototype.popUpClickHandler=function(e){var t=e.target;(0,l.oq)(t,".e-headercell")||e.target.classList.contains(N)||(0,l.oq)(t,".e-gridpopup")?t.classList.contains("e-rowselect")&&(t.classList.contains("e-spanclicked")?(t.classList.remove("e-spanclicked"),this.enableSelectMultiTouch=!1,this.parent.element.querySelector(".e-gridpopup").style.display="none"):(t.classList.add("e-spanclicked"),this.enableSelectMultiTouch=!0)):this.parent.element.querySelector(".e-gridpopup").style.display="none"},s.prototype.showPopup=function(e){this.selectionSettings.enableSimpleMultiRowSelection||Ao(this.parent.element.querySelector(".e-gridpopup"),e,"e-rowselect e-icons e-icon-rowselect"+(!this.isSingleSel()&&(this.selectedRecords.length>(this.parent.getFrozenColumns()?2:1)||this.selectedRowCellIndexes.length>1)?" e-spanclicked":""))},s.prototype.rowCellSelectionHandler=function(e,t){!this.isMultiCtrlRequest&&!this.isMultiShiftRequest||this.isSingleSel()?(this.isDragged||this.selectRow(e,this.selectionSettings.enableToggle),this.selectCell({rowIndex:e,cellIndex:t},this.selectionSettings.enableToggle),this.selectedRowCellIndexes.length&&this.updateAutoFillPosition(),this.drawBorders()):this.isMultiShiftRequest?(this.parent.isCheckBoxSelection||!this.parent.isCheckBoxSelection&&!(0,l.oq)(this.target,"."+N).classList.contains(Nt)?this.selectRowsByRange((0,l.o8)(this.prevRowIndex)?e:this.prevRowIndex,e):this.addRowsToSelection([e]),this.selectCellsByRange((0,l.o8)(this.prevCIdxs)?{rowIndex:e,cellIndex:t}:this.prevCIdxs,{rowIndex:e,cellIndex:t}),this.updateAutoFillPosition(),this.drawBorders()):(this.addRowsToSelection([e]),this.addCellsToSelection([{rowIndex:e,cellIndex:t}]),this.showHideBorders("none")),this.isDragged=!1},s.prototype.onCellFocused=function(e){if(this.parent.frozenRows&&e.container.isHeader&&e.byKey)if("upArrow"===e.keyArgs.action)e.isJump=this.parent.allowFiltering?"INPUT"===e.element.tagName:"TH"===e.element.tagName;else if("downArrow"===e.keyArgs.action){var t=Number(e.element.parentElement.getAttribute(O));e.isJump=0===t}else"ctrlHome"===e.keyArgs.action&&(e.isJump=!0);var i=this.parent.isFrozenGrid()?(e.container.isHeader&&"TD"!==e.element.tagName&&e.isJump&&!this.selectionSettings.allowColumnSelection||(e.container.isContent||"TD"===e.element.tagName)&&!(e.container.isSelectable||"TD"===e.element.tagName))&&!(e.byKey&&"space"===e.keyArgs.action):(e.container.isHeader&&e.isJump||e.container.isContent&&!e.container.isSelectable)&&!(e.byKey&&"space"===e.keyArgs.action)&&!(e.element.classList.contains("e-detailrowexpand")||e.element.classList.contains("e-detailrowcollapse")),r=e.container.isHeader&&"TD"!==e.element.tagName&&!(0,l.oq)(e.element,"."+N)&&!(e.byKey&&"space"===e.keyArgs.action);if(e.byKey&&!i){var n=e.container.isContent?e.container.indexes:e.indexes,o=n[0],a=n[1],h=this.focus.getPrevIndexes();if(this.parent.frozenRows)if(e.container.isHeader&&("TD"===e.element.tagName||(0,l.oq)(e.element,"."+N))){var d=this.parent.getHeaderTable().querySelector("thead").childElementCount;o-=d,h.rowIndex=(0,l.le)(h.rowIndex)?null:h.rowIndex-d}else o+=this.parent.frozenRows,h.rowIndex=0!==h.rowIndex&&(0,l.le)(h.rowIndex)?null:h.rowIndex+this.parent.frozenRows;if(this.parent.isFrozenGrid()){var p=Number(e.element.getAttribute(ce)),c=this.parent.getSelectedRowCellIndexes();c.length&&0===h.cellIndex&&(h.cellIndex=c[c.length-1].cellIndexes[0]),h.cellIndex=(0,l.le)(h.cellIndex)?null:h.cellIndex===a?p:p-1,a=p}if(this.parent.enableInfiniteScrolling&&this.parent.infiniteScrollSettings.enableCache&&(o=parseInt(e.element.parentElement.getAttribute("data-rowindex"),10)),!(r||-1===["ctrlPlusA","escape"].indexOf(e.keyArgs.action)&&"space"!==e.keyArgs.action&&o===h.rowIndex&&a===h.cellIndex)||this.selectionSettings.allowColumnSelection){this.preventFocus=!0;var u=this.getKeyColIndex(e);if(this.needColumnSelection&&(a=u),this.parent.element.classList.contains("e-gridcell-read")&&("tab"===e.keyArgs.action||"shiftTab"===e.keyArgs.action||"rightArrow"===e.keyArgs.action||"leftArrow"===e.keyArgs.action)){var f=this.target.getAttribute("aria-label");f=this.target.innerHTML+" column header "+this.parent.getColumnByIndex(a).field,this.target.setAttribute("aria-label",f)}switch(e.keyArgs.action){case"downArrow":case"upArrow":case"enter":case"shiftEnter":this.target=e.element,this.isKeyAction=!0,this.applyDownUpKey(o,a);break;case"rightArrow":case"leftArrow":this.applyRightLeftKey(o,a);break;case"shiftDown":case"shiftUp":this.shiftDownKey(o,a);break;case"shiftLeft":case"shiftRight":this.applyShiftLeftRightKey(o,a);break;case"home":case"end":a="end"===e.keyArgs.action?this.getLastColIndex(o):0,this.applyHomeEndKey(o,a);break;case"ctrlHome":case"ctrlEnd":this.applyCtrlHomeEndKey(o,a);break;case"escape":this.clearSelection();break;case"ctrlPlusA":this.ctrlPlusA();break;case"space":this.applySpaceSelection(e.element);break;case"tab":this.parent.editSettings.allowNextRowEdit&&this.selectRow(o)}this.needColumnSelection=!1,this.preventFocus=!1,this.positionBorders(),this.updateAutoFillPosition()}}else i&&!this.parent.isCheckBoxSelection&&this.clearSelection()},s.prototype.getKeyColIndex=function(e){var t,i=null,r=e.element.querySelector(".e-stackedheadercelldiv");if(this.selectionSettings.allowColumnSelection&&w(e.element,"e-columnheader"))if(this.needColumnSelection=!!e.container.isHeader,r){if("rightArrow"===e.keyArgs.action||"leftArrow"===e.keyArgs.action)return i;t=r.getAttribute("e-mappinguid");var n=this.getstackedColumns(this.parent.getColumnByUid(t).columns),o=this.parent.getColumnIndexByUid(n[n.length-1].uid),a=this.parent.getColumnIndexByUid(n[0].uid);i=this.prevColIndex>=o?a:o}else i=this.parent.getColumnIndexByUid(e.element.querySelector(".e-headercelldiv").getAttribute("e-mappinguid"));return i},s.prototype.ctrlPlusA=function(){this.isRowType()&&!this.isSingleSel()&&this.selectRowsByRange(0,this.getCurrentBatchRecordChanges().length-1),this.isCellType()&&!this.isSingleSel()&&this.selectCellsByRange({rowIndex:0,cellIndex:0},{rowIndex:this.parent.getRows().length-1,cellIndex:this.parent.getColumns().length-1})},s.prototype.applySpaceSelection=function(e){e.classList.contains("e-checkselectall")?(this.checkedTarget=e,this.checkSelectAll(this.checkedTarget)):e.classList.contains("e-checkselect")&&(this.checkedTarget=e,this.checkSelect(this.checkedTarget))},s.prototype.applyDownUpKey=function(e,t){var i=this.parent;this.parent.isCheckBoxSelection&&"Check"===this.parent.checkAllRows&&!this.selectionSettings.persistSelection&&!this.selectionSettings.checkboxOnly&&(this.checkSelectAllAction(!1),this.checkedTarget=null),this.isRowType()&&!this.selectionSettings.checkboxOnly&&(this.selectRow(e,!0),this.applyUpDown(i.selectedRowIndex)),this.isCellType()&&this.selectCell({rowIndex:e,cellIndex:t},!0),this.selectionSettings.allowColumnSelection&&this.needColumnSelection&&this.selectColumn(t)},s.prototype.applyUpDown=function(e){if(!(e<0)){this.target||(this.target=this.parent.getRows()[0].children[this.parent.groupSettings.columns.length||0]);var t=parseInt(this.target.getAttribute(ce),10),i=this.parent.getFrozenColumns();if(i)this.target=t>=i?this.contentRenderer.getMovableRowByIndex(e).getElementsByClassName(N)[t-i]:this.contentRenderer.getRowByIndex(e).getElementsByClassName(N)[t];else{var r=this.contentRenderer.getRowByIndex(e);r&&(this.target=r.getElementsByClassName(N)[t])}this.addAttribute(this.target),this.parent.element.classList.contains("e-gridcell-read")&&(this.target.getAttribute("aria-label"),this.target.setAttribute("aria-label",this.target.innerHTML))}},s.prototype.applyRightLeftKey=function(e,t){this.selectionSettings.allowColumnSelection&&this.needColumnSelection?this.selectColumn(t):this.isCellType()&&(this.selectCell({rowIndex:e,cellIndex:t},!0),this.addAttribute(this.target))},s.prototype.applyHomeEndKey=function(e,t){this.isCellType()?this.selectCell({rowIndex:e,cellIndex:t},!0):this.addAttribute(this.parent.getCellFromIndex(e,t))},s.prototype.shiftDownKey=function(e,t){this.isMultiShiftRequest=!0,this.isRowType()&&!this.isSingleSel()&&((0,l.o8)(this.prevRowIndex)?this.selectRow(this.isPartialSelection?e:0,!0):(this.selectRowsByRange(this.prevRowIndex,e),this.applyUpDown(e))),this.isCellType()&&!this.isSingleSel()&&this.selectCellsByRange(this.prevCIdxs||{rowIndex:0,cellIndex:0},{rowIndex:e,cellIndex:t}),this.isMultiShiftRequest=!1},s.prototype.applyShiftLeftRightKey=function(e,t){this.isMultiShiftRequest=!0,this.selectionSettings.allowColumnSelection&&this.needColumnSelection?this.selectColumnsByRange(this.prevColIndex,t):this.selectCellsByRange(this.prevCIdxs,{rowIndex:e,cellIndex:t}),this.isMultiShiftRequest=!1},s.prototype.getstackedColumns=function(e){for(var t=[],i=0,r=e.length;i<r;i++)e[i].columns?this.getstackedColumns(e[i].columns):t.push(e[i]);return t},s.prototype.applyCtrlHomeEndKey=function(e,t){this.isRowType()&&(this.selectRow(e,!0),this.addAttribute(this.parent.getCellFromIndex(e,t))),this.isCellType()&&this.selectCell({rowIndex:e,cellIndex:t},!0)},s.prototype.addRemoveClassesForRow=function(e,t,i){for(var r=[],n=3;n<arguments.length;n++)r[n-3]=arguments[n];if(e){var o=[].slice.call(e.getElementsByClassName(N)),a=e.querySelector(".e-detailrowcollapse")||e.querySelector(".e-detailrowexpand"),h=e.querySelector(".e-rowdragdrop");a&&o.push(a),h&&o.push(h),Ke.apply(void 0,[o,t].concat(r))}this.getRenderer().setSelection(e?e.getAttribute("data-uid"):null,t,i)},s.prototype.isRowType=function(){return"Row"===this.selectionSettings.mode||"Both"===this.selectionSettings.mode},s.prototype.isCellType=function(){return"Cell"===this.selectionSettings.mode||"Both"===this.selectionSettings.mode},s.prototype.isSingleSel=function(){return"Single"===this.selectionSettings.type},s.prototype.getRenderer=function(){return(0,l.le)(this.contentRenderer)&&(this.contentRenderer=this.factory.getRenderer(de.Content)),this.contentRenderer},s.prototype.getSelectedRecords=function(){return!this.selectionSettings.persistSelection&&this.selectedRecords.length?this.parent.getRowsObject().filter(function(t){return t.isSelected}).map(function(t){return t.data}):this.persistSelectedData},s.prototype.selectColumn=function(e){var t=this.parent;if(!(0,l.le)(t.getColumns()[e])){var i=t.getColumnByIndex(e),r=t.getColumnHeaderByUid(i.uid),n=r.classList.contains("e-columnselection");if(t.selectionSettings.allowColumnSelection){var o=this.selectedColumnsIndexes.length>1&&this.selectedColumnsIndexes.indexOf(e)>-1;if(this.clearColDependency(),!n||!this.selectionSettings.enableToggle||o){var a={columnIndex:e,headerCell:r,column:i,cancel:!1,target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest};if(this.onActionBegin(a,Zr),a.cancel)return void this.disableInteracted();(!t.selectionSettings.enableToggle||e!==this.prevColIndex||!n||o)&&this.updateColSelection(r,e),this.onActionComplete({columnIndex:e,headerCell:r,column:i,target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex},Qr)}this.updateColProps(e)}}},s.prototype.selectColumnsByRange=function(e,t){var i=this.parent;if(!(0,l.le)(i.getColumns()[e])){var r=[];if("Single"===i.selectionSettings.type||(0,l.le)(t))r[0]=e;else for(var n=e<t,o=e;n?o<=t:o>=t;n?o++:o--)r.push(o);this.selectColumns(r)}},s.prototype.selectColumns=function(e){var t=this.parent,i=this.getselectedCols();if("Single"===t.selectionSettings.type&&(e=[e[0]]),t.selectionSettings.allowColumnSelection){this.clearColDependency();var r={columnIndex:e[0],headerCell:i,columnIndexes:e,column:t.getColumnByIndex(e[0]),cancel:!1,target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest};if(this.onActionBegin(r,Zr),r.cancel)return void this.disableInteracted();for(var n=0,o=e.length;n<o;n++)this.updateColSelection(t.getColumnHeaderByUid(t.getColumnByIndex(e[n]).uid),e[n]);i=this.getselectedCols();var a={columnIndex:e[0],headerCell:i,columnIndexes:e,column:t.getColumnByIndex(e[0]),target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex};this.onActionComplete(a,Qr),this.updateColProps(e[0])}},s.prototype.selectColumnWithExisting=function(e){var t=this.parent;if(!(0,l.le)(t.getColumns()[e])){var i=t.getColumnHeaderByUid(t.getColumnByIndex(e).uid),r=this.getselectedCols();if("Single"===t.selectionSettings.type&&this.clearColDependency(),t.selectionSettings.allowColumnSelection){if(this.selectedColumnsIndexes.indexOf(e)>-1)this.clearColumnSelection(e);else{var n={columnIndex:e,headerCell:r,columnIndexes:this.selectedColumnsIndexes,column:t.getColumnByIndex(e),cancel:!1,target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest};if(this.onActionBegin(n,Zr),n.cancel)return void this.disableInteracted();this.updateColSelection(i,e);var o={columnIndex:e,headerCell:r=this.getselectedCols(),column:t.getColumnByIndex(e),columnIndexes:this.selectedColumnsIndexes,target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex};this.onActionComplete(o,Qr)}this.updateColProps(e)}}},s.prototype.clearColumnSelection=function(e){if(this.isColumnSelected){var t=this.parent;if(!(0,l.le)(e)&&-1===this.selectedColumnsIndexes.indexOf(e))return;var n,i=(0,l.le)(e)?this.selectedColumnsIndexes[this.selectedColumnsIndexes.length-1]:e,r=t.getColumnByIndex(i),o=t.getColumnByIndex(i),a={columnIndex:i,headerCell:n=r.getFreezeTableName()===Q?t.getFrozenRightColumnHeaderByIndex(i):"movable"===r.getFreezeTableName()?t.getMovableColumnHeaderByIndex(i):t.getColumnHeaderByUid(o.uid),columnIndexes:this.selectedColumnsIndexes,column:o,cancel:!1,target:this.actualTarget,isInteracted:this.isInteracted};if(this.columnDeselect(a,"columnDeselecting"))return void this.disableInteracted();for(var d=(0,l.le)(e)?[].slice.call(t.getHeaderContent().getElementsByClassName("e-columnselection")):[n],p=this.getSelectedColumnCells(e),c=0,u=d.length;c<u;c++)Ke([d[c]],!1,"e-columnselection");for(c=0,u=p.length;c<u;c++)Ke([p[c]],!1,"e-columnselection");(0,l.le)(e)?(this.columnDeselect(a,"columnDeselected"),this.selectedColumnsIndexes=[],this.isColumnSelected=!1,this.parent.getColumns().filter(function(f){return f.isSelected=!1})):(this.selectedColumnsIndexes.splice(this.selectedColumnsIndexes.indexOf(e),1),this.parent.getColumns()[e].isSelected=!1)}},s.prototype.getselectedCols=function(){var t,e=this.parent;if(this.selectedColumnsIndexes.length>1){t=[];for(var i=0;i<this.selectedColumnsIndexes.length;i++)t.push(e.getColumnHeaderByUid(e.getColumnByIndex(this.selectedColumnsIndexes[i]).uid))}else t=e.getColumnHeaderByUid(e.getColumnByIndex(this.selectedColumnsIndexes[0]).uid);return t},s.prototype.getSelectedColumnCells=function(e){var n,o,t=this.parent,i=!(0,l.le)(this.parent.rowTemplate),r=i?t.getRows():t.getDataRows();t.isFrozenGrid()&&t.getContent().querySelector("."+_)&&(n=i?t.getMovableRows():t.getMovableDataRows(),r=t.addMovableRows(r,n),t.getFrozenMode()===B&&(o=i?t.getFrozenRightRows():t.getFrozenRightDataRows(),r=t.addMovableRows(r,o)));for(var a=[],h=(0,l.le)(e)?".e-columnselection":'[data-colindex="'+e+'"]',d=0,p=r.length;d<p;d++)a=a.concat([].slice.call(r[d].querySelectorAll(h)));return a},s.prototype.columnDeselect=function(e,t){return"columnDeselected"===t&&delete e.cancel,this.onActionComplete(e,t),e.cancel},s.prototype.updateColProps=function(e){this.prevColIndex=e,this.isColumnSelected=this.selectedColumnsIndexes.length&&!0},s.prototype.clearColDependency=function(){this.clearColumnSelection(),this.selectedColumnsIndexes=[]},s.prototype.updateColSelection=function(e,t){if(!(0,l.le)(this.parent.getColumns()[t])){var a,i=this.parent.getFrozenLeftCount(),r=this.parent.getMovableColumnsCount(),n=this.parent.getColumnByIndex(t),o=!(0,l.le)(this.parent.rowTemplate);this.selectedColumnsIndexes.push(t),this.parent.getColumns()[t].isSelected=!0,n.getFreezeTableName()===Q?(t-=i+r,a=o?this.parent.getFrozenRightRows():this.parent.getFrozenRightDataRows()):"movable"===n.getFreezeTableName()?(t-=i,a=o?this.parent.getMovableRows():this.parent.getMovableDataRows()):(t+=this.parent.getIndentCount(),a=o?this.parent.getRows():this.parent.getDataRows()),Ke([e],!0,"e-columnselection");for(var h=0,d=a.length;h<d;h++)a[h].classList.contains(G)&&(!a[h].classList.contains(Re)&&!a[h].classList.contains(Ie)||"Normal"!==this.parent.editSettings.mode||(0,l.le)(a[h].querySelector("tr").childNodes[t])?(0,l.le)(a[h].childNodes[t])||Ke([a[h].childNodes[t]],!0,"e-columnselection"):Ke([a[h].querySelector("tr").childNodes[t]],!0,"e-columnselection"))}},s.prototype.headerSelectionHandler=function(e){!this.isMultiCtrlRequest&&!this.isMultiShiftRequest||this.isSingleSel()?this.selectColumn(e):this.isMultiShiftRequest?this.selectColumnsByRange((0,l.o8)(this.prevColIndex)?e:this.prevColIndex,e):this.selectColumnWithExisting(e)},s.prototype.addEventListener_checkbox=function(){var e=this;this.parent.on(Ge,this.dataReady,this),this.onDataBoundFunction=this.onDataBound.bind(this),this.parent.addEventListener(Te,this.onDataBoundFunction),this.parent.on(Pn,this.onDataBoundFunction),this.parent.on(ee,this.checkBoxSelectionChanged,this),this.parent.on(zn,this.initPerisistSelection,this),this.parent.on(Ye,this.setCheckAllForEmptyGrid,this),this.actionCompleteFunc=this.actionCompleteHandler.bind(this),this.parent.addEventListener(H,this.actionCompleteFunc),this.parent.on(xe,this.clickHandler,this),this.resizeEndFn=function(){e.updateAutoFillPosition(),e.drawBorders()},this.resizeEndFn.bind(this),this.parent.addEventListener(xs,this.resizeEndFn)},s.prototype.removeEventListener_checkbox=function(){this.parent.off(Ge,this.dataReady),this.parent.removeEventListener(Te,this.onDataBoundFunction),this.parent.removeEventListener(H,this.actionCompleteFunc),this.parent.off(Pn,this.onDataBoundFunction),this.parent.off(Ye,this.setCheckAllForEmptyGrid),this.parent.off(xe,this.clickHandler),this.parent.off(zn,this.initPerisistSelection)},s.prototype.setCheckAllForEmptyGrid=function(){var e=this.getCheckAllBox();e&&(this.parent.isCheckBoxSelection=!0,(0,l.IV)([e.nextElementSibling],["e-check","e-stop","e-uncheck"]))},s.prototype.dataReady=function(e){this.isHeaderCheckboxClicked=!1,"virtualscroll"!==e.requestType&&!this.parent.isPersistSelection&&(!this.parent.enableInfiniteScrolling||"infiniteScroll"!==e.requestType)&&(this.disableUI=!this.parent.enableImmutableMode,this.clearSelection(),this.setCheckAllState(),this.disableUI=!1)},s.prototype.actionCompleteHandler=function(e){"save"===e.requestType&&this.parent.isPersistSelection&&this.refreshPersistSelection()},s.prototype.selectRowIndex=function(e){this.parent.isSelectedRowIndexUpdating=!0,this.parent.selectedRowIndex=(0,l.le)(this.parent.selectedRowIndex)||-1===this.parent.selectedRowIndex?e:-1},s.prototype.disableInteracted=function(){this.isInteracted=!1},s.prototype.activeTarget=function(){this.actualTarget=this.isInteracted?this.actualTarget:null},s}(),Mh=function(){function s(e){this.parent=e,this.addEventListener()}return s.prototype.search=function(e){var t=this.parent;e=(0,l.le)(e)?"":e,lt(t)?t.notify(Le,{instance:this,handler:this.search,arg1:e}):e!==t.searchSettings.key?(t.searchSettings.key=e.toString(),t.dataBind()):this.refreshSearch&&t.refresh()},s.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(Se,this.onPropertyChanged,this),this.parent.on(Es,this.onSearchComplete,this),this.parent.on(V,this.destroy,this),this.actionCompleteFunc=this.onActionComplete.bind(this),this.parent.addEventListener(H,this.actionCompleteFunc),this.parent.on(ar,this.cancelBeginEvent,this))},s.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(Se,this.onPropertyChanged),this.parent.off(Es,this.onSearchComplete),this.parent.off(V,this.destroy),this.parent.removeEventListener(H,this.actionCompleteFunc),this.parent.off(ar,this.cancelBeginEvent))},s.prototype.destroy=function(){this.removeEventListener()},s.prototype.onPropertyChanged=function(e){e.module===this.getModuleName()&&((0,l.le)(e.properties.key)?this.parent.notify(ve,{requestType:"searching",type:Y}):this.parent.notify(ve,{requestType:"searching",type:Y,searchString:this.parent.searchSettings.key}))},s.prototype.onSearchComplete=function(e){this.parent.trigger(H,(0,l.l7)(e,{searchString:this.parent.searchSettings.key,requestType:"searching",type:H}))},s.prototype.onActionComplete=function(e){this.refreshSearch="searching"!==e.requestType},s.prototype.cancelBeginEvent=function(e){"searching"===e.requestType&&this.parent.setProperties({searchSettings:{key:""}},!0)},s.prototype.getModuleName=function(){return"search"},s}(),Ih=function(){function s(e){this.parent=e}return s.prototype.show=function(e,t){var i=this.getToggleFields(e),r=this.getColumns(i,t);this.parent.notify(Ot,{module:"edit"});for(var n=0;n<r.length;n++)r[n].visible=!0;this.setVisible(r)},s.prototype.hide=function(e,t){var i=this.getToggleFields(e),r=this.getColumns(i,t);this.parent.notify(Ot,{module:"edit"});for(var n=0;n<r.length;n++)r[n].visible=!1;this.setVisible(r)},s.prototype.getToggleFields=function(e){return"string"==typeof e?[e]:e},s.prototype.getColumns=function(e,t){var i=this;return _t(e,function(n){return _t(i.parent.columnModel,function(o){if(o[t]===n)return o})[0]})},s.prototype.setVisible=function(e,t){var i=this;void 0===t&&(t=[]);var r={requestType:"columnstate",cancel:!1,columns:t=t.length>0?t:e};this.parent.enableInfiniteScrolling&&this.parent.allowGrouping&&this.parent.groupModule.groupSettings.columns.length>0&&(this.parent.contentModule.visibleRows=[]),this.parent.trigger(Y,r,function(o){var a=i.parent.getColumns();if(e=(0,l.le)(e)?a:e,o.cancel)return i.parent.notify("reset-columns",{showHideArgs:o}),void(e.length>0&&(e[0].visible=!0));he(i.parent)&&i.parent.contentModule.emptyVcRows(),i.parent.allowSelection&&i.parent.getSelectedRecords().length&&!i.parent.selectionSettings.persistSelection&&i.parent.clearSelection(),i.parent.enableColumnVirtualization?e.filter(function(p){return a.some(function(c){return p.field===c.field})}).length&&i.parent.notify(je,e):i.parent.notify(je,e),i.parent.trigger(H,{requestType:"columnstate",columns:t}),"All"!==i.parent.columnQueryMode&&i.parent.refresh()})},s}(),zo=function(){function s(e){this.previousValues={top:0,left:0},this.oneTimeReady=!0,this.parent=e,this.widthService=new Un(e),this.addEventListener()}return s.prototype.getModuleName=function(){return"scroll"},s.prototype.setWidth=function(e){this.parent.element.style.width=(0,l.Ac)(this.parent.width),e&&this.widthService.setWidthToColumns(),this.parent.toolbarModule&&this.parent.toolbarModule.toolbar&&this.parent.toolbarModule.toolbar.element&&this.parent.toolbarModule.toolbar.refreshOverflow()},s.prototype.setHeight=function(){var e=0,t=this.parent.getContent().querySelector("."+ie),i=this.parent.height;if(this.parent.isFrozenGrid()&&"auto"!==this.parent.height&&this.parent.height.toString().indexOf("%")<0&&(i=parseInt(i,10)-s.getScrollBarWidth()),!this.parent.enableVirtualization&&this.parent.frozenRows&&"auto"!==this.parent.height){var r=this.parent.getHeaderContent().querySelector(I+":not(.e-masked-tbody)");e=r?r.offsetHeight:0,r&&e?e-=r.getElementsByClassName(Ie).length*this.parent.getRowHeight():!this.parent.isInitialLoad&&"Shimmer"===this.parent.loadingIndicator.indicatorType&&this.parent.getHeaderContent().querySelector(".e-masked-table")&&(i=parseInt(i,10)-this.parent.frozenRows*this.parent.getRowHeight()),t.style.height=(0,l.Ac)(i-e)}else t.style.height=(0,l.Ac)(i);this.ensureOverflow(t),this.parent.isFrozenGrid()&&this.refresh()},s.prototype.setPadding=function(){var e=this.parent.getHeaderContent(),t=s.getScrollBarWidth()-this.getThreshold(),i=this.getCssProperties(),r="Right"===this.parent.getFrozenMode()||this.parent.getFrozenMode()===B?"0.5px":"1px";e.querySelector("."+le).style[i.border]=t>0?r:"0px",e.style[i.padding]=t>0?t+"px":"0px"},s.prototype.removePadding=function(e){var t=this.getCssProperties(e),i=this.parent.getHeaderContent().querySelector("."+le);i.style[t.border]="",i.parentElement.style[t.padding]="";var r=this.parent.getFooterContent();r&&r.classList.contains("e-footerpadding")&&r.classList.remove("e-footerpadding")},s.prototype.refresh=function(){if("100%"===this.parent.height){var e=this.parent.getContent();this.parent.element.style.height="100%";var t=this.widthService.getSiblingsHeight(e);e.style.height="calc(100% - "+t+"px)",this.parent.isFrozenGrid()&&(e.firstElementChild.style.height="calc(100% - "+zt()+"px)")}},s.prototype.getThreshold=function(){return"mozilla"===l.AR.info.name?.5:1},s.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(Ye,this.wireEvents,this),this.parent.on(ee,this.wireEvents,this),this.parent.on(X,this.onPropertyChanged,this),this.parent.on(hn,this.wireEvents,this),this.parent.on(ue,this.setScrollLeft,this))},s.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(Ye,this.wireEvents),this.parent.off(ee,this.wireEvents),this.parent.off(X,this.onPropertyChanged),this.parent.off(hn,this.wireEvents),this.parent.off(ue,this.setScrollLeft))},s.prototype.setScrollLeft=function(){this.parent.isFrozenGrid()?this.parent.headerModule.getMovableHeader().scrollLeft=this.previousValues.left:this.parent.getHeaderContent().querySelector("."+le).scrollLeft=this.previousValues.left},s.prototype.onFrozenContentScroll=function(){var e=this;return function(t){null===e.content.querySelector(I)||e.parent.isPreventScrollEvent||(!(0,l.le)(e.parent.infiniteScrollModule)&&e.parent.enableInfiniteScrolling&&e.parent.notify(ur,t),e.previousValues.top=t.target.scrollTop)}},s.prototype.onContentScroll=function(e){var t=this,i=e,r=i.classList.contains(le);return function(n){if(null!==t.content.querySelector(I)&&!t.parent.isPreventScrollEvent){var o=n.target,a=o.scrollLeft;if(!(0,l.le)(t.parent.infiniteScrollModule)&&t.parent.enableInfiniteScrolling&&t.parent.notify(ur,{target:n.target,isLeft:t.previousValues.left!==a}),t.parent.groupSettings.columns.length&&t.parent.groupSettings.enableLazyLoading){var h=t.previousValues.top<t.parent.getContent().firstElementChild.scrollTop;t.parent.notify("lazy-load-scroll-handler",{scrollDown:h})}t.parent.notify(to,{});var d=o.classList.contains("e-summarycontent");if(t.previousValues.left===a)return void(t.previousValues.top=r?o.scrollTop:t.previousValues.top);t.parent.notify("close-filter-dialog",n),i.scrollLeft=a,d&&(t.header.scrollLeft=a),t.previousValues.left=a,t.parent.notify("scroll",{left:a})}}},s.prototype.onCustomScrollbarScroll=function(e,t){var i=this,r=e,n=t;return function(o){if(null!==i.content.querySelector(I)){var h=o.target.scrollLeft;i.previousValues.left!==h&&(r.scrollLeft=h,n.scrollLeft=h,i.previousValues.left=h,i.parent.notify("scroll",{left:h}))}}},s.prototype.onTouchScroll=function(e){var t=this,i=e;return function(r){if("mouse"!==r.pointerType){var n=t.parent.isFrozenGrid(),o=t.getPointXY(r),a=i.scrollLeft+(t.pageXY.x-o.x),h=n?t.parent.getHeaderContent().querySelector("."+W):t.parent.getHeaderContent().querySelector("."+le),d=n?t.parent.getContent().querySelector("."+_):t.parent.getContent().querySelector("."+ie);t.previousValues.left===a||a<0||h.scrollWidth-h.clientWidth<a||(r.preventDefault(),h.scrollLeft=a,d.scrollLeft=a,n&&(t.parent.getContent().querySelector(".e-movablescrollbar").scrollLeft=a),t.pageXY.x=o.x,t.previousValues.left=a)}}},s.prototype.setPageXY=function(){var e=this;return function(t){"mouse"!==t.pointerType&&(e.pageXY=e.getPointXY(t))}},s.prototype.getPointXY=function(e){var t={x:0,y:0};return e.touches&&e.touches.length?(t.x=e.touches[0].pageX,t.y=e.touches[0].pageY):(t.x=e.pageX,t.y=e.pageY),t},s.prototype.getScrollbleParent=function(e){if(null===e)return null;var t=(0,l.le)(e.tagName)?e.scrollingElement:e,i=document.defaultView.getComputedStyle(t,null).overflowY;return t.scrollHeight>t.clientHeight&&"hidden"!==i&&"visible"!==i||"HTML"===e.tagName||"BODY"===e.tagName?e:this.getScrollbleParent(e.parentNode)},s.prototype.addStickyListener=function(e){this.parentElement=this.getScrollbleParent(this.parent.element.parentElement),e&&this.parentElement?(this.eventElement="HTML"===this.parentElement.tagName||"BODY"===this.parentElement.tagName?document:this.parentElement,l.bi.add(this.eventElement,"scroll",this.makeStickyHeader,this)):this.eventElement&&(l.bi.remove(this.eventElement,"scroll",this.makeStickyHeader),this.eventElement=null)},s.prototype.wireEvents=function(){var e=this;if(this.oneTimeReady){var t=this.parent.isFrozenGrid();this.content=this.parent.getContent().querySelector("."+ie),this.header=this.parent.getHeaderContent().querySelector("."+le);var i=this.content.querySelector("."+_),r=this.header.querySelector("."+W),n=this.parent.getContent().querySelector(".e-movablescrollbar");this.parent.frozenRows&&(l.bi.add(t?r:this.header,"touchstart pointerdown",this.setPageXY(),this),l.bi.add(t?r:this.header,"touchmove pointermove",this.onTouchScroll(t?i:this.content),this)),this.parent.isFrozenGrid()?(l.bi.add(n,"scroll",this.onCustomScrollbarScroll(i,r),this),l.bi.add(i,"scroll",this.onCustomScrollbarScroll(n,r),this),l.bi.add(r,"scroll",this.onCustomScrollbarScroll(n,i),this),l.bi.add(this.content,"scroll",this.onFrozenContentScroll(),this),l.bi.add(r,"touchstart pointerdown",this.setPageXY(),this),l.bi.add(r,"touchmove pointermove",this.onTouchScroll(i),this),l.bi.add(i,"touchstart pointerdown",this.setPageXY(),this),/macintosh|ipad/.test(l.AR.userAgent.toLowerCase())&&l.AR.isDevice||l.bi.add(i,"touchmove pointermove",this.onTouchScroll(r),this)):(l.bi.add(this.content,"scroll",this.onContentScroll(this.header),this),l.bi.add(this.header,"scroll",this.onContentScroll(this.content),this)),this.parent.aggregates.length&&l.bi.add(this.parent.getFooterContent().firstChild,"scroll",this.onContentScroll(this.content),this),this.parent.enableStickyHeader&&this.addStickyListener(!0),this.refresh(),this.oneTimeReady=!1}var a,h,d,o=this.parent.getContentTable();Eo(function(){a=e.header.scrollLeft,h=o.scrollHeight,d=e.parent.getContent().clientHeight},function(){var p={cancel:!1};e.parent.notify("check-scroll-reset",p),!e.parent.enableVirtualization&&!e.parent.enableInfiniteScrolling&&(h<d&&((0,l.cn)(o.querySelectorAll("tr:last-child td"),"e-lastrowcell"),e.parent.isFrozenGrid()&&((0,l.cn)(e.parent.getContent().querySelector("."+_).querySelectorAll("tr:last-child td"),"e-lastrowcell"),e.parent.getFrozenRightColumnsCount()&&(0,l.cn)(e.parent.getContent().querySelector(".e-frozen-right-content").querySelectorAll("tr:last-child td"),"e-lastrowcell"))),p.cancel||((e.parent.frozenRows>0||e.parent.isFrozenGrid())&&e.header.querySelector("."+W)?e.header.querySelector("."+W).scrollLeft=e.previousValues.left:e.header.scrollLeft=e.previousValues.left,e.content.scrollLeft=e.previousValues.left,e.content.scrollTop=e.previousValues.top)),e.parent.enableColumnVirtualization||(e.content.scrollLeft=a),e.parent.isFrozenGrid()&&e.header.querySelector("."+W)&&(e.header.querySelector("."+W).scrollLeft=e.content.querySelector("."+_).scrollLeft)}),this.parent.isPreventScrollEvent=!1},s.prototype.getCssProperties=function(e){var t={},i=(0,l.le)(e)?this.parent.enableRtl:e;return t.border=i?"borderLeftWidth":"borderRightWidth",t.padding=i?"paddingLeft":"paddingRight",t},s.prototype.ensureOverflow=function(e){e.style.overflowY="auto"===this.parent.height?"auto":"scroll"},s.prototype.onPropertyChanged=function(e){e.module===this.getModuleName()&&(this.setPadding(),this.oneTimeReady=!0,"auto"===this.parent.height&&this.removePadding(),this.wireEvents(),this.setHeight(),this.setWidth(!(0,l.le)(e.properties.width)))},s.prototype.makeStickyHeader=function(){if(this.parent.enableStickyHeader&&this.parent.element&&this.parent.getContent()){var e=this.parent.getContent().getClientRects()[0];if(e){var t=this.parent.getHeaderContent(),i=this.parent.element.querySelector(".e-toolbar"),r=this.parent.element.querySelector(".e-groupdroparea"),n=t.offsetHeight+(i?i.offsetHeight:0)+(r?r.offsetHeight:0),o=this.parentElement.getClientRects()[0].top,h=e.left;if(e.top-(o<0?0:o)<n&&e.bottom>0){t.classList.add("e-sticky");var d=0;r&&this.parent.groupSettings.showDropArea&&(this.setSticky(r,d,e.width,h,!0),d+=r.getClientRects()[0].height),i&&(this.setSticky(i,d,e.width,h,!0),d+=i.getClientRects()[0].height),this.setSticky(t,d,e.width,h,!0)}else if(t.classList.contains("e-sticky")){this.setSticky(t,null,null,null,!1),i&&this.setSticky(i,null,null,null,!1),r&&this.setSticky(r,null,null,null,!1);var p=this.parent.element.querySelector(".e-ccdlg");p&&p.classList.remove("e-sticky")}this.parent.notify("sticky-scroll-complete",{})}}},s.prototype.setSticky=function(e,t,i,r,n){n?(e.style.width=i+"px",e.classList.add("e-sticky")):e.classList.remove("e-sticky"),e.style.top=null!=t?t+"px":"",e.style.left=null!==r?parseInt(e.style.left,10)!==r?r+"px":e.style.left:""},s.prototype.destroy=function(){var e=this.parent.element;if(e&&(e.querySelector("."+pe)||e.querySelector("."+ae))){this.removeEventListener();var t=this.parent.getContent().querySelector("."+ie);l.bi.remove(t,"scroll",this.onContentScroll),this.parent.enableStickyHeader&&this.addStickyListener(!1),this.removePadding(),(0,l.IV)([this.parent.getHeaderContent().querySelector("."+le)],le),(0,l.IV)([t],ie),t.style.height="",this.parent.element.style.width=""}},s.getScrollBarWidth=function(){return zt()},s}(),Mo=function(){var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])})(e,t)};return function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),vt=function(s,e,t,i){var o,r=arguments.length,n=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(n=(r<3?o(n):r>3?o(e,t,n):o(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},Th=function(s){function e(){var t=null!==s&&s.apply(this,arguments)||this;return t.templateFn={},t}return Mo(e,s),e.prototype.setFormatter=function(t){this.formatFn=t},e.prototype.getFormatter=function(){return this.formatFn},e.prototype.setTemplate=function(t){void 0===t&&(t={}),void 0!==this.footerTemplate&&(this.templateFn[(0,l.I$)(A,A.Summary)]={fn:(0,l.MY)(this.footerTemplate,t),property:"footerTemplate"}),void 0!==this.groupFooterTemplate&&(this.templateFn[(0,l.I$)(A,A.GroupSummary)]={fn:(0,l.MY)(this.groupFooterTemplate,t),property:"groupFooterTemplate"}),void 0!==this.groupCaptionTemplate&&(this.templateFn[(0,l.I$)(A,A.CaptionSummary)]={fn:(0,l.MY)(this.groupCaptionTemplate,t),property:"groupCaptionTemplate"})},e.prototype.getTemplate=function(t){return this.templateFn[(0,l.I$)(A,t)]},e.prototype.setPropertiesSilent=function(t){this.setProperties(t,!0)},vt([(0,l.Z9)()],e.prototype,"type",void 0),vt([(0,l.Z9)()],e.prototype,"field",void 0),vt([(0,l.Z9)()],e.prototype,"columnName",void 0),vt([(0,l.Z9)()],e.prototype,"format",void 0),vt([(0,l.Z9)()],e.prototype,"footerTemplate",void 0),vt([(0,l.Z9)()],e.prototype,"groupFooterTemplate",void 0),vt([(0,l.Z9)()],e.prototype,"groupCaptionTemplate",void 0),vt([(0,l.Z9)()],e.prototype,"customAggregate",void 0),e}(l.rt),Eh=function(s){function e(){return null!==s&&s.apply(this,arguments)||this}return Mo(e,s),vt([(0,l.FE)([],Th)],e.prototype,"columns",void 0),e}(l.rt),Dh=function(){function s(e,t){this.copyContent="",this.isSelect=!1,this.parent=e,this.serviceLocator=t,this.addEventListener()}return s.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(ee,this.initialEnd,this),this.parent.on(oe,this.keyDownHandler,this),this.parent.on(xe,this.clickHandler,this),l.bi.add(this.parent.element,"keydown",this.pasteHandler,this))},s.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(oe,this.keyDownHandler),this.parent.off(ee,this.initialEnd),this.parent.off(xe,this.clickHandler),l.bi.remove(this.parent.element,"keydown",this.pasteHandler))},s.prototype.clickHandler=function(e){var t=e.target;t=w(t,"e-rowcell")},s.prototype.pasteHandler=function(e){var t=this,i=this.parent,r=/(Mac)/i.test(navigator.platform);if(67===e.keyCode&&r&&e.metaKey&&!i.isEdit&&this.copy(),86===e.keyCode&&(e.ctrlKey||r&&e.metaKey)&&!i.isEdit){if(!(0,l.oq)(document.activeElement,"."+N)||!i.editSettings.allowEditing||"Batch"!==i.editSettings.mode||"Cell"!==i.selectionSettings.mode||"Flow"===i.selectionSettings.cellSelectionMode)return;this.activeElement=document.activeElement,this.clipBoardTextArea.value="";var o=window.scrollX,a=window.scrollY;this.clipBoardTextArea.focus(),setTimeout(function(){t.activeElement.focus(),window.scrollTo(o,a),t.paste(t.clipBoardTextArea.value,t.parent.getSelectedRowCellIndexes()[0].rowIndex,t.parent.getSelectedRowCellIndexes()[0].cellIndexes[0])},10)}},s.prototype.paste=function(e,t,i){var a,h,d,r=this.parent,n=i,o=t;if(r.editSettings.allowEditing&&"Batch"===r.editSettings.mode&&"Cell"===r.selectionSettings.mode&&"Flow"!==r.selectionSettings.cellSelectionMode){var c,f,g,p=e.split("\n"),u=r.getDataRows(),v=this.parent.isFrozenGrid();v&&(f=r.getMovableDataRows(),r.getFrozenRightColumnsCount()&&(g=r.getFrozenRightDataRows()));for(var m=0;m<p.length;m++){if(c=p[m].split("\t"),n=i,m===p.length-1&&""===p[m]||(0,l.o8)(r.getRowByIndex(o))){n++;break}for(var C=0;C<c.length;C++){if(d=r.getCellFromIndex(o,n),v){var y=f[o];d=!!u[o].querySelector('[data-colindex="'+n+'"]')||y.querySelector('[data-colindex="'+n+'"]'),g&&!d&&(d=g[o].querySelector('[data-colindex="'+n+'"]'))}if(!d){n++;break}if(h=(a=r.getColumnByIndex(n)).getParser()?a.getParser()(c[C]):c[C],a.allowEditing&&!a.isPrimaryKey&&!a.template){var R={column:a,data:h,rowIndex:o};this.parent.trigger("beforePaste",R),o=R.rowIndex,R.cancel||r.editModule&&("number"===a.type?this.parent.editModule.updateCell(o,a.field,parseFloat(R.data)):r.editModule.updateCell(o,a.field,R.data))}n++}o++}r.selectionModule.selectCellsByRange({rowIndex:t,cellIndex:i},{rowIndex:o-1,cellIndex:n-1});var F=this.parent.getCellFromIndex(o-1,n-1);F&&(0,l.s1)(F,["e-focus","e-focused"],[])}},s.prototype.initialEnd=function(){this.l10n=this.serviceLocator.getService("localization"),this.parent.off(ee,this.initialEnd),this.clipBoardTextArea=this.parent.createElement("textarea",{className:"e-clipboard",styles:"opacity: 0",attrs:{tabindex:"-1","aria-label":this.l10n.getConstant("ClipBoard")}}),this.parent.element.appendChild(this.clipBoardTextArea)},s.prototype.keyDownHandler=function(e){"ctrlPlusC"===e.action?this.copy():"ctrlShiftPlusH"===e.action&&this.copy(!0)},s.prototype.setCopyData=function(e){if(""===window.getSelection().toString()){var t=this.parent.isFrozenGrid();this.clipBoardTextArea.value=this.copyContent="";var i=void 0,r=void 0,n=this.parent.getRows();if(t&&(i=this.parent.getMovableDataRows(),this.parent.getFrozenMode()===B&&(r=this.parent.getFrozenRightRows())),"Cell"!==this.parent.selectionSettings.mode){var o=this.parent.getSelectedRowIndexes().sort(function(f,g){return f-g});if(e){for(var a=[],h=0;h<this.parent.getVisibleColumns().length;h++)a[h]=this.parent.getVisibleColumns()[h].headerText;this.getCopyData(a,!1,"\t",e),this.copyContent+="\n"}for(h=0;h<o.length;h++){h>0&&(this.copyContent+="\n");var d=[].slice.call(n[o[h]].querySelectorAll(".e-rowcell:not(.e-hide)"));t&&(d.push.apply(d,[].slice.call(i[o[h]].querySelectorAll(".e-rowcell:not(.e-hide)"))),r&&d.push.apply(d,[].slice.call(r[o[h]].querySelectorAll(".e-rowcell:not(.e-hide)")))),this.getCopyData(d,!1,"\t",e)}}else{var p=this.checkBoxSelection();if(p.status){if(e){var c=[];for(h=0;h<p.colIndexes.length;h++)c.push(this.parent.getColumnHeaderByIndex(p.colIndexes[h]));this.getCopyData(c,!1,"\t",e),this.copyContent+="\n"}for(h=0;h<p.rowIndexes.length;h++)h>0&&(this.copyContent+="\n"),d=[].slice.call(n[p.rowIndexes[h]].getElementsByClassName("e-cellselectionbackground")),t&&(d.push.apply(d,[].slice.call(i[p.rowIndexes[h]].getElementsByClassName("e-cellselectionbackground"))),r&&d.push.apply(d,[].slice.call(r[p.rowIndexes[h]].getElementsByClassName("e-cellselectionbackground")))),this.getCopyData(d,!1,"\t",e)}else this.getCopyData([].slice.call(this.parent.element.getElementsByClassName("e-cellselectionbackground")),!0,"\n",e)}var u={data:this.copyContent,cancel:!1};if(this.parent.trigger("beforeCopy",u),u.cancel)return;this.clipBoardTextArea.value=this.copyContent=u.data,l.AR.userAgent.match(/ipad|ipod|iphone/i)?this.clipBoardTextArea.setSelectionRange(0,this.clipBoardTextArea.value.length):this.clipBoardTextArea.select(),this.isSelect=!0}},s.prototype.getCopyData=function(e,t,i,r){for(var n="string"!=typeof e[0],o=0;o<e.length;o++){if(r&&t){var a=parseInt(e[o].getAttribute(ce),10);this.copyContent+=this.parent.getColumns()[a].headerText+"\n"}n?e[o].classList.contains("e-hide")||(this.copyContent+=e[o].innerText):this.copyContent+=e[o],o<e.length-1&&(this.copyContent+=i)}},s.prototype.copy=function(e){document.queryCommandSupported("copy")&&(this.setCopyData(e),document.execCommand("copy"),this.clipBoardTextArea.blur()),this.isSelect&&(window.getSelection().removeAllRanges(),this.isSelect=!1)},s.prototype.getModuleName=function(){return"clipboard"},s.prototype.destroy=function(){this.removeEventListener(),this.clipBoardTextArea&&(0,l.Od)(this.clipBoardTextArea)},s.prototype.checkBoxSelection=function(){var e=this.parent,t={status:!1};if("Cell"===e.selectionSettings.mode){var i=e.getSelectedRowCellIndexes(),r=void 0,n=[],o=void 0;for(o=0;o<i.length&&(i[o].cellIndexes.length&&n.push(i[o].rowIndex),!i[o].cellIndexes.length||(r||(r=JSON.stringify(i[o].cellIndexes.sort())),r===JSON.stringify(i[o].cellIndexes.sort())));o++);n.sort(function(a,h){return a-h}),o===i.length&&n[n.length-1]-n[0]==n.length-1&&(t={status:!0,rowIndexes:n,colIndexes:i[0].cellIndexes})}return t},s}(),Ve=function(){var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])})(e,t)};return function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),x=function(s,e,t,i){var o,r=arguments.length,n=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(n=(r<3?o(n):r>3?o(e,t,n):o(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},kh=function(s){function e(){return null!==s&&s.apply(this,arguments)||this}return Ve(e,s),x([(0,l.Z9)()],e.prototype,"field",void 0),x([(0,l.Z9)()],e.prototype,"direction",void 0),x([(0,l.Z9)(!1)],e.prototype,"isFromGroup",void 0),e}(l.rt),Ah=function(s){function e(){return null!==s&&s.apply(this,arguments)||this}return Ve(e,s),x([(0,l.FE)([],kh)],e.prototype,"columns",void 0),x([(0,l.Z9)(!0)],e.prototype,"allowUnsort",void 0),e}(l.rt),Lh=function(s){function e(){return null!==s&&s.apply(this,arguments)||this}return Ve(e,s),x([(0,l.Z9)()],e.prototype,"field",void 0),x([(0,l.Z9)()],e.prototype,"operator",void 0),x([(0,l.Z9)()],e.prototype,"value",void 0),x([(0,l.Z9)()],e.prototype,"matchCase",void 0),x([(0,l.Z9)(!1)],e.prototype,"ignoreAccent",void 0),x([(0,l.Z9)()],e.prototype,"predicate",void 0),x([(0,l.Z9)({})],e.prototype,"actualFilterValue",void 0),x([(0,l.Z9)({})],e.prototype,"actualOperator",void 0),x([(0,l.Z9)()],e.prototype,"type",void 0),x([(0,l.Z9)()],e.prototype,"ejpredicate",void 0),x([(0,l.Z9)()],e.prototype,"uid",void 0),x([(0,l.Z9)()],e.prototype,"isForeignKey",void 0),x([(0,l.Z9)()],e.prototype,"condition",void 0),e}(l.rt),Bh=function(s){function e(){return null!==s&&s.apply(this,arguments)||this}return Ve(e,s),x([(0,l.Z9)(!1)],e.prototype,"enableCache",void 0),x([(0,l.Z9)(3)],e.prototype,"maxBlocks",void 0),x([(0,l.Z9)(3)],e.prototype,"initialBlocks",void 0),e}(l.rt),qh=function(s){function e(){return null!==s&&s.apply(this,arguments)||this}return Ve(e,s),x([(0,l.FE)([],Lh)],e.prototype,"columns",void 0),x([(0,l.Z9)("FilterBar")],e.prototype,"type",void 0),x([(0,l.Z9)()],e.prototype,"mode",void 0),x([(0,l.Z9)(!0)],e.prototype,"showFilterBarStatus",void 0),x([(0,l.Z9)(1500)],e.prototype,"immediateModeDelay",void 0),x([(0,l.Z9)()],e.prototype,"operators",void 0),x([(0,l.Z9)(!1)],e.prototype,"ignoreAccent",void 0),x([(0,l.Z9)(!1)],e.prototype,"enableCaseSensitivity",void 0),x([(0,l.Z9)(!1)],e.prototype,"showFilterBarOperator",void 0),e}(l.rt),Oh=function(s){function e(){return null!==s&&s.apply(this,arguments)||this}return Ve(e,s),x([(0,l.Z9)("Row")],e.prototype,"mode",void 0),x([(0,l.Z9)("Flow")],e.prototype,"cellSelectionMode",void 0),x([(0,l.Z9)("Single")],e.prototype,"type",void 0),x([(0,l.Z9)(!1)],e.prototype,"checkboxOnly",void 0),x([(0,l.Z9)(!1)],e.prototype,"persistSelection",void 0),x([(0,l.Z9)("Default")],e.prototype,"checkboxMode",void 0),x([(0,l.Z9)(!1)],e.prototype,"enableSimpleMultiRowSelection",void 0),x([(0,l.Z9)(!0)],e.prototype,"enableToggle",void 0),x([(0,l.Z9)(!1)],e.prototype,"allowColumnSelection",void 0),e}(l.rt),Ph=function(s){function e(){return null!==s&&s.apply(this,arguments)||this}return Ve(e,s),x([(0,l.Z9)([])],e.prototype,"fields",void 0),x([(0,l.Z9)("")],e.prototype,"key",void 0),x([(0,l.Z9)("contains")],e.prototype,"operator",void 0),x([(0,l.Z9)(!0)],e.prototype,"ignoreCase",void 0),x([(0,l.Z9)(!1)],e.prototype,"ignoreAccent",void 0),e}(l.rt),Hh=function(s){function e(){return null!==s&&s.apply(this,arguments)||this}return Ve(e,s),x([(0,l.Z9)()],e.prototype,"targetID",void 0),e}(l.rt),Nh=function(s){function e(){return null!==s&&s.apply(this,arguments)||this}return Ve(e,s),x([(0,l.Z9)("Both")],e.prototype,"wrapMode",void 0),e}(l.rt),Vh=function(s){function e(){return null!==s&&s.apply(this,arguments)||this}return Ve(e,s),x([(0,l.Z9)("Normal")],e.prototype,"mode",void 0),e}(l.rt),Gh=function(s){function e(){return null!==s&&s.apply(this,arguments)||this}return Ve(e,s),x([(0,l.Z9)(!0)],e.prototype,"showDropArea",void 0),x([(0,l.Z9)(!1)],e.prototype,"allowReordering",void 0),x([(0,l.Z9)(!1)],e.prototype,"showToggleButton",void 0),x([(0,l.Z9)(!1)],e.prototype,"showGroupedColumn",void 0),x([(0,l.Z9)(!0)],e.prototype,"showUngroupButton",void 0),x([(0,l.Z9)(!1)],e.prototype,"disablePageWiseAggregates",void 0),x([(0,l.Z9)([])],e.prototype,"columns",void 0),x([(0,l.Z9)()],e.prototype,"captionTemplate",void 0),x([(0,l.Z9)(!1)],e.prototype,"enableLazyLoading",void 0),e}(l.rt),jh=function(s){function e(){return null!==s&&s.apply(this,arguments)||this}return Ve(e,s),x([(0,l.Z9)(!1)],e.prototype,"allowAdding",void 0),x([(0,l.Z9)(!1)],e.prototype,"allowEditing",void 0),x([(0,l.Z9)(!1)],e.prototype,"allowDeleting",void 0),x([(0,l.Z9)("Normal")],e.prototype,"mode",void 0),x([(0,l.Z9)(!0)],e.prototype,"allowEditOnDblClick",void 0),x([(0,l.Z9)(!0)],e.prototype,"showConfirmDialog",void 0),x([(0,l.Z9)(!1)],e.prototype,"showDeleteConfirmDialog",void 0),x([(0,l.Z9)("")],e.prototype,"template",void 0),x([(0,l.Z9)("")],e.prototype,"headerTemplate",void 0),x([(0,l.Z9)("")],e.prototype,"footerTemplate",void 0),x([(0,l.Z9)("Top")],e.prototype,"newRowPosition",void 0),x([(0,l.Z9)({})],e.prototype,"dialog",void 0),x([(0,l.Z9)(!1)],e.prototype,"allowNextRowEdit",void 0),e}(l.rt),_h=function(s){function e(){return null!==s&&s.apply(this,arguments)||this}return Ve(e,s),x([(0,l.Z9)("Spinner")],e.prototype,"indicatorType",void 0),e}(l.rt),Fr=function(s){function e(i,r){var n=s.call(this,i,r)||this;return n.isPreventScrollEvent=!1,n.inViewIndexes=[],n.keyA=!1,n.frozenRightCount=0,n.frozenLeftCount=0,n.tablesCount=1,n.movableCount=0,n.visibleFrozenLeft=0,n.visibleFrozenRight=0,n.visibleMovable=0,n.frozenLeftColumns=[],n.frozenRightColumns=[],n.movableColumns=[],n.media={},n.isFreezeRefresh=!1,n.tableIndex=0,n.componentRefresh=l.wA.prototype.refresh,n.isVirtualAdaptive=!1,n.vRows=[],n.vcRows=[],n.vGroupOffsets={},n.rowUid=0,n.currentViewData=[],n.isManualRefresh=!1,n.isAutoFitColumns=!1,n.enableDeepCompare=!1,n.totalDataRecordsCount=0,n.disableSelectedRecords=[],n.partialSelectedRecords=[],n.lockcolPositionCount=0,n.prevPageMoving=!1,n.pageTemplateChange=!1,n.isAutoGen=!1,n.mediaBindInstance={},n.commandDelIndex=void 0,n.asyncTimeOut=50,n.isExportGrid=!1,n.enableLogger=!0,n.needsID=!0,t.Inject(zh),(0,l.sO)("mergePersistData",n.mergePersistGridData,n),n}var t;return Ve(e,s),t=e,e.prototype.getPersistData=function(){for(var i=["pageSettings","sortSettings","filterSettings","groupSettings","columns","searchSettings","selectedRowIndex","scrollPosition"],r={pageSettings:["template","pageSizes","enableQueryString","totalRecordsCount","pageCount"],filterSettings:["type","mode","showFilterBarStatus","immediateModeDelay","ignoreAccent"],groupSettings:["showDropArea","showToggleButton","showGroupedColumn","showUngroupButton","disablePageWiseAggregates","hideCaptionCount"],searchSettings:["fields","operator","ignoreCase"],sortSettings:[],columns:[],selectedRowIndex:[],scrollPosition:[]},n=0;n<i.length;n++)for(var o=this[i[n]],a=0,h=r[i[n]];a<h.length;a++)delete o[h[a]];var p=this.pageSettings.template,c=Object.assign({template:void 0},this.pageSettings);this.setProperties({pageSettings:c},!0),this.isAngular&&delete this.groupSettings.properties.captionTemplate,this.pageTemplateChange=!(0,l.le)(this.pagerTemplate);var u=this.addOnPersist(i);return c.template=p,this.setProperties({pageSettings:c},!0),u},e.prototype.requiredModules=function(){this.setFrozenCount(),this.enableInfiniteAggrgate();var i=[];return this.isDestroyed||(this.allowFiltering&&i.push({member:"filter",args:[this,this.filterSettings,this.serviceLocator]}),this.allowExcelExport&&i.push({member:"ExcelExport",args:[this,this.serviceLocator]}),this.allowPdfExport&&i.push({member:"PdfExport",args:[this]}),this.allowSorting&&i.push({member:"sort",args:[this,this.sortSettings,this.sortedColumns,this.serviceLocator]}),this.allowPaging&&i.push({member:"pager",args:[this,this.pageSettings]}),this.allowSelection&&i.push({member:"selection",args:[this,this.selectionSettings,this.serviceLocator]}),i.push({member:"resize",args:[this]}),this.allowReordering&&i.push({member:"reorder",args:[this]}),this.allowRowDragAndDrop&&i.push({member:"rowDragAndDrop",args:[this]}),this.allowGrouping&&i.push({member:"group",args:[this,this.groupSettings,this.sortedColumns,this.serviceLocator]}),this.aggregates.length&&i.push({member:"aggregate",args:[this,this.serviceLocator]}),this.isDetail()&&i.push({member:"detailRow",args:[this,this.serviceLocator]}),(this.toolbar||this.toolbarTemplate)&&i.push({member:"toolbar",args:[this,this.serviceLocator]}),(this.enableVirtualization||this.enableColumnVirtualization)&&i.push({member:"virtualscroll",args:[this,this.serviceLocator]}),(this.getFrozenColumns()||this.frozenRows||this.frozenRightCount||this.frozenLeftCount)&&i.push({member:"freeze",args:[this,this.serviceLocator]}),this.isCommandColumn(this.columns)&&i.push({member:"commandColumn",args:[this,this.serviceLocator]}),(this.editSettings.allowAdding||this.editSettings.allowDeleting||this.editSettings.allowEditing)&&i.push({member:"edit",args:[this,this.serviceLocator]}),this.extendRequiredModules(i)),i},e.prototype.extendRequiredModules=function(i){this.enableInfiniteScrolling&&i.push({member:"infiniteScroll",args:[this,this.serviceLocator]}),this.groupSettings.enableLazyLoading&&i.push({member:"lazyLoadGroup",args:[this,this.serviceLocator]}),this.contextMenuItems&&i.push({member:"contextMenu",args:[this,this.serviceLocator]}),this.showColumnMenu&&i.push({member:"columnMenu",args:[this,this.serviceLocator]}),this.showColumnChooser&&i.push({member:"columnChooser",args:[this,this.serviceLocator]}),this.isForeignKeyEnabled(this.columns)&&i.push({member:"foreignKey",args:[this,this.serviceLocator]}),this.enableLogger&&i.push({member:"logger",args:[this]})},e.prototype.preRender=function(){this.serviceLocator=new fh,this.initProperties(),this.initializeServices()},e.prototype.initProperties=function(){this.isInitial=!0,this.sortedColumns=[],this.inViewIndexes=[],this.mediaCol=[],this.isInitialLoad=!1,this.allowServerDataBinding=!1,this.ignoreCollectionWatch=!0,this.mergeCells={},this.isEdit=!1,this.checkAllRows="None",this.isCheckBoxSelection=!1,this.isPersistSelection=!1,this.componentRefresh=l.wA.prototype.refresh,this.filterOperators={contains:"contains",endsWith:"endswith",equal:"equal",greaterThan:"greaterthan",greaterThanOrEqual:"greaterthanorequal",lessThan:"lessthan",lessThanOrEqual:"lessthanorequal",notEqual:"notequal",startsWith:"startswith"},this.defaultLocale={EmptyRecord:"No records to display",True:"true",False:"false",InvalidFilterMessage:"Invalid Filter Data",GroupDropArea:"Drag a column header here to group its column",UnGroup:"Click here to ungroup",UnGroupButton:"Click here to ungroup",GroupDisable:"Grouping is disabled for this column",FilterbarTitle:"'s filter bar cell",EmptyDataSourceError:"DataSource must not be empty at initial load since columns are generated from dataSource in AutoGenerate Column Grid",Add:"Add",Edit:"Edit",Cancel:"Cancel",Update:"Update",Delete:"Delete",Print:"Print",Pdfexport:"PDF Export",Excelexport:"Excel Export",Wordexport:"Word Export",Csvexport:"CSV Export",Search:"Search",Columnchooser:"Columns",Save:"Save",Item:"item",Items:"items",EditOperationAlert:"No records selected for edit operation",DeleteOperationAlert:"No records selected for delete operation",SaveButton:"Save",OKButton:"OK",CancelButton:"Cancel",EditFormTitle:"Details of ",AddFormTitle:"Add New Record",BatchSaveConfirm:"Are you sure you want to save changes?",BatchSaveLostChanges:"Unsaved changes will be lost. Are you sure you want to continue?",ConfirmDelete:"Are you sure you want to Delete Record?",CancelEdit:"Are you sure you want to Cancel the changes?",ChooseColumns:"Choose Column",SearchColumns:"search columns",Matchs:"No matches found",FilterButton:"Filter",ClearButton:"Clear",StartsWith:"Starts With",EndsWith:"Ends With",Contains:"Contains",Equal:"Equal",NotEqual:"Not Equal",LessThan:"Less Than",LessThanOrEqual:"Less Than Or Equal",GreaterThan:"Greater Than",GreaterThanOrEqual:"Greater Than Or Equal",ChooseDate:"Choose a Date",EnterValue:"Enter the value",Copy:"Copy",Group:"Group by this column",Ungroup:"Ungroup by this column",GroupButton:"Group button",UnGroupAria:"ungroup button",GroupSeperator:"Separator for the grouped columns",UnGroupIcon:"ungroup the grouped column ",GroupedSortIcon:"sort the grouped column ",GroupedDrag:"Drag the grouped column",GroupCaption:" is groupcaption cell",CheckBoxLabel:"checkbox",autoFitAll:"Autofit all columns",autoFit:"Autofit this column",AutoFitAll:"Autofit all columns",AutoFit:"Autofit this column",Export:"Export",FirstPage:"First Page",LastPage:"Last Page",PreviousPage:"Previous Page",NextPage:"Next Page",SortAscending:"Sort Ascending",SortDescending:"Sort Descending",EditRecord:"Edit Record",DeleteRecord:"Delete Record",FilterMenu:"Filter",SelectAll:"Select All",Blanks:"Blanks",FilterTrue:"True",FilterFalse:"False",NoResult:"No matches found",ClearFilter:"Clear Filter",Clear:"Clear",NumberFilter:"Number Filters",TextFilter:"Text Filters",DateFilter:"Date Filters",DateTimeFilter:"DateTime Filters",MatchCase:"Match Case",Between:"Between",CustomFilter:"Custom Filter",CustomFilterPlaceHolder:"Enter the value",CustomFilterDatePlaceHolder:"Choose a date",AND:"AND",OR:"OR",ShowRowsWhere:"Show rows where:",FilterMenuDialogARIA:"Filter menu dialog",ExcelFilterDialogARIA:"Excel filter dialog",DialogEditARIA:"Edit dialog",ColumnChooserDialogARIA:"Column chooser dialog",ColumnMenuDialogARIA:"Column menu dialog",CustomFilterDialogARIA:"Customer filter dialog",SortAtoZ:"Sort A to Z",SortZtoA:"Sort Z to A",SortByOldest:"Sort by Oldest",SortByNewest:"Sort by Newest",SortSmallestToLargest:"Sort Smallest to Largest",SortLargestToSmallest:"Sort Largest to Smallest",Sort:"Sort",FilterDescription:"Press Alt Down to open filter Menu",SortDescription:"Press Enter to sort",ColumnMenuDescription:"Press Alt Down to open Column Menu",GroupDescription:"Press Ctrl space to group",ColumnHeader:" column header ",TemplateCell:" is template cell",CommandColumnAria:"is Command column column header ",DialogEdit:"Dialog edit",ClipBoard:"clipboard",AscendingText:"Ascending",DescendingText:"Descending",NoneText:"None"},this.keyConfigs={downArrow:"downarrow",upArrow:"uparrow",rightArrow:"rightarrow",leftArrow:"leftarrow",shiftDown:"shift+downarrow",shiftUp:"shift+uparrow",shiftRight:"shift+rightarrow",shiftLeft:"shift+leftarrow",home:"home",end:"end",escape:"escape",ctrlHome:"ctrl+home",ctrlEnd:"ctrl+end",pageUp:"pageup",pageDown:"pagedown",ctrlAltPageUp:"ctrl+alt+pageup",ctrlAltPageDown:"ctrl+alt+pagedown",altPageUp:"alt+pageup",altPageDown:"alt+pagedown",altDownArrow:"alt+downarrow",altUpArrow:"alt+uparrow",ctrlDownArrow:"ctrl+downarrow",ctrlUpArrow:"ctrl+uparrow",ctrlPlusA:"ctrl+A",ctrlPlusP:"ctrl+P",insert:"insert",delete:"delete",f2:"f2",enter:"enter",ctrlEnter:"ctrl+enter",shiftEnter:"shift+enter",tab:"tab",shiftTab:"shift+tab",space:"space",ctrlPlusC:"ctrl+C",ctrlShiftPlusH:"ctrl+shift+H",ctrlSpace:"ctrl+space",ctrlLeftArrow:"ctrl+leftarrow",ctrlRightArrow:"ctrl+rightarrow"}},e.prototype.render=function(){this.log(["module_missing","promise_enabled","locale_missing","check_datasource_columns"]),this.ariaService.setOptions(this.element,{datarole:"grid"}),(0,Ce.rj)({target:this.element,cssClass:this.cssClass?this.cssClass:null},this.createElement),this.renderModule=new ch(this,this.serviceLocator),this.searchModule=new Mh(this),this.scrollModule=new zo(this),this.notify(nt,{}),(!0===this.getDataModule().dataManager.dataSource.offline||void 0===this.getDataModule().dataManager.dataSource.url)&&(this.isVirtualAdaptive=!0),this.trigger("load"),pi(this.columns,this.enableColumnVirtualization,this),this.enablePersistence&&this.notify(un,{}),this.getMediaColumns(),Mr(this.columns),this.checkLockColumns(this.columns),this.getColumns(),this.processModel(),this.gridRender(),this.wireEvents(),this.addListener(),this.updateDefaultCursor(),this.updateStackedFilter(),"Spinner"===this.loadingIndicator.indicatorType&&this.showSpinner(),this.notify(we,{}),"Shimmer"===this.loadingIndicator.indicatorType&&this.refreshMaskRow(),this.refreshing&&this.trigger("created")},e.prototype.showSpinner=function(){this.isExportGrid||(0,Ce.yh)(this.element)},e.prototype.hideSpinner=function(){this.isExportGrid||(0,Ce.v3)(this.element)},e.prototype.showMaskRow=function(i,r){var n=this.getHeaderContent().firstChild,o=this.getContent().firstChild,a=this.getFooterContent();if(r){var h=r.querySelector(".e-checkboxlist"),d=Math.floor(h.getBoundingClientRect().height/this.getRowHeight()),p='<div class="e-ftrchk e-mask-ftrchk" style="width: 100%;"><div class="e-checkbox-wrapper" style="width: 100%;"><input class="e-chk-hidden">'+this.getShimmerTemplate()+this.getShimmerTemplate()+"</div></div>";h.innerHTML="";for(var c=0;c<d;c++){h.innerHTML+=p;var u=[].slice.call(h.querySelectorAll(".e-mask:not(.e-mask-checkbox-filter-intent):not(.e-mask-checkbox-filter-span-intent)"));u[0].classList.add("e-mask-checkbox-filter-intent"),u[1].classList.add("e-mask-checkbox-filter-span-intent")}}else{if((!this.enableRtl&&!this.getHeaderContent().style.paddingRight||this.enableRtl&&!this.getHeaderContent().style.paddingLeft)&&(o.style.overflowY="hidden"),!this.isInitialLoad&&!this.getColumns().length){var g=0===(f=o.getBoundingClientRect().height)?this.allowPaging?this.pageSettings.pageSize*this.getRowHeight():window.innerHeight:f,v=Math.ceil(g/this.getRowHeight());return"Vertical"!==this.rowRenderingMode&&(this.headerMaskTable=this.createEmptyMaskTable(n,1)),void(this.contentMaskTable=this.createEmptyMaskTable(o,v))}if(this.maskRowContentScroll=!(!this.enableVirtualization||!i),!(this.contentMaskTable||this.isFrozenGrid()&&this.enableColumnVirtualization&&"X"===i)){var m=o;if(this.isFrozenGrid()){if(!this.isInitialLoad&&!this.enableVirtualization&&this.frozenRows&&"auto"!==this.height){var f=m.getBoundingClientRect().height-this.frozenRows*this.getRowHeight();m.style.height=f+"px"}m=m.querySelector(".e-frozen-left-content, .e-frozen-right-content")}else this.enableVirtualization&&(m=m.querySelector(".e-virtualtable"));this.contentMaskTable=this.createMaskTable(m,this.getContentMaskColumns(),i)}if(this.headerMaskTable||!(this.isFrozenGrid()||this.enableColumnVirtualization&&"X"===i)||this.isFrozenGrid()&&(this.enableVirtualization&&"Y"===i||this.enableColumnVirtualization&&"X"===i||this.enableInfiniteScrolling&&"down"===i)||(m=n,this.isFrozenGrid()?m=m.querySelector(".e-frozen-left-header, .e-frozen-right-header"):this.enableColumnVirtualization&&"X"===i&&(m=m.querySelector(".e-virtualtable")),this.headerMaskTable=this.createMaskTable(m,this.getContentMaskColumns(),i)),this.movableHeaderMaskTable||!this.isFrozenGrid()||this.enableVirtualization&&"Y"===i||this.enableInfiniteScrolling&&"down"===i||(m=n.querySelector(".e-movableheader"),this.enableColumnVirtualization&&(m=m.querySelector(".e-virtualtable")),this.movableHeaderMaskTable=this.createMaskTable(m,this.getMovableContentMaskColumns(),i)),!this.rightHeaderMaskTable&&this.isFrozenGrid()&&"Left-Right"===this.getFrozenMode()&&!(this.enableVirtualization&&"Y"===i||this.enableInfiniteScrolling&&"down"===i)&&(this.rightHeaderMaskTable=this.createMaskTable(n.querySelector(".e-frozen-right-header"),this.getRightContentMaskColumns(),i)),!this.movableContentMaskTable&&this.isFrozenGrid()&&(m=o.querySelector(".e-movablecontent"),this.enableColumnVirtualization&&(m=m.querySelector(".e-virtualtable")),this.movableContentMaskTable=this.createMaskTable(m,this.getMovableContentMaskColumns(),i)),!this.rightContentMaskTable&&this.isFrozenGrid()&&"Left-Right"===this.getFrozenMode()&&(this.rightContentMaskTable=this.createMaskTable(o.querySelector(".e-frozen-right-content"),this.getRightContentMaskColumns(),i)),a&&a.querySelector(".e-summaryrow")){var C=a.firstChild;if(!this.footerContentMaskTable){var b=C;this.isFrozenGrid()&&(b=b.querySelector(".e-frozen-left-footercontent, .e-frozen-right-footercontent")),this.footerContentMaskTable=this.createMaskTable(b)}this.isFrozenGrid()&&(this.movableFooterContentMaskTable||(this.movableFooterContentMaskTable=this.createMaskTable(C.querySelector(".e-movablefootercontent"))),"Left-Right"===this.getFrozenMode()&&!this.rightFooterContentMaskTable&&(this.rightFooterContentMaskTable=this.createMaskTable(C.querySelector(".e-frozen-right-footercontent"))))}this.enableVirtualization&&i||l.bi.add(o,"scroll",this.translateMaskRow,this)}},e.prototype.getContentMaskColumns=function(){var i=this.getColumns();return this.isFrozenGrid()&&("Left"===this.getFrozenMode()||"Left-Right"===this.getFrozenMode()?i=this.frozenColumns?i.slice(0,this.frozenColumns):this.getFrozenLeftColumns():"Right"===this.getFrozenMode()&&(i=this.getFrozenRightColumns())),i},e.prototype.getMovableContentMaskColumns=function(){var i=this.getColumns();return this.frozenColumns?i.slice(this.frozenColumns,i.length):this.getMovableColumns()},e.prototype.getRightContentMaskColumns=function(){return this.getFrozenRightColumns()},e.prototype.createEmptyMaskTable=function(i,r){var n=this.createElement("table",{className:"e-table e-masked-table"}),o=this.createElement("tbody",{className:"e-masked-tbody"}),a=this.createElement("tr",{className:"e-masked-row e-row",attrs:{style:"height: "+this.getRowHeight()+"px;"}}),h=this.createElement("td",{className:"e-masked-cell e-rowcell"});h.innerHTML=this.getShimmerTemplate(),a.appendChild(h);for(var d=0;d<r;d++)o.appendChild(a.cloneNode(!0));return n.appendChild(o),i.appendChild(n),n},e.prototype.createMaskTable=function(i,r,n){var o=i,a=!!(0,l.oq)(o,".e-gridheader"),h=!!(0,l.oq)(o,".e-gridcontent"),d=!!(0,l.oq)(o,".e-gridfooter"),p=this.getContent().firstChild,c=p.scrollHeight,u=o.querySelector("table");this.isFrozenGrid()&&(h&&(o.style.overflow="hidden"),o.style.position="relative");var f=u.cloneNode();f.removeAttribute("role"),f.removeAttribute("id"),f.removeAttribute("aria-multiselectable"),f.removeAttribute("aria-colcount"),f.removeAttribute("aria-rowcount"),f.style.position="absolute",f.style.zIndex="1",f.style.width=u.getBoundingClientRect().width+"px",a&&!(this.enableColumnVirtualization&&"X"===n)&&(f.style.transform="translate(0px,"+u.querySelector("thead").getBoundingClientRect().height+"px)"),f.setAttribute("class","e-table e-masked-table");var g=u.querySelector("colgroup").cloneNode(!0);if(g.removeAttribute("id"),g.setAttribute("class","e-masked-colgroup"),f.appendChild(g),a&&this.enableColumnVirtualization&&"X"===n){var v=this.createMaskRow(g,r),m=u.querySelector("thead"),C=[].slice.call(m.querySelectorAll("tr")),b=m.cloneNode();b.removeAttribute("role"),b.setAttribute("class","e-masked-thead");for(var y=C.length,S=0;S<y;S++)b.appendChild(v.cloneNode(!0)),b.childNodes[S].style.height=C[S].getBoundingClientRect().height+"px";f.appendChild(b)}var R=u.querySelector("tbody").cloneNode();R.removeAttribute("role"),R.setAttribute("class","e-masked-tbody");var F=u.querySelector("tbody");if(h||a&&this.isFrozenGrid()){var D=p;if(y=a&&this.isFrozenGrid()?this.frozenRows:Math.ceil(D.getBoundingClientRect().height/this.getRowHeight()),F.querySelector(".e-emptyrow")||!F.childNodes.length||h&&this.childGrid){var L=(v=this.createMaskRow(g,r)).cloneNode(!0);for(L.classList.add("e-altrow"),S=0;S<y;S++){var k=h&&this.isFrozenGrid()&&this.frozenRows?this.frozenRows+1:1;R.appendChild((S+k)%2==0?L.cloneNode(!0):v.cloneNode(!0))}}else{C=[].slice.call(F.querySelectorAll('tr:not([style*="display:none"]):not([style*="display: none"])'));var T=F.querySelector(".e-addedrow, .e-editedrow"),P=void 0;for(T&&(P=C.indexOf(T),T.classList.contains("e-addedrow")?C.splice(P,2):C.splice(P,1)),y=a&&this.isFrozenGrid()||this.enableVirtualization&&n?C.length:y<=C.length?y:C.length,S=0;S<y;S++)R.appendChild(this.applyMaskRow(C[S].cloneNode(!0),C[S].getBoundingClientRect().height));if(T&&T.classList.contains("e-editedrow")){var j=R.childNodes[P];j.style.height=this.getRowHeight()+"px",j.classList.add("e-row"),T.classList.contains("e-altrow")&&j.classList.add("e-altrow")}}}if(f.appendChild(R),d){var $=u.querySelector("tfoot"),J=$.cloneNode();for(J.setAttribute("class","e-masked-tfoot"),C=[].slice.call($.querySelectorAll("tr")),S=0;S<C.length;S++)J.appendChild(this.applyMaskRow(C[S].cloneNode(!0),C[S].getBoundingClientRect().height));f.appendChild(J)}if(o.insertBefore(f,o.firstChild),a&&this.isFrozenGrid()&&F.getBoundingClientRect().height<f.querySelector("tbody").getBoundingClientRect().height){var se=f.querySelector("tbody").getBoundingClientRect().height-F.getBoundingClientRect().height,ge=this.createElement("div",{className:"e-masked-table-holder",attrs:{style:"height: "+se+"px;"}});o.appendChild(ge)}else a&&this.isFrozenGrid()&&(!this.enableColumnVirtualization||"X"!==n)&&(f.style.height=o.getBoundingClientRect().height-u.querySelector("thead").getBoundingClientRect().height+"px");if(h&&(!this.enableVirtualization||!n)){var be=c-f.getBoundingClientRect().height,re=p.scrollTop<=(be=be<0?0:be)?p.scrollTop:be;this.enableVirtualization&&(re-=Xn((0,l.oq)(o,".e-virtualtable")).height),f.style.transform="translate(0px,"+re+"px)"}return f},e.prototype.applyMaskRow=function(i,r){var n=i;n.removeAttribute("role"),n.removeAttribute("aria-rowindex"),n.removeAttribute("data-rowindex"),n.removeAttribute("data-uid"),n.classList.add("e-masked-row"),n.style.height=r+"px";for(var o=[].slice.call(n.childNodes),a=0;a<o.length;a++){var h=o[a],d=h.firstChild&&h.firstChild.classList&&h.firstChild.classList.contains("e-checkbox-wrapper");h.removeAttribute("role"),h.removeAttribute("tabindex"),h.removeAttribute("aria-label"),h.removeAttribute("data-colindex"),h.removeAttribute("aria-colindex"),h.removeAttribute("index"),h.removeAttribute("ej-mappingname"),h.removeAttribute("ej-mappingvalue"),h.removeAttribute("e-mappinguid"),h.removeAttribute("aria-expanded"),h.classList.add("e-masked-cell"),h.innerHTML=this.getShimmerTemplate(),h.classList.contains("e-recordplusexpand")||h.classList.contains("e-recordpluscollapse")?h.firstChild.classList.add("e-mask-group-intent"):h.classList.contains("e-gridchkbox")||d?h.firstChild.classList.add("e-mask-checkbox-intent"):h.classList.contains("e-rowdragdrop")?h.firstChild.classList.add("e-mask-drag-intent"):h.classList.contains("e-indentcell")&&(h.innerHTML="")}return n},e.prototype.createMaskRow=function(i,r){var n=i,o=r,a=this.createElement("tr",{className:"e-masked-row e-row"});"Vertical"!==this.rowRenderingMode&&(a.style.height=this.getRowHeight()+"px");for(var h=this.createElement("td",{className:"e-masked-cell e-rowcell"}),d=0,p=0;d<n.childNodes.length;d++){var c=n.childNodes[d],u=h.cloneNode();u.innerHTML=this.getShimmerTemplate(),c.classList.contains("e-group-intent")||c.classList.contains("e-detail-intent")||c.classList.contains("e-drag-intent")?c.classList.contains("e-group-intent")?u.firstChild.classList.add("e-mask-group-intent"):c.classList.contains("e-detail-intent")?u.firstChild.classList.add("e-mask-detail-intent"):c.classList.contains("e-drag-intent")&&u.firstChild.classList.add("e-mask-drag-intent"):("Vertical"===this.rowRenderingMode&&o[p]&&u.setAttribute("data-cell",o[p].headerText?o[p].headerText:o[p].field),"none"===c.style.display?u.classList.add("e-hide"):(u.style.textAlign=o[p]&&o[p].textAlign?o[p].textAlign.toLowerCase():this.enableRtl?"right":"left",o[p]&&("checkbox"===o[p].type||o[p].displayAsCheckBox)&&u.firstChild.classList.add("e-mask-checkbox-intent")),p++),a.appendChild(u)}return a},e.prototype.getShimmerTemplate=function(){return this.maskRowContentScroll?'<span class="e-mask e-skeleton e-skeleton-text"></span>':'<span class="e-mask e-skeleton e-skeleton-text e-shimmer-wave"></span>'},e.prototype.addShimmerEffect=function(){this.maskRowContentScroll=!1;for(var i=[].slice.call(this.element.querySelectorAll(".e-mask:not(.e-shimmer-wave)")),r=0;r<i.length;r++)i[r]&&i[r].classList.add("e-shimmer-wave")},e.prototype.translateMaskRow=function(i){for(var r=i.target,n=r.querySelectorAll(".e-masked-table"),o=0;o<n.length;o++){var a=n[o];if(a){var h=r.scrollHeight-a.getBoundingClientRect().height,d=r.scrollTop<=(h=h<0?0:h)?r.scrollTop:h;this.enableVirtualization&&(d-=Xn((0,l.oq)(a,".e-virtualtable")).height),a.style.transform="translate(0px,"+d+"px)"}}},e.prototype.removeMaskRow=function(){var i=this.getContent().firstChild;l.bi.remove(i,"scroll",this.translateMaskRow);for(var r=[this.headerMaskTable,this.movableHeaderMaskTable,this.rightHeaderMaskTable,this.contentMaskTable,this.movableContentMaskTable,this.rightContentMaskTable,this.footerContentMaskTable,this.movableFooterContentMaskTable,this.rightFooterContentMaskTable],n=0;n<r.length;n++){var o=r[n];if(o){if(this.isFrozenGrid()&&!(0,l.oq)(o,".e-gridfooter")){var a=o.parentElement;if(a.style.overflow="",a.style.position="",(0,l.oq)(o,".e-frozen-left-header")||(0,l.oq)(o,".e-movableheader")||(0,l.oq)(o,".e-frozen-right-header")){var h=a.querySelector(".e-masked-table-holder");h&&(0,l.Od)(h)}}(0,l.Od)(o)}}this.headerMaskTable=null,this.movableHeaderMaskTable=null,this.rightHeaderMaskTable=null,this.contentMaskTable=null,this.movableContentMaskTable=null,this.rightContentMaskTable=null,this.footerContentMaskTable=null,this.movableFooterContentMaskTable=null,this.rightFooterContentMaskTable=null},e.prototype.refreshMaskRow=function(){var i=this.getHeaderContent().firstChild,r=this.getContent().firstChild;if(this.isInitialLoad||this.getColumns().length){if(this.contentMaskTable){var n=r;this.isFrozenGrid()?n=n.querySelector(".e-frozen-left-content, .e-frozen-right-content"):this.enableVirtualization&&(n=n.querySelector(".e-virtualtable")),this.refreshMaskRowColgroupWidth(n)}this.headerMaskTable&&this.isFrozenGrid()&&this.refreshMaskRowColgroupWidth(i.querySelector(".e-frozen-left-header, .e-frozen-right-header")),this.movableHeaderMaskTable&&this.isFrozenGrid()&&(n=i.querySelector(".e-movableheader"),this.enableColumnVirtualization&&(n=n.querySelector(".e-virtualtable")),this.refreshMaskRowColgroupWidth(n)),this.rightHeaderMaskTable&&this.isFrozenGrid()&&"Left-Right"===this.getFrozenMode()&&this.refreshMaskRowColgroupWidth(i.querySelector(".e-frozen-right-header")),this.movableContentMaskTable&&this.isFrozenGrid()&&(n=r.querySelector(".e-movablecontent"),this.enableColumnVirtualization&&(n=n.querySelector(".e-virtualtable")),this.refreshMaskRowColgroupWidth(n)),this.rightContentMaskTable&&this.isFrozenGrid()&&"Left-Right"===this.getFrozenMode()&&this.refreshMaskRowColgroupWidth(r.querySelector(".e-frozen-right-content"))}},e.prototype.refreshMaskRowColgroupWidth=function(i){var r=i.querySelector("table:not(.e-masked-table)"),n=r.querySelector(q).cloneNode(!0),o=i.querySelector(".e-masked-table");n.removeAttribute("id"),n.setAttribute("class","e-masked-colgroup");for(var a=0;a<n.childNodes.length;a++)n.childNodes[a].removeAttribute("class");(0,l.Od)(o.querySelector(".e-masked-colgroup")),o.insertBefore(n,o.firstChild),o.style.width=r.getBoundingClientRect().width+"px"},e.prototype.updateStackedFilter=function(){this.allowFiltering&&"FilterBar"===this.filterSettings.type&&this.getHeaderContent().getElementsByClassName("e-stackedheadercell").length?this.getHeaderContent().classList.add("e-stackedfilter"):this.getHeaderContent().classList.remove("e-stackedfilter")},e.prototype.getMediaColumns=function(){if(!this.enableColumnVirtualization){var i=this.getColumns();if(this.getShowHideService=this.serviceLocator.getService("showHideService"),!(0,l.le)(i))for(var r=0;r<i.length;r++)!(0,l.le)(i[r].hideAtMedia)&&((0,l.le)(i[r].visible)||i[r].visible)&&this.pushMediaColumn(i[r],r)}},e.prototype.pushMediaColumn=function(i,r){this.mediaCol.push(i),this.media[i.uid]=window.matchMedia(i.hideAtMedia),this.mediaQueryUpdate(r,this.media[i.uid]),this.mediaBindInstance[r]=this.mediaQueryUpdate.bind(this,r),this.media[i.uid].addListener(this.mediaBindInstance[r])},e.prototype.updateMediaColumns=function(i){if(!this.enableColumnVirtualization){for(var r=this.getColumnIndexByUid(i.uid),n=0;n<this.mediaCol.length;n++)if(i.uid===this.mediaCol[n].uid)return void this.mediaCol.splice(n,1);this.pushMediaColumn(i,r)}},e.prototype.mediaQueryUpdate=function(i,r){var n=this.getColumns()[i];this.mediaCol.some(function(o){return o.uid===n.uid})&&(n.visible=r.matches,this.isInitialLoad&&(this.invokedFromMedia=!0,n.visible?this.showHider.show(n.headerText,"headerText"):this.showHider.hide(n.headerText,"headerText")))},e.prototype.refreshMediaCol=function(){this.isInitialLoad=!0;var i=this.element.querySelector("."+Rt);this.aggregates.length&&this.element.scrollHeight>this.height&&i&&(0,l.cn)([i],["e-footerpadding"]),this.getColumns().filter(function(n){return"checkbox"===n.type}).length&&"ResetOnRowClick"===this.selectionSettings.checkboxMode&&(this.isCheckBoxSelection=!1),"Vertical"===this.rowRenderingMode&&this.enableHover&&(this.setProperties({enableAdaptiveUI:!0,enableHover:!1},!0),(0,l.IV)([this.element],"e-gridhover")),this.enableAdaptiveUI&&this.scrollModule&&this.scrollModule.refresh()},e.prototype.removeMediaListener=function(){for(var i=0;i<this.mediaCol.length;i++)this.media[this.mediaCol[i].uid].removeListener(this.mediaBindInstance[this.mediaCol[i].index])},e.prototype.eventInitializer=function(){},e.prototype.destroy=function(){var i=this.element;if(i){var r=!(!i.querySelector("."+pe)||!i.querySelector("."+ae));r&&this.unwireEvents(),this.removeListener(),this.removeMediaListener(),this.notify(V,{}),this.destroyDependentModules(),(this.isReact||this.isVue)&&this.destroyTemplate(["template"]),r&&s.prototype.destroy.call(this),this.toolTipObj.destroy(),this.isReact&&!l.AR.isIE&&(this.element.innerHTML="");for(var n=["renderModule","headerModule","contentModule","valueFormatterService","serviceLocator","ariaService","keyboardModule","widthService","searchModule","showHider","scrollModule","printModule","clipboardModule","focusModule"],o=0;o<n.length;o++)this[n[o]]&&(this[n[o]]=null);this.element.innerHTML="",(0,l.s1)(this.element,[],["e-rtl","e-gridhover","e-responsive","e-default","e-device","e-grid-min-height"]),this.isFreezeRefresh=!1}},e.prototype.destroyDependentModules=function(){var i=this.element;!i||!i.querySelector("."+pe)&&!i.querySelector("."+ae)||(this.scrollModule.destroy(),this.keyboardModule.destroy(),this.focusModule.destroy(),this.clipboardModule.destroy(),this.printModule.destroy())},e.prototype.getModuleName=function(){return"grid"},e.prototype.enableBoxSelection=function(){this.enableAutoFill?(this.selectionSettings.cellSelectionMode="BoxWithBorder",this.element.classList.add("e-afenabled")):this.element.classList.remove("e-afenabled")},e.prototype.setCSSClass=function(i){this.cssClass&&(0,l.cn)([this.element],this.cssClass.split(" ")),i&&(0,l.IV)([this.element],i.split(" "))},e.prototype.onPropertyChanged=function(i,r){var h,n=!1,o=!1,a=!1;if(!this.isDestroyed){this.log("module_missing"),this.isEllipsisTooltip()&&this.toolTipObj.close();var p=Object.keys(i);p.indexOf("columns")>-1&&(this.enableColumnVirtualization&&(this.columnModel=[]),this.updateColumnObject(),o=!0);for(var c=0,u=p;c<u.length;c++){var f=u[c];switch(f){case"allowPaging":this.notify(X,{module:"pager",enable:this.allowPaging}),n=!0;break;case"pageSettings":if(this.pageTemplateChange){this.pageTemplateChange=!1,this.notify(Se,{module:"pager",properties:i.pageSettings});break}this.notify(Se,{module:"pager",properties:i.pageSettings}),((0,l.le)(i.pageSettings.currentPage)&&(0,l.le)(i.pageSettings.pageSize)&&(0,l.le)(i.pageSettings.totalRecordsCount)||!(0,l.le)(r.pageSettings)&&i.pageSettings.currentPage!==r.pageSettings.currentPage&&!this.enableColumnVirtualization&&!this.enableVirtualization&&this.pageSettings.totalRecordsCount<=this.pageSettings.pageSize)&&(n=!0);break;case"allowSorting":this.notify(X,{module:"sort",enable:this.allowSorting}),n=!0,h=!0;break;case"allowFiltering":this.updateStackedFilter(),this.notify(X,{module:"filter",enable:this.allowFiltering}),n=!0,"FilterBar"!==this.filterSettings.type&&this.refreshHeader();break;case"height":case"width":this.notify(X,{module:"scroll",properties:{width:i.width,height:i.height}});break;case"allowReordering":this.headerModule.refreshUI(),h=!0;break;case"allowRowDragAndDrop":this.notify(X,{module:"rowDragAndDrop",enable:this.allowRowDragAndDrop}),this.renderModule.refresh(),this.headerModule.refreshUI();break;case"allowSelection":this.notify(X,{module:"selection",enable:this.allowSelection});break;case"cssClass":this.setCSSClass(r.cssClass);break;case"enableAutoFill":this.selectionModule&&(this.enableBoxSelection(),this.selectionModule.updateAutoFillPosition());break;case"rowTemplate":this.rowTemplateFn=Me(this.rowTemplate),n=!0;break;case"detailTemplate":this.detailTemplateFn=Me(this.detailTemplate),n=!0;break;case"allowGrouping":this.notify(X,{module:"group",enable:this.allowGrouping}),this.headerModule.refreshUI(),n=!0,h=!0;break;case"enableInfiniteScrolling":case"childGrid":n=!0;break;case"toolbar":this.notify(X,{module:"toolbar"});break;case"groupSettings":this.notify(Se,{module:"group",properties:i.groupSettings,oldProperties:r.groupSettings});break;case"aggregates":!this.aggregates.length&&this.allowGrouping&&this.groupSettings.columns.length&&(n=!0),this.notify(X,{module:"aggregate",properties:i});break;case"frozenColumns":case"frozenRows":case"enableVirtualization":case"currencyCode":case"locale":this.log("frozen_rows_columns"),a=!0,o=!0;break;case"query":this.getDataModule().isQueryInvokedFromData||(n=!0),this.getDataModule().isQueryInvokedFromData=!1;break;default:this.extendedPropertyChange(f,i,o)}}h&&this.updateDefaultCursor(),o?a||this.getFrozenColumns()||this.frozenRows?this.freezeRefresh():this.refresh():n&&(this.notify(ve,{requestType:"refresh"}),n=!1,this.maintainSelection(i.selectedRowIndex))}},e.prototype.extendedPropertyChange=function(i,r,n){switch(i){case"enableRtl":this.updateRTL(),this.allowPaging&&(this.element.querySelector(".e-gridpager").ej2_instances[0].enableRtl=r.enableRtl,this.element.querySelector(".e-gridpager").ej2_instances[0].dataBind()),"auto"!==this.height&&(this.scrollModule.removePadding(!r.enableRtl),this.scrollModule.setPadding()),this.toolbar&&this.toolbarModule&&(this.toolbarModule.getToolbar().ej2_instances[0].enableRtl=r.enableRtl,this.toolbarModule.getToolbar().ej2_instances[0].dataBind()),this.contextMenuItems&&this.contextMenuModule&&(this.contextMenuModule.getContextMenu().ej2_instances[0].enableRtl=r.enableRtl,this.contextMenuModule.getContextMenu().ej2_instances[0].dataBind()),this.showColumnMenu&&this.columnMenuModule&&(this.columnMenuModule.getColumnMenu().ej2_instances[0].enableRtl=r.enableRtl,this.columnMenuModule.getColumnMenu().ej2_instances[0].dataBind()),"FilterBar"===this.filterSettings.type&&this.filterSettings.showFilterBarOperator&&this.refreshHeader(),this.notify("rtl-updated",{});break;case"enableAltRow":this.renderModule.refresh();break;case"allowResizing":this.headerModule.refreshUI(),this.updateResizeLines();break;case"rowHeight":this.rowHeight?(0,l.cn)([this.element],"e-grid-min-height"):(0,l.IV)([this.element],"e-grid-min-height"),this.renderModule.refresh(),this.headerModule.refreshUI();break;case"gridLines":this.updateGridLines();break;case"showColumnMenu":this.headerModule.refreshUI(),this.notify(X,{module:"columnMenu",enable:!0});break;case"columnMenuItems":this.notify(X,{module:"columnMenu",enable:this.columnMenuItems});break;case"contextMenuItems":this.notify(X,{module:"contextMenu",enable:this.contextMenuItems});break;case"showColumnChooser":this.notify(X,{module:"columnChooser",enable:this.showColumnChooser});break;case"filterSettings":this.updateStackedFilter(),this.notify(Se,{module:"filter",properties:r.filterSettings});break;case"searchSettings":this.notify(Se,{module:"search",properties:r.searchSettings});break;case"sortSettings":this.notify(Se,{module:"sort"});break;case"selectionSettings":this.notify(Se,{module:"selection",properties:r.selectionSettings});break;case"editSettings":this.notify(Se,{module:"edit",properties:r.editSettings});break;case"allowTextWrap":case"textWrapSettings":this.allowTextWrap?this.applyTextWrap():this.removeTextWrap(),this.notify(Be,{case:"textwrap",isModeChg:"textWrapSettings"===i});break;case"dataSource":var o=this.getDataModule().getState();if(Object.getPrototypeOf(r).deepWatch)for(var a=this.getPrimaryKeyFieldNames()[0],h=0,d=Object.keys(r.dataSource);h<d.length;h++)this.setRowData((0,l.NA)(a,this.dataSource[d[h]]),this.dataSource[d[h]]);else if(o.isPending){var p=(0,l.le)(this.dataSource)?[]:this.dataSource.result,c=o.group||[];for(h=0;h<c.length;h++)p=z.j4.group(p,c[h],o.aggregates||[]);this.dataSource={result:p,count:this.dataSource.count,aggregates:this.dataSource.aggregates},this.getDataModule().setState({}),o.resolver(this.dataSource)}else this.getDataModule().setState({isDataChanged:!1}),this.notify(Ci,{}),n||(this.renderModule.refresh(),this.isCheckBoxSelection&&this.notify(zn,{}));this.scrollRefresh();break;case"enableHover":(r.enableHover?l.cn:l.IV)([this.element],"e-gridhover");break;case"selectedRowIndex":this.isSelectedRowIndexUpdating||this.selectRow(r.selectedRowIndex),this.isSelectedRowIndexUpdating=!1;break;case"resizeSettings":this.widthService.setWidthToTable();break;case"enableAdaptiveUI":this.notify(Ti,{});break;case"rowRenderingMode":this.enableVerticalRendering(),this.notify("row-mode-change",{}),this.refresh();break;case"enableStickyHeader":this.scrollModule.addStickyListener(r.enableStickyHeader)}},e.prototype.maintainSelection=function(i){var r=this;if(-1!==i){var n=function(){r.selectRow(i),r.off(ee,n)};this.on(ee,n,this)}},e.prototype.setProperties=function(i,r){s.prototype.setProperties.call(this,i,r),i.filterSettings&&this.filterModule&&r&&this.filterModule.refreshFilter()},e.prototype.setTablesCount=function(){var i=this.getFrozenColumns(),r=this.getFrozenLeftColumnsCount(),n=this.getFrozenRightColumnsCount();!i||r||n?!i&&(r||n)&&(r&&!n||n&&!r?this.tablesCount=2:r&&n&&(this.tablesCount=3)):this.tablesCount=2},e.prototype.getTablesCount=function(){return this.tablesCount},e.prototype.updateDefaultCursor=function(){var i=[].slice.call(this.getHeaderContent().querySelectorAll(".e-headercell:not(.e-stackedheadercell)")),r=[].slice.call(this.getHeaderContent().getElementsByClassName("e-stackedheadercell")),n=this.getColumns();if(this.enableColumnVirtualization&&this.getFrozenColumns()){var o=this.contentModule.getHeaderCells();i=o.length?o:i}for(var a=0;a<i.length;a++){(this.allowGrouping||this.allowReordering||this.allowSorting)&&i[a].classList.add(n[a].allowReordering&&n[a].allowSorting&&n[a].allowGrouping?"e-mousepointer":"e-defaultcursor")}for(var d=0;d<r.length;d++)this.allowReordering&&r[d].classList.add("e-mousepointer")},e.prototype.updateColumnModel=function(i){for(var r=0,n=i.length;r<n;r++)i[r].columns?this.updateColumnModel(i[r].columns):this.columnModel.push(i[r]);this.updateColumnLevelFrozen(),this.updateFrozenColumns(),this.updateLockableColumns()},e.prototype.updateColumnLevelFrozen=function(){var i=this.columnModel,r=[],n=[],o=[];if(this.frozenLeftCount||this.frozenRightCount){for(var a=0,h=i.length;a<h;a++){var d=i[a];"Left"===d.freeze?(d.freezeTable=te,r.push(d)):"Right"===d.freeze?(d.freezeTable=Q,n.push(d)):(d.freezeTable="movable",o.push(d))}this.columnModel=r.concat(o).concat(n)}},e.prototype.updateFrozenColumns=function(){if(!this.frozenLeftCount&&!this.frozenRightCount)for(var i=this.columnModel,r=this.frozenColumns,n=this.getFrozenColumns(),o=0,a=0,h=i.length;a<h;a++){var d=i[a];r&&(d.freezeTable=a<r?te:"movable"),d.isFrozen&&a>=r?(d.freezeTable=te,i.splice(this.frozenColumns+o,0,i.splice(a,1)[0]),o++):n&&!r&&(d.freezeTable="movable")}},e.prototype.getFrozenLeftCount=function(){return this.getFrozenColumns()||this.getFrozenLeftColumnsCount()},e.prototype.isFrozenGrid=function(){return 0!==this.getFrozenColumns()||0!==this.getFrozenLeftColumnsCount()||0!==this.getFrozenRightColumnsCount()},e.prototype.getFrozenMode=function(){return this.frozenName},e.prototype.updateLockableColumns=function(){for(var i=this.columnModel,r=0,n=0,o=this.getFrozenColumns(),a=0;a<i.length;a++)i[a].lockColumn&&(a<o?(i.splice(r,0,i.splice(a,1)[0]),r++):(i.splice(o+n,0,i.splice(a,1)[0]),n++))},e.prototype.checkLockColumns=function(i){for(var r=0;r<i.length;r++)i[r].columns?this.checkLockColumns(i[r].columns):i[r].lockColumn&&this.lockcolPositionCount++},e.prototype.getColumns=function(i){var r=this,n=this.inViewIndexes.map(function(d){return d-r.groupSettings.columns.length}).filter(function(d){return d>-1}),o=n.length;(!this.enableColumnVirtualization||(0,l.le)(this.columnModel)||0===this.columnModel.length||i)&&(this.columnModel=[],this.updateColumnModel(this.columns));var a=0===o?this.columnModel:this.columnModel.slice(n[0],n[o-1]+1);return this.contentModule&&this.enableColumnVirtualization&&this.isFrozenGrid()&&n.length&&n[0]>0&&(a=this.contentModule.ensureFrozenCols(a)),a},e.prototype.getStackedHeaderColumnByHeaderText=function(i,r){for(var n=0;n<r.length;n++){var o=r[n];if(o.field===i||o.headerText===i){this.stackedColumn=o;break}o.columns&&this.getStackedHeaderColumnByHeaderText(i,o.columns)}return this.stackedColumn},e.prototype.getColumnIndexesInView=function(){return this.inViewIndexes},e.prototype.getQuery=function(){return this.query},e.prototype.getLocaleConstants=function(){return this.defaultLocale},e.prototype.setColumnIndexesInView=function(i){this.inViewIndexes=i},e.prototype.getVisibleColumns=function(){return this.getCurrentVisibleColumns()},e.prototype.getHeaderContent=function(){return this.headerModule.getPanel()},e.prototype.setGridHeaderContent=function(i){this.headerModule.setPanel(i)},e.prototype.getContentTable=function(){return this.contentModule.getTable()},e.prototype.setGridContentTable=function(i){this.contentModule.setTable(i)},e.prototype.getContent=function(){return this.contentModule.getPanel()},e.prototype.setGridContent=function(i){this.contentModule.setPanel(i)},e.prototype.getHeaderTable=function(){return this.headerModule.getTable()},e.prototype.setGridHeaderTable=function(i){this.headerModule.setTable(i)},e.prototype.getFooterContent=function(){return this.footerElement=this.element.getElementsByClassName(Rt)[0],this.footerElement},e.prototype.getFooterContentTable=function(){return this.footerElement=this.element.getElementsByClassName(Rt)[0],this.footerElement.firstChild.firstChild},e.prototype.getPager=function(){return this.gridPager},e.prototype.setGridPager=function(i){this.gridPager=i},e.prototype.getRowByIndex=function(i){return this.contentModule.getRowByIndex(i)},e.prototype.getMovableRowByIndex=function(i){return this.contentModule.getMovableRowByIndex(i)},e.prototype.getFrozenRowByIndex=function(i){return this.getFrozenDataRows()[i]},e.prototype.getRows=function(){return this.contentModule.getRowElements()},e.prototype.getFrozenRightRowByIndex=function(i){return this.contentModule.getFrozenRightRowByIndex(i)},e.prototype.getRowInfo=function(i){var r=i,n={target:i};if(!(0,l.le)(i)&&(0,l.le)(w(r,"e-detailrowcollapse")&&(0,l.le)(w(r,"e-recordplusexpand")))){var o=(0,l.oq)(r,"."+N);if(!o){var a=(0,l.oq)(r,"."+G);if(!(0,l.le)(a)&&!a.classList.contains("e-addedrow")){var h=this.getRowObjectFromUID(a.getAttribute("data-uid")),d=parseInt(a.getAttribute(O),10);n={row:a,rowData:h.data,rowIndex:d}}return n}var p=parseInt(o.getAttribute(ce),10);if(!(0,l.le)(o)&&!isNaN(p)){var c=(0,l.oq)(o,"."+G),u=(d=parseInt(c.getAttribute(O),10),this.getFrozenColumns()),f=this.columnModel[p].getFreezeTableName(),g=this.contentModule.getRows(),v=p+this.getIndentCount();this.isFrozenGrid()&&(f===te?g=this.contentModule.getRows():"movable"===f?(v=p-u-this.frozenLeftCount,g=this.contentModule.getMovableRows()):f===Q&&(v=p-(this.frozenLeftCount+this.movableCount),g=this.contentModule.getFrozenRightRows()));var m=g.filter(function(S){return S.uid===c.getAttribute("data-uid")}),C={},b=void 0;Object.keys(m).length&&(C=m[0].data,b=m[0].cells[v].column),n={cell:o,cellIndex:p,row:c,rowIndex:d,rowData:C,column:b,target:i}}}return n},e.prototype.getMovableRows=function(){return this.contentModule.getMovableRowElements()},e.prototype.getFrozenRightRows=function(){return this.contentModule.getFrozenRightRowElements()},e.prototype.getDataRows=function(){return this.getAllDataRows()},e.prototype.getAllDataRows=function(i){if((0,l.le)(this.getContentTable().querySelector(I)))return[];var r=this.isFrozenGrid()?this.getFrozenLeftContentTbody():this.getContentTable().querySelector(I),n=[].slice.call(r.children);if(this.frozenRows){var o=this.isFrozenGrid()?this.getHeaderContent().querySelector("."+Xe).querySelector(I):this.getHeaderTable().querySelector(I),a=[].slice.call(o.children);n=this.addMovableRows(a,n)}return this.generateDataRows(n,i)},e.prototype.addMovableRows=function(i,r){for(var n=0,o=r.length;n<o;n++)i.push(r[n]);return i},e.prototype.generateDataRows=function(i,r){for(var n=[],o=0,a=i.length;o<a;o++)i[o].classList.contains(G)&&(!i[o].classList.contains("e-hiddenrow")||r)&&(this.isCollapseStateEnabled()?n[parseInt(i[o].getAttribute("data-rowindex"),10)]=i[o]:n.push(i[o]));return n},e.prototype.getMovableDataRows=function(){return this.getAllMovableDataRows()},e.prototype.getAllMovableDataRows=function(i){if(!this.isFrozenGrid())return[];var r=[].slice.call(this.getContent().querySelector("."+_).querySelector(I).children);if(this.frozenRows){var n=[].slice.call(this.getHeaderContent().querySelector("."+W).querySelector(I).children);r=this.addMovableRows(n,r)}return this.generateDataRows(r,i)},e.prototype.getFrozenDataRows=function(){return this.getAllFrozenDataRows()},e.prototype.getAllFrozenDataRows=function(i){var r=[].slice.call(this.getContent().querySelector("."+He).querySelector(I).children);if(this.frozenRows){var n=[].slice.call(this.getHeaderContent().querySelector("."+Xe).querySelector(I).children);r=this.addMovableRows(n,r)}return this.generateDataRows(r,i)},e.prototype.getFrozenRightDataRows=function(){return this.getAllFrozenRightDataRows()},e.prototype.getAllFrozenRightDataRows=function(i){if("Right"!==this.getFrozenMode()&&"Left-Right"!==this.getFrozenMode())return[];var r=[].slice.call(this.getContent().querySelector(".e-frozen-right-content").querySelector(I).children);if(this.frozenRows){var n=[].slice.call(this.getHeaderContent().querySelector(".e-frozen-right-header").querySelector(I).children);r=this.addMovableRows(n,r)}return this.generateDataRows(r,i)},e.prototype.setCellValue=function(i,r,n){var a="data",h="index",p="Right"===this.getFrozenMode(),c=this.getPrimaryKeyFieldNames()[0],u=new Ee(this,this.serviceLocator),f=this.getColumnIndexByField(r),g=this.getColumnByField(r),m=("movable"===g.getFreezeTableName()?this.contentModule.getMovableRows():"frozen-right"===g.getFreezeTableName()?this.getFrozenRightRowsObject():this.contentModule.getRows()).filter(function(L){return(0,l.NA)(c,L.data)===i})[0],C=m?this.element.querySelector("[data-uid="+m.uid+"]"):null;if(!(0,l.le)(C)){(0,l.sO)(r,n,m[a]);var b=this.getFrozenLeftColumnsCount()||this.getFrozenColumns(),y=this.getMovableColumnsCount();this.isRowDragable()&&!p&&b++;var S=b+y,R=this.enableVirtualization?C.children[f]:this.getCellFromIndex(m[h],f);if(!(0,l.le)(R)){var F="movable"===g.getFreezeTableName()?b:"frozen-right"===g.getFreezeTableName()?S:0;this.groupSettings.columns.length&&(f+=this.groupSettings.columns.length),(this.childGrid||this.detailTemplate)&&f++,this.isRowDragable()&&!p&&f++,u.refreshTD(R,m.cells[f-F],m[a],{index:m[h]}),this.aggregates.length>0&&(this.notify(ut,{}),this.groupSettings.columns.length>0&&this.notify(wt,{})),!(0,l.le)(m)&&!(0,l.le)(m.changes)&&(m.changes[r]=n),this.trigger(Wr,{cell:R,column:g,data:m[a]})}}},e.prototype.refreshReactColumnTemplateByUid=function(i){var r=this;this.isReact&&this.clearTemplate(["columnTemplate"],void 0,function(){for(var n="cells",a=!(!r.childGrid||!r.element.querySelectorAll(".e-childgrid").length),h=a?r.getContentTable().querySelectorAll(".e-row"):r.getDataRows(),d=r.getIndentCount(),p=0,c=!1,f=(r.getNormalizedColumnIndex(i),0);f<h.length;f++){var g=r.getRowObjectFromUID(h[f].getAttribute("data-uid"));if(a&&!g&&w(h[f],"e-childgrid")){var v=w(h[f],"e-childgrid").ej2_instances[0];g=v.getRowObjectFromUID(h[f].getAttribute("data-uid")),p=v.getIndentCount(),c=!0}for(var m=0;m<g[n].length;m++){var C=g[n][m];if(C.isTemplate){var b=new Ee(r,r.serviceLocator),y=a?h[f].children[C.index+(c?p:d)]:r.getCellFromIndex(f,m-d);b.refreshTD(y,C,g.data,{index:g.index})}}c=!1}})},e.prototype.refreshReactHeaderTemplateByUid=function(i){if(this.isReact)for(var n=this.headerModule.rows,o=this.getNormalizedColumnIndex(i),a=0;a<n.length;a++){var h=n[a].cells[o];if(h&&h.column.uid===i){var d=new bo(this,this.serviceLocator),p=w(this.element.querySelectorAll("[e-mappinguid="+i+"]")[0],"e-templatecell");d.refresh(h,p)}}},e.prototype.setRowData=function(i,r){var o=this.contentModule.getRows(),a=this.getPrimaryKeyFieldNames()[0];this.groupSettings.columns.length>0&&this.aggregates.length>0&&(o=o.filter(function(m){return m.isDataRow}));var h=o.filter(function(m){return(0,l.NA)(a,m.data)===i})[0],d=h?[].slice.call(this.element.querySelectorAll("[data-uid="+h.uid+"]")):void 0;if(!(0,l.le)(h)&&d.length){if(h.changes=r,this.isFrozenGrid()){var p=w(d[0],"e-table"),c=p.parentElement.matches(".e-frozen-left-header,.e-frozen-left-content")?"left":p.parentElement.matches(".e-frozen-right-header,.e-frozen-right-content")?"right":"movable",u=this.getMovableRowsObject()[h.index];if(this.setFrozenRowData(u,r),"left"===c){var f=this.getRowsObject()[h.index];this.setFrozenRowData(f,r)}if("right"===c||this.frozenRightColumns.length>0){var g=this.getFrozenRightRowsObject()[h.index];this.setFrozenRowData(g,r)}}else if(this.frozenRows){var v=this.getRowsObject()[h.index];this.setFrozenRowData(v,r)}else this.setFrozenRowData(h,r);this.aggregates.length>0&&(this.notify(ut,{}),this.groupSettings.columns.length>0&&this.notify(wt,{}))}},e.prototype.setFrozenRowData=function(i,r){var n=new ke(this.serviceLocator,null,this);i.changes=r,function(s,e,t){for(var i=0;i<e.length;i++)(0,l.sO)(e[i].field,Mt(e[i],t),s.foreignKeyData);var r=s.cells;for(i=0;i<r.length;i++)r[i].isForeignKey&&(0,l.sO)("foreignKeyData",(0,l.NA)(r[i].column.field,s.foreignKeyData),r[i])}(i,this.getForeignKeyColumns(),i.changes),n.refresh(i,this.getColumns(),!0)},e.prototype.getCellFromIndex=function(i,r){return is(this,this.getColumnByIndex(r),i,r)},e.prototype.getMovableCellFromIndex=function(i,r){if(!("Left-Right"===this.frozenName&&r>=this.movableCount)){var n=this.getFrozenColumns()||this.getFrozenLeftColumnsCount();return this.getMovableDataRows()[i]&&this.getMovableDataRows()[i].getElementsByClassName(N)[r-n]}},e.prototype.getFrozenRightCellFromIndex=function(i,r){var n=this.getFrozenLeftColumnsCount()+this.getMovableColumnsCount(),o=this.getFrozenRightDataRows();return o[i]&&o[i].getElementsByClassName(N)[r-n]},e.prototype.getColumnHeaderByIndex=function(i){return this.getHeaderTable().getElementsByClassName("e-headercell")[i]},e.prototype.getMovableColumnHeaderByIndex=function(i){var r=this.getFrozenColumns()||this.getFrozenLeftColumnsCount();return this.getMovableVirtualHeader().getElementsByClassName("e-headercell")[i-r]},e.prototype.getFrozenRightColumnHeaderByIndex=function(i){var r=this.getFrozenLeftColumnsCount()+this.getMovableColumnsCount();return this.getFrozenRightHeader().getElementsByClassName("e-headercell")[i-r]},e.prototype.getFrozenLeftColumnHeaderByIndex=function(i){return this.getFrozenVirtualHeader().getElementsByClassName("e-headercell")[i]},e.prototype.getRowObjectFromUID=function(i,r,n){var o=this.contentModule.getRows(),a=this.rowObject(o,i);return this.isFrozenGrid()&&(!a||r||n)?((!(a=this.rowObject(this.contentModule.getMovableRows(),i))&&"Left-Right"===this.getFrozenMode()||n)&&(a=this.rowObject(this.contentModule.getFrozenRightRows(),i)),a):((0,l.le)(a)&&this.enableVirtualization&&this.groupSettings.columns.length>0&&(a=this.rowObject(this.vRows,i)),a)},e.prototype.rowObject=function(i,r){if(i)for(var n=0,o=i;n<o.length;n++){var a=o[n];if(a.uid===r)return a}return null},e.prototype.getRowsObject=function(){return this.contentModule.getRows()},e.prototype.getMovableRowsObject=function(){var i=[];return this.isFrozenGrid()&&(i=this.contentModule.getMovableRows()),i},e.prototype.getFrozenRightRowsObject=function(){var i=[];return("Right"===this.getFrozenMode()||"Left-Right"===this.getFrozenMode())&&(i=this.contentModule.getFrozenRightRows()),i},e.prototype.getColumnHeaderByField=function(i){var r=this.getColumnByField(i);return r?this.getColumnHeaderByUid(r.uid):void 0},e.prototype.getColumnHeaderByUid=function(i){var r=this.getHeaderContent().querySelector("[e-mappinguid="+i+"]");return r?r.parentElement:void 0},e.prototype.getColumnByIndex=function(i){var r;return this.getColumns().some(function(n,o){return r=n,o===i}),r},e.prototype.getColumnByField=function(i){return _t(this.getColumns(),function(r){if(r.field===i)return r})[0]},e.prototype.getColumnIndexByField=function(i){for(var r=this.getColumns(),n=0;n<r.length;n++)if(r[n].field===i)return n;return-1},e.prototype.getColumnByUid=function(i){return _t(this.getColumns().concat(this.getStackedColumns(this.columns)),function(r){if(r.uid===i)return r})[0]},e.prototype.getStackedColumns=function(i,r){void 0===r&&(r=[]);for(var n=0,o=i;n<o.length;n++){var a=o[n];a.columns&&(r.push(a),this.getStackedColumns(a.columns,r))}return r},e.prototype.getColumnIndexByUid=function(i){var r=_t(this.getColumns(),function(n,o){if(n.uid===i)return o})[0];return(0,l.le)(r)?-1:r},e.prototype.getUidByColumnField=function(i){return _t(this.getColumns(),function(r){if(r.field===i)return r.uid})[0]},e.prototype.getNormalizedColumnIndex=function(i){return this.getColumnIndexByUid(i)+this.getIndentCount()},e.prototype.getIndentCount=function(){var i=0;return this.allowGrouping&&(i+=this.groupSettings.columns.length),this.isDetail()&&i++,this.isRowDragable()&&(0,l.le)(this.rowDropSettings.targetID)&&i++,i},e.prototype.getColumnFieldNames=function(){for(var r,i=[],n=0,o=this.getColumns().length;n<o;n++)(r=this.getColumns()[n]).visible&&i.push(r.field);return i},e.prototype.getRowTemplate=function(){return this.rowTemplateFn},e.prototype.getDetailTemplate=function(){return this.detailTemplateFn},e.prototype.getEditTemplate=function(){return this.editTemplateFn},e.prototype.getEditHeaderTemplate=function(){return this.editHeaderTemplateFn},e.prototype.getEditFooterTemplate=function(){return this.editFooterTemplateFn},e.prototype.getPrimaryKeyFieldNames=function(){for(var i=[],r=0;r<this.columnModel.length;r++)this.columnModel[r].isPrimaryKey&&i.push(this.columnModel[r].field);return i},e.prototype.refresh=function(){this.isDestroyed||(this.isManualRefresh=!0,this.headerModule.refreshUI(),this.updateStackedFilter(),this.renderModule.refresh())},e.prototype.refreshHeader=function(){this.headerModule.refreshUI()},e.prototype.getSelectedRows=function(){return this.selectionModule?this.selectionModule.selectedRecords:[]},e.prototype.getSelectedRowIndexes=function(){return this.selectionModule?this.selectionModule.selectedRowIndexes:[]},e.prototype.getSelectedRowCellIndexes=function(){return this.selectionModule?this.selectionModule.selectedRowCellIndexes:[]},e.prototype.getSelectedRecords=function(){return this.selectionModule?this.selectionModule.getSelectedRecords():[]},e.prototype.getSelectedColumnsUid=function(){var i=this,r=[];return this.selectionModule&&this.selectionModule.selectedColumnsIndexes.filter(function(n){return r.push(i.getColumns()[n].uid)}),r},e.prototype.getDataModule=function(){return this.renderModule.data},e.prototype.showColumns=function(i,r){this.showHider.show(i,r=r||"headerText")},e.prototype.hideColumns=function(i,r){this.showHider.hide(i,r=r||"headerText")},e.prototype.getFrozenColumns=function(){return this.frozenColumns+this.getFrozenCount(this.columns,0,0)},e.prototype.getFrozenRightColumnsCount=function(){return this.frozenRightCount},e.prototype.getFrozenLeftColumnsCount=function(){return this.frozenLeftCount},e.prototype.getMovableColumnsCount=function(){return this.movableCount},e.prototype.setFrozenCount=function(){this.frozenLeftCount=this.frozenRightCount=this.movableCount=0,this.visibleFrozenLeft=this.visibleFrozenRight=this.visibleMovable=0,this.frozenLeftColumns=[],this.frozenRightColumns=[],this.movableColumns=[],this.splitFrozenCount(this.columns),this.frozenColumns&&(this.frozenLeftCount||this.frozenRightCount)&&this.setProperties({frozenColumns:0},!0),this.setTablesCount(),this.frozenName=this.frozenLeftCount&&!this.frozenRightCount?"Left":this.frozenRightCount&&!this.frozenLeftCount?"Right":this.frozenLeftCount&&this.frozenRightCount?"Left-Right":this.frozenColumns&&this.frozenRows?"Left":void 0},e.prototype.getVisibleFrozenLeftCount=function(){return this.visibleFrozenLeft},e.prototype.getVisibleFrozenRightCount=function(){return this.visibleFrozenRight},e.prototype.getVisibleMovableCount=function(){return this.visibleMovable},e.prototype.getFrozenRightColumns=function(){return this.frozenRightColumns},e.prototype.getFrozenLeftColumns=function(){return this.frozenLeftColumns},e.prototype.getMovableColumns=function(){return this.movableColumns},e.prototype.splitFrozenCount=function(i){for(var r=0;r<i.length;r++)i[r].columns?this.splitFrozenCount(i[r].columns):"Right"===i[r].freeze?(!1!==i[r].visible&&this.visibleFrozenRight++,this.frozenRightColumns.push(i[r]),this.frozenRightCount++):"Left"===i[r].freeze?(!1!==i[r].visible&&this.visibleFrozenLeft++,this.frozenLeftColumns.push(i[r]),this.frozenLeftCount++):(!1!==i[r].visible&&this.visibleMovable++,this.movableColumns.push(i[r]),this.movableCount++)},e.prototype.getVisibleFrozenColumns=function(){return this.getVisibleFrozenColumnsCount()+this.getVisibleFrozenCount(this.columns,0)},e.prototype.getFilterUIInfo=function(){return this.filterModule?this.filterModule.getFilterUIInfo():{}},e.prototype.getVisibleFrozenColumnsCount=function(){for(var i=0,r=this.columnModel,n=0;n<this.frozenColumns;n++)r[n].visible&&i++;if(this.frozenLeftCount||this.frozenRightCount)for(n=0;n<r.length;n++)r[n].visible&&("Left"===r[n].freeze||"Right"===r[n].freeze)&&i++;return i},e.prototype.getVisibleFrozenCount=function(i,r){if(!this.frozenLeftCount&&!this.frozenRightCount)for(var n=0,o=i.length;n<o;n++)i[n].columns?r=this.getVisibleFrozenCount(i[n].columns,r):i[n].isFrozen&&i[n].visible&&r++;return r},e.prototype.getFrozenCount=function(i,r,n){for(var o=0,a=i.length;o<a;o++)i[o].columns?r=this.getFrozenCount(i[o].columns,r,n):(i[o].isFrozen&&n>this.frozenColumns-1&&r++,n++);return r},e.prototype.goToPage=function(i){this.pagerModule&&this.pagerModule.goToPage(i)},e.prototype.updateExternalMessage=function(i){this.pagerModule&&this.pagerModule.updateExternalMessage(i)},e.prototype.sortColumn=function(i,r,n){this.sortModule&&this.sortModule.sortColumn(i,r,n)},e.prototype.clearSorting=function(){this.sortModule&&this.sortModule.clearSorting()},e.prototype.removeSortColumn=function(i){this.sortModule&&this.sortModule.removeSortColumn(i)},e.prototype.clearGridActions=function(){this.setProperties({sortSettings:{columns:[]}},!0),this.setProperties({filterSettings:{columns:[]}},!0),this.setProperties({searchSettings:{key:""}},!0),this.allowGrouping?this.setProperties({groupSettings:{columns:[]}},!1):this.freezeRefresh()},e.prototype.filterByColumn=function(i,r,n,o,a,h,d,p){this.filterModule&&this.filterModule.filterByColumn(i,r,n,o,a,h,d,p)},e.prototype.clearFiltering=function(i){this.filterModule&&this.filterModule.clearFiltering(i)},e.prototype.removeFilteredColsByField=function(i,r){this.filterModule&&this.filterModule.removeFilteredColsByField(i,r)},e.prototype.selectRow=function(i,r){this.selectionModule&&this.selectionModule.selectRow(i,r)},e.prototype.selectRows=function(i){this.selectionModule&&this.selectionModule.selectRows(i)},e.prototype.clearSelection=function(){this.selectionModule&&this.selectionModule.clearSelection()},e.prototype.selectCell=function(i,r){this.selectionModule&&this.selectionModule.selectCell(i,r)},e.prototype.selectCellsByRange=function(i,r){this.selectionModule.selectCellsByRange(i,r)},e.prototype.search=function(i){this.searchModule&&this.searchModule.search(i)},e.prototype.print=function(){this.printModule&&this.printModule.print()},e.prototype.deleteRecord=function(i,r){this.editModule&&this.editModule.deleteRecord(i,r)},e.prototype.startEdit=function(){this.editModule&&this.editModule.startEdit()},e.prototype.endEdit=function(){this.editModule&&this.editModule.endEdit()},e.prototype.closeEdit=function(){this.editModule&&this.editModule.closeEdit()},e.prototype.addRecord=function(i,r){this.editModule&&this.editModule.addRecord(i,r)},e.prototype.deleteRow=function(i){this.editModule&&this.editModule.deleteRow(i)},e.prototype.editCell=function(i,r){this.editModule&&this.editModule.editCell(i,r)},e.prototype.saveCell=function(){this.editModule&&this.editModule.saveCell()},e.prototype.updateCell=function(i,r,n){this.editModule&&this.editModule.updateCell(i,r,n)},e.prototype.updateRow=function(i,r){this.editModule&&this.editModule.updateRow(i,r)},e.prototype.getBatchChanges=function(){return this.editModule?this.editModule.getBatchChanges():{}},e.prototype.enableToolbarItems=function(i,r){this.toolbarModule&&this.toolbarModule.enableItems(i,r)},e.prototype.copy=function(i){this.clipboardModule&&this.clipboardModule.copy(i)},e.prototype.recalcIndentWidth=function(){var i=this;if(this.getHeaderTable().querySelector(".e-emptycell")&&(this.groupSettings.columns.length||this.isDetail()||this.isRowDragable())&&!this.getHeaderTable().querySelector(".e-emptycell").getAttribute("indentRefreshed")&&this.getContentTable()){var r=this.getHeaderTable().querySelector(".e-emptycell").parentElement.offsetWidth,n=[].slice.call(this.getHeaderTable().querySelector(q).childNodes),o=[].slice.call(this.getContentTable().querySelector(q).childNodes),a=r/30,h="Right"===this.getFrozenMode()?this.frozenRightCount:0,d=this.element.offsetWidth,p=function(c,u){if(es(i)){var f=(u/d*100).toFixed(1)+"%";n[c].style.width=f,o[c].style.width=f}else n[c].style.width=u+"px",o[c].style.width=u+"px";i.notify(yi,{index:c,width:u})};for(a>=1&&(r=30/a),r<1&&(r=1),(this.enableColumnVirtualization||this.isAutoGen||this.columns.length===this.groupSettings.columns.length)&&(r=30);h<this.groupSettings.columns.length;)p(h,r),h++;this.isDetail()&&(p(h,r),h++),this.isRowDragable()&&p(h,r),this.isAutoGen=!1,this.getHeaderTable().querySelector(".e-emptycell").setAttribute("indentRefreshed","true")}},e.prototype.resetIndentWidth=function(){if(es(this)&&(this.getHeaderTable().querySelector(".e-emptycell").removeAttribute("indentRefreshed"),this.widthService.setWidthToColumns(),this.recalcIndentWidth()),("auto"===this.width||"string"==typeof this.width&&-1!==this.width.indexOf("%"))&&this.getColumns().filter(function(r){return(!r.width||"auto"===r.width)&&r.minWidth}).length>0){var i=this.widthService.getTableWidth(this.getColumns());this.widthService.setMinwidthBycalculation(i)}this.isFrozenGrid()&&this.widthService&&this.widthService.refreshFrozenScrollbar(),this.allowTextWrap&&"Content"!==this.textWrapSettings.wrapMode&&this.notify(Mi,{})},e.prototype.isRowDragable=function(){return this.allowRowDragAndDrop&&!this.rowDropSettings.targetID},e.prototype.reorderColumns=function(i,r){this.reorderModule&&this.reorderModule.reorderColumns(i,r)},e.prototype.reorderColumnByIndex=function(i,r){this.reorderModule&&this.reorderModule.reorderColumnByIndex(i,r)},e.prototype.reorderColumnByTargetIndex=function(i,r){this.reorderModule&&this.reorderModule.reorderColumnByTargetIndex(i,r)},e.prototype.reorderRows=function(i,r){this.rowDragAndDropModule&&this.rowDragAndDropModule.reorderRows(i,r)},e.prototype.refreshDataSource=function(i){this.notify("refreshdataSource",i)},e.prototype.disableRowDD=function(i){var r=this.getHeaderTable(),n=this.getContentTable(),o=r.querySelectorAll("th.e-rowdragheader, th.e-mastercell"),a=this.getRows(),h=i?"none":"";(0,l.V7)(r.querySelector(q).childNodes[0],{display:h}),(0,l.V7)(n.querySelector(q).childNodes[0],{display:h});for(var d=0;d<this.getRows().length;d++){var p=a[d].firstElementChild;i?(0,l.cn)([p],"e-hide"):(0,l.IV)([p],["e-hide"])}for(var c=0;c<r.querySelectorAll("th.e-rowdragheader, th.e-mastercell").length;c++)p=o[c],i?(0,l.cn)([p],"e-hide"):(0,l.IV)([p],["e-hide"])},e.prototype.autoFitColumns=function(i){this.resizeModule&&this.resizeModule.autoFitColumns(i)},e.prototype.createColumnchooser=function(i,r,n){this.columnChooserModule&&this.columnChooserModule.renderColumnChooser(i,r,n)},e.prototype.initializeServices=function(){this.serviceLocator.register("widthService",this.widthService=new Un(this)),this.serviceLocator.register("cellRendererFactory",new uh),this.serviceLocator.register("rendererFactory",new gh),this.serviceLocator.register("localization",this.localeObj=new l.E7(this.getModuleName(),this.defaultLocale,this.locale)),this.serviceLocator.register("valueFormatter",this.valueFormatterService=new At(this.locale)),this.serviceLocator.register("showHideService",this.showHider=new Ih(this)),this.serviceLocator.register("ariaService",this.ariaService=new Bi),this.serviceLocator.register("focus",this.focusModule=new vh(this))},e.prototype.processModel=function(){var n,o,i=this.groupSettings.columns,r=this.sortSettings.columns;if(this.allowGrouping)for(var a=function(u,f){o=0;for(var g=r.length;o<g;o++)if(r[o].field===i[u]){n=!0;break}if(n?h.allowSorting?h.sortedColumns.push(r[o].field):r[o].direction="Ascending":r.push({field:i[u],direction:"Ascending",isFromGroup:!0}),!h.groupSettings.showGroupedColumn){var v=h.enableColumnVirtualization?h.columns.filter(function(m){return m.field===i[u]})[0]:h.getColumnByField(i[u]);v?v.visible=!1:h.log("initial_action",{moduleName:"group",columnName:i[u]})}},h=this,d=0,p=i.length;d<p;d++)a(d);if(!i.length)for(d=0;d<r.length;d++)this.sortedColumns.push(r[d].field);if(this.rowTemplateFn=Me(this.rowTemplate),this.detailTemplateFn=Me(this.detailTemplate),this.editTemplateFn=Me(this.editSettings.template),this.editHeaderTemplateFn=Me(this.editSettings.headerTemplate),this.editFooterTemplateFn=Me(this.editSettings.footerTemplate),!(0,l.le)(this.parentDetails)){var c=(0,l.le)(this.parentDetails.parentKeyFieldValue)?"undefined":this.parentDetails.parentKeyFieldValue;this.query.where(this.queryString,"equal",c,!0)}this.initForeignColumn()},e.prototype.initForeignColumn=function(){this.isForeignKeyEnabled(this.getColumns())&&this.notify("initForeignKeyColumn",this.getForeignKeyColumns())},e.prototype.enableVerticalRendering=function(){"Vertical"===this.rowRenderingMode?this.element.classList.add("e-row-responsive"):this.element.classList.remove("e-row-responsive")},e.prototype.gridRender=function(){this.updateRTL(),"Vertical"===this.rowRenderingMode&&this.element.classList.add("e-row-responsive"),this.enableHover&&this.element.classList.add("e-gridhover"),l.AR.isDevice&&this.element.classList.add("e-device"),this.rowHeight&&this.element.classList.add("e-grid-min-height"),this.cssClass&&this.element.classList.add(this.cssClass),(0,l.s1)(this.element,["e-responsive","e-default"],[]);var i=this.serviceLocator.getService("rendererFactory");this.headerModule=i.getRenderer(de.Header),this.contentModule=i.getRenderer(de.Content),this.printModule=new Io(this,this.scrollModule),this.clipboardModule=new Dh(this,this.serviceLocator),this.renderModule.render(),this.eventInitializer(),this.createGridPopUpElement(),this.widthService.setWidthToColumns(),this.updateGridLines(),this.applyTextWrap(),this.createTooltip(),this.enableBoxSelection()},e.prototype.dataReady=function(){this.scrollModule.setWidth(),this.scrollModule.setHeight(),"auto"!==this.height&&this.scrollModule.setPadding()},e.prototype.updateRTL=function(){this.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl")},e.prototype.createGridPopUpElement=function(){var i=this.createElement("div",{className:"e-gridpopup",styles:"display:none;"}),r=this.createElement("div",{className:ie,attrs:{tabIndex:"-1"}});(0,l.R3)([r,this.createElement("div",{className:"e-uptail e-tail"})],i),r.appendChild(this.createElement("span")),(0,l.R3)([r,this.createElement("div",{className:"e-downtail e-tail"})],i),this.element.appendChild(i)},e.prototype.updateGridLines=function(){switch((0,l.s1)(this.element,[],["e-verticallines","e-horizontallines","e-hidelines","e-bothlines"]),this.gridLines){case"Horizontal":this.element.classList.add("e-horizontallines");break;case"Vertical":this.element.classList.add("e-verticallines");break;case"None":this.element.classList.add("e-hidelines");break;case"Both":this.element.classList.add("e-bothlines")}this.updateResizeLines()},e.prototype.updateResizeLines=function(){this.allowResizing&&"Vertical"!==this.gridLines&&"Both"!==this.gridLines?this.element.classList.add("e-resize-lines"):this.element.classList.remove("e-resize-lines")},e.prototype.applyTextWrap=function(){if(this.allowTextWrap){var i=[].slice.call(this.element.getElementsByClassName("e-columnheader"));switch(this.textWrapSettings.wrapMode){case"Header":qe(this.element,!1),qe(this.getContent(),!1),qe(i,!0);break;case"Content":qe(this.getContent(),!0),qe(this.element,!1),qe(i,!1);break;default:qe(this.element,!0),qe(this.getContent(),!1),qe(i,!1)}"Content"!==this.textWrapSettings.wrapMode&&this.notify(Mi,{})}},e.prototype.removeTextWrap=function(){qe(this.element,!1),qe([].slice.call(this.element.getElementsByClassName("e-columnheader")),!1),qe(this.getContent(),!1),"Content"!==this.textWrapSettings.wrapMode&&this.notify(Mi,{})},e.prototype.createTooltip=function(){this.toolTipObj=new Ce.u({opensOn:"custom",content:"",cssClass:this.cssClass?this.cssClass:null},this.element)},e.prototype.freezeRefresh=function(){this.isFreezeRefresh=!0,this.enableVirtualization&&(this.pageSettings.currentPage=1),this.componentRefresh()},e.prototype.getTooltipStatus=function(i){var r=this.getHeaderTable(),n="e-gridheader",o=this.createTable(r,n,"header"),a=this.createTable(r,n,"content"),h=i.classList.contains("e-headercell")?o:a,d=i.classList.contains("e-headercell")?"th":"tr";h.querySelector(d).className=i.className,h.querySelector(d).innerHTML=i.innerHTML;var p=h.querySelector(d).getBoundingClientRect().width;return document.body.removeChild(o),document.body.removeChild(a),p>i.getBoundingClientRect().width},e.prototype.mouseMoveHandler=function(i){if(this.isEllipsisTooltip()){var r=w(i.target,"e-ellipsistooltip");if((this.prevElement!==r||"mouseout"===i.type)&&this.toolTipObj.close(),r&&"mouseout"!==i.type&&(!l.AR.isDevice||-1===["A","BUTTON","INPUT"].indexOf(i.target.tagName))){if(r.getAttribute("aria-describedby"))return;this.getTooltipStatus(r)&&(this.toolTipObj.content=r.getElementsByClassName("e-headertext").length?r.getElementsByClassName("e-headertext")[0].innerText:r.innerText,this.prevElement=r,this.getColumns()[parseInt(r.getAttribute(ce),10)].disableHtmlEncode&&(this.toolTipObj.enableHtmlParse=!1),this.toolTipObj.open(r))}}this.hoverFrozenRows(i)},e.prototype.hoverFrozenRows=function(i){if(this.isFrozenGrid()){var r=w(i.target,G);if([].slice.call(this.element.getElementsByClassName("e-frozenhover")).length&&"mouseout"===i.type)for(var n=[].slice.call(this.element.getElementsByClassName("e-frozenhover")),o=0;o<n.length;o++)n[o].classList.remove("e-frozenhover");else if(r)for((n=[].slice.call(this.element.querySelectorAll('tr[data-rowindex="'+r.getAttribute(O)+'"]'))).splice(n.indexOf(r),1),o=0;o<n.length;o++)"true"!==r.getAttribute("aria-selected")&&n[o]?n[o].classList.add("e-frozenhover"):n[o]&&n[o].classList.remove("e-frozenhover")}},e.prototype.isEllipsisTooltip=function(){var i=this.getColumns();if("EllipsisWithTooltip"===this.clipMode)return!0;for(var r=0;r<i.length;r++)if("EllipsisWithTooltip"===i[r].clipMode)return!0;return!1},e.prototype.scrollHandler=function(){this.isEllipsisTooltip()&&this.toolTipObj.close()},e.prototype.createTable=function(i,r,n){var o=this.createElement("div");o.className=this.element.className,o.style.cssText="display: inline-block;visibility:hidden;position:absolute";var a=this.createElement("div");a.className=r;var h=this.createElement("table",{attrs:{role:"grid"}});h.className=i.className,h.style.cssText="table-layout: auto;width: auto";var d="header"===n?"th":"td",p=this.createElement("tr",{attrs:{role:"row"}}),c=this.createElement(d);return p.appendChild(c),h.appendChild(p),a.appendChild(h),o.appendChild(a),document.body.appendChild(o),o},e.prototype.onKeyPressed=function(i){("tab"===i.action||"shiftTab"===i.action)&&this.toolTipObj.close()},e.prototype.wireEvents=function(){l.bi.add(this.element,"click",this.mouseClickHandler,this),l.bi.add(this.element,"touchend",this.mouseClickHandler,this),l.bi.add(this.element,"focusout",this.focusOutHandler,this),l.bi.add(this.element,"dblclick",this.dblClickHandler,this),l.bi.add(this.element,"keydown",this.keyPressHandler,this),l.bi.add(window,"resize",this.resetIndentWidth,this),this.allowKeyboard&&(this.element.tabIndex=-1===this.element.tabIndex?0:this.element.tabIndex),this.keyboardModule=new l.nv(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"}),l.bi.add(this.getContent().firstElementChild,"scroll",this.scrollHandler,this),l.bi.add(this.element,"mousemove",this.mouseMoveHandler,this),l.bi.add(this.element,"mouseout",this.mouseMoveHandler,this),l.bi.add(this.getContent(),"touchstart",this.tapEvent,this),l.bi.add(document.body,"keydown",this.keyDownHandler,this)},e.prototype.unwireEvents=function(){l.bi.remove(this.element,"click",this.mouseClickHandler),l.bi.remove(this.element,"touchend",this.mouseClickHandler),l.bi.remove(this.element,"focusout",this.focusOutHandler),l.bi.remove(this.element,"dblclick",this.dblClickHandler),l.bi.remove(this.getContent().firstElementChild,"scroll",this.scrollHandler),l.bi.remove(this.element,"mousemove",this.mouseMoveHandler),l.bi.remove(this.element,"mouseout",this.mouseMoveHandler),l.bi.remove(this.element,"keydown",this.keyPressHandler),l.bi.remove(this.getContent(),"touchstart",this.tapEvent),l.bi.remove(document.body,"keydown",this.keyDownHandler),l.bi.remove(window,"resize",this.resetIndentWidth)},e.prototype.addListener=function(){this.isDestroyed||(this.on(Ge,this.dataReady,this),this.on(ee,this.recalcIndentWidth,this),this.on(ue,this.recalcIndentWidth,this),this.dataBoundFunction=this.refreshMediaCol.bind(this),this.addEventListener(Te,this.dataBoundFunction),this.on(oe,this.onKeyPressed,this))},e.prototype.removeListener=function(){this.isDestroyed||(this.off(Ge,this.dataReady),this.off(ee,this.recalcIndentWidth),this.off(ue,this.recalcIndentWidth),this.removeEventListener(Te,this.dataBoundFunction),this.off(oe,this.onKeyPressed))},e.prototype.getCurrentViewRecords=function(){return he(this)?(0,l.le)(this.currentViewData.records)?this.currentViewData:this.currentViewData.records:this.groupSettings.enableLazyLoading?this.currentViewData:this.allowGrouping&&this.groupSettings.columns.length&&this.currentViewData.length&&this.currentViewData.records?this.currentViewData.records:this.currentViewData},e.prototype.mouseClickHandler=function(i){if(!(this.isChildGrid(i)||w(i.target,"e-gridpopup")&&i.touches||this.element.getElementsByClassName("e-cloneproperties").length||this.checkEdit(i))&&((this.allowRowDragAndDrop||!w(i.target,ae)&&"TD"!==i.target.tagName)&&(this.allowGrouping||this.allowReordering||!w(i.target,"e-gridheader"))||!i.touches)){w(i.target,"e-gridheader")&&this.allowRowDragAndDrop&&!w(i.target,"e-filterbarcell")&&i.preventDefault();var r=this.getRowInfo(i.target);r.cancel=!1;var o=!1,a=(0,l.oq)(i.target,"tr");if(a&&a.getAttribute("data-uid")){var h=this.getRowObjectFromUID(a.getAttribute("data-uid"));o=!!h&&h.isDataRow}o&&this.trigger("recordClick",r),this.notify(xe,i)}},e.prototype.checkEdit=function(i){var r=w(i.target,G),n="Batch"!==this.editSettings.mode&&this.isEdit&&r&&(r.classList.contains(Re)||r.classList.contains(Ie));return!w(i.target,"e-unboundcelldiv")&&(n||w(i.target,N)&&w(i.target,N).classList.contains("e-editedbatchcell"))},e.prototype.dblClickHandler=function(i){var r=w(i.target,"e-grid");if(!(0,l.le)(r)&&r.id===this.element.id&&!(0,l.oq)(i.target,".e-unboundcelldiv")){var n=!1,o=(0,l.oq)(i.target,"tr");if(o&&o.getAttribute("data-uid")){var a=this.getRowObjectFromUID(o.getAttribute("data-uid"));n=!!a&&a.isDataRow}var h=this.getRowInfo(i.target);h.target=i.target,n&&this.trigger("recordDoubleClick",h),this.notify(bi,i)}},e.prototype.focusOutHandler=function(i){if(!this.isChildGrid(i)){w(i.target,"e-grid")||(this.element.querySelector(".e-gridpopup").style.display="None");var r=this.element.querySelector(".e-cancel:not(.e-hide)");r&&r.classList.add("e-hide");var n=i.relatedTarget,o=n?n.getAttribute("aria-owns"):null;(!n||!w(n,"e-grid")&&(!(0,l.le)(o)&&o)!==i.target.getAttribute("aria-owns"))&&!this.keyPress&&this.isEdit&&!l.AR.isDevice&&("Batch"===this.editSettings.mode&&!((w(n,"e-ddl")||w(n,"e-ddt"))&&w(n,"e-input-group"))&&(this.editModule.saveCell(),this.notify("editNextValCell",{})),"Normal"===this.editSettings.mode&&this.editModule.editFormValidate()),this.keyPress=!1}},e.prototype.isChildGrid=function(i){var r=w(i.target,"e-grid");return!!(r&&r.id!==this.element.id||w(i.target,"e-unboundcelldiv")&&(0,l.le)(r))},e.prototype.mergePersistGridData=function(i){var r=this.getLocalData();if(!(0,l.le)(r)&&""!==r||!(0,l.le)(i)){var n=(0,l.le)(i)?JSON.parse(r):i;this.enableVirtualization&&n.pageSettings&&(n.pageSettings.currentPage=1);var o=Object.keys(n);this.isProtectedOnChange=!0;for(var a=0,h=o;a<h.length;a++){var d=h[a];"object"!=typeof this[d]||(0,l.le)(this[d])?this[d]=n[d]:Array.isArray(this[d])&&"columns"===d?(Mr(this[d]),this.mergeColumns(n[d],this[d]),this[d]=n[d]):(0,l.l7)(this[d],n[d])}this.isProtectedOnChange=!1}},e.prototype.mergeColumns=function(i,r){for(var n=i,o=function(d){var p=r.filter(function(c){return c.index===n[d].index})[0];(0,l.le)(p)||(p.columns&&p.columns.length?(a.mergeColumns(n[d].columns,p.columns),n[d]=(0,l.l7)(p,n[d],{},!0)):n[d]=(0,l.l7)(p,n[d],{},!0))},a=this,h=0;h<n.length;h++)o(h)},e.prototype.isDetail=function(){return!(0,l.le)(this.detailTemplate)||!(0,l.le)(this.childGrid)},e.prototype.isCommandColumn=function(i){var r=this;return i.some(function(n){return n.columns?r.isCommandColumn(n.columns):!(!n.commands&&!n.commandsTemplate)})},e.prototype.isForeignKeyEnabled=function(i){var r=this;return i.some(function(n){return n.columns?r.isForeignKeyEnabled(n.columns):!(!n.dataSource||!n.foreignKeyValue)})},e.prototype.keyPressHandler=function(i){var r=(0,l.l7)(i,{cancel:!1});this.trigger("keyPressed",r),!0===r.cancel&&i.stopImmediatePropagation()},e.prototype.keyDownHandler=function(i){if(i.altKey){if(74===i.keyCode&&(this.keyA?(this.notify(xn,{target:i.target,collapse:!1}),this.keyA=!1):(this.focusModule&&this.focusModule.currentInfo&&this.focusModule.currentInfo.element&&((0,l.IV)([this.focusModule.currentInfo.element,this.focusModule.currentInfo.elementToFocus],["e-focused","e-focus"]),this.focusModule.currentInfo.element.tabIndex=-1),this.element.classList.contains("e-childgrid")||this.element.focus())),87===i.keyCode){var r=this.focusModule;if(r){if(!this.currentViewData.length)return;r.focusContent(),r.addOutline()}}65===i.keyCode&&(this.keyA=!0),72===i.keyCode&&this.keyA&&(this.notify(xn,{target:i.target,collapse:!0}),this.keyA=!1)}13===i.keyCode&&this.notify(gr,i)},e.prototype.keyActionHandler=function(i){this.isChildGrid(i)||this.isEdit&&"escape"!==i.action&&"enter"!==i.action&&"shiftEnter"!==i.action&&"tab"!==i.action&&"shiftTab"!==i.action||(this.keyPress=!0,this.allowKeyboard&&("ctrlPlusP"===i.action&&(i.preventDefault(),this.print()),this.notify(oe,i)))},e.prototype.setInjectedModules=function(i){this.injectedModules=i},e.prototype.updateColumnObject=function(){pi(this.columns,this.enableColumnVirtualization,this),Mr(this.columns),this.initForeignColumn(),this.notify(qt,{})},e.prototype.getForeignKeyColumns=function(){return this.getColumns().filter(function(i){return i.isForeignColumn()})},e.prototype.getRowHeight=function(){return this.rowHeight?this.rowHeight:function(s){if(void 0!==Ni)return Ni;var e=(0,l.az)("table",{className:Z,styles:"visibility: hidden",attrs:{role:"grid"}});e.innerHTML='<tr><td class="e-rowcell">A<td></tr>',s.appendChild(e);var t=e.querySelector("td").getBoundingClientRect();return s.removeChild(e),Ni=Math.ceil(t.height)}(this.element)},e.prototype.refreshColumns=function(){this.setFrozenCount();var i=this.getContent().querySelector(".e-frozen-left-content"),r=this.getContent().querySelector(".e-frozen-right-content"),n=!this.frozenRightCount&&!this.frozenLeftCount;if(0===this.getFrozenColumns()&&(!i&&this.frozenLeftCount||!r&&this.frozenRightCount||i&&!this.frozenLeftCount||r&&!this.frozenRightCount))this.tableIndex=0,this.tablesCount=1,this.enableColumnVirtualization&&(this.columnModel=[],this.updateColumnModel(this.columns)),this.freezeRefresh();else if(n&&(1===this.getFrozenColumns()&&!i||0===this.getFrozenColumns()&&i))this.tableIndex=0,this.tablesCount=1,this.enableColumnVirtualization&&(this.columnModel=[],this.updateColumnModel(this.columns)),this.freezeRefresh();else if(this.isPreventScrollEvent=!0,this.updateColumnObject(),this.checkLockColumns(this.getColumns()),this.refresh(),this.isFrozenGrid()){var a=this.contentModule.getMovableContent().querySelector("."+Z);(0,l.Od)(a.querySelector(q));var h=this.getHeaderContent().querySelector("."+W).querySelector(q).cloneNode(!0);if(a.insertBefore(h,a.querySelector(I)),"Left-Right"===this.getFrozenMode()){var d=this.contentModule.getFrozenRightContent().querySelector("."+Z);(0,l.Od)(d.querySelector(q));var p=this.getHeaderContent().querySelector(".e-frozen-right-header").querySelector(q).cloneNode(!0);d.insertBefore(p,d.querySelector(I))}}if(this.isFrozenGrid()){var c=this.getContent().querySelector(".e-movablescrollbar").scrollLeft;this.headerModule.getMovableHeader().scrollLeft=c,this.contentModule.getMovableContent().scrollLeft=c}},e.prototype.excelExport=function(i,r,n,o){return this.excelExportModule?this.excelExportModule.Map(this,i,r,n,!1,o):null},e.prototype.csvExport=function(i,r,n,o){return this.excelExportModule?this.excelExportModule.Map(this,i,r,n,!0,o):null},e.prototype.pdfExport=function(i,r,n,o){return this.pdfExportModule?this.pdfExportModule.Map(this,i,r,n,o):null},e.prototype.groupColumn=function(i){this.groupModule&&this.groupModule.groupColumn(i)},e.prototype.groupExpandAll=function(){this.groupModule&&this.groupModule.expandAll()},e.prototype.groupCollapseAll=function(){this.groupModule&&this.groupModule.collapseAll()},e.prototype.clearGrouping=function(){this.groupModule&&this.groupModule.clearGrouping()},e.prototype.ungroupColumn=function(i){this.groupModule&&this.groupModule.ungroupColumn(i)},e.prototype.openColumnChooser=function(i,r){this.columnChooserModule&&this.columnChooserModule.openColumnChooser(i,r)},e.prototype.scrollRefresh=function(){var i=this,r=function(){i.scrollModule.refresh(),i.off(ee,r)};this.on(ee,r,this)},e.prototype.detailCollapseAll=function(){this.detailRowModule&&this.detailRowModule.collapseAll()},e.prototype.detailExpandAll=function(){this.detailRowModule&&this.detailRowModule.expandAll()},e.prototype.clearCellSelection=function(){this.selectionModule&&this.selectionModule.clearCellSelection()},e.prototype.clearRowSelection=function(){this.selectionModule&&this.selectionModule.clearRowSelection()},e.prototype.selectCells=function(i){this.selectionModule&&this.selectionModule.selectCells(i)},e.prototype.selectRowsByRange=function(i,r){this.selectionModule&&this.selectionModule.selectRowsByRange(i,r)},e.prototype.isContextMenuOpen=function(){return this.contextMenuModule&&this.contextMenuModule.isOpen},e.prototype.ensureModuleInjected=function(i){return this.getInjectedModules().indexOf(i)>=0},e.prototype.destroyTemplate=function(i,r){this.clearTemplate(i,r)},e.prototype.log=function(i,r){this.loggerModule&&this.loggerModule.log(i,r)},e.prototype.applyBiggerTheme=function(i){this.element.classList.contains("e-bigger")&&i.classList.add("e-bigger")},e.prototype.getPreviousRowData=function(){return this.getRowsObject()[this.getRows().length-1].data},e.prototype.hideScroll=function(){var i=this.getContent().querySelector("."+ie),r=this.getContent().querySelector(".e-scrollbar");if(i.scrollHeight<=i.clientHeight&&(this.scrollModule.removePadding(),i.style.overflowY="auto"),this.isFrozenGrid()&&r){var n=this.getContent().querySelector(".e-movablescrollbar"),o=this.getContent().querySelector(".e-movablechild");r.style.display="flex",n.offsetWidth>=o.offsetWidth&&(r.style.display="none",this.notify(Ri,0))}},e.prototype.getRowIndexByPrimaryKey=function(i){var r=this.getPrimaryKeyFieldNames()[0];i="object"==typeof i?i[r]:i;for(var n=this.getRowsObject(),o=0;o<n.length;o++)if(!n[o].isDetailRow&&!n[o].isCaptionRow){var a=n[o].data[r];if(r.split(".").length>1&&(a=rs(r,n[o].data)),a===i)return n[o].index}return-1},e.prototype.grabColumnByFieldFromAllCols=function(i){var r;this.columnModel=[],this.updateColumnModel(this.columns);for(var n=this.columnModel,o=0;o<n.length;o++)i===n[o].field&&(r=n[o]);return r},e.prototype.grabColumnByUidFromAllCols=function(i){var r;this.columnModel=[],this.updateColumnModel(this.columns);for(var n=this.columnModel,o=0;o<n.length;o++)i===n[o].uid&&(r=n[o]);return r},e.prototype.getFilteredRecords=function(){if(this.allowFiltering&&this.filterSettings.columns.length){var i=this.renderModule.data.generateQuery(!0);return this.dataSource&&this.renderModule.data.isRemote()&&this.dataSource instanceof z.hm?this.renderModule.data.getData(this.dataSource,i):this.dataSource instanceof z.hm?this.dataSource.executeLocal(i):new z.hm(this.dataSource,i).executeLocal(i)}return[]},e.prototype.getUserAgent=function(){var i=l.AR.userAgent.toLowerCase();return/iphone|ipod|ipad/.test(i)},e.prototype.tapEvent=function(i){this.getUserAgent()&&(Ze.timer?(clearTimeout(Ze.timer),Ze.timer=null,this.dblClickHandler(i),this.notify("double-tap",i)):Ze.timer=setTimeout(function(){Ze.timer=null},300))},e.prototype.getRowUid=function(i){return""+i+this.rowUid++},e.prototype.getMovableVirtualContent=function(){return this.getContent().querySelector("."+_)},e.prototype.getFrozenVirtualContent=function(){return this.getContent().querySelector("."+He)},e.prototype.getMovableVirtualHeader=function(){return this.getHeaderContent().querySelector("."+W)},e.prototype.getFrozenVirtualHeader=function(){return this.getHeaderContent().querySelector("."+Xe)},e.prototype.getRowElementByUID=function(i){var r,n=[];if(this.isFrozenGrid()){var o=[].slice.call(this.getFrozenVirtualContent().querySelector(I).children),a=[].slice.call(this.getMovableVirtualContent().querySelector(I).children),h=[];if(3===this.tablesCount&&(h=[].slice.call(this.getContent().querySelector(".e-frozen-right-content").querySelector(I).children)),this.frozenRows){if(n=(n=[].slice.call(this.getFrozenVirtualHeader().querySelector(I).children)).concat([].slice.call(this.getMovableVirtualHeader().querySelector(I).children)),3===this.tablesCount){var d=this.getHeaderContent().querySelector(".e-frozen-right-header");n=n.concat([].slice.call(d.querySelector(I).children)).concat(h)}n=n.concat(o).concat(a)}else n=o.concat(a).concat(h)}else{var p=[].slice.call(this.getContent().querySelector(I).children);n=this.frozenRows?(n=[].slice.call(this.getHeaderContent().querySelector(I).children)).concat(p):p}for(var c=0,u=n;c<u.length;c++){var f=u[c];if(f.getAttribute("data-uid")===i){r=f;break}}return r},e.prototype.getHiddenColumns=function(){for(var i=[],r=0,n=this.columnModel;r<n.length;r++){var o=n[r];!1===o.visible&&i.push(o)}return i},e.prototype.calculatePageSizeByParentHeight=function(i){if(this.allowPaging&&(this.allowTextWrap&&"Header"===this.textWrapSettings.wrapMode||!this.allowTextWrap)){var r=0;if(-1!==i.indexOf("%")&&(i=parseInt(i,10)/100*this.element.clientHeight),i>this.getNoncontentHeight()+this.getRowHeight()&&(r=(i-this.getNoncontentHeight())/this.getRowHeight()),r>0)return Math.floor(r)}return 0},e.prototype.getNoncontentHeight=function(){var i=0;if((0,l.le)(this.getHeaderContent().clientHeight)||(i+=this.getHeaderContent().clientHeight),this.toolbar&&!(0,l.le)(this.element.querySelector(".e-toolbar").clientHeight)&&(i+=this.element.querySelector(".e-toolbar").clientHeight),this.allowPaging&&!(0,l.le)(this.element.querySelector(".e-gridpager").clientHeight)&&(i+=this.element.querySelector(".e-gridpager").clientHeight),this.showColumnChooser&&!(0,l.le)(this.element.querySelector(".e-columnheader").clientHeight)&&(i+=this.element.querySelector(".e-columnheader").clientHeight),this.allowGrouping&&this.groupSettings.showDropArea&&!(0,l.le)(this.element.querySelector(".e-groupdroparea").clientHeight)&&(i+=this.element.querySelector(".e-groupdroparea").clientHeight),this.aggregates.length>0&&!(0,l.le)(this.element.querySelector(".e-summaryrow").clientHeight))for(var r=0;r<this.element.getElementsByClassName("e-summaryrow").length;r++)i+=this.element.getElementsByClassName("e-summaryrow")[r].clientHeight;return i},e.prototype.getSummaryValues=function(i,r){return z.j4.aggregates[i.type.toLowerCase()](r,i.field)},e.prototype.serverExcelExport=function(i){this.isExcel=!0,this.exportGrid(i)},e.prototype.serverPdfExport=function(i){this.isExcel=!1,this.exportGrid(i)},e.prototype.serverCsvExport=function(i){this.isExcel=!0,this.exportGrid(i)},e.prototype.exportGrid=function(i){var n=this.getDataModule().generateQuery(!0),o=(new z.lM).processQuery(new z.hm({url:""}),n),a=JSON.parse(o.data),h=JSON.parse(this.addOnPersist(["allowGrouping","allowPaging","pageSettings","sortSettings","allowPdfExport","allowExcelExport","aggregates","filterSettings","groupSettings","columns","locale","searchSettings"]));h.filterSettings.columns=a.where,h.searchSettings.fields=a.search&&a.search[0].fields||[],h.sortSettings.columns=a.sorted,h.columns=this.setHeaderText(h.columns,["field","headerText","type","format","visible","foreignKeyValue","foreignKeyField","template","index","width","textAlign","headerTextAlign","columns"]);var p=this.createElement("form",{id:"ExportForm",styles:"display:none;"}),c=this.createElement("input",{id:"gridInput",attrs:{name:"gridModel"}});c.value=JSON.stringify(h),p.method="POST",p.action=i,p.appendChild(c),document.body.appendChild(p),p.submit(),p.remove()},e.prototype.setHeaderText=function(i,r){for(var n=0;n<i.length;n++){var o=this.getColumnByUid(i[n].uid);i[n].headerText=o.headerText,(0,l.le)(o.template)||(i[n].template="true"),i[n].format&&(i[n].format=cd(this.getFormat(i[n].format),i[n].type,this.isExcel)),i[n].columns&&this.setHeaderText(i[n].columns,r);for(var a=Object.keys(i[n]),h=0;h<a.length;h++)r.indexOf(a[h])<0&&delete i[n][a[h]]}return i},e.prototype.getFormat=function(i){return"object"==typeof i?(0,l.le)(i.format)?i.skeleton:i.format:i},e.prototype.isCollapseStateEnabled=function(){return!1===this.isExpanded},e.prototype.updateRowValue=function(i,r){var n={requestType:"save",data:r};this.showSpinner(),this.notify(wi,n),this.refresh()},e.prototype.setForeignKeyData=function(){this.dataBind();var i=this.getDataModule().getForeignKeyDataState();i.isPending?(this.getDataModule().setForeignKeyDataState({}),i.resolver()):(this.getDataModule().setForeignKeyDataState({isDataChanged:!1}),(this.contentModule||this.headerModule)&&this.renderModule.render())},e.prototype.resetFilterDlgPosition=function(i){var r=this.getColumnHeaderByField(i);if(r){var n=r.querySelector(".e-filtermenudiv"),o=this.element.querySelector(".e-filter-popup");if(n&&o){var a=this.element.getBoundingClientRect(),h=n.getBoundingClientRect();o&&(o.style.left=o.offsetWidth+h.right>a.right?(h.right-o.offsetWidth-a.left).toString()+"px":(h.right-a.left).toString()+"px")}}},e.prototype.renderTemplates=function(){this.parentDetails&&this.parentDetails.parentInstObj&&this.parentDetails.parentInstObj.isReact?(this.parentDetails.parentInstObj.portals=this.parentDetails.parentInstObj.portals.concat(this.portals),this.parentDetails.parentInstObj.renderTemplates(),this.portals=void 0):(this.notify("reactTemplateRender",this.portals),this.renderReactTemplates())},e.prototype.batchUpdate=function(i){this.processRowChanges(i)},e.prototype.batchAsyncUpdate=function(i){this.processBulkRowChanges(i)},e.prototype.processBulkRowChanges=function(i){var r=this;if(this.dataToBeUpdated)for(var n=[ot,ai,xt],o=this.getPrimaryKeyFieldNames()[0],a=0;a<n.length;a++)i[n[a]]&&ld(this,i,n[a],o);else this.dataToBeUpdated=Object.assign({addedRecords:[],changedRecords:[],deletedRecords:[]},i),setTimeout(function(){r.processRowChanges(r.dataToBeUpdated),r.dataToBeUpdated=null},this.asyncTimeOut)},e.prototype.processRowChanges=function(i){var r=this,n=this.getPrimaryKeyFieldNames()[0];i=Object.assign({addedRecords:[],changedRecords:[],deletedRecords:[]},i);var o=this.getDataModule().saveChanges(i,n,{},this.getDataModule().generateQuery().requiresCount());this.getDataModule().isRemote()?o.then(function(){r.setNewData()}):this.setNewData()},e.prototype.setNewData=function(){var i=this,r=JSON.parse(JSON.stringify(this.getCurrentViewRecords()));this.getDataModule().getData({},this.getDataModule().generateQuery().requiresCount()).then(function(o){i.bulkRefresh(o.result,r,o.count)})},e.prototype.deleteRowElement=function(i){var r=this.getRowElementByUID(i.uid),n=parseInt(r.getAttribute(O),10);if((0,l.Od)(r),this.getFrozenColumns()){var o=this.getMovableRows()[n];(0,l.Od)(o)}},e.prototype.bulkRefresh=function(i,r,n){for(var c,o=this,a=this.getRowsObject(),h=this.getPrimaryKeyFieldNames()[0],d=function(m){i.filter(function(C){return C[h]===a[m].data[h]}).length||(p.deleteRowElement(a[m]),a.splice(m,1),m--),c=m},p=this,u=0;u<a.length;u++)d(u),u=c;var f=function(m){var C;r.filter(function(b){b[h]===i[m][h]&&(b!==i[m]&&o.setRowData(i[m][h],i[m]),C=!0)}),C||g.renderRowElement(i[m],m)},g=this;for(u=0;u<i.length;u++)f(u);this.currentViewData=i;var v=[].slice.call(this.getContentTable().getElementsByClassName(G));(function(s,e,t,i,r){for(var n=i||0,o=r||0;o<e.length;o++)if(e[o].isDataRow){e[o].index=n,e[o].isAltRow=!!s.enableAltRow&&n%2!=0,t[o].setAttribute(O,n.toString()),t[o].setAttribute(Ei,(n+1).toString()),e[o].isAltRow?t[o].classList.add("e-altrow"):t[o].classList.remove("e-altrow");for(var a=0;a<t[o].cells.length;a++)t[o].cells[a].setAttribute("index",n.toString());n++}e.length||s.renderModule.emptyRow(!0)})(this,this.getRowsObject(),v),function(s){if(s.isFrozenGrid()){s.contentModule.rowElements=[].slice.call(s.element.querySelectorAll(".e-movableheader .e-row, .e-movablecontent .e-row"));var e=s.getFrozenMode()===B?".e-frozen-left-header .e-row, .e-frozen-left-content .e-row":".e-frozenheader .e-row, .e-frozencontent .e-row";s.contentModule.freezeRowElements=[].slice.call(s.element.querySelectorAll(e)),s.getFrozenMode()===B&&(s.contentModule.frozenRightRowElements=[].slice.call(s.element.querySelectorAll(".e-frozen-right-header .e-row, .e-frozen-right-content .e-row")))}else s.contentModule.rowElements=[].slice.call(s.element.querySelectorAll(".e-row:not(.e-addedrow)"))}(this),this.allowPaging&&this.notify(Se,{module:"pager",properties:{totalRecordsCount:n}})},e.prototype.renderRowElement=function(i,r){var d,n=new ke(this.serviceLocator,null,this),a=new Je(this).generateRows([i]),h=n.render(a[0],this.getColumns());this.addRowObject(a[0],r);var c=this.getContentTable().querySelector(I);if(c.querySelector(".e-emptyrow")){var u=c.querySelector(".e-emptyrow");if(u.parentNode.removeChild(u),this.getFrozenColumns()){var f=this.getContent().querySelector("."+_).querySelector(I);f.firstElementChild.parentNode.removeChild(f.firstElementChild)}}this.getFrozenColumns()&&(d=function(s,e,t){e=e&&t&&t.isRowDragable()?e+1:e;for(var i=s.cloneNode(!0),r=0;r<e;r++)i.removeChild(i.children[0]);r=e;for(var n=s.childElementCount;r<n;r++)s.removeChild(s.children[s.childElementCount-1]);return i}(h,this.getFrozenColumns(),this),(this.frozenRows&&r<this.frozenRows?this.getHeaderContent().querySelector("."+W).querySelector(I):this.getContent().querySelector("."+_).querySelector(I)).appendChild(d),"auto"===this.height&&this.notify(Ri,{})),c=this.frozenRows&&r<this.frozenRows?this.getHeaderContent().querySelector(I):this.getContent().querySelector(I),(c=this.getContent().querySelector(I)).appendChild(h)},e.prototype.addRowObject=function(i,r){var n=this.getFrozenColumns();if(n){var o=this.getMovableRowsObject(),a=i.clone();a.cells=a.cells.slice(n),i.cells=i.cells.slice(0,n),o.splice(r,1,a)}this.getRowsObject().splice(r,1,i)},e.prototype.updateVisibleExpandCollapseRows=function(){for(var i=this.getRowsObject(),r=0,n=i.length;r<n;r++)i[r].visible=!i[r].isDataRow&&!i[r].isAggregateRow||"none"!==this.getRowElementByUID(i[r].uid).style.display},e.prototype.getHeight=function(i){return Number.isInteger(i)||-1===i.indexOf("%")?Number.isInteger(i)||"auto"===this.height?this.height:parseInt(i,10):parseInt(i,10)/100*this.element.clientHeight},e.prototype.getFrozenRightContent=function(){return this.getContent().querySelector(".e-frozen-right-content")},e.prototype.getFrozenRightHeader=function(){return this.getHeaderContent().querySelector(".e-frozen-right-header")},e.prototype.getMovableHeaderTbody=function(){return this.getMovableVirtualHeader().querySelector(I)},e.prototype.getMovableContentTbody=function(){return this.getMovableVirtualContent().querySelector(I)},e.prototype.getFrozenHeaderTbody=function(){return this.getFrozenVirtualHeader().querySelector(I)},e.prototype.getFrozenLeftContentTbody=function(){return this.getFrozenVirtualContent().querySelector(I)},e.prototype.getFrozenRightHeaderTbody=function(){return this.getFrozenRightHeader().querySelector(I)},e.prototype.getFrozenRightContentTbody=function(){var r;return this.getFrozenRightContent()&&(r=this.getFrozenRightContent().querySelector(I)),r},e.prototype.showResponsiveCustomFilter=function(i){this.filterModule&&this.filterModule.showCustomFilter(i||"Vertical"===this.rowRenderingMode)},e.prototype.showResponsiveCustomSort=function(i){this.sortModule&&this.sortModule.showCustomSort(i||"Vertical"===this.rowRenderingMode)},e.prototype.showAdaptiveFilterDialog=function(){this.enableAdaptiveUI&&this.showResponsiveCustomFilter(!0)},e.prototype.showAdaptiveSortDialog=function(){this.enableAdaptiveUI&&this.showResponsiveCustomSort(!0)},e.prototype.getCurrentVisibleColumns=function(i){for(var r=[],o=0,a=i?this.getColumns():this.columnModel;o<a.length;o++){var h=a[o];h.visible&&r.push(h)}return r},e.prototype.enableInfiniteAggrgate=function(){this.enableInfiniteScrolling&&this.groupSettings.columns.length&&!this.groupSettings.disablePageWiseAggregates&&!this.groupSettings.enableLazyLoading&&this.setProperties({groupSettings:{disablePageWiseAggregates:!0}},!0)},x([(0,l.Z9)()],e.prototype,"parentDetails",void 0),x([(0,l.Z9)([])],e.prototype,"columns",void 0),x([(0,l.Z9)(!0)],e.prototype,"enableAltRow",void 0),x([(0,l.Z9)(!0)],e.prototype,"enableHover",void 0),x([(0,l.Z9)(!1)],e.prototype,"enableAutoFill",void 0),x([(0,l.Z9)(!0)],e.prototype,"allowKeyboard",void 0),x([(0,l.Z9)(!1)],e.prototype,"enableStickyHeader",void 0),x([(0,l.Z9)(!1)],e.prototype,"allowTextWrap",void 0),x([(0,l.Zz)({},Nh)],e.prototype,"textWrapSettings",void 0),x([(0,l.Zz)({},Vh)],e.prototype,"resizeSettings",void 0),x([(0,l.Z9)(!1)],e.prototype,"allowPaging",void 0),x([(0,l.Zz)({},Rh)],e.prototype,"pageSettings",void 0),x([(0,l.Zz)({},_h)],e.prototype,"loadingIndicator",void 0),x([(0,l.Z9)(!0)],e.prototype,"enableVirtualMaskRow",void 0),x([(0,l.Z9)(!1)],e.prototype,"enableVirtualization",void 0),x([(0,l.Z9)(!1)],e.prototype,"enableColumnVirtualization",void 0),x([(0,l.Z9)(!1)],e.prototype,"enableInfiniteScrolling",void 0),x([(0,l.Zz)({},Ph)],e.prototype,"searchSettings",void 0),x([(0,l.Z9)(!1)],e.prototype,"allowSorting",void 0),x([(0,l.Z9)("Ellipsis")],e.prototype,"clipMode",void 0),x([(0,l.Z9)(!0)],e.prototype,"allowMultiSorting",void 0),x([(0,l.Z9)(!1)],e.prototype,"allowExcelExport",void 0),x([(0,l.Z9)(!1)],e.prototype,"allowPdfExport",void 0),x([(0,l.Zz)({},Ah)],e.prototype,"sortSettings",void 0),x([(0,l.Zz)({},Bh)],e.prototype,"infiniteScrollSettings",void 0),x([(0,l.Z9)(!0)],e.prototype,"allowSelection",void 0),x([(0,l.Z9)(-1)],e.prototype,"selectedRowIndex",void 0),x([(0,l.Zz)({},Oh)],e.prototype,"selectionSettings",void 0),x([(0,l.Z9)(!1)],e.prototype,"allowFiltering",void 0),x([(0,l.Z9)("Horizontal")],e.prototype,"rowRenderingMode",void 0),x([(0,l.Z9)(!1)],e.prototype,"enableAdaptiveUI",void 0),x([(0,l.Z9)(!1)],e.prototype,"allowReordering",void 0),x([(0,l.Z9)(!1)],e.prototype,"allowResizing",void 0),x([(0,l.Z9)(!1)],e.prototype,"allowRowDragAndDrop",void 0),x([(0,l.Zz)({},Hh)],e.prototype,"rowDropSettings",void 0),x([(0,l.Zz)({},qh)],e.prototype,"filterSettings",void 0),x([(0,l.Z9)(!1)],e.prototype,"allowGrouping",void 0),x([(0,l.Z9)(!1)],e.prototype,"enableImmutableMode",void 0),x([(0,l.Z9)(!1)],e.prototype,"showColumnMenu",void 0),x([(0,l.Zz)({},Gh)],e.prototype,"groupSettings",void 0),x([(0,l.Zz)({},jh)],e.prototype,"editSettings",void 0),x([(0,l.FE)([],Eh)],e.prototype,"aggregates",void 0),x([(0,l.Z9)(!1)],e.prototype,"showColumnChooser",void 0),x([(0,l.Zz)({},Fh)],e.prototype,"columnChooserSettings",void 0),x([(0,l.Z9)(!1)],e.prototype,"enableHeaderFocus",void 0),x([(0,l.Z9)("auto")],e.prototype,"height",void 0),x([(0,l.Z9)("auto")],e.prototype,"width",void 0),x([(0,l.Z9)("Default")],e.prototype,"gridLines",void 0),x([(0,l.Z9)()],e.prototype,"rowTemplate",void 0),x([(0,l.Z9)()],e.prototype,"detailTemplate",void 0),x([(0,l.Z9)()],e.prototype,"childGrid",void 0),x([(0,l.Z9)()],e.prototype,"queryString",void 0),x([(0,l.Z9)("AllPages")],e.prototype,"printMode",void 0),x([(0,l.Z9)("Expanded")],e.prototype,"hierarchyPrintMode",void 0),x([(0,l.Z9)([])],e.prototype,"dataSource",void 0),x([(0,l.Z9)(null)],e.prototype,"rowHeight",void 0),x([(0,l.Z9)()],e.prototype,"query",void 0),x([(0,l.Z9)("USD")],e.prototype,"currencyCode",void 0),x([(0,l.Z9)()],e.prototype,"toolbar",void 0),x([(0,l.Z9)()],e.prototype,"contextMenuItems",void 0),x([(0,l.Z9)()],e.prototype,"columnMenuItems",void 0),x([(0,l.Z9)()],e.prototype,"toolbarTemplate",void 0),x([(0,l.Z9)()],e.prototype,"pagerTemplate",void 0),x([(0,l.Z9)(0)],e.prototype,"frozenRows",void 0),x([(0,l.Z9)(0)],e.prototype,"frozenColumns",void 0),x([(0,l.Z9)("")],e.prototype,"cssClass",void 0),x([(0,l.Z9)("All")],e.prototype,"columnQueryMode",void 0),x([(0,l.Z9)({})],e.prototype,"currentAction",void 0),x([(0,l.Z9)("20.3.52")],e.prototype,"ej2StatePersistenceVersion",void 0),x([(0,l.ju)()],e.prototype,"created",void 0),x([(0,l.ju)()],e.prototype,"destroyed",void 0),x([(0,l.ju)()],e.prototype,"load",void 0),x([(0,l.ju)()],e.prototype,"rowDataBound",void 0),x([(0,l.ju)()],e.prototype,"queryCellInfo",void 0),x([(0,l.ju)()],e.prototype,"headerCellInfo",void 0),x([(0,l.ju)()],e.prototype,"actionBegin",void 0),x([(0,l.ju)()],e.prototype,"actionComplete",void 0),x([(0,l.ju)()],e.prototype,"actionFailure",void 0),x([(0,l.ju)()],e.prototype,"dataBound",void 0),x([(0,l.ju)()],e.prototype,"recordDoubleClick",void 0),x([(0,l.ju)()],e.prototype,"recordClick",void 0),x([(0,l.ju)()],e.prototype,"rowSelecting",void 0),x([(0,l.ju)()],e.prototype,"rowSelected",void 0),x([(0,l.ju)()],e.prototype,"rowDeselecting",void 0),x([(0,l.ju)()],e.prototype,"rowDeselected",void 0),x([(0,l.ju)()],e.prototype,"cellSelecting",void 0),x([(0,l.ju)()],e.prototype,"cellSelected",void 0),x([(0,l.ju)()],e.prototype,"cellDeselecting",void 0),x([(0,l.ju)()],e.prototype,"cellDeselected",void 0),x([(0,l.ju)()],e.prototype,"columnSelecting",void 0),x([(0,l.ju)()],e.prototype,"columnSelected",void 0),x([(0,l.ju)()],e.prototype,"columnDeselecting",void 0),x([(0,l.ju)()],e.prototype,"columnDeselected",void 0),x([(0,l.ju)()],e.prototype,"columnDragStart",void 0),x([(0,l.ju)()],e.prototype,"columnDrag",void 0),x([(0,l.ju)()],e.prototype,"columnDrop",void 0),x([(0,l.ju)()],e.prototype,"printComplete",void 0),x([(0,l.ju)()],e.prototype,"beforePrint",void 0),x([(0,l.ju)()],e.prototype,"pdfQueryCellInfo",void 0),x([(0,l.ju)()],e.prototype,"pdfHeaderQueryCellInfo",void 0),x([(0,l.ju)()],e.prototype,"pdfAggregateQueryCellInfo",void 0),x([(0,l.ju)()],e.prototype,"excelAggregateQueryCellInfo",void 0),x([(0,l.ju)()],e.prototype,"exportDetailDataBound",void 0),x([(0,l.ju)()],e.prototype,"excelQueryCellInfo",void 0),x([(0,l.ju)()],e.prototype,"excelHeaderQueryCellInfo",void 0),x([(0,l.ju)()],e.prototype,"beforeExcelExport",void 0),x([(0,l.ju)()],e.prototype,"excelExportComplete",void 0),x([(0,l.ju)()],e.prototype,"beforePdfExport",void 0),x([(0,l.ju)()],e.prototype,"pdfExportComplete",void 0),x([(0,l.ju)()],e.prototype,"rowDragStartHelper",void 0),x([(0,l.ju)()],e.prototype,"detailDataBound",void 0),x([(0,l.ju)()],e.prototype,"rowDragStart",void 0),x([(0,l.ju)()],e.prototype,"rowDrag",void 0),x([(0,l.ju)()],e.prototype,"rowDrop",void 0),x([(0,l.ju)()],e.prototype,"toolbarClick",void 0),x([(0,l.ju)()],e.prototype,"beforeOpenColumnChooser",void 0),x([(0,l.ju)()],e.prototype,"beforeOpenAdaptiveDialog",void 0),x([(0,l.ju)()],e.prototype,"batchAdd",void 0),x([(0,l.ju)()],e.prototype,"batchDelete",void 0),x([(0,l.ju)()],e.prototype,"batchCancel",void 0),x([(0,l.ju)()],e.prototype,"beforeBatchAdd",void 0),x([(0,l.ju)()],e.prototype,"beforeBatchDelete",void 0),x([(0,l.ju)()],e.prototype,"beforeBatchSave",void 0),x([(0,l.ju)()],e.prototype,"beginEdit",void 0),x([(0,l.ju)()],e.prototype,"commandClick",void 0),x([(0,l.ju)()],e.prototype,"cellEdit",void 0),x([(0,l.ju)()],e.prototype,"cellSave",void 0),x([(0,l.ju)()],e.prototype,"cellSaved",void 0),x([(0,l.ju)()],e.prototype,"resizeStart",void 0),x([(0,l.ju)()],e.prototype,"resizing",void 0),x([(0,l.ju)()],e.prototype,"resizeStop",void 0),x([(0,l.ju)()],e.prototype,"keyPressed",void 0),x([(0,l.ju)()],e.prototype,"beforeDataBound",void 0),x([(0,l.ju)()],e.prototype,"contextMenuOpen",void 0),x([(0,l.ju)()],e.prototype,"contextMenuClick",void 0),x([(0,l.ju)()],e.prototype,"columnMenuOpen",void 0),x([(0,l.ju)()],e.prototype,"columnMenuClick",void 0),x([(0,l.ju)()],e.prototype,"checkBoxChange",void 0),x([(0,l.ju)()],e.prototype,"beforeCopy",void 0),x([(0,l.ju)()],e.prototype,"beforePaste",void 0),x([(0,l.ju)()],e.prototype,"beforeAutoFill",void 0),x([(0,l.ju)()],e.prototype,"columnDataStateChange",void 0),x([(0,l.ju)()],e.prototype,"dataStateChange",void 0),x([(0,l.ju)()],e.prototype,"dataSourceChanged",void 0),x([(0,l.ju)()],e.prototype,"exportGroupCaption",void 0),x([(0,l.ju)()],e.prototype,"lazyLoadGroupExpand",void 0),x([(0,l.ju)()],e.prototype,"lazyLoadGroupCollapse",void 0),t=x([l.Zl],e)}(l.wA),Io=function(){function s(e,t){this.isAsyncPrint=!1,this.defered=new z.BH,this.parent=e,!this.parent.isDestroyed&&(this.parent.on(ee,this.isContentReady(),this),this.actionBeginFunction=this.actionBegin.bind(this),this.parent.addEventListener(Y,this.actionBeginFunction),this.parent.on(Ye,this.onEmpty.bind(this)),this.parent.on(pn,this.hierarchyPrint,this),this.scrollModule=t)}return s.prototype.isContentReady=function(){var e=this;return!this.isPrintGrid()||"None"!==this.parent.hierarchyPrintMode&&this.parent.childGrid?function(){e.defered.promise.then(function(){e.contentReady()}),e.isPrintGrid()&&e.hierarchyPrint()}:this.contentReady},s.prototype.hierarchyPrint=function(){this.removeColGroup(this.parent);var e=window.printGridObj;e&&!e.element.querySelector("[aria-busy=true")&&e.printModule.defered.resolve()},s.prototype.print=function(){this.renderPrintGrid()},s.prototype.onEmpty=function(){this.isPrintGrid()&&this.contentReady()},s.prototype.actionBegin=function(){this.isPrintGrid()&&(this.isAsyncPrint=!0)},s.prototype.renderPrintGrid=function(){var e=this.parent,t=(0,l.az)("div",{id:this.parent.element.id+"_print",className:e.element.className+" e-print-grid"});t.classList.remove("e-gridhover"),document.body.appendChild(t);for(var i=new Fr(Ar(e,e.hierarchyPrintMode)),r=0;r<i.columns.length;r++)i.columns[r]=(0,l.l7)({},i.columns[r]),e.isFrozenGrid()&&!e.getFrozenColumns()&&(i.columns[r].freeze=void 0);this.parent.isAngular&&(i.viewContainerRef=this.parent.viewContainerRef),i.load=function(){},i.query=e.getQuery().clone(),window.printGridObj=i,i.isPrinting=!0;var n=i.getInjectedModules(),o=e.getInjectedModules();(!n||n.length!==o.length)&&i.setInjectedModules(o),e.notify("printGrid-Init",{element:t,printgrid:i}),this.parent.log("exporting_begin",this.getModuleName()),i.registeredTemplate=this.parent.registeredTemplate,i.isVue=this.parent.isVue,i.appendTo(t),i.trigger=e.trigger},s.prototype.contentReady=function(){if(this.isPrintGrid()){var e=this.parent;if(this.isAsyncPrint)return void this.printGrid();var t={requestType:"print",element:e.element,selectedRows:e.getContentTable().querySelectorAll('tr[aria-selected="true"]'),cancel:!1,hierarchyPrintMode:e.hierarchyPrintMode};if(this.isAsyncPrint||e.trigger(ws,t),t.cancel)return void(0,l.og)(e.element);this.isAsyncPrint||this.printGrid()}},s.prototype.printGrid=function(){var e=this.parent;if("auto"!==e.height){var t=this.scrollModule.getCssProperties(),i=e.element.querySelector("."+ie),r=e.element.querySelector("."+pe);i.style.height="auto",i.style.overflowY="auto",r.style[t.padding]="",r.firstElementChild.style[t.border]=""}e.allowGrouping&&(e.groupSettings.columns.length?this.removeColGroup(e):e.element.querySelector(".e-groupdroparea").style.display="none");for(var n=0,o=[].slice.call(e.element.getElementsByClassName(ie));n<o.length;n++)o[n].style.overflowX="hidden";for(var h=[].slice.call(e.element.getElementsByClassName("e-spin-show")),d=0,p=[].slice.call(h);d<p.length;d++)(0,l.s1)(p[d],["e-spin-hide"],["e-spin-show"]);this.printGridElement(e),e.isPrinting=!1,delete window.printGridObj,e.trigger(Ss,{element:e.element}),e.destroy(),this.parent.log("exporting_complete",this.getModuleName())},s.prototype.printGridElement=function(e){(0,l.s1)(e.element,["e-print-grid-layout"],["e-print-grid"]),e.isPrinting&&(0,l.og)(e.element),this.printWind=window.open("","print","height="+window.outerHeight+",width="+window.outerWidth+",tabbar=no"),this.printWind.moveTo(0,0),this.printWind.resizeTo(screen.availWidth,screen.availHeight),this.printWind=(0,l.S0)(e.element,this.printWind)},s.prototype.removeColGroup=function(e){var t=e.groupSettings.columns.length,i=e.element,r="#"+e.element.id;if(t){for(var n=(0,l.td)(".e-groupcaption",i),o=n[t-1].getAttribute("colspan"),a=0;a<n.length;a++)n[a].setAttribute("colspan",o);var h=(0,l.td)("colgroup"+r+"colgroup",i),d=(0,l.td)(".e-content colgroup",i);this.hideColGroup(h,t),this.hideColGroup(d,t)}},s.prototype.hideColGroup=function(e,t){for(var i=0;i<e.length;i++)for(var r=0;r<t;r++)e[i].children[r].style.display="none"},s.prototype.isPrintGrid=function(){return this.parent.element.id.indexOf("_print")>0&&this.parent.isPrinting},s.prototype.destroy=function(){this.parent.isDestroyed||(this.parent.off(ee,this.contentReady.bind(this)),this.parent.removeEventListener(Y,this.actionBeginFunction),this.parent.off(Ye,this.onEmpty.bind(this)),this.parent.off(pn,this.hierarchyPrint))},s.prototype.getModuleName=function(){return"print"},s.printGridProp=["aggregates","allowGrouping","allowFiltering","allowMultiSorting","allowReordering","allowSorting","allowTextWrap","childGrid","columns","currentViewData","dataSource","detailTemplate","enableAltRow","enableColumnVirtualization","filterSettings","gridLines","groupSettings","height","locale","pageSettings","printMode","query","queryString","enableRtl","rowHeight","rowTemplate","sortSettings","textWrapSettings","allowPaging","hierarchyPrintMode","searchSettings","queryCellInfo","beforeDataBound"].concat([ws,Ss,"load"]),s}();function To(s,e,t){return(0,l.le)(s)||""===s?"":z.j4.getObject(s,e)}function Eo(s,e){requestAnimationFrame(function(){try{e(null,s())}catch(t){e(t)}})}function zr(s){return!(0,l.le)(s)&&!(0,l.le)(s.columns)&&s.columns.length>0}function Do(s,e){for(var t=s.columns,i=e.columns,r=0;r<t.length;r++)if(i.length-1>=r)if(i[r].columns)for(var n=0;n<i[r].columns.length;n++)t[r].columns[n].type=i[r].columns[n].type;else t[r].type=i[r].type}var _e=0;function Zh(s,e){_e=0;var t="gSummary",r=e.groupSettings.columns.length,n="records",o="items",a=s[t],h=0,d="aggregatesCount";if(a===s.data.count)return e.groupSettings.columns.length&&!(0,l.le)(s[d])&&s[d]?1!==e.groupSettings.columns.length?_e+=0!==s.indent&&a<2?s[t]*(r-s.indent+(r-s.indent)*s[d]):s[t]*(r-s.indent+(r-s.indent-1)*s[d])+s[d]:1===e.groupSettings.columns.length&&(_e+=s[t]*(r-s.indent)+s[d]):e.groupSettings.columns.length&&(_e+=1!==e.groupSettings.columns.length?s[t]*(e.groupSettings.columns.length-s.indent):s[t]),_e;for(var p=0,c=s.data[o].length;p<c;p++){var u=s.data[o][p];_e+=u[o].length+(r===e.columns.length||(0,l.le)(u[o][n])?0:u[o][n].length),h+=(0,l.le)(u[o][n])||(0,l.le)(s[d])?u[o].length:u[o][n].length,u[o].GroupGuid&&0!==u[o].childLevels&&ko(u)}return _e+=s.data[o].length,(0,l.le)(s[d])||s[d]&&_e&&0!==h&&(_e+=(_e-h)*s[d]+s[d]),_e}function ko(s){for(var e="items",i=0,r=s[e].length;i<r;i++){var n=s[e][i];_e+=n.count,0!==n[e].childLevels&&ko(n)}}function _t(s,e){for(var t=[],i=0,r=s.length;i<r;i++){var n=e(s[i],i);(0,l.le)(n)||t.push(n)}return t}function Oi(s){for(var e=[],t=0;t<s.length;t++)e.push((0,l.l7)({},Pi(s[t]),{},!0));return e}function Me(s){if(s)try{return document.querySelectorAll(s).length?(0,l.MY)(document.querySelector(s).innerHTML.trim()):(0,l.MY)(s)}catch(e){return(0,l.MY)(s)}}function at(s,e){var t={},i=["style","class"];(0,l.l7)(t,e,{}),"style"in t&&((0,l.V7)(s,t[i[0]]),delete t[i[0]]),"class"in t&&((0,l.cn)([s],t[i[1]]),delete t[i[1]]),(0,l.Y4)(s,t)}function Ut(s,e,t,i){for(var r=(0,l.l7)(s,e,t),n=Object.keys(r),o=0;o<n.length;o++)i&&-1!==i.indexOf(n[o])&&delete r[n[o]];return r}function Mr(s,e){void 0===e&&(e=0);for(var t=0,i=s.length;t<i;t++)s[t].columns?(s[t].index=(0,l.le)(s[t].index)?e:s[t].index,e++,e=Mr(s[t].columns,e)):(s[t].index=(0,l.le)(s[t].index)?e:s[t].index,e++);return e}function pi(s,e,t){for(var i=0,r=s.length;i<r;i++){var n=void 0;"string"==typeof s[i]?n=new De({field:s[i]},t):s[i]instanceof De&&!s[i].columns?n=s[i]:s[i].columns?(s[i].columns=pi(s[i].columns,null,t),n=new De(s[i],t)):n=new De(s[i],t),n.type&&"checkbox"===n.type.toLowerCase()&&(n.allowReordering=!1),n.headerText=(0,l.le)(n.headerText)?n.foreignKeyValue||n.field||"":n.headerText,n.foreignKeyField=n.foreignKeyField||n.field,n.valueAccessor=("string"==typeof n.valueAccessor?(0,l.NA)(n.valueAccessor,window):n.valueAccessor)||To,n.width=e&&(0,l.le)(n.width)?200:n.width,(0,l.le)(n.visible)&&(n.visible=!0),s[i]=n}return s}function Ao(s,e,t){var i=s.querySelector("span"),r=s.parentElement.getBoundingClientRect(),n=e.target.getBoundingClientRect();i.className=t,s.style.display="";var o=((0,l.le)(e.clientY)?e.changedTouches[0].clientY:e.clientY)>s.offsetHeight+10;s.style.top=n.top-r.top+(o?-(s.offsetHeight+10):s.offsetHeight+10)+"px",s.style.left=function(s,e,t,i){var r=s.offsetWidth/2,n=Ft(e).x;return n-t.left<r?t.left-i:t.right-n<r?t.right-i-2*r:n-i-r}(s,e,n,r.left)+"px",o?(s.querySelector(".e-downtail").style.display="",s.querySelector(".e-uptail").style.display="none"):(s.querySelector(".e-downtail").style.display="none",s.querySelector(".e-uptail").style.display="")}function Pi(s){return s instanceof l.rt?(0,l.NA)("properties",s):s}function w(s,e,t){for(var i=s;i&&!(t?i.id===e:i.classList.contains(e));)i=i.parentElement;return i}function Zn(s){for(var e=[],t=0,i=s.length;t<i;t++)s[t].hasOwnProperty("properties")?e.push(s[t].properties):e.push(s[t]);return e}function Ft(s){var e={};return e.x=(0,l.le)(s.clientX)?s.changedTouches[0].clientX:s.clientX,e.y=(0,l.le)(s.clientY)?s.changedTouches[0].clientY:s.clientY,e}var Yh=0;function Ue(s){return s+Yh++}function ye(s,e){for(var t=0,i=e.length;t<i;t++)s.appendChild(i===e.length?e[t]:e[0]);return s}function Lo(s,e,t,i){if("Custom"===s){var r=t.customAggregate;return"string"==typeof r&&(r=(0,l.NA)(r,window)),r?r.call(i,e,t):""}return t.field in e||e instanceof Array?z.j4.aggregates[s.toLowerCase()](e,t.field):null}var Ni,Yn=null;function zt(){if(null!==Yn)return Yn;var e,s=document.createElement("div");return s.style.cssText="width:100px;height: 100px;overflow: scroll;position: absolute;top: -9999px;",document.body.appendChild(s),e=s.offsetWidth-s.clientWidth|0,document.body.removeChild(s),Yn=e}function We(s){return s.split(".").length>1}function fe(s){return void 0===s&&(s=""),s.replace(/\./g,"___")}function lt(s){var e=(0,l.Ys)("#"+s.element.id+"EditConfirm",s.element);return"Batch"===s.editSettings.mode&&(0,l.td)(".e-updatedtd",s.element).length&&s.editSettings.showConfirmDialog&&(!e||e.classList.contains("e-popup-close"))}function qe(s,e){var t="e-wrap";s=s instanceof Array?s:[s];for(var i=0;i<s.length;i++)e?s[i].classList.add(t):s[i].classList.remove(t)}function Bo(s,e){var r,t=s.getService("valueFormatter");switch(("date"===e.type||"datetime"===e.type)&&(r={type:e.type,skeleton:e.format},"string"==typeof e.format&&"yMd"!==e.format&&(r.format=e.format)),e.type){case"date":case"datetime":e.setFormatter(t.getFormatFunction(r)),e.setParser(t.getParserFunction(r));break;case"number":e.setFormatter(t.getFormatFunction({format:e.format})),e.setParser(t.getParserFunction({format:e.format}))}}function Ke(s,e){for(var t=[],i=2;i<arguments.length;i++)t[i-2]=arguments[i];for(var r=0,n=s.length;r<n;r++)e?((0,l.s1)(s[r],t.slice(),[]),s[r].setAttribute("aria-selected","true")):((0,l.s1)(s[r],[],t.slice()),s[r].removeAttribute("aria-selected"))}function Wt(s,e){s.checked=e}function Tr(s,e,t){var i=(0,l.az)("div",{className:t});return i.appendChild(e),i.setAttribute("uid",s),i}function Vi(s,e){(0,l.IV)([s],["e-check","e-stop","e-uncheck"]),s.classList.add(e?"e-check":"e-uncheck")}function Mt(s,e,t,i){var r=s.foreignKeyField,n=(0,l.le)(t)?To(s.field,e):t;n=(0,l.le)(n)?"":n;var o=new z.AE,a=i||(s.dataSource instanceof z.hm&&s.dataSource.dataSource.json.length?s.dataSource.dataSource.json:s.columnData);return n.getDay?o.where(It({field:r,operator:"equal",value:n,matchCase:!1})):o.where(r,"==",n,!1),new z.hm(a).executeLocal(o)}function Gi(s,e){var t;return e.some(function(i){return t=i,i.foreignKeyValue===s})&&t}function It(s,e){var t,i,r,n=(0,l.l7)({},Pi(s)),o=(0,l.l7)({},Pi(s));if((0,l.le)(s.value)||""===s.value)return new z.$G(n.field,n.operator,n.value,!1);var a=new Date(s.value);if("equal"===s.operator||"notequal"===s.operator){"datetime"===e?(i=new Date(a.setSeconds(a.getSeconds()-1)),r=new Date(a.setSeconds(a.getSeconds()+2)),s.value=new Date(a.setSeconds(r.getSeconds()-1))):(i=new Date(a.setHours(0)-1),r=new Date(a.setHours(24))),n.value=i,o.value=r,"equal"===s.operator?(n.operator="greaterthan",o.operator="lessthan"):"notequal"===s.operator&&(n.operator="lessthanorequal",o.operator="greaterthanorequal");var h=new z.$G(n.field,n.operator,n.value,!1),d=new z.$G(o.field,o.operator,o.value,!1);t="equal"===s.operator?h.and(d):h.or(d)}else"date"===e&&("lessthanorequal"===s.operator||"greaterthan"===s.operator)&&(n.value=new Date(a.setHours(24)-1)),"string"==typeof n.value&&(n.value=new Date(n.value)),t=new z.$G(n.field,n.operator,n.value,!1);return s.setProperties?s.setProperties({ejpredicate:t},!0):s.ejpredicate=t,t}function he(s){return s.enableVirtualization&&s.groupSettings.columns.length>0&&s.isVirtualAdaptive}function ne(s,e){if(void 0===s&&(s=""),s){for(var t=e,i=s.split("."),r=0;r<i.length&&!(0,l.le)(t);r++)t=t[i[r]];return t}}function kr(s,e){var r="format",n="type";return(new l.eC).getDatePattern("date"===e?"object"==typeof s?{type:s[n]?s[n]:"date",format:s[r]}:{type:"dateTime",skeleton:s}:"object"==typeof s?{type:s[n]?s[n]:"dateTime",format:s[r]}:{type:"dateTime",skeleton:s},!1)}function Ar(s,e){void 0===e&&(e="Expanded");var t={};if(!s)return t;for(var i=s.isFrozenGrid()&&!s.getFrozenColumns(),r=0,n=Io.printGridProp;r<n.length;r++){var o=n[r];t[o]="columns"===o?Zn(i?s.getColumns():s[o]):"allowPaging"===o?"CurrentPage"===s.printMode:Pi(s[o])}return t.enableHover=!1,s.childGrid&&"None"!==e&&(t.expandedRows=function(s,e){for(var i={},r=0,n=s.getRowsObject();r<n.length;r++){var o=n[r];if(o.isExpand&&!o.isDetailRow){var a=s.allowPaging&&"AllPages"===s.printMode?o.index+s.pageSettings.currentPage*s.pageSettings.pageSize-s.pageSettings.pageSize:o.index;i[a]={},i[a].isExpand=!0,i[a].gridModel=Ar(o.childGrid,e),i[a].gridModel.query=s.childGrid.query}}return i}(s,e)),t}function Lr(s,e,t,i){var r=s||{},n=arguments.length;i&&(n-=1);for(var o=1;o<n;o++)if(arguments[o])for(var a=arguments[o],h=Object.keys(Object.getPrototypeOf(a)).length?Object.keys(a).concat(id(a)):Object.keys(a),d=0;d<h.length;d++){var p=r[h[d]],c=a[h[d]];r[h[d]]=i&&((0,l.Kn)(c)||Array.isArray(c))?(0,l.Kn)(c)?(0,l.l7)({},p||{},c,i):(0,l.l7)([],p||[],c,i):c}return r}function id(s){for(var e=[];Object.getPrototypeOf(s)&&Object.keys(Object.getPrototypeOf(s)).length;)e=e.concat(Object.keys(Object.getPrototypeOf(s))),s=Object.getPrototypeOf(s);return e}function Br(s){for(var e=0,t=0;t<s.length;t++){var i=Ho(s[t],0);e<i&&(e=i)}return e+1}function Ho(s,e){var t=e,i=[];if(s.columns){e++;for(var r=0;r<s.columns.length;r++)i[r]=Ho(s.columns[r],e);for(var n=0;n<i.length;n++)t<i[n]&&(t=i[n]);e=t}return e}var Ze=(()=>(function(s){s.timer=null}(Ze||(Ze={})),Ze))();function Xn(s){var i=document.defaultView.getComputedStyle(s,null).getPropertyValue("transform").replace(/,/g,"");return{width:parseFloat(i.split(" ")[4]),height:parseFloat(i.split(" ")[5])}}function ji(s,e){s.classList.contains("e-bigger")&&e.classList.add("e-bigger")}function Jn(s,e){var i,t=s.getPrimaryKeyFieldNames()[0];return s.getCurrentViewRecords().filter(function(r,n){r[t]===e[t]&&(i=n)}),i}function $n(s,e){var t=function(s){var e=new z.lM,t=new z.hm({url:"",adaptor:new z.lM}),i=e.processQuery(t,s);return JSON.parse(i.data)}(e),i=new z.BH;return t.dataSource=i.resolve,t.action=s,{state:t,deffered:i}}function es(s){for(var e=s.getVisibleColumns(),t=0,i=0,r=0;r<e.length;r++)(0,l.o8)(e[r].width)?i++:-1!==e[r].width.toString().indexOf("%")&&t++;return("auto"===s.width||"string"==typeof s.width&&-1!==s.width.indexOf("%"))&&!s.groupSettings.showGroupedColumn&&s.groupSettings.columns.length&&t&&!i}function ld(s,e,t,i){var r=s.dataToBeUpdated[t].concat(e[t]).reduce(function(n,o){return n[o[i]]=void 0===n[o[i]]?o:Object.assign(n[o[i]],o),n},{});s.dataToBeUpdated[t]=Object.keys(r).map(function(n){return r[n]})}function Tt(s,e,t,i,r){(t[0].length||i)&&(r?e(te,t[0],r[0]):e(te,t[0])),s.isFrozenGrid()&&(t[1].length||i)&&(r?e("movable",t[1],r[1]):e("movable",t[1])),(s.getFrozenMode()===B||"Right"===s.getFrozenMode())&&(t[2].length||i)&&(r?e(Q,t[2],r[2]):e(Q,t[2]))}function No(s,e,t){return"movable"===e.getFreezeTableName()?[].slice.call(s.getMovableDataRows()[t].getElementsByClassName(N)):e.getFreezeTableName()===Q?[].slice.call(s.getFrozenRightDataRows()[t].getElementsByClassName(N)):[].slice.call(s.getDataRows()[t].getElementsByClassName(N))}function is(s,e,t,i){var r=s.getFrozenLeftCount(),n=s.getMovableColumnsCount();return i="movable"===e.getFreezeTableName()?i-r:e.getFreezeTableName()===Q?i-(r+n):i,No(s,e,t)[i]}function Vo(s,e,t,i,r,n,o){o||s.getFreezeTableName()===te||!e&&s.getFreezeTableName()===Q||1===n?t[fe(s.field)]=s.validationRules:"movable"!==s.getFreezeTableName()&&s.getFreezeTableName()?s.getFreezeTableName()===Q&&(r[fe(s.field)]=s.validationRules):i[fe(s.field)]=s.validationRules}function cd(s,e,t){var i,r=new l.eC;if("number"===e)try{i=r.getNumberPattern({format:s,currency:this.currency,useGrouping:!0},!0)}catch(a){i=s}else if("date"===e||"time"===e||"datetime"===e)try{if(i=r.getDatePattern({skeleton:s,type:e},t),(0,l.le)(i))throw"error"}catch(a){try{i=r.getDatePattern({format:s,type:e},t)}catch(h){i=s}}else i=s;if("number"!==e){var o={G:"",H:"h",c:"d","'":'"'," a":" AM/PM",yy:"yy",y:"yyyy",EEEE:"dddd",E:"ddd"};i=i.replace(/G|H|c|'| a|yy|y|EEEE|E/g,function(a){return o[a]})}return i}function rs(s,e){for(var t,i=s.split(".").length,r=s.split("."),n=e,o=0;o<i;o++)n=t=n[r[o]];return t}function me(s,e,t,i){for(var r=0,n=e;r<n.length;r++){var o=n[r];t?s.on(o.event,o.handler,i):s.off(o.event,o.handler)}}function ud(s,e){for(var t,i=0,r=s.columnModel;i<r.length;i++){var n=r[i];if(n.uid===e){t=n;break}}return t}function Uo(s,e){var t;s.columnModel||s.getColumns();for(var i=0,r=s.columnModel;i<r.length;i++){var n=r[i];if(n.field===e){t=n;break}}return t}function Wo(s,e,t,i){i.eventHandlers[s]={};for(var r=0;r<e.length;r++)i.eventHandlers[s][e[r]]=t[e[r]]}function Ko(s,e,t){for(var i=0;i<e.length&&!s.isDestroyed;i++)s.removeEventListener(e[i],t.eventHandlers[s.element.id][e[i]])}function Wi(s,e){s.destroyTemplate(e),s.isReact&&s.renderTemplates()}function mt(s,e,t){var i=s,r=e,n=!1;if(t)for(var o=r[0];o<i.length;o++)for(var a=i[o],h=0;h<a.length;h++){if(n&&1===i[o][h])return[o,h];!n&&r.toString()===[o,h].toString()&&(n=!0)}else for(o=r[0];o>=0;o--)for(h=(a=i[o]).length-1;h>=0;h--){if(n&&1===i[o][h])return[o,h];!n&&r.toString()===[o,h].toString()&&(n=!0)}return r}var yt=function(){function s(e){this.existingPredicate={},this.foreignKeyQuery=new z.AE,this.filterState=!0,this.values={},this.renderEmpty=!1,this.isCheckboxFilterTemplate=!1,this.parent=e,this.id=this.parent.element.id,this.valueFormatter=new At(this.parent.locale),this.cBoxTrue=(0,ze.eE)(this.parent.createElement,!1,{checked:!0,label:" "}),this.cBoxFalse=(0,ze.eE)(this.parent.createElement,!1,{checked:!1,label:" "}),this.cBoxTrue.insertBefore(this.parent.createElement("input",{className:"e-chk-hidden",attrs:{type:"checkbox"}}),this.cBoxTrue.firstChild),this.cBoxFalse.insertBefore(this.parent.createElement("input",{className:"e-chk-hidden",attrs:{type:"checkbox"}}),this.cBoxFalse.firstChild),this.cBoxFalse.querySelector(".e-frame").classList.add("e-uncheck"),this.parent.enableRtl&&(0,l.cn)([this.cBoxTrue,this.cBoxFalse],["e-rtl"]),this.parent.cssClass&&(0,l.cn)([this.cBoxTrue,this.cBoxFalse],[this.parent.cssClass])}return s.prototype.destroy=function(){this.closeDialog()},s.prototype.wireEvents=function(){l.bi.add(this.dlg,"click",this.clickHandler,this),l.bi.add(this.dlg,"keyup",this.keyupHandler,this),this.searchHandler=(0,l.Ds)(this.searchBoxKeyUp,200);var e=this.dialogObj.element.querySelector(".e-searchinput");e&&l.bi.add(e,"keyup",this.searchHandler,this)},s.prototype.unWireEvents=function(){l.bi.remove(this.dlg,"click",this.clickHandler),l.bi.remove(this.dlg,"keyup",this.keyupHandler);var e=this.dialogObj.element.querySelector(".e-searchinput");e&&l.bi.remove(e,"keyup",this.searchHandler)},s.prototype.foreignKeyFilter=function(e,t,i){var r=this,n={},o=[],a=this.foreignKeyQuery.clone();this.options.column.dataSource.executeQuery(a.where(i)).then(function(h){r.options.column.columnData=h.result,r.parent.notify(si,{predicate:n,column:r.options.column}),e.ejpredicate=n.predicate.predicates;for(var d=n.predicate.predicates,p=0;p<d.length;p++)o.push({field:d[p].field,predicate:"or",matchCase:d[p].ignoreCase,ignoreAccent:d[p].ignoreAccent,operator:d[p].operator,value:d[p].value,type:r.options.type});e.filterCollection=o.length?o:t.filter(function(c){return c.field=r.options.field}),r.options.handler(e)})},s.prototype.foreignFilter=function(e,t){var r=new z.$G(this.options.column.foreignKeyValue,this.options.isRemote?"string"===this.options.column.type?"contains":"equal":this.options.column.type?"contains":"equal",t,!0,this.options.ignoreAccent);this.foreignKeyFilter(e,[e.filterCollection],r)},s.prototype.searchBoxClick=function(e){e.target.classList.contains("e-searchclear")&&(this.sInput.value="",this.isCheckboxFilterTemplate?this.parent.notify("refreshCheckbox",{event:e}):this.refreshCheckboxes(),this.updateSearchIcon(),this.sInput.focus())},s.prototype.searchBoxKeyUp=function(e){!(0,l.le)(this.parent.loadingIndicator)&&"Shimmer"===this.parent.loadingIndicator.indicatorType&&this.parent.showMaskRow(void 0,this.dialogObj.element),this.isCheckboxFilterTemplate?this.parent.notify("refreshCheckbox",{event:e}):this.refreshCheckboxes(),this.updateSearchIcon()},s.prototype.updateSearchIcon=function(){this.sInput.value.length?(0,l.s1)(this.sIcon,["e-chkcancel-icon"],["e-search-icon"]):(0,l.s1)(this.sIcon,["e-search-icon"],["e-chkcancel-icon"])},s.prototype.getLocalizedLabel=function(e){return this.localeObj.getConstant(e)},s.prototype.updateDataSource=function(){var e=this.options.dataSource;if(!(e instanceof z.hm))for(var i=0;i<e.length;i++)if("object"!=typeof e){var r={};r[this.options.field]=e[i],e[i]=r}},s.prototype.updateModel=function(e){this.options=e,this.existingPredicate=e.actualPredicate||{},this.options.dataSource=e.dataSource,this.options.dataManager=e.dataManager?e.dataManager:e.dataSource,this.updateDataSource(),this.options.type=e.type,this.options.format=e.format||"",this.options.ignoreAccent=e.ignoreAccent||!1,this.options.filteredColumns=e.filteredColumns||this.parent.filterSettings.columns,this.options.query=e.query||new z.AE,this.options.allowCaseSensitive=e.allowCaseSensitive||!1,this.options.uid=e.column.uid,this.options.disableHtmlEncode=e.column.disableHtmlEncode||!1,this.values={},this.localeObj=e.localeObj,this.isFiltered=e.filteredColumns.length},s.prototype.getAndSetChkElem=function(e){if(this.dlg=this.parent.createElement("div",{id:this.id+this.options.type+"_excelDlg",attrs:{uid:this.options.column.uid},className:"e-checkboxfilter e-filter-popup"}),this.sBox=this.parent.createElement("div",{className:"e-searchcontainer"}),!e.hideSearchbox){this.sInput=this.parent.createElement("input",{id:this.id+"_SearchBox",className:"e-searchinput"}),this.sIcon=this.parent.createElement("span",{className:"e-searchclear e-search-icon e-icons e-input-group-icon",attrs:{type:"text",title:this.getLocalizedLabel("Search")}}),this.searchBox=this.parent.createElement("span",{className:"e-searchbox e-fields"}),this.searchBox.appendChild(this.sInput),this.sBox.appendChild(this.searchBox);var t={element:this.sInput,floatLabelType:"Never",properties:{placeholder:this.getLocalizedLabel("Search"),cssClass:this.parent.cssClass}};it.II.createInput(t,this.parent.createElement),this.searchBox.querySelector(".e-input-group").appendChild(this.sIcon)}return this.spinner=this.parent.createElement("div",{className:"e-spinner"}),this.cBox=this.parent.createElement("div",{id:this.id+this.options.type+"_CheckBoxList",className:"e-checkboxlist e-fields"}),this.spinner.appendChild(this.cBox),this.sBox.appendChild(this.spinner),this.sBox},s.prototype.showDialog=function(e){var t={requestType:"filterbeforeopen",columnName:this.options.field,columnType:this.options.type,cancel:!1};t.filterModel=this,this.parent.notify("cbox-filter-begin",t),t.cancel?e.cancel=t.cancel:(this.dialogObj=new Ce.Vq({visible:!1,content:this.sBox,close:this.closeDialog.bind(this),enableRtl:this.parent.enableRtl,width:!(0,l.le)(w(e.target,"e-bigger"))||this.parent.element.classList.contains("e-device")?260:255,target:this.parent.element,animationSettings:{effect:"None"},buttons:[{click:this.btnClick.bind(this),buttonModel:{content:this.getLocalizedLabel(this.isExcel?"OKButton":"FilterButton"),cssClass:this.parent.cssClass?"e-primary "+this.parent.cssClass:"e-primary",isPrimary:!0}},{click:this.btnClick.bind(this),buttonModel:{cssClass:this.parent.cssClass?"e-flat "+this.parent.cssClass:"e-flat",content:this.getLocalizedLabel(this.isExcel?"CancelButton":"ClearButton")}}],created:this.dialogCreated.bind(this),open:this.dialogOpen.bind(this),cssClass:this.parent.cssClass?this.parent.cssClass:""}),this.dialogObj.isStringTemplate=!0,this.renderResponsiveFilter(e),this.dlg.setAttribute("aria-label",this.getLocalizedLabel("ExcelFilterDialogARIA")),e.isResponsiveFilter?document.querySelector(".e-responsive-dialog > .e-dlg-content > .e-mainfilterdiv").appendChild(this.dlg):this.parent.element.appendChild(this.dlg),this.dialogObj.appendTo(this.dlg),this.dialogObj.element.style.maxHeight=e.isResponsiveFilter?"none":this.options.height+"px",this.dialogObj.show(),this.dialogObj.element.querySelector(".e-dlg-content").appendChild(this.sBox),this.wireEvents(),(0,l.le)(this.parent.loadingIndicator)||"Shimmer"!==this.parent.loadingIndicator.indicatorType?((0,Ce.rj)({target:this.spinner,cssClass:this.parent.cssClass?this.parent.cssClass:null},this.parent.createElement),(0,Ce.yh)(this.spinner)):this.parent.showMaskRow(void 0,this.dialogObj.element),this.getAllData())},s.prototype.renderResponsiveFilter=function(e){e.isResponsiveFilter&&(this.dialogObj.buttons=[{}],this.dialogObj.position={X:"",Y:""},this.dialogObj.target=document.querySelector(".e-resfilter > .e-dlg-content > .e-mainfilterdiv"),this.dialogObj.width="100%")},s.prototype.dialogCreated=function(e){this.options.isResponsiveFilter?this.dialogObj.element.style.left="0px":l.AR.isDevice?this.dialogObj.position={X:"center",Y:"center"}:function(s,e){var t=e.element.style.display;e.element.style.display="block";var i=e.width,r=(0,Ce.Or)(s,e.element);e.element.style.display=t,e.element.style.top=r.top+s.getBoundingClientRect().height-5+"px";var n=r.left-i+s.clientWidth;e.element.style.left=n<1?i+n-16+"px":n+-4+"px"}(this.options.target,this.dialogObj),this.options.column.showColumnMenu&&this.parent.notify(ni,e)},s.prototype.openDialog=function(e){this.updateModel(e),this.getAndSetChkElem(e),this.showDialog(e)},s.prototype.closeDialog=function(){if(this.dialogObj&&!this.dialogObj.isDestroyed){this.isBlanks=!1;var e=this.options.columns.filter(function(i){return i.getFilterItemTemplate()}),t=this.parent.registeredTemplate;e.length&&!(0,l.le)(t)&&t.filterItemTemplate&&this.parent.destroyTemplate(["filterItemTemplate"]),(this.parent.isReact||this.parent.isVue)&&void 0!==this.parent.destroyTemplate&&Wi(this.parent,["filterItemTemplate"]),this.parent.notify("filter-menu-close",{field:this.options.field}),this.dialogObj.destroy(),this.unWireEvents(),(0,l.Od)(this.dlg),this.dlg=null,this.parent.notify(Ii,{})}},s.prototype.clearFilter=function(e){var t={instance:this,handler:this.clearFilter,cancel:!1};this.parent.notify(Fi,t),!t.cancel&&this.options.handler({action:"clear-filter",field:e?e.field:this.options.field})},s.prototype.btnClick=function(e){if(this.filterState){if("input"===e.target.tagName.toLowerCase()&&e.target.classList.contains("e-searchinput")||13===e.keyCode)this.isCheckboxFilterTemplate||this.fltrBtnHandler();else{var t=e.target.firstChild.textContent.toLowerCase();this.getLocalizedLabel(this.isExcel?"OKButton":"FilterButton").toLowerCase()===t?this.isCheckboxFilterTemplate||this.fltrBtnHandler():this.getLocalizedLabel("ClearButton").toLowerCase()===t&&this.clearFilter()}this.closeDialog()}else"input"!==e.target.tagName.toLowerCase()&&(this.clearFilter(),this.closeDialog());this.options.column.showColumnMenu&&this.parent.notify("after-filter-column-menu-close",{})},s.prototype.fltrBtnHandler=function(){var o,e=this,t=[].slice.call(this.cBox.querySelectorAll(".e-check:not(.e-selectall)")),i=t,r="equal",n=this.dialogObj.element.querySelector(".e-dropdownlist");n&&(this.options.operator=r=n.ej2_instances[0].value),this.isMenuNotEqual="notequal"===this.options.operator,this.options.hideSearchbox||(o=this.searchBox.querySelector(".e-searchinput"));var h={field:this.options.field,predicate:this.isMenuNotEqual?"and":"or",uid:this.options.uid,operator:r,type:this.options.type,matchCase:this.options.allowCaseSensitive,ignoreAccent:this.options.ignoreAccent},d=this.itemsCnt!==t.length&&this.itemsCnt-t.length<t.length;d&&o&&""===o.value&&(r=this.isMenuNotEqual?"equal":"notequal",t=[].slice.call(this.cBox.querySelectorAll(".e-uncheck:not(.e-selectall)")),h.predicate=this.isMenuNotEqual?"or":"and",h.operator=r);var p,c,f,g=[];if(t.length!==this.itemsCnt||o&&o.value&&""!==o.value){for(var v=0;v<t.length;v++){p=this.values[w(t[v],"e-ftrchk").getAttribute("uid")],f=(0,l.l7)({},{value:p},h),p&&!p.toString().length&&(f.operator=d?"notequal":"equal"),""===p||(0,l.le)(p)?g=g.concat(s.generateNullValuePredicates(h)):g.push(f);var m={instance:this,handler:this.fltrBtnHandler,arg1:f.field,arg2:f.predicate,arg3:f.operator,arg4:f.matchCase,arg5:f.ignoreAccent,arg6:f.value,cancel:!1};if(this.parent.notify(Fi,m),m.cancel)return}("date"===this.options.type||"datetime"===this.options.type)&&(c=this.values[w(i[i.length-1],"e-ftrchk").getAttribute("uid")],(0,l.le)(c)&&d&&g.push({field:h.field,matchCase:h.matchCase,operator:"equal",predicate:"and",value:null})),this.initiateFilter(g)}else this.options.filteredColumns.some(function(b){return e.options.field===b.field})&&this.clearFilter()},s.generateNullValuePredicates=function(e){var t=[];return"string"===e.type&&t.push({field:e.field,ignoreAccent:e.ignoreAccent,matchCase:e.matchCase,operator:e.operator,predicate:e.predicate,value:""}),t.push({field:e.field,matchCase:e.matchCase,operator:e.operator,predicate:e.predicate,value:null}),t.push({field:e.field,matchCase:e.matchCase,operator:e.operator,predicate:e.predicate,value:void 0}),t},s.prototype.initiateFilter=function(e){var i,t=e[0];if(!(0,l.le)(t)){i=t.ejpredicate?t.ejpredicate:new z.$G(t.field,t.operator,t.value,!t.matchCase,t.ignoreAccent);for(var r=1;r<e.length;r++)i=void 0!==e[r].ejpredicate?i[e[r].predicate](e[r].ejpredicate):i[e[r].predicate](e[r].field,e[r].operator,e[r].value,!e[r].matchCase,e[r].ignoreAccent);var n={action:"filtering",filterCollection:e,field:this.options.field,ejpredicate:z.$G.or(i)};this.options.handler(n)}},s.prototype.isForeignColumn=function(e){return!!e.isForeignColumn&&e.isForeignColumn()},s.prototype.refreshCheckboxes=function(){var e=this,t=this.sInput.value,i=this.options.column,r=this.isForeignColumn(i)?this.foreignKeyQuery.clone():this.options.query.clone(),n=this.options.query.clone(),o=r.queries.filter(function(y){return y&&"onWhere"===y.fn})[0];r.queries=[],n.queries=[];var a="string"!==this.options.type&&parseFloat(t)?parseFloat(t):t,h=this.options.isRemote?"string"===this.options.type?"contains":"equal":this.options.type?"contains":"equal",d=!0,p=this.options.ignoreAccent,c=this.isForeignColumn(i)?i.foreignKeyValue:i.field;a=""===a||void 0===a?void 0:a;var g,u=[],f={field:c,predicate:"or",uid:this.options.uid,operator:"equal",type:this.options.type,matchCase:d,ignoreAccent:p},v=this.options.dataManager.adaptor.getModuleName;if("boolean"===this.options.type&&(void 0!==a&&-1!==this.getLocalizedLabel("FilterTrue").toLowerCase().indexOf(a.toLowerCase())?a="true":void 0!==a&&-1!==this.getLocalizedLabel("FilterFalse").toLowerCase().indexOf(a.toLowerCase())&&(a="false"),void 0!==a&&-1!==this.getLocalizedLabel("FilterTrue").toLowerCase().indexOf(a.toLowerCase())&&v?(v(),a=!0):void 0!==a&&-1!==this.getLocalizedLabel("FilterFalse").toLowerCase().indexOf(a.toLowerCase())&&v&&(v(),a=!1),h="equal"),("date"===this.options.type||"datetime"===this.options.type)&&this.options.format){var m=new l.eC,C="string"==typeof this.options.format?this.options.format:this.options.format.format;a=C&&m.parseDate(t,{format:C})||new Date(t)}this.addDistinct(r),this.parent.trigger(Y,{requestType:"filtersearchbegin",filterModel:this,columnName:c,column:i,operator:h,matchCase:d,ignoreAccent:p,filterChoiceCount:null,query:r,value:a},function(y){if(y.operator=y.operator,g=new z.$G(c,y.operator,a,y.matchCase,y.ignoreAccent),"date"===e.options.type||"datetime"===e.options.type){var S={field:c,operator:h="equal",value:a,matchCase:d,ignoreAccent:p};(0,l.le)(a)||(g=It(S,e.options.type))}if(t&&"string"==typeof t&&e.isBlanks&&e.getLocalizedLabel("Blanks").toLowerCase().indexOf(t.toLowerCase())>=0){u=u.concat(s.generateNullValuePredicates(f));var R=s.generatePredicate(u);R.predicates.push(g),r.where(R)}else t.length?(g=(0,l.le)(o)?g:g.and(o.e),r.where(g)):(0,l.le)(o)||r.where(o.e);y.filterChoiceCount=(0,l.le)(y.filterChoiceCount)?1e3:y.filterChoiceCount;var F={};(0,Ce.yh)(e.spinner),e.renderEmpty=!1,e.isForeignColumn(i)&&t.length?("result"in i.dataSource?new z.hm(i.dataSource.result):i.dataSource).executeQuery(r).then(function(L){var k=e.options.column.columnData;e.options.column.columnData=L.result,e.parent.notify(si,{predicate:F,column:i}),F.predicate.predicates.length?n.where(F.predicate):e.renderEmpty=!0,e.options.column.columnData=k,n.take(y.filterChoiceCount),e.search(y,n)}):(r.take(y.filterChoiceCount),e.search(y,r))})},s.prototype.search=function(e,t){this.parent.dataSource&&"result"in this.parent.dataSource?this.filterEvent(e,t):this.processSearch(t)},s.prototype.getPredicateFromCols=function(e){for(var t=s.getPredicate(e),i=[],r={},n=void 0!==this.parent.getForeignKeyColumns,o=n?this.parent.getForeignKeyColumns():[],a=0,h=Object.keys(t);a<h.length;a++){var d=h[a],p=void 0;n&&!this.parent.getColumnByField(d)&&(p=Gi(d,o)),p?(this.parent.notify(si,{predicate:r,column:p}),r.predicate.predicates.length&&i.push(z.$G.or(r.predicate.predicates))):i.push(t[d])}return i.length&&z.$G.and(i)},s.prototype.getQuery=function(){return this.parent.getQuery?this.parent.getQuery().clone():new z.AE},s.prototype.getAllData=function(){var e=this;this.customQuery=!1;var t=this.getQuery();t.requiresCount(),this.addDistinct(t);var i={requestType:Fs,query:t,filterChoiceCount:null};i.filterModel=this,this.parent.trigger(Y,i,function(n){n.filterChoiceCount=(0,l.le)(n.filterChoiceCount)?1e3:n.filterChoiceCount,t.take(n.filterChoiceCount),n.query.distincts.length||(e.customQuery=!0,e.queryGenerate(t)),e.parent.dataSource&&"result"in e.parent.dataSource?e.filterEvent(n,t):e.processDataOperation(t,!0)})},s.prototype.addDistinct=function(e){var t=z.j4.distinct(this.options.filteredColumns,"field");return t.indexOf(this.options.column.field)<=-1&&(t=t.concat(this.options.column.field)),e.distinct(t),e},s.prototype.filterEvent=function(e,t){var i=this,r=$n(e,t);this.parent.trigger(Si,r.state),r.deffered.promise.then(function(o){i.dataSuccess(o)})},s.prototype.processDataOperation=function(e,t){var i=this;this.options.dataSource=this.options.dataSource instanceof z.hm?this.options.dataSource:new z.hm(this.options.dataSource);var r=[],n=[];if(this.isForeignColumn(this.options.column)&&t){var o="result"in this.options.column.dataSource?new z.hm(this.options.column.dataSource.result):this.options.column.dataSource;this.foreignKeyQuery.params=e.params,r.push(o.executeQuery(this.foreignKeyQuery)),n.push(function(h){return i.foreignKeyData=h})}r.push(this.options.dataSource.executeQuery(e)),n.push(this.dataSuccess.bind(this));var a=0;Promise.all(r).then(function(h){for(var d=0;d<h.length;d++)n[a++](h[d].result)})},s.prototype.dataSuccess=function(e){this.fullData=e;var t={dataSource:this.fullData,executeQuery:!0,field:this.options.field};if(this.parent.notify("beforeCheckboxRenderer",t),t.executeQuery){var i=new z.AE;this.customQuery||this.queryGenerate(i);var r=new z.hm(t.dataSource).executeLocal(i);this.filteredData=s.getDistinct(r,this.options.field,this.options.column,this.foreignKeyData).records||[]}this.processDataSource(null,!0,t.executeQuery?this.filteredData:t.dataSource,t),this.sInput&&this.sInput.focus();var a={requestType:"filterafteropen",columnName:this.options.field,columnType:this.options.type};a.filterModel=this,this.parent.notify(oi,a),this.isCheckboxFilterTemplate&&(0,Ce.v3)(this.spinner)},s.prototype.queryGenerate=function(e){if(this.parent.searchSettings&&this.parent.searchSettings.key.length){var t=this.parent.searchSettings,i=t.fields.length?t.fields:this.options.columns.map(function(h){return h.field});e.search(t.key,i,t.operator,t.ignoreCase,t.ignoreAccent)}if(this.options.filteredColumns.length){for(var r=[],n=0;n<this.options.filteredColumns.length;n++){var o=this.options.filteredColumns[n];this.options.uid?(o.uid=o.uid||this.parent.getColumnByField(o.field).uid,o.uid!==this.options.uid&&r.push(this.options.filteredColumns[n])):o.field!==this.options.field&&r.push(this.options.filteredColumns[n])}var a=this.getPredicateFromCols(r);a&&e.where(a)}},s.prototype.processDataSource=function(e,t,i,r){(0,Ce.yh)(this.spinner),this.updateResult();var n={dataSource:this.fullData,isCheckboxFilterTemplate:!1,column:this.options.column,element:this.cBox,type:this.options.type,format:this.options.type,btnObj:this.options.isResponsiveFilter?null:this.dialogObj.btnObj[0],searchBox:this.searchBox};this.parent.notify("beforeCheckboxfilterRenderer",n),this.isCheckboxFilterTemplate=n.isCheckboxFilterTemplate,this.isCheckboxFilterTemplate||this.createFilterItems(i,t,r)},s.prototype.processSearch=function(e){this.processDataOperation(e)},s.prototype.updateResult=function(){this.result={};var e=this.getPredicateFromCols(this.options.filteredColumns),t=new z.AE;e&&t.where(e),this.parent.notify("before-checkbox-renderer-query",{query:t});for(var r=0,n=new z.hm(this.fullData).executeLocal(t);r<n.length;r++)this.result[ne(this.options.field,n[r])]=!0},s.prototype.clickHandler=function(e){var t=e.target;if((0,l.le)(this.parent.loadingIndicator)||"Shimmer"!==this.parent.loadingIndicator.indicatorType||!w(t,"e-mask-ftrchk")){var i=w(t,"e-checkbox-wrapper");if(w(t,"e-searchbox")&&this.searchBoxClick(e),i&&!this.isCheckboxFilterTemplate){var r=i.querySelector(".e-selectall");r?this.updateAllCBoxes(!r.classList.contains("e-check")):function(s){var e=s.querySelector(".e-frame"),t=e.previousSibling;e.classList.contains("e-check")?(t.checked=!1,(0,l.s1)(e,["e-uncheck"],["e-check"])):(t.checked=!0,(0,l.s1)(e,["e-check"],["e-uncheck"]))}(i.parentElement),this.updateIndeterminatenBtn(),i.querySelector(".e-chk-hidden").focus()}this.setFocus(w(i,"e-ftrchk"))}},s.prototype.keyupHandler=function(e){this.setFocus(w(e.target,"e-ftrchk"))},s.prototype.setFocus=function(e){var t=this.dlg.querySelector(".e-chkfocus");t&&t.classList.remove("e-chkfocus"),e&&e.classList.add("e-chkfocus")},s.prototype.updateAllCBoxes=function(e){for(var i=0,r=[].slice.call(this.cBox.getElementsByClassName("e-frame"));i<r.length;i++){var n=r[i];Vi(n,e),Wt(n.previousSibling,e)}},s.prototype.dialogOpen=function(){this.parent.element.classList.contains("e-device")&&(this.dialogObj.element.querySelector(".e-input-group").classList.remove("e-input-focus"),this.options.isResponsiveFilter||this.dialogObj.element.querySelector(".e-btn").focus())},s.prototype.createCheckbox=function(e,t,i){var r=t?this.cBoxTrue.cloneNode(!0):this.cBoxFalse.cloneNode(!0);Wt(r.querySelector("input"),t);var n=r.querySelector(".e-label"),o=Lr({},i,{column:this.options.column,parent:this.parent});return n[this.options.disableHtmlEncode?"textContent":"innerHTML"]=!(0,l.le)(e)&&e.toString().length?e:this.getLocalizedLabel("Blanks"),n.innerHTML===this.getLocalizedLabel("Blanks")&&(this.isBlanks=!0),"boolean"==typeof e&&(n.innerHTML=this.getLocalizedLabel(!0===e?"FilterTrue":"FilterFalse")),(0,l.cn)([n],["e-checkboxfiltertext"]),this.options.template&&i[this.options.column.field]!==this.getLocalizedLabel("SelectAll")&&(n.innerHTML="",this.parent.isReact&&this.options.column.filter&&"string"!=typeof this.options.column.filter.itemTemplate||this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact?(this.options.template(o,this.parent,"filterItemTemplate",null,null,null,n),this.parent.renderTemplates()):ye(n,this.options.template(o,this.parent,"filterItemTemplate"))),r},s.prototype.updateIndeterminatenBtn=function(){var o,e=this.cBox.children.length-1,t=[],i=!1,r=this.cBox.querySelector(".e-selectall"),n=this.cBox.querySelectorAll(".e-check:not(.e-selectall)").length;this.options.isResponsiveFilter||((o=this.dialogObj.btnObj[0]).disabled=!1);var a=r.previousSibling;Wt(a,!1),a.indeterminate=!1,e===n?(t=["e-check"],Wt(a,!0)):n?(t=["e-stop"],a.indeterminate=!0):(t=["e-uncheck"],i=!0,o&&(o.disabled=!0)),o&&(this.filterState=!o.disabled,o.dataBind()),(0,l.IV)([r],["e-check","e-stop","e-uncheck"]),(0,l.cn)([r],t),this.parent.notify(Tn,{disabled:i})},s.prototype.createFilterItems=function(e,t,i){var r,o,n=this.parent.createElement("div"),a=!1;this.options.isResponsiveFilter||(o=this.dialogObj.btnObj[0]);var h=-1,d="ejValue";i.executeQuery||(d=i.field);for(var p=0;p<e.length;p++){var c=(0,l.NA)(d,e[p]);(""===c||(0,l.le)(c))&&(h+=1)}if(this.itemsCnt=-1!==h?e.length-h:e.length,e.length&&!this.renderEmpty){var u=this.getLocalizedLabel("SelectAll"),f=this.cBox.querySelector(".e-checkfltrnmdiv");f&&f.classList.remove("e-checkfltrnmdiv");var g=this.createCheckbox(u,!1,((r={})[this.options.field]=u,r));this.parent.cssClass&&(0,l.cn)([g],[this.parent.cssClass]);var v=Tr(Ue("cbox"),g,"e-ftrchk");v.querySelector(".e-frame").classList.add("e-selectall"),n.appendChild(v);var m=new z.$G("field","equal",this.options.field);this.options.foreignKeyValue&&(m=m.or("field","equal",this.options.foreignKeyValue));var C=new z.hm(this.options.filteredColumns).executeLocal((new z.AE).where(m)).length,b=void 0;for(p=0;p<e.length;p++){var y=Ue("cbox");this.values[y]=(0,l.NA)(d,e[p]);var S=(0,l.NA)(this.options.field,e[p]);this.options.formatFn&&(S=this.valueFormatter.toView(S,this.options.formatFn));var R={value:S,column:this.options.column,data:e[p]};if(this.parent.notify(Ys,R),""===(S=R.value)||(0,l.le)(S)){if(b)continue;b=!0}var F=this.createCheckbox(S,this.getCheckedState(C,this.values[y]),(0,l.NA)("dataObj",e[p]));n.appendChild(Tr(y,F,"e-ftrchk"))}this.cBox.innerHTML="",ye(this.cBox,[].slice.call(n.children)),this.updateIndeterminatenBtn(),o&&(o.disabled=!1),a=!1}else n.appendChild(this.parent.createElement("span",{innerHTML:this.getLocalizedLabel("NoResult")})),this.cBox.innerHTML="",this.cBox.appendChild(this.parent.createElement("div",{className:"e-checkfltrnmdiv"})),ye(this.cBox.children[0],[].slice.call(n.children)),o&&(o.disabled=!0),a=!0;o&&e.length&&(this.filterState=!o.disabled,o.dataBind());var D={requestType:Fs,dataSource:this.renderEmpty?[]:e};D.filterModel=this,this.parent.notify(oi,D),this.parent.notify(Tn,{disabled:a}),(0,Ce.v3)(this.spinner)},s.prototype.getCheckedState=function(e,t){if(!this.isFiltered||!e)return!0;var i=this.result[t];return"notequal"===this.options.operator?!i:i},s.getDistinct=function(e,t,i,r){for(var a,n=e.length,o=[],d={},p=!(!i||!i.isForeignColumn)&&i.isForeignColumn();n--;)if(!((a=ne(t,a=e[n]))in d)){var c={};if(c.ejValue=a,d[a]=!0,p){var u=Mt(i,{},a,r)[0];(0,l.sO)(js,u,e[n]),a=(0,l.NA)(i.foreignKeyValue,u)}(0,l.sO)(t,(0,l.le)(a)?null:a,c),(0,l.sO)("dataObj",e[n],c),o.push(c)}return z.j4.group(z.j4.sort(o,t,z.j4.fnAscending),"ejValue")},s.getPredicate=function(e){for(var t=z.j4.distinct(e,"field",!0)||[],i=[],r={},n=0;n<t.length;n++)0!==(i=new z.hm(e).executeLocal((new z.AE).where("field","equal",t[n].field))).length&&(r[t[n].field]=s.generatePredicate(i));return r},s.generatePredicate=function(e){var i,t=e?e.length:0,n=s.updateDateFilter(e[0]);n.ignoreAccent=!(0,l.le)(n.ignoreAccent)&&n.ignoreAccent,i="date"===n.type||"datetime"===n.type?It(n,n.type):n.ejpredicate?n.ejpredicate:new z.$G(n.field,n.operator,n.value,!s.getCaseValue(n),n.ignoreAccent);for(var o=1;o<t;o++)e[o]=s.updateDateFilter(e[o]),t>2&&o>1&&"or"===e[o].predicate?i.predicates.push("date"===e[o].type||"datetime"===e[o].type?It(e[o],e[o].type):new z.$G(e[o].field,e[o].operator,e[o].value,!s.getCaseValue(e[o]),e[o].ignoreAccent)):i="date"===e[o].type||"datetime"===e[o].type?"and"===e[o].predicate&&"equal"===e[o].operator?i.or(It(e[o],e[o].type),e[o].type,e[o].ignoreAccent):i[e[o].predicate](It(e[o],e[o].type),e[o].type,e[o].ignoreAccent):e[o].ejpredicate?i[e[o].predicate](e[o].ejpredicate):i[e[o].predicate](e[o].field,e[o].operator,e[o].value,!s.getCaseValue(e[o]),e[o].ignoreAccent);return i||null},s.getCaseValue=function(e){return(0,l.le)(e.matchCase)?!("string"===e.type||(0,l.le)(e.type)&&"string"==typeof e.value):e.matchCase},s.updateDateFilter=function(e){return("date"===e.type||"datetime"===e.type||e.value instanceof Date)&&(e.type=e.type||"date"),e},s}(),fd=function(){var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])})(e,t)};return function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),Yo=function(s){function e(t,i){var r=s.call(this,t)||this;return r.childRefs=[],r.eventHandlers={},r.isDevice=!1,r.customFilterOperators=i,r.isExcel=!0,r}return fd(e,s),e.prototype.getCMenuDS=function(t,i){var r={number:["Equal","NotEqual","","LessThan","LessThanOrEqual","GreaterThan","GreaterThanOrEqual","Between","","CustomFilter"],string:["Equal","NotEqual","","StartsWith","EndsWith","","Contains","","CustomFilter"]};r.date=r.number,r.datetime=r.number;for(var n=[],o=0;o<r[t].length;o++)n.push(r[t][o].length?i?{text:this.getLocalizedLabel(r[t][o])+"...",iconCss:"e-icons e-icon-check "+(i===r[t][o].toLowerCase()?"":"e-emptyicon")}:{text:this.getLocalizedLabel(r[t][o])+"..."}:{separator:!0});return n},e.prototype.destroy=function(){if(this.dlg&&(this.unwireExEvents(),s.prototype.closeDialog.call(this)),!this.isDevice&&this.menuObj){var t=this.menuObj.element.querySelector("li.e-focused");t&&w(t,"e-excel-menu")||this.destroyCMenu()}this.dlgObj&&!this.dlgObj.isDestroyed&&this.removeDialog()},e.prototype.createMenu=function(t,i,r,n){this.menu=this.parent.createElement("div",{className:"e-contextmenu-wrapper"}),this.parent.enableRtl?this.menu.classList.add("e-rtl"):this.menu.classList.remove("e-rtl"),this.parent.cssClass&&this.menu.classList.add(this.parent.cssClass);var a=this.parent.createElement("ul"),h=i?"e-excl-filter-icon e-filtered":"e-excl-filter-icon";if(this.parent.allowSorting&&"grid"===this.parent.getModuleName()&&!this.options.isResponsiveFilter){var d=this.parent.getColumnHeaderByUid(n.uid).getAttribute("aria-sort"),p=this.parent.getColumnByField(n.field).allowSorting,c=p&&"ascending"!==d?"e-excel-ascending":"e-disabled e-excel-ascending",u=p&&"descending"!==d?"e-excel-descending":"e-disabled e-excel-descending",f=this.getLocalizedLabel("string"===t?"SortAtoZ":"datetime"===t||"date"===t?"SortByOldest":"SortSmallestToLargest"),g=this.getLocalizedLabel("string"===t?"SortZtoA":"datetime"===t||"date"===t?"SortByNewest":"SortLargestToSmallest");a.appendChild(this.createMenuElem(f,c,"e-sortascending")),a.appendChild(this.createMenuElem(g,u,"e-sortdescending"));var v=this.parent.createElement("li",{className:"e-separator e-menu-item e-excel-separator"});a.appendChild(v)}this.options.isResponsiveFilter||a.appendChild(this.createMenuElem(this.getLocalizedLabel("ClearFilter"),i?"":"e-disabled",h)),"boolean"!==t&&a.appendChild(this.createMenuElem(this.getLocalizedLabel({string:"TextFilter",date:"DateFilter",datetime:"DateTimeFilter",number:"NumberFilter"}[t]),"e-submenu",r&&this.ensureTextFilter()?"e-icon-check":h+" e-emptyicon",!0)),this.menu.appendChild(a),this.parent.notify(Qs,{element:this.menu}),this.parent.notify(lo,{isFiltered:i})},e.prototype.createMenuElem=function(t,i,r,n){var o=this.parent.createElement("li",{className:i+" e-menu-item"});return o.innerHTML=t,o.insertBefore(this.parent.createElement("span",{className:"e-menu-icon e-icons "+r,attrs:{"aria-hidden":"true"}}),o.firstChild),n&&o.appendChild(this.parent.createElement("span",{className:"e-icons e-caret"})),o},e.prototype.wireExEvents=function(){l.bi.add(this.dlg,"mouseover",this.hoverHandler,this),l.bi.add(this.dlg,"click",this.clickExHandler,this)},e.prototype.unwireExEvents=function(){l.bi.remove(this.dlg,"mouseover",this.hoverHandler),l.bi.remove(this.dlg,"click",this.clickExHandler)},e.prototype.clickExHandler=function(t){var r=w(t.target,"e-menu-item");r&&(this.getLocalizedLabel("ClearFilter")===r.innerText.trim()?(this.clearFilter(),this.closeDialog()):this.options.isResponsiveFilter&&this.getLocalizedLabel({string:"TextFilter",date:"DateFilter",datetime:"DateTimeFilter",number:"NumberFilter"}[this.options.type])===r.innerText.trim()&&this.hoverHandler(t))},e.prototype.destroyCMenu=function(){this.isCMenuOpen=!1,this.menuObj&&!this.menuObj.isDestroyed&&(this.menuObj.destroy(),(0,l.Od)(this.cmenu),this.parent.notify(En,{target:null,header:"",isOpen:!1,col:this.options.column}))},e.prototype.hoverHandler=function(t){if(!this.options.isResponsiveFilter||"mouseover"!==t.type){var o,i=t.target.querySelector(".e-contextmenu"),r=w(t.target,"e-menu-item"),n=this.menu.querySelector(".e-focused");if(n&&n.classList.remove("e-focused"),r&&(r.classList.add("e-focused"),o=r.classList.contains("e-submenu")),!i){if(!o){var a=this.menu.querySelector(".e-submenu");(0,l.le)(a)||a.classList.remove("e-selected"),this.destroyCMenu()}var h=this.ensureTextFilter();if(!this.isCMenuOpen&&o){r.classList.add("e-selected"),this.isCMenuOpen=!0;var d={items:this.getCMenuDS(this.options.type,h?h.replace(/\s/g,""):void 0),select:this.selectHandler.bind(this),onClose:this.destroyCMenu.bind(this),enableRtl:this.parent.enableRtl,beforeClose:this.preventClose.bind(this),cssClass:this.options.isResponsiveFilter&&this.parent.cssClass?"e-res-contextmenu-wrapper "+this.parent.cssClass:this.options.isResponsiveFilter?"e-res-contextmenu-wrapper":this.parent.cssClass?this.parent.cssClass:""};this.parent.element.appendChild(this.cmenu),this.menuObj=new Yt.xV(d,this.cmenu);var p=this.menu.querySelector(".e-submenu").getBoundingClientRect(),c={top:0,left:0};if(this.options.isResponsiveFilter){var g=document.querySelector(".e-responsive-dialog > .e-dlg-header-content").offsetHeight+4;this.menuObj.element.style.height="calc(100% - "+g+"px)",this.menuObj.open(g,0,document.body);var v=this.getLocalizedLabel({string:"TextFilter",date:"DateFilter",datetime:"DateTimeFilter",number:"NumberFilter"}[this.options.type]);this.parent.notify(En,{target:this.menuObj.element.parentElement,header:v,isOpen:!0})}else{if(l.AR.isDevice){this.isDevice=!0;var m=this.getContextBounds();c.top=(window.innerHeight-m.height)/2,c.left=(window.innerWidth-m.width)/2,this.closeDialog(),this.isDevice=!1}else c.top=l.AR.isIE?window.pageYOffset+p.top:window.scrollY+p.top,c.left=this.getCMenuYPosition(this.dlg);this.menuObj.open(c.top,c.left,t.target)}ji(this.parent.element,this.menuObj.element.parentElement)}}}},e.prototype.ensureTextFilter=function(){var t,i=this.existingPredicate[this.options.field];return i&&2===i.length?t="greaterthanorequal"===i[0].operator&&"lessthanorequal"===i[1].operator?"between":"customfilter":i&&1===i.length&&(this.optrData=this.customFilterOperators[this.options.type+"Operator"],t=i[0].operator),t},e.prototype.preventClose=function(t){if(this.options&&this.options.isResponsiveFilter&&t.event){var i=t.event.target,r=i.classList.contains("e-resfilterback")||i.classList.contains("e-res-back-btn")||i.classList.contains("e-menu-item");t.cancel=!r}else t.event instanceof MouseEvent&&t.event.target.classList.contains("e-submenu")&&(t.cancel=!0)},e.prototype.getContextBounds=function(){return this.menuObj.element.style.display="block",this.menuObj.element.getBoundingClientRect()},e.prototype.getCMenuYPosition=function(t){var i=this.getContextBounds().width,r=t.getBoundingClientRect(),o=t.offsetWidth-t.clientWidth;return o=o?o+1:0,r.right+i-this.parent.element.clientWidth<1?r.right+1-o:r.left-i-1+o},e.prototype.openDialog=function(t){var i=this;if(this.updateModel(t),this.getAndSetChkElem(t),this.showDialog(t),!t.cancel){this.dialogObj.dataBind();var r=this.existingPredicate[t.field]&&this.existingPredicate[t.field].length||this.options.filteredColumns.filter(function(n){return i.options.field===n.field}).length;this.createMenu(t.type,r>0,1===r||2===r,t),this.dlg.insertBefore(this.menu,this.dlg.firstChild),this.dlg.classList.add("e-excelfilter"),this.parent.enableRtl&&this.dlg.classList.add("e-rtl"),this.dlg.classList.remove("e-checkboxfilter"),this.cmenu=this.parent.createElement("ul",{className:"e-excel-menu"}),t.column.showColumnMenu&&this.parent.notify(ni,{}),this.wireExEvents()}},e.prototype.closeDialog=function(){this.destroy()},e.prototype.selectHandler=function(t){t.item&&(this.parent.notify(Dn,{}),this.menuItem=t.item,this.renderDialogue(t))},e.prototype.renderDialogue=function(t){var i=this,r=t?t.element:void 0,n=this.options.field,o=!(0,l.le)(n)&&We(n),a=!(0,l.le)(n)&&fe(n),h=this.parent.createElement("div",{className:"e-xlfl-maindiv",id:o?a+"-xlflmenu":n+"-xlflmenu"});this.dlgDiv=this.parent.createElement("div",{className:"e-xlflmenu",id:o?a+"-xlfldlg":n+"-xlfldlg"}),this.options.isResponsiveFilter?document.querySelector(".e-resfilter > .e-dlg-content > .e-xl-customfilterdiv").appendChild(this.dlgDiv):this.parent.element.appendChild(this.dlgDiv),this.dlgObj=new Ce.Vq({header:this.getLocalizedLabel("CustomFilter"),isModal:!0,overlayClick:this.removeDialog.bind(this),showCloseIcon:!0,closeOnEscape:!1,target:document.body,visible:!1,enableRtl:this.parent.enableRtl,open:function(){var c=i.dlgObj.element.querySelector("table.e-xlfl-table>tr");if(i.options.column.filterTemplate){var u=We(i.options.column.field)?fe(i.options.column.field):i.options.column.field;c.querySelector("#"+u+"-xlfl-frstvalue").focus()}},close:this.removeDialog.bind(this),created:this.createdDialog.bind(this,r,n),buttons:[{click:this.filterBtnClick.bind(this,n),buttonModel:{content:this.getLocalizedLabel("OKButton"),isPrimary:!0,cssClass:this.parent.cssClass?"e-xlfl-okbtn "+this.parent.cssClass:"e-xlfl-okbtn"}},{click:this.removeDialog.bind(this),buttonModel:{content:this.getLocalizedLabel("CancelButton"),cssClass:this.parent.cssClass?"e-xlfl-cancelbtn "+this.parent.cssClass:"e-xlfl-cancelbtn"}}],content:h,width:430,animationSettings:{effect:"None"},cssClass:this.parent.cssClass?this.parent.cssClass:""}),this.dlgObj.isStringTemplate=!0,this.renderResponsiveDialog(),this.dlgDiv.setAttribute("aria-label",this.getLocalizedLabel("CustomFilterDialogARIA")),this.childRefs.push(this.dlgObj),this.dlgObj.appendTo(this.dlgDiv)},e.prototype.renderResponsiveDialog=function(){if(this.options.isResponsiveFilter){var t=document.querySelector(".e-row-responsive-filter");t&&t.classList.remove("e-row-responsive-filter"),this.dlgObj.buttons=[{}],this.dlgObj.header=void 0,this.dlgObj.position={X:"",Y:""},this.dlgObj.target=document.querySelector(".e-resfilter > .e-dlg-content > .e-xl-customfilterdiv"),this.dlgObj.width="100%",this.dlgObj.isModal=!1,this.dlgObj.showCloseIcon=!1}},e.prototype.removeDialog=function(){this.parent.notify(ho,{}),(this.parent.isReact||this.parent.isVue)&&void 0!==this.parent.destroyTemplate&&Wi(this.parent,["filterTemplate"]),this.removeObjects(this.childRefs),(0,l.Od)(this.dlgDiv),this.parent.notify(Ii,{})},e.prototype.createdDialog=function(t,i){if(this.renderCustomFilter(t,i),this.dlgObj.element.style.left="0px",this.options.isResponsiveFilter){var r=document.querySelector(".e-responsive-dialog > .e-dlg-header-content");this.dlgObj.element.style.top=r.offsetHeight+4+"px"}else this.dlgObj.element.style.top="0px";!this.options.isResponsiveFilter&&l.AR.isDevice&&window.innerWidth<440&&(this.dlgObj.element.style.width="90%"),this.parent.notify("beforeCustomFilterOpen",{column:i,dialog:this.dialogObj}),this.dlgObj.show(),ji(this.parent.element,this.dlgObj.element.parentElement)},e.prototype.renderCustomFilter=function(t,i){var r=this.dlgObj.element.querySelector(".e-xlfl-maindiv"),n=this.parent.createElement("div",{innerHTML:this.getLocalizedLabel("ShowRowsWhere"),className:"e-xlfl-dlgfields"});r.appendChild(n);var o=this.parent.createElement("div",{innerHTML:this.options.displayName,className:"e-xlfl-fieldset"});r.appendChild(o),this.renderFilterUI(i,r)},e.prototype.filterBtnClick=function(t){var p,i=!(0,l.le)(t)&&We(t),r=!(0,l.le)(t)&&fe(t),n=i?r:t,o=this.dlgDiv.querySelector("#"+n+"-xlfl-frstvalue").ej2_instances[0],a=this.dlgDiv.querySelector("#"+n+"-xlfl-frstoptr").ej2_instances[0],h=this.dlgDiv.querySelector("#"+n+"-xlfl-secndvalue").ej2_instances[0],d=this.dlgDiv.querySelector("#"+n+"-xlfl-secndoptr").ej2_instances[0];"string"===this.options.type&&(p=this.dlgDiv.querySelector("#"+n+"-xlflmtcase").ej2_instances[0].checked);var f=this.dlgDiv.querySelector("#"+n+"e-xlfl-frstpredicate").ej2_instances[0].checked?"and":"or";null===h.value&&(f="or"),this.filterByColumn(this.options.field,a.value,o.value,f,p,this.options.ignoreAccent,d.value,h.value),this.removeDialog()},e.prototype.filterByColumn=function(t,i,r,n,o,a,h,d){var f,p=this.parent.getColumnByField?this.parent.getColumnByField(t):this.options.column,c=this.isForeignColumn(p)?p.foreignKeyValue:t,u=[];u.push({field:c,predicate:n,matchCase:o,ignoreAccent:a,operator:i,value:r,type:this.options.type});var g={instance:this,handler:this.filterByColumn,arg1:t,arg2:i,arg3:r,arg4:n,arg5:o,arg6:a,arg7:h,arg8:d,cancel:!1};if(this.parent.notify(Fi,g),!g.cancel){f=new z.$G(c,i.toLowerCase(),r,!o,a),!(0,l.le)(d)&&!(0,l.le)(h)&&(u.push({field:c,predicate:n,matchCase:o,ignoreAccent:a,operator:h,value:d,type:this.options.type}),f=f[n](c,h.toLowerCase(),d,!o,a));var v={action:"filtering",filterCollection:u,field:this.options.field,ejpredicate:f,actualPredicate:u};this.isForeignColumn(p)?this.foreignKeyFilter(v,u,f):this.options.handler(v)}},e.prototype.renderOperatorUI=function(t,i,r,n,o){var a=this.parent.createElement("tr",{className:"e-xlfl-fields",attrs:{role:"row"}});i.appendChild(a);var h=this.parent.createElement("td",{className:"e-xlfl-optr"});a.appendChild(h);var d=this.parent.createElement("div",{className:"e-xlfl-optrdiv"}),p=!(0,l.le)(t)&&We(t),c=!(0,l.le)(t)&&fe(t),u=this.parent.createElement("input",{id:p?c+r:t+r});d.appendChild(u),h.appendChild(d);var g=this.customFilterOperators[this.options.type+"Operator"];this.optrData=g;var v=this.dropSelectedVal(this.options.column,n,o),m="";this.menuItem&&((m=this.menuItem.text.slice(0,-3))!==this.getLocalizedLabel("CustomFilter")&&(v=o?m:void 0),m===this.getLocalizedLabel("Between")&&(v=this.getLocalizedLabel(o?"GreaterThanOrEqual":"LessThanOrEqual")));var b=new rt.NB(Ut({dataSource:g,fields:{text:"text",value:"value"},text:v,enableRtl:this.parent.enableRtl,cssClass:this.parent.cssClass?this.parent.cssClass:null},this.options.column.filter.params));this.childRefs.push(b);var y={open:this.dropDownOpen.bind(this),change:this.dropDownValueChange.bind(this)};return Wo(u.id,[Ne,li],y,this),b.addEventListener(Ne,this.eventHandlers[u.id][Ne]),b.addEventListener(li,this.eventHandlers[u.id][li]),b.appendTo(u),{fieldElement:a,operator:this.getSelectedValue(v)}},e.prototype.removeHandlersFromComponent=function(t){t.element.classList.contains("e-dropdownlist")?Ko(t,[Ne,li],this):t.element.classList.contains("e-autocomplete")&&Ko(t,[H,hi],this)},e.prototype.dropDownOpen=function(t){t.popup.element.style.zIndex=(this.dialogObj.zIndex+1).toString()},e.prototype.dropDownValueChange=function(t){t.element.id.includes("-xlfl-frstoptr")?this.firstOperator=t.value.toString():this.secondOperator=t.value.toString()},e.prototype.getFilterUIInfo=function(){return{firstOperator:this.firstOperator,secondOperator:this.secondOperator,field:this.options.field}},e.prototype.getSelectedValue=function(t){var i=new z.hm(this.optrData).executeLocal((new z.AE).where("text","equal",t));return(0,l.le)(i[0])?"":i[0].value},e.prototype.dropSelectedVal=function(t,i,r){return this.getSelectedText(i&&i.length>0?2===i.length?r?i[0].operator:i[1].operator:r?i[0].operator:void 0:r&&"string"===t.type&&!t.filter.operator?"startswith":r?t.filter.operator||"equal":void 0)},e.prototype.getSelectedText=function(t){var i=new z.hm(this.optrData).executeLocal((new z.AE).where("value","equal",t));return(0,l.le)(i[0])?"":i[0].text},e.prototype.renderFilterUI=function(t,i){var r=this.existingPredicate[t],n=this.parent.createElement("table",{className:"e-xlfl-table",attrs:{role:"grid"}});i.appendChild(n);var o=this.parent.createElement(q);o.innerHTML='<col style="width: 50%"></col><col style="width: 50%"></col>',n.appendChild(o);var a=this.renderOperatorUI(t,n,"-xlfl-frstoptr",r,!0);this.firstOperator=a.operator,this.renderFlValueUI(t,a,"-xlfl-frstvalue",r,!0);var h=this.parent.createElement("tr",{className:"e-xlfl-predicate",attrs:{role:"row"}});n.appendChild(h),this.renderRadioButton(t,h,r),a=this.renderOperatorUI(t,n,"-xlfl-secndoptr",r,!1),this.secondOperator=a.operator,this.renderFlValueUI(t,a,"-xlfl-secndvalue",r,!1)},e.prototype.renderRadioButton=function(t,i,r){var n=this.parent.createElement("td",{className:"e-xlfl-radio",attrs:{colSpan:"2"}});i.appendChild(n);var o=this.parent.createElement("div",{className:"e-xlfl-radiodiv",attrs:{style:"display: inline-block"}}),a=!(0,l.le)(t)&&We(t),h=!(0,l.le)(t)&&fe(t),d=this.parent.createElement("input",{id:a?h+"e-xlfl-frstpredicate":t+"e-xlfl-frstpredicate",attrs:{type:"radio"}}),p=this.parent.createElement("input",{id:a?h+"e-xlfl-secndpredicate":t+"e-xlfl-secndpredicate",attrs:{type:"radio"}});o.appendChild(d),o.appendChild(p),n.appendChild(o),"string"===this.options.type&&this.renderMatchCase(t,i,n,"-xlflmtcase",r);var c=new ze.EU({label:this.getLocalizedLabel("AND"),name:"default",checked:!0,enableRtl:this.parent.enableRtl,cssClass:this.parent.cssClass?this.parent.cssClass:""});this.childRefs.push(c);var u=new ze.EU({label:this.getLocalizedLabel("OR"),name:"default",enableRtl:this.parent.enableRtl,cssClass:this.parent.cssClass?this.parent.cssClass:""});this.childRefs.push(u),"and"===(r&&2===r.length?r[1].predicate:"and")?(c.checked=!0,u.checked=!1):(u.checked=!0,c.checked=!1),c.appendTo(d),u.appendTo(p),c.element.nextElementSibling.classList.add("e-xlfl-radio-and"),u.element.nextElementSibling.classList.add("e-xlfl-radio-or")},e.prototype.removeObjects=function(t){for(var i=0,r=t;i<r.length;i++){var n=r[i];n&&!n.isDestroyed&&(this.removeHandlersFromComponent(n),n.destroy())}},e.prototype.renderFlValueUI=function(t,i,r,n,o){var a=this.parent.createElement("td",{className:"e-xlfl-value"});i.fieldElement.appendChild(a);var h=!(0,l.le)(t)&&We(t),d=!(0,l.le)(t)&&fe(t),p=this.parent.createElement("div",{className:"e-xlfl-valuediv"}),c=this.options.filteredColumns.some(function(D){return t===D.field}),u=this.options.filteredColumns.filter(function(D){return D.field===t});if(this.options.column.filterTemplate){var f={},g=this.options.column;c&&r&&(f=this.getExcelFilterData(r,f,g,n,u));var C=this.parent.element.id+g.uid+"filterTemplate";this.parent.isReact&&"string"!=typeof this.options.column.filterTemplate||this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact?(this.options.column.getFilterTemplate()(f,this.parent,"filterTemplate",C,null,null,p),this.parent.renderTemplates()):ye(p,this.options.column.getFilterTemplate()(f,this.parent,"filterTemplate",C)),(this.parent.isAngular?p.children[0]:p.querySelector("input")).id=h?d+r:t+r,a.appendChild(p)}else{var y=this.parent.createElement("input",{id:h?d+r:t+r});p.appendChild(y),a.appendChild(p);var S=void 0,R=void 0;n&&n.length>0&&(0,l.le)(S=(R=2===n.length?o?n[0]:n[1]:o?n[0]:void 0)&&R.operator===i.operator?R.value:void 0)&&(S=void 0),{string:this.renderAutoComplete.bind(this),number:this.renderNumericTextBox.bind(this),date:this.renderDate.bind(this),datetime:this.renderDateTime.bind(this)}[this.options.type](this.options,t,y,S,this.parent.enableRtl)}},e.prototype.getExcelFilterData=function(t,i,r,n,o){var a="-xlfl-frstvalue"===t?0:1;if("-xlfl-frstvalue"===t||o.length>1){var h=this.options.column.columnData&&o.length>1?1===this.options.column.columnData.length?0:1:a;(i={column:n instanceof Array?n[a]:n})[this.options.field]=r.foreignKeyValue?this.options.column.columnData[h][r.foreignKeyValue]:o[h].value,this.options.foreignKeyValue&&(i[this.options.foreignKeyValue]=this.options.column.columnData[h][r.foreignKeyValue])}return i},e.prototype.renderMatchCase=function(t,i,r,n,o){var a=this.parent.createElement("div",{className:"e-xlfl-matchcasediv",attrs:{style:"display: inline-block"}}),h=!(0,l.le)(t)&&We(t),d=!(0,l.le)(t)&&fe(t),p=this.parent.createElement("input",{id:h?d+n:t+n,attrs:{type:"checkbox"}});a.appendChild(p),r.appendChild(a);var c=!!(o&&o.length>0)&&(o&&2===o.length?o[1].matchCase:o[0].matchCase),u=new ze.Jg({label:this.getLocalizedLabel("MatchCase"),enableRtl:this.parent.enableRtl,checked:c,cssClass:this.parent.cssClass?this.parent.cssClass:""});this.childRefs.push(u),u.appendTo(p)},e.prototype.renderDate=function(t,i,r,n,o){var a=kr(t.format,t.type)||t.format,h=new kt.Mt(Ut({format:a,cssClass:this.parent.cssClass?"e-popup-flmenu "+this.parent.cssClass:"e-popup-flmenu",placeholder:this.getLocalizedLabel("CustomFilterDatePlaceHolder"),width:"100%",enableRtl:o,value:new Date(n),locale:this.parent.locale},t.column.filter.params));this.childRefs.push(h),h.appendTo(r)},e.prototype.renderDateTime=function(t,i,r,n,o){var a=kr(t.format,t.type),h=new kt.xZ(Ut({format:a,cssClass:this.parent.cssClass?"e-popup-flmenu "+this.parent.cssClass:"e-popup-flmenu",placeholder:this.getLocalizedLabel("CustomFilterDatePlaceHolder"),width:"100%",enableRtl:o,value:new Date(n),locale:this.parent.locale},t.column.filter.params));this.childRefs.push(h),h.appendTo(r)},e.prototype.completeAction=function(t){t.result=function(s){for(var e={},t=[],i=0;i<s.length;i++)s[i]in e||(t.push(s[i].toString()),e[s[i]]=1);return t}(t.result)},e.prototype.renderNumericTextBox=function(t,i,r,n,o){var a=new it.No(Ut({format:t.format,placeholder:this.getLocalizedLabel("CustomFilterPlaceHolder"),enableRtl:o,value:n,locale:this.parent.locale,cssClass:this.parent.cssClass?this.parent.cssClass:null},t.column.filter.params));this.childRefs.push(a),a.appendTo(r)},e.prototype.renderAutoComplete=function(t,i,r,n,o){var a=this.options.column,h=this.isForeignColumn(a),d=h?a.dataSource:t.dataSource,p={value:h?a.foreignKeyValue:i},c=new rt.Qc(Ut({dataSource:d instanceof z.hm?d:new z.hm(d),fields:p,query:this.getQuery(),sortOrder:"Ascending",locale:this.parent.locale,cssClass:this.parent.cssClass?"e-popup-flmenu "+this.parent.cssClass:"e-popup-flmenu",autofill:!0,placeholder:this.getLocalizedLabel("CustomFilterPlaceHolder"),enableRtl:o,text:n},a.filter.params));if(d&&"result"in d){var u=$n({requestType:"stringfilterrequest"},this.getQuery());this.parent.trigger(Si,u.state),u.deffered.promise.then(function(v){c.dataSource=new z.hm(v)})}this.childRefs.push(c);var g={actionComplete:this.acActionComplete(c,i),focus:this.acFocus(c,i,t,r)};Wo(r.id,[H,hi],g,this),c.addEventListener(hi,this.eventHandlers[r.id][hi]),c.addEventListener(H,this.eventHandlers[r.id][H]),c.appendTo(r)},e.prototype.acActionComplete=function(t,i){return function(r){var n=!(0,l.le)(i)&&We(i);r.result=r.result.filter(function(o,a,h){return h.map(function(d){return n?rs(t.fields.value,d):d[t.fields.value]}).indexOf(n?rs(t.fields.value,o):o[t.fields.value])===a})}},e.prototype.acFocus=function(t,i,r,n){var o=this;return function(){var a=!(0,l.le)(i)&&We(i),h=!(0,l.le)(i)&&fe(i),d=a?h:i;t.filterType=o.dlgDiv.querySelector("#"+d+(n.id===d+"-xlfl-frstvalue"?"-xlfl-frstoptr":"-xlfl-secndoptr")).ej2_instances[0].value,t.ignoreCase="string"!==r.type||!o.dlgDiv.querySelector("#"+d+"-xlflmtcase").ej2_instances[0].checked,t.filterType=(0,l.le)(t.filterType)?"equal":t.filterType}},e}(yt),ui=function(){function s(e,t,i,r){this.contentRefresh=!0,this.isModelChanged=!0,this.aria=new Bi,this.currentTarget=null,this.parent=e,this.sortSettings=t,this.sortedColumns=i,this.serviceLocator=r,this.focus=r.getService("focus"),this.addEventListener(),this.setFullScreenDialog()}return s.prototype.updateModel=function(){var t,e={field:this.columnName,direction:this.direction},i=this.parent.groupSettings.columns,r=!1;if(this.isMultiSort)(t=this.getSortedColsIndexByField(this.columnName))>-1&&this.sortSettings.columns.splice(t,1),this.sortSettings.columns.push(e),this.sortSettings.columns=this.sortSettings.columns;else if(i.length){for(var n=[],o=0,a=i.length;o<a;o++)if(t=this.getSortedColsIndexByField(i[o],n),this.columnName===i[o])r=!0,n.push(e);else{var h=this.getSortColumnFromField(i[o]);n.push({field:h.field,direction:h.direction,isFromGroup:h.isFromGroup})}r||n.push(e),this.sortSettings.columns=n}else this.sortSettings.columns=[e];this.parent.dataBind(),this.lastSortedCol=this.columnName},s.prototype.onActionComplete=function(e){var t=this.isRemove?{requestType:"sorting",type:H}:{columnName:this.columnName,direction:this.direction,requestType:"sorting",type:H};this.isRemove=!1,this.parent.trigger(H,(0,l.l7)(e,t))},s.prototype.sortColumn=function(e,t,i){var r=this.parent;!1===this.parent.getColumnByField(e).allowSorting||this.parent.isContextMenuOpen()?this.parent.log("action_disabled_column",{moduleName:this.getModuleName(),columnName:e}):(r.allowMultiSorting||(i=r.allowMultiSorting),this.isActionPrevent()?r.notify(Le,{instance:this,handler:this.sortColumn,arg1:e,arg2:t,arg3:i}):(this.backupSettings(),this.columnName=e,this.direction=t,this.isMultiSort=i,this.removeSortIcons(),this.updateSortedCols(e,i),this.updateModel()))},s.prototype.setFullScreenDialog=function(){this.serviceLocator&&this.serviceLocator.registerAdaptiveService(this,this.parent.enableAdaptiveUI,K.isSort)},s.prototype.backupSettings=function(){this.lastSortedCols=Oi(this.sortSettings.columns),this.lastCols=this.sortedColumns},s.prototype.restoreSettings=function(){this.isModelChanged=!1,this.isMultiSort=!0,this.parent.setProperties({sortSettings:{columns:this.lastSortedCols}},!0),this.sortedColumns=this.lastCols,this.isModelChanged=!0},s.prototype.updateSortedCols=function(e,t){if(!t)if(this.parent.allowGrouping)for(var i=0,r=this.sortedColumns.length;i<r;i++)this.parent.groupSettings.columns.indexOf(this.sortedColumns[i])<0&&(this.sortedColumns.splice(i,1),r--,i--);else this.sortedColumns.splice(0,this.sortedColumns.length);this.sortedColumns.indexOf(e)<0&&this.sortedColumns.push(e)},s.prototype.onPropertyChanged=function(e){e.module===this.getModuleName()&&(this.contentRefresh&&this.parent.notify(ve,this.sortSettings.columns.length?{columnName:this.columnName,direction:this.direction,requestType:"sorting",type:Y,target:this.currentTarget,cancel:!1}:{requestType:"sorting",type:Y,cancel:!1,target:this.currentTarget}),this.refreshSortSettings(),this.removeSortIcons(),this.addSortIcons())},s.prototype.refreshSortSettings=function(){this.sortedColumns.length=0;for(var e=this.sortSettings.columns,t=0;t<e.length;t++)e[t].isFromGroup||this.sortedColumns.push(e[t].field)},s.prototype.clearSorting=function(){var e=Zn(this.sortSettings.columns);if(this.isActionPrevent())this.parent.notify(Le,{instance:this,handler:this.clearSorting});else for(var t=0,i=e.length;t<i;t++)this.removeSortColumn(e[t].field)},s.prototype.isActionPrevent=function(){return lt(this.parent)},s.prototype.removeSortColumn=function(e){var t=this.parent,i=this.sortSettings.columns;if(!(0===i.length&&this.sortedColumns.indexOf(e)<0)){if(this.isActionPrevent())return void this.parent.notify(Le,{instance:this,handler:this.removeSortColumn,arg1:e});this.backupSettings(),this.removeSortIcons();for(var r={requestType:"sorting",type:Y,target:this.currentTarget},n=0,o=i.length;n<o;n++)if(i[n].field===e){if(t.allowGrouping&&t.groupSettings.columns.indexOf(i[n].field)>-1)continue;this.sortedColumns.splice(this.sortedColumns.indexOf(i[n].field),1),i.splice(n,1),this.isRemove=!0,this.isModelChanged&&this.parent.notify(ve,r);break}r.cancel||this.addSortIcons()}},s.prototype.getSortedColsIndexByField=function(e,t){for(var i=t||this.sortSettings.columns,r=0,n=i.length;r<n;r++)if(i[r].field===e)return r;return-1},s.prototype.getModuleName=function(){return"sort"},s.prototype.initialEnd=function(){if(this.parent.off(ee,this.initialEnd),this.parent.getColumns().length&&this.sortSettings.columns.length){var e=this.parent;this.contentRefresh=!1,this.isMultiSort=this.sortSettings.columns.length>1;for(var t=0,i=e.sortSettings.columns.slice();t<i.length;t++){var r=i[t];this.sortedColumns.indexOf(r.field)>-1&&this.sortColumn(r.field,r.direction,!0)}this.isMultiSort=!1,this.contentRefresh=!0}},s.prototype.addEventListener=function(){this.parent.isDestroyed||(this.evtHandlers=[{event:Ti,handler:this.setFullScreenDialog},{event:ee,handler:this.initialEnd},{event:Xr,handler:this.onActionComplete},{event:Se,handler:this.onPropertyChanged},{event:xe,handler:this.clickHandler},{event:ue,handler:this.refreshSortIcons},{event:oe,handler:this.keyPressed},{event:ar,handler:this.cancelBeginEvent},{event:V,handler:this.destroy}],me(this.parent,this.evtHandlers,!0,this))},s.prototype.removeEventListener=function(){this.parent.isDestroyed||me(this.parent,this.evtHandlers,!1)},s.prototype.destroy=function(){this.isModelChanged=!1;var e=this.parent.element;!e||!e.querySelector("."+pe)&&!e.querySelector("."+ae)||(this.parent.element.querySelector(".e-gridpopup").getElementsByClassName("e-sortdirect").length&&(this.parent.element.querySelector(".e-gridpopup").style.display="none"),!this.parent.refreshing&&(this.parent.isDestroyed||!this.parent.allowSorting)&&this.clearSorting(),this.isModelChanged=!0,this.removeEventListener())},s.prototype.cancelBeginEvent=function(e){"sorting"===e.requestType&&(this.restoreSettings(),this.refreshSortIcons(),this.isMultiSort=!0)},s.prototype.clickHandler=function(e){var t=this.parent;this.currentTarget=null,this.popUpClickHandler(e);var i=(0,l.oq)(e.target,".e-headercell");if(i&&!e.target.classList.contains("e-grptogglebtn")&&!i.classList.contains("e-resized")&&!e.target.classList.contains("e-rhandler")&&!e.target.classList.contains("e-columnmenu")&&!e.target.classList.contains("e-filtermenudiv")&&!w(e.target,"e-stackedheadercell")&&!(t.allowSelection&&t.selectionSettings.allowColumnSelection&&e.target.classList.contains("e-headercell"))){var n=this.parent.getColumnByUid(i.querySelector(".e-headercelldiv").getAttribute("e-mappinguid"));"checkbox"!==n.type&&(this.initiateSort(i,e,n),l.AR.isDevice&&this.showPopUp(e))}if(i&&i.classList.remove("e-resized"),w(e.target,"e-excel-ascending")||w(e.target,"e-excel-descending")){var o=(0,l.oq)(e.target,".e-filter-popup").getAttribute("uid"),a=(0,l.le)(w(e.target,"e-excel-descending"))?"Ascending":"Descending";this.sortColumn(t.getColumnByUid(o).field,a,!1)}},s.prototype.keyPressed=function(e){if(!this.parent.isEdit&&("enter"===e.action||"ctrlEnter"===e.action||"shiftEnter"===e.action)&&(0,l.oq)(e.target,".e-headercell")){var i=this.focus.getFocusedElement();if((0,l.le)(i)||!i.classList.contains("e-headercell")||!i.querySelector(".e-headercelldiv"))return;var r=this.parent.getColumnByUid(i.querySelector(".e-headercelldiv").getAttribute("e-mappinguid"));this.initiateSort(i,e,r)}},s.prototype.initiateSort=function(e,t,i){var r=this.parent,n=i.field;this.currentTarget=t.target;var o=e.getElementsByClassName("e-ascending").length?"Descending":"Ascending";this.isMultiSort=t.ctrlKey||this.enableSortMultiTouch||-1!==navigator.userAgent.indexOf("Mac OS")&&t.metaKey,t.shiftKey||this.sortSettings.allowUnsort&&e.getElementsByClassName("e-descending").length&&!(r.groupSettings.columns.indexOf(n)>-1)?this.removeSortColumn(n):this.sortColumn(n,o,this.isMultiSort)},s.prototype.showPopUp=function(e){var t=(0,l.oq)(e.target,".e-headercell");this.parent.allowMultiSorting&&(!(0,l.le)(t)||this.parent.isContextMenuOpen())&&Ao(this.parent.element.querySelector(".e-gridpopup"),e,"e-sortdirect e-icons e-icon-sortdirect"+(this.sortedColumns.length>1?" e-spanclicked":""))},s.prototype.popUpClickHandler=function(e){var t=e.target;(0,l.oq)(t,".e-headercell")||e.target.classList.contains(N)||(0,l.oq)(t,".e-gridpopup")?t.classList.contains("e-sortdirect")&&(t.classList.contains("e-spanclicked")?(t.classList.remove("e-spanclicked"),this.enableSortMultiTouch=!1,this.parent.element.querySelector(".e-gridpopup").style.display="none"):(t.classList.add("e-spanclicked"),this.enableSortMultiTouch=!0)):this.parent.element.querySelector(".e-gridpopup").style.display="none"},s.prototype.addSortIcons=function(){for(var t,i,e=this.parent,r=this.sortSettings.columns,n=this.parent.getColumns().map(function(h){return h.field}),o=0,a=r.length;o<a;o++)t=e.getColumnHeaderByField(r[o].field),-1!==n.indexOf(r[o].field)&&!(0,l.le)(t)&&(this.aria.setSort(t,r[o].direction.toLowerCase()),r.length>1&&t.querySelector(".e-headercelldiv").insertBefore(this.parent.createElement("span",{className:"e-sortnumber",innerHTML:(o+1).toString()}),t.querySelector(".e-headertext")),i=t.querySelector(".e-sortfilterdiv"),(0,l.s1)(i,"Ascending"===r[o].direction?["e-ascending","e-icon-ascending"]:["e-descending","e-icon-descending"],[]))},s.prototype.removeSortIcons=function(e){for(var i,t=this.parent,r=this.sortSettings.columns,n=this.parent.getColumns().map(function(h){return h.field}),o=e||0,a=(0,l.le)(e)?r.length:e+1;o<a;o++)i=t.getColumnHeaderByField(r[o].field),!((0,l.le)(i)||t.allowGrouping&&t.groupSettings.columns.indexOf(r[o].field)>-1&&!i.querySelector(".e-sortfilterdiv"))&&-1!==n.indexOf(r[o].field)&&(this.aria.setSort(i,"none"),(0,l.s1)(i.querySelector(".e-sortfilterdiv"),[],["e-descending","e-icon-descending","e-ascending","e-icon-ascending"]),i.querySelector(".e-sortnumber")&&i.querySelector(".e-headercelldiv").removeChild(i.querySelector(".e-sortnumber")))},s.prototype.getSortColumnFromField=function(e){for(var t=0,i=this.sortSettings.columns.length;t<i;t++)if(this.sortSettings.columns[t].field===e)return this.sortSettings.columns[t];return!1},s.prototype.updateAriaAttr=function(){for(var e=this.parent.getColumns().map(function(o){return o.field}),t=0,i=this.sortedColumns;t<i.length;t++){var r=i[t];if(-1!==e.indexOf(r)){var n=this.parent.getColumnHeaderByField(r);this.aria.setSort(n,this.getSortColumnFromField(r).direction)}}},s.prototype.refreshSortIcons=function(e){void 0===e&&(e={args:{isFrozen:!1}}),e.args.isFrozen||(this.removeSortIcons(),this.isMultiSort=!0,this.removeSortIcons(),this.addSortIcons(),this.isMultiSort=!1,this.updateAriaAttr())},s.prototype.showCustomSort=function(e){this.responsiveDialogRenderer.isCustomDialog=e,this.responsiveDialogRenderer.showResponsiveDialog()},s}(),gd=function(){function s(e){this.pagerModule=e}return s.prototype.render=function(){this.pagerElement=this.pagerModule.element,this.renderNumericContainer(),this.refreshNumericLinks(),this.wireEvents()},s.prototype.refresh=function(){this.pagerModule.updateTotalPages(),this.links.length&&this.updateLinksHtml(),this.refreshAriaAttrLabel(),this.updateStyles()},s.prototype.refreshNumericLinks=function(){var e,t=this.pagerModule,i=t.element.querySelector(".e-numericcontainer"),r=document.createDocumentFragment();i.innerHTML="";for(var n=1;n<=t.pageCount;n++)e=(0,l.az)("a",{className:"e-link e-numericitem e-spacing e-pager-default",attrs:{role:"link",tabindex:"-1","aria-label":t.getLocalizedLabel("Page")+n+t.getLocalizedLabel("Of")+t.totalPages+t.getLocalizedLabel("Pages"),href:"javascript:void(0);",name:"Goto page"+n}}),t.currentPage===n&&((0,l.s1)(e,["e-currentitem","e-active"],["e-pager-default"]),e.setAttribute("aria-selected","true")),r.appendChild(e);i.appendChild(r),this.links=[].slice.call(i.childNodes)},s.prototype.wireEvents=function(){l.bi.add(this.pagerElement,"click",this.clickHandler,this)},s.prototype.unwireEvents=function(){l.bi.remove(this.pagerModule.element,"click",this.clickHandler)},s.prototype.destroy=function(){this.unwireEvents()},s.prototype.refreshAriaAttrLabel=function(){for(var e=this.pagerModule,i=e.element.querySelector(".e-numericcontainer").querySelectorAll("a"),r=0;r<i.length;r++)i[r].hasAttribute("aria-label")&&i[r].hasAttribute("index")&&i[r].setAttribute("aria-label",e.getLocalizedLabel("Page")+i[r].getAttribute("index")+e.getLocalizedLabel("Of")+e.totalPages+e.getLocalizedLabel("Pages"))},s.prototype.renderNumericContainer=function(){this.element=(0,l.az)("div",{className:"e-pagercontainer",attrs:{role:"navigation"}}),this.renderFirstNPrev(this.element),this.renderPrevPagerSet(this.element),this.element.appendChild((0,l.az)("div",{className:"e-numericcontainer"})),this.renderNextPagerSet(this.element),this.renderNextNLast(this.element),this.pagerModule.element.appendChild(this.element)},s.prototype.renderFirstNPrev=function(e){this.first=(0,l.az)("div",{className:"e-first e-icons e-icon-first",attrs:{title:this.pagerModule.getLocalizedLabel("firstPageTooltip"),"aria-label":this.pagerModule.getLocalizedLabel("firstPageTooltip"),tabindex:"-1"}}),this.prev=(0,l.az)("div",{className:"e-prev e-icons e-icon-prev",attrs:{title:this.pagerModule.getLocalizedLabel("previousPageTooltip"),"aria-label":this.pagerModule.getLocalizedLabel("previousPageTooltip"),tabindex:"-1"}}),(0,l.R3)([this.first,this.prev],e)},s.prototype.renderPrevPagerSet=function(e){var t=(0,l.az)("div");this.PP=(0,l.az)("a",{className:"e-link e-pp e-spacing",innerHTML:"...",attrs:{title:this.pagerModule.getLocalizedLabel("previousPagerTooltip"),role:"link","aria-label":this.pagerModule.getLocalizedLabel("previousPagerTooltip"),tabindex:"-1",name:this.pagerModule.getLocalizedLabel("previousPagerTooltip"),href:"javascript:void(0);"}}),t.appendChild(this.PP),e.appendChild(t)},s.prototype.renderNextPagerSet=function(e){var t=(0,l.az)("div");this.NP=(0,l.az)("a",{className:"e-link e-np e-spacing",innerHTML:"...",attrs:{title:this.pagerModule.getLocalizedLabel("nextPagerTooltip"),role:"link","aria-label":this.pagerModule.getLocalizedLabel("nextPagerTooltip"),tabindex:"-1",name:this.pagerModule.getLocalizedLabel("nextPagerTooltip"),href:"javascript:void(0);"}}),t.appendChild(this.NP),e.appendChild(t)},s.prototype.renderNextNLast=function(e){this.next=(0,l.az)("div",{className:"e-next e-icons e-icon-next",attrs:{title:this.pagerModule.getLocalizedLabel("nextPageTooltip"),"aria-label":this.pagerModule.getLocalizedLabel("nextPageTooltip"),tabindex:"-1"}}),this.last=(0,l.az)("div",{className:"e-last e-icons e-icon-last",attrs:{title:this.pagerModule.getLocalizedLabel("lastPageTooltip"),"aria-label":this.pagerModule.getLocalizedLabel("lastPageTooltip"),tabindex:"-1"}}),(0,l.R3)([this.next,this.last],e)},s.prototype.clickHandler=function(e){var t=this.pagerModule,i=e.target;return t.previousPageNo=t.currentPage,!i.classList.contains("e-disable")&&!(0,l.le)(i.getAttribute("index"))&&(t.currentPage=parseInt(i.getAttribute("index"),10),t.dataBind()),!1},s.prototype.updateLinksHtml=function(){var t,i,e=this.pagerModule;e.currentPage=1===e.totalPages?1:e.currentPage,e.currentPage>e.totalPages&&e.totalPages&&(e.currentPage=e.totalPages),t=parseInt((e.currentPage/e.pageCount).toString(),10),e.currentPage%e.pageCount==0&&t>0&&(t-=1);for(var r=0;r<e.pageCount;r++)(i=t*e.pageCount+1+r)<=e.totalPages?(this.links[r].style.display="",this.links[r].setAttribute("index",i.toString()),this.links[r].innerHTML=e.customText?e.customText+i:i.toString(),e.currentPage!==i?this.links[r].classList.add("e-pager-default"):this.links[r].classList.remove("e-pager-default")):(this.links[r].innerHTML=e.customText?e.customText+i:i.toString(),this.links[r].style.display="none"),(0,l.s1)(this.links[r],[],["e-currentitem","e-active"]),this.links[r].removeAttribute("aria-selected");this.first.setAttribute("index","1"),this.last.setAttribute("index",e.totalPages.toString()),this.prev.setAttribute("index",(e.currentPage-1).toString()),this.next.setAttribute("index",(e.currentPage+1).toString()),this.pagerElement.querySelector(".e-mfirst").setAttribute("index","1"),this.pagerElement.querySelector(".e-mlast").setAttribute("index",e.totalPages.toString()),this.pagerElement.querySelector(".e-mprev").setAttribute("index",(e.currentPage-1).toString()),this.pagerElement.querySelector(".e-mnext").setAttribute("index",(e.currentPage+1).toString()),this.PP.setAttribute("index",(parseInt(this.links[0].getAttribute("index"),10)-e.pageCount).toString()),this.NP.setAttribute("index",(parseInt(this.links[this.links.length-1].getAttribute("index"),10)+1).toString())},s.prototype.updateStyles=function(){this.updateFirstNPrevStyles(),this.updatePrevPagerSetStyles(),this.updateNextPagerSetStyles(),this.updateNextNLastStyles(),this.links.length&&((0,l.s1)(this.links[(this.pagerModule.currentPage-1)%this.pagerModule.pageCount],["e-currentitem","e-active"],[]),this.links[(this.pagerModule.currentPage-1)%this.pagerModule.pageCount].setAttribute("aria-selected","true"))},s.prototype.updateFirstNPrevStyles=function(){var e=["e-firstpage","e-pager-default"],t=["e-firstpagedisabled","e-disable"],i=["e-prevpage","e-pager-default"],r=["e-prevpagedisabled","e-disable"];this.pagerModule.totalPages>0&&this.pagerModule.currentPage>1?((0,l.s1)(this.prev,i,r),(0,l.s1)(this.first,e,t),(0,l.s1)(this.pagerElement.querySelector(".e-mfirst"),e,t),(0,l.s1)(this.pagerElement.querySelector(".e-mprev"),i,r)):((0,l.s1)(this.prev,r,i),(0,l.s1)(this.first,t,e),(0,l.s1)(this.pagerElement.querySelector(".e-mprev"),r,i),(0,l.s1)(this.pagerElement.querySelector(".e-mfirst"),t,e))},s.prototype.updatePrevPagerSetStyles=function(){this.pagerModule.currentPage>this.pagerModule.pageCount?(0,l.s1)(this.PP,["e-numericitem","e-pager-default"],["e-nextprevitemdisabled","e-disable"]):(0,l.s1)(this.PP,["e-nextprevitemdisabled","e-disable"],["e-numericitem","e-pager-default"])},s.prototype.updateNextPagerSetStyles=function(){var e=this.pagerModule,t=this.links[0].innerHTML.replace(e.customText,"");!t.length||!this.links.length||parseInt(t,10)+e.pageCount>e.totalPages?(0,l.s1)(this.NP,["e-nextprevitemdisabled","e-disable"],["e-numericitem","e-pager-default"]):(0,l.s1)(this.NP,["e-numericitem","e-pager-default"],["e-nextprevitemdisabled","e-disable"])},s.prototype.updateNextNLastStyles=function(){var e=["e-lastpage","e-pager-default"],t=["e-lastpagedisabled","e-disable"],i=["e-nextpage","e-pager-default"],r=["e-nextpagedisabled","e-disable"],n=this.pagerModule;n.currentPage===n.totalPages||0===n.totalRecordsCount?((0,l.s1)(this.last,t,e),(0,l.s1)(this.next,r,i),(0,l.s1)(this.pagerElement.querySelector(".e-mlast"),t,e),(0,l.s1)(this.pagerElement.querySelector(".e-mnext"),r,i)):((0,l.s1)(this.last,e,t),(0,l.s1)(this.next,i,r),(0,l.s1)(this.pagerElement.querySelector(".e-mlast"),e,t),(0,l.s1)(this.pagerElement.querySelector(".e-mnext"),i,r))},s}(),vd=function(){function s(e){this.pagerModule=e}return s.prototype.render=function(){var e=(0,l.az)("div",{className:"e-parentmsgbar",attrs:{"aria-label":this.pagerModule.getLocalizedLabel("Information")}});this.pageNoMsgElem=(0,l.az)("span",{className:"e-pagenomsg",styles:"textalign:right"}),this.pageCountMsgElem=(0,l.az)("span",{className:"e-pagecountmsg",styles:"textalign:right"}),(0,l.R3)([this.pageNoMsgElem,this.pageCountMsgElem],e),this.pagerModule.element.appendChild(e),this.refresh()},s.prototype.refresh=function(){var e=this.pagerModule;this.pageNoMsgElem.textContent=this.format(e.getLocalizedLabel("currentPageInfo"),[0===e.totalRecordsCount?0:e.currentPage,e.totalPages||0,e.totalRecordsCount||0])+" ",this.pageCountMsgElem.textContent=this.format(e.getLocalizedLabel(e.totalRecordsCount<=1?"totalItemInfo":"totalItemsInfo"),[e.totalRecordsCount||0,e.totalRecordsCount?e.pageSize*(e.currentPage-1)+1:0,e.pageSize*e.currentPage>e.totalRecordsCount?e.totalRecordsCount:e.pageSize*e.currentPage]),this.pageNoMsgElem.parentElement.setAttribute("aria-label",this.pageNoMsgElem.textContent+this.pageCountMsgElem.textContent)},s.prototype.hideMessage=function(){this.pageNoMsgElem&&(this.pageNoMsgElem.style.display="none"),this.pageCountMsgElem&&(this.pageCountMsgElem.style.display="none")},s.prototype.showMessage=function(){this.pageNoMsgElem||this.render(),this.pageNoMsgElem.style.display="",this.pageCountMsgElem.style.display=""},s.prototype.destroy=function(){},s.prototype.format=function(e,t){for(var i,r=0;r<t.length;r++)i=new RegExp("\\{"+r+"\\}","gm"),e=e.replace(i,t[r].toString());return e},s}(),md=function(){var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])})(e,t)};return function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),Ae=function(s,e,t,i){var o,r=arguments.length,n=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(n=(r<3?o(n):r>3?o(e,t,n):o(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},Xo=function(s){function e(t,i,r){var n=s.call(this,t,i)||this;return n.hasParent=!1,n.pageRefresh="pager-refresh",n.firstPagerFocus=!1,n.parent=r,n}return md(e,s),e.prototype.requiredModules=function(){var t=[];return this.enableExternalMessage&&t.push({member:"externalMessage",args:[this]}),this.checkpagesizes()&&t.push({member:"pagerdropdown",args:[this]}),t},e.prototype.preRender=function(){this.defaultConstants={currentPageInfo:"{0} of {1} pages",totalItemsInfo:"({0} items)",totalItemInfo:"({0} item)",firstPageTooltip:"Go to first page",lastPageTooltip:"Go to last page",nextPageTooltip:"Go to next page",previousPageTooltip:"Go to previous page",nextPagerTooltip:"Go to next pager items",previousPagerTooltip:"Go to previous pager items",pagerDropDown:"Items per page",pagerAllDropDown:"Items",CurrentPageInfo:"{0} of {1} pages",TotalItemsInfo:"({0} items)",FirstPageTooltip:"Go to first page",LastPageTooltip:"Go to last page",NextPageTooltip:"Go to next page",PreviousPageTooltip:"Go to previous page",NextPagerTooltip:"Go to next pager items",PreviousPagerTooltip:"Go to previous pager items",PagerDropDown:"Items per page",PagerAllDropDown:"Items",All:"All",Container:"Pager Container",Information:"Pager Information",ExternalMsg:"Pager external message",Page:"Page ",Of:" of ",Pages:" Pages"},this.containerModule=new gd(this),this.pagerMessageModule=new vd(this)},e.prototype.render=function(){this.element.setAttribute("data-role","pager"),this.element.setAttribute("tabindex","-1"),this.initLocalization(),this.element.setAttribute("aria-label",this.getLocalizedLabel("Container")),this.cssClass&&(0,l.cn)([this.element],[this.cssClass]),this.hasParent||this.element.setAttribute("tabindex","0"),this.template?this.isReactTemplate()?(this.on(this.pageRefresh,this.pagerTemplate,this),this.notify(this.pageRefresh,{})):this.pagerTemplate():(this.updateRTL(),this.totalRecordsCount=this.totalRecordsCount||0,this.renderFirstPrevDivForDevice(),this.containerModule.render(),this.enablePagerMessage&&this.pagerMessageModule.render(),this.renderNextLastDivForDevice(),this.checkpagesizes()&&this.pagerdropdownModule&&this.pagerdropdownModule.render(),this.addAriaLabel(),this.enableExternalMessage&&this.externalMessageModule&&this.externalMessageModule.render(),this.refresh(),this.trigger("created",{currentPage:this.currentPage,totalRecordsCount:this.totalRecordsCount})),this.wireEvents(),this.addListener()},e.prototype.getPersistData=function(){return this.addOnPersist(["currentPage","pageSize"])},e.prototype.destroy=function(){this.isDestroyed||(this.isReactTemplate()&&(this.off(this.pageRefresh,this.pagerTemplate),this.hasParent||this.destroyTemplate(["template"])),this.removeListener(),this.unwireEvents(),s.prototype.destroy.call(this),this.containerModule.destroy(),this.pagerMessageModule.destroy(),this.isReactTemplate()||(this.element.innerHTML=""))},e.prototype.destroyTemplate=function(t,i){this.clearTemplate(t,i)},e.prototype.getModuleName=function(){return"pager"},e.prototype.onPropertyChanged=function(t,i){if(!this.isDestroyed){t.pageCount!==i.pageCount&&(this.containerModule.refreshNumericLinks(),this.containerModule.refresh());for(var r=0,n=Object.keys(t);r<n.length;r++)switch(n[r]){case"currentPage":this.checkGoToPage(t.currentPage,i.currentPage)&&this.currentPageChanged(t,i);break;case"pageSize":case"totalRecordsCount":case"customText":this.checkpagesizes()&&this.pagerdropdownModule&&(i.pageSize!==t.pageSize&&(this.currentPage=1),this.pagerdropdownModule.setDropDownValue("value",this.pageSize)),t.pageSize!==i.pageSize?(this.pageSize=t.pageSize,this.currentPageChanged(t,i)):this.refresh();break;case"pageSizes":this.checkpagesizes()&&this.pagerdropdownModule&&(this.pagerdropdownModule.destroy(),this.pagerdropdownModule.render()),this.refresh();break;case"template":this.templateFn=this.compile(this.template),this.refresh();break;case"locale":this.initLocalization(),this.refresh();break;case"enableExternalMessage":this.enableExternalMessage&&this.externalMessageModule&&this.externalMessageModule.render();break;case"externalMessage":this.externalMessageModule&&this.externalMessageModule.refresh();break;case"enableRtl":this.updateRTL();break;case"enablePagerMessage":this.enablePagerMessage?this.pagerMessageModule.showMessage():this.pagerMessageModule.hideMessage()}}},e.prototype.wireEvents=function(){this.hasParent||(l.bi.add(this.element,"keydown",this.keyPressHandler,this),l.bi.add(document.body,"keydown",this.keyDownHandler,this)),l.bi.add(this.element,"focusin",this.onFocusIn,this),l.bi.add(this.element,"focusout",this.onFocusOut,this)},e.prototype.unwireEvents=function(){this.hasParent||(l.bi.remove(this.element,"keydown",this.keyPressHandler),l.bi.remove(document.body,"keydown",this.keyDownHandler)),l.bi.remove(this.element,"focusin",this.onFocusIn),l.bi.remove(this.element,"focusout",this.onFocusOut)},e.prototype.onFocusIn=function(t){var i=this.getFocusedTabindexElement();if((0,l.le)(i)){var r=t.target,n=this.getDropDownPage();if(this.hasParent||(this.element.tabIndex=-1),r===this.element&&!this.hasParent){var o=this.getFocusablePagerElements(this.element,[]);return void this.addFocus(o[0],!0)}if(r===this.element)return void(this.element.tabIndex=0);r!==n&&!r.classList.contains("e-disable")&&this.addFocus(r,!0)}},e.prototype.onFocusOut=function(t){var i=this.getFocusedElement(),r=this.getDropDownPage();(0,l.le)(i)||this.removeFocus(i,!0),this.pageSizes&&r&&r.classList.contains("e-input-focus")&&this.removeFocus(r,!0),this.setTabIndexForFocusLastElement(),this.hasParent||(this.element.tabIndex=0),this.hasParent&&(this.element.tabIndex=-1)},e.prototype.keyDownHandler=function(t){if(t.altKey&&74===t.keyCode){var i=this.getFocusablePagerElements(this.element,[]);i.length>0&&i[0].focus()}},e.prototype.keyPressHandler=function(t){var i=(0,l.l7)(t,{cancel:!1});this.notify(oe,i),!0===i.cancel&&t.stopImmediatePropagation()},e.prototype.addListener=function(){this.isDestroyed||this.hasParent||this.on(oe,this.onKeyPress,this)},e.prototype.removeListener=function(){this.isDestroyed||this.hasParent||this.off(oe,this.onKeyPress)},e.prototype.onKeyPress=function(t){this.hasParent||(this.checkPagerHasFocus()?this.changePagerFocus(t):(t.preventDefault(),this.setPagerFocus()))},e.prototype.checkPagerHasFocus=function(){return!!this.getFocusedTabindexElement()},e.prototype.setPagerContainerFocus=function(){this.element.focus()},e.prototype.setPagerFocus=function(){var t=this.getFocusablePagerElements(this.element,[]);t.length>0&&t[0].focus()},e.prototype.setPagerFocusForActiveElement=function(){var t=this.getActiveElement();t&&t.focus()},e.prototype.setTabIndexForFocusLastElement=function(){var t=this.getFocusablePagerElements(this.element,[]),i=this.getDropDownPage();this.pageSizes&&i&&!(0,l.le)(i.offsetParent)?i.tabIndex=0:t.length>0&&(t[t.length-1].tabIndex=0)},e.prototype.changePagerFocus=function(t){t.shiftKey&&9===t.keyCode?this.changeFocusByShiftTab(t):9===t.keyCode?this.changeFocusByTab(t):13===t.keyCode||32===t.keyCode?this.navigateToPageByEnterOrSpace(t):(37===t.keyCode||39===t.keyCode||35===t.keyCode||36===t.keyCode)&&this.navigateToPageByKey(t)},e.prototype.getFocusedTabindexElement=function(){for(var t,i=this.element.querySelectorAll('[tabindex]:not([tabindex="-1"])'),r=0;r<i.length;r++){var n=i[r];if(n&&(n.classList.contains("e-focused")||n.classList.contains("e-input-focus"))){t=n;break}}return t},e.prototype.changeFocusByTab=function(t){var i=this.getFocusedTabindexElement(),r=this.getFocusablePagerElements(this.element,[]),n=this.getDropDownPage();if(r.length>0)if(this.pageSizes&&n&&i===r[r.length-1])n.tabIndex=0;else for(var o=0;o<r.length;o++)if(i===r[o]){var a=o+1;a<r.length&&(t.preventDefault(),r[a].focus());break}},e.prototype.changeFocusByShiftTab=function(t){var i=this.getFocusedTabindexElement(),r=this.getFocusablePagerElements(this.element,[]),n=this.getDropDownPage();if(this.pageSizes&&n&&n.classList.contains("e-input-focus"))n.tabIndex=-1,this.addFocus(r[r.length-1],!0);else if(r.length>0)for(var o=0;o<r.length;o++)if(i===r[o]){var a=o-1;if(a>=0)t.preventDefault(),r[a].focus();else if(this.hasParent){var h=this.parent.getRows(),p=h[h.length-1].lastChild;t.preventDefault(),p.focus(),this.firstPagerFocus=!0}break}},e.prototype.checkFirstPagerFocus=function(){return!!this.firstPagerFocus&&(this.firstPagerFocus=!1,!0)},e.prototype.navigateToPageByEnterOrSpace=function(t){var i=this.getFocusedElement();if(i){this.goToPage(parseInt(i.getAttribute("index"),10));var r=this.getActiveElement(),n=this.getClass(i),o=this.getElementByClass(n);"e-first"!==n&&"e-prev"!==n&&"e-next"!==n&&"e-last"!==n&&"e-pp"!==n&&"e-np"!==n||!o||o.classList.contains("e-disable")?this.checkFocusInAdaptiveMode(i)?this.changeFocusInAdaptiveMode(i):r&&r.focus():o.focus()}},e.prototype.navigateToPageByKey=function(t){var r=this.element.querySelector(37===t.keyCode?".e-prev":39===t.keyCode?".e-next":35===t.keyCode?".e-last":36===t.keyCode?".e-first":""),n=this.getFocusedElement();if(!(0,l.le)(r)&&r.hasAttribute("index")&&!isNaN(parseInt(r.getAttribute("index"),10))){this.goToPage(parseInt(r.getAttribute("index"),10));var o=this.getActiveElement();this.checkFocusInAdaptiveMode(n)?this.changeFocusInAdaptiveMode(n):o&&o.focus()}},e.prototype.checkFocusInAdaptiveMode=function(t){var i=this.getClass(t);return"e-mfirst"===i||"e-mprev"===i||"e-mnext"===i||"e-mlast"===i},e.prototype.changeFocusInAdaptiveMode=function(t){var i=this.getClass(t),r=this.getElementByClass(i);r&&r.classList.contains("e-disable")&&("e-mnext"===i||"e-mlast"===i?this.element.querySelector(".e-mprev").focus():this.setPagerFocus())},e.prototype.removeTabindexLastElements=function(){var t=this.element.querySelectorAll('[tabindex]:not([tabindex="-1"])');if(t.length>1)for(var i=1;i<t.length;i++){var r=t[i];r&&(r.tabIndex=-1)}},e.prototype.getActiveElement=function(){return this.element.querySelector(".e-active")},e.prototype.getDropDownPage=function(){var i,t=this.element.querySelector(".e-pagerdropdown");return t&&(i=t.children[0]),i},e.prototype.getFocusedElement=function(){return this.element.querySelector(".e-focused")},e.prototype.getClass=function(t){for(var i,r=["e-mfirst","e-mprev","e-first","e-prev","e-pp","e-np","e-next","e-last","e-mnext","e-mlast"],n=0;n<r.length;n++)if(t&&t.classList.contains(r[n]))return r[n];return i},e.prototype.getElementByClass=function(t){return this.element.querySelector("."+t)},e.prototype.getFocusablePagerElements=function(t,i){for(var n=t.children,o=i,a=0;a<n.length;a++){var h=n[a];if(h.children.length>0&&!h.classList.contains("e-pagesizes"))o=this.getFocusablePagerElements(h,o);else{var d=n[a];d.hasAttribute("tabindex")&&!h.classList.contains("e-disable")&&"none"!==h.style.display&&!(0,l.le)(h.offsetParent)&&o.push(d)}}return o},e.prototype.addFocus=function(t,i){i&&(0,l.cn)([t],["e-focused","e-focus"]),t.tabIndex=0},e.prototype.removeFocus=function(t,i){i&&(0,l.IV)([t],["e-focused","e-focus"]),t.tabIndex=-1},e.prototype.getLocalizedLabel=function(t){return this.localeObj.getConstant(t)},e.prototype.goToPage=function(t){this.checkGoToPage(t)&&(this.currentPage=t,this.dataBind())},e.prototype.setPageSize=function(t){this.pageSize=t,this.dataBind()},e.prototype.checkpagesizes=function(){return!(!0!==this.pageSizes&&!this.pageSizes.length)},e.prototype.checkGoToPage=function(t,i){return t!==this.currentPage&&(this.previousPageNo=this.currentPage),(0,l.le)(i)||(this.previousPageNo=i),this.previousPageNo!==t&&t>=1&&t<=this.totalPages},e.prototype.currentPageChanged=function(t,i){if(this.enableQueryString&&this.updateQueryString(this.currentPage),t.currentPage!==i.currentPage||t.pageSize!==i.pageSize){var r={currentPage:this.currentPage,newProp:t,oldProp:i,cancel:!1};this.trigger("click",r),r.cancel||this.refresh()}},e.prototype.pagerTemplate=function(){if(!this.isReactTemplate()||!this.hasParent){var t;this.element.classList.add("e-pagertemplate"),this.compile(this.template);var i={currentPage:this.currentPage,pageSize:this.pageSize,pageCount:this.pageCount,totalRecordsCount:this.totalRecordsCount,totalPages:this.totalPages},r=this.element.parentElement.id+"_template";this.isReactTemplate()&&!this.isVue?(this.getPagerTemplate()(i,this,"template",r,null,null,this.element),this.renderReactTemplates()):(t=this.isVue?this.getPagerTemplate()(i,this,"template"):this.getPagerTemplate()(i),ye(this.element,t))}},e.prototype.updateTotalPages=function(){this.totalPages=this.isAllPage?1:this.totalRecordsCount%this.pageSize==0?this.totalRecordsCount/this.pageSize:parseInt((this.totalRecordsCount/this.pageSize).toString(),10)+1},e.prototype.getPagerTemplate=function(){return this.templateFn},e.prototype.compile=function(t){if(t)try{document.querySelectorAll(t).length&&(this.templateFn=(0,l.MY)(document.querySelector(t).innerHTML.trim()))}catch(i){this.templateFn=(0,l.MY)(t)}},e.prototype.refresh=function(){if(this.template)this.isReactTemplate()?(this.updateTotalPages(),this.notify(this.pageRefresh,{})):(this.element.innerHTML="",this.updateTotalPages(),this.pagerTemplate());else{this.updateRTL();var t=this.getFocusedTabindexElement();this.containerModule.refresh(),this.removeTabindexLastElements(),t&&t.classList.contains("e-disable")&&(this.checkFocusInAdaptiveMode(t)?this.changeFocusInAdaptiveMode(t):this.setPagerFocusForActiveElement()),this.enablePagerMessage&&this.pagerMessageModule.refresh(),this.pagerdropdownModule&&this.pagerdropdownModule.refresh(),this.enableExternalMessage&&this.externalMessageModule&&this.externalMessageModule.refresh(),this.setTabIndexForFocusLastElement()}},e.prototype.updateRTL=function(){this.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl")},e.prototype.initLocalization=function(){this.localeObj=new l.E7(this.getModuleName(),this.defaultConstants,this.locale)},e.prototype.updateQueryString=function(t){var i=this.getUpdatedURL(window.location.href,"page",t.toString());window.history.pushState({path:i},"",i)},e.prototype.getUpdatedURL=function(t,i,r){var n=new RegExp("([?|&])"+i+"=.*?(&|#|$)","i");if(t.match(n))return t.replace(n,"$1"+i+"="+r+"$2");var o="";return-1!==t.indexOf("#")&&(o=t.replace(/.*#/,"#"),t=t.replace(/#.*/,"")),t+(-1!==t.indexOf("?")?"&":"?")+i+"="+r+o},e.prototype.renderFirstPrevDivForDevice=function(){this.element.appendChild((0,l.az)("div",{className:"e-mfirst e-icons e-icon-first",attrs:{title:this.getLocalizedLabel("firstPageTooltip"),tabindex:"-1"}})),this.element.appendChild((0,l.az)("div",{className:"e-mprev e-icons e-icon-prev",attrs:{title:this.getLocalizedLabel("previousPageTooltip"),tabindex:"-1"}}))},e.prototype.renderNextLastDivForDevice=function(){this.element.appendChild((0,l.az)("div",{className:"e-mnext e-icons e-icon-next",attrs:{title:this.getLocalizedLabel("nextPageTooltip"),tabindex:"-1"}})),this.element.appendChild((0,l.az)("div",{className:"e-mlast e-icons e-icon-last",attrs:{title:this.getLocalizedLabel("lastPageTooltip"),tabindex:"-1"}}))},e.prototype.addAriaLabel=function(){var t=[".e-mfirst",".e-mprev",".e-mnext",".e-mlast"];if(!l.AR.isDevice)for(var i=0;i<t.length;i++){var r=this.element.querySelector(t[i]);r.setAttribute("aria-label",r.getAttribute("title"))}},e.prototype.isReactTemplate=function(){return(this.isReact||this.isVue)&&this.template&&"string"!=typeof this.template},Ae([(0,l.Z9)(!1)],e.prototype,"enableQueryString",void 0),Ae([(0,l.Z9)(!1)],e.prototype,"enableExternalMessage",void 0),Ae([(0,l.Z9)(!0)],e.prototype,"enablePagerMessage",void 0),Ae([(0,l.Z9)(12)],e.prototype,"pageSize",void 0),Ae([(0,l.Z9)(10)],e.prototype,"pageCount",void 0),Ae([(0,l.Z9)(1)],e.prototype,"currentPage",void 0),Ae([(0,l.Z9)()],e.prototype,"totalRecordsCount",void 0),Ae([(0,l.Z9)()],e.prototype,"externalMessage",void 0),Ae([(0,l.Z9)(!1)],e.prototype,"pageSizes",void 0),Ae([(0,l.Z9)()],e.prototype,"template",void 0),Ae([(0,l.Z9)("")],e.prototype,"customText",void 0),Ae([(0,l.ju)()],e.prototype,"click",void 0),Ae([(0,l.Z9)("")],e.prototype,"cssClass",void 0),Ae([(0,l.ju)()],e.prototype,"dropDownChanged",void 0),Ae([(0,l.ju)()],e.prototype,"created",void 0),Ae([l.Zl],e)}(l.wA),yd=function(){function s(e){this.pagerModule=e}return s.prototype.getModuleName=function(){return"pagerdropdown"},s.prototype.render=function(){var e=this.pagerModule;this.pagerDropDownDiv=(0,l.az)("div",{className:"e-pagesizes"});var t=(0,l.az)("div",{className:"e-pagerdropdown"}),i=(0,l.az)("div",{className:"e-pagerconstant"}),r=(0,l.az)("input",{attrs:{type:"text",tabindex:"-1"}});this.pagerCons=(0,l.az)("span",{className:"e-constant",innerHTML:this.pagerModule.getLocalizedLabel("pagerDropDown")}),t.appendChild(r),i.appendChild(this.pagerCons),this.pagerDropDownDiv.appendChild(t),this.pagerDropDownDiv.appendChild(i),this.pagerModule.element.appendChild(this.pagerDropDownDiv);var n=this.pagerModule.pageSizes,o=n.length?this.convertValue(n):[this.pagerModule.getLocalizedLabel("All"),"5","10","12","20"],a=this.pagerModule.pageSize;this.dropDownListObject=new rt.NB({dataSource:o,value:a.toString(),change:this.onChange.bind(this),placeholder:this.pagerModule.getLocalizedLabel("pagerDropDown"),cssClass:this.pagerModule.cssClass?"e-alldrop "+this.pagerModule.cssClass:"e-alldrop"}),this.dropDownListObject.appendTo(r),n.length&&(this.dropDownListObject.element.value=this.pagerModule.pageSize.toString()),e.pageSize=a,e.dataBind(),e.trigger("dropDownChanged",{pageSize:a}),this.addEventListener()},s.prototype.onChange=function(e){this.dropDownListObject.value===this.pagerModule.getLocalizedLabel("All")?(this.pagerModule.pageSize=this.pagerModule.totalRecordsCount,this.pagerModule.isAllPage=!0,this.refresh(),e.value=this.pagerModule.pageSize,document.getElementsByClassName("e-popup-open e-alldrop").length&&(document.getElementsByClassName("e-popup-open e-alldrop")[0].style.display="none")):(this.pagerModule.pageSize=parseInt(this.dropDownListObject.value,10),this.pagerModule.isAllPage=!1,this.pagerCons.innerHTML!==this.pagerModule.getLocalizedLabel("pagerDropDown")&&this.refresh()),this.pagerModule.dataBind(),this.pagerModule.trigger("dropDownChanged",{pageSize:this.pagerModule.isAllPage?this.pagerModule.totalRecordsCount:parseInt(this.dropDownListObject.value,10)})},s.prototype.refresh=function(){this.pagerCons&&(this.pagerCons.innerHTML=this.pagerModule.getLocalizedLabel(this.pagerModule.pageSize===this.pagerModule.totalRecordsCount?"pagerAllDropDown":"pagerDropDown"))},s.prototype.beforeValueChange=function(e){if("number"==typeof e.newProp.value){var t=e.newProp.value.toString();e.newProp.value=t}},s.prototype.convertValue=function(e){for(var t=e,i=0;i<t.length;i++)t[i]=parseInt(t[i],10)?t[i].toString():""!==this.pagerModule.getLocalizedLabel(t[i])?this.pagerModule.getLocalizedLabel(t[i]):t[i];return t},s.prototype.setDropDownValue=function(e,t){this.dropDownListObject&&(this.dropDownListObject[e]=this.pagerModule.isAllPage?this.pagerModule.getLocalizedLabel("All"):t)},s.prototype.addEventListener=function(){this.dropDownListObject.on("beforeValueChange",this.beforeValueChange,this)},s.prototype.removeEventListener=function(){this.dropDownListObject.off("beforeValueChange",this.beforeValueChange)},s.prototype.destroy=function(e){this.dropDownListObject&&!this.dropDownListObject.isDestroyed&&(this.removeEventListener(),this.dropDownListObject.destroy(),(0,l.Od)(this.pagerDropDownDiv))},s}(),Cd=function(){function s(e){this.pagerModule=e}return s.prototype.getModuleName=function(){return"externalMessage"},s.prototype.render=function(){this.element=(0,l.az)("div",{className:"e-pagerexternalmsg",attrs:{"aria-label":this.pagerModule.getLocalizedLabel("ExternalMsg")}}),this.pagerModule.element.appendChild(this.element),this.refresh()},s.prototype.refresh=function(){this.pagerModule.externalMessage&&this.pagerModule.externalMessage.toString().length?(this.showMessage(),this.element.innerHTML=this.pagerModule.externalMessage):this.hideMessage()},s.prototype.hideMessage=function(){(0,l.le)(this.element)||(this.element.style.display="none")},s.prototype.showMessage=function(){this.element.style.display=""},s.prototype.destroy=function(){(0,l.Od)(this.element)},s}(),Hr=function(){function s(e,t){this.isInitialRender=!0,this.isCancel=!1,Xo.Inject(Cd,yd),this.parent=e,this.pageSettings=t,this.addEventListener()}return s.prototype.getModuleName=function(){return"pager"},s.prototype.render=function(){var e=this.parent;this.pagerDestroy(),(0,l.le)(this.parent.pagerTemplate)||(this.pageSettings.template=this.parent.pagerTemplate,this.parent.pageTemplateChange=!0),this.element=this.parent.createElement("div",{className:"e-gridpager"});var t=Ut({},(0,l.l7)({},Pi(this.pageSettings)),{click:this.clickHandler.bind(this),dropDownChanged:this.onSelect.bind(this),enableRtl:e.enableRtl,locale:e.locale,created:this.addAriaAttr.bind(this)},["parentObj","propName"]);t.cssClass=this.parent.cssClass?this.parent.cssClass:"",this.pagerObj=new Xo(t,void 0,this.parent),this.pagerObj.hasParent=!0,this.pagerObj.on(po,this.renderReactPagerTemplate,this),this.pagerObj.allowServerDataBinding=!1},s.prototype.onSelect=function(e){this.pageSettings.pageSize=e.pageSize,this.isInitialLoad||(this.pageSettings.currentPage=1)},s.prototype.addAriaAttr=function(){if(!this.pageSettings.template){for(var e=this.parent.createElement("div",{className:"e-numericcontainer"}),t=this.element.querySelector(".e-pagercontainer"),i=document.createDocumentFragment(),r=this.element.querySelector(".e-numericcontainer"),n=r.querySelectorAll("a"),o=0;o<n.length;o++){this.parent.getContentTable()?n[o].setAttribute("aria-owns",this.parent.getContentTable().id):n[o].setAttribute("aria-owns",this.parent.element.getAttribute("id")+"_content_table");var a=this.parent.createElement("div");a.appendChild(n[o]),i.appendChild(a)}e.appendChild(i),t.replaceChild(e,r);for(var h=[".e-mfirst",".e-mprev",".e-first",".e-prev",".e-next",".e-last",".e-mnext",".e-mlast"],d=0;d<h.length;d++){var p=this.element.querySelector(h[d]);this.parent.getContentTable()&&p.setAttribute("aria-owns",this.parent.getContentTable().id)}}},s.prototype.dataReady=function(e){this.updateModel(e)},s.prototype.refresh=function(){this.pagerObj.refresh()},s.prototype.goToPage=function(e){this.pagerObj.goToPage(e)},s.prototype.setPageSize=function(e){this.pagerObj.setPageSize(e)},s.prototype.updateModel=function(e){this.parent.pageSettings.totalRecordsCount=e.count,this.parent.dataBind()},s.prototype.onActionComplete=function(e){this.parent.trigger(H,(0,l.l7)(e,{currentPage:this.parent.pageSettings.currentPage,requestType:"paging",type:H}))},s.prototype.onPropertyChanged=function(e){if(e.module===this.getModuleName()){for(var t=e.properties,i=0,r=Object.keys(t);i<r.length;i++){var n=r[i];this.pagerObj[n]=t[n]}this.pagerObj.dataBind()}},s.prototype.clickHandler=function(e){var t=this.parent;if(this.isForceCancel||lt(t)&&!t.prevPageMoving&&!this.isCancel)return this.isForceCancel?this.isForceCancel=!1:((0,l.le)(e.newProp)||(0,l.le)(e.newProp.pageSize)?e.currentPage&&(t.notify(Le,{instance:this,handler:this.goToPage,arg1:e.currentPage}),this.pagerObj.currentPage=t.pageSettings.currentPage===this.pagerObj.currentPage?this.pagerObj.previousPageNo:t.pageSettings.currentPage):(t.notify(Le,{instance:this,handler:this.setPageSize,arg1:e.newProp.pageSize}),this.pagerObj.pageSize=e.oldProp.pageSize,t.pageSettings.pageSize=e.newProp.pageSize),this.isForceCancel=!0,this.pagerObj.dataBind()),void(e.cancel=!0);t.pageSettings.pageSize=this.pagerObj.pageSize,t.prevPageMoving=!1;var i=this.pageSettings.currentPage,r={cancel:!1,requestType:"paging",previousPage:i,currentPage:e.currentPage,type:Y};if(this.isCancel||(this.pageSettings.currentPage=e.currentPage,this.parent.notify(ve,r)),r.cancel)return e.cancel=!0,this.pageSettings.currentPage=i,this.pagerObj.currentPage=i,void(this.isCancel=!0);this.isCancel=!1,this.parent.requestTypeAction="paging"},s.prototype.keyPressHandler=function(e){e.action in Jo&&(e.preventDefault(),this.element.querySelector(Jo[e.action]).click())},s.prototype.updateExternalMessage=function(e){this.pagerObj.enableExternalMessage||(this.pagerObj.enableExternalMessage=!0,this.pagerObj.dataBind()),this.pagerObj.externalMessage=e,this.pagerObj.dataBind()},s.prototype.appendToElement=function(){this.isInitialLoad=!0,this.parent.element.appendChild(this.element),this.parent.setGridPager(this.element),this.pagerObj.isReact=this.parent.isReact,this.pagerObj.isVue=this.parent.isVue,this.pagerObj.appendTo(this.element),this.isInitialLoad=!1},s.prototype.enableAfterRender=function(e){e.module===this.getModuleName()&&e.enable&&(this.render(),this.appendToElement(),this.isReactTemplate()&&(this.pagerObj.updateTotalPages(),this.created()))},s.prototype.addEventListener=function(){this.handlers={load:this.render,end:this.appendToElement,ready:this.dataReady,complete:this.onActionComplete,updateLayout:this.enableAfterRender,inboundChange:this.onPropertyChanged,keyPress:this.keyPressHandler,created:this.created},!this.parent.isDestroyed&&((this.parent.isReact||this.parent.isVue)&&this.parent.addEventListener(br,this.handlers.created.bind(this)),this.evtHandlers=[{event:nt,handler:this.handlers.load},{event:we,handler:this.handlers.end},{event:Ge,handler:this.handlers.ready},{event:"paging-complete",handler:this.handlers.complete},{event:X,handler:this.handlers.updateLayout},{event:Se,handler:this.handlers.inboundChange},{event:oe,handler:this.handlers.keyPress},{event:V,handler:this.destroy}],me(this.parent,this.evtHandlers,!0,this))},s.prototype.created=function(){this.isInitialRender&&this.isReactTemplate()&&(this.isInitialRender=!1,this.renderReactPagerTemplate())},s.prototype.isReactTemplate=function(){return(this.parent.isReact||this.parent.isVue)&&this.pagerObj.template&&"string"!=typeof this.pagerObj.template},s.prototype.renderReactPagerTemplate=function(){if(!this.isInitialRender&&this.isReactTemplate()){var e=void 0;this.parent.destroyTemplate(["pagerTemplate"]),this.element.classList.add("e-pagertemplate"),this.pagerObj.compile(this.pagerObj.template);var t=this.parent.pageSettings,i={currentPage:t.currentPage,pageSize:t.pageSize,pageCount:t.pageCount,totalRecordsCount:t.totalRecordsCount,totalPages:this.pagerObj.totalPages};this.parent.isReact?(this.pagerObj.templateFn(i,this.parent,"pagerTemplate",this.parent.id+"_pagertemplate",null,null,this.pagerObj.element),this.parent.renderTemplates()):(e=this.pagerObj.templateFn(i,this.parent,"pagerTemplate"),ye(this.pagerObj.element,e))}},s.prototype.removeEventListener=function(){this.parent.isDestroyed||((this.parent.isReact||this.parent.isVue)&&this.parent.removeEventListener(br,this.handlers.created),this.parent.off(po,this.renderReactPagerTemplate),me(this.parent,this.evtHandlers,!1))},s.prototype.destroy=function(){this.removeEventListener(),this.isReactTemplate()&&this.parent.destroyTemplate(["pagerTemplate"]),this.pagerObj.destroy()},s.prototype.pagerDestroy=function(){this.pagerObj&&!this.pagerObj.isDestroyed&&(this.pagerObj.destroy(),(0,l.Od)(this.element))},s}(),Jo={pageUp:".e-prev",pageDown:".e-next",ctrlAltPageDown:".e-last",ctrlAltPageUp:".e-first",altPageUp:".e-pp",altPageDown:".e-np"},Qe_header="th.e-headercell",Nr=function(){function s(e){this.tapped=!1,this.isDblClk=!0,this.parent=e,!this.parent.isDestroyed&&(this.widthService=new Un(e),this.addEventListener())}return s.prototype.autoFitColumns=function(e){var t=null==e||e.length<=0?this.parent.getColumns().map(function(i){return i.field}):"string"==typeof e?[e]:e;this.parent.isAutoFitColumns=!0,this.findColumn(t)},s.prototype.autoFit=function(){var e=this.parent.getColumns().filter(function(t){return!0===t.autoFit}).map(function(t){return t.field||t.headerText});e.length>0&&this.autoFitColumns(e),"Auto"===this.parent.resizeSettings.mode&&this.widthService.setWidthToTable()},s.prototype.resizeColumn=function(e,t,i){var o,a,h,v,m,C,r=this.parent,n=0,u=0,f=i||this.parent.getUidByColumnField(e),g=this.parent.getNormalizedColumnIndex(f),b=this.parent.getColumnIndexByField(e),y=r.getFrozenColumns()||r.getFrozenLeftColumnsCount(),S=r.getMovableColumnsCount();if((0,l.le)(r.getFooterContent())||(h=r.getFooterContentTable()),r.isFrozenGrid()){var R=r.getColumnByField(e);R.getFreezeTableName()===te?(o=r.getHeaderTable(),a=r.getContentTable(),v=o.querySelector('[e-mappinguid="'+f+'"]').parentElement.cloneNode(!0),m=a.querySelectorAll("td:nth-child("+(g+1)+")"),h&&(C=h.querySelectorAll("td:nth-child("+(g+1)+")"))):"movable"===R.getFreezeTableName()?(o=r.getHeaderContent().querySelector("."+W).children[0],a=r.getContent().querySelector("."+_).children[0],v=o.querySelector('[e-mappinguid="'+f+'"]').parentElement.cloneNode(!0),m=a.querySelectorAll("td:nth-child("+(g-y+1)+")"),h&&(C=(h=r.getFooterContent().querySelector(".e-movablefootercontent").children[0]).querySelectorAll("td:nth-child("+(g-y+1)+")"))):R.getFreezeTableName()===Q&&(o=r.getHeaderContent().querySelector(".e-frozen-right-header").children[0],a=r.getContent().querySelector(".e-frozen-right-content").children[0],v=o.querySelector('[e-mappinguid="'+f+'"]').parentElement.cloneNode(!0),m=a.querySelectorAll("td:nth-child("+(g-(y+S)+1)+")"),h&&(C=(h=r.getFooterContent().querySelector(".e-movablefootercontent").children[0]).querySelectorAll("td:nth-child("+(g-(y+S)+1)+")")))}else o=r.getHeaderTable(),a=r.getContentTable(),v=o.querySelector('[e-mappinguid="'+f+'"]').parentElement.cloneNode(!0),m=a.querySelectorAll("td.e-rowcell:nth-child("+(g+1)+"):not(.e-groupcaption):not(.e-detailcell)"),h&&(C=h.querySelectorAll("td:nth-child("+(g+1)+"):not(.e-groupcaption)"));var F=[].slice.call(o.querySelector("tr").getElementsByClassName("e-grouptopleftcell"));if(F.length>0)for(var D=0;D<F.length;D++)u+=F[D].offsetWidth;var L=a.querySelector(".e-detailrowcollapse")||a.querySelector(".e-detailrowexpand");(this.parent.detailTemplate||this.parent.childGrid)&&L&&(u+=L.offsetWidth);var k=[v],E=[],T=[];if(h)for(D=0;D<C.length;D++)T[D]=C[D].cloneNode(!0);for(D=0;D<m.length;D++)E[D]=m[D].cloneNode(!0);var P=this.createTable(o,k,"e-gridheader"),j=null,$=null;r.getCurrentViewRecords().length&&($=this.createTable(a,E,"e-gridcontent")),T.length&&(j=this.createTable(h,T,"e-gridfooter"));var J=r.getColumns()[b],se=J.width=(0,l.Ac)(Math.max(P,$,j)),ge=J.maxWidth&&parseFloat(J.maxWidth.toString());if(parseInt(se,10)>ge&&(J.width=ge),this.widthService.setColumnWidth(r.getColumns()[b]),!1===r.getColumns().some(function(Dt){return null==Dt.width||Dt.width.length<=0})){var re=r.getColumns();for(D=0;D<re.length;D++)re[D].visible&&(n+=parseFloat(re[D].width))}var pt=n+u;n>0&&!r.isFrozenGrid()&&((this.parent.detailTemplate||this.parent.childGrid)&&this.widthService.setColumnWidth(new De({width:"30px"})),"Auto"===this.parent.resizeSettings.mode&&(pt="100%"),o.style.width=(0,l.Ac)(pt),a.style.width=(0,l.Ac)(pt),(0,l.le)(h)||(h.style.width=(0,l.Ac)(pt))),r.isFrozenGrid()&&this.widthService.refreshFrozenScrollbar();var Fe=o.offsetWidth;r.getContent().scrollWidth>Fe?(o.classList.add("e-tableborder"),a.classList.add("e-tableborder")):(o.classList.remove("e-tableborder"),a.classList.remove("e-tableborder")),(0,l.le)(h)||h.classList.add("e-tableborder")},s.prototype.destroy=function(){var e=this.parent.element;!e||!e.querySelector("."+pe)&&!e.querySelector("."+ae)||(this.widthService=null,this.unwireEvents(),this.removeEventListener())},s.prototype.getModuleName=function(){return"resize"},s.prototype.findColumn=function(e){for(var t=0;t<e.length;t++){var i=e[t],r=this.parent.getColumnIndexByField(i),n=this.parent.getColumns()[r];r>-1&&!(0,l.le)(n)&&!0===n.visible&&this.resizeColumn(i,r)}},s.prototype.createTable=function(e,t,i){var r=this.parent.createElement("div");r.className=this.parent.element.className,r.style.cssText="display: inline-block;visibility:hidden;position:absolute";var n=this.parent.createElement("div");n.className=i;var o=this.parent.createElement("table",{attrs:{role:"grid"}});o.className=e.className,o.classList.add("e-resizetable"),o.style.cssText="table-layout: auto;width: auto";for(var a=this.parent.createElement("tr",{attrs:{role:"row"}}),h=0;h<t.length;h++){var d=a.cloneNode();d.className=e.querySelector("tr").className,d.appendChild(t[h]),o.appendChild(d)}n.appendChild(o),r.appendChild(n),document.body.appendChild(r);var p=o.getBoundingClientRect().width;return document.body.removeChild(r),Math.ceil(p)},s.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(ue,this.refreshHeight,this),this.parent.on(we,this.wireEvents,this),this.parent.on(ee,this.autoFit,this),this.parent.on(Mi,this.refreshHeight,this),this.parent.on(V,this.destroy,this))},s.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(ue,this.refreshHeight),this.parent.off(we,this.wireEvents),this.parent.off(Mi,this.refreshHeight),this.parent.off(V,this.destroy))},s.prototype.render=function(){this.unwireEvents(),this.wireEvents(),this.setHandlerHeight()},s.prototype.refreshHeight=function(){if(this.parent.getHeaderTable()){for(var e=this.getResizeHandlers(),t=0;t<e.length;t++)e[t].parentElement.offsetHeight>0&&(e[t].style.height=e[t].parentElement.offsetHeight+"px");this.setHandlerHeight()}},s.prototype.wireEvents=function(){l.bi.add(this.parent.getHeaderContent(),l.AR.touchStartEvent,this.touchResizeStart,this),l.bi.add(this.parent.getHeaderContent(),bi,this.callAutoFit,this)},s.prototype.unwireEvents=function(){l.bi.remove(this.parent.getHeaderContent(),l.AR.touchStartEvent,this.touchResizeStart),l.bi.remove(this.parent.getHeaderContent(),bi,this.callAutoFit)},s.prototype.getResizeHandlers=function(){return this.parent.isFrozenGrid()?[].slice.call(this.parent.getHeaderContent().getElementsByClassName("e-rhandler")):[].slice.call(this.parent.getHeaderTable().getElementsByClassName("e-rhandler"))},s.prototype.setHandlerHeight=function(){for(var e=[].slice.call(this.parent.getHeaderTable().getElementsByClassName("e-rsuppress")),t=0;t<e.length;t++)e[t].style.height=e[t].parentElement.offsetHeight+"px"},s.prototype.callAutoFit=function(e){if(e.target.classList.contains("e-rhandler")){var t=this.getTargetColumn(e);if(t.columns)return;this.resizeColumn(t.field,this.parent.getNormalizedColumnIndex(t.uid),t.uid),(0,l.oq)(e.target,Qe_header).classList.add("e-resized")}},s.prototype.touchResizeStart=function(e){if(!Ze.timer)return Ze.timer=setTimeout(function(){Ze.timer=null},300),this.resizeStart(e);clearTimeout(Ze.timer),Ze.timer=null,this.callAutoFit(e)},s.prototype.resizeStart=function(e){var t=this;if(e.target.classList.contains("e-rhandler")){if(!this.helper){if(0===this.getScrollBarWidth()){if(this.parent.allowGrouping)for(var i=0;i<this.parent.groupSettings.columns.length;i++)this.widthService.setColumnWidth(new De({width:"30px"}),i);for(var r=0,n=this.refreshColumnWidth();r<n.length;r++)this.widthService.setColumnWidth(n[r]);this.widthService.setWidthToTable()}if(this.refreshStackedColumnWidth(),this.element=e.target,this.parent.getVisibleFrozenColumns()){var a=this.parent.getMovableContentTbody(),h=this.parent.getFrozenLeftContentTbody(),d=this.parent.getFrozenRightContentTbody(),p=[].slice.call(a.childNodes),c=[].slice.call(h.childNodes),u=[];this.parent.getFrozenMode()===B&&d&&(u=[].slice.call(d.childNodes));var f=function(m){Tt(g.parent,function(C,b){t.parent.rowHeight?b[m].style.height=t.parent.rowHeight+"px":b[m].style.removeProperty("height")},[c,p,u])},g=this;for(i=0;i<p.length;i++)f(i)}this.parentElementWidth=this.parent.element.getBoundingClientRect().width,this.appendHelper(),this.column=this.getTargetColumn(e),this.pageX=this.getPointX(e),this.minMove=this.column.getFreezeTableName()===Q?this.parent.enableRtl?(this.column.minWidth?parseFloat(this.column.minWidth.toString()):0)-parseFloat((0,l.le)(this.column.width)?"":this.column.width.toString()):parseFloat((0,l.le)(this.column.width)?"":this.column.width.toString())-(this.column.minWidth?parseFloat(this.column.minWidth.toString()):0):this.parent.enableRtl?parseFloat(this.column.width.toString())-(this.column.minWidth?parseFloat(this.column.minWidth.toString()):0):(this.column.minWidth?parseFloat(this.column.minWidth.toString()):0)-parseFloat((0,l.le)(this.column.width)?"":this.column.width.toString()),this.minMove+=this.pageX}l.AR.isDevice&&!this.helper.classList.contains("e-ricon")?(this.helper.classList.add("e-ricon"),l.bi.add(document,l.AR.touchStartEvent,this.removeHelper,this),l.bi.add(this.helper,l.AR.touchStartEvent,this.resizeStart,this)):this.parent.trigger("resizeStart",{e,column:this.column},function(m){m.cancel||t.parent.isEdit?t.cancelResizeAction():(l.bi.add(document,l.AR.touchEndEvent,t.resizeEnd,t),l.bi.add(t.parent.element,l.AR.touchMoveEvent,t.resizing,t),t.updateCursor("add"))})}},s.prototype.cancelResizeAction=function(e){e&&(l.bi.remove(this.parent.element,l.AR.touchMoveEvent,this.resizing),l.bi.remove(document,l.AR.touchEndEvent,this.resizeEnd),this.updateCursor("remove")),l.AR.isDevice&&(l.bi.remove(document,l.AR.touchStartEvent,this.removeHelper),l.bi.remove(this.helper,l.AR.touchStartEvent,this.resizeStart)),(0,l.og)(this.helper),this.refresh()},s.prototype.getWidth=function(e,t,i){return t&&e<t?t:i&&e>i?i:e},s.prototype.updateResizeEleHeight=function(){for(var e=[].slice.call(this.parent.getHeaderContent().getElementsByClassName("e-rhandler")),t=0;t<e.length;t++)e[t].style.height=this.element.parentElement.offsetHeight+"px"},s.prototype.getColData=function(e,t){return{width:parseFloat((0,l.le)(this.widthService.getWidth(e))||"auto"===this.widthService.getWidth(e)?"0":this.widthService.getWidth(e).toString())+t,minWidth:e.minWidth?parseFloat(e.minWidth.toString()):null,maxWidth:e.maxWidth?parseFloat(e.maxWidth.toString()):null}},s.prototype.resizing=function(e){if(!(0,l.le)(this.column)){var t=0;(0,l.le)(this.column)&&(t=w(this.element,"th").offsetWidth),this.parent.allowTextWrap&&(this.updateResizeEleHeight(),this.setHelperHeight());var i=this.getPointX(e),r=this.parent.enableRtl?-(i-this.pageX):i-this.pageX;this.column.getFreezeTableName()===Q&&(r=this.parent.enableRtl?i-this.pageX:this.pageX-i);var n=this.getColData(this.column,r);n.width||(n.width=(0,l.oq)(this.element,"th").offsetWidth);var o=this.getWidth(n.width,n.minWidth,n.maxWidth);if(this.parent.log("resize_min_max",{column:this.column,width:o}),this.column.getFreezeTableName()===Q&&(this.parent.enableRtl&&this.minMove>=i||!this.parent.enableRtl&&this.minMove<=i)&&(o=this.column.minWidth?parseFloat(this.column.minWidth.toString()):10,this.pageX=i=this.minMove),(this.column.getFreezeTableName()!==Q&&(!this.parent.enableRtl&&this.minMove>=i||this.parent.enableRtl&&this.minMove<=i)||this.column.getFreezeTableName()===Q&&(this.parent.enableRtl&&this.minMove>=i||!this.parent.enableRtl&&this.minMove<=i))&&(o=this.column.minWidth?parseFloat(this.column.minWidth.toString()):10,this.pageX=i=this.minMove),o!==parseFloat((0,l.le)(this.column.width)||"auto"===this.column.width?t.toString():this.column.width.toString())){this.pageX=i,this.column.width=(0,l.Ac)(o);var a={e,column:this.column};if(this.parent.trigger("resizing",a),a.cancel)return void this.cancelResizeAction(!0);var h=[this.column],d=[this.column];this.column.columns&&(h=this.getSubColumns(this.column,[]),h=this.calulateColumnsWidth(h,!1,r),d=this.calulateColumnsWidth(h,!0,r));for(var p=0,c=d;p<c.length;p++)this.widthService.setColumnWidth(c[p],null,"resize");this.updateHelper()}this.isDblClk=!1}},s.prototype.calulateColumnsWidth=function(e,t,i){for(var r=[],n=0,o=e;n<o.length;n++){for(var a=o[n],h=0,d=0;d<e.length;d++)h+=parseFloat(e[d].width.toString());var p=this.getColData(a,parseFloat(a.width)*i/h),c=this.getWidth(p.width,p.minWidth,p.maxWidth);c!==parseFloat(a.width.toString())&&(t&&(a.width=(0,l.Ac)(c<1?1:c)),r.push(a))}return r},s.prototype.getSubColumns=function(e,t){for(var i=0,r=e.columns;i<r.length;i++){var n=r[i];!1!==n.visible&&n.allowResizing&&(n.columns?this.getSubColumns(n,t):t.push(n))}return t},s.prototype.resizeEnd=function(e){if(this.helper&&!this.parent.isDestroyed){l.bi.remove(this.parent.element,l.AR.touchMoveEvent,this.resizing),l.bi.remove(document,l.AR.touchEndEvent,this.resizeEnd),this.updateCursor("remove"),(0,l.og)(this.helper);var t={e,column:this.column},i=this.parent.getContent().querySelector("."+ie),r=i.querySelector("."+_)?i.querySelector("."+_):i;r.scrollHeight>r.clientHeight&&(this.parent.scrollModule.setPadding(),r.style.overflowY="scroll"),this.parent.trigger(xs,t),(0,l.oq)(this.element,".e-headercell").classList.add("e-resized"),this.isFrozenColResized=!!w(this.element,"e-frozenheader"),this.parent.isFrozenGrid()&&this.parent.notify(Be,{case:"textwrap"}),this.parent.allowTextWrap&&(this.updateResizeEleHeight(),this.parent.notify(hn,{case:"textwrap"})),this.refresh(),this.doubleTapEvent(e),this.isDblClk=!0}},s.prototype.getPointX=function(e){return e.touches&&e.touches.length?e.touches[0].pageX:e.pageX},s.prototype.refreshColumnWidth=function(){for(var e=this.parent.getColumns(),t=0,i=[].slice.apply(this.parent.getHeaderContent().querySelectorAll("th.e-headercell"));t<i.length;t++)for(var r=i[t],n=0,o=e;n<o.length;n++){var a=o[n];if(r.querySelector("[e-mappinguid]")&&r.querySelector("[e-mappinguid]").getAttribute("e-mappinguid")===a.uid&&a.visible){a.width=r.getBoundingClientRect().width;break}}return e},s.prototype.refreshStackedColumnWidth=function(){for(var e=0,t=this.parent.getStackedColumns(this.parent.columns);e<t.length;e++){var i=t[e];i.width=this.getStackedWidth(i,0)}},s.prototype.getStackedWidth=function(e,t){for(var i=0,r=e.columns;i<r.length;i++){var n=r[i];!1!==n.visible&&(n.columns?this.getStackedWidth(n,t):t+=n.width)}return t},s.prototype.getTargetColumn=function(e){var t=(0,l.oq)(e.target,Qe_header),i=(t=t.querySelector(".e-headercelldiv")||t.querySelector(".e-stackedheadercelldiv")).getAttribute("e-mappinguid");return this.parent.getColumnByUid(i)},s.prototype.updateCursor=function(e){var t=[].slice.call(this.parent.getHeaderContent().querySelectorAll("th"));t.push(this.parent.element);for(var i=0,r=t;i<r.length;i++)r[i].classList[e]("e-rcursor")},s.prototype.refresh=function(){this.column=null,this.pageX=null,this.element=null,this.helper=null},s.prototype.appendHelper=function(){this.helper=this.parent.createElement("div",{className:"e-rhelper"}),this.parent.element.appendChild(this.helper),this.setHelperHeight()},s.prototype.setHelperHeight=function(){var e=this.parent.isFrozenGrid(),t=e?this.parent.getContent().querySelector("."+ie).offsetHeight:this.parent.getContent().offsetHeight-this.getScrollBarWidth(),i=(0,l.oq)(this.element,Qe_header),r=[].slice.call(this.parent.getHeaderContent().querySelectorAll("tr")),n=this.parent.getFrozenRightColumnsCount();e&&(r=w(i,W)?[].slice.call(this.parent.getHeaderContent().querySelector("."+W).querySelectorAll("tr")):n&&w(i,"e-frozen-right-header")?[].slice.call(this.parent.getHeaderContent().querySelector(".e-frozen-right-header").querySelectorAll("tr")):[].slice.call(this.parent.getHeaderContent().querySelector(".e-frozen-left-header").querySelectorAll("tr")));for(var o=r.indexOf(i.parentElement);o<r.length&&o>-1;o++)t+=r[o].offsetHeight;var a=this.calcPos(i);w(i,"e-frozen-right-header")?a.left+=this.parent.enableRtl?i.offsetWidth-2:-1:a.left+=this.parent.enableRtl?-1:i.offsetWidth-2,this.helper.style.cssText="height: "+t+"px; top: "+a.top+"px; left:"+Math.floor(a.left)+"px;",this.parent.enableVirtualization&&this.helper.classList.add("e-virtual-rhandler")},s.prototype.getScrollBarWidth=function(e){var t=this.parent.getContent().firstChild;return t.scrollHeight>t.clientHeight&&e||t.scrollWidth>t.clientWidth?zt():0},s.prototype.removeHelper=function(e){var t=e.target.classList;!t.contains("e-rhandler")&&!t.contains("e-ricon")&&this.helper&&(l.bi.remove(document,l.AR.touchStartEvent,this.removeHelper),l.bi.remove(this.helper,l.AR.touchStartEvent,this.resizeStart),(0,l.og)(this.helper),this.refresh())},s.prototype.updateHelper=function(){var t,e=(0,l.oq)(this.element,Qe_header);if((t=w(e,"e-frozen-right-header")?Math.floor(this.calcPos(e).left+(this.parent.enableRtl?e.offsetWidth-2:-1)):Math.floor(this.calcPos(e).left+(this.parent.enableRtl?-1:e.offsetWidth-2)))>this.parentElementWidth&&(t=this.parentElementWidth-2),this.parent.isFrozenGrid()){var n=(0,l.oq)(e,"."+Z).offsetLeft;t<n&&(t=n)}this.helper.style.left=t+"px"},s.prototype.calcPos=function(e){for(var t={top:0,left:0},i=e.getBoundingClientRect(),r=e.ownerDocument,n=w(e,"e-grid")||r.documentElement;n&&(n===r.body||n===r.documentElement)&&"static"===n.style.position;)n=n.parentNode;return n&&n!==e&&1===n.nodeType&&(t=n.getBoundingClientRect()),{top:i.top-t.top,left:i.left-t.left}},s.prototype.doubleTapEvent=function(e){var t=this;this.getUserAgent()&&this.isDblClk&&(this.tapped?(clearTimeout(this.tapped),this.callAutoFit(e),this.tapped=null):this.tapped=setTimeout(function(){t.tapped=null},300))},s.prototype.getUserAgent=function(){var e=l.AR.userAgent.toLowerCase();return/iphone|ipod|ipad/.test(e)},s.prototype.timeoutHandler=function(){this.tapped=null},s}(),Kt=function(){function s(e,t,i,r){var n=this;this.sortRequired=!0,this.groupSortFocus=!1,this.groupCancelFocus=!1,this.isAppliedGroup=!1,this.isAppliedUnGroup=!1,this.reorderingColumns=[],this.visualElement=(0,l.az)("div",{className:"e-cloneproperties e-dragclone e-gdclone",styles:"line-height:23px",attrs:{action:"grouping"}}),this.helper=function(o){var a=n.parent,h=o.sender.target,d=h.classList.contains("e-groupheadercell")?h:w(h,"e-groupheadercell");return!(!d||!h.classList.contains("e-drag")&&n.groupSettings.allowReordering)&&(n.column=a.getColumnByField(d.firstElementChild.getAttribute("ej-mappingname")),n.visualElement.textContent=d.textContent,n.visualElement.style.width=d.offsetWidth+2+"px",n.visualElement.style.height=d.offsetHeight+2+"px",n.visualElement.setAttribute("e-mappinguid",n.column.uid),a.element.appendChild(n.visualElement),n.visualElement)},this.dragStart=function(o){n.parent.element.classList.add("e-ungroupdrag")},this.drag=function(o){n.groupSettings.allowReordering&&n.animateDropper(o);var a=o.target,h=n.parent.element.querySelector(".e-cloneproperties");n.parent.trigger(Lt,{target:a,draggableType:"headercell",column:n.column}),n.groupSettings.allowReordering||((0,l.s1)(h,["e-defaultcur"],["e-notallowedcur"]),w(a,ae)||w(a,"e-headercell")||(0,l.s1)(h,["e-notallowedcur"],["e-defaultcur"]))},this.dragStop=function(o){n.parent.element.classList.remove("e-ungroupdrag");var a=!(w(o.target,ae)||w(o.target,"e-gridheader"));if(n.groupSettings.allowReordering&&a){if((0,l.Od)(o.helper),w(o.target,"e-groupdroparea"))n.rearrangeGroup();else if(!w(o.target,"e-grid")){var h=n.parent.getColumnByUid(o.helper.getAttribute("e-mappinguid")).field;-1!==n.groupSettings.columns.indexOf(h)&&n.ungroupColumn(h)}}else a&&(0,l.Od)(o.helper)},this.animateDropper=function(o){var a=n.parent.element.querySelector(".e-cloneproperties").getAttribute("e-mappinguid"),h=n.parent.getColumnByUid(a).field,d=w(o.target,"e-groupdroparea"),p=w(o.target,"e-group-animator"),c=[].slice.call(n.element.getElementsByClassName("e-groupheadercell")).map(function(b){return b.querySelector("div").getAttribute("ej-mappingname")}),u=JSON.parse(JSON.stringify(c));if(p||d){if(p){var f=p.querySelector("div[ej-mappingname]").getAttribute("ej-mappingname"),g=+p.getAttribute("index");if(f!==h){var v=u.indexOf(h);-1!==v&&u.splice(v,1),u.splice(g+(-1!==g&&v===g?1:0),0,h)}}else d&&-1===u.indexOf(h)&&u.push(h);n.element.innerHTML="",u.length&&!n.element.classList.contains("e-grouped")&&n.element.classList.add("e-grouped"),n.reorderingColumns=u;for(var C=0;C<u.length;C++)n.addColToGroupDrop(u[C])}else n.addLabel(),n.removeColFromGroupDrop(h)},this.drop=function(o){var a=n.parent,h=a.getColumnByUid(o.droppedElement.getAttribute("e-mappinguid"));n.element.classList.remove("e-hover"),(0,l.Od)(o.droppedElement),n.aria.setDropTarget(n.parent.element.querySelector(".e-groupdroparea"),!1),n.aria.setGrabbed(n.parent.getHeaderTable().querySelector("[aria-grabbed=true]"),!1),(0,l.le)(h)||!1===h.allowGrouping||w(a.getColumnHeaderByUid(h.uid),"e-grid").getAttribute("id")!==a.element.getAttribute("id")?n.parent.log("action_disabled_column",{moduleName:n.getModuleName(),columnName:h.headerText}):n.groupColumn(h.field)},this.contentRefresh=!0,this.aria=new Bi,this.parent=e,this.groupSettings=t,this.serviceLocator=r,this.sortedColumns=i,this.focus=r.getService("focus"),this.addEventListener(),this.groupGenerator=new Sr(this.parent)}return s.prototype.addLabel=function(){if(!this.element.getElementsByClassName("e-group-animator").length){var e=this.l10n.getConstant("GroupDropArea");this.element.innerHTML=e,this.element.classList.remove("e-grouped")}},s.prototype.rearrangeGroup=function(){this.sortRequired=!1,this.updateModel()},s.prototype.columnDrag=function(e){this.groupSettings.allowReordering&&e.column.allowGrouping&&this.animateDropper(e);var t=this.parent.element.querySelector(".e-cloneproperties");(0,l.s1)(t,["e-defaultcur"],["e-notallowedcur"]),!w(e.target,"e-groupdroparea")&&!(this.parent.allowReordering&&w(e.target,"e-headercell"))&&(0,l.s1)(t,["e-notallowedcur"],["e-defaultcur"]),e.target.classList.contains("e-groupdroparea")?this.element.classList.add("e-hover"):this.element.classList.remove("e-hover")},s.prototype.columnDragStart=function(e){if(!e.target.classList.contains("e-stackedheadercell")){var t=this.parent.element.querySelector(".e-groupdroparea");this.aria.setDropTarget(t,e.column.allowGrouping);var i=e.target.classList.contains("e-headercell")?e.target:w(e.target,"e-headercell");this.aria.setGrabbed(i,!0,!e.column.allowGrouping)}},s.prototype.columnDrop=function(e){var t=this.parent;if("grouping"===e.droppedElement.getAttribute("action")){var i=t.getColumnByUid(e.droppedElement.getAttribute("e-mappinguid"));if((0,l.le)(i)||!1===i.allowGrouping||w(t.getColumnHeaderByUid(i.uid),"e-grid").getAttribute("id")!==t.element.getAttribute("id"))return;this.ungroupColumn(i.field)}},s.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(X,this.enableAfterRender,this),this.parent.on(Jr,this.onActionComplete,this),this.parent.on(As,this.onActionComplete,this),this.parent.on(Se,this.onPropertyChanged,this),this.parent.on(xe,this.clickHandler,this),this.parent.on(Lt,this.columnDrag,this),this.parent.on($t,this.columnDragStart,this),this.parent.on(ri,this.columnDrop,this),this.parent.on(ei,this.columnDrop,this),this.parent.on(ue,this.refreshSortIcons,this),this.parent.on(Xr,this.refreshSortIcons,this),this.parent.on(oe,this.keyPressHandler,this),this.parent.on(ee,this.initialEnd,this),this.parent.on(Ye,this.initialEnd,this),this.parent.on(we,this.render,this),this.parent.on(wt,this.onGroupAggregates,this),this.parent.on(V,this.destroy,this),this.parent.on("group-expand-collapse",this.updateExpand,this),this.parent.on("persist-data-changed",this.initialEnd,this))},s.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(we,this.render),this.parent.off(X,this.enableAfterRender),this.parent.off(Jr,this.onActionComplete),this.parent.off(As,this.onActionComplete),this.parent.off(Se,this.onPropertyChanged),this.parent.off(xe,this.clickHandler),this.parent.off(Lt,this.columnDrag),this.parent.off($t,this.columnDragStart),this.parent.off(ei,this.columnDrop),this.parent.off(ri,this.columnDrop),this.parent.off(ue,this.refreshSortIcons),this.parent.off(Xr,this.refreshSortIcons),this.parent.off(oe,this.keyPressHandler),this.parent.off(wt,this.onGroupAggregates),this.parent.off(V,this.destroy),this.parent.off("group-expand-collapse",this.updateExpand))},s.prototype.initialEnd=function(){var e=this.parent;if(this.parent.off(ee,this.initialEnd),this.parent.off(Ye,this.initialEnd),this.parent.getColumns().length&&this.groupSettings.columns.length){this.contentRefresh=!1;for(var t=0,i=e.groupSettings.columns;t<i.length;t++)this.groupColumn(i[t]);this.contentRefresh=!0}},s.prototype.keyPressHandler=function(e){var t=this.parent;if(e.target&&w(e.target,"e-groupheadercell")&&("tab"===e.action||"shiftTab"===e.action)){var i=this.getFocusableGroupedItems();if("tab"===e.action&&e.target===i[i.length-1]||"shiftTab"===e.action&&e.target===i[0])return;for(var r=0;r<i.length;r++)if(e.target===i[r])return e.preventDefault(),void i["tab"===e.action?r+1:r-1].focus()}if("ctrlSpace"===e.action||this.groupSettings.columns.length&&-1!==["altDownArrow","altUpArrow","ctrlDownArrow","ctrlUpArrow","enter"].indexOf(e.action))switch(e.preventDefault(),e.action){case"altDownArrow":case"altUpArrow":var o=t.allowSelection?t.getSelectedRowIndexes():[];if(o.length){var a=t.getContentTable().querySelector(I).children,d=void 0;for(r=t.getDataRows()[o[o.length-1]].rowIndex;r>=0;r--)if(!a[r].classList.contains(G)&&!a[r].classList.contains("e-detailrow")){d=a[r];break}this.expandCollapseRows(d.querySelector("altUpArrow"===e.action?".e-recordplusexpand":".e-recordpluscollapse"))}break;case"ctrlDownArrow":this.expandAll();break;case"ctrlUpArrow":this.collapseAll();break;case"enter":if(e.target.classList.contains("e-groupsort")){this.groupSortFocus=!0,this.applySortFromTarget(e.target);break}if(e.target.classList.contains("e-ungroupbutton")){this.groupCancelFocus=!0,this.unGroupFromTarget(e.target);break}if(this.parent.isEdit||null!==(0,l.oq)(e.target,"#"+this.parent.element.id+"_searchbar")||w(e.target,"e-pager"))return;var p=this.focus.getFocusedElement();(p.classList.contains("e-icon-grightarrow")||p.classList.contains("e-icon-gdownarrow"))&&(p=p.parentElement);var c=p?p.parentElement.querySelector('[class^="e-record"]'):null;if(!c)break;p.children.length&&(p.children[0].classList.contains("e-icon-grightarrow")||p.children[0].classList.contains("e-icon-gdownarrow"))&&this.expandCollapseRows(c);break;case"ctrlSpace":var u=t.focusModule.currentInfo.element;if(u&&u.classList.contains("e-headercell")){var f=t.getColumnByUid(u.firstElementChild.getAttribute("e-mappinguid"));f.field&&t.groupSettings.columns.indexOf(f.field)<0?this.groupColumn(f.field):this.ungroupColumn(f.field)}}},s.prototype.getFocusableGroupedItems=function(){var e=[];if(this.groupSettings.columns.length)for(var t=this.element.querySelectorAll(".e-groupheadercell"),i=0;i<t.length;i++)e.push(t[i].querySelector(".e-grouptext")),e.push(t[i].querySelector(".e-groupsort")),e.push(t[i].querySelector(".e-ungroupbutton"));return e},s.prototype.wireEvent=function(){l.bi.add(this.element,"focusin",this.onFocusIn,this),l.bi.add(this.element,"focusout",this.onFocusOut,this)},s.prototype.unWireEvent=function(){l.bi.remove(this.element,"focusin",this.onFocusIn),l.bi.remove(this.element,"focusout",this.onFocusOut)},s.prototype.onFocusIn=function(e){this.parent.focusModule.currentInfo&&this.parent.focusModule.currentInfo.element&&((0,l.IV)([this.parent.focusModule.currentInfo.element,this.parent.focusModule.currentInfo.elementToFocus],["e-focused","e-focus"]),this.parent.focusModule.currentInfo.element.tabIndex=-1),this.addOrRemoveFocus(e)},s.prototype.onFocusOut=function(e){this.addOrRemoveFocus(e)},s.prototype.addOrRemoveFocus=function(e){if(e.target.classList.contains("e-groupdroparea")||e.target.classList.contains("e-grouptext")||e.target.classList.contains("e-groupsort")||e.target.classList.contains("e-ungroupbutton")){var t=e.target.classList.contains("e-grouptext")?e.target.parentElement.parentElement:e.target;"focusin"===e.type?((0,l.cn)([t],["e-focused","e-focus"]),t.tabIndex=0):((0,l.IV)([t],["e-focused","e-focus"]),t.tabIndex=-1)}},s.prototype.clickHandler=function(e){e.target.classList.contains("e-groupsort")&&(this.groupSortFocus=!0),e.target.classList.contains("e-ungroupbutton")&&(this.groupCancelFocus=!0);var t=w(e.target,"e-recordplusexpand")||w(e.target,"e-recordpluscollapse");t&&(t.children[0].classList.contains("e-icon-gdownarrow")||t.children[0].classList.contains("e-icon-grightarrow"))&&this.expandCollapseRows(e.target),this.applySortFromTarget(e.target),this.unGroupFromTarget(e.target),this.toogleGroupFromHeader(e.target)},s.prototype.unGroupFromTarget=function(e){e.classList.contains("e-ungroupbutton")&&this.ungroupColumn(e.parentElement.getAttribute("ej-mappingname"))},s.prototype.toogleGroupFromHeader=function(e){this.groupSettings.showToggleButton&&(e.classList.contains("e-grptogglebtn")?e.classList.contains("e-toggleungroup")?this.ungroupColumn(this.parent.getColumnByUid(e.parentElement.getAttribute("e-mappinguid")).field):this.groupColumn(this.parent.getColumnByUid(e.parentElement.getAttribute("e-mappinguid")).field):e.classList.contains("e-toggleungroup")&&this.ungroupColumn(e.parentElement.getAttribute("ej-mappingname")))},s.prototype.applySortFromTarget=function(e){var t=this.parent,i=(0,l.oq)(e,".e-groupheadercell");if(t.allowSorting&&i&&!e.classList.contains("e-ungroupbutton")&&!e.classList.contains("e-toggleungroup")){var r=i.firstElementChild.getAttribute("ej-mappingname");t.getColumnHeaderByField(r).getElementsByClassName("e-ascending").length?t.sortColumn(r,"Descending",!0):t.sortColumn(r,"Ascending",!0)}},s.prototype.expandCollapseRows=function(e){var t=w(e,"e-recordplusexpand")||w(e,"e-recordpluscollapse");if(t){var i=this.parent.getContentTable().querySelector(I).children,r=void 0,n=void 0,o=void 0,a=this.parent,h=t.parentElement.getElementsByClassName("e-indentcell").length,d=t.parentElement.getAttribute("data-uid"),p=a.getRowObjectFromUID(d),c=!1;if(t.classList.contains("e-recordpluscollapse")?((0,l.cn)([t],"e-recordplusexpand"),(0,l.IV)([t],"e-recordpluscollapse"),t.firstElementChild.className="e-icons e-gdiagonaldown e-icon-gdownarrow",t.firstElementChild.setAttribute("title","expanded"),c=!0,p.isExpand=!0,he(a)&&this.updateVirtualRows(a,e,c,o,n),this.parent.groupSettings.enableLazyLoading&&this.parent.contentModule.captionExpand(t.parentElement)):(r=!0,p.isExpand=!1,(0,l.IV)([t],"e-recordplusexpand"),(0,l.cn)([t],"e-recordpluscollapse"),t.firstElementChild.className="e-icons e-gnextforward e-icon-grightarrow",t.firstElementChild.setAttribute("title","collapsed"),he(a)&&this.updateVirtualRows(a,e,!r,o,n),this.parent.groupSettings.enableLazyLoading&&this.parent.contentModule.captionCollapse(t.parentElement)),this.aria.setExpand(t,c),!he(a)&&!this.parent.groupSettings.enableLazyLoading){for(var u=a.getRowsObject(),f=u.indexOf(p),g={},v=a.enableInfiniteScrolling&&a.infiniteScrollSettings&&a.infiniteScrollSettings.enableCache&&u.length!==i.length?Array.from(i).indexOf(t.parentElement):void 0,m=f;m<u.length&&!(m>f&&u[m].indent===h);m++){if(u[m].isDetailRow){var C=u[m-1].isExpand&&u[m-1].visible;v&&v>0&&v<i.length?i[v].style.display=C?"":"none":(0,l.le)(v)&&(i[m].style.display=C?"":"none")}else if(!1===g[u[m].parentUid])u[m].visible=!1,v&&v>0&&v<i.length?i[v].style.display="none":(0,l.le)(v)&&(i[m].style.display="none");else{if(!(u[m].isDataRow||u[m].isCaptionRow||u[m].isDetailRow||u[m].isAggregateRow)&&(C=u[m].cells.some(function(y){return y.isDataCell&&y.visible}))===u[m].visible)continue;u[m].visible=!0,v&&v>0&&v<i.length?(i[v].style.display="",i[v].classList.remove("e-hide")):(0,l.le)(v)&&(i[m].style.display="",i[m].classList.remove("e-hide"))}u[m].isCaptionRow&&(g[u[m].uid]=u[m].isExpand&&u[m].visible),(0,l.le)(v)||v++}this.parent.notify(Ht,{rows:this.parent.getRowsObject()})}(!this.parent.enableInfiniteScrolling||!this.parent.groupSettings.enableLazyLoading)&&this.parent.notify("infinite-group-collapse",{isCollapse:r,parentUid:d})}},s.prototype.updateVirtualRows=function(e,t,i,r,n){var o=e.getRowObjectFromUID(t.closest("tr").getAttribute("data-uid"));o.isExpand=i,function(s){for(var e=[],t=s.vRows,i=0;i<t.length;i++)t[i].isDataRow?e.push(t[i]):t[i].isDataRow||(e.push(t[i]),!t[i].isExpand&&t[i].isCaptionRow&&(i+=Zh(t[i],s)));s.vcRows=e}(e),this.parent.notify(An,{}),(r=e.getDataModule().generateQuery(!1)).queries=e.getDataModule().aggregateQuery(e.getQuery().clone()).queries;var a={requestType:"virtualscroll",rowObject:o};e.contentModule&&(a.virtualInfo=e.contentModule.prevInfo),e.getDataModule().getData(a,r.requiresCount()).then(function(h){return e.renderModule.dataManagerSuccess(h,a)})},s.prototype.expandCollapse=function(e){if(this.parent.groupSettings.columns.length){e||this.parent.notify("initial-collapse",e);for(var r,t=this.parent.getContentTable().querySelector(I).children,i=this.parent.getRowsObject(),n=0,o=t.length;n<o;n++)t[n].querySelectorAll(".e-recordplusexpand, .e-recordpluscollapse").length?((r=t[n].querySelector(e?".e-recordpluscollapse":".e-recordplusexpand"))&&(e?(r.className="e-recordplusexpand",r.firstElementChild.className="e-icons e-gdiagonaldown e-icon-gdownarrow",r.setAttribute("aria-expanded","true"),r.firstElementChild.setAttribute("title","expanded")):(r.className="e-recordpluscollapse",r.firstElementChild.className="e-icons e-gnextforward e-icon-grightarrow",r.setAttribute("aria-expanded","false"),r.firstElementChild.setAttribute("title","collapsed"))),t[n].firstElementChild.classList.contains("e-recordplusexpand")||t[n].firstElementChild.classList.contains("e-recordpluscollapse")||(t[n].style.display=e?"":"none")):t[n].style.display=e?"":"none",i[n].isCaptionRow&&(i[n].isExpand=!!e);this.parent.updateVisibleExpandCollapseRows(),this.parent.notify(Ht,{rows:this.parent.getRowsObject()})}},s.prototype.expandAll=function(){this.expandCollapse(!0)},s.prototype.collapseAll=function(){this.expandCollapse(!1)},s.prototype.render=function(){this.l10n=this.serviceLocator.getService("localization"),this.renderGroupDropArea(),this.initDragAndDrop(),this.refreshToggleBtn(),this.wireEvent()},s.prototype.renderGroupDropArea=function(){var e=this.parent.element.querySelector(".e-groupdroparea");e&&(0,l.Od)(e),this.element=this.parent.createElement("div",{className:"e-groupdroparea",attrs:{tabindex:"-1"}}),this.groupSettings.allowReordering&&this.element.classList.add("e-group-animate"),this.updateGroupDropArea(),this.parent.element.insertBefore(this.element,this.parent.element.firstChild),this.groupSettings.showDropArea||(this.element.style.display="none")},s.prototype.updateGroupDropArea=function(e){if(this.groupSettings.showDropArea&&!this.groupSettings.columns.length){var t=this.l10n.getConstant("GroupDropArea");this.element.innerHTML=t,this.element.classList.remove("e-grouped")}else(this.element.innerHTML===this.l10n.getConstant("GroupDropArea")&&(1===this.groupSettings.columns.length||!this.isAppliedGroup&&!this.isAppliedUnGroup)||e)&&(this.element.innerHTML=""),this.element.classList.add("e-grouped")},s.prototype.initDragAndDrop=function(){this.initializeGHeaderDrop(),this.initializeGHeaderDrag()},s.prototype.initializeGHeaderDrag=function(){new l._l(this.element,{dragTarget:this.groupSettings.allowReordering?".e-drag":".e-groupheadercell",distance:this.groupSettings.allowReordering?-10:5,helper:this.helper,dragStart:this.dragStart,drag:this.drag,dragStop:this.dragStop})},s.prototype.initializeGHeaderDrop=function(){new l.bK(this.element,{accept:".e-dragclone",drop:this.drop})},s.prototype.groupColumn=function(e){var t=this.parent,i=t.getColumnByField(e);(0,l.le)(i)||!1===i.allowGrouping||this.contentRefresh&&this.groupSettings.columns.indexOf(e)>-1?this.parent.log("action_disabled_column",{moduleName:this.getModuleName(),columnName:i.headerText}):lt(t)?t.notify(Le,{instance:this,handler:this.groupColumn,arg1:e}):(i.visible=t.groupSettings.showGroupedColumn,this.colName=e,this.isAppliedGroup=!0,this.contentRefresh?this.updateModel():this.addColToGroupDrop(e),this.updateGroupDropArea(),this.isAppliedGroup=!1)},s.prototype.ungroupColumn=function(e){var t=this.parent,i=this.parent.enableColumnVirtualization?this.parent.columns.filter(function(a){return a.field===e})[0]:t.getColumnByField(e);if(!((0,l.le)(i)||!1===i.allowGrouping||this.groupSettings.columns.indexOf(e)<0)){if(lt(t))return void t.notify(Le,{instance:this,handler:this.ungroupColumn,arg1:e});i.visible=!0,this.colName=i.field;var r=JSON.parse(JSON.stringify(this.groupSettings.columns));if(r.splice(r.indexOf(this.colName),1),this.sortedColumns.indexOf(e)<0)for(var n=0,o=t.sortSettings.columns.length;n<o;n++)if(e===t.sortSettings.columns[n].field){t.sortSettings.columns.splice(n,1);break}this.groupSettings.allowReordering&&(this.reorderingColumns=r),this.groupSettings.columns=r,t.allowGrouping&&(this.isAppliedUnGroup=!0,this.parent.dataBind())}},s.prototype.updateModel=function(){var e=JSON.parse(JSON.stringify(this.groupSettings.columns));e=this.reorderingColumns.length?JSON.parse(JSON.stringify(this.reorderingColumns)):e,this.sortRequired&&(-1===e.indexOf(this.colName)&&e.push(this.colName),this.groupAddSortingQuery(this.colName)),this.sortRequired=!0,this.parent.groupSettings.columns=e,this.parent.dataBind()},s.prototype.onActionComplete=function(e){"grouping"===e.requestType?this.addColToGroupDrop(this.colName):this.removeColFromGroupDrop(this.colName);var t=this.groupSettings.columns.indexOf(this.colName)>-1?{columnName:this.colName,requestType:"grouping",type:H}:{requestType:"ungrouping",type:H};this.parent.trigger(H,(0,l.l7)(e,t)),this.colName=null},s.prototype.groupAddSortingQuery=function(e){for(var t=0;t<this.parent.sortSettings.columns.length&&this.parent.sortSettings.columns[t].field!==e;)t++;this.parent.sortSettings.columns.length===t?this.parent.sortSettings.columns.push({field:e,direction:"Ascending",isFromGroup:!0}):this.parent.allowSorting||(this.parent.sortSettings.columns[t].direction="Ascending")},s.prototype.createElement=function(e){var t=this.parent,i="Ascending",r=this.parent.createElement("div",{className:"e-grid-icon e-group-animator"}),n=this.parent.createElement("div",{className:"e-grid-icon e-groupheadercell"}),o=this.parent.createElement("div",{attrs:{"ej-mappingname":e}});We(e)&&o.setAttribute("ej-complexname",fe(e));var a=this.parent.getColumnByField(e),h=t.getColumnHeaderByUid(a.uid);return this.groupSettings.allowReordering&&o.appendChild(this.parent.createElement("span",{className:"e-drag e-icons e-icon-drag",innerHTML:"&nbsp;",attrs:{title:"Drag",tabindex:"-1","aria-label":this.l10n.getConstant("GroupedDrag")}})),o.appendChild(this.parent.createElement("span",{className:"e-grouptext",innerHTML:a.headerText,attrs:{tabindex:"-1","aria-label":this.l10n.getConstant("GroupedSortIcon")+a.headerText}})),this.groupSettings.showToggleButton&&o.appendChild(this.parent.createElement("span",{className:"e-togglegroupbutton e-icons e-icon-ungroup e-toggleungroup",innerHTML:"&nbsp;",attrs:{tabindex:"-1","aria-label":this.l10n.getConstant("UnGroupAria")}})),h.querySelectorAll(".e-ascending,.e-descending").length&&(i=h.querySelector(".e-ascending")?"Ascending":"Descending"),o.appendChild(this.parent.createElement("span",{className:"e-groupsort e-icons e-"+i.toLowerCase()+" e-icon-"+i.toLowerCase(),innerHTML:"&nbsp;",attrs:{tabindex:"-1","aria-label":this.l10n.getConstant("GroupedSortIcon")+a.headerText,role:"button"}})),o.appendChild(this.parent.createElement("span",{className:"e-ungroupbutton e-icons e-icon-hide",innerHTML:"&nbsp;",attrs:{title:this.l10n.getConstant("UnGroup"),tabindex:"-1","aria-label":this.l10n.getConstant("UnGroupIcon")+a.headerText,role:"button"},styles:this.groupSettings.showUngroupButton?"":"display:none"})),n.appendChild(o),this.groupSettings.allowReordering&&(r.appendChild(n),r.appendChild(this.createSeparator()),n=r),n},s.prototype.addColToGroupDrop=function(e){var t=We(e)?this.parent.element.querySelector(".e-groupdroparea div[ej-complexname="+fe(e)+"]"):this.parent.element.querySelector(".e-groupdroparea div[ej-mappingname="+e+"]");if(!this.groupSettings.allowReordering||!t){var i=this.parent.getColumnByField(e);if(!(0,l.le)(i)){var r=this.createElement(e);if(this.groupSettings.allowReordering){var n=this.element.getElementsByClassName("e-group-animator").length;r.setAttribute("index",n.toString())}this.element.appendChild(r);var o=this.parent.focusModule;o.setActive(!0);var a=[0,0];0===o.active.matrix.matrix[a[0]][a[1]]&&(a=mt(o.active.matrix.matrix,a,!0)),o.active.matrix.current=a,o.active.getTable().rows[o.active.matrix.current[0]].cells[o.active.matrix.current[1]].focus()}}},s.prototype.createSeparator=function(){return this.parent.createElement("span",{className:"e-nextgroup e-icons e-icon-next",innerHTML:"&nbsp;",attrs:{tabindex:"-1","aria-label":this.l10n.getConstant("GroupSeperator")},styles:this.groupSettings.showUngroupButton?"":"display:none"})},s.prototype.refreshToggleBtn=function(e){if(this.groupSettings.showToggleButton)for(var t=[].slice.call(this.parent.getHeaderTable().getElementsByClassName("e-headercelldiv")),i=0,r=t.length;i<r;i++)if(!t[i].classList.contains("e-emptycell")&&!t[i].classList.contains("e-headerchkcelldiv")){var n=this.parent.getColumnByUid(t[i].getAttribute("e-mappinguid"));(!this.parent.showColumnMenu||this.parent.showColumnMenu&&!n.showColumnMenu)&&(t[i].getElementsByClassName("e-grptogglebtn").length&&(0,l.Od)(t[i].querySelectorAll(".e-grptogglebtn")[0]),e||t[i].appendChild(this.parent.createElement("span",{className:"e-grptogglebtn e-icons "+(this.groupSettings.columns.indexOf(n.field)>-1?"e-toggleungroup e-icon-ungroup":"e-togglegroup e-icon-group"),attrs:{tabindex:"-1","aria-label":(0,l.le)(this.l10n)?this.parent.localeObj.getConstant("GroupButton"):this.l10n.getConstant("GroupButton")}})))}},s.prototype.removeColFromGroupDrop=function(e){if(!(0,l.le)(this.getGHeaderCell(e))){var t=this.getGHeaderCell(e);if(this.groupSettings.allowReordering){var i=w(t,"e-group-animator");(0,l.Od)(i)}else(0,l.Od)(t);this.updateGroupDropArea()}this.isAppliedUnGroup=!1},s.prototype.onPropertyChanged=function(e){if(e.module===this.getModuleName())for(var t=0,i=Object.keys(e.properties);t<i.length;t++){var r=i[t];switch(r){case"columns":var n=void 0;if(this.contentRefresh){if(this.isAppliedUnGroup)n={columnName:this.colName,requestType:"ungrouping",type:Y};else{if(!this.isAppliedGroup){this.updateGroupDropArea(!0);for(var o=0;o<this.parent.sortSettings.columns.length;o++)this.parent.sortSettings.columns[o].isFromGroup&&(this.parent.sortSettings.columns.splice(o,1),o--);for(var a=0;a<this.groupSettings.columns.length;a++)this.colName=this.groupSettings.columns[a],this.parent.getColumnByField(this.colName).visible=this.parent.groupSettings.showGroupedColumn,this.groupAddSortingQuery(this.colName),a<this.groupSettings.columns.length-1&&this.addColToGroupDrop(this.groupSettings.columns[a])}n={columnName:this.colName,requestType:e.properties[r].length?"grouping":"ungrouping",type:Y}}if(!this.groupSettings.showGroupedColumn){var d=e.oldProperties[r];for(a=0;a<d.length;a++)-1===e.properties[r].indexOf(d[a])&&(this.parent.getColumnByField(d[a]).visible=!0)}this.parent.notify(ve,n)}break;case"showDropArea":this.updateGroupDropArea(),this.groupSettings.showDropArea?(this.element.style.display="",this.parent.headerModule.refreshUI()):this.element.style.display="none";break;case"showGroupedColumn":this.updateGroupedColumn(this.groupSettings.showGroupedColumn),this.parent.notify(ve,{requestType:"refresh"});break;case"showUngroupButton":this.updateButtonVisibility(this.groupSettings.showUngroupButton,"e-ungroupbutton");break;case"showToggleButton":this.updateButtonVisibility(this.groupSettings.showToggleButton,"e-togglegroupbutton "),this.parent.refreshHeader();break;case"enableLazyLoading":this.parent.freezeRefresh()}}},s.prototype.updateGroupedColumn=function(e){for(var t=0;t<this.groupSettings.columns.length;t++)this.parent.getColumnByField(this.groupSettings.columns[t]).visible=e},s.prototype.updateButtonVisibility=function(e,t){for(var i=[].slice.call(this.element.getElementsByClassName(t)),r=0;r<i.length;r++)i[r].style.display=e?"":"none"},s.prototype.enableAfterRender=function(e){e.module===this.getModuleName()&&e.enable&&this.render()},s.prototype.destroy=function(){var e=this.parent.element;!e||!e.querySelector("."+pe)&&!e.querySelector("."+ae)||((this.parent.isDestroyed||!this.parent.allowGrouping)&&!this.parent.refreshing&&this.clearGrouping(),this.unWireEvent(),this.removeEventListener(),this.refreshToggleBtn(!0),this.element.parentNode&&(0,l.Od)(this.element))},s.prototype.clearGrouping=function(){var e=JSON.parse(JSON.stringify(this.groupSettings.columns));this.contentRefresh=!1;for(var t=0,i=e.length;t<i;t++)t===i-1&&(this.contentRefresh=!0),this.ungroupColumn(e[t]);this.contentRefresh=!0},s.prototype.getModuleName=function(){return"group"},s.prototype.refreshSortIcons=function(){var t,e=this.parent,i=e.sortSettings.columns,r=e.groupSettings.columns,n=this.parent.getColumns().map(function(h){return h.field});this.refreshToggleBtn();for(var o=0,a=i.length;o<a;o++)-1!==n.indexOf(i[o].field)&&(t=e.getColumnHeaderByField(i[o].field),!e.allowSorting&&(this.sortedColumns.indexOf(i[o].field)>-1||this.groupSettings.columns.indexOf(i[o].field)>-1)?((0,l.s1)(t.querySelector(".e-sortfilterdiv"),["e-ascending","e-icon-ascending"],[]),i.length>1&&t.querySelector(".e-headercelldiv").appendChild(this.parent.createElement("span",{className:"e-sortnumber",innerHTML:(o+1).toString()}))):this.getGHeaderCell(i[o].field)&&this.getGHeaderCell(i[o].field).getElementsByClassName("e-groupsort").length&&("Ascending"===i[o].direction?(0,l.s1)(this.getGHeaderCell(i[o].field).querySelector(".e-groupsort"),["e-ascending","e-icon-ascending"],["e-descending","e-icon-descending"]):(0,l.s1)(this.getGHeaderCell(i[o].field).querySelector(".e-groupsort"),["e-descending","e-icon-descending"],["e-ascending","e-icon-ascending"])));for(o=0,a=r.length;o<a;o++)-1!==n.indexOf(r[o])&&e.getColumnHeaderByField(r[o]).setAttribute("aria-grouped","true")},s.prototype.getGHeaderCell=function(e){return this.element&&this.element.querySelector('[ej-mappingname="'+e+'"]')?this.element.querySelector('[ej-mappingname="'+e+'"]').parentElement:null},s.prototype.onGroupAggregates=function(e){var t=this.iterateGroupAggregates(e),i=this.groupGenerator.generateRows(t,{}),r=this.parent.getRowsObject().filter(function(p){return!p.isDataRow}),n=i.filter(function(p){return!p.isDataRow});(this.parent.isReact||this.parent.isVue)&&this.parent.destroyTemplate(["groupFooterTemplate","groupCaptionTemplate","footerTemplate"]);for(var o=0;o<n.length;o++){var a=n[o],h=a.cells.filter(function(p){return p.isDataCell});this.parent.notify("refresh-aggregate-cell",{cells:h,data:a.data,dataUid:r[o]?r[o].uid:""})}},s.prototype.iterateGroupAggregates=function(e){var t=e instanceof Array?e:[],i=this.parent.getRowsObject(),r=this.parent.getCurrentViewRecords(),n=[],o=i.map(function(D){return"delete"===D.edit&&n.push(D.data),D.changes instanceof Object?D.changes:D.data}),a=this.parent.getPrimaryKeyFieldNames()[0];o=0===t.length?o:t;var h=r.map(function(D){var k,L=z.j4.getObject(a,D);return o.some(function(T){return k=T,L===z.j4.getObject(a,T)})?k:D});if((!e.type||"cancel"!==e.type)&&n.length>0)for(var p=0;p<n.length;p++){var c=h.indexOf(n[p]);h.splice(c,1)}for(var u=[],f=this.parent.aggregates,g=0;g<f.length;g++)for(var v=f[g],m=0;m<v.columns.length;m++){var C;C={type:v.columns[m].type.toString().toLowerCase(),field:v.columns[m].field},u.push(C)}for(var y,R=this.parent.groupSettings.columns,F=0;F<R.length;F++)y=z.j4.group(y||h,R[F],u,null,null);return y},s.prototype.updateExpand=function(e){for(var t=e.uid,i=e.isExpand,r=this.parent.getRowsObject(),n=0;n<r.length;n++){var o=r[n];if(o.uid===t||(0,l.le)(t)){o.isExpand=i;for(var a=function(p){var c=r[p],u=void 0;if(c.parentUid!==o.uid&&(u=r.filter(function(f){return f.uid===c.parentUid})[0]),c.parentUid===o.uid?c.visible=o.isExpand:!(0,l.le)(u)&&c.parentUid===u.uid&&(u.isExpand&&!0===u.visible?c.visible=!0:u.isExpand&&!1===u.visible&&(c.visible=!1)),(0,l.le)(t))return"break"},h=n+1;h<r.length&&"break"!==a(h);h++);}}this.parent.notify(ee,{rows:r,args:{isFrozen:!1,rows:r}})},s}(),ta=function(){function s(e,t,i){var r=this;this.fromWheel=!1,this.touchMove=!1,this.options={},this.sentinelInfo={up:{check:function(n,o){var a=n.top-r.containerRect.top;return o.entered=a>=0,a+r.options.pageHeight/2>=0},axis:"Y"},down:{check:function(n,o){var a=n.bottom;return o.entered=n.bottom<=r.containerRect.bottom,a-r.containerRect.top-r.options.pageHeight/2<=r.options.pageHeight/2},axis:"Y"},right:{check:function(n,o){var a=n.right;return r.movableEle?(o.entered=a<r.movableContainerRect.right,a-r.movableContainerRect.width<=r.movableContainerRect.right):(o.entered=a<r.containerRect.right,a-r.containerRect.width<=r.containerRect.right)},axis:"X"},left:{check:function(n,o){var a=n.left;return o.entered=a>0,r.movableEle?a+r.movableContainerRect.width>=r.movableContainerRect.left:a+r.containerRect.width>=r.containerRect.left},axis:"X"}},this.element=e,this.options=t,this.movableEle=i}return s.prototype.observe=function(e,t){var i=this;this.containerRect=this.options.container.getBoundingClientRect(),l.bi.add(this.options.container,"wheel",function(){return i.fromWheel=!0},this),l.bi.add(this.options.container,"scroll",this.virtualScrollHandler(e,t),this),this.options.movableContainer&&(this.movableContainerRect=this.options.movableContainer.getBoundingClientRect(),l.bi.add(this.options.scrollbar,"wheel",function(){return i.fromWheel=!0},this),l.bi.add(this.options.scrollbar,"scroll",this.virtualScrollHandler(e,t),this))},s.prototype.check=function(e){var t=this.sentinelInfo[e];return t.check(!this.movableContainerRect||"left"!==e&&"right"!==e?this.element.getBoundingClientRect():this.movableEle.getBoundingClientRect(),t)},s.prototype.virtualScrollHandler=function(e,t){var i=this,n=(0,l.Ds)(e,"chrome"===l.AR.info.name?200:100),o=(0,l.Ds)(e,50);return this.options.prevTop=this.options.prevLeft=0,function(a){var h=i.options.movableContainer?i.options.container.scrollTop:a.target.scrollTop,d=i.options.movableContainer?i.options.scrollbar.scrollLeft:a.target.scrollLeft,p=i.options.prevTop<h?"down":"up";p=i.options.prevLeft===d?p:i.options.prevLeft<d?"right":"left",i.options.prevTop=h,i.options.prevLeft=d;var c=i.sentinelInfo[p];if(-1!==i.options.axes.indexOf(c.axis)){var u=i.check(p);if(c.entered&&t(!i.movableEle||"right"!==p&&"left"!==p?i.element:i.movableEle,c,p,{top:h,left:d},i.fromWheel,u),u){var f=n;"X"===c.axis&&(f=o),f({direction:p,sentinel:c,offset:{top:h,left:d},focusElement:document.activeElement})}i.fromWheel=!1}}},s.prototype.setPageHeight=function(e){this.options.pageHeight=e},s}(),ia=function(){function s(e){this.cOffsets={},this.cache={},this.movableCache={},this.frozenRightCache={},this.rowCache={},this.data={},this.groups={},this.currentInfo={},this.parent=e,this.model=this.parent.pageSettings,this.rowModelGenerator=this.parent.allowGrouping?new Sr(this.parent):new Je(this.parent)}return s.prototype.generateRows=function(e,t){var i=this.parent.isFrozenGrid(),r=!1,n=t.virtualInfo=t.virtualInfo||this.getData(),o=n.sentinelInfo&&"X"===n.sentinelInfo.axis,h=[],d=this.getBlockIndexes(o||!n.loadNext||n.loadSelf?n.page:n.nextInfo.page),p=[];if(this.currentInfo.blockIndexes&&(d=n.blockIndexes=t.virtualInfo.blockIndexes=this.includePrevPage?this.currentInfo.blockIndexes.slice(1):this.currentInfo.blockIndexes.slice(0,this.currentInfo.blockIndexes.length-1),r=!0),(i&&this.parent.getFrozenMode()!==B&&!t.renderMovableContent||this.parent.getFrozenMode()===B&&!t.renderMovableContent&&!t.renderFrozenRightContent||!i)&&this.checkAndResetCache(t.requestType),he(this.parent)&&this.parent.vcRows.length){var c=this.parent.vcRows.filter(function(y){return y.isDataRow});if(this.parent.isManualRefresh&&c.length===e.records.length||!this.parent.isManualRefresh)return this.parent.vcRows}if(this.parent.enableColumnVirtualization)for(var u=0;u<n.blockIndexes.length;u++)this.isBlockAvailable(n.blockIndexes[u])&&(this.cache[n.blockIndexes[u]]=this.rowModelGenerator.refreshRows(this.cache[n.blockIndexes[u]])),(t.renderMovableContent&&this.isMovableBlockAvailable(n.blockIndexes[u])||t.renderFrozenRightContent&&this.isFrozenRightBlockAvailable(n.blockIndexes[u]))&&((f=t.renderMovableContent?this.movableCache:this.frozenRightCache)[n.blockIndexes[u]]=this.rowModelGenerator.refreshRows(f[n.blockIndexes[u]]));var g=n.blockIndexes;for(u=0;u<g.length;u++){if(!this.isBlockAvailable(g[u])){var v=(0,l.le)(this.startIndex)?this.getStartIndex(g[u],e):this.startIndex,m=this.rowModelGenerator.generateRows(e,{virtualInfo:n,startIndex:v});he(this.parent)&&!this.parent.vcRows.length&&(this.parent.vRows=m,this.parent.vcRows=m,this.parent.notify(An,{}));var C=void 0;he(this.parent)?this.getGroupVirtualRecordsByIndex(m):r?this.setBlockForManualRefresh(this.cache,d,m):(C=~~Math.max(m.length,this.model.pageSize)/2,this.isBlockAvailable(d[0])||(this.cache[d[0]]=m.slice(0,C)),this.isBlockAvailable(d[1])||(this.cache[d[1]]=m.slice(C)))}if(this.parent.groupSettings.columns.length&&!o&&this.cache[g[u]]&&(this.cache[g[u]]=this.updateGroupRow(this.cache[g[u]],g[u])),t.renderMovableContent&&!this.isMovableBlockAvailable(g[u])||t.renderFrozenRightContent&&!this.isFrozenRightBlockAvailable(g[u])){var f=t.renderMovableContent?this.movableCache:this.frozenRightCache;v=(0,l.le)(this.startIndex)?this.getStartIndex(g[u],e):this.startIndex,m=this.rowModelGenerator.generateRows(e,{virtualInfo:n,startIndex:v}),r?this.setBlockForManualRefresh(f,d,m):(C=~~Math.max(m.length,this.model.pageSize)/2,(t.renderFrozenRightContent&&!this.isFrozenRightBlockAvailable(d[0])||t.renderMovableContent&&!this.isMovableBlockAvailable(d[0]))&&(f[d[0]]=m.slice(0,C)),(t.renderFrozenRightContent&&!this.isFrozenRightBlockAvailable(d[1])||t.renderMovableContent&&!this.isMovableBlockAvailable(d[1]))&&(f[d[1]]=m.slice(C)))}t.renderMovableContent||t.renderFrozenRightContent||!this.cache[g[u]]?(f=t.renderMovableContent?this.movableCache:this.frozenRightCache)[g[u]]&&h.push.apply(h,f[g[u]]):h.push.apply(h,this.cache[g[u]]),this.isBlockAvailable(g[u])&&p.push(g[u])}return n.blockIndexes=p,this.parent.allowGrouping&&this.parent.groupSettings.columns.length?this.parent.currentViewData.records=h.map(function(y){return y.data}):i?(t.renderMovableContent&&("Left"===this.parent.getFrozenMode()||"Right"===this.parent.getFrozenMode()||this.parent.getFrozenColumns())||t.renderFrozenRightContent)&&(this.parent.currentViewData=h.map(function(y){return y.data})):this.parent.currentViewData=h.map(function(y){return y.data}),h},s.prototype.setBlockForManualRefresh=function(e,t,i){var r=this.model.pageSize/2;this.includePrevPage?(e[t[0]-1]=i.slice(0,r),e[t[0]]=i.slice(r,2*r),e[t[1]]=i.slice(2*r,3*r),e[t[2]]=i.slice(3*r,4*r)):(e[t[0]]=i.slice(0,r),e[t[1]]=i.slice(r,2*r),e[t[2]]=i.slice(2*r,3*r),e[t[2]+1]=i.slice(3*r,4*r))},s.prototype.getBlockIndexes=function(e){return[e+(e-1),2*e]},s.prototype.getPage=function(e){return e%2==0?e/2:(e+1)/2},s.prototype.isBlockAvailable=function(e){return e in this.cache},s.prototype.isMovableBlockAvailable=function(e){return e in this.movableCache},s.prototype.isFrozenRightBlockAvailable=function(e){return e in this.frozenRightCache},s.prototype.getData=function(){return{page:this.model.currentPage,blockIndexes:this.getBlockIndexes(this.model.currentPage),direction:"down",columnIndexes:this.parent.getColumnIndexesInView()}},s.prototype.getStartIndex=function(e,t,i){void 0===i&&(i=!0);var o=(this.getPage(e)-1)*this.model.pageSize;return i||e%2!=0?o:o+~~(this.model.pageSize/2)},s.prototype.getColumnIndexes=function(e){var t=this;void 0===e&&(e=this.parent.getHeaderContent().querySelector("."+le)),this.parent.isFrozenGrid()&&(e=e.querySelector("."+W));var i=[],r=0|e.scrollLeft,n=Object.keys(this.cOffsets),o=e.getBoundingClientRect().width;r=Math.min(this.cOffsets[n.length-1]-o,r);var a=l.AR.isDevice?2*o:o/2,h=r+o+(0===r?a:0);return n.some(function(d){var p=Number(d),c=t.cOffsets[d];return r-a<=c&&h+a>=c&&i.push(p),h+a<c}),this.addFrozenIndex(i),i},s.prototype.addFrozenIndex=function(e){if(this.parent.getFrozenColumns()&&this.parent.enableColumnVirtualization&&0===e[0])for(var t=0;t<this.parent.getFrozenColumns();t++)e.push(e[e.length-1]+1)},s.prototype.checkAndResetCache=function(e){var t=["paging","refresh","sorting","filtering","searching","grouping","ungrouping","reorder","save","delete"];this.parent.getFrozenColumns()&&this.parent.frozenRows&&this.parent.enableColumnVirtualization&&"reorder"===e&&t.splice(t.indexOf(e),1);var i=t.some(function(r){return e===r});return i&&(this.cache={},this.data={},this.groups={},this.movableCache={},this.frozenRightCache={}),i},s.prototype.refreshColOffsets=function(){var c,t=0;this.cOffsets={};for(var i=this.parent.groupSettings.columns.length,r=this.parent.columns,n=r.length,a=this.parent.groupSettings.columns,h=0;h<a.length;h++)this.cOffsets[h]=30+(0|this.cOffsets[h-1]);for(var d=Array.apply(null,Array(n)).map(function(){return t++}),p=0;p<d.length;p++)d[p]=d[p]+i,this.cOffsets[d[p]]=(0|this.cOffsets[d[p]-1])+((c=r[p]).visible&&(this.parent.groupSettings.showGroupedColumn?c.visible:this.parent.groupSettings.columns.indexOf(c.field)<0)?parseInt(r[p].width,10):0)},s.prototype.updateGroupRow=function(e,t){for(var i=e[0],r=[],n=Object.keys(this.cache),o=0;o<n.length;o++)Number(n[o])<t&&(r=r.concat(this.cache[n[o]]));return i&&i.isDataRow||t%2==0?e:this.iterateGroup(e,r)},s.prototype.iterateGroup=function(e,t){var i=e[0],r=0;return i&&i.isDataRow||e.some(function(o){return t.some(function(a,h){var d=a&&void 0!==a.data.field&&a.data.field===o.data.field&&a.data.key===o.data.key;return d&&(r=h),d})})&&(e.shift(),e=this.iterateGroup(e,t.slice(r))),e},s.prototype.getRows=function(){for(var e=[],t=Object.keys(this.cache),i=0;i<t.length;i++)e=e.concat(this.cache[t[i]]);return e},s.prototype.generateCells=function(e){for(var t=[],i=this.parent.columnModel,r=0;r<i.length;r++)t.push(this.rowModelGenerator.generateCell(i[r],null,null,null,null,e));return t},s.prototype.getGroupVirtualRecordsByIndex=function(e){for(var t=this.parent.contentModule.getGroupedTotalBlocks(),i=this.parent.contentModule.getBlockSize(),r=1;r<=t;r++){var n=0;this.cache[r]=[];for(var o=(r-1)*i;o<e.length&&n!==i;o++)this.cache[r].push(e[o]),e[o].isDataRow&&n++}},s}(),ra=function(){var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])})(e,t)};return function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),ss=function(s){function e(t,i){var r=s.call(this,t,i)||this;return r.prevHeight=0,r.startIndex=0,r.preStartIndex=0,r.preventEvent=!1,r.actions=["filtering","searching","grouping","ungrouping"],r.offsets={},r.tmpOffsets={},r.virtualEle=new sa,r.offsetKeys=[],r.isFocused=!1,r.isSelection=!1,r.isBottom=!1,r.rndrCount=0,r.empty=void 0,r.isCancel=!1,r.requestTypes=["beginEdit","cancel","delete","add","save"],r.isNormaledit="Normal"===r.parent.editSettings.mode,r.virtualData={},r.emptyRowData={},r.vfColIndex=[],r.frzIdx=1,r.isContextMenuOpen=!1,r.isSelectionScroll=!1,r.validationCheck=!1,r.locator=i,r.eventListener("on"),r.parent.on(je,r.setVisible,r),r.vgenerator=r.generator,r}return ra(e,s),e.prototype.renderTable=function(){this.header=this.locator.getService("rendererFactory").getRenderer(de.Header),s.prototype.renderTable.call(this),this.virtualEle.table=this.getTable(),this.virtualEle.content=this.content=this.getPanel().querySelector("."+ie),this.virtualEle.renderWrapper(this.parent.height),this.virtualEle.renderPlaceHolder(),this.virtualEle.wrapper.style.position="absolute";var t=this.parent.dataSource instanceof z.hm&&!this.parent.dataSource.dataSource.offline,i={container:this.content,pageHeight:2*this.getBlockHeight(),debounceEvent:t,axes:this.parent.enableColumnVirtualization?["X","Y"]:["Y"]};this.observer=new ta(this.virtualEle.wrapper,i)},e.prototype.renderEmpty=function(t){this.getTable().appendChild(t),this.parent.frozenRows&&(this.parent.getHeaderContent().querySelector(I).innerHTML=""),this.virtualEle.adjustTable(0,0)},e.prototype.getReorderedFrozenRows=function(t){var i=t.virtualInfo.blockIndexes,r=t.virtualInfo.columnIndexes,n=t.virtualInfo.page;t.virtualInfo.blockIndexes=[1,2],t.virtualInfo.page=1,t.renderMovableContent||(t.virtualInfo.columnIndexes=[]);var o=this.parent.getCurrentViewRecords().length,a=this.parent.renderModule.data.dataManager.dataSource.json.slice(0,o),h=this.vgenerator.generateRows(a,t);return t.virtualInfo.blockIndexes=i,t.virtualInfo.columnIndexes=r,t.virtualInfo.page=n,h.splice(0,this.parent.frozenRows)},e.prototype.scrollListener=function(t){if(this.scrollAfterEdit(),this.parent.enablePersistence&&(this.parent.scrollPosition=t.offset),!this.preventEvent&&!this.parent.isDestroyed){this.isFocused=!(0,l.le)(document.activeElement)&&(this.content===(0,l.oq)(document.activeElement,"."+ie)||this.content===document.activeElement);var i=t.sentinel,r=this.currentInfo=this.getInfoFromView(t.direction,i,t.offset);return he(this.parent)?r.blockIndexes&&this.prevInfo.blockIndexes.toString()===r.blockIndexes.toString()?void this.parent.removeMaskRow():(r.event="refresh-virtual-block",(0,l.le)(r.offsets)||(r.offsets.top=this.content.scrollTop),this.parent.pageSettings.currentPage=r.page,this.parent.enableVirtualMaskRow&&(this.parent.showMaskRow(i.axis),this.parent.addShimmerEffect()),void this.parent.notify(r.event,{requestType:"virtualscroll",virtualInfo:r,focusElement:t.focusElement})):this.prevInfo&&("Y"===i.axis&&this.prevInfo.blockIndexes.toString()===r.blockIndexes.toString()||"X"===i.axis&&this.prevInfo.columnIndexes.toString()===r.columnIndexes.toString())?(this.parent.removeMaskRow(),l.AR.isIE&&this.parent.hideSpinner(),this.requestType="virtualscroll"===this.requestType?this.empty:this.requestType,void("Y"===i.axis&&this.restoreEdit())):(this.parent.setColumnIndexesInView(this.parent.enableColumnVirtualization?r.columnIndexes:[]),this.parent.pageSettings.currentPage=r.loadNext&&!r.loadSelf?r.nextInfo.page:r.page,this.requestType="virtualscroll",this.parent.enableVirtualMaskRow&&(this.parent.showMaskRow(i.axis),this.parent.addShimmerEffect()),void this.parent.notify(r.event,{requestType:"virtualscroll",virtualInfo:r,focusElement:t.focusElement}))}this.preventEvent=!1},e.prototype.block=function(t){return this.vgenerator.isBlockAvailable(t)},e.prototype.getInfoFromView=function(t,i,r){var n=!1,o=[],a={direction:t,sentinelInfo:i,offsets:r,startIndex:this.preStartIndex,endIndex:this.preEndIndex};a.page=this.getPageFromTop(r.top,a),a.blockIndexes=o=this.vgenerator.getBlockIndexes(a.page),a.loadSelf=!this.vgenerator.isBlockAvailable(o[a.block]);var h=this.ensureBlocks(a);if("upArrow"===this.activeKey&&a.blockIndexes.toString()!==h.toString()&&-1===a.blockIndexes.indexOf(h[h.length-1])&&(n=!0),a.blockIndexes=h,a.loadNext=!h.filter(function(c){return-1===o.indexOf(c)}).every(this.block.bind(this)),a.event=a.loadNext||a.loadSelf?ve:nr,a.nextInfo=a.loadNext?{page:Math.max(1,a.page+("down"===t?1:-1))}:{},n&&(a.blockIndexes=[a.blockIndexes[0]-1,a.blockIndexes[0],a.blockIndexes[0]+1]),"downArrow"===this.activeKey){var p=Math.ceil(this.rowIndex/this.getBlockSize());1!==p&&(a.blockIndexes[1]!==p||a.blockIndexes.length<3)&&(a.blockIndexes=[p-1,p,p+1])}return a.columnIndexes="X"===i.axis?this.vgenerator.getColumnIndexes():this.parent.getColumnIndexesInView(),this.parent.enableColumnVirtualization&&"X"===i.axis&&(a.event=nr),a},e.prototype.setKeyboardNavIndex=function(){this.blazorDataLoad=!0,("downArrow"===this.activeKey||"upArrow"===this.activeKey)&&(this.blzRowIndex="downArrow"===this.activeKey?this.rowIndex+1:this.rowIndex-1,document.activeElement.blur())},e.prototype.ensureBlocks=function(t){var n,i=this,r=t.blockIndexes[t.block],o=r,a=Math.max,h="down"===t.direction?[a(r,1),++r,++r]:[a(r-1,1),r,r+1];return this.parent.enableColumnVirtualization&&this.parent.isFrozenGrid()&&("X"===t.sentinelInfo.axis||"Y"===t.sentinelInfo.axis&&t.page===this.prevInfo.page)&&(h=this.prevInfo.blockIndexes),h=h.filter(function(d,p){return h.indexOf(d)===p}),this.prevInfo.blockIndexes.toString()===h.toString()||((t.loadSelf||"down"===t.direction&&this.isEndBlock(o))&&(h=this.vgenerator.getBlockIndexes(t.page)),h.some(function(d,p){var c=d===(he(i.parent)?i.getGroupedTotalBlocks():i.getTotalBlocks());return c&&(n=p),c}),void 0!==n&&(h=h.slice(0,n+1),0===t.block&&1===h.length&&this.vgenerator.isBlockAvailable(h[0]-1)&&(h=[h[0]-1,h[0]]))),h},e.prototype.appendContent=function(t,i,r){var n=this,o=this.parent.isFrozenGrid(),a=this.parent.getFrozenColumns()||this.parent.getFrozenLeftColumnsCount(),h=this.parent.enableColumnVirtualization&&o;this.checkFirstBlockColIndexes(r);var d=r.virtualInfo.sentinelInfo&&"Y"===r.virtualInfo.sentinelInfo.axis&&this.currentInfo.page&&this.currentInfo.page!==r.virtualInfo.page?this.currentInfo:r.virtualInfo;this.prevInfo=this.prevInfo||r.virtualInfo;var p=d.columnIndexes[0]-1;h&&d.columnIndexes[0]===a&&(p=d.columnIndexes[0]-a-1);var u,c=this.getColumnOffset(p),f=d.blockIndexes;this.parent.groupSettings.columns.length&&this.refreshOffsets(),"100%"===this.parent.height&&(this.parent.element.style.height="100%");var C,g=this.parent.height.toString().indexOf("%")<0?this.content.getBoundingClientRect().height:this.parent.element.getBoundingClientRect().height;if(!this.requestTypes.some(function(E){return E===n.requestType})){var v=this.getTranslateY(this.content.scrollTop,g,d);this.virtualEle.adjustTable(h?0:c,v),h&&this.virtualEle.adjustMovableTable(c,0)}if(this.parent.enableColumnVirtualization&&(this.header.virtualEle.adjustTable(h?0:c,0),h&&this.header.virtualEle.adjustMovableTable(c,0)),this.parent.enableColumnVirtualization){var m=d.columnIndexes;u=this.getColumnOffset(m[m.length-1])-this.getColumnOffset(m[0]-1)+"",h?this.header.virtualEle.setMovableWrapperWidth(u):this.header.virtualEle.setWrapperWidth(u)}if(h?this.virtualEle.setMovableWrapperWidth(u,l.AR.isIE||"edge"===l.AR.info.name):this.virtualEle.setWrapperWidth(u,l.AR.isIE||"edge"===l.AR.info.name),(0,l.le)(t.parentNode)||(0,l.Od)(t),o?r.renderFrozenRightContent?C=this.parent.getContent().querySelector(".e-frozen-right-content").querySelector(I):r.renderMovableContent?r.renderMovableContent&&(C=this.parent.getMovableVirtualContent().querySelector(I)):C=this.parent.getFrozenVirtualContent().querySelector(I):C=this.parent.element.querySelector("."+ie).querySelector(I),C&&((0,l.Od)(C),t=null),this.parent.isReact&&!(0,l.le)(this.parent.rowTemplate)?t=i:(t=this.parent.createElement(I,{attrs:{role:"rowgroup"}})).appendChild(i),this.parent.frozenRows&&"virtualscroll"===r.requestType&&1===this.parent.pageSettings.currentPage)for(var y=0;y<this.parent.frozenRows;y++)t.children[0].remove();if(o?(r.renderFrozenRightContent?(this.parent.getContent().querySelector(".e-frozen-right-content").querySelector("."+Z).appendChild(t),this.requestType="virtualscroll"===this.requestType?this.empty:this.requestType,this.parent.notify(Be,{case:"refreshHeight"})):r.renderMovableContent?r.renderMovableContent&&(this.parent.getMovableVirtualContent().querySelector("."+Z).appendChild(t),this.parent.getFrozenMode()!==B&&(this.requestType="virtualscroll"===this.requestType?this.empty:this.requestType,this.parent.notify(Be,{case:"refreshHeight"}))):this.parent.getFrozenVirtualContent().querySelector("."+Z).appendChild(t),this.vfColIndex.length&&(r.virtualInfo.columnIndexes=d.columnIndexes=(0,l.l7)([],this.vfColIndex),this.vfColIndex=r.renderMovableContent?[]:this.vfColIndex)):(this.getTable().appendChild(t),this.requestType="virtualscroll"===this.requestType?this.empty:this.requestType),this.parent.groupSettings.columns.length){if(!he(this.parent)&&"up"===d.direction){var S=this.offsets[this.getTotalBlocks()]-this.prevHeight;this.preventEvent=!0,this.content.scrollTop=this.content.scrollTop+S}this.setVirtualHeight(),this.observer.setPageHeight(this.getOffset(f[f.length-1])-this.getOffset(f[0]-1))}this.prevInfo=d,this.isFocused&&"downArrow"!==this.activeKey&&"upArrow"!==this.activeKey&&this.content.focus();var F=Math.ceil(this.getTotalBlocks()/2);if(this.isBottom&&(this.isBottom=!1,this.parent.getContent().firstElementChild.scrollTop=this.offsets[this.offsetKeys.length-1]),this.parent.pageSettings.currentPage===F&&1===f.length&&(this.isBottom=!0,this.parent.getContent().firstElementChild.scrollTop=this.offsets[this.offsetKeys.length-2]),this.parent.isFrozenGrid()&&this.parent.pageSettings.currentPage===F-1&&"up"===d.direction&&(this.parent.getContent().firstElementChild.scrollTop=this.offsets[this.offsetKeys.length-3]),"virtualscroll"===r.requestType&&"X"===r.virtualInfo.sentinelInfo.axis&&this.parent.notify(qt,{}),this.focusCell(r),this.restoreEdit(r),this.restoreAdd(r),this.ensureSelectedRowPosition(),this.validationScrollLeft(r,o),!this.initialRowTop){var D=this.parent.element.getBoundingClientRect().top;this.initialRowTop=this.parent.getRowByIndex(0).getBoundingClientRect().top-D}var L=r.tableName,k="Left-Right"===this.parent.getFrozenMode()?"frozen-right"===L:"movable"===L;(!o||k)&&(this.vgenerator.startIndex=null,this.vgenerator.currentInfo={},this.vgenerator.includePrevPage=null)},e.prototype.validationScrollLeft=function(t,i){var r=this.parent.getFrozenColumns(),n=this.parent.getFrozenMode();if(this.validationCheck&&(!i||t&&(r||"Left"===n||"Right"===n?t.renderMovableContent:t.renderFrozenRightContent)))if(this.validationCol){var a=this.vgenerator.cOffsets[this.validationCol.index-this.parent.getVisibleFrozenColumns()-1];this.validationCol=null,this.parent.isFrozenGrid()?this.movableContent.scrollLeft=a:this.content.scrollLeft=a}else this.validationCheck=!1,this.parent.editModule.editFormValidate()},e.prototype.ensureSelectedRowPosition=function(){if(!this.isSelection&&this.isSelectionScroll&&!(0,l.le)(this.selectRowIndex)){this.isSelectionScroll=!1;var t=this.parent.getRowByIndex(this.selectRowIndex);t&&!this.isRowInView(t)&&this.rowSelected({rowIndex:this.selectRowIndex,row:t},!0)}},e.prototype.checkFirstBlockColIndexes=function(t){if(this.parent.enableColumnVirtualization&&this.parent.isFrozenGrid()&&0===t.virtualInfo.columnIndexes[0]){var i=[],r=this.parent.getFrozenColumns()||this.parent.getFrozenLeftColumnsCount();if(!t.renderMovableContent&&t.virtualInfo.columnIndexes.length>r){this.vfColIndex=t.virtualInfo.columnIndexes;for(var n=0;n<r;n++)i.push(n);t.virtualInfo.columnIndexes=i}else t.renderMovableContent&&(this.vfColIndex.length||(this.vfColIndex=(0,l.l7)([],t.virtualInfo.columnIndexes)),t.virtualInfo.columnIndexes=(0,l.l7)([],this.vfColIndex),t.virtualInfo.columnIndexes.splice(0,r))}},e.prototype.focusCell=function(t){if("upArrow"===this.activeKey||"downArrow"===this.activeKey){var i=this.parent.getRowByIndex(this.rowIndex);i.cells[this.cellIndex].focus({preventScroll:!0}),this.parent.selectRow(parseInt(i.getAttribute(O),10)),this.activeKey=this.empty}},e.prototype.restoreEdit=function(t){if(this.isNormaledit){var i=this.parent.getFrozenColumns(),r=t&&this.parent.isFrozenGrid(),n=this.parent.getFrozenMode();if((!r||r&&t&&(i||"Left"===n||"Right"===n?t.renderMovableContent:t.renderFrozenRightContent))&&this.parent.editSettings.allowEditing&&this.parent.editModule&&!(0,l.le)(this.editedRowIndex)){var a=this.getRowByIndex(this.editedRowIndex),h=this.content,d=Object.keys(this.virtualData),p=t&&t.virtualInfo&&"X"===t.virtualInfo.sentinelInfo.axis;if(r&&p&&(a=this.parent.getMovableRowByIndex(this.editedRowIndex),h=this.movableContent),d.length&&a&&!h.querySelector("."+Re)){var c=a.getBoundingClientRect().top;(p||c<this.content.offsetHeight&&c>this.parent.getRowHeight())&&(this.parent.isEdit=!1,this.parent.editModule.startEdit(a))}if(a&&this.content.querySelector("."+Re)&&!d.length){var u=(0,l.l7)({},this.getRowObjectByIndex(this.editedRowIndex));this.virtualData=this.getVirtualEditedData(u)}}this.restoreAdd(t)}},e.prototype.getVirtualEditedData=function(t){var i=[].slice.call(this.parent.element.getElementsByClassName("e-gridform"));if(!(this.parent.editModule&&this.parent.editModule.formObj&&this.parent.editModule.formObj.isDestroyed))for(var n=0;n<i.length;n++)t=this.parent.editModule.getCurrentEditedData(i[n],t);return t},e.prototype.restoreAdd=function(t){var i=this.parent.getFrozenColumns(),r=t&&this.parent.isFrozenGrid(),n=this.parent.getFrozenMode(),a=t&&t.virtualInfo&&t.virtualInfo.sentinelInfo&&"X"===t.virtualInfo.sentinelInfo.axis&&r?!(this.parent.getMovableVirtualHeader().querySelector("."+Ie)||this.parent.getMovableVirtualContent().querySelector("."+Ie)):!this.parent.element.querySelector("."+Ie);(!r||r&&t&&(i||"Left"===n||"Right"===n?t.renderMovableContent:t.renderFrozenRightContent))&&this.isNormaledit&&this.isAdd&&a&&("Top"===this.parent.editSettings.newRowPosition&&this.content.scrollTop<this.parent.getRowHeight()||"Bottom"===this.parent.editSettings.newRowPosition&&this.parent.pageSettings.currentPage===this.maxPage)&&(this.parent.isEdit=!1,this.parent.addRecord())},e.prototype.onDataReady=function(t){(0,l.le)(t.count)||(this.count=t.count,this.maxPage=Math.ceil(t.count/this.parent.pageSettings.pageSize)),this.vgenerator.checkAndResetCache(t.requestType),["refresh","filtering","searching","grouping","ungrouping","reorder",void 0].some(function(i){return t.requestType===i})&&this.refreshOffsets(),this.setVirtualHeight(),this.resetScrollPosition(t.requestType)},e.prototype.setVirtualHeight=function(t){var i=this.parent.enableColumnVirtualization?this.getColumnOffset(this.parent.columns.length+this.parent.groupSettings.columns.length-1)+"px":"100%";if(this.parent.isFrozenGrid()){var r=1===this.parent.pageSettings.currentPage&&Object.keys(this.offsets).length<=2?this.offsets[1]:this.offsets[this.getTotalBlocks()-2];this.virtualEle.setVirtualHeight(r=r>this.content.clientHeight?r:0,i)}else{var o=this.offsets[he(this.parent)?this.getGroupedTotalBlocks():this.getTotalBlocks()];this.virtualEle.setVirtualHeight(o,i)}this.parent.enableColumnVirtualization&&(this.header.virtualEle.setVirtualHeight(1,i),this.parent.isFrozenGrid()&&(this.virtualEle.setMovableVirtualHeight(1,i),this.header.virtualEle.setMovableVirtualHeight(1,i)))},e.prototype.getPageFromTop=function(t,i){var r=this,n=he(this.parent)?this.getGroupedTotalBlocks():this.getTotalBlocks(),o=0;return this.offsetKeys.some(function(a){var h=Number(a),d=t<=r.offsets[a]||h===n&&t>r.offsets[a];return d&&(r.offsetKeys.length%2!=0&&h.toString()===r.offsetKeys[r.offsetKeys.length-2]&&t<=r.offsets[r.offsetKeys.length-1]&&(h+=1),i.block=h%2==0?1:0,o=Math.max(1,Math.min(r.vgenerator.getPage(h),r.maxPage))),d}),o},e.prototype.getTranslateY=function(t,i,r,n){void 0===r&&((r={page:this.getPageFromTop(t,{})}).blockIndexes=this.vgenerator.getBlockIndexes(r.page));var o=(r.blockIndexes[0]||1)-1,a=this.getOffset(o),h=this.getOffset(r.blockIndexes[r.blockIndexes.length-1]);n&&(r=this.prevInfo);var d=a>t?this.getOffset(o-1):h<t+i?this.getOffset(o+1):a,p=this.offsets[r.blockIndexes[r.blockIndexes.length-1]]-this.tmpOffsets[r.blockIndexes[0]],c=he(this.parent)?this.getGroupedTotalBlocks():this.getTotalBlocks();return d+p>this.offsets[c]&&(d-=d+p-this.offsets[c]),d},e.prototype.getOffset=function(t){return Math.min(0|this.offsets[t],0|this.offsets[this.maxBlock])},e.prototype.onEntered=function(){var t=this;return function(i,r,n,o,a,h){l.AR.isIE&&!a&&h&&!t.preventEvent&&!t.parent.enableVirtualMaskRow&&t.parent.showSpinner(),t.parent.enableVirtualMaskRow&&!t.preventEvent&&setTimeout(function(){t.parent.showMaskRow(r.axis)},0);var d=t.parent.enableColumnVirtualization&&t.parent.isFrozenGrid(),p="X"===r.axis,c=t.prevInfo.offsets?t.prevInfo.offsets.top:null,u=t.content.getBoundingClientRect().height,f=t.getColumnOffset(p?t.vgenerator.getColumnIndexes()[0]-1:t.prevInfo.columnIndexes[0]-1);if(p&&!d){var g=Object.keys(t.vgenerator.cOffsets).length-t.prevInfo.columnIndexes.length,v=t.vgenerator.cOffsets[g-1];f=f>v?v:f}var m=t.getTranslateY(o.top,u,p&&c===o.top?t.prevInfo:void 0,!0);t.virtualEle.adjustTable(d?0:f,Math.min(m,t.offsets[t.maxBlock])),d&&t.virtualEle.adjustMovableTable(f,0),t.parent.enableColumnVirtualization&&(t.header.virtualEle.adjustTable(d?0:f,0),d&&t.header.virtualEle.adjustMovableTable(f,0))}},e.prototype.dataBound=function(){this.parent.notify("refresh-virtual-frozen-height",{}),this.isSelection&&"upArrow"!==this.activeKey&&"downArrow"!==this.activeKey?this.parent.selectRow(this.selectedRowIndex):this.activeKey=this.empty},e.prototype.rowSelected=function(t,i){if((this.isSelection||i)&&!this.isLastBlockRow(t.rowIndex)){var r=Xn(this.content.firstElementChild),n=this.parent.element.getBoundingClientRect().top,o=t.row.getBoundingClientRect().top-n,a=this.content.getBoundingClientRect().height,h=a<o,d=h?o-a:this.initialRowTop-o,p=h?r.height-d:r.height+d;this.virtualEle.adjustTable(r.width,p),this.content.querySelector("tbody").lastElementChild.getBoundingClientRect().top-n<a&&(p+=a-(t.row.getBoundingClientRect().top-n),this.virtualEle.adjustTable(r.width,p-this.parent.getRowHeight()/2))}this.isSelection=!1},e.prototype.isLastBlockRow=function(t){var i=this.parent.getContent().firstElementChild,r=Math.floor(i.offsetHeight/this.parent.getRowHeight())-1;return t>=this.maxPage*this.parent.pageSettings.pageSize-r},e.prototype.refreshMaxPage=function(){this.parent.groupSettings.columns.length&&this.parent.vcRows.length&&(this.maxPage=Math.ceil(this.parent.vcRows.length/this.parent.pageSettings.pageSize))},e.prototype.setVirtualPageQuery=function(t){var i=this.parent.getContent().querySelector(".e-row");if(i&&this.parent.isManualRefresh&&this.currentInfo.blockIndexes&&3===this.currentInfo.blockIndexes.length){this.vgenerator.startIndex=parseInt(i.getAttribute("data-rowindex"),10),this.vgenerator.currentInfo=(0,l.l7)({},this.currentInfo),this.vgenerator.currentInfo.blockIndexes=this.currentInfo.blockIndexes.slice(),(this.vgenerator.includePrevPage=this.currentInfo.blockIndexes[0]%2==0)?(this.vgenerator.startIndex=this.vgenerator.startIndex-this.getBlockSize(),this.vgenerator.currentInfo.blockIndexes.unshift(this.currentInfo.blockIndexes[0]-1)):this.vgenerator.currentInfo.blockIndexes.push(this.currentInfo.blockIndexes[this.currentInfo.blockIndexes.length-1]+1);var n=(this.vgenerator.currentInfo.blockIndexes[0]-1)*this.getBlockSize(),o=this.vgenerator.currentInfo.blockIndexes.length*this.getBlockSize();t.query.skip(n),t.query.take(o),t.skipPage=!0}},e.prototype.eventListener=function(t){var i=this;this.parent[t](Ge,this.onDataReady,this),this.parent.addEventListener(Te,this.dataBound.bind(this)),this.parent.addEventListener(Y,this.actionBegin.bind(this)),this.parent.addEventListener(H,this.actionComplete.bind(this)),this.parent.addEventListener(Jt,this.rowSelected.bind(this)),this.parent[t](nr,this.refreshContentRows,this),this.parent[t](Zs,this.selectVirtualRow,this),this.parent[t]($s,this.virtualCellFocus,this),this.parent[t]("virtual-scroll-edit-action-begin",this.editActionBegin,this),this.parent[t]("virtual-scroll-add-action-begin",this.addActionBegin,this),this.parent[t](to,this.restoreEdit,this),this.parent[t]("virtual-scroll-edit-success",this.editSuccess,this),this.parent[t]("refresh-virtual-cache",this.refreshCache,this),this.parent[t](pr,this.resetIsedit,this),this.parent[t](gt,this.getVirtualData,this),this.parent[t]("virtual-scroll-edit-cancel",this.editCancel,this),this.parent[t](An,this.refreshMaxPage,this),this.parent[t](vr,this.setVirtualPageQuery,this),this.parent[t](Ln,this.selectRowOnContextOpen,this),this.parent[t](uo,this.resetVirtualFocus,this),this.parent[t](fo,this.refreshCells,this),this.parent[t](go,this.scrollToEdit,this);for(var r=this.actions,n=0;n<r.length;n++)this.parent[t](r[n]+"-begin",this.onActionBegin,this);var o=function(){i.observer.observe(function(d){return i.scrollListener(d)},i.onEntered());var a=i.parent;a.enablePersistence&&a.scrollPosition&&(i.content.scrollTop=a.scrollPosition.top,i.scrollListener({direction:"down",sentinel:i.observer.sentinelInfo.down,offset:a.scrollPosition,focusElement:a.element}),a.enableColumnVirtualization&&(i.content.scrollLeft=a.scrollPosition.left)),i.parent.off(ee,o)};this.parent.on(ee,o,this)},e.prototype.scrollToEdit=function(t){var i=this.parent.isFrozenGrid(),r=!0;if(this.validationCheck=!0,this.isAdd&&this.content.scrollTop>0){r=!1;var n=Object.keys(this.offsets);this.content.scrollTop="Top"===this.parent.editSettings.newRowPosition?0:this.offsets[n.length-1]}var o=this.parent.getRowByIndex(this.editedRowIndex);if(!(o||(0,l.le)(this.editedRowIndex)||o&&this.isRowInView(o))){var a=this.parent.getRowHeight(),h=this.editedRowIndex*a;(0,l.le)(h)||(r=!1,this.content.scrollTop=h)}if(t&&r){var d=this.vgenerator.cOffsets[t.index-this.parent.getVisibleFrozenColumns()-1];if(!this.parent.enableColumnVirtualization){var p=this.parent.getHeaderContent().querySelector('.e-headercelldiv[e-mappinguid="'+t.uid+'"]');d=i?p.parentElement.offsetLeft-this.parent.getFrozenVirtualHeader().offsetWidth:p.parentElement.offsetLeft}i?this.parent.getMovableVirtualContent().scrollLeft=this.parent.enableRtl?-Math.abs(d):d:this.content.scrollLeft=this.parent.enableRtl?-Math.abs(d):d}t&&!r&&(this.validationCol=t)},e.prototype.refreshCells=function(t){t.cells=this.vgenerator.generateCells(t.foreignKeyData)},e.prototype.resetVirtualFocus=function(t){this.isCancel=t.isCancel},e.prototype.getVirtualData=function(t){if(this.isNormaledit){var i=this.parent.element.querySelector('.e-griderror:not([style*="display: none"])'),r=Object.keys(this.virtualData);if(t.isScroll=0!==r.length&&this.currentInfo.sentinelInfo&&"X"===this.currentInfo.sentinelInfo.axis,i)return;this.virtualData=r.length?this.virtualData:t.virtualData,this.getVirtualEditedData(this.virtualData),t.virtualData=this.virtualData,t.isAdd=this.isAdd,t.isCancel=this.isCancel}},e.prototype.selectRowOnContextOpen=function(t){this.isContextMenuOpen=t.isOpen},e.prototype.editCancel=function(t){var i=Jn(this.parent,t.data);(0,l.le)(i)||(t.data=this.parent.getCurrentViewRecords()[i])},e.prototype.editSuccess=function(t){this.isNormaledit&&(!this.isAdd&&t.data&&this.updateCurrentViewData(t.data),this.isAdd=!1)},e.prototype.updateCurrentViewData=function(t){var i=Jn(this.parent,t);(0,l.le)(i)||(this.parent.getCurrentViewRecords()[i]=t)},e.prototype.actionBegin=function(t){"virtualscroll"!==t.requestType&&(this.requestType=t.requestType),t.cancel||this.parent.notify("refresh-virtual-frozenrows",t)},e.prototype.virtualCellFocus=function(t){var i=document.activeElement;if(i.classList.contains(N)&&t&&("upArrow"===t.action||"downArrow"===t.action)){var r=parseInt(i.parentElement.getAttribute(O),10);if(t&&("downArrow"===t.action||"upArrow"===t.action)){var n=this.parent.getContent().firstElementChild;"downArrow"===t.action?r+=1:r-=1,this.rowIndex=r,this.cellIndex=parseInt(i.getAttribute(ce),10);var o=this.parent.getRowByIndex(r),a=this.parent.pageSettings.currentPage,h=Math.floor(n.offsetHeight/this.parent.getRowHeight())-1,d=!1;(0,l.le)(o)&&(d=!0,("downArrow"===t.action&&a===this.maxPage-1||"upArrow"===t.action&&1===a)&&(d=!1)),d||function(s,e){var t=e.getContent().firstElementChild.offsetHeight;return s&&s.getBoundingClientRect().top>t}(o,this.parent)&&"downArrow"===t.action||function(s,e){return s&&s.getBoundingClientRect().top<e}(o,2*this.parent.getRowHeight())&&"upArrow"===t.action?(this.activeKey=t.action,n.scrollTop="downArrow"===t.action?(r-h)*this.parent.getRowHeight():r*this.parent.getRowHeight()):this.activeKey=this.empty,this.parent.selectionSettings.checkboxOnly||this.parent.selectRow(r)}}},e.prototype.editActionBegin=function(t){this.editedRowIndex=t.index;var i=(0,l.l7)({},this.getRowObjectByIndex(t.index)),r=Object.keys(this.virtualData);t.data=r.length?this.virtualData:i,t.isScroll=0!==r.length&&this.currentInfo.sentinelInfo&&"X"===this.currentInfo.sentinelInfo.axis},e.prototype.refreshCache=function(t){var i=Math.ceil((this.editedRowIndex+1)/this.getBlockSize()),r=this.editedRowIndex-(i-1)*this.getBlockSize();this.vgenerator.cache[i][r].data=t.data,this.vgenerator.movableCache[i]&&(this.vgenerator.movableCache[i][r].data=t.data),this.vgenerator.frozenRightCache[i]&&(this.vgenerator.frozenRightCache[i][r].data=t.data)},e.prototype.actionComplete=function(t){if(this.parent.enableVirtualization){var i=["delete","save","cancel"];i.some(function(n){return n===t.requestType})&&(this.refreshOffsets(),this.parent.isFrozenGrid()?(this.vgenerator.refreshColOffsets(),this.parent.contentModule.virtualRenderer.virtualEle.setVirtualHeight()):this.refreshVirtualElement()),this.isNormaledit&&(["sorting","filtering","grouping","refresh","searching","ungrouping","reorder"].some(function(n){return n===t.requestType})||i.some(function(n){return n===t.requestType}))&&(this.isCancel=!0,this.isAdd=!1,this.editedRowIndex=this.empty,this.virtualData={},this.parent.editModule&&(this.parent.editModule.editModule.previousData=void 0)),this.parent.enableColumnVirtualization&&"filterafteropen"===t.requestType&&this.currentInfo.columnIndexes&&this.currentInfo.columnIndexes[0]>0&&this.parent.resetFilterDlgPosition(t.columnName)}},e.prototype.resetIsedit=function(){this.parent.enableVirtualization&&this.isNormaledit&&(this.parent.editSettings.allowEditing&&Object.keys(this.virtualData).length||this.parent.editSettings.allowAdding&&this.isAdd)&&(this.parent.isEdit=!0)},e.prototype.scrollAfterEdit=function(){if(this.parent.editModule&&this.parent.editSettings.allowEditing&&this.isNormaledit&&this.parent.element.querySelector(".e-gridform")){var t=this.parent.element.querySelector("."+Re),i=this.parent.element.querySelector("."+Ie);if(t||i){var r=(0,l.l7)({},t?this.getRowObjectByIndex(this.editedRowIndex):this.emptyRowData),n=Object.keys(this.virtualData);this.virtualData=this.getVirtualEditedData(n.length?this.virtualData:r)}}},e.prototype.createEmptyRowdata=function(){var t=this;this.parent.columnModel.filter(function(i){t.emptyRowData[i.field]=t.empty})},e.prototype.addActionBegin=function(t){if(this.isNormaledit){Object.keys(this.emptyRowData).length||this.createEmptyRowdata(),this.isAdd=!0;var i=this.parent.pageSettings.currentPage;!this.parent.frozenRows&&this.content.scrollTop>0&&"Top"===this.parent.editSettings.newRowPosition&&(this.isAdd=!0,this.onActionBegin(),t.startEdit=!1,this.content.scrollTop=0),i<this.maxPage-1&&"Bottom"===this.parent.editSettings.newRowPosition&&(this.isAdd=!0,this.parent.setProperties({pageSettings:{currentPage:this.maxPage-1}},!0),t.startEdit=!1,this.content.scrollTop=this.offsets[this.offsetKeys.length])}},e.prototype.getRowObjectByIndex=function(t){return this.getRowCollection(t,!1,!0)},e.prototype.getBlockSize=function(){return this.parent.pageSettings.pageSize>>1},e.prototype.getBlockHeight=function(){return this.getBlockSize()*this.parent.getRowHeight()},e.prototype.isEndBlock=function(t){var i=he(this.parent)?this.getGroupedTotalBlocks():this.getTotalBlocks();return t>=i||t===i-1},e.prototype.getGroupedTotalBlocks=function(){var t=this.parent.vcRows;return Math.floor(t.length/this.getBlockSize()<1?1:t.length/this.getBlockSize())},e.prototype.getTotalBlocks=function(){return Math.ceil(this.count/this.getBlockSize())},e.prototype.getColumnOffset=function(t){return 0|this.vgenerator.cOffsets[t]},e.prototype.getModelGenerator=function(){return new ia(this.parent)},e.prototype.resetScrollPosition=function(t){this.actions.some(function(i){return i===t})&&(this.preventEvent=0!==this.content.scrollTop,this.content.scrollTop=0),"virtualscroll"!==t&&(this.isAdd=!1)},e.prototype.onActionBegin=function(t){this.parent.setProperties({pageSettings:{currentPage:1}},!0)},e.prototype.getRows=function(){return this.vgenerator.getRows()},e.prototype.getRowByIndex=function(t){var i;return he(this.parent)?i=this.parent.getDataRows()[t]:this.prevInfo&&(i=this.getRowCollection(t,!1)),i},e.prototype.getMovableVirtualRowByIndex=function(t){return this.getRowCollection(t,!0)},e.prototype.getFrozenRightVirtualRowByIndex=function(t){return this.getRowCollection(t,!1,!1,!0)},e.prototype.getRowCollection=function(t,i,r,n){var a=(this.prevInfo.blockIndexes[0]-1)*this.getBlockSize(),h=i?this.parent.getMovableDataRows():this.parent.getDataRows();h=n?this.parent.getFrozenRightDataRows():h;var d=r?this.parent.getCurrentViewRecords():h;r&&this.parent.allowGrouping&&this.parent.groupSettings.columns.length&&(a=parseInt(this.parent.getRows()[0].getAttribute(O),10),d=d.filter(function(c){return(0,l.le)(c.items)}));var p=d[t-a];return this.parent.frozenRows&&this.parent.pageSettings.currentPage>1&&(p=r?t<=this.parent.frozenRows?this.parent.getRowsObject()[t].data:p:t<=this.parent.frozenRows?h[t]:h[t-a+this.parent.frozenRows]),p},e.prototype.getVirtualRowIndex=function(t){return(this.prevInfo.blockIndexes[0]-1)*this.getBlockSize()+t},e.prototype.refreshOffsets=function(){var t=this.parent,i=0,r=this.getBlockSize(),n=he(this.parent)?this.getGroupedTotalBlocks():this.getTotalBlocks();this.prevHeight=this.offsets[n],this.maxBlock=n%2==0?n-2:n-1,this.offsets={};for(var o=Array.apply(null,Array(n)).map(function(){return++i}),a=0;a<o.length;a++){var h=(this.vgenerator.cache[o[a]]||[]).length,d=he(this.parent)?t.vcRows.length%r:this.count%r,p=!he(this.parent)&&o[a]in this.vgenerator.cache?h*this.parent.getRowHeight():d&&o[a]===n?d*this.parent.getRowHeight():this.getBlockHeight();this.offsets[o[a]]=(0|this.offsets[o[a]-1])+p,this.tmpOffsets[o[a]]=0|this.offsets[o[a]-1]}this.offsetKeys=Object.keys(this.offsets),he(this.parent)&&(this.parent.vGroupOffsets=this.offsets),this.parent.enableColumnVirtualization&&this.vgenerator.refreshColOffsets()},e.prototype.refreshVirtualElement=function(){this.vgenerator.refreshColOffsets(),this.setVirtualHeight()},e.prototype.setVisible=function(t){var n,o,i=this.parent,r=this.parent.getFrozenColumns();r&&(n=[].slice.call(this.parent.getFrozenVirtualContent().querySelectorAll("col")),o=[].slice.call(this.parent.getMovableVirtualContent().querySelectorAll("col")));var h,a=[];(a=this.getRows()).some(function(b){return b.isDataRow&&(h=b),b.isDataRow});var d=!0;!i.groupSettings.columns.length&&h&&(d=!1);for(var p=i.getDataRows(),c=0,u=t.length;c<u;c++){var f=t[c],g=i.getNormalizedColumnIndex(f.uid),v=!0===f.visible?"":"none",m=void 0;if(n&&o?g>=r?(m=o,p=this.parent.getMovableRows(),g-=r):m=n:m=this.getColGroup().children,-1!==g&&h&&g<h.cells.length&&(0,l.V7)(m[g],{display:v}),!d){var C=void 0;f.width&&(C=f.visible?this.virtualEle.wrapper.offsetWidth+parseInt(f.width.toString(),10):this.virtualEle.wrapper.offsetWidth-parseInt(f.width.toString(),10)),C>i.width?(this.setDisplayNone(p,g,v,a),this.parent.enableColumnVirtualization&&this.virtualEle.setWrapperWidth(C+""),this.refreshVirtualElement()):d=!0}!this.parent.invokedFromMedia&&f.hideAtMedia&&this.parent.updateMediaColumns(f),this.parent.invokedFromMedia=!1}d||r?this.refreshContentRows({requestType:"refresh"}):this.parent.notify(xi,{rows:a,args:{isFrozen:!1,rows:a}})},e.prototype.selectVirtualRow=function(t){var i=this;if(t.isAvailable=t.selectedIndex<this.count,t.isAvailable&&!this.isContextMenuOpen&&"upArrow"!==this.activeKey&&"downArrow"!==this.activeKey&&!this.isSelection&&!this.requestTypes.some(function(h){return h===i.requestType})&&!this.parent.selectionModule.isInteracted){var r=this.parent.getRowByIndex(t.selectedIndex),n=this.parent.getRowHeight();if(!r||!this.isRowInView(r)){this.isSelection=!0,this.selectedRowIndex=t.selectedIndex;var o=(t.selectedIndex+1)*n;if(!(0,l.le)(o)){var a=this.content.scrollTop<o?"down":"up";this.selectRowIndex=t.selectedIndex,this.content.scrollTop=o,this.isSelectionScroll=this.observer.check(a)}}}this.parent.isFrozenGrid()&&this.requestType?this.parent.getTablesCount()===this.frzIdx?(this.requestType=this.empty,this.frzIdx=1):this.frzIdx++:this.requestType=this.empty},e.prototype.isRowInView=function(t){var i=t.getBoundingClientRect().top,r=t.getBoundingClientRect().bottom;return i>=this.content.getBoundingClientRect().top&&r<=this.content.getBoundingClientRect().bottom},e}(Li),na=function(s){function e(t,i){var r=s.call(this,t,i)||this;return r.virtualEle=new sa,r.isMovable=!1,r.gen=new ia(r.parent),r.parent.on(je,r.setVisible,r),r.parent.on(nr,function(n){return"X"===n.virtualInfo.sentinelInfo.axis?r.refreshUI():null},r),r}return ra(e,s),e.prototype.renderTable=function(){this.gen.refreshColOffsets(),this.parent.setColumnIndexesInView(this.gen.getColumnIndexes(this.getPanel().querySelector("."+le))),s.prototype.renderTable.call(this),this.virtualEle.table=this.getTable(),this.virtualEle.content=this.getPanel().querySelector("."+le),this.virtualEle.content.style.position="relative",this.virtualEle.renderWrapper(),this.virtualEle.renderPlaceHolder("absolute")},e.prototype.appendContent=function(t){this.isMovable?(this.virtualEle.movableWrapper.appendChild(t),this.isMovable=!1):this.virtualEle.wrapper.appendChild(t)},e.prototype.refreshUI=function(){this.isMovable=this.parent.isFrozenGrid(),this.setFrozenTable(this.parent.getMovableVirtualContent()),this.gen.refreshColOffsets(),this.parent.setColumnIndexesInView(this.gen.getColumnIndexes(this.getPanel().querySelector("."+le))),s.prototype.refreshUI.call(this),this.setFrozenTable(this.parent.getFrozenVirtualContent())},e.prototype.setVisible=function(t){var r,n,o,h,d,i=this.parent,a=this.parent.getFrozenColumns();a&&(h=[].slice.call(this.parent.getFrozenVirtualHeader().querySelectorAll("col")),d=[].slice.call(this.parent.getMovableVirtualHeader().querySelectorAll("col")));for(var p=0,c=t.length;p<c;p++){var u=t[p];n=i.getNormalizedColumnIndex(u.uid),r=u.visible?"":"none";var f=void 0;if(h&&d?n>=a?(f=d,n-=a):f=h:f=this.getColGroup().children,(0,l.V7)(f[n],{display:r}),i.enableColumnVirtualization&&!i.groupSettings.columns.length){var g;(g=u.visible?this.virtualEle.wrapper.offsetWidth+parseInt(u.width.toString(),10):this.virtualEle.wrapper.offsetWidth-parseInt(u.width.toString(),10))>i.width?(this.setDisplayNone(u,r),this.virtualEle.setWrapperWidth(g+""),this.gen.refreshColOffsets()):o=!0}else o=!0;o&&!a&&this.refreshUI()}a&&this.parent.notify(ii,{})},e.prototype.setFrozenTable=function(t){this.parent.isFrozenGrid()&&this.parent.enableColumnVirtualization&&this.parent.contentModule.isXaxis()&&this.parent.contentModule.setTable(t.querySelector("."+Z+":not(.e-masked-table)"))},e.prototype.setDisplayNone=function(t,i){var r=this.parent.isFrozenGrid(),n=this.getTable();r&&"movable"===t.getFreezeTableName()&&(n=this.parent.getMovableVirtualHeader().querySelector("."+Z));for(var o=0,a=[].slice.apply(n.querySelectorAll("th.e-headercell"));o<a.length;o++){var h=a[o];if(h.querySelector("[e-mappinguid]")&&h.querySelector("[e-mappinguid]").getAttribute("e-mappinguid")===t.uid){(0,l.V7)(h,{display:i}),""===i&&(0,l.IV)([h],"e-hide");break}}},e}(jn),sa=function(){function s(){}return s.prototype.renderWrapper=function(e){this.wrapper=(0,l.az)("div",{className:"e-virtualtable",styles:"min-height:"+(0,l.Ac)(e)}),this.wrapper.appendChild(this.table),this.content.appendChild(this.wrapper)},s.prototype.renderPlaceHolder=function(e){void 0===e&&(e="relative"),this.placeholder=(0,l.az)("div",{className:"e-virtualtrack",styles:"position:"+e}),this.content.appendChild(this.placeholder)},s.prototype.renderFrozenWrapper=function(e){this.wrapper=(0,l.az)("div",{className:"e-virtualtable",styles:"min-height:"+(0,l.Ac)(e)+"; display: flex"}),this.content.appendChild(this.wrapper)},s.prototype.renderFrozenPlaceHolder=function(){this.placeholder=(0,l.az)("div",{className:"e-virtualtrack"}),this.content.appendChild(this.placeholder)},s.prototype.renderMovableWrapper=function(e){this.movableWrapper=(0,l.az)("div",{className:"e-virtualtable",styles:"min-height:"+(0,l.Ac)(e)}),this.movableContent.appendChild(this.movableWrapper)},s.prototype.renderMovablePlaceHolder=function(){this.movablePlaceholder=(0,l.az)("div",{className:"e-virtualtrack"}),this.movableContent.appendChild(this.movablePlaceholder)},s.prototype.adjustTable=function(e,t){this.wrapper.style.transform="translate("+e+"px, "+t+"px)"},s.prototype.adjustMovableTable=function(e,t){this.movableWrapper.style.transform="translate("+e+"px, "+t+"px)"},s.prototype.setMovableWrapperWidth=function(e,t){this.movableWrapper.style.width=e?e+"px":t?"100%":""},s.prototype.setMovableVirtualHeight=function(e,t){this.movablePlaceholder.style.height=e+"px",this.movablePlaceholder.style.width=t},s.prototype.setWrapperWidth=function(e,t){this.wrapper.style.width=e?e+"px":t?"100%":""},s.prototype.setVirtualHeight=function(e,t){this.placeholder.style.height=(0,l.le)(e)?"0px":e+"px",this.placeholder.style.width=t},s.prototype.setFreezeWrapperWidth=function(e,t,i){e.style.width=t?t+"px":i?"100%":""},s}(),Ld=function(){function s(e,t){this.parent=e,this.locator=t,this.addEventListener()}return s.prototype.getModuleName=function(){return"virtualscroll"},s.prototype.instantiateRenderer=function(){this.parent.log(["limitation","virtual_height"],"virtualization");var e=this.locator.getService("rendererFactory");this.parent.isFrozenGrid()||(this.parent.enableColumnVirtualization&&e.addRenderer(de.Header,new na(this.parent,this.locator)),e.addRenderer(de.Content,new ss(this.parent,this.locator))),this.ensurePageSize()},s.prototype.ensurePageSize=function(){var e=this.parent.getRowHeight(),t=this.parent.height.toString().indexOf("%")<0?this.parent.height:this.parent.element.getBoundingClientRect().height;this.blockSize=~~(t/e);var i=2*this.blockSize,r=this.parent.pageSettings.pageSize;this.parent.setProperties({pageSettings:{pageSize:r<i?i:r}},!0)},s.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(nt,this.instantiateRenderer,this),this.parent.on(yi,this.refreshVirtualElement,this),this.parent.on(mr,this.createVirtualValidationForm,this),this.parent.on(Bn,this.virtualEditFormValidation,this),this.parent.on(V,this.destroy,this))},s.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(nt,this.instantiateRenderer),this.parent.off(yi,this.refreshVirtualElement),this.parent.off(mr,this.createVirtualValidationForm),this.parent.off(Bn,this.virtualEditFormValidation),this.parent.off(V,this.destroy))},s.prototype.getCurrentEditedData=function(e){var t={virtualData:(0,l.l7)({},{},e,!0),isAdd:!1,isScroll:!1,endEdit:!0};return this.parent.notify(gt,t),t.virtualData},s.prototype.createVirtualValidationForm=function(e){var t=this.parent;if(t.enableVirtualization&&"Normal"===t.editSettings.mode){var i=t.columns,r=new ke(this.locator,null,this.parent),n=(0,l.l7)({},{},t.getRowObjectFromUID(e.uid),!0);t.notify(fo,n);var o=e.argsCreator(this.getCurrentEditedData(e.prevData),{},!1);o.isCustomFormValidation=!0,o.row=r.render(n,i),e.renderer.update(o);for(var a={},h=0;h<i.length;h++)!i[h].visible||i[h].validationRules&&Vo(i[h],0,a,{},{},i.length,!0);o.form.classList.add("e-virtual-validation"),t.editModule.virtualFormObj=t.editModule.createFormObj(o.form,a)}},s.prototype.virtualEditFormValidation=function(e){var t=this.parent,i=t.element.querySelector('.e-griderror:not([style*="display: none"])');if(t.editModule.virtualFormObj)if(i&&"none"!==i.style.display){var r=i.getBoundingClientRect(),n=t.element.querySelectorAll(".e-gridform"),o=n[0],a=t.getContent().getBoundingClientRect().left;if(n.length>1&&(o="Right"!==t.getFrozenMode()?n[1]:n[0],a=t.getMovableVirtualContent().getBoundingClientRect().left),r.left<a||r.right>t.element.offsetWidth){var h=o.querySelector('.e-tooltip-wrap:not([style*="display: none"])');this.scrollToEdit(h,{editIdx:e.editIdx,addIdx:e.addIdx},!0)}}else if(t.editModule.virtualFormObj&&(!i||"none"===i.style.display)){for(var d=t.editModule.virtualFormObj.element.querySelectorAll('.e-tooltip-wrap:not([style*="display: none"])'),p=0;p<d.length;p++)(0,l.Od)(d[p]);this.setEditedDataToValidationForm(t.editModule.virtualFormObj.element,this.getCurrentEditedData(e.prevData)),e.isValid=t.editModule.virtualFormObj.validate(),e.isValid||(h=t.editModule.virtualFormObj.element.querySelector('.e-tooltip-wrap:not([style*="display: none"])'),this.scrollToEdit(h,{editIdx:e.editIdx,addIdx:e.addIdx}))}},s.prototype.scrollToEdit=function(e,t,i){var r=this.parent;if(e){var n=r.columnModel,o=function(s){return void 0===s&&(s=""),s.replace(/___/g,".")}(e.id).split("_")[0],a=r.getColumnByField(o),h=this.parent.getContent().firstElementChild.scrollTop,d=r.getRowByIndex(t.editIdx);if(i||!a||!(0,l.le)(t.addIdx)&&h>0||!(0,l.le)(t.editIdx)&&!d){for(var p=void 0,c=0;c<n.length&&!a;c++)if(n[c].field===o){p=n[c];break}i&&(p=a),this.parent.notify(go,p)}}},s.prototype.setEditedDataToValidationForm=function(e,t){for(var i=[].slice.call(e.getElementsByClassName("e-field")),r=0,n=i.length;r<n;r++){var o=ud(this.parent,i[r].getAttribute("e-mappinguid")),a=(0,l.NA)(o.field,t);a=(0,l.le)(a)?"":a,i[r].value=a}},s.prototype.refreshVirtualElement=function(e){this.parent.enableColumnVirtualization&&"resize"===e.module&&this.locator.getService("rendererFactory").getRenderer(de.Content).refreshVirtualElement()},s.prototype.destroy=function(){this.removeEventListener()},s}(),Zt=function(){function s(e,t){this.hideColumnInclude=!1,this.foreignKeyData={},this.parent=e,!e.parentDetails&&t&&(this.foreignKeyData=t)}return s.getQuery=function(e,t){var i=t.generateQuery(!0).requiresCount();return t.isRemote()&&(e.groupSettings.enableLazyLoading&&e.groupSettings.columns.length?i.lazyLoad=[]:i.take(e.pageSettings.totalRecordsCount)),i},s.prototype.getFData=function(e,t){return Mt(t,{},e,this.foreignKeyData[t.field])[0]},s.prototype.getGridRowModel=function(e,t,i,r){void 0===r&&(r=0);var n=[],o=t.length;if(o){for(var a=0;a<o;a++,r++){var h={isExpand:!1};h.data=t[a],h.index=r,i.childGrid&&("All"===i.hierarchyPrintMode?h.isExpand=!0:"Expanded"===i.hierarchyPrintMode&&this.parent.expandedRows&&this.parent.expandedRows[r]&&(h.isExpand=i.expandedRows[r].isExpand));var d=new st(h);d.cells=this.generateCells(e,i),n.push(d)}this.processColumns(n)}return n},s.prototype.generateCells=function(e,t){var i=[];if(t.childGridLevel)for(var r=t.childGridLevel,n=0;r>n;n++)i.push(this.generateCell({},A.Indent));for(var o=0,a=e;o<a.length;o++)i.push(this.generateCell(a[o],A.Data));return i},s.prototype.getColumnData=function(e){var r,t=this,i=[],n=e.getForeignKeyColumns();if(n.length){for(var o=0;o<n.length;o++){var a="result"in n[o].dataSource?new z.hm(n[o].dataSource.result):n[o].dataSource;i.push(a.executeQuery(new z.AE))}r=Promise.all(i).then(function(h){for(var d=0;d<n.length;d++)t.foreignKeyData[n[d].field]=h[d].result})}return r},s.prototype.getHeaders=function(e,t){this.hideColumnInclude=!!t,this.colDepth=Br(e);for(var i=[],r=0;r<this.colDepth;r++)i[r]=new st({}),i[r].cells=[];return i=this.processColumns(i),{rows:i=this.processHeaderCells(i,e),columns:this.generateActualColumns(e)}},s.prototype.getConvertedWidth=function(e){var t=parseFloat(e);return-1!==e.indexOf("%")?this.parent.element.getBoundingClientRect().width*t/100:t},s.prototype.generateActualColumns=function(e,t){void 0===t&&(t=[]);for(var i=0,r=e;i<r.length;i++){var n=r[i];n.commands||(n.columns?(n.visible||this.hideColumnInclude)&&0!==this.getCellCount(n,0)&&this.generateActualColumns(n.columns,t):(n.visible||this.hideColumnInclude)&&t.push(n))}return t},s.prototype.processHeaderCells=function(e,t){for(var i=t,r=0;r<i.length;r++)i[r].commands||(e=this.appendGridCells(i[r],e,0));return e},s.prototype.appendGridCells=function(e,t,i){if(e.columns||!1===e.visible&&!this.hideColumnInclude||e.commands){if(e.columns){var r=this.getCellCount(e,0);r&&t[i].cells.push(new Pe({cellType:A.StackedHeader,column:e,colSpan:r}));for(var n=void 0,o=0,a=e.columns.length;o<a;o++)e.columns[o].visible&&!n&&(n=!0),t=this.appendGridCells(e.columns[o],t,i+1)}}else t[i].cells.push(this.generateCell(e,A.Header,this.colDepth-i,i));return t},s.prototype.generateCell=function(e,t,i,r){var n={visible:e.visible,isDataCell:t===A.Data,column:e,cellType:t,rowSpan:i,index:r};return(!n.rowSpan||n.rowSpan<2)&&delete n.rowSpan,new Pe(n)},s.prototype.processColumns=function(e){var t=this.parent,i=[];t.enableColumnVirtualization&&(i=t.getColumnIndexesInView());for(var r=0,n=e.length;r<n;r++)if(t.allowGrouping)for(var o=0,a=t.groupSettings.columns.length-1;o<a;o++)t.enableColumnVirtualization&&-1===i.indexOf(o)||e[r].cells.splice(0,0,this.generateCell({},A.HeaderIndent));return e},s.prototype.getCellCount=function(e,t){if(e.columns)for(var i=0;i<e.columns.length;i++)t=this.getCellCount(e.columns[i],t);else(e.visible||this.hideColumnInclude)&&t++;return t},s.prototype.checkAndExport=function(e,t){Object.keys(e).some(function(r){return!e[r]})||t()},s.prototype.failureHandler=function(e,t,i){var r=this;return function(){e[t.id]=!0,r.checkAndExport(e,i)}},s.prototype.createChildGrid=function(e,t,i,r){var n=new Fr(this.parent.detailRowModule.getGridModel(e,t,i));e.isPrinting=!1,n.parentDetails={parentID:e.element.id,parentPrimaryKeys:e.getPrimaryKeyFieldNames(),parentKeyField:e.childGrid.queryString,parentKeyFieldValue:(0,l.NA)(n.queryString,t.data),parentRowData:t.data};var a=Ue("child-grid"),h=(0,l.az)("div",{id:a,styles:"display: none"});return document.body.appendChild(h),n.id=a,r[a]=!1,n.isExportGrid=!0,{childGrid:n,element:h}},s.prototype.getGridExportColumns=function(e){for(var t=[],i=0,r=e;i<r.length;i++)"checkbox"!==r[i].type&&t.push(r[i]);return t},s.prototype.getForeignKeyData=function(){return this.foreignKeyData},s}(),pa=function(){function s(e){this.valueFormatter=new At(e),this.internationalization=new l.eC(e)}return s.prototype.returnFormattedValue=function(e,t){return!(0,l.le)(e.value)&&e.value?this.valueFormatter.getFormatFunction(t)(e.value):""},s.prototype.formatCellValue=function(e){if(e.isForeignKey&&(e.value=(0,l.NA)(e.column.foreignKeyValue,Mt(e.column,{},e.value)[0])),"number"===e.column.type&&void 0!==e.column.format&&""!==e.column.format)return"string"==typeof e.column.format&&(e.column.format={format:e.column.format}),e.value||0===e.value?this.internationalization.getNumberFormat(e.column.format)(e.value):"";if("boolean"===e.column.type&&""!==e.value)return e.value?"true":"false";if("date"!==e.column.type&&"datetime"!==e.column.type&&"time"!==e.column.type||void 0===e.column.format)return((0,l.le)(e.column.type)||(0,l.le)(e.value))&&(0,l.le)(e.value)?"":e.value.toString();if("string"==typeof e.value&&(e.value=new Date(e.value)),"string"==typeof e.column.format){var i=e.column.format;return this.returnFormattedValue(e,"date"===e.column.type?{type:"date",skeleton:i}:"time"===e.column.type?{type:"time",skeleton:i}:{type:"dateTime",skeleton:i})}return e.column.format instanceof Object&&void 0===e.column.format.type?e.value.toString():this.returnFormattedValue(e,"date"===e.column.type?{type:e.column.format.type,format:e.column.format.format,skeleton:e.column.format.skeleton}:"time"===e.column.type?{type:"time",format:e.column.format.format,skeleton:e.column.format.skeleton}:{type:"dateTime",format:e.column.format.format,skeleton:e.column.format.skeleton})},s}(),ca=function(){function s(e,t){this.book={},this.workSheet=[],this.rows=[],this.columns=[],this.styles=[],this.rowLength=1,this.expType="AppendToSheet",this.includeHiddenColumn=!1,this.isCsvExport=!1,this.isElementIdChanged=!1,this.gridPool={},this.sheet={},this.parent=e,this.helper=new Zt(e),this.locator=t,this.l10n=this.locator.getService("localization")}return s.prototype.getModuleName=function(){return"ExcelExport"},s.prototype.init=function(e){null!==e.element&&""===e.element.id&&(e.element.id=(new Date).toISOString(),this.isElementIdChanged=!0),this.parent=e,!this.parent.isDestroyed&&(this.isExporting=void 0,this.book={},this.workSheet=[],this.rows=[],this.columns=[],this.styles=[],this.rowLength=1,this.footer=void 0,this.expType="AppendToSheet",this.includeHiddenColumn=!1,this.exportValueFormatter=new pa(e.locale),e.id=Ue("main-grid"),this.gridPool[e.id]=!1)},s.prototype.Map=function(e,t,i,r,n,o){var a=e,p="isCsv";this.gridPool={},e.childGrid&&((0,l.le)(t)||"None"!==t.hierarchyExportMode)&&(e.expandedRows=Ar(e).expandedRows);var f={requestType:"beforeExcelExport",gridObject:a,cancel:!1,isMultipleExport:i,workbook:r,isCsv:n,isBlob:o};return a.trigger("beforeExcelExport",f),f.cancel?new Promise(function(g){return g()}):(this.parent.log("exporting_begin",this.getModuleName()),this.data=new Cr(a),this.isExporting=!0,this.isBlob=f.isBlob,this.isCsvExport=!!f[p]&&f[p],zr(t)&&Do(t,a),this.processRecords(a,t,f.isMultipleExport,f.workbook))},s.prototype.exportingSuccess=function(e){this.isExporting=!1,this.parent.trigger("excelExportComplete",this.isBlob?{promise:this.blobPromise}:{}),this.parent.log("exporting_complete",this.getModuleName()),e(this.book)},s.prototype.processRecords=function(e,t,i,r){var n=this;if(!(0,l.le)(t)&&!(0,l.le)(t.dataSource)&&t.dataSource instanceof z.hm){var o=t.query?t.query:new z.AE;return((0,l.le)(o.isCountRequired)||e.aggregates)&&(o.isCountRequired=!0),new Promise(function(h){t.dataSource.executeQuery(o).then(function(p){n.init(e),n.processInnerRecords(e,t,i,r,p).then(function(){n.exportingSuccess(h)})})})}if(!(0,l.le)(t)&&"CurrentPage"===t.exportType)return new Promise(function(h){n.init(e),n.processInnerRecords(e,t,i,r,n.parent.getCurrentViewRecords()),n.exportingSuccess(h)});var a=[];return a.push(this.data.getData({},Zt.getQuery(e,this.data))),a.push(this.helper.getColumnData(e)),new Promise(function(h,d){Promise.all(a).then(function(p){n.init(e),n.processInnerRecords(e,t,i,r,p[0]).then(function(){n.exportingSuccess(h)})}).catch(function(p){d(n.book),n.parent.trigger(Xt,p)})})},s.prototype.processInnerRecords=function(e,t,i,r,n){var o=this;this.groupedColLength=e.groupSettings.columns.length;var h,a=5,d=[],p=Br(e.columns),c=!(0,l.le)(t);return c&&!(0,l.le)(t.multipleExport)&&(this.expType=(0,l.le)(t.multipleExport.type)?"AppendToSheet":t.multipleExport.type,(0,l.le)(t.multipleExport.blankRows)||(a=t.multipleExport.blankRows)),(0,l.le)(r)?(this.workSheet=[],this.rows=[],this.columns=[],this.styles=[],this.sheet.images=[]):"NewSheet"===this.expType?(this.workSheet=r.worksheets,this.rows=[],this.columns=[],this.sheet.images=[],this.styles=r.styles):(this.workSheet=[],this.rows=r.worksheets[0].rows,this.columns=r.worksheets[0].columns,this.styles=r.styles,this.sheet.images=r.worksheets[0].images,this.rowLength=this.rows[this.rows.length-1].index+a,this.rowLength++),c&&((0,l.le)(i)?((0,l.le)(t.header)||this.processExcelHeader(JSON.parse(JSON.stringify(t.header))),(0,l.le)(t.footer)||(this.footer=JSON.parse(JSON.stringify(t.footer)))):(!(0,l.le)(t.header)&&(i||"NewSheet"===this.expType)&&this.processExcelHeader(JSON.parse(JSON.stringify(t.header))),(0,l.le)(t.footer)||"AppendToSheet"===this.expType&&i||(this.footer=JSON.parse(JSON.stringify(t.footer))))),this.includeHiddenColumn=!!c&&t.includeHiddenColumn,new Promise(function(u,f){e.childGridLevel=0,d=o.processGridExport(e,t,n),o.globalResolve=u,o.gridPool[e.id]=!0,o.helper.checkAndExport(o.gridPool,o.globalResolve)}).then(function(){var u=[];if(o.organiseRows(d,d[0].index,u),o.rows=o.rows.concat(u),(0,l.le)(o.footer)||("AppendToSheet"===o.expType&&!i||"NewSheet"===o.expType)&&o.processExcelFooter(o.footer),o.columns.length>0&&(o.sheet.columns=o.columns),o.sheet.rows=o.rows,o.sheet.enableRtl=o.parent.enableRtl,o.parent.allowFiltering&&e.getVisibleColumns().length&&c&&t.enableFilter&&(o.sheet.autoFilters={row:p+(t.header?t.header.headerRows||t.header.rows.length:0),column:o.groupedColLength?o.groupedColLength+1:o.sheet.columns[0].index,lastRow:o.sheet.rows.length,lastColumn:o.sheet.columns.length}),o.workSheet.push(o.sheet),o.book.worksheets=o.workSheet,o.book.styles=o.styles,e.notify("finalPageSetup",o.book),!i){if(o.isCsvExport){c&&!(0,l.le)(t.separator)&&","!==t.separator&&(h=t.separator);var v=new us.IE(o.book,"csv",e.locale,e.currencyCode,h);o.isBlob?o.blobPromise=v.saveAsBlob("text/csv"):v.save(c&&t.fileName?t.fileName:"Export.csv")}else v=new us.IE(o.book,"xlsx",e.locale,e.currencyCode),o.isBlob?o.blobPromise=v.saveAsBlob("application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"):v.save(c&&t.fileName?t.fileName:"Export.xlsx");o.isElementIdChanged&&(e.element.id=""),delete e.expandedRows}return r})},s.prototype.organiseRows=function(e,t,i){if(!e.length)return t;for(var r=0;r<e.length;r++){var n=e[r],o=n.childRows;o?(n.index=t++,delete n.childRows,i.push(n),t=this.organiseRows(o,t,i)):(n.index=t++,i.push(n))}return t},s.prototype.processGridExport=function(e,t,i){var r=[],n=this.parent.isFrozenGrid()&&!this.parent.getFrozenColumns();!(0,l.le)(t)&&!(0,l.le)(t.theme)&&(this.theme=t.theme),e.childGrid&&!(0,l.le)(t)&&(e.hierarchyPrintMode=t.hierarchyExportMode||"Expanded");var o=new Zt(e,this.helper.getForeignKeyData()),a=zr(t)?pi(t.columns,e.enableColumnVirtualization):o.getGridExportColumns(n?e.getColumns():e.columns),h=o.getHeaders(a,this.includeHiddenColumn);return r=this.processHeaderContent(e,h,e.groupSettings.columns.length?e.groupSettings.columns.length-1:0,r),r=(0,l.le)(t)||(0,l.le)(t.dataSource)||t.dataSource instanceof z.hm?(0,l.le)(t)||"CurrentPage"!==t.exportType?this.processRecordContent(e,i,h,t,void 0,r,o):this.processRecordContent(e,i,h,t,e.currentViewData,r,o):this.processRecordContent(e,i,h,t,t.dataSource,r,o),e.notify("export-DataBound",{excelRows:r,type:"excel"}),r},s.prototype.processRecordContent=function(e,t,i,r,n,o,a){var h;return h=!(0,l.le)(n)&&n.length?n:t.result,(0,l.le)(h.level)?this.processRecordRows(e,h,i,0,0,r,o,a):this.processGroupedRows(e,h,i,h.level,0,r,o,a),(0,l.le)(t.aggregates)||((0,l.le)(n)?this.processAggregates(e,t.result.GroupGuid?t.result.records:t.result,o):this.processAggregates(e,t.result,o,n)),o},s.prototype.processGroupedRows=function(e,t,i,r,n,o,a,h){for(var d=0,p=t;d<p.length;d++){var c=p[d],u=[],g={};g.index=1+r-1;var v=e.getColumnByField(c.field),m={value:c.key,column:v,style:void 0,isForeignKey:v.isForeignColumn()},C=e.getColumnByField(c.field).headerText+": "+(v.enableGroupByFormat?c.key:this.exportValueFormatter.formatCellValue(m))+" - ",b={captionText:C+=c.count>1?c.count+" items":c.count+" item",type:this.isCsvExport?"CSV":"Excel",data:c};this.parent.trigger(Is,b),g.value=b.captionText,g.style=this.getCaptionThemeStyle(this.theme),(0,l.le)(b.style)||(g.style=this.mergeOptions(g.style,b.style));var S=new Ai(e).generateRows(c);if(this.fillAggregates(e,S,t.level+t.childLevels-1,a,this.rowLength),u.push(g),a[a.length-1].cells.length>0){for(var R=t.level+t.childLevels+S[0].cells.length,F=0,D=0,L=a[a.length-1].cells;D<L.length;D++){var k=L[D];k.index<R&&(R=k.index),k.index>F&&(F=k.index),u[u.length-1].index!==k.index&&u.push(k)}for(R-g.index>1&&(g.colSpan=R-g.index);F<i.columns.length+r+t.childLevels;){var E={};E.index=F+1,E.style=this.getCaptionThemeStyle(this.theme),u.push(E),F++}}else{for(var T=0,P=0,j=i.columns;P<j.length;P++)j[P].visible&&T++;g.colSpan=t.childLevels+T}a[a.length-1].cells=u,this.rowLength++,this.groupedColLength<8&&r>1&&(a[a.length-1].grouping={outlineLevel:r-1,isCollapsed:!0}),!(0,l.le)(t.childLevels)&&t.childLevels>0?(this.processGroupedRows(e,c.items,i,c.items.level,n,o,a,h),this.processAggregates(e,c,a,void 0,r-1+t.childLevels,!0)):(n=this.processRecordRows(e,c.items,i,r-1,n,o,a,h),this.processAggregates(e,c,a,void 0,r-1,!0))}},s.prototype.processRecordRows=function(e,t,i,r,n,o,a,h){for(var d=1,p=[],f=0,g=h.getGridRowModel(i.columns,t,e,n);f<g.length;f++){var v=g[f];p=[],n++,d=1;for(var m=void 0,C=0,b=v.cells.length;C<b;C++){var y=v.cells[C];if(y.cellType===A.Data){var S=y.column,R=S.field,F=(0,l.le)(R)?"":S.valueAccessor(R,v.data,S),D=(0,l.le)(F)?"":F,L=void 0;if(S.isForeignColumn&&S.isForeignColumn()&&(L=h.getFData(D,S),D=(0,l.NA)(S.foreignKeyValue,L)),!(0,l.le)(D)){var k={},E=d+r+e.childGridLevel,T={data:v.data,column:S,foreignKeyData:L,value:D,style:void 0,colSpan:1,cell:k};if(e.trigger("excelQueryCellInfo",T),!(0,l.le)(T.image)&&!(0,l.le)(T.image.base64)&&(m=this.setImage(T,E),T.image.height&&""!==T.value&&(m+=30)),(0,l.le)(T.hyperLink)||(T.cell.hyperlink={target:T.hyperLink.target},T.value=T.hyperLink.displayText||T.value),(k=T.cell).index=E,k.value=T.value,""===T.data&&e.childGridLevel&&1===d){T={style:{hAlign:"left"}},k.colSpan=e.getVisibleColumns().length,k.value=this.l10n.getConstant("EmptyRecord")}if(T.colSpan>1&&(k.colSpan=T.colSpan),(0,l.le)(T.style))k.style={name:e.element.id+"column"+(d+r)};else{var j=this.getColumnStyle(e,d+r);k.style=this.mergeOptions(this.styles[j],T.style)}p.push(k)}d++}}var $={index:this.rowLength++,cells:p};if((0,l.le)(m)||($.height=m),this.groupedColLength&&this.groupedColLength<8&&r+1>0&&($.grouping={outlineLevel:r+1,isCollapsed:!0}),a.push($),v.isExpand&&!(0,l.le)(e.childGrid)){e.isPrinting=!0;var J=!(0,l.le)(o)&&o.exportType?o.exportType:"AllPages",se=this.helper.createChildGrid(e,v,J,this.gridPool),ge=se.childGrid,be=se.element;ge.actionFailure=h.failureHandler(this.gridPool,ge,this.globalResolve),ge.childGridLevel=e.childGridLevel+1,this.parent.trigger(Ns,{childGrid:ge,row:v,exportProperties:o}),ge.beforeDataBound=this.childGridCell($,ge,o,v),ge.appendTo(be)}e.notify(Ws,{rowObj:v,type:"excel",excelRows:a})}return n},s.prototype.setImage=function(e,t){(0,l.le)(this.sheet.images)&&(this.sheet.images=[]);var i={image:e.image.base64,row:this.rowLength,column:t,lastRow:this.rowLength,lastColumn:t};return e.image.width&&e.image.height&&(i.width=e.image.width,i.height=e.image.height),this.sheet.images.push(i),this.columns[t-1].width=e.image.width||this.columns[t-1].width,e.image.height||50},s.prototype.childGridCell=function(e,t,i,r){var n=this;return function(o){t.beforeDataBound=null,o.cancel=!0,0===o.result.length&&(o.result=[""]),e.childRows=n.processGridExport(t,i,o);for(var a=n.parent.groupSettings.columns.length,h=e.childRows,d=0;d<h.length;d++)h[d].grouping={outlineLevel:a+t.childGridLevel,isCollapsed:!r.isExpand,isHidden:!r.isExpand};return t.destroy(),(0,l.og)(t.element),n.gridPool[t.id]=!0,n.helper.checkAndExport(n.gridPool,n.globalResolve),e}},s.prototype.processAggregates=function(e,t,i,r,n,o){var a=new ki(e),h=a.getColumns();h=h.filter(function(f){return(0,l.le)(f.commands)&&"checkbox"!==f.type}),e.aggregates.length&&this.parent!==e&&e.aggregateModule.prepareSummaryInfo();var d;if(d=(0,l.le)(r)?t:r,void 0===n&&(n=0),e.groupSettings.columns.length>0&&o){var c=new di(e).generateRows(d,{level:d.level});c.length>0&&(i=this.fillAggregates(e,c,n,i))}else{n=e.groupSettings.columns.length>0&&!o?e.groupSettings.columns.length:n;var u=a.generateRows(d,t.aggregates,null,null,h);u.length>0&&!o&&(i=this.fillAggregates(e,u,n=e.groupSettings.columns.length?n-1:n,i))}return i},s.prototype.fillAggregates=function(e,t,i,r,n){for(var o=0,a=t;o<a.length;o++){for(var h=a[o],d=[],p=!0,c=0,u=0,f=h.cells;u<f.length;u++){var g=f[u],v={};if(g.cellType!==A.DetailFooterIntent&&(g.visible||this.includeHiddenColumn))if(c++,g.isDataCell){p=!1;var m=!(0,l.le)(g.column.footerTemplate),C=!(0,l.le)(g.column.groupFooterTemplate),b=!(0,l.le)(g.column.groupCaptionTemplate);if(v.index=c+i+e.childGridLevel,m)v.value=this.getAggreateValue(A.Summary,g.column.footerTemplate,g,h);else if(C)v.value=this.getAggreateValue(A.GroupSummary,g.column.groupFooterTemplate,g,h);else if(b)v.value=this.getAggreateValue(A.CaptionSummary,g.column.groupCaptionTemplate,g,h);else for(var y=0,S=Object.keys(h.data[g.column.field]);y<S.length;y++)S[y]===g.column.type&&((0,l.le)(h.data[g.column.field].Sum)?(0,l.le)(h.data[g.column.field].Average)?(0,l.le)(h.data[g.column.field].Max)?(0,l.le)(h.data[g.column.field].Min)?(0,l.le)(h.data[g.column.field].Count)?(0,l.le)(h.data[g.column.field].TrueCount)?(0,l.le)(h.data[g.column.field].FalseCount)?(0,l.le)(h.data[g.column.field].Custom)||(v.value=h.data[g.column.field].Custom):v.value=h.data[g.column.field][g.column.field+" - falsecount"]:v.value=h.data[g.column.field][g.column.field+" - truecount"]:v.value=h.data[g.column.field][g.column.field+" - count"]:v.value=h.data[g.column.field][g.column.field+" - min"]:v.value=h.data[g.column.field][g.column.field+" - max"]:v.value=h.data[g.column.field][g.column.field+" - average"]:v.value=h.data[g.column.field][g.column.field+" - sum"]);v.style=this.getCaptionThemeStyle(this.theme),this.aggregateStyle(g.column,v.style,g.column.field);var F=g.attributes.style;F.textAlign&&(v.style.hAlign=F.textAlign.toLowerCase()),this.parent.trigger("excelAggregateQueryCellInfo",{row:h,type:m?"Footer":C?"GroupFooter":"GroupCaption",style:v}),d.push(v)}else void 0===n&&(v.index=c+i+e.childGridLevel,v.style=this.getCaptionThemeStyle(this.theme),d.push(v))}if((0,l.le)(n)){var L={};if(this.groupedColLength<8&&this.groupedColLength>0){var P={outlineLevel:r[r.length-1].grouping.outlineLevel,isCollapsed:!0};L={index:this.rowLength++,cells:d,grouping:P}}else L={index:this.rowLength++,cells:d};p||r.push(L)}else r.push({index:n,cells:d})}return r},s.prototype.aggregateStyle=function(e,t,i){var r=this.parent.getColumnByField(i);if("object"==typeof e.format){var n=e.format;t.numberFormat=(0,l.le)(n.format)?n.skeleton:n.format,(0,l.le)(n.type)||(t.type=n.type.toLowerCase())}else t.numberFormat=e.format;!(0,l.le)(r)&&(0,l.le)(t.type)&&(t.type=r.type.toLowerCase())},s.prototype.getAggreateValue=function(e,t,i,r){var n={};n[(0,l.I$)(A,i.cellType)]=(0,l.MY)(t);var o,a=r.data[i.column.field?i.column.field:i.column.columnName];return this.parent.isReact||this.parent.isVue?(o=n[(0,l.I$)(A,i.cellType)](a,this.parent),this.parent.isReact&&this.parent.renderTemplates()):o=n[(0,l.I$)(A,i.cellType)](a),o[0].textContent},s.prototype.mergeOptions=function(e,t){for(var i={},r=Object.keys(e),n=0;n<r.length;n++)"name"!==r[n]&&(i[r[n]]=e[r[n]]);for(r=Object.keys(t),n=0;n<r.length;n++)"name"!==r[n]&&(i[r[n]]=t[r[n]]);return i},s.prototype.getColumnStyle=function(e,t){for(var i=0,r=0,n=this.styles;r<n.length;r++){if(n[r].name===e.element.id+"column"+t)return i;i++}},s.prototype.headerRotation=function(e){var t=e.style.rotation;t<=90&&t>=0?e.style.hAlign="Left":(t>90&&t<=180||(t=180),e.style.hAlign="Right"),e.style.rotation=t},s.prototype.processHeaderContent=function(e,t,i,r){var o=t.rows,a=t.columns,h=[];if(i>0)for(var d=0;d!==i;)this.columns.push({index:d+1,width:30}),d++;for(var p=0;p<a.length;p++)this.parseStyles(e,a[p],this.getRecordThemeStyle(this.theme),i+p+1);for(var c,u=0;u<o.length;u++){for(var f=1+i,g=[],v=0;v<o[u].cells.length;v++){var m={},C={},b=o[u].cells[v];if(b.cellType!==A.HeaderIndent&&b.cellType!==A.DetailHeader){for(var y={contains:!0,index:1};y.contains;)if(f=(y=this.getIndex(h,1,f)).index,!y.contains){C.index=y.index+e.childGridLevel;break}if(!(0,l.le)(b.rowSpan)&&1!==b.rowSpan){C.rowSpan=b.rowSpan;for(var S=1;S<b.rowSpan+1;S++){var R={rowIndex:0,columnIndex:0};R.rowIndex=S,R.columnIndex=f,h.push(R)}}!(0,l.le)(b.colSpan)&&1!==b.colSpan&&(C.colSpan=b.colSpan,f=f+C.colSpan-1),C.value=b.column.headerText,m=this.getHeaderThemeStyle(this.theme),(0,l.le)(b.column.textAlign)||(m.hAlign=b.column.textAlign.toLowerCase()),(0,l.le)(b.column.headerTextAlign)||(m.hAlign=b.column.headerTextAlign.toLowerCase());var F={cell:C,gridCell:b,style:m};e.trigger("excelHeaderQueryCellInfo",F),F.style.rotation&&this.headerRotation(F),!(0,l.le)(F.image)&&!(0,l.le)(F.image.base64)&&(c=this.setImage(F,f)),(0,l.le)(F.hyperLink)||(F.cell.hyperlink={target:F.hyperLink.target},C.value=F.hyperLink.displayText||C.value),C.style=F.style,g.push(C),f++}}var D={index:this.rowLength++,cells:g};(0,l.le)(c)||(D.height=c),r.push(D)}return r},s.prototype.getHeaderThemeStyle=function(e){var t={fontSize:12,borders:{color:"#E0E0E0"},bold:!0};return!(0,l.le)(e)&&!(0,l.le)(e.header)&&(t=this.updateThemeStyle(e.header,t)),t},s.prototype.updateThemeStyle=function(e,t){return(0,l.l7)(t,e)},s.prototype.getCaptionThemeStyle=function(e){var t={fontSize:13,backColor:"#F6F6F6"};return!(0,l.le)(e)&&!(0,l.le)(e.caption)&&(t=this.updateThemeStyle(e.caption,t)),t},s.prototype.getRecordThemeStyle=function(e){var t={fontSize:13,borders:{color:"#E0E0E0"}};return!(0,l.le)(e)&&!(0,l.le)(e.record)&&(t=this.updateThemeStyle(e.record,t)),t},s.prototype.processExcelHeader=function(e){if(!(0,l.le)(e.rows)&&("NewSheet"===this.expType||1===this.rowLength)){var t;this.rowLength=void 0===e.headerRows?e.rows.length:e.headerRows,t=this.rowLength<e.rows.length?this.rowLength:e.rows.length,this.rowLength++;for(var i=0;i<t;i++){var r=e.rows[i];null!==r.index&&!(0,l.le)(r.index)||(r.index=i+1),this.updatedCellIndex(r)}}},s.prototype.updatedCellIndex=function(e){for(var t=e.cells.length,i=0;i<t;i++){var r=e.cells[i];null!==r.index&&!(0,l.le)(r.index)||(r.index=i+1)}this.rows.push(e)},s.prototype.processExcelFooter=function(e){if(!(0,l.le)(e.rows)){var t=void 0;void 0===e.footerRows?this.rowLength+=e.rows.length:e.footerRows>e.rows.length?(this.rowLength+=e.footerRows-e.rows.length,t=e.rows.length):t=e.footerRows;for(var i=0;i<t;i++){var r=e.rows[i];null==r.index?r.index=this.rowLength++:r.index+=this.rowLength,this.updatedCellIndex(r)}}},s.prototype.getIndex=function(e,t,i){for(var r=0,n=e;r<n.length;r++){var o=n[r];if(o.rowIndex===t&&o.columnIndex===i)return{contains:!0,index:i+=1}}return{contains:!1,index:i}},s.prototype.parseStyles=function(e,t,i,r){if(!(0,l.le)(t.format))if("object"==typeof t.format){var n=t.format;i.numberFormat=(0,l.le)(n.format)?n.skeleton:n.format,(0,l.le)(n.type)||(i.type=n.type.toLowerCase())}else i.numberFormat=t.format,i.type=t.type;(0,l.le)(t.textAlign)||(i.hAlign=t.textAlign.toLowerCase()),Object.keys(i).length>0&&(i.name=e.element.id+"column"+r,this.styles.push(i)),!(0,l.le)(t.width)&&"auto"!==t.width&&this.columns.push({index:r+e.childGridLevel,width:"number"==typeof t.width?t.width:this.helper.getConvertedWidth(t.width)})},s.prototype.destroy=function(){},s}(),ua=function(){function s(e){this.hideColumnInclude=!1,this.currentViewData=!1,this.customDataSource=!1,this.isGrouping=!1,this.headerOnPages=[],this.drawPosition={xPosition:0,yPosition:0},this.parent=e,this.helper=new Zt(e),this.gridPool={}}return s.prototype.getModuleName=function(){return"PdfExport"},s.prototype.init=function(e){this.exportValueFormatter=new pa(e.locale),this.pdfDocument=void 0,this.hideColumnInclude=!1,this.currentViewData=!1,this.parent=e,this.isGrouping=!1,this.isExporting=!0,e.id=Ue("main-grid"),this.gridPool[e.id]=!1,this.pdfPageSettings=new M.r_9},s.prototype.exportWithData=function(e,t,i,r,n,o,a){var h=this;this.init(e),this.pdfDocument=(0,l.le)(t)?new M.ZlO:t,this.processExport(e,r,n,o).then(function(){h.isExporting=!1,e.trigger(Vs,h.isBlob?{promise:h.blobPromise}:{}),h.parent.log("exporting_complete",h.getModuleName()),i(h.pdfDocument)}).catch(function(d){a(h.pdfDocument),h.parent.trigger(Xt,d)})},s.prototype.Map=function(e,t,i,r,n){var o=this;this.data=new Cr(this.parent),this.isBlob=n,this.gridPool={};var a=new z.AE;e.childGrid&&((0,l.le)(t)||"None"!==t.hierarchyExportMode)&&(e.expandedRows=Ar(e).expandedRows);var h={requestType:"beforePdfExport",cancel:!1,headerPageNumbers:[],gridDrawPosition:{xPosition:0,yPosition:0},generateQuery:!1};if(h.gridObject=e,e.trigger("beforePdfExport",h),!0===h.cancel)return new Promise(function(v,m){return v()});if(zr(t)&&Do(t,e),h.generateQuery&&(a=Zt.getQuery(e,this.data)),this.headerOnPages=h.headerPageNumbers,this.drawPosition=h.gridDrawPosition,this.parent.log("exporting_begin",this.getModuleName()),!(0,l.le)(t)&&!(0,l.le)(t.dataSource)&&t.dataSource instanceof z.hm)return new Promise(function(v,m){t.dataSource.executeQuery(a).then(function(C){o.exportWithData(e,r,v,C,t,i,m)})});if(!(0,l.le)(t)&&"CurrentPage"===t.exportType)return new Promise(function(v,m){o.exportWithData(e,r,v,o.parent.getCurrentViewRecords(),t,i,m)});var g=[];return g.push(this.data.getData({},Zt.getQuery(e,this.data))),g.push(this.helper.getColumnData(e)),new Promise(function(v,m){Promise.all(g).then(function(C){o.init(e),o.pdfDocument=(0,l.le)(r)?new M.ZlO:r,o.processExport(e,C[0],t,i).then(function(){o.isExporting=!1,e.trigger(Vs,o.isBlob?{promise:o.blobPromise}:{}),o.parent.log("exporting_complete",o.getModuleName()),v(o.pdfDocument)}).catch(function(b){m(o.pdfDocument),o.parent.trigger(Xt,b)})})})},s.prototype.processExport=function(e,t,i,r){var a,n=this,o=this.pdfDocument.sections.add();this.processSectionExportProperties(o,i);var h=o.pages.add();return new Promise(function(d,p){a=n.processGridExport(e,t,i),n.globalResolve=d,n.gridPool[e.id]=!0,n.helper.checkAndExport(n.gridPool,n.globalResolve)}).then(function(){return a.draw(h,n.drawPosition.xPosition,n.drawPosition.yPosition),n.drawHeader(i),r||(n.isBlob?n.blobPromise=n.pdfDocument.save():!(0,l.le)(i)&&i.fileName?n.pdfDocument.save(i.fileName):n.pdfDocument.save("Export.pdf"),n.pdfDocument.destroy(),delete e.expandedRows),n.pdfDocument})},s.prototype.processSectionExportProperties=function(e,t){return!(0,l.le)(t)&&(!(0,l.le)(t.pageOrientation)||!(0,l.le)(t.pageSize))&&(this.pdfPageSettings.orientation="Landscape"===t.pageOrientation?M.xjJ.Landscape:M.xjJ.Portrait,this.pdfPageSettings.size=this.getPageSize(t.pageSize),e.setPageSettings(this.pdfPageSettings)),e},s.prototype.processGridExport=function(e,t,i){var r=!0,n=this.parent.isFrozenGrid()&&!this.parent.getFrozenColumns();(0,l.le)(i)||(this.gridTheme=i.theme,r=!!(0,l.le)(i.allowHorizontalOverflow)||i.allowHorizontalOverflow);var o=new Zt(e,this.helper.getForeignKeyData()),a=this.processExportProperties(i,t.result),h=zr(i)?pi(i.columns,e.enableColumnVirtualization):o.getGridExportColumns(n?e.getColumns():e.columns);h=h.filter(function(F){return(0,l.le)(F.commands)});var d=!1;e.groupSettings.columns.length&&(d=!0),e.childGrid&&!(0,l.le)(i)&&(e.hierarchyPrintMode=i.hierarchyExportMode||"Expanded");var p=new M.EsS,c=this.getHeaderThemeStyle(),u=c.border,f=c.font,g=c.brush,v=o.getHeaders(h,this.hideColumnInclude),m=v.columns;p=this.processGridHeaders(e.groupSettings.columns.length,p,v.rows,m,u,f,g,e,r,h),this.setColumnProperties(m,p,o,e,r);var C=this.getSummaryCaptionThemeStyle();if(!(0,l.le)(a)&&a.length){if(d?((0,l.le)(C.border)||(u=C.border),this.processGroupedRecords(p,a,m,e,u,0,C.font,C.brush,C.backgroundBrush,t,i,o,0)):this.processRecord(u,m,e,a,p,0,i,o,0),!(0,l.le)(t.aggregates)){var y,b=new ki(e),S=b.getColumns();S=S.filter(function(F){return(0,l.le)(F.commands)&&"checkbox"!==F.type}),e.aggregates.length&&this.parent!==e&&e.aggregateModule.prepareSummaryInfo(),y=this.customDataSource?b.generateRows(a,t.aggregates):this.currentViewData?b.generateRows(this.parent.getCurrentViewRecords(),t.aggregates):d?b.generateRows(a.records,t.aggregates):b.generateRows(t.result,t.aggregates,null,null,S),this.processAggregates(y,p,u,C.font,C.brush,C.backgroundBrush,!1,null,null,null,!d)}}else p.rows.addRow().style.setBorder(u);return p},s.prototype.getSummaryCaptionThemeStyle=function(){if((0,l.le)(this.gridTheme)||(0,l.le)(this.gridTheme.caption))return{font:new M.ihD(M.RGI.Helvetica,9.75),brush:new M.RYn(new M.qve(0,0,0)),backgroundBrush:new M.RYn(new M.qve(246,246,246))};var e=(0,l.le)(this.gridTheme.caption.fontSize)?9.75:this.gridTheme.caption.fontSize,t=(0,l.le)(this.gridTheme.caption.fontName)?M.RGI.Helvetica:this.getFontFamily(this.gridTheme.caption.fontName),i=this.getFontStyle(this.gridTheme.caption),r=new M.qve(0,0,0);if(!(0,l.le)(this.gridTheme.caption.fontColor)){var n=this.hexToRgb(this.gridTheme.caption.fontColor);r=new M.qve(n.r,n.g,n.b)}var o=this.gridTheme.caption.border?this.getBorderStyle(this.gridTheme.caption.border):null,a=new M.ihD(t,e,i);return(0,l.le)(this.gridTheme.caption.font)||(a=this.gridTheme.caption.font),{font:a,brush:new M.RYn(r),backgroundBrush:new M.RYn(new M.qve(246,246,246)),border:o}},s.prototype.getGridPdfFont=function(e){var t="fontFamily",i="fontSize",r="fontStyle",n="isTrueType",o=0;if(e.header&&e.header.font){var a=e.header.font[t],h=e.header.font[i],d=e.header.font[r];if(o=(0,l.le)(M.rNm[d])?0:M.rNm[d],e.header.font[n])e.header.font=new M.nP$(a,h,o);else{var p=(0,l.le)(a)?M.RGI.Helvetica:this.getFontFamily(a);e.header.font=new M.ihD(p,h,o)}}if(e.caption&&e.caption.font){var c=e.caption.font[t],u=e.caption.font[i],f=e.caption.font[r];if(o=(0,l.le)(M.rNm[f])?0:M.rNm[f],e.caption.font[n])e.caption.font=new M.nP$(c,u,o);else{var g=(0,l.le)(c)?M.RGI.Helvetica:this.getFontFamily(c);e.caption.font=new M.ihD(g,u,o)}}if(e.record&&e.record.font){var v=e.record.font[t],m=e.record.font[i],C=e.record.font[r];if(o=(0,l.le)(M.rNm[C])?0:M.rNm[C],e.record.font[n])e.record.font=new M.nP$(v,m,o);else{var b=(0,l.le)(v)?M.RGI.Helvetica:this.getFontFamily(v);e.record.font=new M.ihD(b,m,o)}}},s.prototype.getHeaderThemeStyle=function(){var e=new M.jyB;if((0,l.le)(this.gridTheme)||(0,l.le)(this.gridTheme.header))return e.all=new M.YBF(new M.qve(234,234,234)),{border:e,font:new M.ihD(M.RGI.Helvetica,10.5),brush:new M.RYn(new M.qve(102,102,102))};var t=(0,l.le)(this.gridTheme.header.fontName)?M.RGI.Helvetica:this.getFontFamily(this.gridTheme.header.fontName),i=this.getFontStyle(this.gridTheme.header),r=(0,l.le)(this.gridTheme.header.fontSize)?10.5:this.gridTheme.header.fontSize,n=new M.qve;if(!(0,l.le)(this.gridTheme.header.fontColor)){var o=this.hexToRgb(this.gridTheme.header.fontColor);n=new M.qve(o.r,o.g,o.b)}var a=new M.ihD(t,r,i);return(0,l.le)(this.gridTheme.header.font)||(a=this.gridTheme.header.font),{border:this.getBorderStyle(this.gridTheme.header.border),font:a,brush:new M.RYn(n)}},s.prototype.processGroupedRecords=function(e,t,i,r,n,o,a,h,d,p,c,u,f){for(var g=this,v=o,m=function(R){var F=e.rows.addRow(),D=r.getColumnByField(R.field),L={value:R.key,column:D,style:void 0,isForeignKey:D.isForeignColumn()},k=r.getColumnByField(R.field).headerText+": "+(D.enableGroupByFormat?R.key:C.exportValueFormatter.formatCellValue(L))+" - "+R.count+(t.count>1?" items":" item");C.parent.trigger(Is,{captionText:k,type:"PDF",data:R,style:void 0},function(T){F.cells.getCell(v).value=T.captionText,F.cells.getCell(v).style.stringFormat=new M.haZ(M.oG9.Left),F.style.setBorder(n),F.style.setFont(a),F.style.setTextBrush(h),F.style.setBackgroundBrush(d),(0,l.le)(T.style)||g.processCellStyle(F.cells.getCell(v),T);var P,j=new Ai(r);P=(0,l.le)(R.items.records)?j.generateRows(R.items,R):j.generateRows(R.items.records,R),!(0,l.le)(P)&&0===P.length&&(F.cells.getCell(v+1).columnSpan=e.columns.count-(v+1)),!(0,l.le)(t.childLevels)&&t.childLevels>0?(g.processAggregates(P,e,n,a,h,d,!0,F,v,null,null,r),g.processGroupedRecords(e,R.items,i,r,n,v+1,a,h,d,p,c,u,f),P=new di(r).generateRows(R.items.records,R),g.processAggregates(P,e,n,a,h,d,!1)):(g.processAggregates(P,e,n,a,h,d,!0,F,v,null,null,r),f=g.processRecord(n,i,r,R.items,e,v+1,c,u,f),P=new di(r).generateRows(R.items,R),g.processAggregates(P,e,n,a,h,d,!1,null,null,!0,null,r))})},C=this,b=0,y=t;b<y.length;b++)m(y[b])},s.prototype.processGridHeaders=function(e,t,i,r,n,o,a,h,d,p){for(var c=this,u=r.length+e,f=Br(p),g=p,v=0,m=[],C=0;C<i.length;C++)m[C]=0;h.groupSettings.columns.length&&(v=h.groupSettings.columns.length-1,u-=1),t.columns.add(u),t.headers.add(i.length);var b=function(S,R,F,D,L){var k=t.headers.getHeader(S),E=k.cells.getCell(R),T=i[S].cells[h.groupSettings.columns.length?R:m[S]];m[S]=m[S]+1,(0,l.le)(F.headerTextAlign)||(E.style.stringFormat=c.getHorizontalAlignment(F.headerTextAlign)),D>0&&(E.rowSpan=D,E.style.stringFormat=c.getVerticalAlignment("Bottom",E.style.stringFormat,F.textAlign)),L>0&&(E.columnSpan=L),k.style.setBorder(n),k.style.setFont(o),k.style.setTextBrush(a),E.value=F.headerText,!(0,l.le)(T)&&(T.cellType===A.HeaderIndent||T.cellType===A.DetailHeader)&&(E.value="",E.width=20);var P={cell:E,gridCell:T,style:E.style};c.parent.trigger("pdfHeaderQueryCellInfo",P);var j=P,$=P.style.borders,J=P.style.font,se=P.style.textBrush;(0,l.le)($)||k.style.setBorder($),(0,l.le)(J)||k.style.setFont(J),(0,l.le)(se)||k.style.setTextBrush(se),(0,l.le)(j.style.verticalAlignment)||(E.style.stringFormat=c.getVerticalAlignment(j.style.verticalAlignment,E.style.stringFormat)),(0,l.le)(j.image)||(E.value=new M.bjq(j.image.base64)),(0,l.le)(j.hyperLink)||(E.value=c.setHyperLink(j))},y=function(S,R,F,D,L,k){for(var E=0,T=0;T<S.length;T++)if(k&&(D=E=E+F+(0===T?0:-1),F=0),!k&&!S[T].visible&&(D-=1),S[T].columns&&S[T].columns.length){var P=y(S[T].columns,R-1,0,T+D,L+1,!1);b(L,T+D+v,S[T],0,P),F+=P,D=D+P-1}else(S[T].visible||c.hideColumnInclude)&&(F++,b(L,T+D+v,S[T],R,0));return F};return y(g,f,0,0,0,!0),t.columns.count>=6&&d&&(t.style.allowHorizontalOverflow=!0),t},s.prototype.processExportProperties=function(e,t){if((0,l.le)(e))this.currentViewData=!1,this.customDataSource=!1;else{(0,l.le)(e.theme)||(this.gridTheme=e.theme);var i=this.pdfPageSettings.size;if(this.drawHeader(e),!(0,l.le)(e.footer)){var r=e.footer,n=new M.fuO(0,i.width-80-.75*r.fromBottom),o=new M.EA8(i.width-80,.75*r.height),a=new M.Z_c(n,o);this.pdfDocument.template.bottom=this.drawPageTemplate(new M.iD(a),r)}!(0,l.le)(e.includeHiddenColumn)&&!this.isGrouping&&(this.hideColumnInclude=e.includeHiddenColumn),(0,l.le)(e.dataSource)?(0,l.le)(e.exportType)?(this.currentViewData=!1,this.customDataSource=!1):"CurrentPage"===e.exportType?(t=this.parent.currentViewData,this.currentViewData=!0,this.customDataSource=!1):(this.currentViewData=!1,this.customDataSource=!1):(e.dataSource instanceof z.hm||(t=e.dataSource),this.customDataSource=!0,this.currentViewData=!1)}return t},s.prototype.drawHeader=function(e){var t=this,i=this.pdfPageSettings.size;if(!(0,l.le)(e)&&!(0,l.le)(e.header)){var r=e.header,n=new M.fuO(0,r.fromTop),o=new M.EA8(i.width-80,.75*r.height),a=new M.Z_c(n,o);if(this.headerOnPages.length){var h=this.drawPageTemplate(new M.iD(a),r);this.headerOnPages.filter(function(d){d-1>=0&&d-1<=t.pdfDocument.pages.count-1&&t.pdfDocument.pages.getPageByIndex(d-1).graphics.drawPdfTemplate(h.template,new M.fuO(0,0))})}else this.pdfDocument.template.top=this.drawPageTemplate(new M.iD(a),r)}},s.prototype.drawPageTemplate=function(e,t){for(var i=0,r=t.contents;i<r.length;i++){var n=r[i];switch(this.processContentValidation(n),n.type){case"Text":if(""===n.value||null==n.value||"string"!=typeof n.value)throw new Error("please enter the valid input value in text content...");this.drawText(e,n);break;case"PageNumber":this.drawPageNumber(e,n);break;case"Image":if(null==n.src||""===n.src)throw new Error("please enter the valid base64 string in image content...");this.drawImage(e,n);break;case"Line":this.drawLine(e,n);break;default:throw new Error("Please set valid content type...")}}return e},s.prototype.processContentValidation=function(e){if(null==e.type)throw new Error("please set valid content type...");if("Line"===e.type){if(null==e.points)throw new Error("please enter valid points in "+e.type+" content...");if(null==e.points.x1||"number"!=typeof e.points.x1)throw new Error("please enter valid x1 co-ordinate in "+e.type+" points...");if(null==e.points.y1||"number"!=typeof e.points.y1)throw new Error("please enter valid y1 co-ordinate in "+e.type+" points...");if(null==e.points.x2||"number"!=typeof e.points.x2)throw new Error("please enter valid x2 co-ordinate in "+e.type+" points...");if(null==e.points.y2||"number"!=typeof e.points.y2)throw new Error("please enter valid y2 co-ordinate in "+e.type+" points...")}else{if(null==e.position)throw new Error("please enter valid position in "+e.type+" content...");if(null==e.position.x||"number"!=typeof e.position.x)throw new Error("please enter valid x co-ordinate in "+e.type+" position...");if(null==e.position.y||"number"!=typeof e.position.y)throw new Error("please enter valid y co-ordinate in "+e.type+" position...")}},s.prototype.drawText=function(e,t){var i=this.getFont(t),r=this.getBrushFromContent(t),n=null;if(!(0,l.le)(t.style.textPenColor)){var o=this.hexToRgb(t.style.textPenColor);n=new M.YBF(new M.qve(o.r,o.g,o.b))}null==r&&null==n&&(r=new M.RYn(new M.qve(0,0,0)));var a=t.value.toString(),h=.75*t.position.x,d=.75*t.position.y,p=new M.haZ;(0,l.le)(t.style.stringFormat)||(p.alignment=t.style.stringFormat.alignment);var c=this.setContentFormat(t,p);null===c||(0,l.le)(c.format)||(0,l.le)(c.size)?e.graphics.drawString(a,i,n,r,h,d,p):e.graphics.drawString(a,i,n,r,h,d,c.size.width,c.size.height,c.format)},s.prototype.drawPageNumber=function(e,t){var i=this.getFont(t),r=null;if((0,l.le)(t.style.textBrushColor))r=new M.RYn(new M.qve(0,0,0));else{var n=this.hexToRgb(t.style.textBrushColor);r=new M.RYn(new M.qve(n.r,n.g,n.b))}var a,h,o=new M.kdh(i,r);if(o.numberStyle=this.getPageNumberStyle(t.pageNumberType),(0,l.le)(t.format))a=new M.Ik0(i,r,h="{0}",o);else{var d="$total",p="$current";if(-1!==t.format.indexOf(d)&&-1!==t.format.indexOf(p))(c=new M.f2l(i)).numberStyle=this.getPageNumberStyle(t.pageNumberType),h=t.format.indexOf(d)>t.format.indexOf(p)?(h=t.format.replace(p,"0")).replace(d,"1"):(h=t.format.replace(p,"1")).replace(d,"0"),a=new M.Ik0(i,r,h,o,c);else if(-1!==t.format.indexOf(p)&&-1===t.format.indexOf(d))h=t.format.replace(p,"0"),a=new M.Ik0(i,r,h,o);else{var c=new M.f2l(i);h=t.format.replace(d,"0"),a=new M.Ik0(i,r,h,c)}}var u=.75*t.position.x,f=.75*t.position.y,g=this.setContentFormat(t,a.stringFormat);null!==g&&!(0,l.le)(g.format)&&!(0,l.le)(g.size)&&(a.stringFormat=g.format,a.bounds=new M.Z_c(u,f,g.size.width,g.size.height)),a.draw(e.graphics,u,f)},s.prototype.drawImage=function(e,t){var i=.75*t.position.x,r=.75*t.position.y,n=(0,l.le)(t.size)?void 0:.75*t.size.width,o=(0,l.le)(t.size)?void 0:.75*t.size.height,a=new M.bjq(t.src);(0,l.le)(n)?e.graphics.drawImage(a,i,r):e.graphics.drawImage(a,i,r,n,o)},s.prototype.drawLine=function(e,t){var i=.75*t.points.x1,r=.75*t.points.y1,n=.75*t.points.x2,o=.75*t.points.y2,a=this.getPenFromContent(t);!(0,l.le)(t.style)&&null!==t.style&&(!(0,l.le)(t.style.penSize)&&null!==t.style.penSize&&"number"==typeof t.style.penSize&&(a.width=.75*t.style.penSize),a.dashStyle=this.getDashStyle(t.style.dashStyle)),e.graphics.drawLine(a,i,r,n,o)},s.prototype.processAggregates=function(e,t,i,r,n,o,a,h,d,p,c,u){for(var f=0,g=e;f<g.length;f++){for(var v=g[f],m=-1,C=0,b=!0,y=[],S=c?0:1,R=0;R<t.columns.count+S;R++){var F=v.cells[C];if(F.cellType!==A.DetailFooterIntent){if(!this.hideColumnInclude){for(;void 0===F.visible;)F.cellType!==A.DetailFooterIntent&&((0,l.le)(h)||(0,l.le)(h.cells.getCell(R).value)?y.push(""):(this.parent.trigger(ro,{row:v,type:"GroupCaption",style:h.cells}),y.push(h.cells.getCell(R).value),b=!1,a||(R+=1)),R+=1,F=v.cells[C+=1]);for(;!(0,l.le)(F.visible)&&!F.visible;)F=v.cells[C+=1]}if(F.isDataCell){var L={};if((0,l.le)(F.column.footerTemplate)&&(0,l.le)(F.column.groupCaptionTemplate)&&(0,l.le)(F.column.groupFooterTemplate))k=this.getSummaryWithoutTemplate(v.data[F.column.field]),(0,l.le)(k)||y.push(k);else{var k;L=(k=this.getTemplateFunction(L,R,m,F)).templateFunction,m=k.leastCaptionSummaryIndex;var E=void 0,T=v.data[F.column.field?F.column.field:F.column.columnName];this.parent.isReact||this.parent.isVue?(E=L[(0,l.I$)(A,F.cellType)](T,this.parent),this.parent.isReact&&this.parent.renderTemplates()):E=L[(0,l.I$)(A,F.cellType)](T),y.push(E[0].textContent),b=!1}}else y.push("");b&&""!==y[R]&&!(0,l.le)(y[R])&&null!==y[R]&&(b=!1),C+=1}else R--,C++}if(!c)if(a)for(R=u.groupSettings.columns.length;R<y.length-1;R++)y[R]=y[R+1],y[R+1]=y[R+2]?y[R+2]:"";else y.splice(0,1);if(!b)if(a)for(R=0;R<t.columns.count;R++)h.cells.getCell(R).value=y[R].toString(),R===d&&-1!==m&&1!==m?h.cells.getCell(R).columnSpan=m-1-d:R===d&&-1===m&&(h.cells.getCell(R).columnSpan=t.columns.count-d);else{var P=t.rows.addRow();for(P.style.setBorder(i),P.style.setFont(r),P.style.setTextBrush(n),P.style.setBackgroundBrush(o),this.parent.trigger(ro,{row:v,type:p?"GroupFooter":"Footer",style:P.cells}),R=0;R<t.columns.count;R++)P.cells.getCell(R).value=y[R].toString()}}},s.prototype.getTemplateFunction=function(e,t,i,r){return(0,l.le)(r.column.footerTemplate)||r.cellType!==A.Summary?(0,l.le)(r.column.groupCaptionTemplate)?e[(0,l.I$)(A,A.GroupSummary)]=(0,l.MY)(r.column.groupFooterTemplate):(-1===i&&(i=t),e[(0,l.I$)(A,A.CaptionSummary)]=(0,l.MY)(r.column.groupCaptionTemplate)):e[(0,l.I$)(A,A.Summary)]=(0,l.MY)(r.column.footerTemplate),{templateFunction:e,leastCaptionSummaryIndex:i}},s.prototype.getSummaryWithoutTemplate=function(e){return(0,l.le)(e.Sum)?(0,l.le)(e.Average)?(0,l.le)(e.Max)?(0,l.le)(e.Min)?(0,l.le)(e.Count)?(0,l.le)(e.TrueCount)?(0,l.le)(e.FalseCount)?(0,l.le)(e.Custom)?void 0:e.Custom:e.FalseCount:e.TrueCount:e.Count:e.Min:e.Max:e.Average:e.Sum},s.prototype.setColumnProperties=function(e,t,i,r,n){for(var o=r.groupSettings.columns.length?r.groupSettings.columns.length-1:0,a=0;a<o;a++)t.columns.getColumn(a).width=20;for(a=0;a<e.length;a++)(0,l.le)(e[a].textAlign)||(t.columns.getColumn(a+o).format=this.getHorizontalAlignment(e[a].textAlign)),t.style.allowHorizontalOverflow&&!(0,l.le)(e[a].width)&&n&&(t.columns.getColumn(a+o).width="number"==typeof e[a].width?.75*e[a].width:.75*i.getConvertedWidth(e[a].width))},s.prototype.setRecordThemeStyle=function(e,t){if((0,l.le)(this.gridTheme)||(0,l.le)(this.gridTheme.record))e.style.setTextBrush(new M.RYn(new M.qve(0,0,0)));else{var i=(0,l.le)(this.gridTheme.record.fontName)?M.RGI.Helvetica:this.getFontFamily(this.gridTheme.record.fontName),r=(0,l.le)(this.gridTheme.record.fontSize)?9.75:this.gridTheme.record.fontSize,n=this.getFontStyle(this.gridTheme.record),o=new M.ihD(i,r,n);(0,l.le)(this.gridTheme.record.font)||(o=this.gridTheme.record.font),e.style.setFont(o);var a=new M.qve;if(!(0,l.le)(this.gridTheme.record.fontColor)){var h=this.hexToRgb(this.gridTheme.record.fontColor);a=new M.qve(h.r,h.g,h.b)}e.style.setTextBrush(new M.RYn(a))}var d=this.gridTheme&&this.gridTheme.record&&this.gridTheme.record.border?this.getBorderStyle(this.gridTheme.record.border):t;return e.style.setBorder(d),e},s.prototype.processRecord=function(e,t,i,r,n,o,a,h,d){for(var c=0,u=h.getGridRowModel(t,r,i,d);c<u.length;c++){var f=u[c];d++;for(var g=this.setRecordThemeStyle(n.rows.addRow(),e),v=f.cells.length,m=0;m<v;m++){var C=f.cells[m];if(C.cellType===A.Data){var b=C.column,y=b.field,S=(0,l.le)(y)?"":b.valueAccessor(y,f.data,b),R=(0,l.le)(S)?"":S,F=void 0;if(b.isForeignColumn&&b.isForeignColumn()&&(F=h.getFData(R,b),R=(0,l.NA)(b.foreignKeyValue,F)),(k={data:f.data,value:R,column:b,style:void 0,colSpan:1,cell:L=g.cells.getCell(m)}).value="boolean"===k.column.type&&"string"==typeof k.value?k.value:this.exportValueFormatter.formatCellValue(k),this.parent.trigger("pdfQueryCellInfo",k),(0,l.le)(k.image)||(k.value=new M.bjq(k.image.base64),k.value.height=k.image.height||k.value.height,k.value.width=k.image.width||k.value.width),L.value=k.value,(0,l.le)(k.hyperLink)||(L.value=this.setHyperLink(k)),(0,l.le)(k.style)||this.processCellStyle(L,k),k.colSpan>1){m+1+k.colSpan>g.cells.count&&(k.colSpan=g.cells.count-(m+1)),L.columnSpan=k.colSpan;for(var E=1;E<L.columnSpan;E++)g.cells.getCell(m+E).value="";m+=k.colSpan-1}}}if(f.isExpand){var L,P=this.setRecordThemeStyle(n.rows.addRow(),e),j=this.parent.childGrid?0:o;(L=P.cells.getCell(j)).columnSpan=P.cells.count-j,L.style.cellPadding=new M.xyW(10,10,10,10),i.isPrinting=!0;var k,$=!(0,l.le)(a)&&a.exportType?a.exportType:"AllPages",J=this.helper.createChildGrid(i,f,$,this.gridPool),se=J.childGrid,ge=J.element;se.actionFailure=h.failureHandler(this.gridPool,se,this.globalResolve),this.parent.trigger(Ns,k={childGrid:se,row:f,cell:L,exportProperties:a}),se.beforeDataBound=this.childGridCell(L,se,a),se.appendTo(ge)}this.parent.notify(Ws,{type:"pdf",rowObj:f})}return d},s.prototype.setHyperLink=function(e){var t=new M.wVQ;return t.url=e.hyperLink.target,t.text=e.hyperLink.displayText||e.hyperLink.target,t.font=new M.ihD(M.RGI.Helvetica,9.75),t.brush=new M.RYn(new M.qve(51,102,187)),t},s.prototype.childGridCell=function(e,t,i){var r=this;return function(n){return t.beforeDataBound=null,n.cancel=!0,e.value=r.processGridExport(t,n,i),t.destroy(),(0,l.og)(t.element),r.gridPool[t.id]=!0,r.helper.checkAndExport(r.gridPool,r.globalResolve),e}},s.prototype.processCellStyle=function(e,t){if(!(0,l.le)(t.style.backgroundColor)){var i=this.hexToRgb(t.style.backgroundColor);e.style.backgroundBrush=new M.RYn(new M.qve(i.r,i.g,i.b))}if((0,l.le)(t.style.textAlignment)||(e.style.stringFormat=this.getHorizontalAlignment(t.style.textAlignment)),(0,l.le)(t.style.cellPadding)||(e.style.cellPadding=t.style.cellPadding),(0,l.le)(t.style.verticalAlignment)||(e.style.stringFormat=this.getVerticalAlignment(t.style.verticalAlignment,e.style.stringFormat)),!(0,l.le)(t.style.textBrushColor)){var r=this.hexToRgb(t.style.textBrushColor);e.style.textBrush=new M.RYn(new M.qve(r.r,r.g,r.b))}if(!(0,l.le)(t.style.textPenColor)){var n=this.hexToRgb(t.style.textPenColor);e.style.textPen=new M.YBF(new M.qve(n.r,n.g,n.b))}if((!(0,l.le)(t.style.fontFamily)||!(0,l.le)(t.style.fontSize)||!(0,l.le)(t.style.bold)||!(0,l.le)(t.style.italic)||!(0,l.le)(t.style.underline)||!(0,l.le)(t.style.strikeout))&&(e.style.font=this.getFont(t)),!(0,l.le)(t.style.border)){var o=new M.jyB,a=t.style.border.width,h=(0,l.le)(a)||"number"!=typeof a?void 0:.75*a,d=new M.qve(196,196,196);if(!(0,l.le)(t.style.border.color)){var p=this.hexToRgb(t.style.border.color);d=new M.qve(p.r,p.g,p.b)}var c=new M.YBF(d,h);(0,l.le)(t.style.border.dashStyle)||(c.dashStyle=this.getDashStyle(t.style.border.dashStyle)),o.all=c,e.style.borders=o}(0,l.le)(t.style.paragraphIndent)||(e.style.stringFormat=new M.haZ,e.style.stringFormat.paragraphIndent=t.style.paragraphIndent)},s.prototype.getHorizontalAlignment=function(e,t){switch(void 0===t&&(t=new M.haZ),e){case"Right":t.alignment=M.oG9.Right;break;case"Center":t.alignment=M.oG9.Center;break;case"Justify":t.alignment=M.oG9.Justify;break;case"Left":t.alignment=M.oG9.Left}return t},s.prototype.getVerticalAlignment=function(e,t,i){switch(void 0===t&&(t=new M.haZ,t=this.getHorizontalAlignment(i,t)),e){case"Bottom":t.lineAlignment=M.SAZ.Bottom;break;case"Middle":t.lineAlignment=M.SAZ.Middle;break;case"Top":t.lineAlignment=M.SAZ.Top}return t},s.prototype.getFontFamily=function(e){switch(e){case"TimesRoman":return 2;case"Courier":return 1;case"Symbol":return 3;case"ZapfDingbats":return 4;default:return 0}},s.prototype.getFont=function(e){if(e.font)return e.font;var t=(0,l.le)(e.style.fontSize)?9.75:.75*e.style.fontSize,i=(0,l.le)(e.style.fontFamily)?M.RGI.TimesRoman:this.getFontFamily(e.style.fontFamily),r=M.rNm.Regular;return!(0,l.le)(e.style.bold)&&e.style.bold&&(r|=M.rNm.Bold),!(0,l.le)(e.style.italic)&&e.style.italic&&(r|=M.rNm.Italic),!(0,l.le)(e.style.underline)&&e.style.underline&&(r|=M.rNm.Underline),!(0,l.le)(e.style.strikeout)&&e.style.strikeout&&(r|=M.rNm.Strikeout),new M.ihD(i,t,r)},s.prototype.getPageNumberStyle=function(e){switch(e){case"LowerLatin":return 2;case"LowerRoman":return 3;case"UpperLatin":return 4;case"UpperRoman":return 5;default:return 1}},s.prototype.setContentFormat=function(e,t){if(!(0,l.le)(e.size)){var i=.75*e.size.width,r=.75*e.size.height;if(t=new M.haZ(M.oG9.Left,M.SAZ.Middle),!(0,l.le)(e.style.hAlign))switch(e.style.hAlign){case"Right":t.alignment=M.oG9.Right;break;case"Center":t.alignment=M.oG9.Center;break;case"Justify":t.alignment=M.oG9.Justify;break;default:t.alignment=M.oG9.Left}return(0,l.le)(e.style.vAlign)||(t=this.getVerticalAlignment(e.style.vAlign,t)),{format:t,size:new M.EA8(i,r)}}return null},s.prototype.getPageSize=function(e){switch(e){case"Letter":return new M.EA8(612,792);case"Note":return new M.EA8(540,720);case"Legal":return new M.EA8(612,1008);case"A0":return new M.EA8(2380,3368);case"A1":return new M.EA8(1684,2380);case"A2":return new M.EA8(1190,1684);case"A3":return new M.EA8(842,1190);case"A5":return new M.EA8(421,595);case"A6":return new M.EA8(297,421);case"A7":return new M.EA8(210,297);case"A8":return new M.EA8(148,210);case"A9":return new M.EA8(105,148);case"B0":return new M.EA8(2836,4008);case"B1":return new M.EA8(2004,2836);case"B2":return new M.EA8(1418,2004);case"B3":return new M.EA8(1002,1418);case"B4":return new M.EA8(709,1002);case"B5":return new M.EA8(501,709);case"Archa":return new M.EA8(648,864);case"Archb":return new M.EA8(864,1296);case"Archc":return new M.EA8(1296,1728);case"Archd":return new M.EA8(1728,2592);case"Arche":return new M.EA8(2592,3456);case"Flsa":return new M.EA8(612,936);case"HalfLetter":return new M.EA8(396,612);case"Letter11x17":return new M.EA8(792,1224);case"Ledger":return new M.EA8(1224,792);default:return new M.EA8(595,842)}},s.prototype.getDashStyle=function(e){switch(e){case"Dash":return 1;case"Dot":return 2;case"DashDot":return 3;case"DashDotDot":return 4;default:return 0}},s.prototype.getPenFromContent=function(e){var t=new M.YBF(new M.qve(0,0,0));if(!(0,l.le)(e.style)&&null!==e.style&&!(0,l.le)(e.style.penColor)){var i=this.hexToRgb(e.style.penColor);t=new M.YBF(new M.qve(i.r,i.g,i.b))}return t},s.prototype.getBrushFromContent=function(e){var t=null;if(!(0,l.le)(e.style.textBrushColor)){var i=this.hexToRgb(e.style.textBrushColor);t=new M.RYn(new M.qve(i.r,i.g,i.b))}return t},s.prototype.hexToRgb=function(e){if(null===e||""===e||7!==e.length)throw new Error("please set valid hex value for color...");e=e.substring(1);var t=parseInt(e,16);return{r:t>>16&255,g:t>>8&255,b:255&t}},s.prototype.getFontStyle=function(e){var t=M.rNm.Regular;return!(0,l.le)(e)&&e.bold&&(t|=M.rNm.Bold),!(0,l.le)(e)&&e.italic&&(t|=M.rNm.Italic),!(0,l.le)(e)&&e.underline&&(t|=M.rNm.Underline),!(0,l.le)(e)&&e.strikeout&&(t|=M.rNm.Strikeout),t},s.prototype.getBorderStyle=function(e){var t=new M.jyB;if((0,l.le)(e))t.all=new M.YBF(new M.qve(234,234,234));else{var i=e.width,r=(0,l.le)(i)||"number"!=typeof i?void 0:.75*i,n=new M.qve(196,196,196);if(!(0,l.le)(e.color)){var o=this.hexToRgb(e.color);n=new M.qve(o.r,o.g,o.b)}var a=new M.YBF(n,r);(0,l.le)(e.dashStyle)||(a.dashStyle=this.getDashStyle(e.dashStyle)),t.all=a}return t},s.prototype.destroy=function(){},s}(),U={header:"."+pe,content:"."+ae,edit:".e-inline-edit",batchEdit:".e-editedbatchcell",editIcon:"e-edit",pager:".e-gridpager",delete:"e-delete",save:"e-save",cancel:"e-cancel",copy:"e-copy",pdf:"e-pdfexport",group:"e-icon-group",ungroup:"e-icon-ungroup",csv:"e-csvexport",excel:"e-excelexport",fPage:"e-icon-first",nPage:"e-icon-next",lPage:"e-icon-last",pPage:"e-icon-prev",ascending:"e-icon-ascending",descending:"e-icon-descending",groupHeader:"e-groupdroparea",touchPop:"e-gridpopup"},ep=function(){function s(e,t){this.defaultItems={},this.disableItems=[],this.hiddenItems=[],this.localeText=this.setLocaleKey(),this.parent=e,this.gridID=e.element.id,this.serviceLocator=t,this.addEventListener()}return s.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(X,this.enableAfterRenderMenu,this),this.parent.on(nt,this.render,this),this.parent.on(V,this.destroy,this))},s.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(nt,this.render),this.parent.off(X,this.enableAfterRenderMenu),this.parent.off(V,this.destroy),l.bi.remove(this.element,"keydown",this.keyDownHandler.bind(this)))},s.prototype.keyDownHandler=function(e){("Tab"===e.code||9===e.which)&&this.contextMenu.close(),"Escape"===e.code&&(this.contextMenu.close(),this.parent.notify(Pt,{}))},s.prototype.render=function(){this.parent.element.classList.add("e-noselect"),this.l10n=this.serviceLocator.getService("localization"),this.element=this.parent.createElement("ul",{id:this.gridID+"_cmenu"}),l.bi.add(this.element,"keydown",this.keyDownHandler.bind(this)),this.parent.element.appendChild(this.element);var e="#"+this.gridID;this.contextMenu=new Yt.xV({items:this.getMenuItems(),enableRtl:this.parent.enableRtl,enablePersistence:this.parent.enablePersistence,locale:this.parent.locale,target:e,select:this.contextMenuItemClick.bind(this),beforeOpen:this.contextMenuBeforeOpen.bind(this),onOpen:this.contextMenuOpen.bind(this),onClose:this.contextMenuOnClose.bind(this),cssClass:this.parent.cssClass?"e-grid-menu "+this.parent.cssClass:"e-grid-menu"}),this.contextMenu.appendTo(this.element)},s.prototype.enableAfterRenderMenu=function(e){e.module===this.getModuleName()&&e.enable&&(this.contextMenu&&(this.contextMenu.destroy(),(0,l.Od)(this.element),this.parent.element.classList.remove("e-noselect")),this.render())},s.prototype.getMenuItems=function(){for(var e=[],t=[],i=0,r=this.parent.contextMenuItems;i<r.length;i++){var n=r[i];"string"==typeof n&&-1!==this.getDefaultItems().indexOf(n)?-1!==n.toLocaleLowerCase().indexOf("export")?t.push(this.buildDefaultItems(n)):e.push(this.buildDefaultItems(n)):"string"!=typeof n&&e.push(n)}if(t.length>0){var o=this.buildDefaultItems("export");o.items=t,e.push(o)}return e},s.prototype.getLastPage=function(){var e=Math.floor(this.parent.pageSettings.totalRecordsCount/this.parent.pageSettings.pageSize);return this.parent.pageSettings.totalRecordsCount%this.parent.pageSettings.pageSize&&(e+=1),e},s.prototype.contextMenuOpen=function(){this.isOpen=!0},s.prototype.contextMenuItemClick=function(e){switch(this.getKeyFromId(e.item.id)){case"AutoFitAll":this.parent.autoFitColumns([]);break;case"AutoFit":this.parent.autoFitColumns(this.targetColumn.field);break;case"Group":this.parent.groupColumn(this.targetColumn.field);break;case"Ungroup":this.parent.ungroupColumn(this.targetColumn.field);break;case"Edit":this.parent.editModule&&("Batch"===this.parent.editSettings.mode?this.row&&this.cell&&!isNaN(parseInt(this.cell.getAttribute(ce),10))&&this.parent.editModule.editCell(parseInt(this.row.getAttribute(O),10),this.parent.getColumns()[parseInt(this.cell.getAttribute(ce),10)].field):(this.parent.editModule.endEdit(),this.parent.editModule.startEdit(this.row)));break;case"Delete":this.parent.editModule&&("Batch"!==this.parent.editSettings.mode&&this.parent.editModule.endEdit(),1===this.parent.getSelectedRecords().length?this.parent.editModule.deleteRow(this.row):this.parent.deleteRecord());break;case"Save":this.parent.editModule&&this.parent.editModule.endEdit();break;case"Cancel":this.parent.editModule&&this.parent.editModule.closeEdit();break;case"Copy":this.parent.copy();break;case"PdfExport":this.parent.pdfExport();break;case"ExcelExport":this.parent.excelExport();break;case"CsvExport":this.parent.csvExport();break;case"SortAscending":this.isOpen=!1,this.parent.sortColumn(this.targetColumn.field,"Ascending");break;case"SortDescending":this.isOpen=!1,this.parent.sortColumn(this.targetColumn.field,"Descending");break;case"FirstPage":this.parent.goToPage(1);break;case"PrevPage":this.parent.goToPage(this.parent.pageSettings.currentPage-1);break;case"LastPage":this.parent.goToPage(this.getLastPage());break;case"NextPage":this.parent.goToPage(this.parent.pageSettings.currentPage+1)}e.column=this.targetColumn,e.rowInfo=this.targetRowdata,this.parent.trigger("contextMenuClick",e)},s.prototype.contextMenuOnClose=function(e){e.items.length>0&&e.items[0].parentObj instanceof Yt.xV&&this.updateItemStatus(),this.parent.notify(Ln,{isOpen:!1})},s.prototype.getLocaleText=function(e){return this.l10n.getConstant(this.localeText[e])},s.prototype.updateItemStatus=function(){this.contextMenu.showItems(this.hiddenItems),this.contextMenu.enableItems(this.disableItems),this.hiddenItems=[],this.disableItems=[],this.isOpen=!1},s.prototype.contextMenuBeforeOpen=function(e){var t=(0,l.oq)(e.event.target,".e-grid");if(e.event&&t&&t!==this.parent.element)e.cancel=!0;else if(e.event&&((0,l.oq)(e.event.target,"."+U.groupHeader)||(0,l.oq)(e.event.target,"."+U.touchPop)||(0,l.oq)(e.event.target,".e-summarycell")||(0,l.oq)(e.event.target,".e-groupcaption")||(0,l.oq)(e.event.target,".e-filterbarcell")))e.cancel=!0;else{this.targetColumn=this.getColumn(e.event),w(e.event.target,"e-grid")&&(this.targetRowdata=this.parent.getRowInfo(e.event.target)),(0,l.le)(e.parentItem)&&this.targetColumn&&this.targetRowdata.cell&&(this.parent.notify(Ln,{isOpen:!0}),this.selectRow(e.event,!(this.targetRowdata.cell.classList.contains("e-selectionbackground")&&"Multiple"===this.parent.selectionSettings.type)));for(var i=[],r=[],n=0,o=e.items;n<o.length;n++){var a=o[n],h=this.getKeyFromId(a.id),d=this.defaultItems[h];if(-1!==this.getDefaultItems().indexOf(h))if(this.ensureDisabledStatus(h)&&this.disableItems.push(a.text),e.event&&(this.ensureTarget(e.event.target,U.edit)||this.ensureTarget(e.event.target,U.batchEdit)))"Save"!==h&&"Cancel"!==h&&this.hiddenItems.push(a.text);else{if(this.parent.editModule&&"Batch"===this.parent.editSettings.mode&&((0,l.oq)(e.event.target,".e-gridform")||this.parent.editModule.getBatchChanges()[ai].length||this.parent.editModule.getBatchChanges()[ot].length||this.parent.editModule.getBatchChanges()[xt].length)&&("Save"===h||"Cancel"===h))continue;(0,l.le)(e.parentItem)&&e.event&&!this.ensureTarget(e.event.target,d.target)&&this.hiddenItems.push(a.text)}else a.target&&e.event&&!this.ensureTarget(e.event.target,a.target)?a.separator?i.push(a.id):this.hiddenItems.push(a.text):this.ensureTarget(e.event.target,a.target)&&a.separator&&r.push(a.id)}r.length>0&&this.contextMenu.showItems(r,!0),this.contextMenu.enableItems(this.disableItems,!1),this.contextMenu.hideItems(this.hiddenItems),i.length>0&&this.contextMenu.hideItems(i,!0),this.eventArgs=e.event,e.column=this.targetColumn,e.rowInfo=this.targetRowdata,this.parent.trigger("contextMenuOpen",e),(e.cancel||this.hiddenItems.length===e.items.length&&!e.parentItem)&&(this.updateItemStatus(),e.cancel=!0)}ji(this.parent.element,this.contextMenu.element.parentElement)},s.prototype.ensureTarget=function(e,t){var i;return(i=!this.ensureFrozenHeader(e)||t!==U.header&&t!==U.content?t===U.content||t===U.header?w((0,l.oq)(e,"."+Z),t.substr(1,t.length)):(0,l.oq)(e,t):(0,l.oq)(e,t===U.header?"thead":I))&&w(i,"e-grid")===this.parent.element},s.prototype.ensureFrozenHeader=function(e){return!(!this.parent.isFrozenGrid()&&!this.parent.frozenRows||!(0,l.oq)(e,U.header))},s.prototype.ensureDisabledStatus=function(e){var t=!1;switch(e){case"AutoFitAll":case"AutoFit":t=!(this.parent.ensureModuleInjected(Nr)&&!this.parent.isEdit)||this.targetColumn&&!this.targetColumn.field&&"AutoFit"===e;break;case"Group":(!this.parent.allowGrouping||this.parent.ensureModuleInjected(Kt)&&this.targetColumn&&this.parent.groupSettings.columns.indexOf(this.targetColumn.field)>=0||this.targetColumn&&!this.targetColumn.field)&&(t=!0);break;case"Ungroup":(!this.parent.allowGrouping||!this.parent.ensureModuleInjected(Kt)||this.parent.ensureModuleInjected(Kt)&&this.targetColumn&&this.parent.groupSettings.columns.indexOf(this.targetColumn.field)<0)&&(t=!0);break;case"Edit":case"Delete":case"Save":case"Cancel":(!this.parent.editModule||0===this.parent.getDataRows().length)&&(t=!0);break;case"Copy":(0===this.parent.getSelectedRowIndexes().length&&0===this.parent.getSelectedRowCellIndexes().length||0===this.parent.getCurrentViewRecords().length)&&(t=!0);break;case"export":(!this.parent.allowExcelExport||!this.parent.excelExport||!this.parent.ensureModuleInjected(ua)&&!this.parent.ensureModuleInjected(ca))&&(t=!0);break;case"PdfExport":(!this.parent.allowPdfExport||!this.parent.ensureModuleInjected(ua))&&(t=!0);break;case"ExcelExport":case"CsvExport":(!this.parent.allowExcelExport||!this.parent.ensureModuleInjected(ca))&&(t=!0);break;case"SortAscending":case"SortDescending":if(!this.parent.allowSorting||!this.parent.ensureModuleInjected(ui)||this.targetColumn&&!this.targetColumn.field)t=!0;else if(this.parent.ensureModuleInjected(ui)&&this.parent.sortSettings.columns.length>0&&this.targetColumn)for(var i=this.parent.sortSettings.columns,r=0;r<i.length;r++)i[r].field===this.targetColumn.field&&i[r].direction.toLowerCase()===e.toLowerCase().replace("sort","").toLocaleLowerCase()&&(t=!0);break;case"FirstPage":case"PrevPage":(!this.parent.allowPaging||!this.parent.ensureModuleInjected(Hr)||0===this.parent.getCurrentViewRecords().length||this.parent.ensureModuleInjected(Hr)&&1===this.parent.pageSettings.currentPage)&&(t=!0);break;case"LastPage":case"NextPage":(!this.parent.allowPaging||!this.parent.ensureModuleInjected(Hr)||0===this.parent.getCurrentViewRecords().length||this.parent.ensureModuleInjected(Hr)&&this.parent.pageSettings.currentPage===this.getLastPage())&&(t=!0)}return t},s.prototype.getContextMenu=function(){return this.element},s.prototype.destroy=function(){var e=this.parent.element;!e||!e.querySelector("."+pe)&&!e.querySelector("."+ae)||(this.contextMenu.destroy(),this.element.parentNode&&(0,l.Od)(this.element),this.removeEventListener(),this.parent.element.classList.remove("e-noselect"))},s.prototype.getModuleName=function(){return"contextMenu"},s.prototype.generateID=function(e){return this.gridID+"_cmenu_"+e},s.prototype.getKeyFromId=function(e){return e.replace(this.gridID+"_cmenu_","")},s.prototype.buildDefaultItems=function(e){var t;switch(e){case"AutoFitAll":case"AutoFit":t={target:U.header};break;case"Group":t={target:U.header,iconCss:U.group};break;case"Ungroup":t={target:U.header,iconCss:U.ungroup};break;case"Edit":t={target:U.content,iconCss:U.editIcon};break;case"Delete":t={target:U.content,iconCss:U.delete};break;case"Save":t={target:U.edit,iconCss:U.save};break;case"Cancel":t={target:U.edit,iconCss:U.cancel};break;case"Copy":t={target:U.content,iconCss:U.copy};break;case"export":t={target:U.content};break;case"PdfExport":t={target:U.content,iconCss:U.pdf};break;case"ExcelExport":t={target:U.content,iconCss:U.excel};break;case"CsvExport":t={target:U.content,iconCss:U.csv};break;case"SortAscending":t={target:U.header,iconCss:U.ascending};break;case"SortDescending":t={target:U.header,iconCss:U.descending};break;case"FirstPage":t={target:U.pager,iconCss:U.fPage};break;case"PrevPage":t={target:U.pager,iconCss:U.pPage};break;case"LastPage":t={target:U.pager,iconCss:U.lPage};break;case"NextPage":t={target:U.pager,iconCss:U.nPage}}return this.defaultItems[e]={text:this.getLocaleText(e),id:this.generateID(e),target:t.target,iconCss:t.iconCss?"e-icons "+t.iconCss:""},this.defaultItems[e]},s.prototype.getDefaultItems=function(){return["AutoFitAll","AutoFit","Group","Ungroup","Edit","Delete","Save","Cancel","Copy","export","PdfExport","ExcelExport","CsvExport","SortAscending","SortDescending","FirstPage","PrevPage","LastPage","NextPage"]},s.prototype.setLocaleKey=function(){return{AutoFitAll:"autoFitAll",AutoFit:"autoFit",Copy:"Copy",Group:"Group",Ungroup:"Ungroup",Edit:"EditRecord",Delete:"DeleteRecord",Save:"Save",Cancel:"CancelButton",PdfExport:"Pdfexport",ExcelExport:"Excelexport",CsvExport:"Csvexport",export:"Export",SortAscending:"SortAscending",SortDescending:"SortDescending",FirstPage:"FirstPage",LastPage:"LastPage",PrevPage:"PreviousPage",NextPage:"NextPage"}},s.prototype.getColumn=function(e){var t=(0,l.oq)(e.target,"th.e-headercell");if(t){var i=t.querySelector(".e-headercelldiv, .e-stackedheadercelldiv").getAttribute("e-mappinguid");return this.parent.getColumnByUid(i)}return this.parent.getRowInfo(e.target).column||null},s.prototype.selectRow=function(e,t){this.cell=e.target,this.row=(0,l.oq)(e.target,"tr.e-row")||this.row,this.row&&t&&!w(e.target,"e-gridpager")&&this.parent.selectRow(parseInt(this.row.getAttribute(O),10))},s}()}}]);